function N2(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function $b(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xb={exports:{}},Hu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2=Symbol.for("react.transitional.element"),j2=Symbol.for("react.fragment");function Jb(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:A2,type:t,key:s,ref:e!==void 0?e:null,props:n}}Hu.Fragment=j2;Hu.jsx=Jb;Hu.jsxs=Jb;Xb.exports=Hu;var l=Xb.exports,Wb={exports:{}},le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=Symbol.for("react.transitional.element"),C2=Symbol.for("react.portal"),I2=Symbol.for("react.fragment"),R2=Symbol.for("react.strict_mode"),k2=Symbol.for("react.profiler"),D2=Symbol.for("react.consumer"),O2=Symbol.for("react.context"),M2=Symbol.for("react.forward_ref"),V2=Symbol.for("react.suspense"),P2=Symbol.for("react.memo"),Zb=Symbol.for("react.lazy"),L2=Symbol.for("react.activity"),T0=Symbol.iterator;function U2(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var ev={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tv=Object.assign,nv={};function pr(t,e,n){this.props=t,this.context=e,this.refs=nv,this.updater=n||ev}pr.prototype.isReactComponent={};pr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sv(){}sv.prototype=pr.prototype;function Cm(t,e,n){this.props=t,this.context=e,this.refs=nv,this.updater=n||ev}var Im=Cm.prototype=new sv;Im.constructor=Cm;tv(Im,pr.prototype);Im.isPureReactComponent=!0;var S0=Array.isArray;function Zh(){}var ze={H:null,A:null,T:null,S:null},iv=Object.prototype.hasOwnProperty;function Rm(t,e,n){var s=n.ref;return{$$typeof:jm,type:t,key:e,ref:s!==void 0?s:null,props:n}}function z2(t,e){return Rm(t.type,e,t.props)}function km(t){return typeof t=="object"&&t!==null&&t.$$typeof===jm}function B2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N0=/\/+/g;function nh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B2(""+t.key):e.toString(36)}function q2(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Zh,Zh):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ma(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case jm:case C2:r=!0;break;case Zb:return r=t._init,ma(r(t._payload),e,n,s,i)}}if(r)return i=i(t),r=s===""?"."+nh(t,0):s,S0(i)?(n="",r!=null&&(n=r.replace(N0,"$&/")+"/"),ma(i,e,n,"",function(d){return d})):i!=null&&(km(i)&&(i=z2(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(N0,"$&/")+"/")+r)),e.push(i)),1;r=0;var c=s===""?".":s+":";if(S0(t))for(var u=0;u<t.length;u++)s=t[u],a=c+nh(s,u),r+=ma(s,e,n,a,i);else if(u=U2(t),typeof u=="function")for(t=u.call(t),u=0;!(s=t.next()).done;)s=s.value,a=c+nh(s,u++),r+=ma(s,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return ma(q2(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function Yo(t,e,n){if(t==null)return t;var s=[],i=0;return ma(t,s,"","",function(a){return e.call(n,a,i++)}),s}function H2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var A0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},F2={map:Yo,forEach:function(t,e,n){Yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yo(t,function(){e++}),e},toArray:function(t){return Yo(t,function(e){return e})||[]},only:function(t){if(!km(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Activity=L2;le.Children=F2;le.Component=pr;le.Fragment=I2;le.Profiler=k2;le.PureComponent=Cm;le.StrictMode=R2;le.Suspense=V2;le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ze;le.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ze.H.useMemoCache(t)}};le.cache=function(t){return function(){return t.apply(null,arguments)}};le.cacheSignal=function(){return null};le.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=tv({},t.props),i=t.key;if(e!=null)for(a in e.key!==void 0&&(i=""+e.key),e)!iv.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(s[a]=e[a]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var r=Array(a),c=0;c<a;c++)r[c]=arguments[c+2];s.children=r}return Rm(t.type,i,s)};le.createContext=function(t){return t={$$typeof:O2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:D2,_context:t},t};le.createElement=function(t,e,n){var s,i={},a=null;if(e!=null)for(s in e.key!==void 0&&(a=""+e.key),e)iv.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var c=Array(r),u=0;u<r;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(s in r=t.defaultProps,r)i[s]===void 0&&(i[s]=r[s]);return Rm(t,a,i)};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:M2,render:t}};le.isValidElement=km;le.lazy=function(t){return{$$typeof:Zb,_payload:{_status:-1,_result:t},_init:H2}};le.memo=function(t,e){return{$$typeof:P2,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=ze.T,n={};ze.T=n;try{var s=t(),i=ze.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Zh,A0)}catch(a){A0(a)}finally{e!==null&&n.types!==null&&(e.types=n.types),ze.T=e}};le.unstable_useCacheRefresh=function(){return ze.H.useCacheRefresh()};le.use=function(t){return ze.H.use(t)};le.useActionState=function(t,e,n){return ze.H.useActionState(t,e,n)};le.useCallback=function(t,e){return ze.H.useCallback(t,e)};le.useContext=function(t){return ze.H.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t,e){return ze.H.useDeferredValue(t,e)};le.useEffect=function(t,e){return ze.H.useEffect(t,e)};le.useEffectEvent=function(t){return ze.H.useEffectEvent(t)};le.useId=function(){return ze.H.useId()};le.useImperativeHandle=function(t,e,n){return ze.H.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return ze.H.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return ze.H.useLayoutEffect(t,e)};le.useMemo=function(t,e){return ze.H.useMemo(t,e)};le.useOptimistic=function(t,e){return ze.H.useOptimistic(t,e)};le.useReducer=function(t,e,n){return ze.H.useReducer(t,e,n)};le.useRef=function(t){return ze.H.useRef(t)};le.useState=function(t){return ze.H.useState(t)};le.useSyncExternalStore=function(t,e,n){return ze.H.useSyncExternalStore(t,e,n)};le.useTransition=function(){return ze.H.useTransition()};le.version="19.2.0";Wb.exports=le;var j=Wb.exports;const Hc=$b(j),G2=N2({__proto__:null,default:Hc},[j]);var av={exports:{}},Fu={},rv={exports:{}},lv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,P){var F=K.length;K.push(P);e:for(;0<F;){var L=F-1>>>1,H=K[L];if(0<i(H,P))K[L]=P,K[F]=H,F=L;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var P=K[0],F=K.pop();if(F!==P){K[0]=F;e:for(var L=0,H=K.length,$=H>>>1;L<$;){var W=2*(L+1)-1,Me=K[W],G=W+1,Q=K[G];if(0>i(Me,F))G<H&&0>i(Q,Me)?(K[L]=Q,K[G]=F,L=G):(K[L]=Me,K[W]=F,L=W);else if(G<H&&0>i(Q,F))K[L]=Q,K[G]=F,L=G;else break e}}return P}function i(K,P){var F=K.sortIndex-P.sortIndex;return F!==0?F:K.id-P.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var r=Date,c=r.now();t.unstable_now=function(){return r.now()-c}}var u=[],d=[],f=1,m=null,g=3,x=!1,C=!1,I=!1,D=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function R(K){for(var P=n(d);P!==null;){if(P.callback===null)s(d);else if(P.startTime<=K)s(d),P.sortIndex=P.expirationTime,e(u,P);else break;P=n(d)}}function M(K){if(I=!1,R(K),!C)if(n(u)!==null)C=!0,U||(U=!0,k());else{var P=n(d);P!==null&&Ie(M,P.startTime-K)}}var U=!1,v=-1,y=5,b=-1;function S(){return D?!0:!(t.unstable_now()-b<y)}function N(){if(D=!1,U){var K=t.unstable_now();b=K;var P=!0;try{e:{C=!1,I&&(I=!1,_(v),v=-1),x=!0;var F=g;try{t:{for(R(K),m=n(u);m!==null&&!(m.expirationTime>K&&S());){var L=m.callback;if(typeof L=="function"){m.callback=null,g=m.priorityLevel;var H=L(m.expirationTime<=K);if(K=t.unstable_now(),typeof H=="function"){m.callback=H,R(K),P=!0;break t}m===n(u)&&s(u),R(K)}else s(u);m=n(u)}if(m!==null)P=!0;else{var $=n(d);$!==null&&Ie(M,$.startTime-K),P=!1}}break e}finally{m=null,g=F,x=!1}P=void 0}}finally{P?k():U=!1}}}var k;if(typeof w=="function")k=function(){w(N)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Ee=A.port2;A.port1.onmessage=N,k=function(){Ee.postMessage(null)}}else k=function(){T(N,0)};function Ie(K,P){v=T(function(){K(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(K){switch(g){case 1:case 2:case 3:var P=3;break;default:P=g}var F=g;g=P;try{return K()}finally{g=F}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(K,P){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var F=g;g=K;try{return P()}finally{g=F}},t.unstable_scheduleCallback=function(K,P,F){var L=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?L+F:L):F=L,K){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,K={id:f++,callback:P,priorityLevel:K,startTime:F,expirationTime:H,sortIndex:-1},F>L?(K.sortIndex=F,e(d,K),n(u)===null&&K===n(d)&&(I?(_(v),v=-1):I=!0,Ie(M,F-L))):(K.sortIndex=H,e(u,K),C||x||(C=!0,U||(U=!0,k()))),K},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(K){var P=g;return function(){var F=g;g=P;try{return K.apply(this,arguments)}finally{g=F}}}})(lv);rv.exports=lv;var K2=rv.exports,ov={exports:{}},Dt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2=j;function cv(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ns(){}var Rt={d:{f:Ns,r:function(){throw Error(cv(522))},D:Ns,C:Ns,L:Ns,m:Ns,X:Ns,S:Ns,M:Ns},p:0,findDOMNode:null},Y2=Symbol.for("react.portal");function $2(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y2,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var pl=Q2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Gu(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Rt;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(cv(299));return $2(t,e,null,n)};Dt.flushSync=function(t){var e=pl.T,n=Rt.p;try{if(pl.T=null,Rt.p=2,t)return t()}finally{pl.T=e,Rt.p=n,Rt.d.f()}};Dt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Rt.d.C(t,e))};Dt.prefetchDNS=function(t){typeof t=="string"&&Rt.d.D(t)};Dt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Gu(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Rt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:a}):n==="script"&&Rt.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Dt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Gu(e.as,e.crossOrigin);Rt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Rt.d.M(t)};Dt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Gu(n,e.crossOrigin);Rt.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Dt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Gu(e.as,e.crossOrigin);Rt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Rt.d.m(t)};Dt.requestFormReset=function(t){Rt.d.r(t)};Dt.unstable_batchedUpdates=function(t,e){return t(e)};Dt.useFormState=function(t,e,n){return pl.H.useFormState(t,e,n)};Dt.useFormStatus=function(){return pl.H.useHostTransitionStatus()};Dt.version="19.2.0";function uv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uv)}catch(t){console.error(t)}}uv(),ov.exports=Dt;var X2=ov.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ot=K2,dv=j,J2=X2;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function hv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mv(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function j0(t){if(uo(t)!==t)throw Error(B(188))}function W2(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return j0(i),t;if(a===s)return j0(i),e;a=a.sibling}throw Error(B(188))}if(n.return!==s.return)n=i,s=a;else{for(var r=!1,c=i.child;c;){if(c===n){r=!0,n=i,s=a;break}if(c===s){r=!0,s=i,n=a;break}c=c.sibling}if(!r){for(c=a.child;c;){if(c===n){r=!0,n=a,s=i;break}if(c===s){r=!0,s=a,n=i;break}c=c.sibling}if(!r)throw Error(B(189))}}if(n.alternate!==s)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function pv(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=pv(t),e!==null)return e;t=t.sibling}return null}var Be=Object.assign,Z2=Symbol.for("react.element"),$o=Symbol.for("react.transitional.element"),il=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),gv=Symbol.for("react.strict_mode"),ef=Symbol.for("react.profiler"),yv=Symbol.for("react.consumer"),Jn=Symbol.for("react.context"),Dm=Symbol.for("react.forward_ref"),tf=Symbol.for("react.suspense"),nf=Symbol.for("react.suspense_list"),Om=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),sf=Symbol.for("react.activity"),eS=Symbol.for("react.memo_cache_sentinel"),C0=Symbol.iterator;function Jr(t){return t===null||typeof t!="object"?null:(t=C0&&t[C0]||t["@@iterator"],typeof t=="function"?t:null)}var tS=Symbol.for("react.client.reference");function af(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===tS?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _a:return"Fragment";case ef:return"Profiler";case gv:return"StrictMode";case tf:return"Suspense";case nf:return"SuspenseList";case sf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case il:return"Portal";case Jn:return t.displayName||"Context";case yv:return(t._context.displayName||"Context")+".Consumer";case Dm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Om:return e=t.displayName||null,e!==null?e:af(t.type)||"Memo";case js:e=t._payload,t=t._init;try{return af(t(e))}catch{}}return null}var al=Array.isArray,ie=dv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=J2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Di={pending:!1,data:null,method:null,action:null},rf=[],Ea=-1;function Un(t){return{current:t}}function ft(t){0>Ea||(t.current=rf[Ea],rf[Ea]=null,Ea--)}function Oe(t,e){Ea++,rf[Ea]=t.current,t.current=e}var In=Un(null),Vl=Un(null),Gs=Un(null),Fc=Un(null);function Gc(t,e){switch(Oe(Gs,e),Oe(Vl,t),Oe(In,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?My(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=My(e),t=PE(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ft(In),Oe(In,t)}function Ka(){ft(In),ft(Vl),ft(Gs)}function lf(t){t.memoizedState!==null&&Oe(Fc,t);var e=In.current,n=PE(e,t.type);e!==n&&(Oe(Vl,t),Oe(In,n))}function Kc(t){Vl.current===t&&(ft(In),ft(Vl)),Fc.current===t&&(ft(Fc),Ql._currentValue=Di)}var sh,I0;function Ai(t){if(sh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sh=e&&e[1]||"",I0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sh+t+I0}var ih=!1;function ah(t,e){if(!t||ih)return"";ih=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(x){var g=x}Reflect.construct(t,[],m)}else{try{m.call()}catch(x){g=x}t.call(m.prototype)}}else{try{throw Error()}catch(x){g=x}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(x){if(x&&g&&typeof x.stack=="string")return[x.stack,g.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=s.DetermineComponentFrameRoot(),r=a[0],c=a[1];if(r&&c){var u=r.split(`
`),d=c.split(`
`);for(i=s=0;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;for(;i<d.length&&!d[i].includes("DetermineComponentFrameRoot");)i++;if(s===u.length||i===d.length)for(s=u.length-1,i=d.length-1;1<=s&&0<=i&&u[s]!==d[i];)i--;for(;1<=s&&0<=i;s--,i--)if(u[s]!==d[i]){if(s!==1||i!==1)do if(s--,i--,0>i||u[s]!==d[i]){var f=`
`+u[s].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=s&&0<=i);break}}}finally{ih=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ai(n):""}function nS(t,e){switch(t.tag){case 26:case 27:case 5:return Ai(t.type);case 16:return Ai("Lazy");case 13:return t.child!==e&&e!==null?Ai("Suspense Fallback"):Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return ah(t.type,!1);case 11:return ah(t.type.render,!1);case 1:return ah(t.type,!0);case 31:return Ai("Activity");default:return""}}function R0(t){try{var e="",n=null;do e+=nS(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var of=Object.prototype.hasOwnProperty,Mm=ot.unstable_scheduleCallback,rh=ot.unstable_cancelCallback,sS=ot.unstable_shouldYield,iS=ot.unstable_requestPaint,Qt=ot.unstable_now,aS=ot.unstable_getCurrentPriorityLevel,xv=ot.unstable_ImmediatePriority,bv=ot.unstable_UserBlockingPriority,Qc=ot.unstable_NormalPriority,rS=ot.unstable_LowPriority,vv=ot.unstable_IdlePriority,lS=ot.log,oS=ot.unstable_setDisableYieldValue,ho=null,Yt=null;function Ls(t){if(typeof lS=="function"&&oS(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(ho,t)}catch{}}var $t=Math.clz32?Math.clz32:dS,cS=Math.log,uS=Math.LN2;function dS(t){return t>>>=0,t===0?32:31-(cS(t)/uS|0)|0}var Xo=256,Jo=262144,Wo=4194304;function ji(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ku(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,a=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var c=s&134217727;return c!==0?(s=c&~a,s!==0?i=ji(s):(r&=c,r!==0?i=ji(r):n||(n=c&~t,n!==0&&(i=ji(n))))):(c=s&~a,c!==0?i=ji(c):r!==0?i=ji(r):n||(n=s&~t,n!==0&&(i=ji(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function fo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function hS(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _v(){var t=Wo;return Wo<<=1,!(Wo&62914560)&&(Wo=4194304),t}function lh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mo(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fS(t,e,n,s,i,a){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var c=t.entanglements,u=t.expirationTimes,d=t.hiddenUpdates;for(n=r&~n;0<n;){var f=31-$t(n),m=1<<f;c[f]=0,u[f]=-1;var g=d[f];if(g!==null)for(d[f]=null,f=0;f<g.length;f++){var x=g[f];x!==null&&(x.lane&=-536870913)}n&=~m}s!==0&&Ev(t,s,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(r&~e))}function Ev(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-$t(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function wv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-$t(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function Tv(t,e){var n=e&-e;return n=n&42?1:Vm(n),n&(t.suspendedLanes|e)?0:n}function Vm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pm(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Sv(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:YE(t.type))}function k0(t,e){var n=Te.p;try{return Te.p=t,e()}finally{Te.p=n}}var xi=Math.random().toString(36).slice(2),gt="__reactFiber$"+xi,zt="__reactProps$"+xi,gr="__reactContainer$"+xi,cf="__reactEvents$"+xi,mS="__reactListeners$"+xi,pS="__reactHandles$"+xi,D0="__reactResources$"+xi,po="__reactMarker$"+xi;function Lm(t){delete t[gt],delete t[zt],delete t[cf],delete t[mS],delete t[pS]}function wa(t){var e=t[gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zy(t);t!==null;){if(n=t[gt])return n;t=zy(t)}return e}t=n,n=t.parentNode}return null}function yr(t){if(t=t[gt]||t[gr]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function rl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function Oa(t){var e=t[D0];return e||(e=t[D0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ht(t){t[po]=!0}var Nv=new Set,Av={};function Ji(t,e){Qa(t,e),Qa(t+"Capture",e)}function Qa(t,e){for(Av[t]=e,t=0;t<e.length;t++)Nv.add(e[t])}var gS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),O0={},M0={};function yS(t){return of.call(M0,t)?!0:of.call(O0,t)?!1:gS.test(t)?M0[t]=!0:(O0[t]=!0,!1)}function gc(t,e,n){if(yS(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Zo(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Hn(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xS(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(r){n=""+r,a.call(this,r)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uf(t){if(!t._valueTracker){var e=jv(t)?"checked":"value";t._valueTracker=xS(t,e,""+t[e])}}function Cv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=jv(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Yc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var bS=/[\n"\\]/g;function sn(t){return t.replace(bS,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function df(t,e,n,s,i,a,r,c){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+en(e)):t.value!==""+en(e)&&(t.value=""+en(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?hf(t,r,en(e)):n!=null?hf(t,r,en(n)):s!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?t.name=""+en(c):t.removeAttribute("name")}function Iv(t,e,n,s,i,a,r,c){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null)){uf(t);return}n=n!=null?""+en(n):"",e=e!=null?""+en(e):n,c||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=c?t.checked:!!s,t.defaultChecked=!!s,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),uf(t)}function hf(t,e,n){e==="number"&&Yc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ma(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+en(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rv(t,e,n){if(e!=null&&(e=""+en(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+en(n):""}function kv(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(B(92));if(al(s)){if(1<s.length)throw Error(B(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=en(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),uf(t)}function Ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function V0(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||vS.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Dv(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&V0(t,i,s)}else for(var a in e)e.hasOwnProperty(a)&&V0(t,a,e[a])}function Um(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _S=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ES=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yc(t){return ES.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Wn(){}var ff=null;function zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ta=null,Va=null;function P0(t){var e=yr(t);if(e&&(t=e.stateNode)){var n=t[zt]||null;e:switch(t=e.stateNode,e.type){case"input":if(df(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+sn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[zt]||null;if(!i)throw Error(B(90));df(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&Cv(s)}break e;case"textarea":Rv(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ma(t,!!n.multiple,e,!1)}}}var oh=!1;function Ov(t,e,n){if(oh)return t(e,n);oh=!0;try{var s=t(e);return s}finally{if(oh=!1,(Ta!==null||Va!==null)&&(id(),Ta&&(e=Ta,t=Va,Va=Ta=null,P0(e),t)))for(e=0;e<t.length;e++)P0(t[e])}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var s=n[zt]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mf=!1;if(ls)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){mf=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{mf=!1}var Us=null,Bm=null,xc=null;function Mv(){if(xc)return xc;var t,e=Bm,n=e.length,s,i="value"in Us?Us.value:Us.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var r=n-t;for(s=1;s<=r&&e[n-s]===i[a-s];s++);return xc=i.slice(t,1<s?1-s:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ec(){return!0}function L0(){return!1}function Bt(t){function e(n,s,i,a,r){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ec:L0,this.isPropagationStopped=L0,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=Bt(Wi),go=Be({},Wi,{view:0,detail:0}),wS=Bt(go),ch,uh,Zr,Yu=Be({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zr&&(Zr&&t.type==="mousemove"?(ch=t.screenX-Zr.screenX,uh=t.screenY-Zr.screenY):uh=ch=0,Zr=t),ch)},movementY:function(t){return"movementY"in t?t.movementY:uh}}),U0=Bt(Yu),TS=Be({},Yu,{dataTransfer:0}),SS=Bt(TS),NS=Be({},go,{relatedTarget:0}),dh=Bt(NS),AS=Be({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),jS=Bt(AS),CS=Be({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IS=Bt(CS),RS=Be({},Wi,{data:0}),z0=Bt(RS),kS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OS[t])?!!e[t]:!1}function qm(){return MS}var VS=Be({},go,{key:function(t){if(t.key){var e=kS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qm,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PS=Bt(VS),LS=Be({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B0=Bt(LS),US=Be({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qm}),zS=Bt(US),BS=Be({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qS=Bt(BS),HS=Be({},Yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FS=Bt(HS),GS=Be({},Wi,{newState:0,oldState:0}),KS=Bt(GS),QS=[9,13,27,32],Hm=ls&&"CompositionEvent"in window,gl=null;ls&&"documentMode"in document&&(gl=document.documentMode);var YS=ls&&"TextEvent"in window&&!gl,Vv=ls&&(!Hm||gl&&8<gl&&11>=gl),q0=" ",H0=!1;function Pv(t,e){switch(t){case"keyup":return QS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sa=!1;function $S(t,e){switch(t){case"compositionend":return Lv(e);case"keypress":return e.which!==32?null:(H0=!0,q0);case"textInput":return t=e.data,t===q0&&H0?null:t;default:return null}}function XS(t,e){if(Sa)return t==="compositionend"||!Hm&&Pv(t,e)?(t=Mv(),xc=Bm=Us=null,Sa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vv&&e.locale!=="ko"?null:e.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JS[t.type]:e==="textarea"}function Uv(t,e,n,s){Ta?Va?Va.push(s):Va=[s]:Ta=s,e=hu(e,"onChange"),0<e.length&&(n=new Qu("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var yl=null,Ll=null;function WS(t){OE(t,0)}function $u(t){var e=rl(t);if(Cv(e))return t}function G0(t,e){if(t==="change")return e}var zv=!1;if(ls){var hh;if(ls){var fh="oninput"in document;if(!fh){var K0=document.createElement("div");K0.setAttribute("oninput","return;"),fh=typeof K0.oninput=="function"}hh=fh}else hh=!1;zv=hh&&(!document.documentMode||9<document.documentMode)}function Q0(){yl&&(yl.detachEvent("onpropertychange",Bv),Ll=yl=null)}function Bv(t){if(t.propertyName==="value"&&$u(Ll)){var e=[];Uv(e,Ll,t,zm(t)),Ov(WS,e)}}function ZS(t,e,n){t==="focusin"?(Q0(),yl=e,Ll=n,yl.attachEvent("onpropertychange",Bv)):t==="focusout"&&Q0()}function eN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $u(Ll)}function tN(t,e){if(t==="click")return $u(e)}function nN(t,e){if(t==="input"||t==="change")return $u(e)}function sN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:sN;function Ul(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!of.call(e,i)||!Jt(t[i],e[i]))return!1}return!0}function Y0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $0(t,e){var n=Y0(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y0(n)}}function qv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hv(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Yc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yc(t.document)}return e}function Fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var iN=ls&&"documentMode"in document&&11>=document.documentMode,Na=null,pf=null,xl=null,gf=!1;function X0(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gf||Na==null||Na!==Yc(s)||(s=Na,"selectionStart"in s&&Fm(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),xl&&Ul(xl,s)||(xl=s,s=hu(pf,"onSelect"),0<s.length&&(e=new Qu("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Na)))}function Ni(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Aa={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionrun:Ni("Transition","TransitionRun"),transitionstart:Ni("Transition","TransitionStart"),transitioncancel:Ni("Transition","TransitionCancel"),transitionend:Ni("Transition","TransitionEnd")},mh={},Fv={};ls&&(Fv=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function Zi(t){if(mh[t])return mh[t];if(!Aa[t])return t;var e=Aa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fv)return mh[t]=e[n];return t}var Gv=Zi("animationend"),Kv=Zi("animationiteration"),Qv=Zi("animationstart"),aN=Zi("transitionrun"),rN=Zi("transitionstart"),lN=Zi("transitioncancel"),Yv=Zi("transitionend"),$v=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function En(t,e){$v.set(t,e),Ji(e,[t])}var $c=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Zt=[],ja=0,Gm=0;function Xu(){for(var t=ja,e=Gm=ja=0;e<t;){var n=Zt[e];Zt[e++]=null;var s=Zt[e];Zt[e++]=null;var i=Zt[e];Zt[e++]=null;var a=Zt[e];if(Zt[e++]=null,s!==null&&i!==null){var r=s.pending;r===null?i.next=i:(i.next=r.next,r.next=i),s.pending=i}a!==0&&Xv(n,i,a)}}function Ju(t,e,n,s){Zt[ja++]=t,Zt[ja++]=e,Zt[ja++]=n,Zt[ja++]=s,Gm|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Km(t,e,n,s){return Ju(t,e,n,s),Xc(t)}function ea(t,e){return Ju(t,null,null,e),Xc(t)}function Xv(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,s=a.alternate,s!==null&&(s.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-$t(n),t=a.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),a):null}function Xc(t){if(50<Al)throw Al=0,Lf=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ca={};function oN(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,s){return new oN(t,e,n,s)}function Qm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ns(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Jv(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function vc(t,e,n,s,i,a){var r=0;if(s=t,typeof t=="function")Qm(t)&&(r=1);else if(typeof t=="string")r=fA(t,n,In.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case sf:return t=Gt(31,n,e,i),t.elementType=sf,t.lanes=a,t;case _a:return Oi(n.children,i,a,e);case gv:r=8,i|=24;break;case ef:return t=Gt(12,n,e,i|2),t.elementType=ef,t.lanes=a,t;case tf:return t=Gt(13,n,e,i),t.elementType=tf,t.lanes=a,t;case nf:return t=Gt(19,n,e,i),t.elementType=nf,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jn:r=10;break e;case yv:r=9;break e;case Dm:r=11;break e;case Om:r=14;break e;case js:r=16,s=null;break e}r=29,n=Error(B(130,t===null?"null":typeof t,"")),s=null}return e=Gt(r,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function Oi(t,e,n,s){return t=Gt(7,t,s,e),t.lanes=n,t}function ph(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function Wv(t){var e=Gt(18,null,null,0);return e.stateNode=t,e}function gh(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var J0=new WeakMap;function an(t,e){if(typeof t=="object"&&t!==null){var n=J0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:R0(e)},J0.set(t,e),e)}return{value:t,source:e,stack:R0(e)}}var Ia=[],Ra=0,Jc=null,zl=0,tn=[],nn=0,oi=null,An=1,jn="";function $n(t,e){Ia[Ra++]=zl,Ia[Ra++]=Jc,Jc=t,zl=e}function Zv(t,e,n){tn[nn++]=An,tn[nn++]=jn,tn[nn++]=oi,oi=t;var s=An;t=jn;var i=32-$t(s)-1;s&=~(1<<i),n+=1;var a=32-$t(e)+i;if(30<a){var r=i-i%5;a=(s&(1<<r)-1).toString(32),s>>=r,i-=r,An=1<<32-$t(e)+i|n<<i|s,jn=a+t}else An=1<<a|n<<i|s,jn=t}function Ym(t){t.return!==null&&($n(t,1),Zv(t,1,0))}function $m(t){for(;t===Jc;)Jc=Ia[--Ra],Ia[Ra]=null,zl=Ia[--Ra],Ia[Ra]=null;for(;t===oi;)oi=tn[--nn],tn[nn]=null,jn=tn[--nn],tn[nn]=null,An=tn[--nn],tn[nn]=null}function e_(t,e){tn[nn++]=An,tn[nn++]=jn,tn[nn++]=oi,An=e.id,jn=e.overflow,oi=t}var yt=null,Le=null,xe=!1,Ks=null,rn=!1,xf=Error(B(519));function ci(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bl(an(e,t)),xf}function W0(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[gt]=t,e[zt]=s,n){case"dialog":he("cancel",e),he("close",e);break;case"iframe":case"object":case"embed":he("load",e);break;case"video":case"audio":for(n=0;n<Gl.length;n++)he(Gl[n],e);break;case"source":he("error",e);break;case"img":case"image":case"link":he("error",e),he("load",e);break;case"details":he("toggle",e);break;case"input":he("invalid",e),Iv(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":he("invalid",e);break;case"textarea":he("invalid",e),kv(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||VE(e.textContent,n)?(s.popover!=null&&(he("beforetoggle",e),he("toggle",e)),s.onScroll!=null&&he("scroll",e),s.onScrollEnd!=null&&he("scrollend",e),s.onClick!=null&&(e.onclick=Wn),e=!0):e=!1,e||ci(t,!0)}function Z0(t){for(yt=t.return;yt;)switch(yt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:yt=yt.return}}function ha(t){if(t!==yt)return!1;if(!xe)return Z0(t),xe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Hf(t.type,t.memoizedProps)),n=!n),n&&Le&&ci(t),Z0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Le=Uy(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Le=Uy(t)}else e===27?(e=Le,bi(t.type)?(t=Qf,Qf=null,Le=t):Le=e):Le=yt?un(t.stateNode.nextSibling):null;return!0}function Bi(){Le=yt=null,xe=!1}function yh(){var t=Ks;return t!==null&&(Pt===null?Pt=t:Pt.push.apply(Pt,t),Ks=null),t}function Bl(t){Ks===null?Ks=[t]:Ks.push(t)}var bf=Un(null),ta=null,Zn=null;function Is(t,e,n){Oe(bf,e._currentValue),e._currentValue=n}function ss(t){t._currentValue=bf.current,ft(bf)}function vf(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function _f(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var r=i.child;a=a.firstContext;e:for(;a!==null;){var c=a;a=i;for(var u=0;u<e.length;u++)if(c.context===e[u]){a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),vf(a.return,n,t),s||(r=null);break e}a=c.next}}else if(i.tag===18){if(r=i.return,r===null)throw Error(B(341));r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),vf(r,n,t),r=null}else r=i.child;if(r!==null)r.return=i;else for(r=i;r!==null;){if(r===t){r=null;break}if(i=r.sibling,i!==null){i.return=r.return,r=i;break}r=r.return}i=r}}function xr(t,e,n,s){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var r=i.alternate;if(r===null)throw Error(B(387));if(r=r.memoizedProps,r!==null){var c=i.type;Jt(i.pendingProps.value,r.value)||(t!==null?t.push(c):t=[c])}}else if(i===Fc.current){if(r=i.alternate,r===null)throw Error(B(387));r.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Ql):t=[Ql])}i=i.return}t!==null&&_f(e,t,n,s),e.flags|=262144}function Wc(t){for(t=t.firstContext;t!==null;){if(!Jt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function qi(t){ta=t,Zn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return t_(ta,t)}function tc(t,e){return ta===null&&qi(t),t_(t,e)}function t_(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Zn===null){if(t===null)throw Error(B(308));Zn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Zn=Zn.next=e;return n}var cN=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},uN=ot.unstable_scheduleCallback,dN=ot.unstable_NormalPriority,et={$$typeof:Jn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xm(){return{controller:new cN,data:new Map,refCount:0}}function yo(t){t.refCount--,t.refCount===0&&uN(dN,function(){t.controller.abort()})}var bl=null,Ef=0,$a=0,Pa=null;function hN(t,e){if(bl===null){var n=bl=[];Ef=0,$a=_p(),Pa={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Ef++,e.then(ey,ey),e}function ey(){if(--Ef===0&&bl!==null){Pa!==null&&(Pa.status="fulfilled");var t=bl;bl=null,$a=0,Pa=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function fN(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var ty=ie.S;ie.S=function(t,e){pE=Qt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&hN(t,e),ty!==null&&ty(t,e)};var Mi=Un(null);function Jm(){var t=Mi.current;return t!==null?t:ke.pooledCache}function _c(t,e){e===null?Oe(Mi,Mi.current):Oe(Mi,e.pool)}function n_(){var t=Jm();return t===null?null:{parent:et._currentValue,pool:t}}var br=Error(B(460)),Wm=Error(B(474)),Wu=Error(B(542)),Zc={then:function(){}};function ny(t){return t=t.status,t==="fulfilled"||t==="rejected"}function s_(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Wn,Wn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,iy(t),t;default:if(typeof e.status=="string")e.then(Wn,Wn);else{if(t=ke,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,iy(t),t}throw Vi=e,br}}function Ci(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Vi=n,br):n}}var Vi=null;function sy(){if(Vi===null)throw Error(B(459));var t=Vi;return Vi=null,t}function iy(t){if(t===br||t===Wu)throw Error(B(483))}var La=null,ql=0;function nc(t){var e=ql;return ql+=1,La===null&&(La=[]),s_(La,t,e)}function el(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function sc(t,e){throw e.$$typeof===Z2?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function i_(t){function e(T,_){if(t){var w=T.deletions;w===null?(T.deletions=[_],T.flags|=16):w.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function s(T){for(var _=new Map;T!==null;)T.key!==null?_.set(T.key,T):_.set(T.index,T),T=T.sibling;return _}function i(T,_){return T=ns(T,_),T.index=0,T.sibling=null,T}function a(T,_,w){return T.index=w,t?(w=T.alternate,w!==null?(w=w.index,w<_?(T.flags|=67108866,_):w):(T.flags|=67108866,_)):(T.flags|=1048576,_)}function r(T){return t&&T.alternate===null&&(T.flags|=67108866),T}function c(T,_,w,R){return _===null||_.tag!==6?(_=ph(w,T.mode,R),_.return=T,_):(_=i(_,w),_.return=T,_)}function u(T,_,w,R){var M=w.type;return M===_a?f(T,_,w.props.children,R,w.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===js&&Ci(M)===_.type)?(_=i(_,w.props),el(_,w),_.return=T,_):(_=vc(w.type,w.key,w.props,null,T.mode,R),el(_,w),_.return=T,_)}function d(T,_,w,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=gh(w,T.mode,R),_.return=T,_):(_=i(_,w.children||[]),_.return=T,_)}function f(T,_,w,R,M){return _===null||_.tag!==7?(_=Oi(w,T.mode,R,M),_.return=T,_):(_=i(_,w),_.return=T,_)}function m(T,_,w){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=ph(""+_,T.mode,w),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $o:return w=vc(_.type,_.key,_.props,null,T.mode,w),el(w,_),w.return=T,w;case il:return _=gh(_,T.mode,w),_.return=T,_;case js:return _=Ci(_),m(T,_,w)}if(al(_)||Jr(_))return _=Oi(_,T.mode,w,null),_.return=T,_;if(typeof _.then=="function")return m(T,nc(_),w);if(_.$$typeof===Jn)return m(T,tc(T,_),w);sc(T,_)}return null}function g(T,_,w,R){var M=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return M!==null?null:c(T,_,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $o:return w.key===M?u(T,_,w,R):null;case il:return w.key===M?d(T,_,w,R):null;case js:return w=Ci(w),g(T,_,w,R)}if(al(w)||Jr(w))return M!==null?null:f(T,_,w,R,null);if(typeof w.then=="function")return g(T,_,nc(w),R);if(w.$$typeof===Jn)return g(T,_,tc(T,w),R);sc(T,w)}return null}function x(T,_,w,R,M){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return T=T.get(w)||null,c(_,T,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case $o:return T=T.get(R.key===null?w:R.key)||null,u(_,T,R,M);case il:return T=T.get(R.key===null?w:R.key)||null,d(_,T,R,M);case js:return R=Ci(R),x(T,_,w,R,M)}if(al(R)||Jr(R))return T=T.get(w)||null,f(_,T,R,M,null);if(typeof R.then=="function")return x(T,_,w,nc(R),M);if(R.$$typeof===Jn)return x(T,_,w,tc(_,R),M);sc(_,R)}return null}function C(T,_,w,R){for(var M=null,U=null,v=_,y=_=0,b=null;v!==null&&y<w.length;y++){v.index>y?(b=v,v=null):b=v.sibling;var S=g(T,v,w[y],R);if(S===null){v===null&&(v=b);break}t&&v&&S.alternate===null&&e(T,v),_=a(S,_,y),U===null?M=S:U.sibling=S,U=S,v=b}if(y===w.length)return n(T,v),xe&&$n(T,y),M;if(v===null){for(;y<w.length;y++)v=m(T,w[y],R),v!==null&&(_=a(v,_,y),U===null?M=v:U.sibling=v,U=v);return xe&&$n(T,y),M}for(v=s(v);y<w.length;y++)b=x(v,T,y,w[y],R),b!==null&&(t&&b.alternate!==null&&v.delete(b.key===null?y:b.key),_=a(b,_,y),U===null?M=b:U.sibling=b,U=b);return t&&v.forEach(function(N){return e(T,N)}),xe&&$n(T,y),M}function I(T,_,w,R){if(w==null)throw Error(B(151));for(var M=null,U=null,v=_,y=_=0,b=null,S=w.next();v!==null&&!S.done;y++,S=w.next()){v.index>y?(b=v,v=null):b=v.sibling;var N=g(T,v,S.value,R);if(N===null){v===null&&(v=b);break}t&&v&&N.alternate===null&&e(T,v),_=a(N,_,y),U===null?M=N:U.sibling=N,U=N,v=b}if(S.done)return n(T,v),xe&&$n(T,y),M;if(v===null){for(;!S.done;y++,S=w.next())S=m(T,S.value,R),S!==null&&(_=a(S,_,y),U===null?M=S:U.sibling=S,U=S);return xe&&$n(T,y),M}for(v=s(v);!S.done;y++,S=w.next())S=x(v,T,y,S.value,R),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?y:S.key),_=a(S,_,y),U===null?M=S:U.sibling=S,U=S);return t&&v.forEach(function(k){return e(T,k)}),xe&&$n(T,y),M}function D(T,_,w,R){if(typeof w=="object"&&w!==null&&w.type===_a&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case $o:e:{for(var M=w.key;_!==null;){if(_.key===M){if(M=w.type,M===_a){if(_.tag===7){n(T,_.sibling),R=i(_,w.props.children),R.return=T,T=R;break e}}else if(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===js&&Ci(M)===_.type){n(T,_.sibling),R=i(_,w.props),el(R,w),R.return=T,T=R;break e}n(T,_);break}else e(T,_);_=_.sibling}w.type===_a?(R=Oi(w.props.children,T.mode,R,w.key),R.return=T,T=R):(R=vc(w.type,w.key,w.props,null,T.mode,R),el(R,w),R.return=T,T=R)}return r(T);case il:e:{for(M=w.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(T,_.sibling),R=i(_,w.children||[]),R.return=T,T=R;break e}else{n(T,_);break}else e(T,_);_=_.sibling}R=gh(w,T.mode,R),R.return=T,T=R}return r(T);case js:return w=Ci(w),D(T,_,w,R)}if(al(w))return C(T,_,w,R);if(Jr(w)){if(M=Jr(w),typeof M!="function")throw Error(B(150));return w=M.call(w),I(T,_,w,R)}if(typeof w.then=="function")return D(T,_,nc(w),R);if(w.$$typeof===Jn)return D(T,_,tc(T,w),R);sc(T,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,_!==null&&_.tag===6?(n(T,_.sibling),R=i(_,w),R.return=T,T=R):(n(T,_),R=ph(w,T.mode,R),R.return=T,T=R),r(T)):n(T,_)}return function(T,_,w,R){try{ql=0;var M=D(T,_,w,R);return La=null,M}catch(v){if(v===br||v===Wu)throw v;var U=Gt(29,v,null,T.mode);return U.lanes=R,U.return=T,U}finally{}}}var Hi=i_(!0),a_=i_(!1),Cs=!1;function Zm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Qs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ys(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,we&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=Xc(t),Xv(t,null,n),e}return Ju(t,s,e,n),Xc(t)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,wv(t,n)}}function xh(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=r:a=a.next=r,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Tf=!1;function _l(){if(Tf){var t=Pa;if(t!==null)throw t}}function El(t,e,n,s){Tf=!1;var i=t.updateQueue;Cs=!1;var a=i.firstBaseUpdate,r=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,r===null?a=d:r.next=d,r=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==r&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(a!==null){var m=i.baseState;r=0,f=d=u=null,c=a;do{var g=c.lane&-536870913,x=g!==c.lane;if(x?(ye&g)===g:(s&g)===g){g!==0&&g===$a&&(Tf=!0),f!==null&&(f=f.next={lane:0,tag:c.tag,payload:c.payload,callback:null,next:null});e:{var C=t,I=c;g=e;var D=n;switch(I.tag){case 1:if(C=I.payload,typeof C=="function"){m=C.call(D,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=I.payload,g=typeof C=="function"?C.call(D,m,g):C,g==null)break e;m=Be({},m,g);break e;case 2:Cs=!0}}g=c.callback,g!==null&&(t.flags|=64,x&&(t.flags|=8192),x=i.callbacks,x===null?i.callbacks=[g]:x.push(g))}else x={lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=x,u=m):f=f.next=x,r|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;x=c,c=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,a===null&&(i.shared.lanes=0),di|=r,t.lanes=r,t.memoizedState=m}}function r_(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function l_(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)r_(n[t],e)}var Xa=Un(null),eu=Un(0);function ay(t,e){t=ds,Oe(eu,t),Oe(Xa,e),ds=t|e.baseLanes}function Sf(){Oe(eu,ds),Oe(Xa,Xa.current)}function ep(){ds=eu.current,ft(Xa),ft(eu)}var Wt=Un(null),cn=null;function Rs(t){var e=t.alternate;Oe($e,$e.current&1),Oe(Wt,t),cn===null&&(e===null||Xa.current!==null||e.memoizedState!==null)&&(cn=t)}function Nf(t){Oe($e,$e.current),Oe(Wt,t),cn===null&&(cn=t)}function o_(t){t.tag===22?(Oe($e,$e.current),Oe(Wt,t),cn===null&&(cn=t)):ks()}function ks(){Oe($e,$e.current),Oe(Wt,Wt.current)}function Ft(t){ft(Wt),cn===t&&(cn=null),ft($e)}var $e=Un(0);function tu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Gf(n)||Kf(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var os=0,oe=null,Ce=null,We=null,nu=!1,Ua=!1,Fi=!1,su=0,Hl=0,za=null,mN=0;function Ke(){throw Error(B(321))}function tp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function np(t,e,n,s,i,a){return os=a,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ie.H=t===null||t.memoizedState===null?U_:fp,Fi=!1,a=n(s,i),Fi=!1,Ua&&(a=u_(e,n,s,i)),c_(t),a}function c_(t){ie.H=Fl;var e=Ce!==null&&Ce.next!==null;if(os=0,We=Ce=oe=null,nu=!1,Hl=0,za=null,e)throw Error(B(300));t===null||nt||(t=t.dependencies,t!==null&&Wc(t)&&(nt=!0))}function u_(t,e,n,s){oe=t;var i=0;do{if(Ua&&(za=null),Hl=0,Ua=!1,25<=i)throw Error(B(301));if(i+=1,We=Ce=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}ie.H=z_,a=e(n,s)}while(Ua);return a}function pN(){var t=ie.H,e=t.useState()[0];return e=typeof e.then=="function"?xo(e):e,t=t.useState()[0],(Ce!==null?Ce.memoizedState:null)!==t&&(oe.flags|=1024),e}function sp(){var t=su!==0;return su=0,t}function ip(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ap(t){if(nu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}nu=!1}os=0,We=Ce=oe=null,Ua=!1,Hl=su=0,za=null}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?oe.memoizedState=We=t:We=We.next=t,We}function Xe(){if(Ce===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=We===null?oe.memoizedState:We.next;if(e!==null)We=e,Ce=t;else{if(t===null)throw oe.alternate===null?Error(B(467)):Error(B(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},We===null?oe.memoizedState=We=t:We=We.next=t}return We}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xo(t){var e=Hl;return Hl+=1,za===null&&(za=[]),t=s_(za,t,e),e=oe,(We===null?e.memoizedState:We.next)===null&&(e=e.alternate,ie.H=e===null||e.memoizedState===null?U_:fp),t}function ed(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xo(t);if(t.$$typeof===Jn)return bt(t)}throw Error(B(438,String(t)))}function rp(t){var e=null,n=oe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=oe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Zu(),oe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=eS;return e.index++,n}function cs(t,e){return typeof e=="function"?e(t):e}function Ec(t){var e=Xe();return lp(e,Ce,t)}function lp(t,e,n){var s=t.queue;if(s===null)throw Error(B(311));s.lastRenderedReducer=n;var i=t.baseQueue,a=s.pending;if(a!==null){if(i!==null){var r=i.next;i.next=a.next,a.next=r}e.baseQueue=i=a,s.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var c=r=null,u=null,d=e,f=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(ye&m)===m:(os&m)===m){var g=d.revertLane;if(g===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===$a&&(f=!0);else if((os&g)===g){d=d.next,g===$a&&(f=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(c=u=m,r=a):u=u.next=m,oe.lanes|=g,di|=g;m=d.action,Fi&&n(a,m),a=d.hasEagerState?d.eagerState:n(a,m)}else g={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(c=u=g,r=a):u=u.next=g,oe.lanes|=m,di|=m;d=d.next}while(d!==null&&d!==e);if(u===null?r=a:u.next=c,!Jt(a,t.memoizedState)&&(nt=!0,f&&(n=Pa,n!==null)))throw n;t.memoizedState=a,t.baseState=r,t.baseQueue=u,s.lastRenderedState=a}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function bh(t){var e=Xe(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var r=i=i.next;do a=t(a,r.action),r=r.next;while(r!==i);Jt(a,e.memoizedState)||(nt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function d_(t,e,n){var s=oe,i=Xe(),a=xe;if(a){if(n===void 0)throw Error(B(407));n=n()}else n=e();var r=!Jt((Ce||i).memoizedState,n);if(r&&(i.memoizedState=n,nt=!0),i=i.queue,op(m_.bind(null,s,i,t),[t]),i.getSnapshot!==e||r||We!==null&&We.memoizedState.tag&1){if(s.flags|=2048,Ja(9,{destroy:void 0},f_.bind(null,s,i,n,e),null),ke===null)throw Error(B(349));a||os&127||h_(s,e,n)}return n}function h_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e=Zu(),oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f_(t,e,n,s){e.value=n,e.getSnapshot=s,p_(e)&&g_(t)}function m_(t,e,n){return n(function(){p_(e)&&g_(t)})}function p_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function g_(t){var e=ea(t,2);e!==null&&Ut(e,t,2)}function Af(t){var e=It();if(typeof t=="function"){var n=t;if(t=n(),Fi){Ls(!0);try{n()}finally{Ls(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t},e}function y_(t,e,n,s){return t.baseState=n,lp(t,Ce,typeof s=="function"?s:cs)}function gN(t,e,n,s,i){if(nd(t))throw Error(B(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};ie.T!==null?n(!0):a.isTransition=!1,s(a),n=e.pending,n===null?(a.next=e.pending=a,x_(e,a)):(a.next=n.next,e.pending=n.next=a)}}function x_(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var a=ie.T,r={};ie.T=r;try{var c=n(i,s),u=ie.S;u!==null&&u(r,c),ry(t,e,c)}catch(d){jf(t,e,d)}finally{a!==null&&r.types!==null&&(a.types=r.types),ie.T=a}}else try{a=n(i,s),ry(t,e,a)}catch(d){jf(t,e,d)}}function ry(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){ly(t,e,s)},function(s){return jf(t,e,s)}):ly(t,e,n)}function ly(t,e,n){e.status="fulfilled",e.value=n,b_(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,x_(t,n)))}function jf(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,b_(e),e=e.next;while(e!==s)}t.action=null}function b_(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function v_(t,e){return e}function oy(t,e){if(xe){var n=ke.formState;if(n!==null){e:{var s=oe;if(xe){if(Le){t:{for(var i=Le,a=rn;i.nodeType!==8;){if(!a){i=null;break t}if(i=un(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){Le=un(i.nextSibling),s=i.data==="F!";break e}}ci(s)}s=!1}s&&(e=n[0])}}return n=It(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v_,lastRenderedState:e},n.queue=s,n=V_.bind(null,oe,s),s.dispatch=n,s=Af(!1),a=hp.bind(null,oe,!1,s.queue),s=It(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=gN.bind(null,oe,i,a,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function cy(t){var e=Xe();return __(e,Ce,t)}function __(t,e,n){if(e=lp(t,e,v_)[0],t=Ec(cs)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=xo(e)}catch(r){throw r===br?Wu:r}else s=e;e=Xe();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(oe.flags|=2048,Ja(9,{destroy:void 0},yN.bind(null,i,n),null)),[s,a,t]}function yN(t,e){t.action=e}function uy(t){var e=Xe(),n=Ce;if(n!==null)return __(e,n,t);Xe(),e=e.memoizedState,n=Xe();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Ja(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=oe.updateQueue,e===null&&(e=Zu(),oe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function E_(){return Xe().memoizedState}function wc(t,e,n,s){var i=It();oe.flags|=t,i.memoizedState=Ja(1|e,{destroy:void 0},n,s===void 0?null:s)}function td(t,e,n,s){var i=Xe();s=s===void 0?null:s;var a=i.memoizedState.inst;Ce!==null&&s!==null&&tp(s,Ce.memoizedState.deps)?i.memoizedState=Ja(e,a,n,s):(oe.flags|=t,i.memoizedState=Ja(1|e,a,n,s))}function dy(t,e){wc(8390656,8,t,e)}function op(t,e){td(2048,8,t,e)}function xN(t){oe.flags|=4;var e=oe.updateQueue;if(e===null)e=Zu(),oe.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function w_(t){var e=Xe().memoizedState;return xN({ref:e,nextImpl:t}),function(){if(we&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function T_(t,e){return td(4,2,t,e)}function S_(t,e){return td(4,4,t,e)}function N_(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A_(t,e,n){n=n!=null?n.concat([t]):null,td(4,4,N_.bind(null,e,t),n)}function cp(){}function j_(t,e){var n=Xe();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&tp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function C_(t,e){var n=Xe();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&tp(e,s[1]))return s[0];if(s=t(),Fi){Ls(!0);try{t()}finally{Ls(!1)}}return n.memoizedState=[s,e],s}function up(t,e,n){return n===void 0||os&1073741824&&!(ye&261930)?t.memoizedState=e:(t.memoizedState=n,t=yE(),oe.lanes|=t,di|=t,n)}function I_(t,e,n,s){return Jt(n,e)?n:Xa.current!==null?(t=up(t,n,s),Jt(t,e)||(nt=!0),t):!(os&42)||os&1073741824&&!(ye&261930)?(nt=!0,t.memoizedState=n):(t=yE(),oe.lanes|=t,di|=t,e)}function R_(t,e,n,s,i){var a=Te.p;Te.p=a!==0&&8>a?a:8;var r=ie.T,c={};ie.T=c,hp(t,!1,e,n);try{var u=i(),d=ie.S;if(d!==null&&d(c,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=fN(u,s);wl(t,e,f,Xt(t))}else wl(t,e,s,Xt(t))}catch(m){wl(t,e,{then:function(){},status:"rejected",reason:m},Xt())}finally{Te.p=a,r!==null&&c.types!==null&&(r.types=c.types),ie.T=r}}function bN(){}function Cf(t,e,n,s){if(t.tag!==5)throw Error(B(476));var i=k_(t).queue;R_(t,i,e,Di,n===null?bN:function(){return D_(t),n(s)})}function k_(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Di,baseState:Di,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:Di},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function D_(t){var e=k_(t);e.next===null&&(e=t.alternate.memoizedState),wl(t,e.next.queue,{},Xt())}function dp(){return bt(Ql)}function O_(){return Xe().memoizedState}function M_(){return Xe().memoizedState}function vN(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Xt();t=Qs(n);var s=Ys(e,t,n);s!==null&&(Ut(s,e,n),vl(s,e,n)),e={cache:Xm()},t.payload=e;return}e=e.return}}function _N(t,e,n){var s=Xt();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},nd(t)?P_(e,n):(n=Km(t,e,n,s),n!==null&&(Ut(n,t,s),L_(n,e,s)))}function V_(t,e,n){var s=Xt();wl(t,e,n,s)}function wl(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(nd(t))P_(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var r=e.lastRenderedState,c=a(r,n);if(i.hasEagerState=!0,i.eagerState=c,Jt(c,r))return Ju(t,e,i,0),ke===null&&Xu(),!1}catch{}finally{}if(n=Km(t,e,i,s),n!==null)return Ut(n,t,s),L_(n,e,s),!0}return!1}function hp(t,e,n,s){if(s={lane:2,revertLane:_p(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},nd(t)){if(e)throw Error(B(479))}else e=Km(t,n,s,2),e!==null&&Ut(e,t,2)}function nd(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function P_(t,e){Ua=nu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L_(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,wv(t,n)}}var Fl={readContext:bt,use:ed,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Fl.useEffectEvent=Ke;var U_={readContext:bt,use:ed,useCallback:function(t,e){return It().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:dy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,wc(4194308,4,N_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wc(4194308,4,t,e)},useInsertionEffect:function(t,e){wc(4,2,t,e)},useMemo:function(t,e){var n=It();e=e===void 0?null:e;var s=t();if(Fi){Ls(!0);try{t()}finally{Ls(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=It();if(n!==void 0){var i=n(e);if(Fi){Ls(!0);try{n(e)}finally{Ls(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=_N.bind(null,oe,t),[s.memoizedState,t]},useRef:function(t){var e=It();return t={current:t},e.memoizedState=t},useState:function(t){t=Af(t);var e=t.queue,n=V_.bind(null,oe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:cp,useDeferredValue:function(t,e){var n=It();return up(n,t,e)},useTransition:function(){var t=Af(!1);return t=R_.bind(null,oe,t.queue,!0,!1),It().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=oe,i=It();if(xe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),ke===null)throw Error(B(349));ye&127||h_(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,dy(m_.bind(null,s,a,t),[t]),s.flags|=2048,Ja(9,{destroy:void 0},f_.bind(null,s,a,n,e),null),n},useId:function(){var t=It(),e=ke.identifierPrefix;if(xe){var n=jn,s=An;n=(s&~(1<<32-$t(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=su++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=mN++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:dp,useFormState:oy,useActionState:oy,useOptimistic:function(t){var e=It();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=hp.bind(null,oe,!0,n),n.dispatch=e,[t,e]},useMemoCache:rp,useCacheRefresh:function(){return It().memoizedState=vN.bind(null,oe)},useEffectEvent:function(t){var e=It(),n={impl:t};return e.memoizedState=n,function(){if(we&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},fp={readContext:bt,use:ed,useCallback:j_,useContext:bt,useEffect:op,useImperativeHandle:A_,useInsertionEffect:T_,useLayoutEffect:S_,useMemo:C_,useReducer:Ec,useRef:E_,useState:function(){return Ec(cs)},useDebugValue:cp,useDeferredValue:function(t,e){var n=Xe();return I_(n,Ce.memoizedState,t,e)},useTransition:function(){var t=Ec(cs)[0],e=Xe().memoizedState;return[typeof t=="boolean"?t:xo(t),e]},useSyncExternalStore:d_,useId:O_,useHostTransitionStatus:dp,useFormState:cy,useActionState:cy,useOptimistic:function(t,e){var n=Xe();return y_(n,Ce,t,e)},useMemoCache:rp,useCacheRefresh:M_};fp.useEffectEvent=w_;var z_={readContext:bt,use:ed,useCallback:j_,useContext:bt,useEffect:op,useImperativeHandle:A_,useInsertionEffect:T_,useLayoutEffect:S_,useMemo:C_,useReducer:bh,useRef:E_,useState:function(){return bh(cs)},useDebugValue:cp,useDeferredValue:function(t,e){var n=Xe();return Ce===null?up(n,t,e):I_(n,Ce.memoizedState,t,e)},useTransition:function(){var t=bh(cs)[0],e=Xe().memoizedState;return[typeof t=="boolean"?t:xo(t),e]},useSyncExternalStore:d_,useId:O_,useHostTransitionStatus:dp,useFormState:uy,useActionState:uy,useOptimistic:function(t,e){var n=Xe();return Ce!==null?y_(n,Ce,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:rp,useCacheRefresh:M_};z_.useEffectEvent=w_;function vh(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var If={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Xt(),i=Qs(s);i.payload=e,n!=null&&(i.callback=n),e=Ys(t,i,s),e!==null&&(Ut(e,t,s),vl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Xt(),i=Qs(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ys(t,i,s),e!==null&&(Ut(e,t,s),vl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),s=Qs(n);s.tag=2,e!=null&&(s.callback=e),e=Ys(t,s,n),e!==null&&(Ut(e,t,n),vl(e,t,n))}};function hy(t,e,n,s,i,a,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,r):e.prototype&&e.prototype.isPureReactComponent?!Ul(n,s)||!Ul(i,a):!0}function fy(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&If.enqueueReplaceState(e,e.state,null)}function Gi(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=Be({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function B_(t){$c(t)}function q_(t){console.error(t)}function H_(t){$c(t)}function iu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function my(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Rf(t,e,n){return n=Qs(n),n.tag=3,n.payload={element:null},n.callback=function(){iu(t,e)},n}function F_(t){return t=Qs(t),t.tag=3,t}function G_(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=s.value;t.payload=function(){return i(a)},t.callback=function(){my(e,n,s)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){my(e,n,s),typeof i!="function"&&($s===null?$s=new Set([this]):$s.add(this));var c=s.stack;this.componentDidCatch(s.value,{componentStack:c!==null?c:""})})}function EN(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&xr(e,n,i,!0),n=Wt.current,n!==null){switch(n.tag){case 31:case 13:return cn===null?cu():n.alternate===null&&Qe===0&&(Qe=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===Zc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Rh(t,s,i)),!1;case 22:return n.flags|=65536,s===Zc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Rh(t,s,i)),!1}throw Error(B(435,n.tag))}return Rh(t,s,i),cu(),!1}if(xe)return e=Wt.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==xf&&(t=Error(B(422),{cause:s}),Bl(an(t,n)))):(s!==xf&&(e=Error(B(423),{cause:s}),Bl(an(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=an(s,n),i=Rf(t.stateNode,s,i),xh(t,i),Qe!==4&&(Qe=2)),!1;var a=Error(B(520),{cause:s});if(a=an(a,n),Nl===null?Nl=[a]:Nl.push(a),Qe!==4&&(Qe=2),e===null)return!0;s=an(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Rf(n.stateNode,s,t),xh(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&($s===null||!$s.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=F_(i),G_(i,t,n,s),xh(n,i),!1}n=n.return}while(n!==null);return!1}var mp=Error(B(461)),nt=!1;function mt(t,e,n,s){e.child=t===null?a_(e,null,n,s):Hi(e,t.child,n,s)}function py(t,e,n,s,i){n=n.render;var a=e.ref;if("ref"in s){var r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}else r=s;return qi(e),s=np(t,e,n,r,a,i),c=sp(),t!==null&&!nt?(ip(t,e,i),us(t,e,i)):(xe&&c&&Ym(e),e.flags|=1,mt(t,e,s,i),e.child)}function gy(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!Qm(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,K_(t,e,a,s,i)):(t=vc(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!pp(t,i)){var r=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ul,n(r,s)&&t.ref===e.ref)return us(t,e,i)}return e.flags|=1,t=ns(a,s),t.ref=e.ref,t.return=e,e.child=t}function K_(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(Ul(a,s)&&t.ref===e.ref)if(nt=!1,e.pendingProps=s=a,pp(t,i))t.flags&131072&&(nt=!0);else return e.lanes=t.lanes,us(t,e,i)}return kf(t,e,n,s,i)}function Q_(t,e,n,s){var i=s.children,a=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(a=a!==null?a.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~a}else s=0,e.child=null;return yy(t,e,a,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&_c(e,a!==null?a.cachePool:null),a!==null?ay(e,a):Sf(),o_(e);else return s=e.lanes=536870912,yy(t,e,a!==null?a.baseLanes|n:n,n,s)}else a!==null?(_c(e,a.cachePool),ay(e,a),ks(),e.memoizedState=null):(t!==null&&_c(e,null),Sf(),ks());return mt(t,e,i,n),e.child}function ll(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function yy(t,e,n,s,i){var a=Jm();return a=a===null?null:{parent:et._currentValue,pool:a},e.memoizedState={baseLanes:n,cachePool:a},t!==null&&_c(e,null),Sf(),o_(e),t!==null&&xr(t,e,s,!0),e.childLanes=i,null}function Tc(t,e){return e=au({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function xy(t,e,n){return Hi(e,t.child,null,n),t=Tc(e,e.pendingProps),t.flags|=2,Ft(e),e.memoizedState=null,t}function wN(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(xe){if(s.mode==="hidden")return t=Tc(e,s),e.lanes=536870912,ll(null,t);if(Nf(e),(t=Le)?(t=UE(t,rn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:oi!==null?{id:An,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},n=Wv(t),n.return=e,e.child=n,yt=e,Le=null)):t=null,t===null)throw ci(e);return e.lanes=536870912,null}return Tc(e,s)}var a=t.memoizedState;if(a!==null){var r=a.dehydrated;if(Nf(e),i)if(e.flags&256)e.flags&=-257,e=xy(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(nt||xr(t,e,n,!1),i=(n&t.childLanes)!==0,nt||i){if(s=ke,s!==null&&(r=Tv(s,n),r!==0&&r!==a.retryLane))throw a.retryLane=r,ea(t,r),Ut(s,t,r),mp;cu(),e=xy(t,e,n)}else t=a.treeContext,Le=un(r.nextSibling),yt=e,xe=!0,Ks=null,rn=!1,t!==null&&e_(e,t),e=Tc(e,s),e.flags|=4096;return e}return t=ns(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Sc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function kf(t,e,n,s,i){return qi(e),n=np(t,e,n,s,void 0,i),s=sp(),t!==null&&!nt?(ip(t,e,i),us(t,e,i)):(xe&&s&&Ym(e),e.flags|=1,mt(t,e,n,i),e.child)}function by(t,e,n,s,i,a){return qi(e),e.updateQueue=null,n=u_(e,s,n,i),c_(t),s=sp(),t!==null&&!nt?(ip(t,e,a),us(t,e,a)):(xe&&s&&Ym(e),e.flags|=1,mt(t,e,n,a),e.child)}function vy(t,e,n,s,i){if(qi(e),e.stateNode===null){var a=Ca,r=n.contextType;typeof r=="object"&&r!==null&&(a=bt(r)),a=new n(s,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=If,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=s,a.state=e.memoizedState,a.refs={},Zm(e),r=n.contextType,a.context=typeof r=="object"&&r!==null?bt(r):Ca,a.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(vh(e,n,r,s),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&If.enqueueReplaceState(a,a.state,null),El(e,s,a,i),_l(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){a=e.stateNode;var c=e.memoizedProps,u=Gi(n,c);a.props=u;var d=a.context,f=n.contextType;r=Ca,typeof f=="object"&&f!==null&&(r=bt(f));var m=n.getDerivedStateFromProps;f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function",c=e.pendingProps!==c,f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c||d!==r)&&fy(e,a,s,r),Cs=!1;var g=e.memoizedState;a.state=g,El(e,s,a,i),_l(),d=e.memoizedState,c||g!==d||Cs?(typeof m=="function"&&(vh(e,n,m,s),d=e.memoizedState),(u=Cs||hy(e,n,u,s,g,d,r))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),a.props=s,a.state=d,a.context=r,s=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,wf(t,e),r=e.memoizedProps,f=Gi(n,r),a.props=f,m=e.pendingProps,g=a.context,d=n.contextType,u=Ca,typeof d=="object"&&d!==null&&(u=bt(d)),c=n.getDerivedStateFromProps,(d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==m||g!==u)&&fy(e,a,s,u),Cs=!1,g=e.memoizedState,a.state=g,El(e,s,a,i),_l();var x=e.memoizedState;r!==m||g!==x||Cs||t!==null&&t.dependencies!==null&&Wc(t.dependencies)?(typeof c=="function"&&(vh(e,n,c,s),x=e.memoizedState),(f=Cs||hy(e,n,f,s,g,x,u)||t!==null&&t.dependencies!==null&&Wc(t.dependencies))?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,x,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),a.props=s,a.state=x,a.context=u,s=f):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return a=s,Sc(t,e),s=(e.flags&128)!==0,a||s?(a=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&s?(e.child=Hi(e,t.child,null,i),e.child=Hi(e,null,n,i)):mt(t,e,n,i),e.memoizedState=a.state,t=e.child):t=us(t,e,i),t}function _y(t,e,n,s){return Bi(),e.flags|=256,mt(t,e,n,s),e.child}var _h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eh(t){return{baseLanes:t,cachePool:n_()}}function wh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Kt),t}function Y_(t,e,n){var s=e.pendingProps,i=!1,a=(e.flags&128)!==0,r;if((r=a)||(r=t!==null&&t.memoizedState===null?!1:($e.current&2)!==0),r&&(i=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(xe){if(i?Rs(e):ks(),(t=Le)?(t=UE(t,rn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:oi!==null?{id:An,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},n=Wv(t),n.return=e,e.child=n,yt=e,Le=null)):t=null,t===null)throw ci(e);return Kf(t)?e.lanes=32:e.lanes=536870912,null}var c=s.children;return s=s.fallback,i?(ks(),i=e.mode,c=au({mode:"hidden",children:c},i),s=Oi(s,i,n,null),c.return=e,s.return=e,c.sibling=s,e.child=c,s=e.child,s.memoizedState=Eh(n),s.childLanes=wh(t,r,n),e.memoizedState=_h,ll(null,s)):(Rs(e),Df(e,c))}var u=t.memoizedState;if(u!==null&&(c=u.dehydrated,c!==null)){if(a)e.flags&256?(Rs(e),e.flags&=-257,e=Th(t,e,n)):e.memoizedState!==null?(ks(),e.child=t.child,e.flags|=128,e=null):(ks(),c=s.fallback,i=e.mode,s=au({mode:"visible",children:s.children},i),c=Oi(c,i,n,null),c.flags|=2,s.return=e,c.return=e,s.sibling=c,e.child=s,Hi(e,t.child,null,n),s=e.child,s.memoizedState=Eh(n),s.childLanes=wh(t,r,n),e.memoizedState=_h,e=ll(null,s));else if(Rs(e),Kf(c)){if(r=c.nextSibling&&c.nextSibling.dataset,r)var d=r.dgst;r=d,s=Error(B(419)),s.stack="",s.digest=r,Bl({value:s,source:null,stack:null}),e=Th(t,e,n)}else if(nt||xr(t,e,n,!1),r=(n&t.childLanes)!==0,nt||r){if(r=ke,r!==null&&(s=Tv(r,n),s!==0&&s!==u.retryLane))throw u.retryLane=s,ea(t,s),Ut(r,t,s),mp;Gf(c)||cu(),e=Th(t,e,n)}else Gf(c)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Le=un(c.nextSibling),yt=e,xe=!0,Ks=null,rn=!1,t!==null&&e_(e,t),e=Df(e,s.children),e.flags|=4096);return e}return i?(ks(),c=s.fallback,i=e.mode,u=t.child,d=u.sibling,s=ns(u,{mode:"hidden",children:s.children}),s.subtreeFlags=u.subtreeFlags&65011712,d!==null?c=ns(d,c):(c=Oi(c,i,n,null),c.flags|=2),c.return=e,s.return=e,s.sibling=c,e.child=s,ll(null,s),s=e.child,c=t.child.memoizedState,c===null?c=Eh(n):(i=c.cachePool,i!==null?(u=et._currentValue,i=i.parent!==u?{parent:u,pool:u}:i):i=n_(),c={baseLanes:c.baseLanes|n,cachePool:i}),s.memoizedState=c,s.childLanes=wh(t,r,n),e.memoizedState=_h,ll(t.child,s)):(Rs(e),n=t.child,t=n.sibling,n=ns(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function Df(t,e){return e=au({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function au(t,e){return t=Gt(22,t,null,e),t.lanes=0,t}function Th(t,e,n){return Hi(e,t.child,null,n),t=Df(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ey(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),vf(t.return,e,n)}function Sh(t,e,n,s,i,a){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:a}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=i,r.treeForkCount=a)}function $_(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;s=s.children;var r=$e.current,c=(r&2)!==0;if(c?(r=r&1|2,e.flags|=128):r&=1,Oe($e,r),mt(t,e,s,n),s=xe?zl:0,!c&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ey(t,n,e);else if(t.tag===19)Ey(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&tu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sh(e,!1,i,n,a,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sh(e,!0,n,null,a,s);break;case"together":Sh(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function us(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),di|=e.lanes,!(n&e.childLanes))if(t!==null){if(xr(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ns(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ns(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Wc(t)))}function TN(t,e,n){switch(e.tag){case 3:Gc(e,e.stateNode.containerInfo),Is(e,et,t.memoizedState.cache),Bi();break;case 27:case 5:lf(e);break;case 4:Gc(e,e.stateNode.containerInfo);break;case 10:Is(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Nf(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Rs(e),e.flags|=128,null):n&e.child.childLanes?Y_(t,e,n):(Rs(e),t=us(t,e,n),t!==null?t.sibling:null);Rs(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(xr(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return $_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe($e,$e.current),s)break;return null;case 22:return e.lanes=0,Q_(t,e,n,e.pendingProps);case 24:Is(e,et,t.memoizedState.cache)}return us(t,e,n)}function X_(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)nt=!0;else{if(!pp(t,n)&&!(e.flags&128))return nt=!1,TN(t,e,n);nt=!!(t.flags&131072)}else nt=!1,xe&&e.flags&1048576&&Zv(e,zl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=Ci(e.elementType),e.type=t,typeof t=="function")Qm(t)?(s=Gi(t,s),e.tag=1,e=vy(null,e,t,s,n)):(e.tag=0,e=kf(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===Dm){e.tag=11,e=py(null,e,t,s,n);break e}else if(i===Om){e.tag=14,e=gy(null,e,t,s,n);break e}}throw e=af(t)||t,Error(B(306,e,""))}}return e;case 0:return kf(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Gi(s,e.pendingProps),vy(t,e,s,i,n);case 3:e:{if(Gc(e,e.stateNode.containerInfo),t===null)throw Error(B(387));s=e.pendingProps;var a=e.memoizedState;i=a.element,wf(t,e),El(e,s,null,n);var r=e.memoizedState;if(s=r.cache,Is(e,et,s),s!==a.cache&&_f(e,[et],n,!0),_l(),s=r.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=_y(t,e,s,n);break e}else if(s!==i){i=an(Error(B(424)),e),Bl(i),e=_y(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Le=un(t.firstChild),yt=e,xe=!0,Ks=null,rn=!0,n=a_(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Bi(),s===i){e=us(t,e,n);break e}mt(t,e,s,n)}e=e.child}return e;case 26:return Sc(t,e),t===null?(n=qy(e.type,null,e.pendingProps,null))?e.memoizedState=n:xe||(n=e.type,t=e.pendingProps,s=fu(Gs.current).createElement(n),s[gt]=e,s[zt]=t,vt(s,n,t),ht(s),e.stateNode=s):e.memoizedState=qy(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return lf(e),t===null&&xe&&(s=e.stateNode=zE(e.type,e.pendingProps,Gs.current),yt=e,rn=!0,i=Le,bi(e.type)?(Qf=i,Le=un(s.firstChild)):Le=i),mt(t,e,e.pendingProps.children,n),Sc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&xe&&((i=s=Le)&&(s=eA(s,e.type,e.pendingProps,rn),s!==null?(e.stateNode=s,yt=e,Le=un(s.firstChild),rn=!1,i=!0):i=!1),i||ci(e)),lf(e),i=e.type,a=e.pendingProps,r=t!==null?t.memoizedProps:null,s=a.children,Hf(i,a)?s=null:r!==null&&Hf(i,r)&&(e.flags|=32),e.memoizedState!==null&&(i=np(t,e,pN,null,null,n),Ql._currentValue=i),Sc(t,e),mt(t,e,s,n),e.child;case 6:return t===null&&xe&&((t=n=Le)&&(n=tA(n,e.pendingProps,rn),n!==null?(e.stateNode=n,yt=e,Le=null,t=!0):t=!1),t||ci(e)),null;case 13:return Y_(t,e,n);case 4:return Gc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Hi(e,null,s,n):mt(t,e,s,n),e.child;case 11:return py(t,e,e.type,e.pendingProps,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Is(e,e.type,s.value),mt(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,qi(e),i=bt(i),s=s(i),e.flags|=1,mt(t,e,s,n),e.child;case 14:return gy(t,e,e.type,e.pendingProps,n);case 15:return K_(t,e,e.type,e.pendingProps,n);case 19:return $_(t,e,n);case 31:return wN(t,e,n);case 22:return Q_(t,e,n,e.pendingProps);case 24:return qi(e),s=bt(et),t===null?(i=Jm(),i===null&&(i=ke,a=Xm(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:s,cache:i},Zm(e),Is(e,et,i)):(t.lanes&n&&(wf(t,e),El(e,null,null,n),_l()),i=t.memoizedState,a=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Is(e,et,s)):(s=a.cache,Is(e,et,s),s!==i.cache&&_f(e,[et],n,!0))),mt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function Fn(t){t.flags|=4}function Nh(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(vE())t.flags|=8192;else throw Vi=Zc,Wm}else t.flags&=-16777217}function wy(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!HE(e))if(vE())t.flags|=8192;else throw Vi=Zc,Wm}function ic(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?_v():536870912,t.lanes|=e,Wa|=e)}function tl(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function SN(t,e,n){var s=e.pendingProps;switch($m(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(e),null;case 1:return Pe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),ss(et),Ka(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ha(e)?Fn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yh())),Pe(e),null;case 26:var i=e.type,a=e.memoizedState;return t===null?(Fn(e),a!==null?(Pe(e),wy(e,a)):(Pe(e),Nh(e,i,null,s,n))):a?a!==t.memoizedState?(Fn(e),Pe(e),wy(e,a)):(Pe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Fn(e),Pe(e),Nh(e,i,t,s,n)),null;case 27:if(Kc(e),n=Gs.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Fn(e);else{if(!s){if(e.stateNode===null)throw Error(B(166));return Pe(e),null}t=In.current,ha(e)?W0(e):(t=zE(i,s,n),e.stateNode=t,Fn(e))}return Pe(e),null;case 5:if(Kc(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Fn(e);else{if(!s){if(e.stateNode===null)throw Error(B(166));return Pe(e),null}if(a=In.current,ha(e))W0(e);else{var r=fu(Gs.current);switch(a){case 1:a=r.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=r.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":a=r.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?a.multiple=!0:s.size&&(a.size=s.size);break;default:a=typeof s.is=="string"?r.createElement(i,{is:s.is}):r.createElement(i)}}a[gt]=e,a[zt]=s;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)a.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=a;e:switch(vt(a,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Fn(e)}}return Pe(e),Nh(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Fn(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(B(166));if(t=Gs.current,ha(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=yt,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[gt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||VE(t.nodeValue,n)),t||ci(e,!0)}else t=fu(t).createTextNode(s),t[gt]=e,e.stateNode=t}return Pe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=ha(e),n!==null){if(t===null){if(!s)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[gt]=e}else Bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),t=!1}else n=yh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Ft(e),e):(Ft(e),null);if(e.flags&128)throw Error(B(558))}return Pe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=ha(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[gt]=e}else Bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),i=!1}else i=yh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Ft(e),e):(Ft(e),null)}return Ft(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),ic(e,e.updateQueue),Pe(e),null);case 4:return Ka(),t===null&&Ep(e.stateNode.containerInfo),Pe(e),null;case 10:return ss(e.type),Pe(e),null;case 19:if(ft($e),s=e.memoizedState,s===null)return Pe(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)tl(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=tu(t),a!==null){for(e.flags|=128,tl(s,!1),t=a.updateQueue,e.updateQueue=t,ic(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Jv(n,t),n=n.sibling;return Oe($e,$e.current&1|2),xe&&$n(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&Qt()>lu&&(e.flags|=128,i=!0,tl(s,!1),e.lanes=4194304)}else{if(!i)if(t=tu(a),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,ic(e,t),tl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!xe)return Pe(e),null}else 2*Qt()-s.renderingStartTime>lu&&n!==536870912&&(e.flags|=128,i=!0,tl(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qt(),t.sibling=null,n=$e.current,Oe($e,i?n&1|2:n&1),xe&&$n(e,s.treeForkCount),t):(Pe(e),null);case 22:case 23:return Ft(e),ep(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Pe(e),e.subtreeFlags&6&&(e.flags|=8192)):Pe(e),n=e.updateQueue,n!==null&&ic(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&ft(Mi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ss(et),Pe(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function NN(t,e){switch($m(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ss(et),Ka(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Kc(e),null;case 31:if(e.memoizedState!==null){if(Ft(e),e.alternate===null)throw Error(B(340));Bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ft(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft($e),null;case 4:return Ka(),null;case 10:return ss(e.type),null;case 22:case 23:return Ft(e),ep(),t!==null&&ft(Mi),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ss(et),null;case 25:return null;default:return null}}function J_(t,e){switch($m(e),e.tag){case 3:ss(et),Ka();break;case 26:case 27:case 5:Kc(e);break;case 4:Ka();break;case 31:e.memoizedState!==null&&Ft(e);break;case 13:Ft(e);break;case 19:ft($e);break;case 10:ss(e.type);break;case 22:case 23:Ft(e),ep(),t!==null&&ft(Mi);break;case 24:ss(et)}}function bo(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var a=n.create,r=n.inst;s=a(),r.destroy=s}n=n.next}while(n!==i)}}catch(c){Ae(e,e.return,c)}}function ui(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var a=i.next;s=a;do{if((s.tag&t)===t){var r=s.inst,c=r.destroy;if(c!==void 0){r.destroy=void 0,i=e;var u=n,d=c;try{d()}catch(f){Ae(i,u,f)}}}s=s.next}while(s!==a)}}catch(f){Ae(e,e.return,f)}}function W_(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{l_(e,n)}catch(s){Ae(t,t.return,s)}}}function Z_(t,e,n){n.props=Gi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ae(t,e,s)}}function Tl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){Ae(t,e,i)}}function Cn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){Ae(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Ae(t,e,i)}else n.current=null}function eE(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){Ae(t,t.return,i)}}function Ah(t,e,n){try{var s=t.stateNode;YN(s,t.type,n,e),s[zt]=e}catch(i){Ae(t,t.return,i)}}function tE(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&bi(t.type)||t.tag===4}function jh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&bi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Of(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wn));else if(s!==4&&(s===27&&bi(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Of(t,e,n),t=t.sibling;t!==null;)Of(t,e,n),t=t.sibling}function ru(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&bi(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(ru(t,e,n),t=t.sibling;t!==null;)ru(t,e,n),t=t.sibling}function nE(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);vt(e,s,n),e[gt]=t,e[zt]=n}catch(a){Ae(t,t.return,a)}}var Xn=!1,Ze=!1,Ch=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,dt=null;function AN(t,e){if(t=t.containerInfo,Bf=yu,t=Hv(t),Fm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var r=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var x;m!==n||i!==0&&m.nodeType!==3||(c=r+i),m!==a||s!==0&&m.nodeType!==3||(u=r+s),m.nodeType===3&&(r+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++d===i&&(c=r),g===a&&++f===s&&(u=r),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qf={focusedElem:t,selectionRange:n},yu=!1,dt=e;dt!==null;)if(e=dt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,dt=t;else for(;dt!==null;){switch(e=dt,a=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,s=n.stateNode;try{var C=Gi(n.type,i);t=s.getSnapshotBeforeUpdate(C,a),s.__reactInternalSnapshotBeforeUpdate=t}catch(I){Ae(n,n.return,I)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Ff(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,dt=t;break}dt=e.return}}function sE(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Kn(t,n),s&4&&bo(5,n);break;case 1:if(Kn(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){Ae(n,n.return,r)}else{var i=Gi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){Ae(n,n.return,r)}}s&64&&W_(n),s&512&&Tl(n,n.return);break;case 3:if(Kn(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{l_(t,e)}catch(r){Ae(n,n.return,r)}}break;case 27:e===null&&s&4&&nE(n);case 26:case 5:Kn(t,n),e===null&&s&4&&eE(n),s&512&&Tl(n,n.return);break;case 12:Kn(t,n);break;case 31:Kn(t,n),s&4&&rE(t,n);break;case 13:Kn(t,n),s&4&&lE(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=VN.bind(null,n),nA(t,n))));break;case 22:if(s=n.memoizedState!==null||Xn,!s){e=e!==null&&e.memoizedState!==null||Ze,i=Xn;var a=Ze;Xn=s,(Ze=e)&&!a?Yn(t,n,(n.subtreeFlags&8772)!==0):Kn(t,n),Xn=i,Ze=a}break;case 30:break;default:Kn(t,n)}}function iE(t){var e=t.alternate;e!==null&&(t.alternate=null,iE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Lm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,Vt=!1;function Gn(t,e,n){for(n=n.child;n!==null;)aE(t,e,n),n=n.sibling}function aE(t,e,n){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ho,n)}catch{}switch(n.tag){case 26:Ze||Cn(n,e),Gn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ze||Cn(n,e);var s=qe,i=Vt;bi(n.type)&&(qe=n.stateNode,Vt=!1),Gn(t,e,n),jl(n.stateNode),qe=s,Vt=i;break;case 5:Ze||Cn(n,e);case 6:if(s=qe,i=Vt,qe=null,Gn(t,e,n),qe=s,Vt=i,qe!==null)if(Vt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(n.stateNode)}catch(a){Ae(n,e,a)}else try{qe.removeChild(n.stateNode)}catch(a){Ae(n,e,a)}break;case 18:qe!==null&&(Vt?(t=qe,Py(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),nr(t)):Py(qe,n.stateNode));break;case 4:s=qe,i=Vt,qe=n.stateNode.containerInfo,Vt=!0,Gn(t,e,n),qe=s,Vt=i;break;case 0:case 11:case 14:case 15:ui(2,n,e),Ze||ui(4,n,e),Gn(t,e,n);break;case 1:Ze||(Cn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&Z_(n,e,s)),Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:Ze=(s=Ze)||n.memoizedState!==null,Gn(t,e,n),Ze=s;break;default:Gn(t,e,n)}}function rE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{nr(t)}catch(n){Ae(e,e.return,n)}}}function lE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{nr(t)}catch(n){Ae(e,e.return,n)}}function jN(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Ty),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Ty),e;default:throw Error(B(435,t.tag))}}function ac(t,e){var n=jN(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=PN.bind(null,t,s);s.then(i,i)}})}function Ot(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],a=t,r=e,c=r;e:for(;c!==null;){switch(c.tag){case 27:if(bi(c.type)){qe=c.stateNode,Vt=!1;break e}break;case 5:qe=c.stateNode,Vt=!1;break e;case 3:case 4:qe=c.stateNode.containerInfo,Vt=!0;break e}c=c.return}if(qe===null)throw Error(B(160));aE(a,r,i),qe=null,Vt=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)oE(e,t),e=e.sibling}var pn=null;function oE(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ot(e,t),Mt(t),s&4&&(ui(3,t,t.return),bo(3,t),ui(5,t,t.return));break;case 1:Ot(e,t),Mt(t),s&512&&(Ze||n===null||Cn(n,n.return)),s&64&&Xn&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=pn;if(Ot(e,t),Mt(t),s&512&&(Ze||n===null||Cn(n,n.return)),s&4){var a=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":a=i.getElementsByTagName("title")[0],(!a||a[po]||a[gt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(s),i.head.insertBefore(a,i.querySelector("head > title"))),vt(a,s,n),a[gt]=t,ht(a),s=a;break e;case"link":var r=Fy("link","href",i).get(s+(n.href||""));if(r){for(var c=0;c<r.length;c++)if(a=r[c],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(c,1);break t}}a=i.createElement(s),vt(a,s,n),i.head.appendChild(a);break;case"meta":if(r=Fy("meta","content",i).get(s+(n.content||""))){for(c=0;c<r.length;c++)if(a=r[c],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(c,1);break t}}a=i.createElement(s),vt(a,s,n),i.head.appendChild(a);break;default:throw Error(B(468,s))}a[gt]=t,ht(a),s=a}t.stateNode=s}else Gy(i,t.type,t.stateNode);else t.stateNode=Hy(i,s,t.memoizedProps);else a!==s?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,s===null?Gy(i,t.type,t.stateNode):Hy(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Ah(t,t.memoizedProps,n.memoizedProps)}break;case 27:Ot(e,t),Mt(t),s&512&&(Ze||n===null||Cn(n,n.return)),n!==null&&s&4&&Ah(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Ot(e,t),Mt(t),s&512&&(Ze||n===null||Cn(n,n.return)),t.flags&32){i=t.stateNode;try{Ya(i,"")}catch(C){Ae(t,t.return,C)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,Ah(t,i,n!==null?n.memoizedProps:i)),s&1024&&(Ch=!0);break;case 6:if(Ot(e,t),Mt(t),s&4){if(t.stateNode===null)throw Error(B(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(C){Ae(t,t.return,C)}}break;case 3:if(jc=null,i=pn,pn=mu(e.containerInfo),Ot(e,t),pn=i,Mt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{nr(e.containerInfo)}catch(C){Ae(t,t.return,C)}Ch&&(Ch=!1,cE(t));break;case 4:s=pn,pn=mu(t.stateNode.containerInfo),Ot(e,t),Mt(t),pn=s;break;case 12:Ot(e,t),Mt(t);break;case 31:Ot(e,t),Mt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,ac(t,s)));break;case 13:Ot(e,t),Mt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(sd=Qt()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,ac(t,s)));break;case 22:i=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,d=Xn,f=Ze;if(Xn=d||i,Ze=f||u,Ot(e,t),Ze=f,Xn=d,Mt(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||u||Xn||Ze||Ii(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(a=u.stateNode,i)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{c=u.stateNode;var m=u.memoizedProps.style,g=m!=null&&m.hasOwnProperty("display")?m.display:null;c.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(C){Ae(u,u.return,C)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(C){Ae(u,u.return,C)}}}else if(e.tag===18){if(n===null){u=e;try{var x=u.stateNode;i?Ly(x,!0):Ly(u.stateNode,!1)}catch(C){Ae(u,u.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,ac(t,n))));break;case 19:Ot(e,t),Mt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,ac(t,s)));break;case 30:break;case 21:break;default:Ot(e,t),Mt(t)}}function Mt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(tE(s)){n=s;break}s=s.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var i=n.stateNode,a=jh(t);ru(t,a,i);break;case 5:var r=n.stateNode;n.flags&32&&(Ya(r,""),n.flags&=-33);var c=jh(t);ru(t,c,r);break;case 3:case 4:var u=n.stateNode.containerInfo,d=jh(t);Of(t,d,u);break;default:throw Error(B(161))}}catch(f){Ae(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cE(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;cE(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Kn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)sE(t,e.alternate,e),e=e.sibling}function Ii(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ui(4,e,e.return),Ii(e);break;case 1:Cn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Z_(e,e.return,n),Ii(e);break;case 27:jl(e.stateNode);case 26:case 5:Cn(e,e.return),Ii(e);break;case 22:e.memoizedState===null&&Ii(e);break;case 30:Ii(e);break;default:Ii(e)}t=t.sibling}}function Yn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,a=e,r=a.flags;switch(a.tag){case 0:case 11:case 15:Yn(i,a,n),bo(4,a);break;case 1:if(Yn(i,a,n),s=a,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(d){Ae(s,s.return,d)}if(s=a,i=s.updateQueue,i!==null){var c=s.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)r_(u[i],c)}catch(d){Ae(s,s.return,d)}}n&&r&64&&W_(a),Tl(a,a.return);break;case 27:nE(a);case 26:case 5:Yn(i,a,n),n&&s===null&&r&4&&eE(a),Tl(a,a.return);break;case 12:Yn(i,a,n);break;case 31:Yn(i,a,n),n&&r&4&&rE(i,a);break;case 13:Yn(i,a,n),n&&r&4&&lE(i,a);break;case 22:a.memoizedState===null&&Yn(i,a,n),Tl(a,a.return);break;case 30:break;default:Yn(i,a,n)}e=e.sibling}}function gp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&yo(n))}function yp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&yo(t))}function mn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)uE(t,e,n,s),e=e.sibling}function uE(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:mn(t,e,n,s),i&2048&&bo(9,e);break;case 1:mn(t,e,n,s);break;case 3:mn(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&yo(t)));break;case 12:if(i&2048){mn(t,e,n,s),t=e.stateNode;try{var a=e.memoizedProps,r=a.id,c=a.onPostCommit;typeof c=="function"&&c(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Ae(e,e.return,u)}}else mn(t,e,n,s);break;case 31:mn(t,e,n,s);break;case 13:mn(t,e,n,s);break;case 23:break;case 22:a=e.stateNode,r=e.alternate,e.memoizedState!==null?a._visibility&2?mn(t,e,n,s):Sl(t,e):a._visibility&2?mn(t,e,n,s):(a._visibility|=2,pa(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&gp(r,e);break;case 24:mn(t,e,n,s),i&2048&&yp(e.alternate,e);break;default:mn(t,e,n,s)}}function pa(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var a=t,r=e,c=n,u=s,d=r.flags;switch(r.tag){case 0:case 11:case 15:pa(a,r,c,u,i),bo(8,r);break;case 23:break;case 22:var f=r.stateNode;r.memoizedState!==null?f._visibility&2?pa(a,r,c,u,i):Sl(a,r):(f._visibility|=2,pa(a,r,c,u,i)),i&&d&2048&&gp(r.alternate,r);break;case 24:pa(a,r,c,u,i),i&&d&2048&&yp(r.alternate,r);break;default:pa(a,r,c,u,i)}e=e.sibling}}function Sl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:Sl(n,s),i&2048&&gp(s.alternate,s);break;case 24:Sl(n,s),i&2048&&yp(s.alternate,s);break;default:Sl(n,s)}e=e.sibling}}var ol=8192;function fa(t,e,n){if(t.subtreeFlags&ol)for(t=t.child;t!==null;)dE(t,e,n),t=t.sibling}function dE(t,e,n){switch(t.tag){case 26:fa(t,e,n),t.flags&ol&&t.memoizedState!==null&&mA(n,pn,t.memoizedState,t.memoizedProps);break;case 5:fa(t,e,n);break;case 3:case 4:var s=pn;pn=mu(t.stateNode.containerInfo),fa(t,e,n),pn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=ol,ol=16777216,fa(t,e,n),ol=s):fa(t,e,n));break;default:fa(t,e,n)}}function hE(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function nl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];dt=s,mE(s,t)}hE(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fE(t),t=t.sibling}function fE(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&ui(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Nc(t)):nl(t);break;default:nl(t)}}function Nc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];dt=s,mE(s,t)}hE(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ui(8,e,e.return),Nc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Nc(e));break;default:Nc(e)}t=t.sibling}}function mE(t,e){for(;dt!==null;){var n=dt;switch(n.tag){case 0:case 11:case 15:ui(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:yo(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,dt=s;else e:for(n=t;dt!==null;){s=dt;var i=s.sibling,a=s.return;if(iE(s),s===n){dt=null;break e}if(i!==null){i.return=a,dt=i;break e}dt=a}}}var CN={getCacheForType:function(t){var e=bt(et),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return bt(et).controller.signal}},IN=typeof WeakMap=="function"?WeakMap:Map,we=0,ke=null,fe=null,ye=0,Ne=0,Ht=null,zs=!1,vr=!1,xp=!1,ds=0,Qe=0,di=0,Pi=0,bp=0,Kt=0,Wa=0,Nl=null,Pt=null,Mf=!1,sd=0,pE=0,lu=1/0,ou=null,$s=null,rt=0,Xs=null,Za=null,is=0,Vf=0,Pf=null,gE=null,Al=0,Lf=null;function Xt(){return we&2&&ye!==0?ye&-ye:ie.T!==null?_p():Sv()}function yE(){if(Kt===0)if(!(ye&536870912)||xe){var t=Jo;Jo<<=1,!(Jo&3932160)&&(Jo=262144),Kt=t}else Kt=536870912;return t=Wt.current,t!==null&&(t.flags|=32),Kt}function Ut(t,e,n){(t===ke&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)&&(er(t,0),Bs(t,ye,Kt,!1)),mo(t,n),(!(we&2)||t!==ke)&&(t===ke&&(!(we&2)&&(Pi|=n),Qe===4&&Bs(t,ye,Kt,!1)),zn(t))}function xE(t,e,n){if(we&6)throw Error(B(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||fo(t,e),i=s?DN(t,e):Ih(t,e,!0),a=s;do{if(i===0){vr&&!s&&Bs(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!RN(n)){i=Ih(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var c=t;i=Nl;var u=c.current.memoizedState.isDehydrated;if(u&&(er(c,r).flags|=256),r=Ih(c,r,!1),r!==2){if(xp&&!u){c.errorRecoveryDisabledLanes|=a,Pi|=a,i=4;break e}a=Pt,Pt=i,a!==null&&(Pt===null?Pt=a:Pt.push.apply(Pt,a))}i=r}if(a=!1,i!==2)continue}}if(i===1){er(t,0),Bs(t,e,0,!0);break}e:{switch(s=t,a=i,a){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:Bs(s,e,Kt,!zs);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(i=sd+300-Qt(),10<i)){if(Bs(s,e,Kt,!zs),Ku(s,0,!0)!==0)break e;is=e,s.timeoutHandle=LE(Sy.bind(null,s,n,Pt,ou,Mf,e,Kt,Pi,Wa,zs,a,"Throttled",-0,0),i);break e}Sy(s,n,Pt,ou,Mf,e,Kt,Pi,Wa,zs,a,null,-0,0)}}break}while(!0);zn(t)}function Sy(t,e,n,s,i,a,r,c,u,d,f,m,g,x){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},dE(e,a,m);var C=(a&62914560)===a?sd-Qt():(a&4194048)===a?pE-Qt():0;if(C=pA(m,C),C!==null){is=a,t.cancelPendingCommit=C(Ay.bind(null,t,e,a,n,s,i,r,c,u,f,m,null,g,x)),Bs(t,a,r,!d);return}}Ay(t,e,a,n,s,i,r,c,u)}function RN(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!Jt(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bs(t,e,n,s){e&=~bp,e&=~Pi,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var a=31-$t(i),r=1<<a;s[a]=-1,i&=~r}n!==0&&Ev(t,n,e)}function id(){return we&6?!0:(vo(0),!1)}function vp(){if(fe!==null){if(Ne===0)var t=fe.return;else t=fe,Zn=ta=null,ap(t),La=null,ql=0,t=fe;for(;t!==null;)J_(t.alternate,t),t=t.return;fe=null}}function er(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,JN(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),is=0,vp(),ke=t,fe=n=ns(t.current,null),ye=e,Ne=0,Ht=null,zs=!1,vr=fo(t,e),xp=!1,Wa=Kt=bp=Pi=di=Qe=0,Pt=Nl=null,Mf=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-$t(s),a=1<<i;e|=t[i],s&=~a}return ds=e,Xu(),n}function bE(t,e){oe=null,ie.H=Fl,e===br||e===Wu?(e=sy(),Ne=3):e===Wm?(e=sy(),Ne=4):Ne=e===mp?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Ht=e,fe===null&&(Qe=1,iu(t,an(e,t.current)))}function vE(){var t=Wt.current;return t===null?!0:(ye&4194048)===ye?cn===null:(ye&62914560)===ye||ye&536870912?t===cn:!1}function _E(){var t=ie.H;return ie.H=Fl,t===null?Fl:t}function EE(){var t=ie.A;return ie.A=CN,t}function cu(){Qe=4,zs||(ye&4194048)!==ye&&Wt.current!==null||(vr=!0),!(di&134217727)&&!(Pi&134217727)||ke===null||Bs(ke,ye,Kt,!1)}function Ih(t,e,n){var s=we;we|=2;var i=_E(),a=EE();(ke!==t||ye!==e)&&(ou=null,er(t,e)),e=!1;var r=Qe;e:do try{if(Ne!==0&&fe!==null){var c=fe,u=Ht;switch(Ne){case 8:vp(),r=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(e=!0);var d=Ne;if(Ne=0,Ht=null,ka(t,c,u,d),n&&vr){r=0;break e}break;default:d=Ne,Ne=0,Ht=null,ka(t,c,u,d)}}kN(),r=Qe;break}catch(f){bE(t,f)}while(!0);return e&&t.shellSuspendCounter++,Zn=ta=null,we=s,ie.H=i,ie.A=a,fe===null&&(ke=null,ye=0,Xu()),r}function kN(){for(;fe!==null;)wE(fe)}function DN(t,e){var n=we;we|=2;var s=_E(),i=EE();ke!==t||ye!==e?(ou=null,lu=Qt()+500,er(t,e)):vr=fo(t,e);e:do try{if(Ne!==0&&fe!==null){e=fe;var a=Ht;t:switch(Ne){case 1:Ne=0,Ht=null,ka(t,e,a,1);break;case 2:case 9:if(ny(a)){Ne=0,Ht=null,Ny(e);break}e=function(){Ne!==2&&Ne!==9||ke!==t||(Ne=7),zn(t)},a.then(e,e);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:ny(a)?(Ne=0,Ht=null,Ny(e)):(Ne=0,Ht=null,ka(t,e,a,7));break;case 5:var r=null;switch(fe.tag){case 26:r=fe.memoizedState;case 5:case 27:var c=fe;if(r?HE(r):c.stateNode.complete){Ne=0,Ht=null;var u=c.sibling;if(u!==null)fe=u;else{var d=c.return;d!==null?(fe=d,ad(d)):fe=null}break t}}Ne=0,Ht=null,ka(t,e,a,5);break;case 6:Ne=0,Ht=null,ka(t,e,a,6);break;case 8:vp(),Qe=6;break e;default:throw Error(B(462))}}ON();break}catch(f){bE(t,f)}while(!0);return Zn=ta=null,ie.H=s,ie.A=i,we=n,fe!==null?0:(ke=null,ye=0,Xu(),Qe)}function ON(){for(;fe!==null&&!sS();)wE(fe)}function wE(t){var e=X_(t.alternate,t,ds);t.memoizedProps=t.pendingProps,e===null?ad(t):fe=e}function Ny(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=by(n,e,e.pendingProps,e.type,void 0,ye);break;case 11:e=by(n,e,e.pendingProps,e.type.render,e.ref,ye);break;case 5:ap(e);default:J_(n,e),e=fe=Jv(e,ds),e=X_(n,e,ds)}t.memoizedProps=t.pendingProps,e===null?ad(t):fe=e}function ka(t,e,n,s){Zn=ta=null,ap(e),La=null,ql=0;var i=e.return;try{if(EN(t,i,e,n,ye)){Qe=1,iu(t,an(n,t.current)),fe=null;return}}catch(a){if(i!==null)throw fe=i,a;Qe=1,iu(t,an(n,t.current)),fe=null;return}e.flags&32768?(xe||s===1?t=!0:vr||ye&536870912?t=!1:(zs=t=!0,(s===2||s===9||s===3||s===6)&&(s=Wt.current,s!==null&&s.tag===13&&(s.flags|=16384))),TE(e,t)):ad(e)}function ad(t){var e=t;do{if(e.flags&32768){TE(e,zs);return}t=e.return;var n=SN(e.alternate,e,ds);if(n!==null){fe=n;return}if(e=e.sibling,e!==null){fe=e;return}fe=e=t}while(e!==null);Qe===0&&(Qe=5)}function TE(t,e){do{var n=NN(t.alternate,t);if(n!==null){n.flags&=32767,fe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){fe=t;return}fe=t=n}while(t!==null);Qe=6,fe=null}function Ay(t,e,n,s,i,a,r,c,u){t.cancelPendingCommit=null;do rd();while(rt!==0);if(we&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(a=e.lanes|e.childLanes,a|=Gm,fS(t,n,a,r,c,u),t===ke&&(fe=ke=null,ye=0),Za=e,Xs=t,is=n,Vf=a,Pf=i,gE=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,LN(Qc,function(){return CE(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ie.T,ie.T=null,i=Te.p,Te.p=2,r=we,we|=4;try{AN(t,e,n)}finally{we=r,Te.p=i,ie.T=s}}rt=1,SE(),NE(),AE()}}function SE(){if(rt===1){rt=0;var t=Xs,e=Za,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ie.T,ie.T=null;var s=Te.p;Te.p=2;var i=we;we|=4;try{oE(e,t);var a=qf,r=Hv(t.containerInfo),c=a.focusedElem,u=a.selectionRange;if(r!==c&&c&&c.ownerDocument&&qv(c.ownerDocument.documentElement,c)){if(u!==null&&Fm(c)){var d=u.start,f=u.end;if(f===void 0&&(f=d),"selectionStart"in c)c.selectionStart=d,c.selectionEnd=Math.min(f,c.value.length);else{var m=c.ownerDocument||document,g=m&&m.defaultView||window;if(g.getSelection){var x=g.getSelection(),C=c.textContent.length,I=Math.min(u.start,C),D=u.end===void 0?I:Math.min(u.end,C);!x.extend&&I>D&&(r=D,D=I,I=r);var T=$0(c,I),_=$0(c,D);if(T&&_&&(x.rangeCount!==1||x.anchorNode!==T.node||x.anchorOffset!==T.offset||x.focusNode!==_.node||x.focusOffset!==_.offset)){var w=m.createRange();w.setStart(T.node,T.offset),x.removeAllRanges(),I>D?(x.addRange(w),x.extend(_.node,_.offset)):(w.setEnd(_.node,_.offset),x.addRange(w))}}}}for(m=[],x=c;x=x.parentNode;)x.nodeType===1&&m.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<m.length;c++){var R=m[c];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}yu=!!Bf,qf=Bf=null}finally{we=i,Te.p=s,ie.T=n}}t.current=e,rt=2}}function NE(){if(rt===2){rt=0;var t=Xs,e=Za,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ie.T,ie.T=null;var s=Te.p;Te.p=2;var i=we;we|=4;try{sE(t,e.alternate,e)}finally{we=i,Te.p=s,ie.T=n}}rt=3}}function AE(){if(rt===4||rt===3){rt=0,iS();var t=Xs,e=Za,n=is,s=gE;e.subtreeFlags&10256||e.flags&10256?rt=5:(rt=0,Za=Xs=null,jE(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&($s=null),Pm(n),e=e.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ho,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ie.T,i=Te.p,Te.p=2,ie.T=null;try{for(var a=t.onRecoverableError,r=0;r<s.length;r++){var c=s[r];a(c.value,{componentStack:c.stack})}}finally{ie.T=e,Te.p=i}}is&3&&rd(),zn(t),i=t.pendingLanes,n&261930&&i&42?t===Lf?Al++:(Al=0,Lf=t):Al=0,vo(0)}}function jE(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,yo(e)))}function rd(){return SE(),NE(),AE(),CE()}function CE(){if(rt!==5)return!1;var t=Xs,e=Vf;Vf=0;var n=Pm(is),s=ie.T,i=Te.p;try{Te.p=32>n?32:n,ie.T=null,n=Pf,Pf=null;var a=Xs,r=is;if(rt=0,Za=Xs=null,is=0,we&6)throw Error(B(331));var c=we;if(we|=4,fE(a.current),uE(a,a.current,r,n),we=c,vo(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ho,a)}catch{}return!0}finally{Te.p=i,ie.T=s,jE(t,e)}}function jy(t,e,n){e=an(n,e),e=Rf(t.stateNode,e,2),t=Ys(t,e,2),t!==null&&(mo(t,2),zn(t))}function Ae(t,e,n){if(t.tag===3)jy(t,t,n);else for(;e!==null;){if(e.tag===3){jy(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&($s===null||!$s.has(s))){t=an(n,t),n=F_(2),s=Ys(e,n,2),s!==null&&(G_(n,s,e,t),mo(s,2),zn(s));break}}e=e.return}}function Rh(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new IN;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(xp=!0,i.add(n),t=MN.bind(null,t,e,n),e.then(t,t))}function MN(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ke===t&&(ye&n)===n&&(Qe===4||Qe===3&&(ye&62914560)===ye&&300>Qt()-sd?!(we&2)&&er(t,0):bp|=n,Wa===ye&&(Wa=0)),zn(t)}function IE(t,e){e===0&&(e=_v()),t=ea(t,e),t!==null&&(mo(t,e),zn(t))}function VN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),IE(t,n)}function PN(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(B(314))}s!==null&&s.delete(e),IE(t,n)}function LN(t,e){return Mm(t,e)}var uu=null,ga=null,Uf=!1,du=!1,kh=!1,qs=0;function zn(t){t!==ga&&t.next===null&&(ga===null?uu=ga=t:ga=ga.next=t),du=!0,Uf||(Uf=!0,zN())}function vo(t,e){if(!kh&&du){kh=!0;do for(var n=!1,s=uu;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var a=0;else{var r=s.suspendedLanes,c=s.pingedLanes;a=(1<<31-$t(42|t)+1)-1,a&=i&~(r&~c),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Cy(s,a))}else a=ye,a=Ku(s,s===ke?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(a&3)||fo(s,a)||(n=!0,Cy(s,a));s=s.next}while(n);kh=!1}}function UN(){RE()}function RE(){du=Uf=!1;var t=0;qs!==0&&XN()&&(t=qs);for(var e=Qt(),n=null,s=uu;s!==null;){var i=s.next,a=kE(s,e);a===0?(s.next=null,n===null?uu=i:n.next=i,i===null&&(ga=n)):(n=s,(t!==0||a&3)&&(du=!0)),s=i}rt!==0&&rt!==5||vo(t),qs!==0&&(qs=0)}function kE(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var r=31-$t(a),c=1<<r,u=i[r];u===-1?(!(c&n)||c&s)&&(i[r]=hS(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}if(e=ke,n=ye,n=Ku(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&rh(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||fo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&rh(s),Pm(n)){case 2:case 8:n=bv;break;case 32:n=Qc;break;case 268435456:n=vv;break;default:n=Qc}return s=DE.bind(null,t),n=Mm(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&rh(s),t.callbackPriority=2,t.callbackNode=null,2}function DE(t,e){if(rt!==0&&rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(rd()&&t.callbackNode!==n)return null;var s=ye;return s=Ku(t,t===ke?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(xE(t,s,e),kE(t,Qt()),t.callbackNode!=null&&t.callbackNode===n?DE.bind(null,t):null)}function Cy(t,e){if(rd())return null;xE(t,e,!0)}function zN(){WN(function(){we&6?Mm(xv,UN):RE()})}function _p(){if(qs===0){var t=$a;t===0&&(t=Xo,Xo<<=1,!(Xo&261888)&&(Xo=256)),qs=t}return qs}function Iy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yc(""+t)}function Ry(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function BN(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var a=Iy((i[zt]||null).action),r=s.submitter;r&&(e=(e=r[zt]||null)?Iy(e.formAction):r.getAttribute("formAction"),e!==null&&(a=e,r=null));var c=new Qu("action","action",null,s,i);t.push({event:c,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(qs!==0){var u=r?Ry(i,r):new FormData(i);Cf(n,{pending:!0,data:u,method:i.method,action:a},null,u)}}else typeof a=="function"&&(c.preventDefault(),u=r?Ry(i,r):new FormData(i),Cf(n,{pending:!0,data:u,method:i.method,action:a},a,u))},currentTarget:i}]})}}for(var Dh=0;Dh<yf.length;Dh++){var Oh=yf[Dh],qN=Oh.toLowerCase(),HN=Oh[0].toUpperCase()+Oh.slice(1);En(qN,"on"+HN)}En(Gv,"onAnimationEnd");En(Kv,"onAnimationIteration");En(Qv,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(aN,"onTransitionRun");En(rN,"onTransitionStart");En(lN,"onTransitionCancel");En(Yv,"onTransitionEnd");Qa("onMouseEnter",["mouseout","mouseover"]);Qa("onMouseLeave",["mouseout","mouseover"]);Qa("onPointerEnter",["pointerout","pointerover"]);Qa("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function OE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var r=s.length-1;0<=r;r--){var c=s[r],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&i.isPropagationStopped())break e;a=c,i.currentTarget=d;try{a(i)}catch(f){$c(f)}i.currentTarget=null,a=u}else for(r=0;r<s.length;r++){if(c=s[r],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&i.isPropagationStopped())break e;a=c,i.currentTarget=d;try{a(i)}catch(f){$c(f)}i.currentTarget=null,a=u}}}}function he(t,e){var n=e[cf];n===void 0&&(n=e[cf]=new Set);var s=t+"__bubble";n.has(s)||(ME(e,t,2,!1),n.add(s))}function Mh(t,e,n){var s=0;e&&(s|=4),ME(n,t,s,e)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Ep(t){if(!t[rc]){t[rc]=!0,Nv.forEach(function(n){n!=="selectionchange"&&(FN.has(n)||Mh(n,!1,t),Mh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rc]||(e[rc]=!0,Mh("selectionchange",!1,e))}}function ME(t,e,n,s){switch(YE(e)){case 2:var i=xA;break;case 8:i=bA;break;default:i=Np}n=i.bind(null,e,n,t),i=void 0,!mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vh(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var r=s.tag;if(r===3||r===4){var c=s.stateNode.containerInfo;if(c===i)break;if(r===4)for(r=s.return;r!==null;){var u=r.tag;if((u===3||u===4)&&r.stateNode.containerInfo===i)return;r=r.return}for(;c!==null;){if(r=wa(c),r===null)return;if(u=r.tag,u===5||u===6||u===26||u===27){s=a=r;continue e}c=c.parentNode}}s=s.return}Ov(function(){var d=a,f=zm(n),m=[];e:{var g=$v.get(t);if(g!==void 0){var x=Qu,C=t;switch(t){case"keypress":if(bc(n)===0)break e;case"keydown":case"keyup":x=PS;break;case"focusin":C="focus",x=dh;break;case"focusout":C="blur",x=dh;break;case"beforeblur":case"afterblur":x=dh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=U0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=SS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=zS;break;case Gv:case Kv:case Qv:x=jS;break;case Yv:x=qS;break;case"scroll":case"scrollend":x=wS;break;case"wheel":x=FS;break;case"copy":case"cut":case"paste":x=IS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=B0;break;case"toggle":case"beforetoggle":x=KS}var I=(e&4)!==0,D=!I&&(t==="scroll"||t==="scrollend"),T=I?g!==null?g+"Capture":null:g;I=[];for(var _=d,w;_!==null;){var R=_;if(w=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||w===null||T===null||(R=Pl(_,T),R!=null&&I.push(Kl(_,R,w))),D)break;_=_.return}0<I.length&&(g=new x(g,C,null,n,f),m.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==ff&&(C=n.relatedTarget||n.fromElement)&&(wa(C)||C[gr]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=d,C=C?wa(C):null,C!==null&&(D=uo(C),I=C.tag,C!==D||I!==5&&I!==27&&I!==6)&&(C=null)):(x=null,C=d),x!==C)){if(I=U0,R="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=B0,R="onPointerLeave",T="onPointerEnter",_="pointer"),D=x==null?g:rl(x),w=C==null?g:rl(C),g=new I(R,_+"leave",x,n,f),g.target=D,g.relatedTarget=w,R=null,wa(f)===d&&(I=new I(T,_+"enter",C,n,f),I.target=w,I.relatedTarget=D,R=I),D=R,x&&C)t:{for(I=GN,T=x,_=C,w=0,R=T;R;R=I(R))w++;R=0;for(var M=_;M;M=I(M))R++;for(;0<w-R;)T=I(T),w--;for(;0<R-w;)_=I(_),R--;for(;w--;){if(T===_||_!==null&&T===_.alternate){I=T;break t}T=I(T),_=I(_)}I=null}else I=null;x!==null&&ky(m,g,x,I,!1),C!==null&&D!==null&&ky(m,D,C,I,!0)}}e:{if(g=d?rl(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var U=G0;else if(F0(g))if(zv)U=nN;else{U=eN;var v=ZS}else x=g.nodeName,!x||x.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&Um(d.elementType)&&(U=G0):U=tN;if(U&&(U=U(t,d))){Uv(m,U,n,f);break e}v&&v(t,g,d),t==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&hf(g,"number",g.value)}switch(v=d?rl(d):window,t){case"focusin":(F0(v)||v.contentEditable==="true")&&(Na=v,pf=d,xl=null);break;case"focusout":xl=pf=Na=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,X0(m,n,f);break;case"selectionchange":if(iN)break;case"keydown":case"keyup":X0(m,n,f)}var y;if(Hm)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Sa?Pv(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Vv&&n.locale!=="ko"&&(Sa||b!=="onCompositionStart"?b==="onCompositionEnd"&&Sa&&(y=Mv()):(Us=f,Bm="value"in Us?Us.value:Us.textContent,Sa=!0)),v=hu(d,b),0<v.length&&(b=new z0(b,t,null,n,f),m.push({event:b,listeners:v}),y?b.data=y:(y=Lv(n),y!==null&&(b.data=y)))),(y=YS?$S(t,n):XS(t,n))&&(b=hu(d,"onBeforeInput"),0<b.length&&(v=new z0("onBeforeInput","beforeinput",null,n,f),m.push({event:v,listeners:b}),v.data=y)),BN(m,t,d,n,f)}OE(m,e)})}function Kl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=Pl(t,n),i!=null&&s.unshift(Kl(t,i,a)),i=Pl(t,e),i!=null&&s.push(Kl(t,i,a))),t.tag===3)return s;t=t.return}return[]}function GN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ky(t,e,n,s,i){for(var a=e._reactName,r=[];n!==null&&n!==s;){var c=n,u=c.alternate,d=c.stateNode;if(c=c.tag,u!==null&&u===s)break;c!==5&&c!==26&&c!==27||d===null||(u=d,i?(d=Pl(n,a),d!=null&&r.unshift(Kl(n,d,u))):i||(d=Pl(n,a),d!=null&&r.push(Kl(n,d,u)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var KN=/\r\n?/g,QN=/\u0000|\uFFFD/g;function Dy(t){return(typeof t=="string"?t:""+t).replace(KN,`
`).replace(QN,"")}function VE(t,e){return e=Dy(e),Dy(t)===e}function je(t,e,n,s,i,a){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Ya(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Ya(t,""+s);break;case"className":Zo(t,"class",s);break;case"tabIndex":Zo(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Zo(t,n,s);break;case"style":Dv(t,s,a);break;case"data":if(e!=="object"){Zo(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=yc(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&je(t,e,"name",i.name,i,null),je(t,e,"formEncType",i.formEncType,i,null),je(t,e,"formMethod",i.formMethod,i,null),je(t,e,"formTarget",i.formTarget,i,null)):(je(t,e,"encType",i.encType,i,null),je(t,e,"method",i.method,i,null),je(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=yc(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Wn);break;case"onScroll":s!=null&&he("scroll",t);break;case"onScrollEnd":s!=null&&he("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(B(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=yc(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":he("beforetoggle",t),he("toggle",t),gc(t,"popover",s);break;case"xlinkActuate":Hn(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Hn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Hn(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Hn(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Hn(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Hn(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":gc(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=_S.get(n)||n,gc(t,n,s))}}function zf(t,e,n,s,i,a){switch(n){case"style":Dv(t,s,a);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(B(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Ya(t,s):(typeof s=="number"||typeof s=="bigint")&&Ya(t,""+s);break;case"onScroll":s!=null&&he("scroll",t);break;case"onScrollEnd":s!=null&&he("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Av.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[zt]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof s=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):gc(t,n,s)}}}function vt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",t),he("load",t);var s=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var r=n[a];if(r!=null)switch(a){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:je(t,e,a,r,n,null)}}i&&je(t,e,"srcSet",n.srcSet,n,null),s&&je(t,e,"src",n.src,n,null);return;case"input":he("invalid",t);var c=a=r=i=null,u=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var f=n[s];if(f!=null)switch(s){case"name":i=f;break;case"type":r=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":a=f;break;case"defaultValue":c=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(B(137,e));break;default:je(t,e,s,f,n,null)}}Iv(t,a,c,u,d,r,i,!1);return;case"select":he("invalid",t),s=r=a=null;for(i in n)if(n.hasOwnProperty(i)&&(c=n[i],c!=null))switch(i){case"value":a=c;break;case"defaultValue":r=c;break;case"multiple":s=c;default:je(t,e,i,c,n,null)}e=a,n=r,t.multiple=!!s,e!=null?Ma(t,!!s,e,!1):n!=null&&Ma(t,!!s,n,!0);return;case"textarea":he("invalid",t),a=i=s=null;for(r in n)if(n.hasOwnProperty(r)&&(c=n[r],c!=null))switch(r){case"value":s=c;break;case"defaultValue":i=c;break;case"children":a=c;break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(B(91));break;default:je(t,e,r,c,n,null)}kv(t,s,i,a);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:je(t,e,u,s,n,null)}return;case"dialog":he("beforetoggle",t),he("toggle",t),he("cancel",t),he("close",t);break;case"iframe":case"object":he("load",t);break;case"video":case"audio":for(s=0;s<Gl.length;s++)he(Gl[s],t);break;case"image":he("error",t),he("load",t);break;case"details":he("toggle",t);break;case"embed":case"source":case"link":he("error",t),he("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:je(t,e,d,s,n,null)}return;default:if(Um(e)){for(f in n)n.hasOwnProperty(f)&&(s=n[f],s!==void 0&&zf(t,e,f,s,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(s=n[c],s!=null&&je(t,e,c,s,n,null))}function YN(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,r=null,c=null,u=null,d=null,f=null;for(x in n){var m=n[x];if(n.hasOwnProperty(x)&&m!=null)switch(x){case"checked":break;case"value":break;case"defaultValue":u=m;default:s.hasOwnProperty(x)||je(t,e,x,null,s,m)}}for(var g in s){var x=s[g];if(m=n[g],s.hasOwnProperty(g)&&(x!=null||m!=null))switch(g){case"type":a=x;break;case"name":i=x;break;case"checked":d=x;break;case"defaultChecked":f=x;break;case"value":r=x;break;case"defaultValue":c=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(B(137,e));break;default:x!==m&&je(t,e,g,x,s,m)}}df(t,r,c,u,d,f,a,i);return;case"select":x=r=c=g=null;for(a in n)if(u=n[a],n.hasOwnProperty(a)&&u!=null)switch(a){case"value":break;case"multiple":x=u;default:s.hasOwnProperty(a)||je(t,e,a,null,s,u)}for(i in s)if(a=s[i],u=n[i],s.hasOwnProperty(i)&&(a!=null||u!=null))switch(i){case"value":g=a;break;case"defaultValue":c=a;break;case"multiple":r=a;default:a!==u&&je(t,e,i,a,s,u)}e=c,n=r,s=x,g!=null?Ma(t,!!n,g,!1):!!s!=!!n&&(e!=null?Ma(t,!!n,e,!0):Ma(t,!!n,n?[]:"",!1));return;case"textarea":x=g=null;for(c in n)if(i=n[c],n.hasOwnProperty(c)&&i!=null&&!s.hasOwnProperty(c))switch(c){case"value":break;case"children":break;default:je(t,e,c,null,s,i)}for(r in s)if(i=s[r],a=n[r],s.hasOwnProperty(r)&&(i!=null||a!=null))switch(r){case"value":g=i;break;case"defaultValue":x=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(B(91));break;default:i!==a&&je(t,e,r,i,s,a)}Rv(t,g,x);return;case"option":for(var C in n)if(g=n[C],n.hasOwnProperty(C)&&g!=null&&!s.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:je(t,e,C,null,s,g)}for(u in s)if(g=s[u],x=n[u],s.hasOwnProperty(u)&&g!==x&&(g!=null||x!=null))switch(u){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:je(t,e,u,g,s,x)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in n)g=n[I],n.hasOwnProperty(I)&&g!=null&&!s.hasOwnProperty(I)&&je(t,e,I,null,s,g);for(d in s)if(g=s[d],x=n[d],s.hasOwnProperty(d)&&g!==x&&(g!=null||x!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(B(137,e));break;default:je(t,e,d,g,s,x)}return;default:if(Um(e)){for(var D in n)g=n[D],n.hasOwnProperty(D)&&g!==void 0&&!s.hasOwnProperty(D)&&zf(t,e,D,void 0,s,g);for(f in s)g=s[f],x=n[f],!s.hasOwnProperty(f)||g===x||g===void 0&&x===void 0||zf(t,e,f,g,s,x);return}}for(var T in n)g=n[T],n.hasOwnProperty(T)&&g!=null&&!s.hasOwnProperty(T)&&je(t,e,T,null,s,g);for(m in s)g=s[m],x=n[m],!s.hasOwnProperty(m)||g===x||g==null&&x==null||je(t,e,m,g,s,x)}function Oy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $N(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],a=i.transferSize,r=i.initiatorType,c=i.duration;if(a&&c&&Oy(r)){for(r=0,c=i.responseEnd,s+=1;s<n.length;s++){var u=n[s],d=u.startTime;if(d>c)break;var f=u.transferSize,m=u.initiatorType;f&&Oy(m)&&(u=u.responseEnd,r+=f*(u<c?1:(c-d)/(u-d)))}if(--s,e+=8*(a+r)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bf=null,qf=null;function fu(t){return t.nodeType===9?t:t.ownerDocument}function My(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PE(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ph=null;function XN(){var t=window.event;return t&&t.type==="popstate"?t===Ph?!1:(Ph=t,!0):(Ph=null,!1)}var LE=typeof setTimeout=="function"?setTimeout:void 0,JN=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,WN=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch(ZN)}:LE;function ZN(t){setTimeout(function(){throw t})}function bi(t){return t==="head"}function Py(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),nr(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")jl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,jl(n);for(var a=n.firstChild;a;){var r=a.nextSibling,c=a.nodeName;a[po]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=r}}else n==="body"&&jl(t.ownerDocument.body);n=i}while(n);nr(e)}function Ly(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function Ff(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ff(n),Lm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function eA(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[po])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=un(t.nextSibling),t===null)break}return null}function tA(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=un(t.nextSibling),t===null))return null;return t}function UE(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=un(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$?"||t.data==="$~"}function Kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function nA(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Qf=null;function Uy(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return un(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function zy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function zE(t,e,n){switch(e=fu(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function jl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Lm(t)}var hn=new Map,By=new Set;function mu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var gs=Te.d;Te.d={f:sA,r:iA,D:aA,C:rA,L:lA,m:oA,X:uA,S:cA,M:dA};function sA(){var t=gs.f(),e=id();return t||e}function iA(t){var e=yr(t);e!==null&&e.tag===5&&e.type==="form"?D_(e):gs.r(t)}var _r=typeof document>"u"?null:document;function BE(t,e,n){var s=_r;if(s&&typeof e=="string"&&e){var i=sn(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),By.has(i)||(By.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),vt(e,"link",t),ht(e),s.head.appendChild(e)))}}function aA(t){gs.D(t),BE("dns-prefetch",t,null)}function rA(t,e){gs.C(t,e),BE("preconnect",t,e)}function lA(t,e,n){gs.L(t,e,n);var s=_r;if(s&&t&&e){var i='link[rel="preload"][as="'+sn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+sn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+sn(n.imageSizes)+'"]')):i+='[href="'+sn(t)+'"]';var a=i;switch(e){case"style":a=tr(t);break;case"script":a=Er(t)}hn.has(a)||(t=Be({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),hn.set(a,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(_o(a))||e==="script"&&s.querySelector(Eo(a))||(e=s.createElement("link"),vt(e,"link",t),ht(e),s.head.appendChild(e)))}}function oA(t,e){gs.m(t,e);var n=_r;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+sn(s)+'"][href="'+sn(t)+'"]',a=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Er(t)}if(!hn.has(a)&&(t=Be({rel:"modulepreload",href:t},e),hn.set(a,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Eo(a)))return}s=n.createElement("link"),vt(s,"link",t),ht(s),n.head.appendChild(s)}}}function cA(t,e,n){gs.S(t,e,n);var s=_r;if(s&&t){var i=Oa(s).hoistableStyles,a=tr(t);e=e||"default";var r=i.get(a);if(!r){var c={loading:0,preload:null};if(r=s.querySelector(_o(a)))c.loading=5;else{t=Be({rel:"stylesheet",href:t,"data-precedence":e},n),(n=hn.get(a))&&wp(t,n);var u=r=s.createElement("link");ht(u),vt(u,"link",t),u._p=new Promise(function(d,f){u.onload=d,u.onerror=f}),u.addEventListener("load",function(){c.loading|=1}),u.addEventListener("error",function(){c.loading|=2}),c.loading|=4,Ac(r,e,s)}r={type:"stylesheet",instance:r,count:1,state:c},i.set(a,r)}}}function uA(t,e){gs.X(t,e);var n=_r;if(n&&t){var s=Oa(n).hoistableScripts,i=Er(t),a=s.get(i);a||(a=n.querySelector(Eo(i)),a||(t=Be({src:t,async:!0},e),(e=hn.get(i))&&Tp(t,e),a=n.createElement("script"),ht(a),vt(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function dA(t,e){gs.M(t,e);var n=_r;if(n&&t){var s=Oa(n).hoistableScripts,i=Er(t),a=s.get(i);a||(a=n.querySelector(Eo(i)),a||(t=Be({src:t,async:!0,type:"module"},e),(e=hn.get(i))&&Tp(t,e),a=n.createElement("script"),ht(a),vt(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function qy(t,e,n,s){var i=(i=Gs.current)?mu(i):null;if(!i)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=tr(n.href),n=Oa(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=tr(n.href);var a=Oa(i).hoistableStyles,r=a.get(t);if(r||(i=i.ownerDocument||i,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,r),(a=i.querySelector(_o(t)))&&!a._p&&(r.instance=a,r.state.loading=5),hn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hn.set(t,n),a||hA(i,t,n,r.state))),e&&s===null)throw Error(B(528,""));return r}if(e&&s!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Er(n),n=Oa(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function tr(t){return'href="'+sn(t)+'"'}function _o(t){return'link[rel="stylesheet"]['+t+"]"}function qE(t){return Be({},t,{"data-precedence":t.precedence,precedence:null})}function hA(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),vt(e,"link",n),ht(e),t.head.appendChild(e))}function Er(t){return'[src="'+sn(t)+'"]'}function Eo(t){return"script[async]"+t}function Hy(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+sn(n.href)+'"]');if(s)return e.instance=s,ht(s),s;var i=Be({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),ht(s),vt(s,"style",i),Ac(s,n.precedence,t),e.instance=s;case"stylesheet":i=tr(n.href);var a=t.querySelector(_o(i));if(a)return e.state.loading|=4,e.instance=a,ht(a),a;s=qE(n),(i=hn.get(i))&&wp(s,i),a=(t.ownerDocument||t).createElement("link"),ht(a);var r=a;return r._p=new Promise(function(c,u){r.onload=c,r.onerror=u}),vt(a,"link",s),e.state.loading|=4,Ac(a,n.precedence,t),e.instance=a;case"script":return a=Er(n.src),(i=t.querySelector(Eo(a)))?(e.instance=i,ht(i),i):(s=n,(i=hn.get(a))&&(s=Be({},n),Tp(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),ht(i),vt(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Ac(s,n.precedence,t));return e.instance}function Ac(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,a=i,r=0;r<s.length;r++){var c=s[r];if(c.dataset.precedence===e)a=c;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function wp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Tp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var jc=null;function Fy(t,e,n){if(jc===null){var s=new Map,i=jc=new Map;i.set(n,s)}else i=jc,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[po]||a[gt]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(e)||"";r=t+r;var c=s.get(r);c?c.push(a):s.set(r,[a])}}return s}function Gy(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function fA(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function HE(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function mA(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=tr(s.href),a=e.querySelector(_o(i));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=pu.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=a,ht(a);return}a=e.ownerDocument||e,s=qE(s),(i=hn.get(i))&&wp(s,i),a=a.createElement("link"),ht(a);var r=a;r._p=new Promise(function(c,u){r.onload=c,r.onerror=u}),vt(a,"link",s),n.instance=a}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=pu.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Lh=0;function pA(t,e){return t.stylesheets&&t.count===0&&Cc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4+e);0<t.imgBytes&&Lh===0&&(Lh=62500*$N());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend)){var a=t.unsuspend;t.unsuspend=null,a()}},(t.imgBytes>Lh?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function pu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var gu=null;function Cc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,gu=new Map,e.forEach(gA,t),gu=null,pu.call(t))}function gA(t,e){if(!(e.state.loading&4)){var n=gu.get(t);if(n)var s=n.get(null);else{n=new Map,gu.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var r=i[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),s=r)}s&&n.set(null,s)}i=e.instance,r=i.getAttribute("data-precedence"),a=n.get(r)||s,a===s&&n.set(null,i),n.set(r,i),this.count++,s=pu.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Ql={$$typeof:Jn,Provider:null,Consumer:null,_currentValue:Di,_currentValue2:Di,_threadCount:0};function yA(t,e,n,s,i,a,r,c,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lh(0),this.hiddenUpdates=lh(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function FE(t,e,n,s,i,a,r,c,u,d,f,m){return t=new yA(t,e,n,r,u,d,f,m,c),e=1,a===!0&&(e|=24),a=Gt(3,null,null,e),t.current=a,a.stateNode=t,e=Xm(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:s,isDehydrated:n,cache:e},Zm(a),t}function GE(t){return t?(t=Ca,t):Ca}function KE(t,e,n,s,i,a){i=GE(i),s.context===null?s.context=i:s.pendingContext=i,s=Qs(e),s.payload={element:n},a=a===void 0?null:a,a!==null&&(s.callback=a),n=Ys(t,s,e),n!==null&&(Ut(n,t,e),vl(n,t,e))}function Ky(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sp(t,e){Ky(t,e),(t=t.alternate)&&Ky(t,e)}function QE(t){if(t.tag===13||t.tag===31){var e=ea(t,67108864);e!==null&&Ut(e,t,67108864),Sp(t,67108864)}}function Qy(t){if(t.tag===13||t.tag===31){var e=Xt();e=Vm(e);var n=ea(t,e);n!==null&&Ut(n,t,e),Sp(t,e)}}var yu=!0;function xA(t,e,n,s){var i=ie.T;ie.T=null;var a=Te.p;try{Te.p=2,Np(t,e,n,s)}finally{Te.p=a,ie.T=i}}function bA(t,e,n,s){var i=ie.T;ie.T=null;var a=Te.p;try{Te.p=8,Np(t,e,n,s)}finally{Te.p=a,ie.T=i}}function Np(t,e,n,s){if(yu){var i=Yf(s);if(i===null)Vh(t,e,s,xu,n),Yy(t,s);else if(_A(i,t,e,n,s))s.stopPropagation();else if(Yy(t,s),e&4&&-1<vA.indexOf(t)){for(;i!==null;){var a=yr(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=ji(a.pendingLanes);if(r!==0){var c=a;for(c.pendingLanes|=2,c.entangledLanes|=2;r;){var u=1<<31-$t(r);c.entanglements[1]|=u,r&=~u}zn(a),!(we&6)&&(lu=Qt()+500,vo(0))}}break;case 31:case 13:c=ea(a,2),c!==null&&Ut(c,a,2),id(),Sp(a,2)}if(a=Yf(s),a===null&&Vh(t,e,s,xu,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else Vh(t,e,s,null,n)}}function Yf(t){return t=zm(t),Ap(t)}var xu=null;function Ap(t){if(xu=null,t=wa(t),t!==null){var e=uo(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=fv(e),t!==null)return t;t=null}else if(n===31){if(t=mv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return xu=t,null}function YE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(aS()){case xv:return 2;case bv:return 8;case Qc:case rS:return 32;case vv:return 268435456;default:return 32}default:return 32}}var $f=!1,Js=null,Ws=null,Zs=null,Yl=new Map,$l=new Map,Ds=[],vA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yy(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Yl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(e.pointerId)}}function sl(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=yr(e),e!==null&&QE(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _A(t,e,n,s,i){switch(e){case"focusin":return Js=sl(Js,t,e,n,s,i),!0;case"dragenter":return Ws=sl(Ws,t,e,n,s,i),!0;case"mouseover":return Zs=sl(Zs,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Yl.set(a,sl(Yl.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,$l.set(a,sl($l.get(a)||null,t,e,n,s,i)),!0}return!1}function $E(t){var e=wa(t.target);if(e!==null){var n=uo(e);if(n!==null){if(e=n.tag,e===13){if(e=fv(n),e!==null){t.blockedOn=e,k0(t.priority,function(){Qy(n)});return}}else if(e===31){if(e=mv(n),e!==null){t.blockedOn=e,k0(t.priority,function(){Qy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yf(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);ff=s,n.target.dispatchEvent(s),ff=null}else return e=yr(n),e!==null&&QE(e),t.blockedOn=n,!1;e.shift()}return!0}function $y(t,e,n){Ic(t)&&n.delete(e)}function EA(){$f=!1,Js!==null&&Ic(Js)&&(Js=null),Ws!==null&&Ic(Ws)&&(Ws=null),Zs!==null&&Ic(Zs)&&(Zs=null),Yl.forEach($y),$l.forEach($y)}function lc(t,e){t.blockedOn===e&&(t.blockedOn=null,$f||($f=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,EA)))}var oc=null;function Xy(t){oc!==t&&(oc=t,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,function(){oc===t&&(oc=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(Ap(s||n)===null)continue;break}var a=yr(n);a!==null&&(t.splice(e,3),e-=3,Cf(a,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function nr(t){function e(u){return lc(u,t)}Js!==null&&lc(Js,t),Ws!==null&&lc(Ws,t),Zs!==null&&lc(Zs,t),Yl.forEach(e),$l.forEach(e);for(var n=0;n<Ds.length;n++){var s=Ds[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)$E(n),n.blockedOn===null&&Ds.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],a=n[s+1],r=i[zt]||null;if(typeof a=="function")r||Xy(n);else if(r){var c=null;if(a&&a.hasAttribute("formAction")){if(i=a,r=a[zt]||null)c=r.formAction;else if(Ap(i)!==null)continue}else c=r.action;typeof c=="function"?n[s+1]=c:(n.splice(s,3),s-=3),Xy(n)}}}function XE(){function t(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(r){return i=r})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function jp(t){this._internalRoot=t}ld.prototype.render=jp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,s=Xt();KE(n,s,t,e,null,null)};ld.prototype.unmount=jp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;KE(t.current,2,null,t,null,null),id(),e[gr]=null}};function ld(t){this._internalRoot=t}ld.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ds.length&&e!==0&&e<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&$E(t)}};var Jy=dv.version;if(Jy!=="19.2.0")throw Error(B(527,Jy,"19.2.0"));Te.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=W2(e),t=t!==null?pv(t):null,t=t===null?null:t.stateNode,t};var wA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{ho=cc.inject(wA),Yt=cc}catch{}}Fu.createRoot=function(t,e){if(!hv(t))throw Error(B(299));var n=!1,s="",i=B_,a=q_,r=H_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=FE(t,1,!1,null,null,n,s,null,i,a,r,XE),t[gr]=e.current,Ep(t),new jp(e)};Fu.hydrateRoot=function(t,e,n){if(!hv(t))throw Error(B(299));var s=!1,i="",a=B_,r=q_,c=H_,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(c=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=FE(t,1,!0,e,n??null,s,i,u,a,r,c,XE),e.context=GE(null),n=e.current,s=Xt(),s=Vm(s),i=Qs(s),i.callback=null,Ys(n,i,s),n=s,e.current.lanes=n,mo(e,n),zn(e),t[gr]=e.current,Ep(t),new ld(e)};Fu.version="19.2.0";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(t){console.error(t)}}JE(),av.exports=Fu;var TA=av.exports;const SA=$b(TA);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Xl.apply(this,arguments)}var Hs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hs||(Hs={}));const Wy="popstate";function NA(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:r,hash:c}=s.location;return Xf("",{pathname:a,search:r,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:bu(i)}return jA(e,n,null,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function WE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AA(){return Math.random().toString(36).substr(2,8)}function Zy(t,e){return{usr:t.state,key:t.key,idx:e}}function Xf(t,e,n,s){return n===void 0&&(n=null),Xl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wr(e):e,{state:n,key:e&&e.key||s||AA()})}function bu(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function wr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function jA(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,r=i.history,c=Hs.Pop,u=null,d=f();d==null&&(d=0,r.replaceState(Xl({},r.state,{idx:d}),""));function f(){return(r.state||{idx:null}).idx}function m(){c=Hs.Pop;let D=f(),T=D==null?null:D-d;d=D,u&&u({action:c,location:I.location,delta:T})}function g(D,T){c=Hs.Push;let _=Xf(I.location,D,T);d=f()+1;let w=Zy(_,d),R=I.createHref(_);try{r.pushState(w,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(R)}a&&u&&u({action:c,location:I.location,delta:1})}function x(D,T){c=Hs.Replace;let _=Xf(I.location,D,T);d=f();let w=Zy(_,d),R=I.createHref(_);r.replaceState(w,"",R),a&&u&&u({action:c,location:I.location,delta:0})}function C(D){let T=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof D=="string"?D:bu(D);return _=_.replace(/ $/,"%20"),He(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let I={get action(){return c},get location(){return t(i,r)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Wy,m),u=D,()=>{i.removeEventListener(Wy,m),u=null}},createHref(D){return e(i,D)},createURL:C,encodeLocation(D){let T=C(D);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:x,go(D){return r.go(D)}};return I}var ex;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ex||(ex={}));function CA(t,e,n){return n===void 0&&(n="/"),IA(t,e,n)}function IA(t,e,n,s){let i=typeof e=="string"?wr(e):e,a=sr(i.pathname||"/",n);if(a==null)return null;let r=ZE(t);RA(r);let c=null;for(let u=0;c==null&&u<r.length;++u){let d=qA(a);c=zA(r[u],d)}return c}function ZE(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,r,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:r,route:a};u.relativePath.startsWith("/")&&(He(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=ei([s,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(He(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ZE(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:LA(d,a.index),routesMeta:f})};return t.forEach((a,r)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,r);else for(let u of e1(a.path))i(a,r,u)}),e}function e1(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let r=e1(s.join("/")),c=[];return c.push(...r.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...r),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function RA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const kA=/^:[\w-]+$/,DA=3,OA=2,MA=1,VA=10,PA=-2,tx=t=>t==="*";function LA(t,e){let n=t.split("/"),s=n.length;return n.some(tx)&&(s+=PA),e&&(s+=OA),n.filter(i=>!tx(i)).reduce((i,a)=>i+(kA.test(a)?DA:a===""?MA:VA),s)}function UA(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function zA(t,e,n){let{routesMeta:s}=t,i={},a="/",r=[];for(let c=0;c<s.length;++c){let u=s[c],d=c===s.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=Jf({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(i,m.params),r.push({params:i,pathname:ei([a,m.pathname]),pathnameBase:KA(ei([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=ei([a,m.pathnameBase]))}return r}function Jf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=BA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],r=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let I=c[m]||"";r=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const C=c[m];return x&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:r,pattern:t}}function BA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),WE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function qA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return WE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function HA(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?wr(t):t;return{pathname:n?n.startsWith("/")?n:FA(n,e):e,search:QA(s),hash:YA(i)}}function FA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Uh(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cp(t,e){let n=GA(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Ip(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=wr(t):(i=Xl({},t),He(!i.pathname||!i.pathname.includes("?"),Uh("?","pathname","search",i)),He(!i.pathname||!i.pathname.includes("#"),Uh("#","pathname","hash",i)),He(!i.search||!i.search.includes("#"),Uh("#","search","hash",i)));let a=t===""||i.pathname==="",r=a?"/":i.pathname,c;if(r==null)c=n;else{let m=e.length-1;if(!s&&r.startsWith("..")){let g=r.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=HA(i,c),d=r&&r!=="/"&&r.endsWith("/"),f=(a||r===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const ei=t=>t.join("/").replace(/\/\/+/g,"/"),KA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $A(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const t1=["post","put","patch","delete"];new Set(t1);const XA=["get",...t1];new Set(XA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Jl.apply(this,arguments)}const od=j.createContext(null),n1=j.createContext(null),ys=j.createContext(null),cd=j.createContext(null),Bn=j.createContext({outlet:null,matches:[],isDataRoute:!1}),s1=j.createContext(null);function JA(t,e){let{relative:n}=e===void 0?{}:e;Tr()||He(!1);let{basename:s,navigator:i}=j.useContext(ys),{hash:a,pathname:r,search:c}=ud(t,{relative:n}),u=r;return s!=="/"&&(u=r==="/"?s:ei([s,r])),i.createHref({pathname:u,search:c,hash:a})}function Tr(){return j.useContext(cd)!=null}function na(){return Tr()||He(!1),j.useContext(cd).location}function i1(t){j.useContext(ys).static||j.useLayoutEffect(t)}function qn(){let{isDataRoute:t}=j.useContext(Bn);return t?hj():WA()}function WA(){Tr()||He(!1);let t=j.useContext(od),{basename:e,future:n,navigator:s}=j.useContext(ys),{matches:i}=j.useContext(Bn),{pathname:a}=na(),r=JSON.stringify(Cp(i,n.v7_relativeSplatPath)),c=j.useRef(!1);return i1(()=>{c.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){s.go(d);return}let m=Ip(d,JSON.parse(r),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ei([e,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[e,s,r,a,t])}const a1=j.createContext(null);function Rp(){return j.useContext(a1)}function ZA(t){let e=j.useContext(Bn).outlet;return e&&j.createElement(a1.Provider,{value:t},e)}function ej(){let{matches:t}=j.useContext(Bn),e=t[t.length-1];return e?e.params:{}}function ud(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=j.useContext(ys),{matches:i}=j.useContext(Bn),{pathname:a}=na(),r=JSON.stringify(Cp(i,s.v7_relativeSplatPath));return j.useMemo(()=>Ip(t,JSON.parse(r),a,n==="path"),[t,r,a,n])}function tj(t,e){return nj(t,e)}function nj(t,e,n,s){Tr()||He(!1);let{navigator:i}=j.useContext(ys),{matches:a}=j.useContext(Bn),r=a[a.length-1],c=r?r.params:{};r&&r.pathname;let u=r?r.pathnameBase:"/";r&&r.route;let d=na(),f;if(e){var m;let D=typeof e=="string"?wr(e):e;u==="/"||(m=D.pathname)!=null&&m.startsWith(u)||He(!1),f=D}else f=d;let g=f.pathname||"/",x=g;if(u!=="/"){let D=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(D.length).join("/")}let C=CA(t,{pathname:x}),I=lj(C&&C.map(D=>Object.assign({},D,{params:Object.assign({},c,D.params),pathname:ei([u,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?u:ei([u,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),a,n,s);return e&&I?j.createElement(cd.Provider,{value:{location:Jl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Hs.Pop}},I):I}function sj(){let t=dj(),e=$A(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const ij=j.createElement(sj,null);class aj extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Bn.Provider,{value:this.props.routeContext},j.createElement(s1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rj(t){let{routeContext:e,match:n,children:s}=t,i=j.useContext(od);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Bn.Provider,{value:e},s)}function lj(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=r.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||He(!1),r=r.slice(0,Math.min(r.length,f+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<r.length;f++){let m=r[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:x}=n,C=m.route.loader&&g[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||C){u=!0,d>=0?r=r.slice(0,d+1):r=[r[0]];break}}}return r.reduceRight((f,m,g)=>{let x,C=!1,I=null,D=null;n&&(x=c&&m.route.id?c[m.route.id]:void 0,I=m.route.errorElement||ij,u&&(d<0&&g===0?(fj("route-fallback"),C=!0,D=null):d===g&&(C=!0,D=m.route.hydrateFallbackElement||null)));let T=e.concat(r.slice(0,g+1)),_=()=>{let w;return x?w=I:C?w=D:m.route.Component?w=j.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=f,j.createElement(rj,{match:m,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?j.createElement(aj,{location:n.location,revalidation:n.revalidation,component:I,error:x,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var r1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(r1||{}),l1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(l1||{});function oj(t){let e=j.useContext(od);return e||He(!1),e}function cj(t){let e=j.useContext(n1);return e||He(!1),e}function uj(t){let e=j.useContext(Bn);return e||He(!1),e}function o1(t){let e=uj(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function dj(){var t;let e=j.useContext(s1),n=cj(),s=o1();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function hj(){let{router:t}=oj(r1.UseNavigateStable),e=o1(l1.UseNavigateStable),n=j.useRef(!1);return i1(()=>{n.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Jl({fromRouteId:e},a)))},[t,e])}const nx={};function fj(t,e,n){nx[t]||(nx[t]=!0)}function mj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Qn(t){let{to:e,replace:n,state:s,relative:i}=t;Tr()||He(!1);let{future:a,static:r}=j.useContext(ys),{matches:c}=j.useContext(Bn),{pathname:u}=na(),d=qn(),f=Ip(e,Cp(c,a.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:i}),[d,m,i,n,s]),null}function kp(t){return ZA(t.context)}function de(t){He(!1)}function pj(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Hs.Pop,navigator:a,static:r=!1,future:c}=t;Tr()&&He(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:a,static:r,future:Jl({v7_relativeSplatPath:!1},c)}),[u,c,a,r]);typeof s=="string"&&(s=wr(s));let{pathname:f="/",search:m="",hash:g="",state:x=null,key:C="default"}=s,I=j.useMemo(()=>{let D=sr(f,u);return D==null?null:{location:{pathname:D,search:m,hash:g,state:x,key:C},navigationType:i}},[u,f,m,g,x,C,i]);return I==null?null:j.createElement(ys.Provider,{value:d},j.createElement(cd.Provider,{children:n,value:I}))}function gj(t){let{children:e,location:n}=t;return tj(Wf(e),n)}new Promise(()=>{});function Wf(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(s,i)=>{if(!j.isValidElement(s))return;let a=[...e,i];if(s.type===j.Fragment){n.push.apply(n,Wf(s.props.children,a));return}s.type!==de&&He(!1),!s.props.index||!s.props.children||He(!1);let r={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(r.children=Wf(s.props.children,a)),n.push(r)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},vu.apply(this,arguments)}function c1(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function yj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xj(t,e){return t.button===0&&(!e||e==="_self")&&!yj(t)}const bj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],_j="6";try{window.__reactRouterVersion=_j}catch{}const Ej=j.createContext({isTransitioning:!1}),wj="startTransition",sx=G2[wj];function Tj(t){let{basename:e,children:n,future:s,window:i}=t,a=j.useRef();a.current==null&&(a.current=NA({window:i,v5Compat:!0}));let r=a.current,[c,u]=j.useState({action:r.action,location:r.location}),{v7_startTransition:d}=s||{},f=j.useCallback(m=>{d&&sx?sx(()=>u(m)):u(m)},[u,d]);return j.useLayoutEffect(()=>r.listen(f),[r,f]),j.useEffect(()=>mj(s),[s]),j.createElement(pj,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:r,future:s})}const Sj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cl=j.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:a,replace:r,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=c1(e,bj),{basename:x}=j.useContext(ys),C,I=!1;if(typeof d=="string"&&Nj.test(d)&&(C=d,Sj))try{let w=new URL(window.location.href),R=d.startsWith("//")?new URL(w.protocol+d):new URL(d),M=sr(R.pathname,x);R.origin===w.origin&&M!=null?d=M+R.search+R.hash:I=!0}catch{}let D=JA(d,{relative:i}),T=Cj(d,{replace:r,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:m});function _(w){s&&s(w),w.defaultPrevented||T(w)}return j.createElement("a",vu({},g,{href:C||D,onClick:I||a?s:_,ref:n,target:u}))}),Aj=j.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:i=!1,className:a="",end:r=!1,style:c,to:u,viewTransition:d,children:f}=e,m=c1(e,vj),g=ud(u,{relative:m.relative}),x=na(),C=j.useContext(n1),{navigator:I,basename:D}=j.useContext(ys),T=C!=null&&Ij(g)&&d===!0,_=I.encodeLocation?I.encodeLocation(g).pathname:g.pathname,w=x.pathname,R=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(w=w.toLowerCase(),R=R?R.toLowerCase():null,_=_.toLowerCase()),R&&D&&(R=sr(R,D)||R);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let U=w===_||!r&&w.startsWith(_)&&w.charAt(M)==="/",v=R!=null&&(R===_||!r&&R.startsWith(_)&&R.charAt(_.length)==="/"),y={isActive:U,isPending:v,isTransitioning:T},b=U?s:void 0,S;typeof a=="function"?S=a(y):S=[a,U?"active":null,v?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let N=typeof c=="function"?c(y):c;return j.createElement(Cl,vu({},m,{"aria-current":b,className:S,ref:n,style:N,to:u,viewTransition:d}),typeof f=="function"?f(y):f)});var Zf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Zf||(Zf={}));var ix;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ix||(ix={}));function jj(t){let e=j.useContext(od);return e||He(!1),e}function Cj(t,e){let{target:n,replace:s,state:i,preventScrollReset:a,relative:r,viewTransition:c}=e===void 0?{}:e,u=qn(),d=na(),f=ud(t,{relative:r});return j.useCallback(m=>{if(xj(m,n)){m.preventDefault();let g=s!==void 0?s:bu(d)===bu(f);u(t,{replace:g,state:i,preventScrollReset:a,relative:r,viewTransition:c})}},[d,u,f,s,i,n,t,a,r,c])}function Ij(t,e){e===void 0&&(e={});let n=j.useContext(Ej);n==null&&He(!1);let{basename:s}=jj(Zf.useViewTransitionState),i=ud(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=sr(n.currentLocation.pathname,s)||n.currentLocation.pathname,r=sr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Jf(i.pathname,r)!=null||Jf(i.pathname,a)!=null}function u1(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=u1(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function ir(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=u1(t))&&(s&&(s+=" "),s+=e);return s}const Dp=({sidebar:t,topbar:e,children:n})=>{const[s,i]=j.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-900",children:[l.jsxs("div",{className:"lg:grid lg:grid-cols-[320px,1fr]",children:[l.jsx("div",{className:ir("fixed inset-y-0 left-0 z-40 w-80 max-w-full transform bg-white shadow-xl transition-transform duration-300 lg:sticky lg:top-0 lg:h-screen lg:overflow-y-auto lg:translate-x-0 lg:shadow-none lg:transform-none",s?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:t?Hc.cloneElement(t,{onNavigate:(...a)=>{var r,c;(c=(r=t.props).onNavigate)==null||c.call(r,...a),i(!1)}}):null}),l.jsxs("div",{className:"flex min-h-screen flex-col lg:col-start-2",children:[e?Hc.cloneElement(e,{onToggleSidebar:()=>i(a=>!a)}):null,l.jsx("main",{className:"flex-1 px-4 pb-10 pt-6 sm:px-6 lg:px-10",children:l.jsx("div",{className:"mx-auto w-full max-w-7xl space-y-8",children:n})})]})]}),s?l.jsx("div",{className:"fixed inset-0 z-30 bg-slate-900/40 lg:hidden",onClick:()=>i(!1)}):null]})},Op=({header:t,navItems:e=[],footer:n,onNavigate:s})=>l.jsxs("aside",{className:"flex h-full w-80 max-w-full flex-col bg-white shadow-lg lg:h-screen",children:[l.jsx("div",{className:"px-6 pb-4 pt-6 border-b border-slate-100",children:t||l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-500",children:"EVC Portal"}),l.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Coaching Suite"})]})}),l.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:l.jsx("ul",{className:"flex flex-col gap-1",children:e.map(i=>{const a=i.icon;return l.jsx("li",{children:l.jsxs(Aj,{to:i.to,end:i.end,onClick:()=>s==null?void 0:s(i),className:({isActive:r})=>ir("group flex items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors",r?"bg-brand-50 text-brand-700":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[a?l.jsx(a,{className:"mr-3 h-4 w-4 flex-none text-slate-400 group-hover:text-brand-600"}):null,l.jsx("span",{className:"truncate",children:i.label}),i.badge?l.jsx("span",{className:"ml-auto inline-flex items-center rounded-full bg-brand-100 px-2 py-0.5 text-xs font-semibold text-brand-700",children:i.badge}):null]})},i.to)})})}),n?l.jsx("div",{className:"border-t border-slate-100 p-4",children:n}):null]});/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d1=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:r,...c},u)=>j.createElement("svg",{ref:u,...kj,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:d1("lucide",i),...c},[...r.map(([d,f])=>j.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(t,e)=>{const n=j.forwardRef(({className:s,...i},a)=>j.createElement(Dj,{ref:a,iconNode:e,className:d1(`lucide-${Rj(t)}`,s),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mj=be("ArrowLeft",Oj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Rc=be("ArrowRight",Vj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Lj=be("CalendarCheck",Pj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],h1=be("ChevronDown",Uj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Bj=be("ChevronUp",zj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Li=be("CircleCheck",qj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Fj=be("CircleX",Hj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Kj=be("CloudUpload",Gj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],f1=be("FileSpreadsheet",Qj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Mp=be("FileText",Yj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],Vp=be("IdCard",$j);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],dd=be("LayoutDashboard",Xj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zh=be("LoaderCircle",Jj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Zj=be("LogIn",Wj);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],ax=be("LogOut",eC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],nC=be("Mail",tC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],m1=be("Menu",sC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],p1=be("MessageCircle",iC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],rC=be("MessageSquare",aC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],em=be("Paperclip",lC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rx=be("Plus",oC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],uC=be("RefreshCcw",cC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hC=be("Save",dC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],mC=be("Search",fC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],gC=be("Send",pC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xC=be("Settings",yC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],vC=be("ShieldAlert",bC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],EC=be("ShieldCheck",_C);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TC=be("ShieldQuestion",wC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lx=be("Shield",SC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ox=be("Trash2",NC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jC=be("TriangleAlert",AC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],g1=be("UserPlus",CC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],wo=be("Users",IC);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kC=be("X",RC),Pp=({title:t,user:e,children:n,onToggleSidebar:s,rightSlot:i})=>{var a;return l.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between bg-white/80 px-4 py-3 backdrop-blur supports-[backdrop-filter]:bg-white/60 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{type:"button",onClick:s,className:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 text-slate-500 transition hover:bg-slate-100 lg:hidden",children:[l.jsx(m1,{className:"h-5 w-5"}),l.jsx("span",{className:"sr-only",children:"Toggle navigation"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-400",children:(e==null?void 0:e.role)??"Portal"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:t})]}),n]}),l.jsxs("div",{className:"flex items-center gap-4",children:[i,e?l.jsxs("div",{className:"flex items-center gap-3 rounded-full bg-slate-100/60 px-3 py-2 text-sm",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-brand-100 font-semibold text-brand-700",children:e.initials||((a=e.name)==null?void 0:a.split(" ").map(r=>r[0]).join("").slice(0,2).toUpperCase())||"EV"}),l.jsxs("div",{className:"hidden sm:block",children:[l.jsx("p",{className:"font-medium text-slate-900",children:e.name}),l.jsx("p",{className:"text-xs text-slate-500",children:e.subtitle})]})]}):null]})]})},DC="http://localhost:5000";function OC(){const t=localStorage.getItem("token");return t?{Authorization:"Bearer "+t}:{}}async function hd(t,e={}){const{method:n="GET",headers:s={},body:i,isForm:a=!1}=e,r={method:n,headers:{...s,...OC()}};i!==void 0&&(a?r.body=i:(r.headers["Content-Type"]="application/json",r.body=typeof i=="string"?i:JSON.stringify(i)));const c=await fetch(`${DC}${t}`,r);let u;if((c.headers.get("content-type")||"").includes("application/json"))try{u=await c.json()}catch{u=null}else u=await c.text().catch(()=>null);if(!c.ok){const f=new Error(u&&u.error||c.statusText||"Request failed");throw f.status=c.status,f.data=u,f}return u}const Nt=(t,e)=>hd(t,{method:"GET",headers:e}),Pn=(t,e,n)=>hd(t,{method:"POST",body:e,headers:n}),y1=(t,e,n)=>hd(t,{method:"PUT",body:e,headers:n}),fd=(t,e,n)=>hd(t,{method:"POST",body:e,headers:n,isForm:!0}),MC=[{label:"Dashboard",to:"/dashboard"},{label:"Profile",to:"/profile"},{label:"Planning",to:"/planning"},{label:"Evidence",to:"/evidence"},{label:"Messages",to:"/messages"},{label:"Customer demo",to:"/customer/planning"},{label:"Admin demo",to:"/admin"},{label:"Coach demo",to:"/coach"}],VC=()=>{const t=qn(),e=na(),[n,s]=j.useState(!1),i=j.useMemo(()=>MC.map(c=>({...c,active:e.pathname===c.to||e.pathname.startsWith(`${c.to}/`)})),[e.pathname]),a=c=>{t(c),s(!1)},r=()=>{localStorage.removeItem("token"),t("/login",{replace:!0}),s(!1)};return l.jsxs("header",{className:"sticky top-0 z-30 border-b border-slate-200 bg-white/95 backdrop-blur",children:[l.jsxs("div",{className:"mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6",children:[l.jsxs("button",{type:"button",onClick:()=>a("/"),className:"flex items-center gap-2 text-lg font-semibold text-slate-900 transition hover:text-brand-600",children:[l.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-brand-100 text-base font-bold text-brand-700",children:"E"}),l.jsx("span",{className:"hidden text-sm font-medium text-slate-500 md:block",children:"EVC Portfolio"})]}),l.jsx("nav",{className:"hidden items-center gap-6 text-sm font-medium text-slate-600 md:flex",children:i.map(c=>l.jsxs("button",{type:"button",onClick:()=>a(c.to),className:`relative transition hover:text-brand-600 ${c.active?"text-brand-600":""}`,children:[c.label,c.active&&l.jsx("span",{className:"absolute -bottom-2 left-0 right-0 h-0.5 rounded-full bg-brand-500"})]},c.to))}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{type:"button",onClick:r,className:"hidden items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600 md:inline-flex",children:[l.jsx(ax,{className:"h-4 w-4"}),l.jsx("span",{children:"Logout"})]}),l.jsx("button",{type:"button",onClick:()=>s(c=>!c),className:"inline-flex items-center justify-center rounded-full border border-slate-200 p-2 text-slate-600 transition hover:border-brand-500 hover:text-brand-600 md:hidden","aria-label":"Toggle navigation",children:n?l.jsx(kC,{className:"h-5 w-5"}):l.jsx(m1,{className:"h-5 w-5"})})]})]}),n&&l.jsx("div",{className:"border-t border-slate-200 bg-white md:hidden",children:l.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-1 px-4 py-3 text-sm font-medium text-slate-600",children:[i.map(c=>l.jsxs("button",{type:"button",onClick:()=>a(c.to),className:`flex items-center justify-between rounded-lg px-3 py-2 text-left transition hover:bg-slate-100 ${c.active?"bg-brand-50 text-brand-700":""}`,children:[l.jsx("span",{children:c.label}),c.active&&l.jsx("span",{className:"text-xs font-semibold uppercase text-brand-600",children:"Now"})]},c.to)),l.jsxs("button",{type:"button",onClick:r,className:"mt-2 inline-flex items-center justify-center gap-2 rounded-lg bg-brand-600 px-3 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:[l.jsx(ax,{className:"h-4 w-4"}),l.jsx("span",{children:"Logout"})]})]})})]})},bn=({title:t,description:e,kicker:n,actions:s,children:i,showHeader:a=!0})=>l.jsxs("div",{className:"min-h-screen bg-slate-50",children:[l.jsx(VC,{}),l.jsxs("main",{className:"mx-auto w-full max-w-6xl px-4 pb-16 pt-10 sm:px-6 lg:px-8",children:[a&&(t||e||n||s)?l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6 border-b border-slate-200 pb-8",children:[l.jsxs("div",{className:"max-w-2xl space-y-2",children:[n?l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-brand-600",children:n}):null,t?l.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900 sm:text-4xl",children:t}):null,e?l.jsx("p",{className:"text-base text-slate-500 sm:text-lg",children:e}):null]}),s?l.jsx("div",{className:"flex flex-col items-stretch gap-3 sm:flex-row sm:items-center",children:s}):null]}):null,l.jsx("div",{className:a?"mt-8 space-y-8":"space-y-8",children:i})]})]}),xs=({label:t="Loading"})=>l.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-12 text-sm text-slate-500",children:[l.jsx("span",{className:"inline-flex h-12 w-12 animate-spin items-center justify-center rounded-full border-4 border-slate-200 border-t-brand-500"}),l.jsxs("p",{children:[t,"…"]})]}),PC=()=>{const[t,e]=j.useState(null),[n,s]=j.useState(!0),i=qn();j.useEffect(()=>{(async()=>{if(!localStorage.getItem("token")){i("/login",{replace:!0});return}try{const u=await Nt("/auth/me");e(u)}catch(u){console.error("Failed to load user:",u),localStorage.removeItem("token"),i("/login",{replace:!0})}finally{s(!1)}})()},[i]);const a=()=>{localStorage.removeItem("token"),i("/login",{replace:!0})};return n?l.jsx(bn,{title:"Dashboard",description:"Een moment geduld alsjeblieft… we laden je gegevens.",kicker:"Welkom terug",children:l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx(xs,{label:"Profiel laden"})})}):l.jsx(bn,{kicker:"Welkom terug",title:`Hallo ${(t==null?void 0:t.name)||(t==null?void 0:t.email)}!`,description:"Dit is je persoonlijke startpunt. Beheer je portfolio, volg je planning en blijf in contact met je coach.",actions:[l.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600",children:"Afmelden"},"logout")],children:l.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Jouw gegevens"}),l.jsxs("dl",{className:"mt-4 space-y-3 text-sm text-slate-500",children:[l.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"Naam"}),l.jsx("dd",{className:"text-slate-900",children:(t==null?void 0:t.name)||"-"})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"E-mail"}),l.jsx("dd",{className:"text-slate-900",children:t==null?void 0:t.email})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"Rol"}),l.jsx("dd",{className:"text-slate-900 capitalize",children:t==null?void 0:t.role})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"Lid sinds"}),l.jsx("dd",{className:"text-slate-900",children:t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]})]})]}),l.jsxs("article",{className:"flex h-full flex-col justify-between rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Wat kun je hier doen?"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Gebruik de navigatie om snel naar je planning, bewijsstukken of berichten te springen. Elk onderdeel is ontworpen om je EVC-traject helder en haalbaar te maken."})]}),l.jsxs("div",{className:"mt-6 grid gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>i("/planning"),className:"flex items-center justify-between rounded-xl bg-brand-50 px-4 py-3 text-left text-sm font-semibold text-brand-700 transition hover:bg-brand-100",children:["Naar mijn planning",l.jsx("span",{"aria-hidden":"true",children:"→"})]}),l.jsxs("button",{type:"button",onClick:()=>i("/evidence"),className:"flex items-center justify-between rounded-xl bg-slate-100 px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:bg-slate-200",children:["Bewijsstukken beheren",l.jsx("span",{"aria-hidden":"true",children:"→"})]})]})]})]})})},LC=()=>{};var cx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},UC=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],r=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(r&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],r=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|r&63)}}return e.join("")},b1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],r=i+1<t.length,c=r?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=a>>2,m=(a&3)<<4|c>>4;let g=(c&15)<<2|d>>6,x=d&63;u||(x=64,r||(g=64)),s.push(n[f],n[m],n[g],n[x])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||m==null)throw new zC;const g=a<<2|c>>4;if(s.push(g),d!==64){const x=c<<4&240|d>>2;if(s.push(x),m!==64){const C=d<<6&192|m;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BC=function(t){const e=x1(t);return b1.encodeByteArray(e,!0)},_u=function(t){return BC(t).replace(/\./g,"")},v1=function(t){try{return b1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=()=>qC().__FIREBASE_DEFAULTS__,FC=()=>{if(typeof process>"u"||typeof cx>"u")return;const t=cx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&v1(t[1]);return e&&JSON.parse(e)},md=()=>{try{return LC()||HC()||FC()||GC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_1=t=>{var e,n;return(n=(e=md())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},KC=t=>{const e=_1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},E1=()=>{var t;return(t=md())==null?void 0:t.config},w1=t=>{var e;return(e=md())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function T1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_u(JSON.stringify(n)),_u(JSON.stringify(r)),""].join(".")}const Il={};function $C(){const t={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?t.emulator.push(e):t.prod.push(e);return t}function XC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ux=!1;function S1(t,e){if(typeof window>"u"||typeof document>"u"||!Sr(window.location.host)||Il[t]===e||Il[t]||ux)return;Il[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",a=$C().prod.length>0;function r(){const g=document.getElementById(s);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{ux=!0,r()},g}function f(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=XC(s),x=n("text"),C=document.getElementById(x)||document.createElement("span"),I=n("learnmore"),D=document.getElementById(I)||document.createElement("a"),T=n("preprendIcon"),_=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;c(w),f(D,I);const R=d();u(_,T),w.append(_,C,D,R),document.body.appendChild(w)}a?(C.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function WC(){var e;const t=(e=md())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nI(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sI(){return!WC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iI(){try{return typeof indexedDB=="object"}catch{return!1}}function aI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="FirebaseError";class bs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=rI,Object.setPrototypeOf(this,bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],r=a?lI(a,s):"Error",c=`${this.serviceName}: ${r} (${i}).`;return new bs(i,c,s)}}function lI(t,e){return t.replace(oI,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const oI=/\{\$([^}]+)}/g;function cI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ki(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const a=t[i],r=e[i];if(dx(a)&&dx(r)){if(!Ki(a,r))return!1}else if(a!==r)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function dx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function cl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ul(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function uI(t,e){const n=new dI(t,e);return n.subscribe.bind(n)}class dI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");hI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Bh),i.error===void 0&&(i.error=Bh),i.complete===void 0&&(i.complete=Bh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new QC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pI(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,r]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);s===c&&r.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mI(t){return t===Ri?void 0:t}function pI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const yI={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},xI=me.INFO,bI={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},vI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=bI[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lp{constructor(e){this.name=e,this._logLevel=xI,this._logHandler=vI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const _I=(t,e)=>e.some(n=>t instanceof n);let hx,fx;function EI(){return hx||(hx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wI(){return fx||(fx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N1=new WeakMap,tm=new WeakMap,A1=new WeakMap,qh=new WeakMap,Up=new WeakMap;function TI(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",r)},a=()=>{n(ti(t.result)),i()},r=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",r)});return e.then(n=>{n instanceof IDBCursor&&N1.set(n,t)}).catch(()=>{}),Up.set(e,t),e}function SI(t){if(tm.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",r),t.removeEventListener("abort",r)},a=()=>{n(),i()},r=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",r),t.addEventListener("abort",r)});tm.set(t,e)}let nm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||A1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ti(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NI(t){nm=t(nm)}function AI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Hh(this),e,...n);return A1.set(s,e.sort?e.sort():[e]),ti(s)}:wI().includes(t)?function(...e){return t.apply(Hh(this),e),ti(N1.get(this))}:function(...e){return ti(t.apply(Hh(this),e))}}function jI(t){return typeof t=="function"?AI(t):(t instanceof IDBTransaction&&SI(t),_I(t,EI())?new Proxy(t,nm):t)}function ti(t){if(t instanceof IDBRequest)return TI(t);if(qh.has(t))return qh.get(t);const e=jI(t);return e!==t&&(qh.set(t,e),Up.set(e,t)),e}const Hh=t=>Up.get(t);function CI(t,e,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const r=indexedDB.open(t,e),c=ti(r);return s&&r.addEventListener("upgradeneeded",u=>{s(ti(r.result),u.oldVersion,u.newVersion,ti(r.transaction),u)}),n&&r.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const II=["get","getKey","getAll","getAllKeys","count"],RI=["put","add","delete","clear"],Fh=new Map;function mx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fh.get(e))return Fh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=RI.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||II.includes(n)))return;const a=async function(r,...c){const u=this.transaction(r,i?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return Fh.set(e,a),a}NI(t=>({...t,get:(e,n,s)=>mx(e,n)||t.get(e,n,s),has:(e,n)=>!!mx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DI(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function DI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",px="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Lp("@firebase/app"),OI="@firebase/app-compat",MI="@firebase/analytics-compat",VI="@firebase/analytics",PI="@firebase/app-check-compat",LI="@firebase/app-check",UI="@firebase/auth",zI="@firebase/auth-compat",BI="@firebase/database",qI="@firebase/data-connect",HI="@firebase/database-compat",FI="@firebase/functions",GI="@firebase/functions-compat",KI="@firebase/installations",QI="@firebase/installations-compat",YI="@firebase/messaging",$I="@firebase/messaging-compat",XI="@firebase/performance",JI="@firebase/performance-compat",WI="@firebase/remote-config",ZI="@firebase/remote-config-compat",eR="@firebase/storage",tR="@firebase/storage-compat",nR="@firebase/firestore",sR="@firebase/ai",iR="@firebase/firestore-compat",aR="firebase",rR="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",lR={[sm]:"fire-core",[OI]:"fire-core-compat",[VI]:"fire-analytics",[MI]:"fire-analytics-compat",[LI]:"fire-app-check",[PI]:"fire-app-check-compat",[UI]:"fire-auth",[zI]:"fire-auth-compat",[BI]:"fire-rtdb",[qI]:"fire-data-connect",[HI]:"fire-rtdb-compat",[FI]:"fire-fn",[GI]:"fire-fn-compat",[KI]:"fire-iid",[QI]:"fire-iid-compat",[YI]:"fire-fcm",[$I]:"fire-fcm-compat",[XI]:"fire-perf",[JI]:"fire-perf-compat",[WI]:"fire-rc",[ZI]:"fire-rc-compat",[eR]:"fire-gcs",[tR]:"fire-gcs-compat",[nR]:"fire-fst",[iR]:"fire-fst-compat",[sR]:"fire-vertex","fire-js":"fire-js",[aR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Map,oR=new Map,am=new Map;function gx(t,e){try{t.container.addComponent(e)}catch(n){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ar(t){const e=t.name;if(am.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;am.set(e,t);for(const n of Eu.values())gx(n,t);for(const n of oR.values())gx(n,t);return!0}function zp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ni=new To("app","Firebase",cR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=rR;function j1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:im,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw ni.create("bad-app-name",{appName:String(i)});if(n||(n=E1()),!n)throw ni.create("no-options");const a=Eu.get(i);if(a){if(Ki(n,a.options)&&Ki(s,a.config))return a;throw ni.create("duplicate-app",{appName:i})}const r=new gI(i);for(const u of am.values())r.addComponent(u);const c=new uR(n,s,r);return Eu.set(i,c),c}function C1(t=im){const e=Eu.get(t);if(!e&&t===im&&E1())return j1();if(!e)throw ni.create("no-app",{appName:t});return e}function si(t,e,n){let s=lR[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const r=[`Unable to register library "${s}" with version "${e}":`];i&&r.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&r.push("and"),a&&r.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(r.join(" "));return}ar(new Qi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebase-heartbeat-database",hR=1,Wl="firebase-heartbeat-store";let Gh=null;function I1(){return Gh||(Gh=CI(dR,hR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ni.create("idb-open",{originalErrorMessage:t.message})})),Gh}async function fR(t){try{const n=(await I1()).transaction(Wl),s=await n.objectStore(Wl).get(R1(t));return await n.done,s}catch(e){if(e instanceof bs)hs.warn(e.message);else{const n=ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(n.message)}}}async function yx(t,e){try{const s=(await I1()).transaction(Wl,"readwrite");await s.objectStore(Wl).put(e,R1(t)),await s.done}catch(n){if(n instanceof bs)hs.warn(n.message);else{const s=ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hs.warn(s.message)}}}function R1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1024,pR=30;class gR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(r=>r.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>pR){const r=bR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){hs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xx(),{heartbeatsToSend:s,unsentEntries:i}=yR(this._heartbeatsCache.heartbeats),a=_u(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return hs.warn(n),""}}}function xx(){return new Date().toISOString().substring(0,10)}function yR(t,e=mR){const n=[];let s=t.slice();for(const i of t){const a=n.find(r=>r.agent===i.agent);if(a){if(a.dates.push(i.date),bx(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bx(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class xR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iI()?aI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bx(t){return _u(JSON.stringify({version:2,heartbeats:t})).length}function bR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){ar(new Qi("platform-logger",e=>new kI(e),"PRIVATE")),ar(new Qi("heartbeat",e=>new gR(e),"PRIVATE")),si(sm,px,t),si(sm,px,"esm2020"),si("fire-js","")}vR("");var _R="firebase",ER="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(_R,ER,"app");function k1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wR=k1,D1=new To("auth","Firebase",k1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Lp("@firebase/auth");function TR(t,...e){wu.logLevel<=me.WARN&&wu.warn(`Auth (${Nr}): ${t}`,...e)}function kc(t,...e){wu.logLevel<=me.ERROR&&wu.error(`Auth (${Nr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,...e){throw Bp(t,...e)}function Rn(t,...e){return Bp(t,...e)}function O1(t,e,n){const s={...wR(),[e]:n};return new To("auth","Firebase",s).create(e,{appName:t.name})}function ii(t){return O1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bp(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return D1.create(t,...e)}function ne(t,e,...n){if(!t)throw Bp(e,...n)}function es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kc(e),new Error(e)}function fs(t,e){t||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function SR(){return vx()==="http:"||vx()==="https:"}function vx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SR()||eI()||"connection"in navigator)?navigator.onLine:!0}function AR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this.shortDelay=e,this.longDelay=n,fs(n>e,"Short delay should be less than long delay!"),this.isMobile=JC()||tI()}get(){return NR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t,e){fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IR=new No(3e4,6e4);function sa(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vi(t,e,n,s,i={}){return V1(t,i,async()=>{let a={},r={};s&&(e==="GET"?r=s:a={body:JSON.stringify(s)});const c=So({key:t.config.apiKey,...r}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return ZC()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Sr(t.emulatorConfig.host)&&(d.credentials="include"),M1.fetch()(await P1(t,t.config.apiHost,n,c),d)})}async function V1(t,e,n){t._canInitEmulator=!1;const s={...jR,...e};try{const i=new kR(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const r=await a.json();if("needConfirmation"in r)throw uc(t,"account-exists-with-different-credential",r);if(a.ok&&!("errorMessage"in r))return r;{const c=a.ok?r.errorMessage:r.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(t,"credential-already-in-use",r);if(u==="EMAIL_EXISTS")throw uc(t,"email-already-in-use",r);if(u==="USER_DISABLED")throw uc(t,"user-disabled",r);const f=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw O1(t,f,d);vn(t,f)}}catch(i){if(i instanceof bs)throw i;vn(t,"network-request-failed",{message:String(i)})}}async function pd(t,e,n,s,i={}){const a=await vi(t,e,n,s,i);return"mfaPendingCredential"in a&&vn(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function P1(t,e,n,s){const i=`${e}${n}?${s}`,a=t,r=a.config.emulator?qp(t.config,i):`${t.config.apiScheme}://${i}`;return CR.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(r).toString():r}function RR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Rn(this.auth,"network-request-failed")),IR.get())})}}function uc(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Rn(t,e,s);return i.customData._tokenResponse=n,i}function _x(t){return t!==void 0&&t.enterprise!==void 0}class DR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OR(t,e){return vi(t,"GET","/v2/recaptchaConfig",sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){return vi(t,"POST","/v1/accounts:delete",e)}async function Tu(t,e){return vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VR(t,e=!1){const n=kt(t),s=await n.getIdToken(e),i=Hp(s);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,r=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:Rl(Kh(i.auth_time)),issuedAtTime:Rl(Kh(i.iat)),expirationTime:Rl(Kh(i.exp)),signInProvider:r||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Kh(t){return Number(t)*1e3}function Hp(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return kc("JWT malformed, contained fewer than 3 sections"),null;try{const i=v1(n);return i?JSON.parse(i):(kc("Failed to decode base64 JWT payload"),null)}catch(i){return kc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ex(t){const e=Hp(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof bs&&PR(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function PR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rl(this.lastLoginAt),this.creationTime=Rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){var m;const e=t.auth,n=await t.getIdToken(),s=await Zl(t,Tu(e,{idToken:n}));ne(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=(m=i.providerUserInfo)!=null&&m.length?L1(i.providerUserInfo):[],r=zR(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(r!=null&&r.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new lm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function UR(t){const e=kt(t);await Su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zR(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function L1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t,e){const n=await V1(t,{},async()=>{const s=So({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,r=await P1(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:s};return t.emulatorConfig&&Sr(t.emulatorConfig.host)&&(u.credentials="include"),M1.fetch()(r,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qR(t,e){return vi(t,"POST","/v2/accounts:revokeToken",sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Ex(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:a}=await BR(e,n);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:a}=n,r=new Ba;return s&&(ne(typeof s=="string","internal-error",{appName:e}),r.refreshToken=s),i&&(ne(typeof i=="string","internal-error",{appName:e}),r.accessToken=i),a&&(ne(typeof a=="number","internal-error",{appName:e}),r.expirationTime=a),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yn{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new LR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VR(this,e)}reload(){return UR(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Su(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(ii(this.auth));const e=await this.getIdToken();return await Zl(this,MR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,r=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:x,providerData:C,stsTokenManager:I}=n;ne(m&&I,e,"internal-error");const D=Ba.fromJSON(this.name,I);ne(typeof m=="string",e,"internal-error"),As(s,e.name),As(i,e.name),ne(typeof g=="boolean",e,"internal-error"),ne(typeof x=="boolean",e,"internal-error"),As(a,e.name),As(r,e.name),As(c,e.name),As(u,e.name),As(d,e.name),As(f,e.name);const T=new yn({uid:m,auth:e,email:i,emailVerified:g,displayName:s,isAnonymous:x,photoURL:r,phoneNumber:a,tenantId:c,stsTokenManager:D,createdAt:d,lastLoginAt:f});return C&&Array.isArray(C)&&(T.providerData=C.map(_=>({..._}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,s=!1){const i=new Ba;i.updateFromServerResponse(n);const a=new yn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Su(a),a}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];ne(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?L1(i.providerUserInfo):[],r=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Ba;c.updateFromIdToken(s);const u=new yn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:r}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new lm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Map;function ts(t){fs(t instanceof Function,"Expected a class definition");let e=wx.get(t);return e?(fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}U1.type="NONE";const Tx=U1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t,e,n){return`firebase:${t}:${e}:${n}`}class qa{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=Dc(this.userKey,i.apiKey,a),this.fullPersistenceKey=Dc("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Tu(this.auth,{idToken:e}).catch(()=>{});return n?yn._fromGetAccountInfoResponse(this.auth,n,e):null}return yn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new qa(ts(Tx),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ts(Tx);const r=Dc(s,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(r);if(f){let m;if(typeof f=="string"){const g=await Tu(e,{idToken:f}).catch(()=>{});if(!g)break;m=await yn._fromGetAccountInfoResponse(e,g,f)}else m=yn._fromJSON(e,f);d!==a&&(c=m),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new qa(a,e,s):(a=u[0],c&&await a._set(r,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(r)}catch{}})),new qa(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G1(e))return"Blackberry";if(K1(e))return"Webos";if(B1(e))return"Safari";if((e.includes("chrome/")||q1(e))&&!e.includes("edge/"))return"Chrome";if(F1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function z1(t=At()){return/firefox\//i.test(t)}function B1(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q1(t=At()){return/crios\//i.test(t)}function H1(t=At()){return/iemobile/i.test(t)}function F1(t=At()){return/android/i.test(t)}function G1(t=At()){return/blackberry/i.test(t)}function K1(t=At()){return/webos/i.test(t)}function Fp(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HR(t=At()){var e;return Fp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function FR(){return nI()&&document.documentMode===10}function Q1(t=At()){return Fp(t)||F1(t)||K1(t)||G1(t)||/windows phone/i.test(t)||H1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t,e=[]){let n;switch(t){case"Browser":n=Sx(At());break;case"Worker":n=`${Sx(At())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((r,c)=>{try{const u=e(a);r(u)}catch(u){c(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e={}){return vi(t,"GET","/v2/passwordPolicy",sa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=6;class YR{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nx(this),this.idTokenSubscription=new Nx(this),this.beforeStateQueue=new GR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ts(n)),this._initializationPromise=this.queue(async()=>{var s,i,a;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Tu(this,{idToken:e}),s=await yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(gn(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!r||r===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(ii(this));const n=e?kt(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KR(this),n=new YR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await qR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ts(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let r=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(c,this,"internal-error"),c.then(()=>{r||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{r=!0,u()}}else{const u=e.addObserver(n);return()=>{r=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&TR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ar(t){return kt(t)}class Nx{constructor(e){this.auth=e,this.observer=null,this.addObserver=uI(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XR(t){gd=t}function $1(t){return gd.loadJS(t)}function JR(){return gd.recaptchaEnterpriseScript}function WR(){return gd.gapiScript}function ZR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class e4{constructor(){this.enterprise=new t4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class t4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const n4="recaptcha-enterprise",X1="NO_RECAPTCHA";class s4{constructor(e){this.type=n4,this.auth=Ar(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(r,c)=>{OR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new DR(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,r(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,r,c){const u=window.grecaptcha;_x(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{r(d)}).catch(()=>{r(X1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e4().execute("siteKey",{action:"verify"}):new Promise((a,r)=>{s(this.auth).then(c=>{if(!n&&_x(window.grecaptcha))i(c,a,r);else{if(typeof window>"u"){r(new Error("RecaptchaVerifier is only supported in browser"));return}let u=JR();u.length!==0&&(u+=c),$1(u).then(()=>{i(c,a,r)}).catch(d=>{r(d)})}}).catch(c=>{r(c)})})}}async function Ax(t,e,n,s=!1,i=!1){const a=new s4(t);let r;if(i)r=X1;else try{r=await a.verify(n)}catch{r=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:r,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:r,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:r}):Object.assign(c,{captchaResponse:r}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function jx(t,e,n,s,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Ax(t,e,n,n==="getOobCode");return s(t,r)}else return s(t,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ax(t,e,n,n==="getOobCode");return s(t,c)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t,e){const n=zp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Ki(a,e??{}))return i;vn(i,"already-initialized")}return n.initialize({options:e})}function a4(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ts);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function J1(t,e,n){const s=Ar(t);ne(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,a=W1(e),{host:r,port:c}=r4(e),u=c===null?"":`:${c}`,d={url:`${a}//${r}${u}/`},f=Object.freeze({host:r,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){ne(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ne(Ki(d,s.config.emulator)&&Ki(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Sr(r)?(T1(`${a}//${r}${u}`),S1("Auth",!0)):l4()}function W1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function r4(t){const e=W1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:Cx(s.substr(a.length+1))}}else{const[a,r]=s.split(":");return{host:a,port:Cx(r)}}}function Cx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function l4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,n){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function o4(t,e){return vi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,e){return pd(t,"POST","/v1/accounts:signInWithPassword",sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",sa(t,e))}async function d4(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Gp{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new eo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new eo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jx(e,n,"signInWithPassword",c4);case"emailLink":return u4(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jx(e,s,"signUpPassword",o4);case"emailLink":return d4(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e){return pd(t,"POST","/v1/accounts:signInWithIdp",sa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="http://localhost";class Yi extends Gp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...a}=n;if(!s||!i)return null;const r=new Yi(s,i);return r.idToken=a.idToken||void 0,r.accessToken=a.accessToken||void 0,r.secret=a.secret,r.nonce=a.nonce,r.pendingToken=a.pendingToken||null,r}_getIdTokenResponse(e){const n=this.buildRequest();return Ha(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ha(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ha(e,n)}buildRequest(){const e={requestUri:h4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=So(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m4(t){const e=cl(ul(t)).link,n=e?cl(ul(e)).deep_link_id:null,s=cl(ul(t)).deep_link_id;return(s?cl(ul(s)).link:null)||s||n||e||t}class Kp{constructor(e){const n=cl(ul(e)),s=n.apiKey??null,i=n.oobCode??null,a=f4(n.mode??null);ne(s&&i&&a,"argument-error"),this.apiKey=s,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=m4(e);try{return new Kp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.providerId=jr.PROVIDER_ID}static credential(e,n){return eo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Kp.parseLink(n);return ne(s,"argument-error"),eo._fromEmailAndCode(e,s.code,s.tenantId)}}jr.PROVIDER_ID="password";jr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Z1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ao{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Ao{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ms.credential(n,s)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Ao{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Ao{constructor(){super("twitter.com")}static credential(e,n){return Yi._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ps.credential(n,s)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const a=await yn._fromIdTokenResponse(e,s,i),r=Ix(s);return new rr({user:a,providerId:r,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Ix(s);return new rr({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Ix(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends bs{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Nu(e,n,s,i)}}function ew(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(t,a,e,s):a})}async function p4(t,e,n=!1){const s=await Zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rr._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e,n=!1){const{auth:s}=t;if(gn(s.app))return Promise.reject(ii(s));const i="reauthenticate";try{const a=await Zl(t,ew(s,i,e,t),n);ne(a.idToken,s,"internal-error");const r=Hp(a.idToken);ne(r,s,"internal-error");const{sub:c}=r;return ne(t.uid===c,s,"user-mismatch"),rr._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&vn(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tw(t,e,n=!1){if(gn(t.app))return Promise.reject(ii(t));const s="signIn",i=await ew(t,s,e),a=await rr._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(a.user),a}async function y4(t,e){return tw(Ar(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t){const e=Ar(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function b4(t,e,n){return gn(t.app)?Promise.reject(ii(t)):y4(kt(t),jr.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&x4(t),s})}function v4(t,e,n,s){return kt(t).onIdTokenChanged(e,n,s)}function _4(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function nw(t,e,n,s){return kt(t).onAuthStateChanged(e,n,s)}const Au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Au,"1"),this.storage.removeItem(Au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=1e3,w4=10;class iw extends sw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((r,c,u)=>{this.notifyListeners(r,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const r=this.storage.getItem(s);!n&&this.localCache[s]===r||this.notifyListeners(s,r)},a=this.storage.getItem(s);FR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,w4):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},E4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iw.type="LOCAL";const T4=iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends sw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aw.type="SESSION";const rw=aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new yd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:a}=n.data,r=this.handlersMap[i];if(!(r!=null&&r.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(r).map(async d=>d(n.origin,a)),u=await S4(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,r;return new Promise((c,u)=>{const d=Qp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},s);r={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(g.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{r&&this.removeMessageHandler(r)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function A4(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function j4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function I4(){return lw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="firebaseLocalStorageDb",R4=1,ju="firebaseLocalStorage",cw="fbase_key";class jo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xd(t,e){return t.transaction([ju],e?"readwrite":"readonly").objectStore(ju)}function k4(){const t=indexedDB.deleteDatabase(ow);return new jo(t).toPromise()}function om(){const t=indexedDB.open(ow,R4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ju,{keyPath:cw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ju)?e(s):(s.close(),await k4(),e(await om()))})})}async function Rx(t,e,n){const s=xd(t,!0).put({[cw]:e,value:n});return new jo(s).toPromise()}async function D4(t,e){const n=xd(t,!1).get(e),s=await new jo(n).toPromise();return s===void 0?null:s.value}function kx(t,e){const n=xd(t,!0).delete(e);return new jo(n).toPromise()}const O4=800,M4=3;class uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await om(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>M4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(I4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await j4(),!this.activeServiceWorker)return;this.sender=new N4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||C4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await om();return await Rx(e,Au,"1"),await kx(e,Au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Rx(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>D4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=xd(i,!1).getAll();return new jo(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),O4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uw.type="LOCAL";const V4=uw;new No(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t,e){return e?ts(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends Gp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function L4(t){return tw(t.auth,new Yp(t),t.bypassAuthState)}function U4(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),g4(n,new Yp(t),t.bypassAuthState)}async function z4(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),p4(n,new Yp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:a,error:r,type:c}=e;if(r){this.reject(r);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L4;case"linkViaPopup":case"linkViaRedirect":return z4;case"reauthViaPopup":case"reauthViaRedirect":return U4;default:vn(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new No(2e3,1e4);class Da extends dw{constructor(e,n,s,i,a){super(e,n,i,a),this.provider=s,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=Qp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B4.get())};e()}}Da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="pendingRedirect",Oc=new Map;class H4 extends dw{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Oc.get(this.auth._key());if(!e){try{const s=await F4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F4(t,e){const n=Q4(e),s=K4(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function G4(t,e){Oc.set(t._key(),e)}function K4(t){return ts(t._redirectPersistence)}function Q4(t){return Dc(q4,t.config.apiKey,t.name)}async function Y4(t,e,n=!1){if(gn(t.app))return Promise.reject(ii(t));const s=Ar(t),i=P4(s,e),r=await new H4(s,i,n).execute();return r&&!n&&(delete r.user._redirectEventId,await s._persistUserIfCurrent(r.user),await s._setRedirectUser(null,e)),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=10*60*1e3;class X4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!hw(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Rn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dx(e))}saveEventToCache(e){this.cachedEventUids.add(Dx(e)),this.lastProcessedEventTime=Date.now()}}function Dx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e={}){return vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ek=/^https?/;async function tk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await W4(t);for(const n of e)try{if(nk(n))return}catch{}vn(t,"unauthorized-domain")}function nk(t){const e=rm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return r.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&r.hostname===s}if(!ek.test(n))return!1;if(Z4.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new No(3e4,6e4);function Ox(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ik(t){return new Promise((e,n)=>{var i,a,r;function s(){Ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ox(),n(Rn(t,"network-request-failed"))},timeout:sk.get()})}if((a=(i=kn().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((r=kn().gapi)!=null&&r.load)s();else{const c=ZR("iframefcb");return kn()[c]=()=>{gapi.load?s():n(Rn(t,"network-request-failed"))},$1(`${WR()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Mc=null,e})}let Mc=null;function ak(t){return Mc=Mc||ik(t),Mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new No(5e3,15e3),lk="__/auth/iframe",ok="emulator/auth/iframe",ck={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dk(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qp(e,ok):`https://${t.config.authDomain}/${lk}`,s={apiKey:e.apiKey,appName:t.name,v:Nr},i=uk.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${So(s).slice(1)}`}async function hk(t){const e=await ak(t),n=kn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:dk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ck,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const r=Rn(t,"network-request-failed"),c=kn().setTimeout(()=>{a(r)},rk.get());function u(){kn().clearTimeout(c),i(s)}s.ping(u).then(u,()=>{a(r)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mk=500,pk=600,gk="_blank",yk="http://localhost";class Mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xk(t,e,n,s=mk,i=pk){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),r=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u={...fk,width:s.toString(),height:i.toString(),top:a,left:r},d=At().toLowerCase();n&&(c=q1(d)?gk:n),z1(d)&&(e=e||yk,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[x,C])=>`${g}${x}=${C},`,"");if(HR(d)&&c!=="_self")return bk(e||"",c),new Mx(null);const m=window.open(e||"",c,f);ne(m,t,"popup-blocked");try{m.focus()}catch{}return new Mx(m)}function bk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="__/auth/handler",_k="emulator/auth/handler",Ek=encodeURIComponent("fac");async function Vx(t,e,n,s,i,a){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const r={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Nr,eventId:i};if(e instanceof Z1){e.setDefaultLanguage(t.languageCode),r.providerId=e.providerId||"",cI(e.getCustomParameters())||(r.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))r[f]=m}if(e instanceof Ao){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(r.scopes=f.join(","))}t.tenantId&&(r.tid=t.tenantId);const c=r;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${Ek}=${encodeURIComponent(u)}`:"";return`${wk(t)}?${So(c).slice(1)}${d}`}function wk({config:t}){return t.emulator?qp(t,_k):`https://${t.authDomain}/${vk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="webStorageSupport";class Tk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rw,this._completeRedirectFn=Y4,this._overrideRedirectResult=G4}async _openPopup(e,n,s,i){var r;fs((r=this.eventManagers[e._key()])==null?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await Vx(e,n,s,rm(),i);return xk(e,a,Qp())}async _openRedirect(e,n,s,i){await this._originValidation(e);const a=await Vx(e,n,s,rm(),i);return A4(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(fs(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await hk(e),s=new X4(e);return n.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qh,{type:Qh},i=>{var r;const a=(r=i==null?void 0:i[0])==null?void 0:r[Qh];a!==void 0&&n(!!a),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Q1()||B1()||Fp()}}const Sk=Tk;var Px="@firebase/auth",Lx="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jk(t){ar(new Qi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:r,authDomain:c}=s.options;ne(r&&!r.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:r,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y1(t)},d=new $R(s,i,a,u);return a4(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ar(new Qi("auth-internal",e=>{const n=Ar(e.getProvider("auth").getImmediate());return(s=>new Nk(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(Px,Lx,Ak(t)),si(Px,Lx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=5*60,Ik=w1("authIdTokenMaxAge")||Ck;let Ux=null;const Rk=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Ik)return;const i=n==null?void 0:n.token;Ux!==i&&(Ux=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kk(t=C1()){const e=zp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i4(t,{popupRedirectResolver:Sk,persistence:[V4,T4,rw]}),s=w1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const r=Rk(a.toString());_4(n,r,()=>r(n.currentUser)),v4(n,c=>r(c))}}const i=_1("auth");return i&&J1(n,`http://${i}`),n}function Dk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}XR({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=Rn("internal-error");a.customData=i,n(a)},s.type="text/javascript",s.charset="UTF-8",Dk().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jk("Browser");var zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ai,fw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function b(){}b.prototype=y.prototype,v.F=y.prototype,v.prototype=new b,v.prototype.constructor=v,v.D=function(S,N,k){for(var A=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)A[Ee-2]=arguments[Ee];return y.prototype[N].apply(S,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,y,b){b||(b=0);const S=Array(16);if(typeof y=="string")for(var N=0;N<16;++N)S[N]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(N=0;N<16;++N)S[N]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=v.g[0],b=v.g[1],N=v.g[2];let k=v.g[3],A;A=y+(k^b&(N^k))+S[0]+3614090360&4294967295,y=b+(A<<7&4294967295|A>>>25),A=k+(N^y&(b^N))+S[1]+3905402710&4294967295,k=y+(A<<12&4294967295|A>>>20),A=N+(b^k&(y^b))+S[2]+606105819&4294967295,N=k+(A<<17&4294967295|A>>>15),A=b+(y^N&(k^y))+S[3]+3250441966&4294967295,b=N+(A<<22&4294967295|A>>>10),A=y+(k^b&(N^k))+S[4]+4118548399&4294967295,y=b+(A<<7&4294967295|A>>>25),A=k+(N^y&(b^N))+S[5]+1200080426&4294967295,k=y+(A<<12&4294967295|A>>>20),A=N+(b^k&(y^b))+S[6]+2821735955&4294967295,N=k+(A<<17&4294967295|A>>>15),A=b+(y^N&(k^y))+S[7]+4249261313&4294967295,b=N+(A<<22&4294967295|A>>>10),A=y+(k^b&(N^k))+S[8]+1770035416&4294967295,y=b+(A<<7&4294967295|A>>>25),A=k+(N^y&(b^N))+S[9]+2336552879&4294967295,k=y+(A<<12&4294967295|A>>>20),A=N+(b^k&(y^b))+S[10]+4294925233&4294967295,N=k+(A<<17&4294967295|A>>>15),A=b+(y^N&(k^y))+S[11]+2304563134&4294967295,b=N+(A<<22&4294967295|A>>>10),A=y+(k^b&(N^k))+S[12]+1804603682&4294967295,y=b+(A<<7&4294967295|A>>>25),A=k+(N^y&(b^N))+S[13]+4254626195&4294967295,k=y+(A<<12&4294967295|A>>>20),A=N+(b^k&(y^b))+S[14]+2792965006&4294967295,N=k+(A<<17&4294967295|A>>>15),A=b+(y^N&(k^y))+S[15]+1236535329&4294967295,b=N+(A<<22&4294967295|A>>>10),A=y+(N^k&(b^N))+S[1]+4129170786&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^N&(y^b))+S[6]+3225465664&4294967295,k=y+(A<<9&4294967295|A>>>23),A=N+(y^b&(k^y))+S[11]+643717713&4294967295,N=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(N^k))+S[0]+3921069994&4294967295,b=N+(A<<20&4294967295|A>>>12),A=y+(N^k&(b^N))+S[5]+3593408605&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^N&(y^b))+S[10]+38016083&4294967295,k=y+(A<<9&4294967295|A>>>23),A=N+(y^b&(k^y))+S[15]+3634488961&4294967295,N=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(N^k))+S[4]+3889429448&4294967295,b=N+(A<<20&4294967295|A>>>12),A=y+(N^k&(b^N))+S[9]+568446438&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^N&(y^b))+S[14]+3275163606&4294967295,k=y+(A<<9&4294967295|A>>>23),A=N+(y^b&(k^y))+S[3]+4107603335&4294967295,N=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(N^k))+S[8]+1163531501&4294967295,b=N+(A<<20&4294967295|A>>>12),A=y+(N^k&(b^N))+S[13]+2850285829&4294967295,y=b+(A<<5&4294967295|A>>>27),A=k+(b^N&(y^b))+S[2]+4243563512&4294967295,k=y+(A<<9&4294967295|A>>>23),A=N+(y^b&(k^y))+S[7]+1735328473&4294967295,N=k+(A<<14&4294967295|A>>>18),A=b+(k^y&(N^k))+S[12]+2368359562&4294967295,b=N+(A<<20&4294967295|A>>>12),A=y+(b^N^k)+S[5]+4294588738&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^N)+S[8]+2272392833&4294967295,k=y+(A<<11&4294967295|A>>>21),A=N+(k^y^b)+S[11]+1839030562&4294967295,N=k+(A<<16&4294967295|A>>>16),A=b+(N^k^y)+S[14]+4259657740&4294967295,b=N+(A<<23&4294967295|A>>>9),A=y+(b^N^k)+S[1]+2763975236&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^N)+S[4]+1272893353&4294967295,k=y+(A<<11&4294967295|A>>>21),A=N+(k^y^b)+S[7]+4139469664&4294967295,N=k+(A<<16&4294967295|A>>>16),A=b+(N^k^y)+S[10]+3200236656&4294967295,b=N+(A<<23&4294967295|A>>>9),A=y+(b^N^k)+S[13]+681279174&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^N)+S[0]+3936430074&4294967295,k=y+(A<<11&4294967295|A>>>21),A=N+(k^y^b)+S[3]+3572445317&4294967295,N=k+(A<<16&4294967295|A>>>16),A=b+(N^k^y)+S[6]+76029189&4294967295,b=N+(A<<23&4294967295|A>>>9),A=y+(b^N^k)+S[9]+3654602809&4294967295,y=b+(A<<4&4294967295|A>>>28),A=k+(y^b^N)+S[12]+3873151461&4294967295,k=y+(A<<11&4294967295|A>>>21),A=N+(k^y^b)+S[15]+530742520&4294967295,N=k+(A<<16&4294967295|A>>>16),A=b+(N^k^y)+S[2]+3299628645&4294967295,b=N+(A<<23&4294967295|A>>>9),A=y+(N^(b|~k))+S[0]+4096336452&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~N))+S[7]+1126891415&4294967295,k=y+(A<<10&4294967295|A>>>22),A=N+(y^(k|~b))+S[14]+2878612391&4294967295,N=k+(A<<15&4294967295|A>>>17),A=b+(k^(N|~y))+S[5]+4237533241&4294967295,b=N+(A<<21&4294967295|A>>>11),A=y+(N^(b|~k))+S[12]+1700485571&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~N))+S[3]+2399980690&4294967295,k=y+(A<<10&4294967295|A>>>22),A=N+(y^(k|~b))+S[10]+4293915773&4294967295,N=k+(A<<15&4294967295|A>>>17),A=b+(k^(N|~y))+S[1]+2240044497&4294967295,b=N+(A<<21&4294967295|A>>>11),A=y+(N^(b|~k))+S[8]+1873313359&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~N))+S[15]+4264355552&4294967295,k=y+(A<<10&4294967295|A>>>22),A=N+(y^(k|~b))+S[6]+2734768916&4294967295,N=k+(A<<15&4294967295|A>>>17),A=b+(k^(N|~y))+S[13]+1309151649&4294967295,b=N+(A<<21&4294967295|A>>>11),A=y+(N^(b|~k))+S[4]+4149444226&4294967295,y=b+(A<<6&4294967295|A>>>26),A=k+(b^(y|~N))+S[11]+3174756917&4294967295,k=y+(A<<10&4294967295|A>>>22),A=N+(y^(k|~b))+S[2]+718787259&4294967295,N=k+(A<<15&4294967295|A>>>17),A=b+(k^(N|~y))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+N&4294967295,v.g[3]=v.g[3]+k&4294967295}s.prototype.v=function(v,y){y===void 0&&(y=v.length);const b=y-this.blockSize,S=this.C;let N=this.h,k=0;for(;k<y;){if(N==0)for(;k<=b;)i(this,v,k),k+=this.blockSize;if(typeof v=="string"){for(;k<y;)if(S[N++]=v.charCodeAt(k++),N==this.blockSize){i(this,S),N=0;break}}else for(;k<y;)if(S[N++]=v[k++],N==this.blockSize){i(this,S),N=0;break}}this.h=N,this.o+=y},s.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;y=this.o*8;for(var b=v.length-8;b<v.length;++b)v[b]=y&255,y/=256;for(this.v(v),v=Array(16),y=0,b=0;b<4;++b)for(let S=0;S<32;S+=8)v[y++]=this.g[b]>>>S&255;return v};function a(v,y){var b=c;return Object.prototype.hasOwnProperty.call(b,v)?b[v]:b[v]=y(v)}function r(v,y){this.h=y;const b=[];let S=!0;for(let N=v.length-1;N>=0;N--){const k=v[N]|0;S&&k==y||(b[N]=k,S=!1)}this.g=b}var c={};function u(v){return-128<=v&&v<128?a(v,function(y){return new r([y|0],y<0?-1:0)}):new r([v|0],v<0?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(v<0)return D(d(-v));const y=[];let b=1;for(let S=0;v>=b;S++)y[S]=v/b|0,b*=4294967296;return new r(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return D(f(v.substring(1),y));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=d(Math.pow(y,8));let S=m;for(let k=0;k<v.length;k+=8){var N=Math.min(8,v.length-k);const A=parseInt(v.substring(k,k+N),y);N<8?(N=d(Math.pow(y,N)),S=S.j(N).add(d(A))):(S=S.j(b),S=S.add(d(A)))}return S}var m=u(0),g=u(1),x=u(16777216);t=r.prototype,t.m=function(){if(I(this))return-D(this).m();let v=0,y=1;for(let b=0;b<this.g.length;b++){const S=this.i(b);v+=(S>=0?S:4294967296+S)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(C(this))return"0";if(I(this))return"-"+D(this).toString(v);const y=d(Math.pow(v,6));var b=this;let S="";for(;;){const N=R(b,y).g;b=T(b,N.j(y));let k=((b.g.length>0?b.g[0]:b.h)>>>0).toString(v);if(b=N,C(b))return k+S;for(;k.length<6;)k="0"+k;S=k+S}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function C(v){if(v.h!=0)return!1;for(let y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function I(v){return v.h==-1}t.l=function(v){return v=T(this,v),I(v)?-1:C(v)?0:1};function D(v){const y=v.g.length,b=[];for(let S=0;S<y;S++)b[S]=~v.g[S];return new r(b,~v.h).add(g)}t.abs=function(){return I(this)?D(this):this},t.add=function(v){const y=Math.max(this.g.length,v.g.length),b=[];let S=0;for(let N=0;N<=y;N++){let k=S+(this.i(N)&65535)+(v.i(N)&65535),A=(k>>>16)+(this.i(N)>>>16)+(v.i(N)>>>16);S=A>>>16,k&=65535,A&=65535,b[N]=A<<16|k}return new r(b,b[b.length-1]&-2147483648?-1:0)};function T(v,y){return v.add(D(y))}t.j=function(v){if(C(this)||C(v))return m;if(I(this))return I(v)?D(this).j(D(v)):D(D(this).j(v));if(I(v))return D(this.j(D(v)));if(this.l(x)<0&&v.l(x)<0)return d(this.m()*v.m());const y=this.g.length+v.g.length,b=[];for(var S=0;S<2*y;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(let N=0;N<v.g.length;N++){const k=this.i(S)>>>16,A=this.i(S)&65535,Ee=v.i(N)>>>16,Ie=v.i(N)&65535;b[2*S+2*N]+=A*Ie,_(b,2*S+2*N),b[2*S+2*N+1]+=k*Ie,_(b,2*S+2*N+1),b[2*S+2*N+1]+=A*Ee,_(b,2*S+2*N+1),b[2*S+2*N+2]+=k*Ee,_(b,2*S+2*N+2)}for(v=0;v<y;v++)b[v]=b[2*v+1]<<16|b[2*v];for(v=y;v<2*y;v++)b[v]=0;return new r(b,0)};function _(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function w(v,y){this.g=v,this.h=y}function R(v,y){if(C(y))throw Error("division by zero");if(C(v))return new w(m,m);if(I(v))return y=R(D(v),y),new w(D(y.g),D(y.h));if(I(y))return y=R(v,D(y)),new w(D(y.g),y.h);if(v.g.length>30){if(I(v)||I(y))throw Error("slowDivide_ only works with positive integers.");for(var b=g,S=y;S.l(v)<=0;)b=M(b),S=M(S);var N=U(b,1),k=U(S,1);for(S=U(S,2),b=U(b,2);!C(S);){var A=k.add(S);A.l(v)<=0&&(N=N.add(b),k=A),S=U(S,1),b=U(b,1)}return y=T(v,N.j(y)),new w(N,y)}for(N=m;v.l(y)>=0;){for(b=Math.max(1,Math.floor(v.m()/y.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),k=d(b),A=k.j(y);I(A)||A.l(v)>0;)b-=S,k=d(b),A=k.j(y);C(k)&&(k=g),N=N.add(k),v=T(v,A)}return new w(N,v)}t.B=function(v){return R(this,v).h},t.and=function(v){const y=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<y;S++)b[S]=this.i(S)&v.i(S);return new r(b,this.h&v.h)},t.or=function(v){const y=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<y;S++)b[S]=this.i(S)|v.i(S);return new r(b,this.h|v.h)},t.xor=function(v){const y=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<y;S++)b[S]=this.i(S)^v.i(S);return new r(b,this.h^v.h)};function M(v){const y=v.g.length+1,b=[];for(let S=0;S<y;S++)b[S]=v.i(S)<<1|v.i(S-1)>>>31;return new r(b,v.h)}function U(v,y){const b=y>>5;y%=32;const S=v.g.length-b,N=[];for(let k=0;k<S;k++)N[k]=y>0?v.i(k+b)>>>y|v.i(k+b+1)<<32-y:v.i(k+b);return new r(N,v.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,fw=s,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=d,r.fromString=f,ai=r}).apply(typeof zx<"u"?zx:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mw,dl,pw,Vc,cm,gw,yw,xw;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var h=0;h<o.length;++h){var p=o[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function i(o,h){if(h)e:{var p=s;o=o.split(".");for(var E=0;E<o.length-1;E++){var O=o[E];if(!(O in p))break e;p=p[O]}o=o[o.length-1],E=p[o],h=h(E),h!=E&&h!=null&&e(p,o,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(h){var p=[],E;for(E in h)Object.prototype.hasOwnProperty.call(h,E)&&p.push([E,h[E]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},r=this||self;function c(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function u(o,h,p){return o.call.apply(o.bind,arguments)}function d(o,h,p){return d=u,d.apply(null,arguments)}function f(o,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),o.apply(this,E)}}function m(o,h){function p(){}p.prototype=h.prototype,o.Z=h.prototype,o.prototype=new p,o.prototype.constructor=o,o.Ob=function(E,O,V){for(var Y=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)Y[ce-2]=arguments[ce];return h.prototype[O].apply(E,Y)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function x(o){const h=o.length;if(h>0){const p=Array(h);for(let E=0;E<h;E++)p[E]=o[E];return p}return[]}function C(o,h){for(let E=1;E<arguments.length;E++){const O=arguments[E];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=o.length||0;const V=O.length||0;o.length=p+V;for(let Y=0;Y<V;Y++)o[p+Y]=O[Y]}else o.push(O)}}class I{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function D(o){r.setTimeout(()=>{throw o},0)}function T(){var o=v;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class _{constructor(){this.h=this.g=null}add(h,p){const E=w.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var w=new I(()=>new R,o=>o.reset());class R{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let M,U=!1,v=new _,y=()=>{const o=Promise.resolve(void 0);M=()=>{o.then(b)}};function b(){for(var o;o=T();){try{o.h.call(o.g)}catch(p){D(p)}var h=w;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}U=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};r.addEventListener("test",p,h),r.removeEventListener("test",p,h)}catch{}return o}();function A(o){return/^[\s\xa0]*$/.test(o)}function Ee(o,h){N.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}m(Ee,N),Ee.prototype.init=function(o,h){const p=this.type=o.type,E=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(p=="mouseover"?h=o.fromElement:p=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),K=0;function P(o,h,p,E,O){this.listener=o,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=O,this.key=++K,this.da=this.fa=!1}function F(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function L(o,h,p){for(const E in o)h.call(p,o[E],E,o)}function H(o,h){for(const p in o)h.call(void 0,o[p],p,o)}function $(o){const h={};for(const p in o)h[p]=o[p];return h}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(o,h){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)o[p]=E[p];for(let V=0;V<W.length;V++)p=W[V],Object.prototype.hasOwnProperty.call(E,p)&&(o[p]=E[p])}}function G(o){this.src=o,this.g={},this.h=0}G.prototype.add=function(o,h,p,E,O){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const Y=Z(o,h,E,O);return Y>-1?(h=o[Y],p||(h.fa=!1)):(h=new P(h,this.src,V,!!E,O),h.fa=p,o.push(h)),h};function Q(o,h){const p=h.type;if(p in o.g){var E=o.g[p],O=Array.prototype.indexOf.call(E,h,void 0),V;(V=O>=0)&&Array.prototype.splice.call(E,O,1),V&&(F(h),o.g[p].length==0&&(delete o.g[p],o.h--))}}function Z(o,h,p,E){for(let O=0;O<o.length;++O){const V=o[O];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==E)return O}return-1}var te="closure_lm_"+(Math.random()*1e6|0),ue={};function _e(o,h,p,E,O){if(Array.isArray(h)){for(let V=0;V<h.length;V++)_e(o,h[V],p,E,O);return null}return p=Cg(p),o&&o[Ie]?o.J(h,p,c(E)?!!E.capture:!1,O):fn(o,h,p,!1,E,O)}function fn(o,h,p,E,O,V){if(!h)throw Error("Invalid event type");const Y=c(O)?!!O.capture:!!O;let ce=Pd(o);if(ce||(o[te]=ce=new G(o)),p=ce.add(h,p,E,Y,V),p.proxy)return p;if(E=Mo(),p.proxy=E,E.src=o,E.listener=p,o.addEventListener)k||(O=Y),O===void 0&&(O=!1),o.addEventListener(h.toString(),E,O);else if(o.attachEvent)o.attachEvent(jg(h.toString()),E);else if(o.addListener&&o.removeListener)o.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Mo(){function o(p){return h.call(o.src,o.listener,p)}const h=ZT;return o}function Vd(o,h,p,E,O){if(Array.isArray(h))for(var V=0;V<h.length;V++)Vd(o,h[V],p,E,O);else E=c(E)?!!E.capture:!!E,p=Cg(p),o&&o[Ie]?(o=o.i,V=String(h).toString(),V in o.g&&(h=o.g[V],p=Z(h,p,E,O),p>-1&&(F(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete o.g[V],o.h--)))):o&&(o=Pd(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Z(h,p,E,O)),(p=o>-1?h[o]:null)&&Or(p))}function Or(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[Ie])Q(h.i,o);else{var p=o.type,E=o.proxy;h.removeEventListener?h.removeEventListener(p,E,o.capture):h.detachEvent?h.detachEvent(jg(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=Pd(h))?(Q(p,o),p.h==0&&(p.src=null,h[te]=null)):F(o)}}}function jg(o){return o in ue?ue[o]:ue[o]="on"+o}function ZT(o,h){if(o.da)o=!0;else{h=new Ee(h,this);const p=o.listener,E=o.ha||o.src;o.fa&&Or(o),o=p.call(E,h)}return o}function Pd(o){return o=o[te],o instanceof G?o:null}var Ld="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cg(o){return typeof o=="function"?o:(o[Ld]||(o[Ld]=function(h){return o.handleEvent(h)}),o[Ld])}function Et(){S.call(this),this.i=new G(this),this.M=this,this.G=null}m(Et,S),Et.prototype[Ie]=!0,Et.prototype.removeEventListener=function(o,h,p,E){Vd(this,o,h,p,E)};function jt(o,h){var p,E=o.G;if(E)for(p=[];E;E=E.G)p.push(E);if(o=o.M,E=h.type||h,typeof h=="string")h=new N(h,o);else if(h instanceof N)h.target=h.target||o;else{var O=h;h=new N(E,o),Me(h,O)}O=!0;let V,Y;if(p)for(Y=p.length-1;Y>=0;Y--)V=h.g=p[Y],O=Vo(V,E,!0,h)&&O;if(V=h.g=o,O=Vo(V,E,!0,h)&&O,O=Vo(V,E,!1,h)&&O,p)for(Y=0;Y<p.length;Y++)V=h.g=p[Y],O=Vo(V,E,!1,h)&&O}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const p=o.g[h];for(let E=0;E<p.length;E++)F(p[E]);delete o.g[h],o.h--}}this.G=null},Et.prototype.J=function(o,h,p,E){return this.i.add(String(o),h,!1,p,E)},Et.prototype.K=function(o,h,p,E){return this.i.add(String(o),h,!0,p,E)};function Vo(o,h,p,E){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let O=!0;for(let V=0;V<h.length;++V){const Y=h[V];if(Y&&!Y.da&&Y.capture==p){const ce=Y.listener,at=Y.ha||Y.src;Y.fa&&Q(o.i,Y),O=ce.call(at,E)!==!1&&O}}return O&&!E.defaultPrevented}function e2(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:r.setTimeout(o,h||0)}function Ig(o){o.g=e2(()=>{o.g=null,o.i&&(o.i=!1,Ig(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class t2 extends S{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ig(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(o){S.call(this),this.h=o,this.g={}}m(Mr,S);var Rg=[];function kg(o){L(o.g,function(h,p){this.g.hasOwnProperty(p)&&Or(h)},o),o.g={}}Mr.prototype.N=function(){Mr.Z.N.call(this),kg(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ud=r.JSON.stringify,n2=r.JSON.parse,s2=class{stringify(o){return r.JSON.stringify(o,void 0)}parse(o){return r.JSON.parse(o,void 0)}};function Dg(){}function Og(){}var Vr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zd(){N.call(this,"d")}m(zd,N);function Bd(){N.call(this,"c")}m(Bd,N);var _i={},Mg=null;function Po(){return Mg=Mg||new Et}_i.Ia="serverreachability";function Vg(o){N.call(this,_i.Ia,o)}m(Vg,N);function Pr(o){const h=Po();jt(h,new Vg(h))}_i.STAT_EVENT="statevent";function Pg(o,h){N.call(this,_i.STAT_EVENT,o),this.stat=h}m(Pg,N);function Ct(o){const h=Po();jt(h,new Pg(h,o))}_i.Ja="timingevent";function Lg(o,h){N.call(this,_i.Ja,o),this.size=h}m(Lg,N);function Lr(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){o()},h)}function Ur(){this.g=!0}Ur.prototype.ua=function(){this.g=!1};function i2(o,h,p,E,O,V){o.info(function(){if(o.g)if(V){var Y="",ce=V.split("&");for(let Re=0;Re<ce.length;Re++){var at=ce[Re].split("=");if(at.length>1){const ct=at[0];at=at[1];const Tn=ct.split("_");Y=Tn.length>=2&&Tn[1]=="type"?Y+(ct+"="+at+"&"):Y+(ct+"=redacted&")}}}else Y=null;else Y=V;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+h+`
`+p+`
`+Y})}function a2(o,h,p,E,O,V,Y){o.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+h+`
`+p+`
`+V+" "+Y})}function ca(o,h,p,E){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+l2(o,p)+(E?" "+E:"")})}function r2(o,h){o.info(function(){return"TIMEOUT: "+h})}Ur.prototype.info=function(){};function l2(o,h){if(!o.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var p=V[o];if(!(p.length<2)){var E=p[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let Y=1;Y<E.length;Y++)E[Y]=""}}}}return Ud(V)}catch{return h}}var Lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ug={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zg;function qd(){}m(qd,Dg),qd.prototype.g=function(){return new XMLHttpRequest},zg=new qd;function zr(o){return encodeURIComponent(String(o))}function o2(o){var h=1;o=o.split(":");const p=[];for(;h>0&&o.length;)p.push(o.shift()),h--;return o.length&&p.push(o.join(":")),p}function vs(o,h,p,E){this.j=o,this.i=h,this.l=p,this.S=E||1,this.V=new Mr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bg}function Bg(){this.i=null,this.g="",this.h=!1}var qg={},Hd={};function Fd(o,h,p){o.M=1,o.A=zo(wn(h)),o.u=p,o.R=!0,Hg(o,null)}function Hg(o,h){o.F=Date.now(),Uo(o),o.B=wn(o.A);var p=o.B,E=o.S;Array.isArray(E)||(E=[String(E)]),n0(p.i,"t",E),o.C=0,p=o.j.L,o.h=new Bg,o.g=v0(o.j,p?h:null,!o.u),o.P>0&&(o.O=new t2(d(o.Y,o,o.g),o.P)),h=o.V,p=o.g,E=o.ba;var O="readystatechange";Array.isArray(O)||(O&&(Rg[0]=O.toString()),O=Rg);for(let V=0;V<O.length;V++){const Y=_e(p,O[V],E||h.handleEvent,!1,h.h||h);if(!Y)break;h.g[Y.key]=Y}h=o.J?$(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),Pr(),i2(o.i,o.v,o.B,o.l,o.S,o.u)}vs.prototype.ba=function(o){o=o.target;const h=this.O;h&&ws(o)==3?h.j():this.Y(o)},vs.prototype.Y=function(o){try{if(o==this.g)e:{const ce=ws(this.g),at=this.g.ya(),Re=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||c0(this.g)))){this.K||ce!=4||at==7||(at==8||Re<=0?Pr(3):Pr(2)),Gd(this);var h=this.g.ca();this.X=h;var p=c2(this);if(this.o=h==200,a2(this.i,this.v,this.B,this.l,this.S,ce,h),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(E)){var V=E;break t}}V=null}if(o=V)ca(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Kd(this,o);else{this.o=!1,this.m=3,Ct(12),Ei(this),Br(this);break e}}if(this.R){o=!0;let ct;for(;!this.K&&this.C<p.length;)if(ct=u2(this,p),ct==Hd){ce==4&&(this.m=4,Ct(14),o=!1),ca(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==qg){this.m=4,Ct(15),ca(this.i,this.l,p,"[Invalid Chunk]"),o=!1;break}else ca(this.i,this.l,ct,null),Kd(this,ct);if(Fg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||p.length!=0||this.h.h||(this.m=1,Ct(16),o=!1),this.o=this.o&&o,!o)ca(this.i,this.l,p,"[Invalid Chunked Response]"),Ei(this),Br(this);else if(p.length>0&&!this.W){this.W=!0;var Y=this.j;Y.g==this&&Y.aa&&!Y.P&&(Y.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),eh(Y),Y.P=!0,Ct(11))}}else ca(this.i,this.l,p,null),Kd(this,p);ce==4&&Ei(this),this.o&&!this.K&&(ce==4?g0(this.j,this):(this.o=!1,Uo(this)))}else T2(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Ei(this),Br(this)}}}catch{}finally{}};function c2(o){if(!Fg(o))return o.g.la();const h=c0(o.g);if(h==="")return"";let p="";const E=h.length,O=ws(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Ei(o),Br(o),"";o.h.i=new r.TextDecoder}for(let V=0;V<E;V++)o.h.h=!0,p+=o.h.i.decode(h[V],{stream:!(O&&V==E-1)});return h.length=0,o.h.g+=p,o.C=0,o.h.g}function Fg(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function u2(o,h){var p=o.C,E=h.indexOf(`
`,p);return E==-1?Hd:(p=Number(h.substring(p,E)),isNaN(p)?qg:(E+=1,E+p>h.length?Hd:(h=h.slice(E,E+p),o.C=E+p,h)))}vs.prototype.cancel=function(){this.K=!0,Ei(this)};function Uo(o){o.T=Date.now()+o.H,Gg(o,o.H)}function Gg(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Lr(d(o.aa,o),h)}function Gd(o){o.D&&(r.clearTimeout(o.D),o.D=null)}vs.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(r2(this.i,this.B),this.M!=2&&(Pr(),Ct(17)),Ei(this),this.m=2,Br(this)):Gg(this,this.T-o)};function Br(o){o.j.I==0||o.K||g0(o.j,o)}function Ei(o){Gd(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,kg(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function Kd(o,h){try{var p=o.j;if(p.I!=0&&(p.g==o||Qd(p.h,o))){if(!o.L&&Qd(p.h,o)&&p.I==3){try{var E=p.Ba.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<o.F)Go(p),Ho(p);else break e;Zd(p),Ct(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Lr(d(p.Va,p),6e3));Yg(p.h)<=1&&p.ta&&(p.ta=void 0)}else Ti(p,11)}else if((o.L||p.g==o)&&Go(p),!A(h))for(O=p.Ba.g.parse(h),h=0;h<O.length;h++){let Re=O[h];const ct=Re[0];if(!(ct<=p.K))if(p.K=ct,Re=Re[1],p.I==2)if(Re[0]=="c"){p.M=Re[1],p.ba=Re[2];const Tn=Re[3];Tn!=null&&(p.ka=Tn,p.j.info("VER="+p.ka));const Si=Re[4];Si!=null&&(p.za=Si,p.j.info("SVER="+p.za));const Ts=Re[5];Ts!=null&&typeof Ts=="number"&&Ts>0&&(E=1.5*Ts,p.O=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Ss=o.g;if(Ss){const Qo=Ss.g?Ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var V=E.h;V.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Yd(V,V.h),V.h=null))}if(E.G){const th=Ss.g?Ss.g.getResponseHeader("X-HTTP-Session-Id"):null;th&&(E.wa=th,Ve(E.J,E.G,th))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-o.F,p.j.info("Handshake RTT: "+p.T+"ms")),E=p;var Y=o;if(E.na=b0(E,E.L?E.ba:null,E.W),Y.L){$g(E.h,Y);var ce=Y,at=E.O;at&&(ce.H=at),ce.D&&(Gd(ce),Uo(ce)),E.g=Y}else m0(E);p.i.length>0&&Fo(p)}else Re[0]!="stop"&&Re[0]!="close"||Ti(p,7);else p.I==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Ti(p,7):Wd(p):Re[0]!="noop"&&p.l&&p.l.qa(Re),p.A=0)}}Pr(4)}catch{}}var d2=class{constructor(o,h){this.g=o,this.map=h}};function Kg(o){this.l=o||10,r.PerformanceNavigationTiming?(o=r.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Yg(o){return o.h?1:o.g?o.g.size:0}function Qd(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Yd(o,h){o.g?o.g.add(h):o.h=h}function $g(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Kg.prototype.cancel=function(){if(this.i=Xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Xg(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const p of o.g.values())h=h.concat(p.G);return h}return x(o.i)}var Jg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function h2(o,h){if(o){o=o.split("&");for(let p=0;p<o.length;p++){const E=o[p].indexOf("=");let O,V=null;E>=0?(O=o[p].substring(0,E),V=o[p].substring(E+1)):O=o[p],h(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function _s(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof _s?(this.l=o.l,qr(this,o.j),this.o=o.o,this.g=o.g,Hr(this,o.u),this.h=o.h,$d(this,s0(o.i)),this.m=o.m):o&&(h=String(o).match(Jg))?(this.l=!1,qr(this,h[1]||"",!0),this.o=Fr(h[2]||""),this.g=Fr(h[3]||"",!0),Hr(this,h[4]),this.h=Fr(h[5]||"",!0),$d(this,h[6]||"",!0),this.m=Fr(h[7]||"")):(this.l=!1,this.i=new Kr(null,this.l))}_s.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(Gr(h,Wg,!0),":");var p=this.g;return(p||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Gr(h,Wg,!0),"@"),o.push(zr(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&o.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Gr(p,p.charAt(0)=="/"?p2:m2,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Gr(p,y2)),o.join("")},_s.prototype.resolve=function(o){const h=wn(this);let p=!!o.j;p?qr(h,o.j):p=!!o.o,p?h.o=o.o:p=!!o.g,p?h.g=o.g:p=o.u!=null;var E=o.h;if(p)Hr(h,o.u);else if(p=!!o.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=h.h.lastIndexOf("/");O!=-1&&(E=h.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");const V=[];for(let Y=0;Y<O.length;){const ce=O[Y++];ce=="."?E&&Y==O.length&&V.push(""):ce==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),E&&Y==O.length&&V.push("")):(V.push(ce),E=!0)}E=V.join("/")}else E=O}return p?h.h=E:p=o.i.toString()!=="",p?$d(h,s0(o.i)):p=!!o.m,p&&(h.m=o.m),h};function wn(o){return new _s(o)}function qr(o,h,p){o.j=p?Fr(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Hr(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function $d(o,h,p){h instanceof Kr?(o.i=h,x2(o.i,o.l)):(p||(h=Gr(h,g2)),o.i=new Kr(h,o.l))}function Ve(o,h,p){o.i.set(h,p)}function zo(o){return Ve(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Fr(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Gr(o,h,p){return typeof o=="string"?(o=encodeURI(o).replace(h,f2),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function f2(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Wg=/[#\/\?@]/g,m2=/[#\?:]/g,p2=/[#\?]/g,g2=/[#\?@]/g,y2=/#/g;function Kr(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function wi(o){o.g||(o.g=new Map,o.h=0,o.i&&h2(o.i,function(h,p){o.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Kr.prototype,t.add=function(o,h){wi(this),this.i=null,o=ua(this,o);let p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(h),this.h+=1,this};function Zg(o,h){wi(o),h=ua(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function e0(o,h){return wi(o),h=ua(o,h),o.g.has(h)}t.forEach=function(o,h){wi(this),this.g.forEach(function(p,E){p.forEach(function(O){o.call(h,O,E,this)},this)},this)};function t0(o,h){wi(o);let p=[];if(typeof h=="string")e0(o,h)&&(p=p.concat(o.g.get(ua(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)p=p.concat(o[h]);return p}t.set=function(o,h){return wi(this),this.i=null,o=ua(this,o),e0(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=t0(this,o),o.length>0?String(o[0]):h):h};function n0(o,h,p){Zg(o,h),p.length>0&&(o.i=null,o.g.set(ua(o,h),x(p)),o.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let E=0;E<h.length;E++){var p=h[E];const O=zr(p);p=t0(this,p);for(let V=0;V<p.length;V++){let Y=O;p[V]!==""&&(Y+="="+zr(p[V])),o.push(Y)}}return this.i=o.join("&")};function s0(o){const h=new Kr;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function ua(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function x2(o,h){h&&!o.j&&(wi(o),o.i=null,o.g.forEach(function(p,E){const O=E.toLowerCase();E!=O&&(Zg(this,E),n0(this,O,p))},o)),o.j=h}function b2(o,h){const p=new Ur;if(r.Image){const E=new Image;E.onload=f(Es,p,"TestLoadImage: loaded",!0,h,E),E.onerror=f(Es,p,"TestLoadImage: error",!1,h,E),E.onabort=f(Es,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=f(Es,p,"TestLoadImage: timeout",!1,h,E),r.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=o}else h(!1)}function v2(o,h){const p=new Ur,E=new AbortController,O=setTimeout(()=>{E.abort(),Es(p,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:E.signal}).then(V=>{clearTimeout(O),V.ok?Es(p,"TestPingServer: ok",!0,h):Es(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Es(p,"TestPingServer: error",!1,h)})}function Es(o,h,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function _2(){this.g=new s2}function Xd(o){this.i=o.Sb||null,this.h=o.ab||!1}m(Xd,Dg),Xd.prototype.g=function(){return new Bo(this.i,this.h)};function Bo(o,h){Et.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Bo,Et),t=Bo.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,Yr(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||r).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qr(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof r.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;i0(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function i0(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Qr(this):Yr(this),this.readyState==3&&i0(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,Qr(this))},t.Na=function(o){this.g&&(this.response=o,Qr(this))},t.ga=function(){this.g&&Qr(this)};function Qr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Yr(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=h.next();return o.join(`\r
`)};function Yr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function a0(o){let h="";return L(o,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function Jd(o,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=a0(p),typeof o=="string"?p!=null&&zr(p):Ve(o,h,p))}function Ge(o){Et.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ge,Et);var E2=/^https?$/i,w2=["POST","PUT"];t=Ge.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zg.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(V){r0(this,V);return}if(o=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())p.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),O=r.FormData&&o instanceof r.FormData,!(Array.prototype.indexOf.call(w2,h,void 0)>=0)||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Y]of p)this.g.setRequestHeader(V,Y);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){r0(this,V)}};function r0(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,l0(o),qo(o)}function l0(o){o.A||(o.A=!0,jt(o,"complete"),jt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,jt(this,"complete"),jt(this,"abort"),qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qo(this,!0)),Ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?o0(this):this.Xa())},t.Xa=function(){o0(this)};function o0(o){if(o.h&&typeof a<"u"){if(o.v&&ws(o)==4)setTimeout(o.Ca.bind(o),0);else if(jt(o,"readystatechange"),ws(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=V===0){let Y=String(o.D).match(Jg)[1]||null;!Y&&r.self&&r.self.location&&(Y=r.self.location.protocol.slice(0,-1)),E=!E2.test(Y?Y.toLowerCase():"")}p=E}if(p)jt(o,"complete"),jt(o,"success");else{o.o=6;try{var O=ws(o)>2?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.ca()+"]",l0(o)}}finally{qo(o)}}}}function qo(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const p=o.g;o.g=null,h||jt(o,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ws(o){return o.g?o.g.readyState:0}t.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),n2(h)}};function c0(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function T2(o){const h={};o=(o.g&&ws(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<o.length;E++){if(A(o[E]))continue;var p=o2(o[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[O]||[];h[O]=V,V.push(p)}H(h,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(o,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||h}function u0(o){this.za=0,this.i=[],this.j=new Ur,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$r("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$r("baseRetryDelayMs",5e3,o),this.Za=$r("retryDelaySeedMs",1e4,o),this.Ta=$r("forwardChannelMaxRetries",2,o),this.va=$r("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Kg(o&&o.concurrentRequestLimit),this.Ba=new _2,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=u0.prototype,t.ka=8,t.I=1,t.connect=function(o,h,p,E){Ct(0),this.W=o,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.J=b0(this,null,this.W),Fo(this)};function Wd(o){if(d0(o),o.I==3){var h=o.V++,p=wn(o.J);if(Ve(p,"SID",o.M),Ve(p,"RID",h),Ve(p,"TYPE","terminate"),Xr(o,p),h=new vs(o,o.j,h),h.M=2,h.A=zo(wn(p)),p=!1,r.navigator&&r.navigator.sendBeacon)try{p=r.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&r.Image&&(new Image().src=h.A,p=!0),p||(h.g=v0(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Uo(h)}x0(o)}function Ho(o){o.g&&(eh(o),o.g.cancel(),o.g=null)}function d0(o){Ho(o),o.v&&(r.clearTimeout(o.v),o.v=null),Go(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&r.clearTimeout(o.m),o.m=null)}function Fo(o){if(!Qg(o.h)&&!o.m){o.m=!0;var h=o.Ea;M||y(),U||(M(),U=!0),v.add(h,o),o.D=0}}function S2(o,h){return Yg(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Lr(d(o.Ea,o,h),y0(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const O=new vs(this,this.j,o);let V=this.o;if(this.U&&(V?(V=$(V),Me(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=f0(this,O,h),p=wn(this.J),Ve(p,"RID",o),Ve(p,"CVER",22),this.G&&Ve(p,"X-HTTP-Session-Id",this.G),Xr(this,p),V&&(this.R?h="headers="+zr(a0(V))+"&"+h:this.u&&Jd(p,this.u,V)),Yd(this.h,O),this.Ra&&Ve(p,"TYPE","init"),this.S?(Ve(p,"$req",h),Ve(p,"SID","null"),O.U=!0,Fd(O,p,null)):Fd(O,p,h),this.I=2}}else this.I==3&&(o?h0(this,o):this.i.length==0||Qg(this.h)||h0(this))};function h0(o,h){var p;h?p=h.l:p=o.V++;const E=wn(o.J);Ve(E,"SID",o.M),Ve(E,"RID",p),Ve(E,"AID",o.K),Xr(o,E),o.u&&o.o&&Jd(E,o.u,o.o),p=new vs(o,o.j,p,o.D+1),o.u===null&&(p.J=o.o),h&&(o.i=h.G.concat(o.i)),h=f0(o,p,1e3),p.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Yd(o.h,p),Fd(p,E,h)}function Xr(o,h){o.H&&L(o.H,function(p,E){Ve(h,E,p)}),o.l&&L({},function(p,E){Ve(h,E,p)})}function f0(o,h,p){p=Math.min(o.i.length,p);const E=o.l?d(o.l.Ka,o.l,o):null;e:{var O=o.i;let ce=-1;for(;;){const at=["count="+p];ce==-1?p>0?(ce=O[0].g,at.push("ofs="+ce)):ce=0:at.push("ofs="+ce);let Re=!0;for(let ct=0;ct<p;ct++){var V=O[ct].g;const Tn=O[ct].map;if(V-=ce,V<0)ce=Math.max(0,O[ct].g-100),Re=!1;else try{V="req"+V+"_"||"";try{var Y=Tn instanceof Map?Tn:Object.entries(Tn);for(const[Si,Ts]of Y){let Ss=Ts;c(Ts)&&(Ss=Ud(Ts)),at.push(V+Si+"="+encodeURIComponent(Ss))}}catch(Si){throw at.push(V+"type="+encodeURIComponent("_badmap")),Si}}catch{E&&E(Tn)}}if(Re){Y=at.join("&");break e}}Y=void 0}return o=o.i.splice(0,p),h.G=o,Y}function m0(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;M||y(),U||(M(),U=!0),v.add(h,o),o.A=0}}function Zd(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Lr(d(o.Da,o),y0(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,p0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Lr(d(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ho(this),p0(this))};function eh(o){o.B!=null&&(r.clearTimeout(o.B),o.B=null)}function p0(o){o.g=new vs(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=wn(o.na);Ve(h,"RID","rpc"),Ve(h,"SID",o.M),Ve(h,"AID",o.K),Ve(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Ve(h,"TO",o.ia),Ve(h,"TYPE","xmlhttp"),Xr(o,h),o.u&&o.o&&Jd(h,o.u,o.o),o.O&&(o.g.H=o.O);var p=o.g;o=o.ba,p.M=1,p.A=zo(wn(h)),p.u=null,p.R=!0,Hg(p,o)}t.Va=function(){this.C!=null&&(this.C=null,Ho(this),Zd(this),Ct(19))};function Go(o){o.C!=null&&(r.clearTimeout(o.C),o.C=null)}function g0(o,h){var p=null;if(o.g==h){Go(o),eh(o),o.g=null;var E=2}else if(Qd(o.h,h))p=h.G,$g(o.h,h),E=1;else return;if(o.I!=0){if(h.o)if(E==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var O=o.D;E=Po(),jt(E,new Lg(E,p)),Fo(o)}else m0(o);else if(O=h.m,O==3||O==0&&h.X>0||!(E==1&&S2(o,h)||E==2&&Zd(o)))switch(p&&p.length>0&&(h=o.h,h.i=h.i.concat(p)),O){case 1:Ti(o,5);break;case 4:Ti(o,10);break;case 3:Ti(o,6);break;default:Ti(o,2)}}}function y0(o,h){let p=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(p*=2),p*h}function Ti(o,h){if(o.j.info("Error code "+h),h==2){var p=d(o.bb,o),E=o.Ua;const O=!E;E=new _s(E||"//www.google.com/images/cleardot.gif"),r.location&&r.location.protocol=="http"||qr(E,"https"),zo(E),O?b2(E.toString(),p):v2(E.toString(),p)}else Ct(2);o.I=0,o.l&&o.l.pa(h),x0(o),d0(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function x0(o){if(o.I=0,o.ja=[],o.l){const h=Xg(o.h);(h.length!=0||o.i.length!=0)&&(C(o.ja,h),C(o.ja,o.i),o.h.i.length=0,x(o.i),o.i.length=0),o.l.oa()}}function b0(o,h,p){var E=p instanceof _s?wn(p):new _s(p);if(E.g!="")h&&(E.g=h+"."+E.g),Hr(E,E.u);else{var O=r.location;E=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;const V=new _s(null);E&&qr(V,E),h&&(V.g=h),O&&Hr(V,O),p&&(V.h=p),E=V}return p=o.G,h=o.wa,p&&h&&Ve(E,p,h),Ve(E,"VER",o.ka),Xr(o,E),E}function v0(o,h,p){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new Ge(new Xd({ab:p})):new Ge(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _0(){}t=_0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ko(){}Ko.prototype.g=function(o,h){return new qt(o,h)};function qt(o,h){Et.call(this),this.g=new u0(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!A(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!A(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new da(this)}m(qt,Et),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Wd(this.g)},qt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.v&&(p={},p.__data__=Ud(o),o=p);h.i.push(new d2(h.Ya++,o)),h.I==3&&Fo(h)},qt.prototype.N=function(){this.g.l=null,delete this.j,Wd(this.g),delete this.g,qt.Z.N.call(this)};function E0(o){zd.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const p in h){o=p;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}m(E0,zd);function w0(){Bd.call(this),this.status=1}m(w0,Bd);function da(o){this.g=o}m(da,_0),da.prototype.ra=function(){jt(this.g,"a")},da.prototype.qa=function(o){jt(this.g,new E0(o))},da.prototype.pa=function(o){jt(this.g,new w0)},da.prototype.oa=function(){jt(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,xw=function(){return new Ko},yw=function(){return Po()},gw=_i,cm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Vc=Lo,Ug.COMPLETE="complete",pw=Ug,Og.EventType=Vr,Vr.OPEN="a",Vr.CLOSE="b",Vr.ERROR="c",Vr.MESSAGE="d",Et.prototype.listen=Et.prototype.J,dl=Og,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,mw=Ge}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const Bx="@firebase/firestore",qx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Lp("@firebase/firestore");function ya(){return $i.logLevel}function J(t,...e){if($i.logLevel<=me.DEBUG){const n=e.map($p);$i.debug(`Firestore (${Cr}): ${t}`,...n)}}function ms(t,...e){if($i.logLevel<=me.ERROR){const n=e.map($p);$i.error(`Firestore (${Cr}): ${t}`,...n)}}function lr(t,...e){if($i.logLevel<=me.WARN){const n=e.map($p);$i.warn(`Firestore (${Cr}): ${t}`,...n)}}function $p(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,bw(t,s,n)}function bw(t,e,n){let s=`FIRESTORE (${Cr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ms(s),new Error(s)}function Se(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||bw(e,i,s)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ok{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class Mk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vk{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let a=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ri,e.enqueueRetryable(()=>i(this.currentUser))};const r=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ri)}},0),r()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Se(typeof s.accessToken=="string",31837,{l:s}),new vw(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Tt(e)}}class Pk{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lk{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Pk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const s=a=>{a.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const r=a.token!==this.m;return this.m=a.token,J("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const i=a=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=zk(40);for(let a=0;a<i.length;++a)s.length<20&&i[a]<n&&(s+=e.charAt(i[a]%62))}return s}}function pe(t,e){return t<e?-1:t>e?1:0}function um(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),a=e.charAt(s);if(i!==a)return Yh(i)===Yh(a)?pe(i,a):Yh(i)?1:-1}return pe(t.length,e.length)}const Bk=55296,qk=57343;function Yh(t){const e=t.charCodeAt(0);return e>=Bk&&e<=qk}function or(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="__name__";class Nn{constructor(e,n,s){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&se(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Nn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const a=Nn.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return pe(e.length,n.length)}static compareSegments(e,n){const s=Nn.isNumericId(e),i=Nn.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Nn.extractNumericId(e).compare(Nn.extractNumericId(n)):um(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}}class De extends Nn{construct(e,n,s){return new De(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new De(n)}static emptyPath(){return new De([])}}const Hk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends Nn{construct(e,n,s){return new xt(e,n,s)}static isValidIdentifier(e){return Hk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fx}static keyField(){return new xt([Fx])}static fromServerFormat(e){const n=[];let s="",i=0;const a=()=>{if(s.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let r=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else c==="`"?(r=!r,i++):c!=="."||r?(s+=c,i++):(a(),i++)}if(a(),r)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(De.fromString(e))}static fromName(e){return new ee(De.fromString(e).popFirst(5))}static empty(){return new ee(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new De(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Fk(t,e,n,s){if(e===!0&&s===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gx(t){if(!ee.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Kx(t){if(ee.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ew(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function Ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bd(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t,e){const n={typeString:t};return e&&(n.value=e),n}function Co(t,e){if(!Ew(t))throw new X(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,a="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const r=t[s];if(i&&typeof r!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(a!==void 0&&r!==a.value){n=`Expected '${s}' field to equal '${a.value}'`;break}}if(n)throw new X(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=-62135596800,Yx=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Yx);return new Ue(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qx)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yx}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Co(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:st("string",Ue._jsonSchemaVersion),seconds:st("number"),nanoseconds:st("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ue(0,0))}static max(){return new ae(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=-1;function Gk(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(s===1e9?new Ue(n+1,0):new Ue(n,s));return new hi(i,ee.empty(),e)}function Kk(t){return new hi(t.readTime,t.key,to)}class hi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new hi(ae.min(),ee.empty(),to)}static max(){return new hi(ae.max(),ee.empty(),to)}}function Qk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ir(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Yk)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((s,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,s)=>{n(e)})}static reject(e){return new q((n,s)=>{s(e)})}static waitFor(e){return new q((n,s)=>{let i=0,a=0,r=!1;e.forEach(c=>{++i,c.next(()=>{++a,r&&a===i&&n()},u=>s(u))}),r=!0,a===i&&n()})}static or(e){let n=q.resolve(!1);for(const s of e)n=n.next(i=>i?q.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,a)=>{s.push(n.call(this,i,a))}),this.waitFor(s)}static mapArray(e,n){return new q((s,i)=>{const a=e.length,r=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{r[d]=f,++c,c===a&&s(r)},f=>i(f))}})}static doWhile(e,n){return new q((s,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):s()};a()})}}function Xk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=-1;function _d(t){return t==null}function Cu(t){return t===0&&1/t==-1/0}function Jk(t){return typeof t=="number"&&Number.isInteger(t)&&!Cu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="";function Wk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$x(e)),e=Zk(t.get(n),e);return $x(e)}function Zk(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case ww:n+="";break;default:n+=a}}return n}function $x(t){return t+ww+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}}class hc{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?s(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,s,i,a){this.key=e,this.value=n,this.color=s??pt.RED,this.left=i??pt.EMPTY,this.right=a??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,a){return new pt(e??this.key,n??this.value,s??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const a=s(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,s),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,s,i,a){return this}insert(e,n,s){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jx(this.data.getIterator())}getIteratorFrom(e){return new Jx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class Jx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new lt(xt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return or(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Sw("Invalid base64 string: "+a):a}}(e);return new _t(n)}static fromUint8Array(e){const n=function(i){let a="";for(let r=0;r<i.length;++r)a+=String.fromCharCode(i[r]);return a}(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const eD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=eD.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mi(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="server_timestamp",Aw="__type__",jw="__previous_value__",Cw="__local_write_time__";function Wp(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Aw])==null?void 0:s.stringValue)===Nw}function Ed(t){const e=t.mapValue.fields[jw];return Wp(e)?Ed(e):e}function no(t){const e=fi(t.mapValue.fields[Cw].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,s,i,a,r,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=a,this.forceLongPolling=r,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Iu="(default)";class so{constructor(e,n){this.projectId=e,this.database=n||Iu}static empty(){return new so("","")}get isDefaultDatabase(){return this.database===Iu}isEqual(e){return e instanceof so&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="__type__",nD="__max__",fc={mapValue:{}},Rw="__vector__",Ru="value";function pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wp(t)?4:iD(t)?9007199254740991:sD(t)?10:11:se(28295,{value:t})}function Ln(t,e){if(t===e)return!0;const n=pi(t);if(n!==pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return no(t).isEqual(no(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const r=fi(i.timestampValue),c=fi(a.timestampValue);return r.seconds===c.seconds&&r.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return mi(i.bytesValue).isEqual(mi(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Ye(i.geoPointValue.latitude)===Ye(a.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Ye(i.integerValue)===Ye(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const r=Ye(i.doubleValue),c=Ye(a.doubleValue);return r===c?Cu(r)===Cu(c):isNaN(r)&&isNaN(c)}return!1}(t,e);case 9:return or(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,a){const r=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Xx(r)!==Xx(c))return!1;for(const u in r)if(r.hasOwnProperty(u)&&(c[u]===void 0||!Ln(r[u],c[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function io(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function cr(t,e){if(t===e)return 0;const n=pi(t),s=pi(e);if(n!==s)return pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(a,r){const c=Ye(a.integerValue||a.doubleValue),u=Ye(r.integerValue||r.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Wx(t.timestampValue,e.timestampValue);case 4:return Wx(no(t),no(e));case 5:return um(t.stringValue,e.stringValue);case 6:return function(a,r){const c=mi(a),u=mi(r);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,r){const c=a.split("/"),u=r.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=pe(c[d],u[d]);if(f!==0)return f}return pe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,r){const c=pe(Ye(a.latitude),Ye(r.latitude));return c!==0?c:pe(Ye(a.longitude),Ye(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zx(t.arrayValue,e.arrayValue);case 10:return function(a,r){var g,x,C,I;const c=a.fields||{},u=r.fields||{},d=(g=c[Ru])==null?void 0:g.arrayValue,f=(x=u[Ru])==null?void 0:x.arrayValue,m=pe(((C=d==null?void 0:d.values)==null?void 0:C.length)||0,((I=f==null?void 0:f.values)==null?void 0:I.length)||0);return m!==0?m:Zx(d,f)}(t.mapValue,e.mapValue);case 11:return function(a,r){if(a===fc.mapValue&&r===fc.mapValue)return 0;if(a===fc.mapValue)return 1;if(r===fc.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=r.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=um(u[m],f[m]);if(g!==0)return g;const x=cr(c[u[m]],d[f[m]]);if(x!==0)return x}return pe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw se(23264,{he:n})}}function Wx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=fi(t),s=fi(e),i=pe(n.seconds,s.seconds);return i!==0?i:pe(n.nanos,s.nanos)}function Zx(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const a=cr(n[i],s[i]);if(a)return a}return pe(n.length,s.length)}function ur(t){return dm(t)}function dm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=fi(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const a of n.values||[])i?i=!1:s+=",",s+=dm(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const r of s)a?a=!1:i+=",",i+=`${r}:${dm(n.fields[r])}`;return i+"}"}(t.mapValue):se(61005,{value:t})}function Pc(t){switch(pi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ed(t);return e?16+Pc(e):16;case 5:return 2*t.stringValue.length;case 6:return mi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,a)=>i+Pc(a),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return ia(s.fields,(a,r)=>{i+=a.length+Pc(r)}),i}(t.mapValue);default:throw se(13486,{value:t})}}function eb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hm(t){return!!t&&"integerValue"in t}function Zp(t){return!!t&&"arrayValue"in t}function tb(t){return!!t&&"nullValue"in t}function nb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lc(t){return!!t&&"mapValue"in t}function sD(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Iw])==null?void 0:s.stringValue)===Rw}function kl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=kl(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return{...t}}function iD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=xt.emptyPath(),s={},i=[];e.forEach((r,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=c.popLast()}r?s[c.lastSegment()]=kl(r):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,s,i)}delete(e){const n=this.field(e.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Lc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){ia(n,(i,a)=>e[i]=a);for(const i of s)delete e[i]}clone(){return new ln(kl(this.value))}}function kw(t){const e=[];return ia(t.fields,(n,s)=>{const i=new xt([n]);if(Lc(s)){const a=kw(s.mapValue).fields;if(a.length===0)e.push(i);else for(const r of a)e.push(i.child(r))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,s,i,a,r,c){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=a,this.data=r,this.documentState=c}static newInvalidDocument(e){return new St(e,0,ae.min(),ae.min(),ae.min(),ln.empty(),0)}static newFoundDocument(e,n,s,i){return new St(e,1,n,ae.min(),s,i,0)}static newNoDocument(e,n){return new St(e,2,n,ae.min(),ae.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,ae.min(),ae.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.position=e,this.inclusive=n}}function sb(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const a=e[i],r=t.position[i];if(a.field.isKeyField()?s=ee.comparator(ee.fromName(r.referenceValue),n.key):s=cr(r,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function ib(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n="asc"){this.field=e,this.dir=n}}function aD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{}class tt extends Dw{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new lD(e,n,s):n==="array-contains"?new uD(e,s):n==="in"?new dD(e,s):n==="not-in"?new hD(e,s):n==="array-contains-any"?new fD(e,s):new tt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new oD(e,s):new cD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cr(n,this.value)):n!==null&&pi(this.value)===pi(n)&&this.matchesComparison(cr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends Dw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _n(e,n)}matches(e){return Ow(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ow(t){return t.op==="and"}function Mw(t){return rD(t)&&Ow(t)}function rD(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function fm(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+ur(t.value);if(Mw(t))return t.filters.map(e=>fm(e)).join(",");{const e=t.filters.map(n=>fm(n)).join(",");return`${t.op}(${e})`}}function Vw(t,e){return t instanceof tt?function(s,i){return i instanceof tt&&s.op===i.op&&s.field.isEqual(i.field)&&Ln(s.value,i.value)}(t,e):t instanceof _n?function(s,i){return i instanceof _n&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((a,r,c)=>a&&Vw(r,i.filters[c]),!0):!1}(t,e):void se(19439)}function Pw(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${ur(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(Pw).join(" ,")+"}"}(t):"Filter"}class lD extends tt{constructor(e,n,s){super(e,n,s),this.key=ee.fromName(s.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class oD extends tt{constructor(e,n){super(e,"in",n),this.keys=Lw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cD extends tt{constructor(e,n){super(e,"not-in",n),this.keys=Lw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Lw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>ee.fromName(s.referenceValue))}class uD extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zp(n)&&io(n.arrayValue,this.value)}}class dD extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&io(this.value.arrayValue,n)}}class hD extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!io(this.value.arrayValue,n)}}class fD extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>io(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n=null,s=[],i=[],a=null,r=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=a,this.startAt=r,this.endAt=c,this.Te=null}}function ab(t,e=null,n=[],s=[],i=null,a=null,r=null){return new mD(t,e,n,s,i,a,r)}function eg(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>fm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ur(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ur(s)).join(",")),e.Te=n}return e.Te}function tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ib(t.startAt,e.startAt)&&ib(t.endAt,e.endAt)}function mm(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n=null,s=[],i=[],a=null,r="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=a,this.limitType=r,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pD(t,e,n,s,i,a,r,c){return new kr(t,e,n,s,i,a,r,c)}function wd(t){return new kr(t)}function rb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Uw(t){return t.collectionGroup!==null}function Dl(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let c=new lt(xt.comparator);return r.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ao(a,s))}),n.has(xt.keyField().canonicalString())||e.Ie.push(new ao(xt.keyField(),s))}return e.Ie}function Dn(t){const e=re(t);return e.Ee||(e.Ee=gD(e,Dl(t))),e.Ee}function gD(t,e){if(t.limitType==="F")return ab(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new ao(i.field,a)});const n=t.endAt?new ku(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ku(t.startAt.position,t.startAt.inclusive):null;return ab(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function pm(t,e){const n=t.filters.concat([e]);return new kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gm(t,e,n){return new kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Td(t,e){return tg(Dn(t),Dn(e))&&t.limitType===e.limitType}function zw(t){return`${eg(Dn(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>Pw(i)).join(", ")}]`),_d(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>ur(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>ur(i)).join(",")),`Target(${s})`}(Dn(t))}; limitType=${t.limitType})`}function Sd(t,e){return e.isFoundDocument()&&function(s,i){const a=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ee.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,i){for(const a of Dl(s))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const a of s.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(r,c,u){const d=sb(r,c,u);return r.inclusive?d<=0:d<0}(s.startAt,Dl(s),i)||s.endAt&&!function(r,c,u){const d=sb(r,c,u);return r.inclusive?d>=0:d>0}(s.endAt,Dl(s),i))}(t,e)}function yD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Bw(t){return(e,n)=>{let s=!1;for(const i of Dl(t)){const a=xD(i,e,n);if(a!==0)return a;s=s||i.field.isKeyField()}return 0}}function xD(t,e,n){const s=t.field.isKeyField()?ee.comparator(e.key,n.key):function(a,r,c){const u=r.data.field(a),d=c.data.field(a);return u!==null&&d!==null?cr(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,a]of s)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,s)=>{for(const[i,a]of s)e(i,a)})}isEmpty(){return Tw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new Fe(ee.comparator);function ps(){return bD}const qw=new Fe(ee.comparator);function hl(...t){let e=qw;for(const n of t)e=e.insert(n.key,n);return e}function Hw(t){let e=qw;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ki(){return Ol()}function Fw(){return Ol()}function Ol(){return new aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const vD=new Fe(ee.comparator),_D=new lt(ee.comparator);function ge(...t){let e=_D;for(const n of t)e=e.add(n);return e}const ED=new lt(pe);function wD(){return ED}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function Gw(t){return{integerValue:""+t}}function TD(t,e){return Jk(e)?Gw(e):ng(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function SD(t,e,n){return t instanceof ro?function(i,a){const r={fields:{[Aw]:{stringValue:Nw},[Cw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Wp(a)&&(a=Ed(a)),a&&(r.fields[jw]=a),{mapValue:r}}(n,e):t instanceof lo?Qw(t,e):t instanceof oo?Yw(t,e):function(i,a){const r=Kw(i,a),c=lb(r)+lb(i.Ae);return hm(r)&&hm(i.Ae)?Gw(c):ng(i.serializer,c)}(t,e)}function ND(t,e,n){return t instanceof lo?Qw(t,e):t instanceof oo?Yw(t,e):n}function Kw(t,e){return t instanceof Du?function(s){return hm(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class ro extends Nd{}class lo extends Nd{constructor(e){super(),this.elements=e}}function Qw(t,e){const n=$w(e);for(const s of t.elements)n.some(i=>Ln(i,s))||n.push(s);return{arrayValue:{values:n}}}class oo extends Nd{constructor(e){super(),this.elements=e}}function Yw(t,e){let n=$w(e);for(const s of t.elements)n=n.filter(i=>!Ln(i,s));return{arrayValue:{values:n}}}class Du extends Nd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lb(t){return Ye(t.integerValue||t.doubleValue)}function $w(t){return Zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.field=e,this.transform=n}}function jD(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof lo&&i instanceof lo||s instanceof oo&&i instanceof oo?or(s.elements,i.elements,Ln):s instanceof Du&&i instanceof Du?Ln(s.Ae,i.Ae):s instanceof ro&&i instanceof ro}(t.transform,e.transform)}class CD{constructor(e,n){this.version=e,this.transformResults=n}}class as{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ad{}function Xw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ww(t.key,as.none()):new Io(t.key,t.data,as.none());{const n=t.data,s=ln.empty();let i=new lt(xt.comparator);for(let a of e.fields)if(!i.has(a)){let r=n.field(a);r===null&&a.length>1&&(a=a.popLast(),r=n.field(a)),r===null?s.delete(a):s.set(a,r),i=i.add(a)}return new ra(t.key,s,new xn(i.toArray()),as.none())}}function ID(t,e,n){t instanceof Io?function(i,a,r){const c=i.value.clone(),u=cb(i.fieldTransforms,a,r.transformResults);c.setAll(u),a.convertToFoundDocument(r.version,c).setHasCommittedMutations()}(t,e,n):t instanceof ra?function(i,a,r){if(!Uc(i.precondition,a))return void a.convertToUnknownDocument(r.version);const c=cb(i.fieldTransforms,a,r.transformResults),u=a.data;u.setAll(Jw(i)),u.setAll(c),a.convertToFoundDocument(r.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,r){a.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function Ml(t,e,n,s){return t instanceof Io?function(a,r,c,u){if(!Uc(a.precondition,r))return c;const d=a.value.clone(),f=ub(a.fieldTransforms,u,r);return d.setAll(f),r.convertToFoundDocument(r.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof ra?function(a,r,c,u){if(!Uc(a.precondition,r))return c;const d=ub(a.fieldTransforms,u,r),f=r.data;return f.setAll(Jw(a)),f.setAll(d),r.convertToFoundDocument(r.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(a,r,c){return Uc(a.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):c}(t,e,n)}function RD(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),a=Kw(s.transform,i||null);a!=null&&(n===null&&(n=ln.empty()),n.set(s.field,a))}return n||null}function ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&or(s,i,(a,r)=>jD(a,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Io extends Ad{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ra extends Ad{constructor(e,n,s,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Jw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function cb(t,e,n){const s=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],r=a.transform,c=e.data.field(a.field);s.set(a.field,ND(r,c,n[i]))}return s}function ub(t,e,n){const s=new Map;for(const i of t){const a=i.transform,r=n.data.field(i.field);s.set(i.field,SD(a,r,e))}return s}class Ww extends Ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kD extends Ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ID(a,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ml(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ml(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Fw();return this.mutations.forEach(i=>{const a=e.get(i.key),r=a.overlayedDocument;let c=this.applyToLocalView(r,a.mutatedFields);c=n.has(i.key)?null:c;const u=Xw(r,c);u!==null&&s.set(i.key,u),r.isValidDocument()||r.convertToNoDocument(ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&or(this.mutations,e.mutations,(n,s)=>ob(n,s))&&or(this.baseMutations,e.baseMutations,(n,s)=>ob(n,s))}}class sg{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Se(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return vD}();const a=e.mutations;for(let r=0;r<a.length;r++)i=i.insert(a[r].key,s[r].version);return new sg(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,ve;function VD(t){switch(t){case z.OK:return se(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function Zw(t){if(t===void 0)return ms("GRPC error has no .code"),z.UNKNOWN;switch(t){case Je.OK:return z.OK;case Je.CANCELLED:return z.CANCELLED;case Je.UNKNOWN:return z.UNKNOWN;case Je.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Je.INTERNAL:return z.INTERNAL;case Je.UNAVAILABLE:return z.UNAVAILABLE;case Je.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Je.NOT_FOUND:return z.NOT_FOUND;case Je.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Je.ABORTED:return z.ABORTED;case Je.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Je.DATA_LOSS:return z.DATA_LOSS;default:return se(39323,{code:t})}}(ve=Je||(Je={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new ai([4294967295,4294967295],0);function db(t){const e=PD().encode(t),n=new fw;return n.update(e),new Uint8Array(n.digest())}function hb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ai([n,s],0),new ai([i,a],0)]}class ig{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new fl(`Invalid padding: ${n}`);if(s<0)throw new fl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new fl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new fl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ai.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(ai.fromNumber(s)));return i.compare(LD)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=db(e),[s,i]=hb(n);for(let a=0;a<this.hashCount;a++){const r=this.ye(s,i,a);if(!this.we(r))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),r=new ig(a,i,n);return s.forEach(c=>r.insert(c)),r}insert(e){if(this.ge===0)return;const n=db(e),[s,i]=hb(n);for(let a=0;a<this.hashCount;a++){const r=this.ye(s,i,a);this.Se(r)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,s,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Ro.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new jd(ae.min(),i,new Fe(pe),ps(),ge())}}class Ro{constructor(e,n,s,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ro(s,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,s,i){this.be=e,this.removedTargetIds=n,this.key=s,this.De=i}}class eT{constructor(e,n){this.targetId=e,this.Ce=n}}class tT{constructor(e,n,s=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class fb{constructor(){this.ve=0,this.Fe=mb(),this.Me=_t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),s=ge();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:se(38017,{changeType:a})}}),new Ro(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=mb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UD{constructor(e){this.Ge=e,this.ze=new Map,this.je=ps(),this.Je=mc(),this.He=mc(),this.Ye=new Fe(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(mm(a))if(s===0){const r=new ee(a.path);this.et(n,r,St.newNoDocument(r,ae.min()))}else Se(s===1,20013,{expectedCount:s});else{const r=this._t(n);if(r!==s){const c=this.ut(e),u=c?this.ct(c,e,r):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let r,c;try{r=mi(s).toUint8Array()}catch(u){if(u instanceof Sw)return lr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ig(r,i,a)}catch(u){return lr(u instanceof fl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(a=>{const r=this.Ge.ht(),c=`projects/${r.projectId}/databases/${r.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,r)=>{const c=this.ot(r);if(c){if(a.current&&mm(c.target)){const u=new ee(c.target.path);this.It(u).has(r)||this.Et(r,u)||this.et(r,u,St.newNoDocument(u,e))}a.Be&&(n.set(r,a.ke()),a.qe())}});let s=ge();this.He.forEach((a,r)=>{let c=!0;r.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(a))}),this.je.forEach((a,r)=>r.setReadTime(e));const i=new jd(e,n,this.Ye,this.je,s);return this.je=ps(),this.Je=mc(),this.He=mc(),this.Ye=new Fe(pe),i}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new lt(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new lt(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function mc(){return new Fe(ee.comparator)}function mb(){return new Fe(ee.comparator)}const zD={asc:"ASCENDING",desc:"DESCENDING"},BD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qD={and:"AND",or:"OR"};class HD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ym(t,e){return t.useProto3Json||_d(e)?e:{value:e}}function Ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FD(t,e){return Ou(t,e.toTimestamp())}function On(t){return Se(!!t,49232),ae.fromTimestamp(function(n){const s=fi(n);return new Ue(s.seconds,s.nanos)}(t))}function ag(t,e){return xm(t,e).canonicalString()}function xm(t,e){const n=function(i){return new De(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sT(t){const e=De.fromString(t);return Se(oT(e),10190,{key:e.toString()}),e}function bm(t,e){return ag(t.databaseId,e.path)}function $h(t,e){const n=sT(e);if(n.get(1)!==t.databaseId.projectId)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(aT(n))}function iT(t,e){return ag(t.databaseId,e)}function GD(t){const e=sT(t);return e.length===4?De.emptyPath():aT(e)}function vm(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aT(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pb(t,e,n){return{name:bm(t,e),fields:n.value.mapValue.fields}}function KD(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Se(f===void 0||typeof f=="string",58123),_t.fromBase64String(f||"")):(Se(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),_t.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),r=e.targetChange.cause,c=r&&function(d){const f=d.code===void 0?z.UNKNOWN:Zw(d.code);return new X(f,d.message||"")}(r);n=new tT(s,i,a,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=$h(t,s.document.name),a=On(s.document.updateTime),r=s.document.createTime?On(s.document.createTime):ae.min(),c=new ln({mapValue:{fields:s.document.fields}}),u=St.newFoundDocument(i,a,r,c),d=s.targetIds||[],f=s.removedTargetIds||[];n=new zc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=$h(t,s.document),a=s.readTime?On(s.readTime):ae.min(),r=St.newNoDocument(i,a),c=s.removedTargetIds||[];n=new zc([],c,r.key,r)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=$h(t,s.document),a=s.removedTargetIds||[];n=new zc([],a,i,null)}else{if(!("filter"in e))return se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:a}=s,r=new MD(i,a),c=s.targetId;n=new eT(c,r)}}return n}function QD(t,e){let n;if(e instanceof Io)n={update:pb(t,e.key,e.value)};else if(e instanceof Ww)n={delete:bm(t,e.key)};else if(e instanceof ra)n={update:pb(t,e.key,e.data),updateMask:n3(e.fieldMask)};else{if(!(e instanceof kD))return se(16599,{Vt:e.type});n={verify:bm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(a,r){const c=r.transform;if(c instanceof ro)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof lo)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof oo)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Du)return{fieldPath:r.field.canonicalString(),increment:c.Ae};throw se(20930,{transform:r.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:FD(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:se(27497)}(t,e.precondition)),n}function YD(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(i,a){let r=i.updateTime?On(i.updateTime):On(a);return r.isEqual(ae.min())&&(r=On(a)),new CD(r,i.transformResults||[])}(n,e))):[]}function $D(t,e){return{documents:[iT(t,e.path)]}}function XD(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=iT(t,i);const a=function(d){if(d.length!==0)return lT(_n.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const r=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ba(g.field),direction:ZD(g.dir)}}(f))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const c=ym(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function JD(t){let e=GD(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Se(s===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(m){const g=rT(m);return g instanceof _n&&Mw(g)?g.getFilters():[g]}(n.where));let r=[];n.orderBy&&(r=function(m){return m.map(g=>function(C){return new ao(va(C.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,_d(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new ku(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new ku(x,g)}(n.endAt)),pD(e,i,r,a,c,"F",u,d)}function WD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=va(n.unaryFilter.field);return tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=va(n.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=va(n.unaryFilter.field);return tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=va(n.unaryFilter.field);return tt.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return tt.create(va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(s=>rT(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function ZD(t){return zD[t]}function e3(t){return BD[t]}function t3(t){return qD[t]}function ba(t){return{fieldPath:t.canonicalString()}}function va(t){return xt.fromServerFormat(t.fieldPath)}function lT(t){return t instanceof tt?function(n){if(n.op==="=="){if(nb(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NAN"}};if(tb(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nb(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NAN"}};if(tb(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(n.field),op:e3(n.op),value:n.value}}}(t):t instanceof _n?function(n){const s=n.getFilters().map(i=>lT(i));return s.length===1?s[0]:{compositeFilter:{op:t3(n.op),filters:s}}}(t):se(54877,{filter:t})}function n3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,s,i,a=ae.min(),r=ae.min(),c=_t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.yt=e}}function i3(t){const e=JD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.Cn=new r3}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(hi.min())}updateCollectionGroup(e,n,s){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class r3{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new lt(De.comparator),a=!i.has(s);return this.index[n]=i.add(s),a}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new lt(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cT=41943040;class Lt{static withCacheSize(e){return new Lt(e,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(cT,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new dr(0)}static cr(){return new dr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="LruGarbageCollector",l3=1048576;function xb([t,e],[n,s]){const i=pe(t,n);return i===0?pe(e,s):i}class o3{constructor(e){this.Ir=e,this.buffer=new lt(xb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();xb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c3{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(yb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rr(n)?J(yb,"Ignoring IndexedDB error during garbage collection: ",n):await Ir(n)}await this.Vr(3e5)})}}class u3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return q.resolve(vd.ce);const s=new o3(n);return this.mr.forEachTarget(e,i=>s.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>s.Ar(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(gb)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,i,a,r,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,r=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(s=m,c=Date.now(),this.removeTargets(e,s,n))).next(m=>(a=m,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),ya()<=me.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${r-f}ms
	Determined least recently used ${i} in `+(c-r)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m})))}}function d3(t,e){return new u3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.changes=new aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?q.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&Ml(s.mutation,i,xn.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ge()){const i=ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(a=>{let r=hl();return a.forEach((c,u)=>{r=r.insert(c,u.overlayedDocument)}),r}))}getOverlayedDocuments(e,n){const s=ki();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ge()))}populateOverlays(e,n,s){const i=[];return s.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((r,c)=>{n.set(r,c)})})}computeViews(e,n,s,i){let a=ps();const r=Ol(),c=function(){return Ol()}();return n.forEach((u,d)=>{const f=s.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof ra)?a=a.insert(d.key,d):f!==void 0?(r.set(d.key,f.mutation.getFieldMask()),Ml(f.mutation,d,f.mutation.getFieldMask(),Ue.now())):r.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>r.set(d,f)),n.forEach((d,f)=>c.set(d,new f3(f,r.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const s=Ol();let i=new Fe((r,c)=>r-c),a=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>{for(const c of r)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=s.get(u)||xn.empty();f=c.applyToLocalView(d,f),s.set(u,f);const m=(i.get(c.batchId)||ge()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const r=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=Fw();f.forEach(g=>{if(!a.has(g)){const x=Xw(n.get(g),s.get(g));x!==null&&m.set(g,x),a=a.add(g)}}),r.push(this.documentOverlayCache.saveOverlays(e,d,m))}return q.waitFor(r)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(r){return ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Uw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(a=>{const r=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-a.size):q.resolve(ki());let c=to,u=a;return r.next(d=>q.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(f)?q.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,ge())).next(f=>({batchId:c,changes:Hw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(s=>{let i=hl();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const a=n.collectionGroup;let r=hl();return this.indexManager.getCollectionParents(e,a).next(c=>q.forEach(c,u=>{const d=function(m,g){return new kr(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(f=>{f.forEach((m,g)=>{r=r.insert(m,g)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,s,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(r=>(a=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,a,i))).next(r=>{a.forEach((u,d)=>{const f=d.getKey();r.get(f)===null&&(r=r.insert(f,St.newInvalidDocument(f)))});let c=hl();return r.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Ml(f.mutation,d,xn.empty(),Ue.now()),Sd(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:i3(i.bundledQuery),readTime:On(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this.overlays=new Fe(ee.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ki();return q.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&s.set(i,a)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,a)=>{this.St(e,n,a)}),q.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(s)),q.resolve()}getOverlaysForCollection(e,n,s){const i=ki(),a=n.length+1,r=new ee(n.child("")),c=this.overlays.getIteratorFrom(r);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>s&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let a=new Fe((d,f)=>d-f);const r=this.overlays.getIterator();for(;r.hasNext();){const d=r.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let f=a.get(d.largestBatchId);f===null&&(f=ki(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ki(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return q.resolve(c)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const r=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,r)}this.overlays=this.overlays.insert(s.key,new OD(n,s));let a=this.qr.get(n);a===void 0&&(a=ge(),this.qr.set(n,a)),this.qr.set(n,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.Qr=new lt(ut.$r),this.Ur=new lt(ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ut(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new ut(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ee(new De([])),s=new ut(n,e),i=new ut(n,e+1),a=[];return this.Ur.forEachInRange([s,i],r=>{this.Gr(r),a.push(r.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ee(new De([])),s=new ut(n,e),i=new ut(n,e+1);let a=ge();return this.Ur.forEachInRange([s,i],r=>{a=a.add(r.key)}),a}containsKey(e){const n=new ut(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ee.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new lt(ut.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new DD(a,n,s,i);this.mutationQueue.push(r);for(const c of i)this.Zr=this.Zr.add(new ut(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(r)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ei(s),a=i<0?0:i;return q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Jp:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ut(n,0),i=new ut(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([s,i],r=>{const c=this.Xr(r.Yr);a.push(c)}),q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new lt(pe);return n.forEach(i=>{const a=new ut(i,0),r=new ut(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,r],c=>{s=s.add(c.Yr)})}),q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let a=s;ee.isDocumentKey(a)||(a=a.child(""));const r=new ut(new ee(a),0);let c=new lt(pe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)},r),q.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(s=>{const i=this.Xr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return q.forEach(n.mutations,i=>{const a=new ut(i.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new ut(n,0),i=this.Zr.firstAfterOrEqual(s);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.ri=e,this.docs=function(){return new Fe(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),a=i?i.size:0,r=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:r}),this.size+=r-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return q.resolve(s?s.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let s=ps();return n.forEach(i=>{const a=this.docs.get(i);s=s.insert(i,a?a.document.mutableCopy():St.newInvalidDocument(i))}),q.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let a=ps();const r=n.path,c=new ee(r.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!r.isPrefixOf(d.path))break;d.path.length>r.length+1||Qk(Kk(f),s)<=0||(i.has(f.key)||Sd(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return q.resolve(a)}getAllFromCollectionGroup(e,n,s,i){se(9500)}ii(e,n){return q.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new v3(this)}getSize(e){return q.resolve(this.size)}}class v3 extends h3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.persistence=e,this.si=new aa(n=>eg(n),tg),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new rg,this.targetCount=0,this.ai=dr.ur()}forEachTarget(e,n){return this.si.forEach((s,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new dr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,s){let i=0;const a=[];return this.si.forEach((r,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.si.delete(r),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),q.waitFor(a).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return q.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),q.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(r=>{a.push(i.markPotentiallyOrphaned(e,r))}),q.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return q.resolve(s)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n){this.ui={},this.overlays={},this.ci=new vd(0),this.li=!1,this.li=!0,this.hi=new y3,this.referenceDelegate=e(this),this.Pi=new _3(this),this.indexManager=new a3,this.remoteDocumentCache=function(i){return new b3(i)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new s3(n),this.Ii=new p3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new x3(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){J("MemoryPersistence","Starting transaction:",e);const i=new E3(this.ci.next());return this.referenceDelegate.Ei(),s(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,n){return q.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class E3 extends $k{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ri=new rg,this.Vi=null}static mi(e){return new lg(e)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),q.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,s=>{const i=ee.fromPath(s);return this.gi(e,i).next(a=>{a||n.removeEntry(i,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Mu{constructor(e,n){this.persistence=e,this.pi=new aa(s=>Wk(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=d3(this,n)}static mi(e,n){return new Mu(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(s,i)=>this.br(e,s,i).next(a=>a?q.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,r=>this.br(e,r,n).next(c=>{c||(s++,a.removeEntry(r,ae.min()))})).next(()=>a.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pc(e.data.value)),n}br(e,n,s){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return q.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=i}static As(e,n){let s=ge(),i=ge();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new og(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return sI()?8:Xk(At())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const a={result:null};return this.ys(e,n).next(r=>{a.result=r}).next(()=>{if(!a.result)return this.ws(e,n,i,s).next(r=>{a.result=r})}).next(()=>{if(a.result)return;const r=new w3;return this.Ss(e,n,r).next(c=>{if(a.result=c,this.Vs)return this.bs(e,n,r,c.size)})}).next(()=>a.result)}bs(e,n,s,i){return s.documentReadCount<this.fs?(ya()<=me.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(ya()<=me.DEBUG&&J("QueryEngine","Query:",xa(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(ya()<=me.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):q.resolve())}ys(e,n){if(rb(n))return q.resolve(null);let s=Dn(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gm(n,null,"F"),s=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const r=ge(...a);return this.ps.getDocuments(e,r).next(c=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,r,u.readTime)?this.ys(e,gm(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,s,i){return rb(n)||i.isEqual(ae.min())?q.resolve(null):this.ps.getDocuments(e,s).next(a=>{const r=this.Ds(n,a);return this.Cs(n,r,s,i)?q.resolve(null):(ya()<=me.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xa(n)),this.vs(e,r,n,Gk(i,to)).next(c=>c))})}Ds(e,n){let s=new lt(Bw(e));return n.forEach((i,a)=>{Sd(e,a)&&(s=s.add(a))}),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,s){return ya()<=me.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",xa(n)),this.ps.getDocumentsMatchingQuery(e,n,hi.min(),s)}vs(e,n,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next(a=>(n.forEach(r=>{a=a.insert(r.key,r)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="LocalStore",S3=3e8;class N3{constructor(e,n,s,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Fe(pe),this.xs=new aa(a=>eg(a),tg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function A3(t,e,n,s){return new N3(t,e,n,s)}async function dT(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(a=>{const r=[],c=[];let u=ge();for(const d of i){r.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(s,u).next(d=>({Ls:d,removedBatchIds:r,addedBatchIds:c}))})})}function j3(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let x=q.resolve();return g.forEach(C=>{x=x.next(()=>f.getEntry(u,C)).next(I=>{const D=d.docVersions.get(C);Se(D!==null,48541),I.version.compareTo(D)<0&&(m.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),f.addEntry(I)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,s,e,a).next(()=>a.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let u=ge();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function hT(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function C3(t,e){const n=re(t),s=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const r=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=i.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(a,f.addedDocuments,m)));let x=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(_t.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,s)),i=i.insert(m,x),function(I,D,T){return I.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=S3?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,x,f)&&c.push(n.Pi.updateTargetData(a,x))});let u=ps(),d=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(I3(a,r,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!s.isEqual(ae.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next(m=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,s));c.push(f)}return q.waitFor(c).next(()=>r.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.Ms=i,a))}function I3(t,e,n){let s=ge(),i=ge();return n.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let r=ps();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(c,u.readTime),r=r.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),r=r.insert(c,u)):J(cg,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:r,qs:i}})}function R3(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Jp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function k3(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Pi.getTargetData(s,e).next(a=>a?(i=a,q.resolve(i)):n.Pi.allocateTargetId(s).next(r=>(i=new Fs(e,r,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function _m(t,e,n){const s=re(t),i=s.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,r=>s.persistence.referenceDelegate.removeTarget(r,i))}catch(r){if(!Rr(r))throw r;J(cg,`Failed to update sequence numbers for target ${e}: ${r}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function bb(t,e,n){const s=re(t);let i=ae.min(),a=ge();return s.persistence.runTransaction("Execute query","readwrite",r=>function(u,d,f){const m=re(u),g=m.xs.get(f);return g!==void 0?q.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(s,r,Dn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(r,c.targetId).next(u=>{a=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(r,e,n?i:ae.min(),n?a:ge())).next(c=>(D3(s,yD(e),c),{documents:c,Qs:a})))}function D3(t,e,n){let s=t.Os.get(e)||ae.min();n.forEach((i,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.Os.set(e,s)}class vb{constructor(){this.activeTargetIds=wD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O3{constructor(){this.Mo=new vb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="ConnectivityMonitor";class Eb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(_b,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(_b,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc=null;function Em(){return pc===null?pc=function(){return 268435456+Math.round(2147483648*Math.random())}():pc++,"0x"+pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="RestConnection",V3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===Iu?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,n,s,i,a){const r=Em(),c=this.zo(e,n.toUriEncodedString());J(Xh,`Sending RPC '${e}' ${r}:`,c,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),f=Sr(d);return this.Jo(e,c,u,s,f).then(m=>(J(Xh,`Received RPC '${e}' ${r}: `,m),m),m=>{throw lr(Xh,`RPC '${e}' ${r} failed with error: `,m,"url: ",c,"request:",s),m})}Ho(e,n,s,i,a,r){return this.Go(e,n,s,i,a)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),s&&s.headers.forEach((i,a)=>e[a]=i)}zo(e,n){const s=V3[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class U3 extends P3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,a){const r=Em();return new Promise((c,u)=>{const d=new mw;d.setWithCredentials(!0),d.listenOnce(pw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vc.NO_ERROR:const m=d.getResponseJson();J(wt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(m)),c(m);break;case Vc.TIMEOUT:J(wt,`RPC '${e}' ${r} timed out`),u(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const g=d.getStatus();if(J(wt,`RPC '${e}' ${r} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x==null?void 0:x.error;if(C&&C.status&&C.message){const I=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(_)>=0?_:z.UNKNOWN}(C.status);u(new X(I,C.message))}else u(new X(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new X(z.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:r,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{J(wt,`RPC '${e}' ${r} completed.`)}});const f=JSON.stringify(i);J(wt,`RPC '${e}' ${r} sending request:`,i),d.send(n,"POST",f,s,15)})}T_(e,n,s){const i=Em(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=xw(),c=yw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const f=a.join("");J(wt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=r.createWebChannel(f,u);this.I_(m);let g=!1,x=!1;const C=new L3({Yo:D=>{x?J(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(J(wt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),J(wt,`RPC '${e}' stream ${i} sending:`,D),m.send(D))},Zo:()=>m.close()}),I=(D,T,_)=>{D.listen(T,w=>{try{_(w)}catch(R){setTimeout(()=>{throw R},0)}})};return I(m,dl.EventType.OPEN,()=>{x||(J(wt,`RPC '${e}' stream ${i} transport opened.`),C.o_())}),I(m,dl.EventType.CLOSE,()=>{x||(x=!0,J(wt,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(m))}),I(m,dl.EventType.ERROR,D=>{x||(x=!0,lr(wt,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),C.a_(new X(z.UNAVAILABLE,"The operation could not be completed")))}),I(m,dl.EventType.MESSAGE,D=>{var T;if(!x){const _=D.data[0];Se(!!_,16349);const w=_,R=(w==null?void 0:w.error)||((T=w[0])==null?void 0:T.error);if(R){J(wt,`RPC '${e}' stream ${i} received error:`,R);const M=R.status;let U=function(b){const S=Je[b];if(S!==void 0)return Zw(S)}(M),v=R.message;U===void 0&&(U=z.INTERNAL,v="Unknown error status: "+M+" with message "+R.message),x=!0,C.a_(new X(U,v)),m.close()}else J(wt,`RPC '${e}' stream ${i} received:`,_),C.u_(_)}}),I(c,gw.STAT_EVENT,D=>{D.stat===cm.PROXY?J(wt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===cm.NOPROXY&&J(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Jh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){return new HD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,s=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="PersistentStream";class mT{constructor(e,n,s,i,a,r,c,u){this.Mi=e,this.S_=s,this.b_=i,this.connection=a,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(ms(n.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new X(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(wb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(wb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z3 extends mT{constructor(e,n,s,i,a,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,r),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=KD(this.serializer,e),s=function(a){if(!("targetChange"in a))return ae.min();const r=a.targetChange;return r.targetIds&&r.targetIds.length?ae.min():r.readTime?On(r.readTime):ae.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=vm(this.serializer),n.addTarget=function(a,r){let c;const u=r.target;if(c=mm(u)?{documents:$D(a,u)}:{query:XD(a,u).ft},c.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){c.resumeToken=nT(a,r.resumeToken);const d=ym(a,r.expectedCount);d!==null&&(c.expectedCount=d)}else if(r.snapshotVersion.compareTo(ae.min())>0){c.readTime=Ou(a,r.snapshotVersion.toTimestamp());const d=ym(a,r.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const s=WD(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=vm(this.serializer),n.removeTarget=e,this.q_(n)}}class B3 extends mT{constructor(e,n,s,i,a,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,r),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YD(e.writeResults,e.commitTime),s=On(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=vm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>QD(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{}class H3 extends q3{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,r])=>this.connection.Go(e,xm(n,s),i,a,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(z.UNKNOWN,a.toString())})}Ho(e,n,s,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,c])=>this.connection.Ho(e,xm(n,s),i,r,c,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new X(z.UNKNOWN,r.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class F3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="RemoteStore";class G3{constructor(e,n,s,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(r=>{s.enqueueAndForget(async()=>{la(this)&&(J(Xi,"Restarting streams for network reachability change."),await async function(u){const d=re(u);d.Ea.add(4),await ko(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Id(d)}(this))})}),this.Ra=new F3(s,i)}}async function Id(t){if(la(t))for(const e of t.da)await e(!0)}async function ko(t){for(const e of t.da)await e(!1)}function pT(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fg(n)?hg(n):Dr(n).O_()&&dg(n,e))}function ug(t,e){const n=re(t),s=Dr(n);n.Ia.delete(e),s.O_()&&gT(n,e),n.Ia.size===0&&(s.O_()?s.L_():la(n)&&n.Ra.set("Unknown"))}function dg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Dr(t).Y_(e)}function gT(t,e){t.Va.Ue(e),Dr(t).Z_(e)}function hg(t){t.Va=new UD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Dr(t).start(),t.Ra.ua()}function fg(t){return la(t)&&!Dr(t).x_()&&t.Ia.size>0}function la(t){return re(t).Ea.size===0}function yT(t){t.Va=void 0}async function K3(t){t.Ra.set("Online")}async function Q3(t){t.Ia.forEach((e,n)=>{dg(t,e)})}async function Y3(t,e){yT(t),fg(t)?(t.Ra.ha(e),hg(t)):t.Ra.set("Unknown")}async function $3(t,e,n){if(t.Ra.set("Online"),e instanceof tT&&e.state===2&&e.cause)try{await async function(i,a){const r=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,r),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(s){J(Xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vu(t,s)}else if(e instanceof zc?t.Va.Ze(e):e instanceof eT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const s=await hT(t.localStore);n.compareTo(s)>=0&&await function(a,r){const c=a.Va.Tt(r);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.Ia.get(d);f&&a.Ia.set(d,f.withResumeToken(u.resumeToken,r))}}),c.targetMismatches.forEach((u,d)=>{const f=a.Ia.get(u);if(!f)return;a.Ia.set(u,f.withResumeToken(_t.EMPTY_BYTE_STRING,f.snapshotVersion)),gT(a,u);const m=new Fs(f.target,u,d,f.sequenceNumber);dg(a,m)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(s){J(Xi,"Failed to raise snapshot:",s),await Vu(t,s)}}async function Vu(t,e,n){if(!Rr(e))throw e;t.Ea.add(1),await ko(t),t.Ra.set("Offline"),n||(n=()=>hT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Xi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Id(t)})}function xT(t,e){return e().catch(n=>Vu(t,n,e))}async function Rd(t){const e=re(t),n=gi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jp;for(;X3(e);)try{const i=await R3(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,J3(e,i)}catch(i){await Vu(e,i)}bT(e)&&vT(e)}function X3(t){return la(t)&&t.Ta.length<10}function J3(t,e){t.Ta.push(e);const n=gi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bT(t){return la(t)&&!gi(t).x_()&&t.Ta.length>0}function vT(t){gi(t).start()}async function W3(t){gi(t).ra()}async function Z3(t){const e=gi(t);for(const n of t.Ta)e.ea(n.mutations)}async function e6(t,e,n){const s=t.Ta.shift(),i=sg.from(s,e,n);await xT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rd(t)}async function t6(t,e){e&&gi(t).X_&&await async function(s,i){if(function(r){return VD(r)&&r!==z.ABORTED}(i.code)){const a=s.Ta.shift();gi(s).B_(),await xT(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Rd(s)}}(t,e),bT(t)&&vT(t)}async function Tb(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),J(Xi,"RemoteStore received new credentials");const s=la(n);n.Ea.add(3),await ko(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Id(n)}async function n6(t,e){const n=re(t);e?(n.Ea.delete(2),await Id(n)):e||(n.Ea.add(2),await ko(n),n.Ra.set("Unknown"))}function Dr(t){return t.ma||(t.ma=function(n,s,i){const a=re(n);return a.sa(),new z3(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:K3.bind(null,t),t_:Q3.bind(null,t),r_:Y3.bind(null,t),H_:$3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),fg(t)?hg(t):t.Ra.set("Unknown")):(await t.ma.stop(),yT(t))})),t.ma}function gi(t){return t.fa||(t.fa=function(n,s,i){const a=re(n);return a.sa(),new B3(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:W3.bind(null,t),r_:t6.bind(null,t),ta:Z3.bind(null,t),na:e6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rd(t)):(await t.fa.stop(),t.Ta.length>0&&(J(Xi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,s,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=a,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,a){const r=Date.now()+s,c=new mg(e,n,r,i,a);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(t,e){if(ms("AsyncQueue",`${e}: ${t}`),Rr(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{static emptySet(e){return new Fa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ee.comparator(n.key,s.key):(n,s)=>ee.comparator(n.key,s.key),this.keyedMap=hl(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Fa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.ga=new Fe(ee.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class hr{constructor(e,n,s,i,a,r,c,u,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=a,this.fromCache=r,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,a){const r=[];return n.forEach(c=>{r.push({type:0,doc:c})}),new hr(e,n,Fa.emptySet(n),r,s,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class i6{constructor(){this.queries=Nb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=re(n),a=i.queries;i.queries=Nb(),a.forEach((r,c)=>{for(const u of c.Sa)u.onError(s)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function Nb(){return new aa(t=>zw(t),Td)}async function _T(t,e){const n=re(t);let s=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(s=2):(a=new s6,s=e.Da()?0:1);try{switch(s){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(r){const c=pg(r,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&gg(n)}async function ET(t,e){const n=re(t),s=e.query;let i=3;const a=n.queries.get(s);if(a){const r=a.Sa.indexOf(e);r>=0&&(a.Sa.splice(r,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function a6(t,e){const n=re(t);let s=!1;for(const i of e){const a=i.query,r=n.queries.get(a);if(r){for(const c of r.Sa)c.Fa(i)&&(s=!0);r.wa=i}}s&&gg(n)}function r6(t,e,n){const s=re(t),i=s.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);s.queries.delete(e)}function gg(t){t.Ca.forEach(e=>{e.next()})}var wm,Ab;(Ab=wm||(wm={})).Ma="default",Ab.Cache="cache";class wT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new hr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=hr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.key=e}}class ST{constructor(e){this.key=e}}class l6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=Bw(e),this.tu=new Fa(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Sb,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,r=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const g=i.get(f),x=Sd(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),I=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let D=!1;g&&x?g.data.isEqual(x.data)?C!==I&&(s.track({type:3,doc:x}),D=!0):this.su(g,x)||(s.track({type:2,doc:x}),D=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!g&&x?(s.track({type:0,doc:x}),D=!0):g&&!x&&(s.track({type:1,doc:g}),D=!0,(u||d)&&(c=!0)),D&&(x?(r=r.add(x),a=I?a.add(f):a.delete(f)):(r=r.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;r.size>this.query.limit;){const f=this.query.limitType==="F"?r.last():r.first();r=r.delete(f.key),a=a.delete(f.key),s.track({type:1,doc:f})}return{tu:r,iu:s,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const r=e.iu.ya();r.sort((f,m)=>function(x,C){const I=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:D})}};return I(x)-I(C)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(s),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,r.length!==0||d?{snapshot:new hr(this.query,e.tu,a,r,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new ST(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new TT(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return hr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yg="SyncEngine";class o6{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class c6{constructor(e){this.key=e,this.hu=!1}}class u6{constructor(e,n,s,i,a,r){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=r,this.Pu={},this.Tu=new aa(c=>zw(c),Td),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(ee.comparator),this.Au=new Map,this.Ru=new rg,this.Vu={},this.mu=new Map,this.fu=dr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function d6(t,e,n=!0){const s=RT(t);let i;const a=s.Tu.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await NT(s,e,n,!0),i}async function h6(t,e){const n=RT(t);await NT(n,e,!0,!1)}async function NT(t,e,n,s){const i=await k3(t.localStore,Dn(e)),a=i.targetId,r=t.sharedClientState.addLocalQueryTarget(a,n);let c;return s&&(c=await f6(t,e,a,r==="current",i.resumeToken)),t.isPrimaryClient&&n&&pT(t.remoteStore,i),c}async function f6(t,e,n,s,i){t.pu=(m,g,x)=>async function(I,D,T,_){let w=D.view.ru(T);w.Cs&&(w=await bb(I.localStore,D.query,!1).then(({documents:v})=>D.view.ru(v,w)));const R=_&&_.targetChanges.get(D.targetId),M=_&&_.targetMismatches.get(D.targetId)!=null,U=D.view.applyChanges(w,I.isPrimaryClient,R,M);return Cb(I,D.targetId,U.au),U.snapshot}(t,m,g,x);const a=await bb(t.localStore,e,!0),r=new l6(e,a.Qs),c=r.ru(a.documents),u=Ro.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=r.applyChanges(c,t.isPrimaryClient,u);Cb(t,n,d.au);const f=new o6(e,n,r);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function m6(t,e,n){const s=re(t),i=s.Tu.get(e),a=s.Iu.get(i.targetId);if(a.length>1)return s.Iu.set(i.targetId,a.filter(r=>!Td(r,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await _m(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&ug(s.remoteStore,i.targetId),Tm(s,i.targetId)}).catch(Ir)):(Tm(s,i.targetId),await _m(s.localStore,i.targetId,!0))}async function p6(t,e){const n=re(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ug(n.remoteStore,s.targetId))}async function g6(t,e,n){const s=w6(t);try{const i=await function(r,c){const u=re(r),d=Ue.now(),f=c.reduce((x,C)=>x.add(C.key),ge());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=ps(),I=ge();return u.Ns.getEntries(x,f).next(D=>{C=D,C.forEach((T,_)=>{_.isValidDocument()||(I=I.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,C)).next(D=>{m=D;const T=[];for(const _ of c){const w=RD(_,m.get(_.key).overlayedDocument);w!=null&&T.push(new ra(_.key,w,kw(w.value.mapValue),as.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,T,c)}).next(D=>{g=D;const T=D.applyToLocalDocumentSet(m,I);return u.documentOverlayCache.saveOverlays(x,D.batchId,T)})}).then(()=>({batchId:g.batchId,changes:Hw(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(r,c,u){let d=r.Vu[r.currentUser.toKey()];d||(d=new Fe(pe)),d=d.insert(c,u),r.Vu[r.currentUser.toKey()]=d}(s,i.batchId,n),await Do(s,i.changes),await Rd(s.remoteStore)}catch(i){const a=pg(i,"Failed to persist write");n.reject(a)}}async function AT(t,e){const n=re(t);try{const s=await C3(n.localStore,e);e.targetChanges.forEach((i,a)=>{const r=n.Au.get(a);r&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?r.hu=!0:i.modifiedDocuments.size>0?Se(r.hu,14607):i.removedDocuments.size>0&&(Se(r.hu,42227),r.hu=!1))}),await Do(n,s,e)}catch(s){await Ir(s)}}function jb(t,e,n){const s=re(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((a,r)=>{const c=r.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(r,c){const u=re(r);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&gg(u)}(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function y6(t,e,n){const s=re(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),a=i&&i.key;if(a){let r=new Fe(ee.comparator);r=r.insert(a,St.newNoDocument(a,ae.min()));const c=ge().add(a),u=new jd(ae.min(),new Map,new Fe(pe),r,c);await AT(s,u),s.du=s.du.remove(a),s.Au.delete(e),xg(s)}else await _m(s.localStore,e,!1).then(()=>Tm(s,e,n)).catch(Ir)}async function x6(t,e){const n=re(t),s=e.batch.batchId;try{const i=await j3(n.localStore,e);CT(n,s,null),jT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Do(n,i)}catch(i){await Ir(i)}}async function b6(t,e,n){const s=re(t);try{const i=await function(r,c){const u=re(r);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Se(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(s.localStore,e);CT(s,e,n),jT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Do(s,i)}catch(i){await Ir(i)}}function jT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function CT(t,e,n){const s=re(t);let i=s.Vu[s.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Tm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||IT(t,s)})}function IT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ug(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xg(t))}function Cb(t,e,n){for(const s of n)s instanceof TT?(t.Ru.addReference(s.key,e),v6(t,s)):s instanceof ST?(J(yg,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||IT(t,s.key)):se(19791,{wu:s})}function v6(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(J(yg,"New document in limbo: "+n),t.Eu.add(s),xg(t))}function xg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(De.fromString(e)),s=t.fu.next();t.Au.set(s,new c6(n)),t.du=t.du.insert(n,s),pT(t.remoteStore,new Fs(Dn(wd(n.path)),s,"TargetPurposeLimboResolution",vd.ce))}}async function Do(t,e,n){const s=re(t),i=[],a=[],r=[];s.Tu.isEmpty()||(s.Tu.forEach((c,u)=>{r.push(s.pu(u,e,n).then(d=>{var f;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=og.As(u.targetId,d);a.push(m)}}))}),await Promise.all(r),s.Pu.H_(i),await async function(u,d){const f=re(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(d,g=>q.forEach(g.Es,x=>f.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>q.forEach(g.ds,x=>f.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!Rr(m))throw m;J(cg,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=f.Ms.get(g),C=x.snapshotVersion,I=x.withLastLimboFreeSnapshotVersion(C);f.Ms=f.Ms.insert(g,I)}}}(s.localStore,a))}async function _6(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){J(yg,"User change. New user:",e.toKey());const s=await dT(n.localStore,e);n.currentUser=e,function(a,r){a.mu.forEach(c=>{c.forEach(u=>{u.reject(new X(z.CANCELLED,r))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Do(n,s.Ls)}}function E6(t,e){const n=re(t),s=n.Au.get(e);if(s&&s.hu)return ge().add(s.key);{let i=ge();const a=n.Iu.get(e);if(!a)return i;for(const r of a){const c=n.Tu.get(r);i=i.unionWith(c.view.nu)}return i}}function RT(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y6.bind(null,e),e.Pu.H_=a6.bind(null,e.eventManager),e.Pu.yu=r6.bind(null,e.eventManager),e}function w6(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b6.bind(null,e),e}class Pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return A3(this.persistence,new T3,e.initialUser,this.serializer)}Cu(e){return new uT(lg.mi,this.serializer)}Du(e){return new O3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pu.provider={build:()=>new Pu};class T6 extends Pu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof Mu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new c3(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new uT(s=>Mu.mi(s,n),this.serializer)}}class Sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>jb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_6.bind(null,this.syncEngine),await n6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new i6}()}createDatastore(e){const n=Cd(e.databaseInfo.databaseId),s=function(a){return new U3(a)}(e.databaseInfo);return function(a,r,c,u){return new H3(a,r,c,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,a,r,c){return new G3(s,i,a,r,c)}(this.localStore,this.datastore,e.asyncQueue,n=>jb(this.syncEngine,n,0),function(){return Eb.v()?new Eb:new M3}())}createSyncEngine(e,n){return function(i,a,r,c,u,d,f){const m=new u6(i,a,r,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=re(i);J(Xi,"RemoteStore shutting down."),a.Ea.add(5),await ko(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="FirestoreClient";class S6{constructor(e,n,s,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Tt.UNAUTHENTICATED,this.clientId=Xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async r=>{J(yi,"Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(J(yi,"Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=pg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Wh(t,e){t.asyncQueue.verifyOperationInProgress(),J(yi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await dT(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ib(t,e){t.asyncQueue.verifyOperationInProgress();const n=await N6(t);J(yi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Tb(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Tb(e.remoteStore,i)),t._onlineComponents=e}async function N6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(yi,"Using user provided OfflineComponentProvider");try{await Wh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;lr("Error using user provided cache. Falling back to memory cache: "+n),await Wh(t,new Pu)}}else J(yi,"Using default OfflineComponentProvider"),await Wh(t,new T6(void 0));return t._offlineComponents}async function DT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(yi,"Using user provided OnlineComponentProvider"),await Ib(t,t._uninitializedComponentsProvider._online)):(J(yi,"Using default OnlineComponentProvider"),await Ib(t,new Sm))),t._onlineComponents}function A6(t){return DT(t).then(e=>e.syncEngine)}async function Nm(t){const e=await DT(t),n=e.eventManager;return n.onListen=d6.bind(null,e.syncEngine),n.onUnlisten=m6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=h6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p6.bind(null,e.syncEngine),n}function j6(t,e,n={}){const s=new ri;return t.asyncQueue.enqueueAndForget(async()=>function(a,r,c,u,d){const f=new kT({next:g=>{f.Nu(),r.enqueueAndForget(()=>ET(a,m));const x=g.docs.has(c);!x&&g.fromCache?d.reject(new X(z.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new X(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new wT(wd(c.path),f,{includeMetadataChanges:!0,qa:!0});return _T(a,m)}(await Nm(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firestore.googleapis.com",kb=!0;class Db{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MT,this.ssl=kb}else this.host=e.host,this.ssl=e.ssl??kb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l3)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OT(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Db({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Db(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Ok;switch(s.type){case"firstParty":return new Lk(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Rb.get(n);s&&(J("ComponentProvider","Removing Datastore"),Rb.delete(n),s.terminate())}(this),Promise.resolve()}}function VT(t,e,n,s={}){var d;t=Ui(t,kd);const i=Sr(e),a=t._getSettings(),r={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(T1(`https://${c}`),S1("Firestore",!0)),a.host!==MT&&a.host!==c&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:s};if(!Ki(u,r)&&(t._setSettings(u),s.mockUserToken)){let f,m;if(typeof s.mockUserToken=="string")f=s.mockUserToken,m=Tt.MOCK_USER;else{f=YC(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Tt(g)}t._authCredentials=new Mk(new vw(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class it{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Co(n,it._jsonSchema))return new it(e,s||null,new ee(De.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:st("string",it._jsonSchemaVersion),referencePath:st("string")};class li extends oa{constructor(e,n,s){super(e,n,wd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ee(e))}withConverter(e){return new li(this.firestore,e,this._path)}}function fr(t,e,...n){if(t=kt(t),_w("collection","path",e),t instanceof kd){const s=De.fromString(e,...n);return Kx(s),new li(t,null,s)}{if(!(t instanceof it||t instanceof li))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(De.fromString(e,...n));return Kx(s),new li(t.firestore,null,s)}}function mr(t,e,...n){if(t=kt(t),arguments.length===1&&(e=Xp.newId()),_w("doc","path",e),t instanceof kd){const s=De.fromString(e,...n);return Gx(s),new it(t,null,new ee(s))}{if(!(t instanceof it||t instanceof li))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(De.fromString(e,...n));return Gx(s),new it(t.firestore,t instanceof li?t.converter:null,new ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="AsyncQueue";class Mb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fT(this,"async_queue_retry"),this._c=()=>{const s=Jh();s&&J(Ob,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Jh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Jh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ri;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Rr(e))throw e;J(Ob,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",Vb(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=mg.createAndSchedule(this,e,n,s,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&se(47125,{Pc:Vb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Vb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of s)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class co extends kd{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new Mb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mb(e),this._firestoreClient=void 0,await e}}}function C6(t,e){const n=typeof t=="object"?t:C1(),s=typeof t=="string"?t:Iu,i=zp(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const a=KC("firestore");a&&VT(i,...a)}return i}function bg(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||I6(t),t._firestoreClient}function I6(t){var s,i,a;const e=t._freezeSettings(),n=function(c,u,d,f){return new tD(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,OT(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new S6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(_t.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Co(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:st("string",on._jsonSchemaVersion),bytes:st("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mn._jsonSchemaVersion}}static fromJSON(e){if(Co(e,Mn._jsonSchema))return new Mn(e.latitude,e.longitude)}}Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:st("string",Mn._jsonSchemaVersion),latitude:st("number"),longitude:st("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Co(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vn(e.vectorValues);throw new X(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:st("string",Vn._jsonSchemaVersion),vectorValues:st("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=/^__.*__$/;class k6{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new Io(e,this.data,n,this.fieldTransforms)}}function PT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:t})}}class Eg{constructor(e,n,s,i,a,r){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Eg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PT(this.Ac)&&R6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class D6{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Cd(e)}Cc(e,n,s,i=!1){return new Eg({Ac:e,methodName:n,Dc:s,path:xt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LT(t){const e=t._freezeSettings(),n=Cd(t._databaseId);return new D6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function O6(t,e,n,s,i,a={}){const r=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);BT("Data must be an object, but it was:",r,s);const c=UT(s,r);let u,d;if(a.merge)u=new xn(r.fieldMask),d=r.fieldTransforms;else if(a.mergeFields){const f=[];for(const m of a.mergeFields){const g=V6(e,m,n);if(!r.contains(g))throw new X(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);L6(f,g)||f.push(g)}u=new xn(f),d=r.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=r.fieldTransforms;return new k6(new ln(c),u,d)}class wg extends _g{_toFieldTransform(e){return new AD(e.path,new ro)}isEqual(e){return e instanceof wg}}function M6(t,e,n,s=!1){return Tg(n,t.Cc(s?4:3,e))}function Tg(t,e){if(zT(t=kt(t)))return BT("Unsupported field value:",e,t),UT(t,e);if(t instanceof _g)return function(s,i){if(!PT(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,i){const a=[];let r=0;for(const c of s){let u=Tg(c,i.wc(r));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),r++}return{arrayValue:{values:a}}}(t,e)}return function(s,i){if((s=kt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return TD(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Ue.fromDate(s);return{timestampValue:Ou(i.serializer,a)}}if(s instanceof Ue){const a=new Ue(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ou(i.serializer,a)}}if(s instanceof Mn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof on)return{bytesValue:nT(i.serializer,s._byteString)};if(s instanceof it){const a=i.databaseId,r=s.firestore._databaseId;if(!r.isEqual(a))throw i.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ag(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Vn)return function(r,c){return{mapValue:{fields:{[Iw]:{stringValue:Rw},[Ru]:{arrayValue:{values:r.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return ng(c.serializer,d)})}}}}}}(s,i);throw i.Sc(`Unsupported field value: ${bd(s)}`)}(t,e)}function UT(t,e){const n={};return Tw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(s,i)=>{const a=Tg(i,e.mc(s));a!=null&&(n[s]=a)}),{mapValue:{fields:n}}}function zT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Mn||t instanceof on||t instanceof it||t instanceof _g||t instanceof Vn)}function BT(t,e,n){if(!zT(n)||!Ew(n)){const s=bd(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function V6(t,e,n){if((e=kt(e))instanceof vg)return e._internalPath;if(typeof e=="string")return qT(t,e);throw Lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const P6=new RegExp("[~\\*/\\[\\]]");function qT(t,e,n){if(e.search(P6)>=0)throw Lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vg(...e.split("."))._internalPath}catch{throw Lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lu(t,e,n,s,i){const a=s&&!s.isEmpty(),r=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||r)&&(u+=" (found",a&&(u+=` in field ${s}`),r&&(u+=` in document ${i}`),u+=")"),new X(z.INVALID_ARGUMENT,c+t+u)}function L6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,s,i,a){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new U6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class U6 extends HT{data(){return super.data()}}function Dd(t,e){return typeof e=="string"?qT(t,e):e instanceof vg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class FT extends Sg{}function Od(t,e,...n){let s=[];e instanceof Sg&&s.push(e),s=s.concat(n),function(a){const r=a.filter(u=>u instanceof Ng).length,c=a.filter(u=>u instanceof Md).length;if(r>1||r>0&&c>0)throw new X(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class Md extends FT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Md(e,n,s)}_apply(e){const n=this._parse(e);return GT(e._query,n),new oa(e.firestore,e.converter,pm(e._query,n))}_parse(e){const n=LT(e.firestore);return function(a,r,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new X(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ub(m,f);const C=[];for(const I of m)C.push(Lb(u,a,I));g={arrayValue:{values:C}}}else g=Lb(u,a,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ub(m,f),g=M6(c,r,m,f==="in"||f==="not-in");return tt.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Uu(t,e,n){const s=e,i=Dd("where",t);return Md._create(i,s,n)}class Ng extends Sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ng(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let r=i;const c=a.getFlattenedFilters();for(const u of c)GT(r,u),r=pm(r,u)}(e._query,n),new oa(e.firestore,e.converter,pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends FT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ag(e,n)}_apply(e){const n=function(i,a,r){if(i.startAt!==null)throw new X(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(a,r)}(e._query,this._field,this._direction);return new oa(e.firestore,e.converter,function(i,a){const r=i.explicitOrderBy.concat([a]);return new kr(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function B6(t,e="asc"){const n=e,s=Dd("orderBy",t);return Ag._create(s,n)}function Lb(t,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new X(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uw(e)&&n.indexOf("/")!==-1)throw new X(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(De.fromString(n));if(!ee.isDocumentKey(s))throw new X(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return eb(t,new ee(s))}if(n instanceof it)return eb(t,n._key);throw new X(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bd(n)}.`)}function Ub(t,e){if(!Array.isArray(t)||t.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GT(t,e){const n=function(i,a){for(const r of i)for(const c of r.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class q6{convertValue(e,n="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ia(e,(i,a)=>{s[i]=this.convertValue(a,n)}),s}convertVectorValue(e){var s,i,a;const n=(a=(i=(s=e.fields)==null?void 0:s[Ru].arrayValue)==null?void 0:i.values)==null?void 0:a.map(r=>Ye(r.doubleValue));return new Vn(n)}convertGeoPoint(e){return new Mn(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ed(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(no(e));default:return null}}convertTimestamp(e){const n=fi(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=De.fromString(e);Se(oT(s),9688,{name:e});const i=new so(s.get(1),s.get(3)),a=new ee(s.popFirst(5));return i.isEqual(n)||ms(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zi extends HT{constructor(e,n,s,i,a,r){super(e,n,s,i,r),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Dd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",zi._jsonSchema={type:st("string",zi._jsonSchemaVersion),bundleSource:st("string","DocumentSnapshot"),bundleName:st("string"),bundle:st("string")};class Bc extends zi{data(e={}){return super.data(e)}}class Ga{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ml(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Bc(this._firestore,this._userDataWriter,s.key,s,new ml(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(c=>{const u=new Bc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ml(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Bc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ml(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=r.indexOf(c.doc.key),r=r.delete(c.doc.key)),c.type!==1&&(r=r.add(c.doc),f=r.indexOf(c.doc.key)),{type:F6(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),s.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){t=Ui(t,it);const e=Ui(t.firestore,co);return j6(bg(e),t._key).then(n=>QT(e,t,n))}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:st("string",Ga._jsonSchemaVersion),bundleSource:st("string","QuerySnapshot"),bundleName:st("string"),bundle:st("string")};class KT extends q6{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function K6(t,e){const n=Ui(t.firestore,co),s=mr(t),i=H6(t.converter,e);return Q6(n,[O6(LT(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,as.exists(!1))]).then(()=>s)}function rs(t,...e){var u,d,f;t=kt(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Pb(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Pb(e[s])){const m=e[s];e[s]=(u=m.next)==null?void 0:u.bind(m),e[s+1]=(d=m.error)==null?void 0:d.bind(m),e[s+2]=(f=m.complete)==null?void 0:f.bind(m)}let a,r,c;if(t instanceof it)r=Ui(t.firestore,co),c=wd(t._key.path),a={next:m=>{e[s]&&e[s](QT(r,t,m))},error:e[s+1],complete:e[s+2]};else{const m=Ui(t,oa);r=Ui(m.firestore,co),c=m._query;const g=new KT(r);a={next:x=>{e[s]&&e[s](new Ga(r,g,m,x))},error:e[s+1],complete:e[s+2]},z6(t._query)}return function(g,x,C,I){const D=new kT(I),T=new wT(x,D,C);return g.asyncQueue.enqueueAndForget(async()=>_T(await Nm(g),T)),()=>{D.Nu(),g.asyncQueue.enqueueAndForget(async()=>ET(await Nm(g),T))}}(bg(r),c,i,a)}function Q6(t,e){return function(s,i){const a=new ri;return s.asyncQueue.enqueueAndForget(async()=>g6(await A6(s),i,a)),a.promise}(bg(t),e)}function QT(t,e,n){const s=n.docs.get(e._key),i=new KT(t);return new zi(t,i,e._key,s,new ml(n.hasPendingWrites,n.fromCache),e.converter)}function Y6(){return new wg("serverTimestamp")}(function(e,n=!0){(function(i){Cr=i})(Nr),ar(new Qi("firestore",(s,{instanceIdentifier:i,options:a})=>{const r=s.getProvider("app").getImmediate(),c=new co(new Vk(s.getProvider("auth-internal")),new Uk(r,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new so(d.options.projectId,f)}(r,i),r);return a={useFetchStreams:n,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),si(Bx,qx,e),si(Bx,qx,"esm2020")})();const $6={apiKey:"fake-api-key",authDomain:"localhost",projectId:"evcwebsite12345"},YT=j1($6),Oo=kk(YT),dn=C6(YT),X6=typeof window<"u"&&["localhost","127.0.0.1","::1"].includes(window.location.hostname);var Gb,Kb,Qb,Yb;const J6=((Kb=(Gb=import.meta)==null?void 0:Gb.env)==null?void 0:Kb.DEV)===!0||((Yb=(Qb=import.meta)==null?void 0:Qb.env)==null?void 0:Yb.VITE_USE_EMULATORS)==="true"||X6;let zb=!1;if(!zb&&J6){try{J1(Oo,"http://localhost:9099")}catch{}try{VT(dn,"localhost",8080)}catch{}zb=!0}const W6=()=>{const[t,e]=j.useState(""),[n,s]=j.useState(""),[i,a]=j.useState(!1),[r,c]=j.useState(""),u=qn(),d=async f=>{f.preventDefault(),a(!0),c("");try{const g=await(await b4(Oo,t,n)).user.getIdToken(),x=await Pn("/auth/login/firebase",{idToken:g});if(x!=null&&x.token){localStorage.setItem("token",x.token),x.user&&localStorage.setItem("user",JSON.stringify(x.user));const I=x.redirectPath||"/dashboard";u(I,{replace:!0});return}const C=await Pn("/auth/login",{email:t,password:n});if(C!=null&&C.token){localStorage.setItem("token",C.token),C.user&&localStorage.setItem("user",JSON.stringify(C.user));const I=C.redirectPath||"/dashboard";u(I,{replace:!0});return}c((x==null?void 0:x.error)||(C==null?void 0:C.error)||"Inloggen is niet gelukt. Probeer het opnieuw.")}catch{c("Inloggen is niet gelukt. Controleer je gegevens.")}finally{a(!1)}};return l.jsx(bn,{kicker:"Inloggen",title:"Welkom terug bij EVC",description:"Log in om je traject te volgen, bewijsstukken te uploaden en contact te houden met je coach. Nieuwe accounts worden door een administrator aangemaakt.",children:l.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx(Zj,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Log in op je account"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Gebruik het e-mailadres waarmee je bent aangemeld voor het traject."})]})]}),l.jsxs("form",{onSubmit:d,className:"mt-6 space-y-5",children:[r?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:r}):null,l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"login-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),l.jsx("input",{id:"login-email",type:"email",placeholder:"jij@voorbeeld.nl",value:t,onChange:f=>e(f.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"login-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Wachtwoord"}),l.jsx("input",{id:"login-password",type:"password",placeholder:"Vul je wachtwoord in",value:n,onChange:f=>s(f.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("label",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),l.jsx("span",{children:"Onthoud mij"})]}),l.jsx("button",{type:"button",onClick:()=>alert("Neem contact op met support om je wachtwoord te resetten."),className:"font-medium text-brand-600 transition hover:text-brand-500",children:"Wachtwoord vergeten?"})]}),l.jsx("button",{type:"submit",disabled:i,className:"mt-4 w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:i?"Bezig met inloggen...":"Inloggen"})]}),l.jsx("p",{className:"mt-6 text-center text-sm text-slate-500",children:"Hulp nodig? Neem contact op met het EVC-team."})]})})},Z6=()=>{const[t,e]=j.useState(null),[n,s]=j.useState(""),[i,a]=j.useState(!0),r=qn();return j.useEffect(()=>{(async()=>{if(!localStorage.getItem("token")){s("Je bent niet ingelogd. Log in om je profiel te bekijken."),a(!1);return}try{const d=await Nt("/auth/me");e(d)}catch(d){console.error("Failed to load profile",d),s("We konden je profiel niet ophalen. Probeer het later nog eens.")}finally{a(!1)}})()},[]),i?l.jsx(bn,{title:"Profiel",description:"Een moment geduld, we laden je gegevens.",kicker:"Account",children:l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx(xs,{label:"Profiel laden"})})}):n&&!t?l.jsx(bn,{kicker:"Profiel",title:"Meld je eerst aan",description:n,actions:[l.jsx("button",{type:"button",onClick:()=>r("/login"),className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Naar login"},"login")],children:l.jsx("div",{className:"rounded-2xl border border-dashed border-brand-200 bg-white/60 p-10 text-center text-sm text-slate-500",children:"Je profielgegevens worden zichtbaar zodra je bent aangemeld."})}):l.jsx(bn,{kicker:"Profiel",title:"Jouw gegevens",description:"Overzicht van je accountinformatie binnen het EVC platform.",children:l.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Persoonsgegevens"}),l.jsxs("dl",{className:"mt-6 space-y-4 text-sm text-slate-500",children:[l.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"Naam"}),l.jsx("dd",{className:"text-slate-900",children:(t==null?void 0:t.name)||"-"})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"E-mail"}),l.jsx("dd",{className:"text-slate-900",children:t==null?void 0:t.email})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"Rol"}),l.jsx("dd",{className:"text-slate-900 capitalize",children:t==null?void 0:t.role})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 px-4 py-3",children:[l.jsx("dt",{className:"font-medium text-slate-600",children:"Lid sinds"}),l.jsx("dd",{className:"text-slate-900",children:t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]})]})]}),l.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Beveiliging & toegang"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Wil je je gegevens wijzigen of een nieuw wachtwoord instellen? Neem contact op met je coach of beheerder. Binnenkort voegen we hier zelfservice opties toe."}),l.jsx("button",{type:"button",onClick:()=>r("/messages"),className:"mt-6 inline-flex items-center justify-center rounded-full bg-brand-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Stuur bericht naar coach"})]})]})})},eO=()=>{const[t,e]=j.useState([]),[n,s]=j.useState({}),[i,a]=j.useState({}),[r,c]=j.useState(!1),[u,d]=j.useState(null),[f,m]=j.useState({name:"",type:"",file:null}),[g,x]=j.useState(!0),[C,I]=j.useState(""),D=async v=>{if(localStorage.getItem("token"))try{const b=await Nt(`/taskevidence/by-task/${v}`);a(S=>({...S,[v]:b||[]}))}catch{a(S=>({...S,[v]:[]}))}},T=async()=>{x(!0),I("");try{const v=await Nt("/tasks");if(e(v),localStorage.getItem("token")){const b=await Promise.all(v.map(async S=>{let N="";try{const A=await Nt(`/responses/${S.id}`);N=(A==null?void 0:A.notes)??(A==null?void 0:A.responseText)??""}catch{}let k=[];try{k=await Nt(`/taskevidence/by-task/${S.id}`)}catch{}return{taskId:S.id,noteText:N,evidenceItems:k||[]}}));s(b.reduce((S,N)=>(S[N.taskId]=N.noteText,S),{})),a(b.reduce((S,N)=>(S[N.taskId]=N.evidenceItems,S),{}))}}catch(v){console.error("Failed to load tasks",v),I("We konden de planning niet laden. Probeer het later opnieuw."),e([])}finally{x(!1)}};j.useEffect(()=>{T()},[]);const _=async v=>{const y=n[v]||"";try{await Pn(`/responses/${v}`,{notes:y}),alert("✅ Antwoord opgeslagen!")}catch{alert("❌ Opslaan mislukt. Probeer het opnieuw.")}},w=v=>{d(v),m({name:"",type:"",file:null}),c(!0)},R=()=>{c(!1),d(null)},M=v=>{const{name:y,value:b,files:S}=v.target;m(N=>({...N,[y]:S?S[0]:b}))},U=async v=>{var S,N;if(v.preventDefault(),!u)return;const y=new FormData;y.append("name",f.name),f.type&&y.append("type",f.type),f.file&&y.append("file",f.file);let b;try{b=await fd("/evidence/upload",y)}catch(k){const A=((S=k==null?void 0:k.data)==null?void 0:S.error)||(k==null?void 0:k.message)||"Upload mislukt";alert(`❌ Upload mislukt
`+A);return}try{await Pn("/taskevidence/assign",{taskId:u,evidenceId:b.id})}catch(k){alert("❌ Koppelen mislukt"+((N=k==null?void 0:k.data)!=null&&N.error?`
${k.data.error}`:""));return}await D(u),R(),alert("✅ Evidence gekoppeld aan taak!")};return l.jsxs(bn,{kicker:"Planning",title:"Portfolio stappen",description:"Noteer je voortgang, upload bewijsstukken en houd overzicht per taak.",actions:[l.jsx("button",{type:"button",onClick:T,className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600",children:"Ververs"},"refresh")],children:[g?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx(xs,{label:"Planning laden"})}):null,!g&&C?l.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-6 text-sm text-rose-600",children:C}):null,!g&&!C&&t.length===0?l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-white p-10 text-center text-sm text-slate-500",children:"Er zijn nog geen taken beschikbaar. Zodra je coach taken toevoegt, verschijnen ze hier automatisch."}):null,!g&&!C&&t.length>0?l.jsx("div",{className:"space-y-6",children:t.map(v=>{const y=i[v.id]||[];return l.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:v.title}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:v.description})]}),l.jsxs("button",{type:"button",onClick:()=>w(v.id),className:"inline-flex items-center justify-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:[l.jsx(Kj,{className:"h-4 w-4"}),"Upload bewijs"]})]}),l.jsx("label",{className:"mt-4 block text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Reflectie / notities"}),l.jsx("textarea",{value:n[v.id]||"",onChange:b=>s(S=>({...S,[v.id]:b.target.value})),placeholder:"Schrijf hier je reflectie of bewijstoelichting...",className:"mt-2 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-brand-100",rows:4}),l.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[l.jsx("button",{type:"button",onClick:()=>_(v.id),className:"inline-flex items-center justify-center rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-700",children:"Opslaan"}),l.jsx("button",{type:"button",onClick:()=>s(b=>({...b,[v.id]:""})),className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600",children:"Leegmaken"})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h4",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Bewijsstukken"}),y.length>0?l.jsx("ul",{className:"mt-3 flex flex-wrap gap-2",children:y.map(b=>l.jsxs("li",{className:"inline-flex items-center gap-2 rounded-full bg-brand-50 px-3 py-1 text-xs font-medium text-brand-700",children:[l.jsx("span",{children:b.name}),l.jsxs("span",{className:"text-brand-400",children:["(",b.type||"bestand",")"]})]},b.id))}):l.jsx("p",{className:"mt-3 rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-500",children:"Nog geen bewijs toegevoegd. Voeg bestanden toe om je reflectie te ondersteunen."})]})]},v.id)})}):null,r?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4 py-10 backdrop-blur-sm",children:l.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-slate-200 bg-white p-6 shadow-xl",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Upload bewijsstuk"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Koppel een bestand aan deze taak. Bestanden worden veilig opgeslagen."})]}),l.jsx("button",{type:"button",onClick:R,className:"text-sm font-medium text-slate-400 transition hover:text-slate-600",children:"Sluiten"})]}),l.jsxs("form",{onSubmit:U,className:"mt-6 space-y-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"evidence-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Naam"}),l.jsx("input",{id:"evidence-name",type:"text",name:"name",value:f.name,onChange:M,required:!0,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"evidence-type",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Type"}),l.jsx("input",{id:"evidence-type",type:"text",name:"type",placeholder:"bijvoorbeeld PDF, Foto",value:f.type,onChange:M,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"evidence-file",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Bestand"}),l.jsx("input",{id:"evidence-file",type:"file",name:"file",required:!0,onChange:M,className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:R,className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600",children:"Annuleren"}),l.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Uploaden"})]})]})]})}):null]})},tO=()=>{const[t,e]=j.useState([]),[n,s]=j.useState(""),[i,a]=j.useState(""),[r,c]=j.useState(!0),[u,d]=j.useState(!1),[f,m]=j.useState(""),g=async()=>{c(!0),m("");try{const C=await Nt("/messages");e(C||[])}catch(C){console.error("Failed to load messages",C),m("We konden de berichten niet ophalen. Probeer het later opnieuw.")}finally{c(!1)}};j.useEffect(()=>{g()},[]);const x=async C=>{C.preventDefault(),d(!0);try{await Pn("/messages/send",{toUserId:n,content:i}),a(""),await g()}catch{alert("❌ Verzenden mislukt. Probeer het opnieuw.")}finally{d(!1)}};return l.jsxs(bn,{kicker:"Berichten",title:"Communiceer met je coach",description:"Stuur snel een bericht en bekijk het volledige gespreksoverzicht.",actions:[l.jsx("button",{type:"button",onClick:g,className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600",children:"Ververs"},"refresh")],children:[r?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx(xs,{label:"Berichten laden"})}):null,!r&&f?l.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-6 text-sm text-rose-600",children:f}):null,!r&&!f?l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr,0.8fr]",children:[l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx(p1,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Gespreksarchief"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Je meest recente berichten met coaches en kandidaten."})]})]}),t.length>0?l.jsx("ul",{className:"mt-6 space-y-3 text-sm text-slate-600",children:t.map(C=>{var I,D;return l.jsxs("li",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.2em] text-slate-400",children:[l.jsxs("span",{children:["Van ",((I=C.fromUser)==null?void 0:I.name)||"Onbekend"]}),l.jsx("span",{children:"→"}),l.jsxs("span",{children:["Naar ",((D=C.toUser)==null?void 0:D.name)||C.toUserId]}),C.createdAt?l.jsx("span",{className:"font-medium text-slate-500",children:new Date(C.createdAt).toLocaleString()}):null]}),l.jsx("p",{className:"mt-2 text-base text-slate-700",children:C.content})]},C.id)})}):l.jsx("p",{className:"mt-6 rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-500",children:"Nog geen berichten verzonden of ontvangen."})]}),l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nieuw bericht"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Vul het gebruikersnummer en je bericht in om contact op te nemen."}),l.jsxs("form",{onSubmit:x,className:"mt-6 space-y-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"message-to",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Ontvanger ID"}),l.jsx("input",{id:"message-to",type:"number",required:!0,value:n,onChange:C=>s(C.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"message-content",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Bericht"}),l.jsx("textarea",{id:"message-content",required:!0,value:i,onChange:C=>a(C.target.value),rows:5,className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Schrijf je bericht..."})]}),l.jsx("div",{className:"flex justify-end gap-3 pt-2",children:l.jsx("button",{type:"submit",disabled:u,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:u?"Verzenden...":"Versturen"})})]})]})]}):null]})},nO=()=>{const[t,e]=j.useState([]),[n,s]=j.useState({name:"",type:"",file:null}),[i,a]=j.useState({taskId:"",evidenceId:""}),[r,c]=j.useState(!0),[u,d]=j.useState(!1),[f,m]=j.useState(!1),[g,x]=j.useState(""),C=async()=>{c(!0),x("");try{const w=await Nt("/evidence");e(w||[])}catch(w){console.error("Failed to load evidence",w),x("We konden de bewijsstukken niet ophalen. Probeer het later opnieuw.")}finally{c(!1)}};j.useEffect(()=>{C()},[]);const I=w=>{const{name:R,value:M,files:U}=w.target;s(v=>({...v,[R]:U?U[0]:M}))},D=async w=>{var M;w.preventDefault();const R=new FormData;R.append("name",n.name),R.append("type",n.type),n.file&&R.append("file",n.file),d(!0);try{await fd("/evidence/upload",R),alert("✅ Evidence geüpload!"),s({name:"",type:"",file:null}),await C()}catch(U){const v=((M=U==null?void 0:U.data)==null?void 0:M.error)||(U==null?void 0:U.message)||"Upload mislukt";alert(`❌ Upload mislukt
`+v)}finally{d(!1)}},T=w=>{const{name:R,value:M}=w.target;a(U=>({...U,[R]:M}))},_=async w=>{var R;w.preventDefault(),m(!0);try{await Pn("/taskevidence/assign",i),alert("✅ Evidence gekoppeld aan taak!")}catch(M){alert("❌ Koppelen mislukt"+((R=M==null?void 0:M.data)!=null&&R.error?`
${M.data.error}`:""))}finally{m(!1)}};return l.jsxs(bn,{kicker:"Bewijsstukken",title:"Beheer je bewijs",description:"Upload nieuwe bestanden en koppel ze eenvoudig aan de juiste taken.",actions:[l.jsx("button",{type:"button",onClick:C,className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600",children:"Ververs"},"refresh")],children:[r?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx(xs,{label:"Bewijsstukken laden"})}):null,!r&&g?l.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-6 text-sm text-rose-600",children:g}):null,!r&&!g?l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("header",{className:"flex items-start justify-between gap-4",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nieuwe upload"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Geaccepteerde bestanden worden direct aan je bibliotheek toegevoegd."})]})}),l.jsxs("form",{onSubmit:D,className:"mt-6 space-y-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"evidence-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Naam"}),l.jsx("input",{id:"evidence-name",type:"text",name:"name",required:!0,value:n.name,onChange:I,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"evidence-type",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Type"}),l.jsx("input",{id:"evidence-type",type:"text",name:"type",placeholder:"bijvoorbeeld PDF, Foto",value:n.type,onChange:I,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"evidence-file",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Bestand"}),l.jsx("input",{id:"evidence-file",type:"file",name:"file",required:!0,onChange:I,className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsx("div",{className:"flex justify-end gap-3 pt-2",children:l.jsx("button",{type:"submit",disabled:u,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:u?"Bezig...":"Uploaden"})})]})]}),l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Koppel aan taak"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Vul het taaknummer en het bewijsnummer in om de koppeling te maken."}),l.jsxs("form",{onSubmit:_,className:"mt-6 space-y-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"assign-task",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Taak ID"}),l.jsx("input",{id:"assign-task",type:"number",name:"taskId",required:!0,value:i.taskId,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"assign-evidence",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Bewijs ID"}),l.jsx("input",{id:"assign-evidence",type:"number",name:"evidenceId",required:!0,value:i.evidenceId,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsx("div",{className:"flex justify-end gap-3 pt-2",children:l.jsx("button",{type:"submit",disabled:f,className:"inline-flex items-center justify-center rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-400",children:f?"Bezig...":"Koppelen"})})]})]})]}):null,!r&&!g?l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx(em,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Je uploads"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Overzicht van alle bestanden die je eerder hebt toegevoegd."})]})]}),t.length>0?l.jsx("ul",{className:"mt-6 divide-y divide-slate-200 text-sm text-slate-600",children:t.map(w=>l.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-3 py-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900",children:w.name}),l.jsxs("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:[w.type||"onbekend"," · ID ",w.id]})]}),l.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600",children:w.createdAt?new Date(w.createdAt).toLocaleDateString():"-"})]},w.id))}):l.jsx("p",{className:"mt-6 rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-500",children:"Je hebt nog geen bewijsstukken geüpload."})]}):null]})},sO=["Je portfolio opbouwen met duidelijke stappen","Bewijsstukken veilig uploaden en beheren","Berichten sturen naar coaches en begeleiders","Voortgang bijhouden via planning en taken"],iO=()=>l.jsxs(bn,{showHeader:!1,children:[l.jsx("section",{className:"overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 via-brand-500 to-brand-400 text-white shadow-xl",children:l.jsxs("div",{className:"grid gap-10 px-8 py-16 sm:px-12 lg:grid-cols-2 lg:px-16",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.32em] text-white/60",children:"EVC platform"}),l.jsx("h1",{className:"mt-6 text-4xl font-semibold leading-tight tracking-tight sm:text-5xl",children:"Welkom bij jouw EVC portfolio"}),l.jsx("p",{className:"mt-6 max-w-xl text-lg text-white/80",children:"Werk stap voor stap naar je erkenning toe. Verzamel bewijsstukken, werk samen met je coach en houd alles op één plek bij."}),l.jsxs("div",{className:"mt-10 flex flex-wrap gap-4",children:[l.jsxs(Cl,{to:"/login",className:"inline-flex items-center justify-center gap-2 rounded-full bg-white px-5 py-3 text-sm font-semibold text-brand-600 shadow-lg shadow-brand-900/10 transition hover:-translate-y-0.5 hover:bg-slate-50",children:["Naar login",l.jsx(Rc,{className:"h-4 w-4"})]}),l.jsx("span",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-white/40 px-5 py-3 text-sm font-semibold text-white/80",children:"Nieuwe accounts? Neem contact op met het EVC-team"})]})]}),l.jsxs("div",{className:"relative isolate",children:[l.jsx("div",{className:"absolute -top-10 right-10 h-32 w-32 rounded-full bg-white/10 blur-3xl","aria-hidden":"true"}),l.jsx("div",{className:"absolute -bottom-12 left-6 h-24 w-24 rounded-full bg-brand-200/40 blur-3xl","aria-hidden":"true"}),l.jsxs("div",{className:"relative rounded-2xl border border-white/20 bg-white/10 p-8 backdrop-blur",children:[l.jsx("h2",{className:"text-xl font-semibold text-white",children:"Alles in één vertrouwde omgeving"}),l.jsx("ul",{className:"mt-6 space-y-4",children:sO.map(t=>l.jsxs("li",{className:"flex items-start gap-3 text-sm text-white/85",children:[l.jsx(Li,{className:"mt-0.5 h-5 w-5 flex-none text-white"}),l.jsx("span",{children:t})]},t))})]})]})]})}),l.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor kandidaten"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Werk op je eigen tempo aan opdrachten, voeg reflecties toe en beheer bewijsstukken."})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor coaches"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Krijg realtime inzicht in voortgang, geef feedback en begeleid kandidaten gericht."})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Veilig en transparant"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bewaar bestanden veilig en werk samen in een omgeving met duidelijke rollen en rechten."})]})]}),l.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs(Cl,{to:"/admin",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[l.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:l.jsx(dd,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Bekijk de admin-ervaring"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Navigeer naar het beheerdersdashboard met klantoverzicht en toewijzingen."}),l.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar admin-dashboard",l.jsx(Rc,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]}),l.jsxs(Cl,{to:"/coach",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[l.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:l.jsx(wo,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Ervaar het coachportaal"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Ga direct naar het coachdashboard met klantkaarten, feedback en berichten."}),l.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar coach-dashboard",l.jsx(Rc,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]})]})]});function $T(t){if(!(t!=null&&t.exists()))return null;const e=t.data();return{id:t.id,...e}}function aO(t){const e=[];if(Array.isArray(t)&&t.length>0){const n=t.map(s=>typeof s=="string"?s.trim().toLowerCase():"").filter(Boolean);n.length===1?e.push(Uu("role","==",n[0])):n.length>1&&e.push(Uu("role","in",n.slice(0,10)))}return e}function Am(t,e={}){const{roles:n}=e,s=fr(dn,"users"),i=Od(s,...aO(n));return rs(i,a=>{const r=a.docs.map($T).filter(Boolean).sort((c,u)=>{const d=(c.name||"").toLowerCase(),f=(u.name||"").toLowerCase();return d.localeCompare(f)});t({data:r,error:null})},a=>t({data:null,error:a}))}function rO(t){const e=fr(dn,"assignments"),n=Od(e,B6("createdAt","desc"));return rs(n,s=>{const i=s.docs.map(a=>{var c,u;const r=a.data();return{id:a.id,customerId:r.customerId||null,coachId:r.coachId||null,status:r.status||"pending",createdAt:r.createdAt?((u=(c=r.createdAt).toDate)==null?void 0:u.call(c))??r.createdAt:null,createdBy:r.createdBy||null}});t({data:i,error:null})},s=>t({data:null,error:s}))}async function lO({customerId:t,coachId:e,status:n="pending"}){if(!t||!e)throw new Error("customerId and coachId are verplicht");const s=Oo.currentUser,i=(s==null?void 0:s.uid)??null,a=fr(dn,"assignments");await K6(a,{customerId:t,coachId:e,status:n,createdBy:i,createdAt:Y6()})}function XT(t,e){if(!t)return e({data:null,error:new Error("Missing uid")}),()=>{};const n=mr(dn,"users",t),s=mr(dn,"adminProfiles",t);let i=null,a=null,r=null,c=null;const u=()=>{if(r||c){e({data:null,error:r||c});return}if(!i){e({data:null,error:null});return}e({data:{...i,...a},error:null})},d=rs(n,m=>{i=$T(m),r=null,u()},m=>{r=m,u()}),f=rs(s,m=>{a=m.exists()?m.data():null,c=null,u()},m=>{c=m,u()});return()=>{d(),f()}}const oO=()=>{const t=qn(),[e,n]=j.useState([]),[s,i]=j.useState(null),[a,r]=j.useState(!0);j.useEffect(()=>{r(!0);const d=Am(({data:f,error:m})=>{if(m){i(m),r(!1);return}n(Array.isArray(f)?f:[]),i(null),r(!1)});return()=>{typeof d=="function"&&d()}},[]);const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1):"Onbekend",u=d=>{!d||d.role!=="customer"||t(`/coach/customers/${d.id}`)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Customer accounts"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beheer klantprofielen en stap in hun omgeving om hun voortgang in te zien."})]}),s?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Kan accounts niet laden: ",s.message||"Onbekende fout"]}):null,l.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Naam"}),l.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"E-mail"}),l.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Rol"}),l.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actie"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:a?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Accounts laden..."})}):e.length===0?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Nog geen accounts gevonden."})}):e.map(d=>{const f=d.role==="customer";return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:d.name||"Naam onbekend"}),l.jsx("td",{className:"px-4 py-3",children:d.email?l.jsx("a",{href:`mailto:${d.email}`,className:"text-brand-600 hover:text-brand-500",children:d.email}):l.jsx("span",{className:"text-slate-400",children:"Geen e-mail"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:c(d.role)})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsx("button",{type:"button",onClick:()=>u(d),disabled:!f,className:`inline-flex items-center gap-2 rounded-full px-3 py-2 text-xs font-semibold transition ${f?"bg-brand-600 text-white shadow-sm hover:bg-brand-500":"cursor-not-allowed bg-slate-100 text-slate-400"}`,children:f?"Open as Customer":"Alleen klanten"})})]},d.id)})})]})})]})},cO=()=>{const[t,e]=j.useState([]),[n,s]=j.useState([]),[i,a]=j.useState([]),[r,c]=j.useState({customerId:"",coachId:""}),[u,d]=j.useState(!0),[f,m]=j.useState(!0),[g,x]=j.useState(!0),[C,I]=j.useState(!1),[D,T]=j.useState(null),[_,w]=j.useState({customers:null,coaches:null,assignments:null});j.useEffect(()=>{const y=Am(({data:N,error:k})=>{if(k){w(A=>({...A,customers:k})),d(!1);return}w(A=>({...A,customers:null})),e(Array.isArray(N)?N:[]),d(!1)},{roles:["customer"]}),b=Am(({data:N,error:k})=>{if(k){w(A=>({...A,coaches:k})),m(!1);return}w(A=>({...A,coaches:null})),s(Array.isArray(N)?N:[]),m(!1)},{roles:["coach"]}),S=rO(({data:N,error:k})=>{if(k){w(A=>({...A,assignments:k})),x(!1);return}w(A=>({...A,assignments:null})),a(Array.isArray(N)?N:[]),x(!1)});return()=>{typeof y=="function"&&y(),typeof b=="function"&&b(),typeof S=="function"&&S()}},[]),j.useEffect(()=>{c(y=>{var b;return{...y,customerId:y.customerId||((b=t[0])==null?void 0:b.id)||""}})},[t]),j.useEffect(()=>{c(y=>{var b;return{...y,coachId:y.coachId||((b=n[0])==null?void 0:b.id)||""}})},[n]);const R=y=>{const{name:b,value:S}=y.target;c(N=>({...N,[b]:S}))},M=y=>{if(y.preventDefault(),!r.customerId||!r.coachId){T({type:"error",message:"Selecteer zowel een klant als een coach."});return}I(!0),T(null),lO({customerId:r.customerId,coachId:r.coachId}).then(()=>{T({type:"success",message:"Toewijzing opgeslagen."})}).catch(b=>{T({type:"error",message:(b==null?void 0:b.message)||"Toewijzing mislukt."})}).finally(()=>{I(!1)})},U=j.useMemo(()=>{const y=new Map;return t.forEach(b=>y.set(b.id,b)),n.forEach(b=>y.set(b.id,b)),y},[t,n]),v=()=>{if(!D)return null;const b=D.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return l.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${b}`,children:D.message})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Assignments"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Pair customers with their coaches and keep the overview tidy."})]}),v(),l.jsxs("form",{onSubmit:M,className:"grid gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm sm:grid-cols-4 sm:items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Customer"}),l.jsxs("select",{name:"customerId",value:r.customerId,onChange:R,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:u||t.length===0,children:[u?l.jsx("option",{value:"",children:"Laden..."}):null,!u&&t.length===0?l.jsx("option",{value:"",children:"Geen klanten beschikbaar"}):null,t.map(y=>l.jsx("option",{value:y.id,children:y.name||y.email},y.id))]})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Coach"}),l.jsxs("select",{name:"coachId",value:r.coachId,onChange:R,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:f||n.length===0,children:[f?l.jsx("option",{value:"",children:"Laden..."}):null,!f&&n.length===0?l.jsx("option",{value:"",children:"Geen coaches beschikbaar"}):null,n.map(y=>l.jsx("option",{value:y.id,children:y.name||y.email},y.id))]})]}),l.jsx("div",{className:"sm:col-span-1",children:l.jsx("button",{type:"submit",disabled:C||!r.customerId||!r.coachId,className:"inline-flex w-full items-center justify-center rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:C?"Bezig...":"Assign"})})]}),_.customers?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Klanten konden niet geladen worden: ",_.customers.message||"Onbekende fout"]}):null,_.coaches?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Coaches konden niet geladen worden: ",_.coaches.message||"Onbekende fout"]}):null,_.assignments?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Toewijzingen konden niet geladen worden: ",_.assignments.message||"Onbekende fout"]}):null,l.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3",children:"Customer"}),l.jsx("th",{className:"px-4 py-3",children:"Coach"}),l.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:g?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"Toewijzingen laden..."})}):i.length===0?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"No assignments yet."})}):i.map(y=>{var b,S,N,k;return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:((b=U.get(y.customerId))==null?void 0:b.name)||((S=U.get(y.customerId))==null?void 0:S.email)||"Onbekende klant"}),l.jsx("td",{className:"px-4 py-3",children:((N=U.get(y.coachId))==null?void 0:N.name)||((k=U.get(y.coachId))==null?void 0:k.email)||"Onbekende coach"}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:y.status})})]},y.id)})})]})})]})},zu=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Math.random().toString(36).slice(2,10)}`,Bu=()=>({id:zu(),code:"",title:"",description:"",desiredOutcome:"",subjectKnowledge:"",behavioralComponents:""}),qc=()=>({id:zu(),code:"",title:"",competencies:[Bu()]}),Bb=()=>({id:null,name:"",description:"",competencyGroups:[qc()]}),uO=t=>{if(!t)return"-";try{const e=typeof t=="string"?new Date(t):t;return Number.isNaN(e.getTime())?"-":new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"short",day:"numeric"}).format(e)}catch{return"-"}},dO=(t,e=0)=>({id:zu(),code:(t==null?void 0:t.code)||"",title:(t==null?void 0:t.title)||"",order:(t==null?void 0:t.order)??e,competencies:Array.isArray(t==null?void 0:t.competencies)&&t.competencies.length>0?[...t.competencies].sort((n,s)=>((n==null?void 0:n.order)??(n==null?void 0:n.competencyOrder)??0)-((s==null?void 0:s.order)??(s==null?void 0:s.competencyOrder)??0)).map(n=>({id:zu(),code:(n==null?void 0:n.code)||"",title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",desiredOutcome:(n==null?void 0:n.desiredOutcome)||"",subjectKnowledge:(n==null?void 0:n.subjectKnowledge)||"",behavioralComponents:(n==null?void 0:n.behavioralComponents)||""})):[Bu()]}),hO=()=>{const[t,e]=j.useState([]),[n,s]=j.useState(!0),[i,a]=j.useState(null),[r,c]=j.useState(null),[u,d]=j.useState(!1),[f,m]=j.useState(null),[g,x]=j.useState(Bb),[C,I]=j.useState(!1),[D,T]=j.useState(null),[_,w]=j.useState(null),R=!!g.id,M=C||u,U=j.useCallback(async()=>{s(!0),a(null);try{const G=await Nt("/trajects"),Q=Array.isArray(G)?G:[];return e(Q),Q}catch(G){const Q=(G==null?void 0:G.message)||"Kon trajecten niet ophalen";return a(Q),e([]),[]}finally{s(!1)}},[]),v=j.useCallback(()=>{c(null),x(Bb()),m(null),T(null),w(null)},[]),y=j.useCallback(async G=>{if(G){d(!0),m(null);try{const Q=await Nt(`/trajects/${G}`),te=(Array.isArray(Q==null?void 0:Q.competencyGroups)?Q.competencyGroups:[]).map((ue,_e)=>dO(ue,_e)).sort((ue,_e)=>(ue.order??0)-(_e.order??0)).map(({order:ue,..._e})=>_e);x({id:(Q==null?void 0:Q.id)||G,name:(Q==null?void 0:Q.name)||"",description:(Q==null?void 0:Q.description)||"",competencyGroups:te.length>0?te:[qc()]}),c(G)}catch(Q){const Z=(Q==null?void 0:Q.message)||"Kon traject niet laden";m(Z)}finally{d(!1)}}},[]);j.useEffect(()=>{U()},[U]),j.useEffect(()=>{if(!_&&!D)return()=>{};const G=setTimeout(()=>{w(null),T(null)},4e3);return()=>clearTimeout(G)},[_,D]);const b=G=>{const{name:Q,value:Z}=G.target;x(te=>({...te,[Q]:Z}))},S=(G,Q,Z)=>{x(te=>({...te,competencyGroups:te.competencyGroups.map(ue=>ue.id===G?{...ue,[Q]:Z}:ue)}))},N=()=>{M||x(G=>({...G,competencyGroups:[...G.competencyGroups,qc()]}))},k=G=>{M||x(Q=>{const Z=Q.competencyGroups.filter(te=>te.id!==G);return{...Q,competencyGroups:Z.length>0?Z:[qc()]}})},A=(G,Q,Z,te)=>{x(ue=>({...ue,competencyGroups:ue.competencyGroups.map(_e=>_e.id!==G?_e:{..._e,competencies:_e.competencies.map(fn=>fn.id===Q?{...fn,[Z]:te}:fn)})}))},Ee=G=>{M||x(Q=>({...Q,competencyGroups:Q.competencyGroups.map(Z=>Z.id===G?{...Z,competencies:[...Z.competencies,Bu()]}:Z)}))},Ie=(G,Q)=>{M||x(Z=>({...Z,competencyGroups:Z.competencyGroups.map(te=>{if(te.id!==G)return te;const ue=te.competencies.filter(_e=>_e.id!==Q);return{...te,competencies:ue.length>0?ue:[Bu()]}})}))},K=j.useMemo(()=>g.competencyGroups.map((G,Q)=>{const Z=G.code.trim(),te=G.title.trim(),ue=G.competencies.map((_e,fn)=>{const Mo={code:_e.code.trim(),title:_e.title.trim(),description:_e.description.trim(),desiredOutcome:_e.desiredOutcome.trim(),subjectKnowledge:_e.subjectKnowledge.trim(),behavioralComponents:_e.behavioralComponents.trim()};return Object.values(Mo).some(Or=>Or.length>0)?{...Mo,rawId:_e.id,groupId:G.id,competencyIndex:fn}:null}).filter(Boolean);return{id:G.id,groupIndex:Q,trimmedCode:Z,trimmedTitle:te,competencies:ue}}).filter(G=>G.trimmedCode||G.trimmedTitle||G.competencies.length>0),[g.competencyGroups]),P=j.useMemo(()=>K.some(G=>!G.trimmedCode||!G.trimmedTitle),[K]),F=j.useMemo(()=>K.some(G=>G.competencies.some(Q=>!Q.code||!Q.title||!Q.desiredOutcome||!Q.subjectKnowledge||!Q.behavioralComponents)),[K]),L=j.useMemo(()=>K.filter(G=>G.competencies.length>0),[K]),H=j.useMemo(()=>!(M||!g.name.trim()||L.length===0||P||F),[M,g.name,L,P,F]),$=async G=>{var Z;if(G.preventDefault(),!H)return;I(!0),T(null),w(null);const Q={name:g.name.trim(),description:g.description.trim(),competencyGroups:L.map((te,ue)=>({code:te.trimmedCode,title:te.trimmedTitle,order:ue,competencies:te.competencies.map((_e,fn)=>({code:_e.code,title:_e.title,description:_e.description,desiredOutcome:_e.desiredOutcome,subjectKnowledge:_e.subjectKnowledge,behavioralComponents:_e.behavioralComponents,order:fn}))}))};try{if(R)await y1(`/trajects/${g.id}`,Q),w("Traject bijgewerkt"),await U(),await y(g.id);else{const te=await Pn("/trajects",Q);w("Nieuw traject opgeslagen");const ue=await U(),_e=(te==null?void 0:te.id)||((Z=ue.find(fn=>fn.name===Q.name))==null?void 0:Z.id)||null;_e?await y(_e):v()}}catch(te){T((te==null?void 0:te.message)||"Opslaan mislukt")}finally{I(!1)}},W=j.useMemo(()=>t.find(G=>G.id===r)||null,[t,r]),Me=L.reduce((G,Q)=>G+Q.competencies.length,0);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Trajectbeheer"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Maak nieuwe trajecten aan of bewerk bestaande trajecten en competenties. Wijzigingen zijn direct zichtbaar voor deelnemers en coaches."})]}),l.jsxs("div",{className:"grid gap-8 xl:grid-cols-[minmax(0,1fr)_360px]",children:[l.jsxs("form",{onSubmit:$,className:"relative space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[u&&l.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-2xl bg-white/70",children:l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[l.jsx(zh,{className:"h-4 w-4 animate-spin"}),"Traject laden..."]})}),l.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-slate-50/60 p-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:R?"Bewerk traject":"Nieuw traject"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:R?g.name||(W==null?void 0:W.name)||"Naamloos traject":"Maak een nieuw traject"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[R&&W&&l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700",children:[l.jsx(Li,{className:"h-3.5 w-3.5"}),"Gekoppeld: ",W.competencyCount||0," competenties"]}),l.jsx("button",{type:"button",onClick:v,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 transition hover:border-slate-300 hover:text-slate-900",children:"Nieuw traject"})]})]}),f&&l.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:f}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"traject-name",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Trajectnaam"}),l.jsx("input",{id:"traject-name",name:"name",value:g.name,onChange:b,disabled:M,placeholder:"Bijvoorbeeld: Sociaal Werk Niveau 5",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"traject-description",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Beschrijving"}),l.jsx("textarea",{id:"traject-description",name:"description",value:g.description,onChange:b,disabled:M,rows:3,placeholder:"Optioneel. Geef een korte toelichting voor coaches.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Competentie-structuur"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Groepeer competenties per betekenisvolle cluster, zoals ",l.jsx("strong",{children:"B1-K1"})," met meerdere werkprocessen."]})]}),l.jsxs("button",{type:"button",onClick:N,disabled:M,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-300",children:[l.jsx(rx,{className:"h-4 w-4"}),"Nieuw cluster"]})]}),g.competencyGroups.map((G,Q)=>l.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-5 shadow-sm",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:["Cluster ",Q+1]}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Competentiegebied"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Bijvoorbeeld B1-K1 met een herkenbare titel."})]}),l.jsxs("button",{type:"button",onClick:()=>k(G.id),disabled:M,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[l.jsx(ox,{className:"h-4 w-4"}),"Verwijder cluster"]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster code"}),l.jsx("input",{value:G.code,onChange:Z=>S(G.id,"code",Z.target.value),disabled:M,placeholder:"Bijv. B1-K1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster naam"}),l.jsx("input",{value:G.title,onChange:Z=>S(G.id,"title",Z.target.value),disabled:M,placeholder:"Bijv. Analyseren van ondersteuningsvragen",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),l.jsxs("div",{className:"space-y-4",children:[G.competencies.map((Z,te)=>l.jsxs("div",{className:"space-y-4 rounded-xl border border-slate-200 p-4 shadow-sm",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Competentie ",te+1]}),l.jsx("p",{className:"text-sm text-slate-500",children:"Vul de werkprocescode en aanvullende velden in."})]}),l.jsxs("button",{type:"button",onClick:()=>Ie(G.id,Z.id),disabled:M,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[l.jsx(ox,{className:"h-4 w-4"}),"Verwijder competentie"]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Code"}),l.jsx("input",{value:Z.code,onChange:ue=>A(G.id,Z.id,"code",ue.target.value),disabled:M,placeholder:"Bijv. B1-K1-W1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Titel"}),l.jsx("input",{value:Z.title,onChange:ue=>A(G.id,Z.id,"title",ue.target.value),disabled:M,placeholder:"Bijv. Ondersteuningsvragen analyseren",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[l.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Omschrijving"}),l.jsx("textarea",{value:Z.description,onChange:ue=>A(G.id,Z.id,"description",ue.target.value),disabled:M,rows:2,placeholder:"Optioneel. Beschrijf het werkproces kort.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gewenst resultaat"}),l.jsx("textarea",{value:Z.desiredOutcome,onChange:ue=>A(G.id,Z.id,"desiredOutcome",ue.target.value),disabled:M,rows:2,placeholder:"Wat moet er bereikt worden?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Vakkennis"}),l.jsx("textarea",{value:Z.subjectKnowledge,onChange:ue=>A(G.id,Z.id,"subjectKnowledge",ue.target.value),disabled:M,rows:2,placeholder:"Welke kennis is nodig?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gedragscomponenten"}),l.jsx("textarea",{value:Z.behavioralComponents,onChange:ue=>A(G.id,Z.id,"behavioralComponents",ue.target.value),disabled:M,rows:2,placeholder:"Welke houding wordt verwacht?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]})]},Z.id)),l.jsxs("button",{type:"button",onClick:()=>Ee(G.id),disabled:M,className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 transition hover:border-brand-400 hover:text-brand-700 disabled:cursor-not-allowed disabled:border-brand-100 disabled:text-brand-200",children:[l.jsx(rx,{className:"h-4 w-4"}),"Voeg competentie toe"]})]})]},G.id))]}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"space-y-1 text-sm",children:[_&&l.jsx("p",{className:"text-sm font-medium text-emerald-600",children:_}),D&&l.jsx("p",{className:"text-sm font-medium text-red-600",children:D}),!_&&!D&&l.jsxs("p",{className:"text-xs text-slate-500",children:["Je traject bevat ",Me," competenties verdeeld over ",L.length," clusters."]})]}),l.jsxs("button",{type:"submit",disabled:!H,className:"inline-flex items-center gap-2 rounded-full bg-brand-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-600 disabled:cursor-not-allowed disabled:bg-slate-300",children:[C?l.jsx(zh,{className:"h-4 w-4 animate-spin"}):l.jsx(Li,{className:"h-4 w-4"}),R?"Wijzigingen opslaan":"Traject opslaan"]})]})]}),l.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Trajecten"}),l.jsxs("button",{type:"button",onClick:U,disabled:n,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-slate-300 hover:text-slate-700 disabled:cursor-not-allowed disabled:text-slate-300",children:[l.jsx(uC,{className:n?"h-4 w-4 animate-spin":"h-4 w-4"}),"Vernieuwen"]})]}),n?l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[l.jsx(zh,{className:"h-4 w-4 animate-spin"})," Trajecten laden..."]}):i?l.jsx("p",{className:"text-sm text-red-600",children:i}):t.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Er zijn nog geen trajecten aangemaakt."}):l.jsx("ul",{className:"space-y-3",children:t.map(G=>{var Z;const Q=G.id===r;return l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>y(G.id),className:`w-full text-left transition focus:outline-none focus:ring-2 focus:ring-brand-200 ${Q?"rounded-xl border border-brand-300 bg-brand-50 p-4 shadow-sm":"rounded-xl border border-slate-200 p-4 shadow-sm hover:border-brand-200 hover:bg-brand-50/60"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:G.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[((Z=G.competencyGroups)==null?void 0:Z.length)||0," clusters · ",G.competencyCount||0," competenties"]})]}),Q&&l.jsx(Li,{className:"h-4 w-4 text-brand-600"})]}),l.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:["Laatst bijgewerkt: ",uO(G.updatedAt)]})]})},G.id)})})]})]})]})},fO=()=>{const[t,e]=j.useState(null),[n,s]=j.useState(null),[i,a]=j.useState(!0),[r,c]=j.useState(null);j.useEffect(()=>{let I=!0;const D=localStorage.getItem("user");if(D)try{const _=JSON.parse(D);_!=null&&_.firebaseUid&&I&&e(_.firebaseUid)}catch{}const T=nw(Oo,_=>{I&&e(w=>w||(_==null?void 0:_.uid)||null)});return()=>{I=!1,T()}},[]),j.useEffect(()=>{if(!t){a(!1);return}a(!0);const I=XT(t,({data:D,error:T})=>{if(T){c(T),a(!1);return}s(D),c(null),a(!1)});return()=>{typeof I=="function"&&I()}},[t]);const u=(n==null?void 0:n.securityClearance)||null,d=j.useMemo(()=>{if(!(u!=null&&u.badge))return lx;switch(String(u.badge).toLowerCase()){case"shield-check":case"check":return EC;case"alert":case"shield-alert":return vC;case"question":case"shield-question":return TC;default:return lx}},[u]),f=Array.isArray(n==null?void 0:n.highlights)?n.highlights:[],m=Array.isArray(n==null?void 0:n.responsibilities)?n.responsibilities:[],g=Array.isArray(n==null?void 0:n.certifications)?n.certifications:[],x=n!=null&&n.role?n.role.charAt(0).toUpperCase()+n.role.slice(1):"Admin",C=(n==null?void 0:n.name)||(n==null?void 0:n.email)||"Admin";return i?l.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Profiel laden..."}):r?l.jsxs("div",{className:"rounded-3xl border border-red-200 bg-red-50 px-6 py-8 text-center text-sm text-red-700 shadow-sm",children:["Kon profiel niet laden: ",r.message||"Onbekende fout"]}):n?l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 px-8 py-10 text-white shadow-card",children:[l.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/60",children:"Profile"}),l.jsxs("div",{className:"mt-4 flex flex-col justify-between gap-6 lg:flex-row lg:items-end",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-semibold",children:C}),l.jsx("p",{className:"mt-2 text-white/80",children:x}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/70",children:n.bio||"Nog geen biografie toegevoegd."})]}),l.jsxs("dl",{className:"grid grid-cols-3 gap-4",children:[f.length===0?l.jsx("div",{className:"col-span-3 text-sm text-white/70",children:"Nog geen statistieken vastgelegd."}):null,f.map(I=>l.jsxs("div",{className:"rounded-2xl bg-white/10 px-4 py-3 text-center shadow-inner backdrop-blur",children:[l.jsx("dt",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:I.label}),l.jsx("dd",{className:"mt-2 text-2xl font-semibold",children:I.metric})]},I.id))]})]})]}),l.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.2fr,1fr]",children:[l.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Contact & verantwoordelijkheden"}),l.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"E-mail"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.email||"-"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Telefoon"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.phone||"Niet opgegeven"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Locatie"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.location||"Niet opgegeven"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Kernverantwoordelijkheden"}),m.length===0?l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Nog geen verantwoordelijkheden toegevoegd."}):l.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:m.map(I=>l.jsxs("li",{className:"flex items-center gap-3 rounded-xl bg-slate-50 px-3 py-2",children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-brand-500"}),l.jsx("span",{children:I})]},I))})]})]})]}),l.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Beveiliging"}),l.jsxs("div",{className:"mt-4 flex items-center gap-4 rounded-2xl bg-brand-50 px-4 py-5 text-brand-700",children:[d?l.jsx(d,{className:"h-10 w-10"}):null,l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold",children:["Toegangsniveau: ",(u==null?void 0:u.level)||"Onbekend"]}),l.jsxs("p",{className:"text-sm text-brand-600",children:["Laatste verlenging: ",(u==null?void 0:u.renewedOn)||"Niet geregistreerd"]})]})]}),l.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Administratieve gebruikers hebben uitgebreide rechten om deelnemers, coaches en bewijsstukken te beheren. Houd de logboeken in de gaten en plan jaarlijkse veiligheidsaudits."})]})]}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Certificeringen & professionalisering"}),l.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[g.length===0?l.jsx("p",{className:"col-span-full text-sm text-slate-500",children:"Nog geen certificeringen geregistreerd."}):null,g.map(I=>l.jsxs("article",{className:"rounded-2xl border border-slate-100 p-4 shadow-sm transition hover:border-brand-300 hover:shadow-md",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:I.title||"Certificering"}),l.jsx("p",{className:"text-xs text-slate-500",children:I.issuer||"Onbekende instantie"}),l.jsxs("p",{className:"mt-3 text-xs uppercase tracking-[0.2em] text-slate-400",children:["Behaald in ",I.year||"-"]})]},I.id))]})]})]}):l.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Geen profielgegevens gevonden. Zorg dat je account is gekoppeld aan Firebase."})},mO=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],qb={name:"",email:"",password:"",role:"customer",trajectId:""},pO=({status:t})=>{if(!(t!=null&&t.message))return null;const e=t.type==="error",n=e?Fj:Li,s=e?"text-red-600 bg-red-50 border-red-200":"text-emerald-600 bg-emerald-50 border-emerald-200";return l.jsxs("div",{className:`mb-6 flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${s}`,children:[l.jsx(n,{className:"h-5 w-5"}),l.jsx("span",{children:t.message})]})},gO=()=>{const[t,e]=j.useState([]),[n,s]=j.useState(qb),[i,a]=j.useState(!1),[r,c]=j.useState(null),[u,d]=j.useState(!1),[f,m]=j.useState([]),[g,x]=j.useState(!1),C=j.useMemo(()=>{const w=new Map;return f.forEach(R=>{w.set(R.id,R)}),w},[f]),I=async()=>{d(!0);try{const w=await Nt("/auth/admin/users");e(Array.isArray(w)?w:[])}catch(w){c({type:"error",message:(w==null?void 0:w.message)||"Kon gebruikers niet laden"})}finally{d(!1)}},D=async()=>{x(!0);try{const w=await Nt("/trajects"),R=Array.isArray(w)?w:[];m(R),s(M=>{var U;return{...M,trajectId:((U=R[0])==null?void 0:U.id)||""}})}catch(w){c({type:"error",message:(w==null?void 0:w.message)||"Kon trajecten niet laden"})}finally{x(!1)}};j.useEffect(()=>{I(),D()},[]);const T=w=>{const{name:R,value:M}=w.target;s(U=>{var v;if(R==="role"){if(M==="customer"){const y=((v=f[0])==null?void 0:v.id)||U.trajectId||"";return{...U,role:M,trajectId:y}}return{...U,role:M}}return{...U,[R]:M}})},_=async w=>{var R,M;w.preventDefault(),a(!0),c(null);try{const U={name:n.name.trim(),email:n.email.trim(),password:n.password,role:n.role,trajectId:n.role==="customer"?n.trajectId:null};await Pn("/auth/admin/users",U),c({type:"success",message:"Account aangemaakt"}),s({...qb,trajectId:((R=f[0])==null?void 0:R.id)||""}),await I()}catch(U){c({type:"error",message:((M=U==null?void 0:U.data)==null?void 0:M.error)||(U==null?void 0:U.message)||"Aanmaken mislukt"})}finally{a(!1)}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Admin"}),l.jsx("h1",{className:"mt-1 text-2xl font-semibold text-slate-900",children:"Beheer gebruikers"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Maak nieuwe accounts voor coaches en deelnemers."})]}),l.jsxs("div",{className:"hidden items-center gap-2 rounded-full bg-brand-50 px-4 py-2 text-sm font-medium text-brand-600 sm:flex",children:[l.jsx(wo,{className:"h-4 w-4"}),l.jsxs("span",{children:[t.length," actieve gebruikers"]})]})]}),l.jsx(pO,{status:r}),l.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[l.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx(g1,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nieuw account"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Voer de gegevens in en kies de juiste rol."})]})]}),l.jsxs("form",{onSubmit:_,className:"mt-6 space-y-5",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Volledige naam"}),l.jsx("input",{id:"user-name",name:"name",value:n.name,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Kim de Vries",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),l.jsx("input",{id:"user-email",name:"email",type:"email",value:n.email,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"jij@voorbeeld.nl",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),l.jsx("input",{id:"user-password",name:"password",type:"password",value:n.password,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Minimaal 8 tekens",required:!0}),l.jsx("p",{className:"text-xs text-slate-400",children:"De gebruiker kan dit wachtwoord later wijzigen."})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),l.jsx("select",{id:"user-role",name:"role",value:n.role,onChange:T,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:mO.map(w=>l.jsx("option",{value:w.value,children:w.label},w.value))})]}),n.role==="customer"?l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-traject",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Traject"}),l.jsxs("select",{id:"user-traject",name:"trajectId",value:n.trajectId,onChange:T,disabled:g||f.length===0,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:text-slate-400",required:!0,children:[f.length===0?l.jsx("option",{value:"",children:"Geen trajecten beschikbaar"}):null,f.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))]}),l.jsx("p",{className:"text-xs text-slate-400",children:"Wijs deze deelnemer aan een traject toe. Dit bepaalt welke competenties zichtbaar zijn."})]}):null,l.jsx("button",{type:"submit",disabled:i,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:i?"Account aanmaken...":"Account aanmaken"})]})]}),l.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bestaande gebruikers"}),l.jsx("span",{className:"text-xs font-medium uppercase tracking-[0.2em] text-slate-400",children:u?"Bezig met laden...":"Laatste update"})]}),l.jsx("div",{className:"mt-4 max-h-[420px] space-y-4 overflow-y-auto pr-2",children:t.length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 p-6 text-sm text-slate-500",children:"Nog geen gebruikers gevonden. Voeg de eerste toe via het formulier hiernaast."}):t.map(w=>{var R;return l.jsxs("article",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:w.name||"Naam onbekend"}),l.jsx("p",{className:"text-xs text-slate-500",children:w.email}),w.trajectId?l.jsxs("p",{className:"text-xs text-slate-400",children:["Traject: ",((R=C.get(w.trajectId))==null?void 0:R.name)||w.trajectId]}):null]}),l.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:w.role})]},w.id)})})]})]})]})},yO=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],xO=()=>{const[t,e]=j.useState({name:"",email:"",password:"",role:"customer"}),[n,s]=j.useState(!1),[i,a]=j.useState(null),r=j.useMemo(()=>!!localStorage.getItem("token"),[]),c=d=>{const{name:f,value:m}=d.target;e(g=>({...g,[f]:m}))},u=async d=>{var f;d.preventDefault(),s(!0),a(null);try{const m={name:t.name.trim(),email:t.email.trim(),password:t.password,role:t.role};await Pn("/auth/admin/users",m),a({type:"success",message:"Account aangemaakt"}),e({name:"",email:"",password:"",role:"customer"})}catch(m){const g=((f=m==null?void 0:m.data)==null?void 0:f.error)||(m==null?void 0:m.message)||"Aanmaken mislukt";a({type:"error",message:g})}finally{s(!1)}};return l.jsx(bn,{kicker:"Testing",title:"Test account aanmaken",description:"Gebruik dit formulier om snel een account aan te maken via de admin endpoint.",children:l.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx(g1,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Nieuwe gebruiker"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Je moet zijn ingelogd als admin zodat de API-token aanwezig is."})]})]}),r?null:l.jsx("p",{className:"mt-4 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-600",children:"Er is geen API-token gevonden. Log eerst in als admin (via /login) en probeer het daarna opnieuw."}),i!=null&&i.message?l.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${i.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:i.message}):null,l.jsxs("form",{onSubmit:u,className:"mt-6 space-y-5",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Naam"}),l.jsx("input",{id:"test-name",name:"name",value:t.name,onChange:c,placeholder:"Bijv. Daniël Vermeer",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),l.jsx("input",{id:"test-email",name:"email",type:"email",value:t.email,onChange:c,placeholder:"jij@voorbeeld.nl",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),l.jsx("input",{id:"test-password",name:"password",type:"password",value:t.password,onChange:c,placeholder:"Minimaal 8 tekens",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),l.jsx("select",{id:"test-role",name:"role",value:t.role,onChange:c,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:yO.map(d=>l.jsx("option",{value:d.value,children:d.label},d.value))})]}),l.jsx("button",{type:"submit",disabled:n,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:n?"Bezig...":"Account aanmaken"})]})]})})},bO=[{to:"/customer/planning",label:"Bekijk planning"},{to:"/customer/messages",label:"Berichten"},{to:"/customer/profile",label:"Profiel"}],vO=()=>l.jsxs("div",{className:"space-y-10",children:[l.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Hoe werkt jouw EVC-traject?"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Volg onderstaande stappen en gebruik de links om snel naar de belangrijkste onderdelen te gaan."}),l.jsx("div",{className:"mt-6 flex flex-wrap gap-3",children:bO.map(t=>l.jsx(Cl,{to:t.to,className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600",children:t.label},t.to))})]}),l.jsxs("section",{className:"rounded-3xl border border-dashed border-slate-200 bg-slate-50 p-6 text-sm text-slate-500",children:[l.jsx("p",{children:"Hier komt later informatie over het stappenplan, belangrijke deadlines, en tips voor het verzamelen van bewijsstukken."}),l.jsx("p",{className:"mt-3",children:"Voor nu kun je alvast de andere pagina's verkennen via de buttons hierboven."})]})]});function _O(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,name:e.name||"",description:e.description||"",competencyCount:e.competencyCount??null,...e}}function Hb(t){return t?Array.isArray(t)?t.filter(e=>e!=null):typeof t=="string"?t.split(/\r?\n/).map(e=>e.trim()).filter(Boolean):[t]:[]}function EO(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,code:e.code||"",title:e.title||"",description:e.description||"",desiredOutcome:e.desiredOutcome||e.gewenstResultaat||"",subjectKnowledge:Hb(e.subjectKnowledge||e.vakkennis||e.vakkennisEnVaardigheden),behavioralComponents:Hb(e.behavioralComponents||e.gedragsComponenten||e.behavioral||e.gedragscomponenten),groupCode:e.groupCode||"",groupTitle:e.groupTitle||"",groupOrder:e.groupOrder??0,competencyOrder:e.competencyOrder??0,order:e.order??0}}function Fb(t){var n,s;if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,name:e.name||"",email:e.email||"",role:e.role||"",trajectId:e.trajectId||null,coachId:e.coachId||null,lastActivity:e.lastActivity?((s=(n=e.lastActivity).toDate)==null?void 0:s.call(n))??e.lastActivity:null}}async function wO(t){if(!t)return null;const e=mr(dn,"trajects",t),n=await G6(e);return _O(n)}function TO(t){return!Array.isArray(t)||t.length===0?null:t.map(e=>{var s,i;const n=e.data()||{};return{id:e.id,coachId:n.coachId||null,customerId:n.customerId||null,status:n.status||"",createdAt:n.createdAt?((i=(s=n.createdAt).toDate)==null?void 0:i.call(s))??n.createdAt:null}}).sort((e,n)=>{const s=e.createdAt instanceof Date?e.createdAt.getTime():0;return(n.createdAt instanceof Date?n.createdAt.getTime():0)-s})[0]}function SO(t,e){if(!t)return e({customer:null,coach:null,assignment:null,error:new Error("Missing user id")}),()=>{};let n=null,s={customer:null,coach:null,assignment:null};const i=(f={},m=null)=>{s={...s,...f},e({...s,error:m})},a=f=>{if(n&&(n(),n=null),!f){i({coach:null});return}n=rs(mr(dn,"users",f),m=>i({coach:Fb(m)}),m=>i({},m))},r=rs(mr(dn,"users",t),f=>{const m=Fb(f);i({customer:m}),m!=null&&m.coachId&&a(m.coachId)},f=>i({},f)),c=fr(dn,"assignments"),u=Od(c,Uu("customerId","==",t)),d=rs(u,f=>{const m=TO(f.docs);i({assignment:m}),m!=null&&m.coachId?a(m.coachId):s.coach||i({})},f=>i({},f));return()=>{r(),d(),n&&n()}}function NO(t,e){if(!t)return e({data:[],error:new Error("Missing trajectId")}),()=>{};const n=Od(fr(dn,"competencies"),Uu("trajectId","==",t)),s=fr(dn,"trajects",t,"competencies");let i=[],a=[];const r=(d=null)=>{const m=(i.length>0?i:a).map(EO).filter(Boolean).sort((g,x)=>g.groupOrder!==x.groupOrder?g.groupOrder-x.groupOrder:g.competencyOrder!==x.competencyOrder?g.competencyOrder-x.competencyOrder:g.order!==x.order?g.order-x.order:(g.title||"").localeCompare(x.title||""));e({data:m,error:d})},c=rs(n,d=>{i=d.docs,r()},d=>{i=[],r(d)}),u=rs(s,d=>{a=d.docs,i.length===0&&r()},d=>{a=[],i.length===0&&r(d)});return()=>{c(),u()}}const AO=()=>{const{customer:t,coach:e}=Rp(),[n,s]=j.useState(null),[i,a]=j.useState([]),[r,c]=j.useState([]),[u,d]=j.useState(!0),[f,m]=j.useState(!0),[g,x]=j.useState(null),[C,I]=j.useState(null),[D,T]=j.useState(null),[_,w]=j.useState({}),[R,M]=j.useState({}),[U,v]=j.useState({}),y=j.useRef({}),[b]=j.useState(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}}),S=j.useCallback(async()=>{var L;d(!0),x(null);try{const H=await Nt("/customer/planning");if(H!=null&&H.traject&&s(H.traject),Array.isArray(H==null?void 0:H.competencies)){const $={};H.competencies.forEach(W=>{const Me=W.id||W.code;Me&&($[Me]=Array.isArray(W.uploads)?W.uploads:[])}),w($)}else w({})}catch(H){x(((L=H==null?void 0:H.data)==null?void 0:L.error)||(H==null?void 0:H.message)||"Kon planning niet laden")}finally{d(!1)}},[]);j.useEffect(()=>{S()},[S]);const N=(n==null?void 0:n.id)||(b==null?void 0:b.trajectId)||(t==null?void 0:t.trajectId)||null;j.useEffect(()=>{if(!N){a([]),I(null),m(!1);return}m(!0);const L=NO(N,({data:H,error:$})=>{if($){I($),m(!1);return}I(null),a(Array.isArray(H)?H:[]),m(!1)});return()=>{typeof L=="function"&&L()}},[N]),j.useEffect(()=>{if(n||!N)return;let L=!1;return wO(N).then(H=>{!L&&H&&s($=>$||H)}).catch(()=>{}),()=>{L=!0}},[n,N]);const k=u||f,A=L=>{if(!(R[L]||"").trim()){v(W=>({...W,[L]:"Geef een naam op voor je upload."}));return}v(W=>{if(!W[L])return W;const Me={...W};return delete Me[L],Me});const $=y.current[L];$&&$.click()},Ee=async(L,H)=>{var Q,Z;const $=(Q=H.target.files)==null?void 0:Q[0];if(!$)return;H.target.value="";const W=N;if(!W){x("Er is geen traject gekoppeld aan dit account.");return}const Me=(R[L]||"").trim();if(!Me){v(te=>({...te,[L]:"Geef een naam op voor je upload."}));return}const G=new FormData;G.append("file",$),G.append("name",Me),G.append("trajectId",W),G.append("competencyId",L),T(L),x(null);try{await fd("/evidence/upload",G),await S(),M(te=>({...te,[L]:""})),v(te=>{if(!te[L])return te;const ue={...te};return delete ue[L],ue})}catch(te){x(((Z=te==null?void 0:te.data)==null?void 0:Z.error)||(te==null?void 0:te.message)||"Uploaden mislukt")}finally{T(null)}},Ie=L=>{c(H=>H.includes(L)?H.filter($=>$!==L):[...H,L])},K=(L,H)=>{M($=>({...$,[L]:H})),v($=>{if(!$[L])return $;const W={...$};return delete W[L],W})};j.useEffect(()=>{c(L=>{const H=new Set(i.map((W,Me)=>W.id||W.code||String(Me))),$=L.filter(W=>H.has(W));return $.length===L.length?L:$})},[i]),j.useEffect(()=>{const L=new Set(i.map((H,$)=>H.id||H.code||String($)));M(H=>{const $={};return L.forEach(W=>{H[W]!==void 0&&($[W]=H[W])}),Object.keys($).length===Object.keys(H).length?H:$}),v(H=>{const $={};return L.forEach(W=>{H[W]&&($[W]=H[W])}),Object.keys($).length===Object.keys(H).length?H:$})},[i]);const P=(L,H)=>!L||L.length===0?l.jsx("p",{className:"mt-2 text-sm text-slate-400",children:H}):l.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:L.map(($,W)=>l.jsxs("li",{className:"flex items-start gap-3 rounded-xl bg-white/70 px-3 py-2 shadow-sm",children:[l.jsx("span",{className:"mt-1 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-brand-500"}),l.jsx("span",{className:"leading-relaxed",children:String($)})]},`${$}-${W}`))}),F=L=>L?_[L.id]||_[L.code]||[]:[];return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:"Planning"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Jouw competenties en bewijsstukken"}),l.jsxs("p",{className:"max-w-2xl text-sm text-slate-500",children:["Bekijk welke competenties onderdeel zijn van je traject en voeg eenvoudig nieuwe bewijsstukken toe.",e?` Je coach ${e.name} kijkt mee en geeft feedback.`:""]}),n?l.jsxs("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:["Traject: ",n.name]}):null]}),k?l.jsx(xs,{label:"Planning laden"}):null,g&&!k?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:g}):null,C&&!k?l.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:["Kon competenties niet laden: ",C.message||"Onbekende fout"]}):null,!k&&!N?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er is nog geen traject aan jouw account gekoppeld."}):null,!k&&N&&i.length===0?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er zijn nog geen competenties gekoppeld aan jouw traject."}):null,l.jsx("section",{className:"space-y-4",children:i.map((L,H)=>{const $=L.id||L.code||String(H),W=r.includes($),Me=F(L),G=`competency-${$}`;return l.jsxs("article",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm transition-shadow hover:shadow-md",children:[l.jsxs("button",{type:"button",onClick:()=>Ie($),className:"flex w-full items-center justify-between gap-4 px-6 py-5 text-left","aria-expanded":W,"aria-controls":G,children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"inline-flex w-fit items-center gap-2 rounded-full bg-brand-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600",children:L.code||"Code ontbreekt"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:L.title||"Competentie zonder titel"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"hidden items-center gap-2 rounded-full bg-brand-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 sm:inline-flex",children:[l.jsx(Li,{className:"h-4 w-4"})," Actief"]}),l.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-full border border-slate-200 text-slate-500 transition-all duration-300 ${W?"rotate-180 border-brand-200 bg-brand-50 text-brand-600 shadow-inner":""}`,children:l.jsx(h1,{className:"h-4 w-4"})})]})]}),l.jsx("div",{id:G,className:`px-6 ${W?"pb-6":"hidden"}`,hidden:!W,children:l.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-100 bg-slate-50/80 px-5 py-5 text-slate-600",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Omschrijving"}),l.jsx("p",{className:"mt-2 text-base leading-relaxed text-slate-600",children:L.description||"Geen omschrijving beschikbaar."})]}),l.jsxs("div",{className:"rounded-2xl bg-white px-4 py-4 shadow-inner",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Gewenst resultaat"}),l.jsx("p",{className:"mt-2 text-sm leading-relaxed text-slate-600",children:L.desiredOutcome||"Nog niet vastgelegd."})]}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Vakkennis & vaardigheden"}),P(L.subjectKnowledge,"Nog geen vakkennis vastgelegd.")]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Gedragscomponenten"}),P(L.behavioralComponents,"Nog geen gedragscomponenten vastgelegd.")]}),l.jsxs("div",{className:"space-y-3 rounded-2xl bg-white px-4 py-4 shadow-inner",children:[l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:["Uploads (",Me.length,")"]}),Me.length===0?l.jsx("p",{className:"text-sm text-slate-400",children:'Nog geen bestanden. Klik op "Voeg upload toe" om te starten.'}):l.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:Me.map(Q=>l.jsxs("li",{className:"flex items-center gap-3 rounded-xl bg-white px-3 py-2 shadow-sm",children:[l.jsx(em,{className:"h-4 w-4 text-slate-400"}),l.jsx("span",{className:"truncate text-sm leading-snug",children:Q.name}),l.jsx("button",{type:"button",className:"ml-auto text-xs font-semibold text-brand-600 transition hover:text-brand-500",onClick:()=>Q.filePath?window.open(Q.filePath,"_blank"):null,children:Q.filePath?"Download":"Bekijk"})]},Q.id||Q.name))}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Naam van je upload"}),l.jsx("input",{type:"text",value:R[$]||"",onChange:Q=>K($,Q.target.value),placeholder:"Bijvoorbeeld: Reflectieverslag week 3",className:`mt-2 w-full rounded-full border px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 ${U[$]?"border-red-300 focus:ring-red-300":"border-slate-200 focus:border-brand-400"}`}),U[$]?l.jsx("p",{className:"mt-1 text-xs text-red-500",children:U[$]}):null]}),l.jsx("input",{ref:Q=>{Q?y.current[$]=Q:delete y.current[$]},type:"file",className:"hidden",onChange:Q=>Ee(L.id||L.code||$,Q)}),l.jsxs("button",{type:"button",onClick:()=>A($),disabled:D===(L.id||L.code||$),className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-2 text-xs font-semibold text-brand-600 transition hover:border-brand-400 hover:bg-brand-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-400",children:[l.jsx(em,{className:"h-4 w-4"}),D===(L.id||L.code||$)?"Bezig...":"Voeg upload toe"]})]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 rounded-2xl bg-white px-4 py-3 text-sm text-slate-500 shadow-inner",children:[l.jsx(p1,{className:"h-4 w-4 text-brand-500"}),l.jsx("span",{className:"leading-relaxed",children:"Heb je vragen? Laat een bericht achter bij je coach in het berichtenoverzicht."})]})]})})]},$)})})]})},JT=({threads:t=[],activeThreadId:e,onSelectThread:n,messages:s=[],draft:i,onDraftChange:a,onSend:r,emptyLabel:c="No thread selected"})=>l.jsxs("div",{className:"grid h-[600px] grid-cols-1 overflow-hidden rounded-3xl bg-white shadow-card lg:grid-cols-[280px,1fr]",children:[l.jsxs("aside",{className:"border-r border-slate-100",children:[l.jsx("div",{className:"px-4 py-4",children:l.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Conversations"})}),l.jsx("div",{className:"h-full overflow-y-auto px-2 pb-6",children:l.jsxs("ul",{className:"space-y-1",children:[t.map(u=>l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>n==null?void 0:n(u.id),className:`w-full rounded-2xl px-4 py-3 text-left text-sm transition ${e===u.id?"bg-brand-50 text-brand-700":"text-slate-600 hover:bg-slate-50"}`,children:[l.jsx("p",{className:"font-semibold text-slate-900",children:u.name}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:u.lastMessage})]})},u.id)),t.length===0?l.jsx("li",{className:"px-4 py-12 text-center text-sm text-slate-400",children:"No threads yet."}):null]})})]}),l.jsxs("section",{className:"flex flex-1 flex-col",children:[l.jsx("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto px-6 py-6",children:s.length===0?l.jsx("div",{className:"m-auto text-center text-sm text-slate-400",children:l.jsx("p",{children:c})}):s.map(u=>l.jsxs("div",{className:`max-w-md rounded-2xl px-4 py-3 text-sm shadow-sm ${u.from==="me"?"self-end bg-brand-600 text-white":"bg-slate-100 text-slate-700"}`,children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:u.author}),l.jsx("p",{className:"mt-1 whitespace-pre-line",children:u.body}),l.jsx("p",{className:"mt-2 text-[10px] uppercase tracking-wide opacity-60",children:u.timestamp})]},u.id))}),l.jsx("form",{onSubmit:u=>{u.preventDefault(),r==null||r()},className:"border-t border-slate-100 bg-slate-50/60 px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3 rounded-full bg-white px-4 py-2 shadow-inner",children:[l.jsx("input",{type:"text",value:i??"",onChange:u=>a==null?void 0:a(u.target.value),placeholder:"Type a message",className:"flex-1 border-none bg-transparent text-sm outline-none focus:ring-0"}),l.jsxs("button",{type:"submit",className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white shadow-lg transition hover:bg-brand-500",children:[l.jsx(gC,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Send message"})]})]})})]})]}),jO=()=>{const{customer:t,coach:e,account:n}=Rp(),s=(n==null?void 0:n.id)??null,[i,a]=j.useState([]),[r,c]=j.useState({}),[u,d]=j.useState(""),[f,m]=j.useState({}),[g,x]=j.useState(!1),[C,I]=j.useState(null),[D,T]=j.useState(!1),_=j.useCallback(U=>{const v=new Map;U.forEach(N=>{const k=(N==null?void 0:N.fromUser)||{},A=(N==null?void 0:N.toUser)||{},Ee=(k==null?void 0:k.id)===s,Ie=Ee?A:k;if(!(Ie!=null&&Ie.id))return;const K=String(Ie.id);v.has(K)||v.set(K,{id:K,name:Ie.name||Ie.email||"Contactpersoon",targetUserId:Ie.id,lastMessage:"",lastTimestamp:0,messages:[]});const P=v.get(K),F=N.createdAt?new Date(N.createdAt):null,L=F?F.getTime():Date.now(),H=Ee?(t==null?void 0:t.name)||"Ik":Ie.name||Ie.email||"Contactpersoon";P.messages.push({id:N.id,author:H,body:N.content||"",from:Ee?"me":"other",timestamp:F?F.toLocaleString():"",timestampMs:L}),P.lastMessage=N.content||P.lastMessage,P.lastTimestamp=Math.max(P.lastTimestamp,L)});const y=Array.from(v.values()).sort((N,k)=>k.lastTimestamp-N.lastTimestamp),b=y.map(({id:N,name:k,lastMessage:A,targetUserId:Ee})=>({id:N,name:k,lastMessage:A,targetUserId:Ee})),S={};return y.forEach(N=>{const k=N.messages.sort((A,Ee)=>A.timestampMs-Ee.timestampMs).map(({timestampMs:A,...Ee})=>Ee);S[N.id]=k}),{threads:b,messagesByThread:S}},[s,t==null?void 0:t.name]),w=j.useCallback(async()=>{var U;if(!s){a([]),c({}),d(""),x(!1);return}x(!0);try{const v=await Nt("/messages"),y=_(Array.isArray(v)?v:[]);a(y.threads),c(y.messagesByThread),d(b=>{var S;return b&&y.threads.some(N=>N.id===b)?b:((S=y.threads[0])==null?void 0:S.id)??""}),I(null)}catch(v){I(((U=v==null?void 0:v.data)==null?void 0:U.error)||(v==null?void 0:v.message)||"Berichten laden mislukt")}finally{x(!1)}},[s,_]);j.useEffect(()=>{w()},[w]);const R=j.useMemo(()=>r[u]??[],[r,u]),M=async()=>{var b;const v=(f[u]??"").trim();if(!v)return;const y=i.find(S=>S.id===u);if(!(y!=null&&y.targetUserId)){I("Geen ontvanger gekoppeld aan dit gesprek.");return}T(!0);try{await Pn("/messages/send",{toUserId:y.targetUserId,content:v}),m(S=>({...S,[u]:""})),await w()}catch(S){I(((b=S==null?void 0:S.data)==null?void 0:b.error)||(S==null?void 0:S.message)||"Versturen mislukt")}finally{T(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Berichten"}),l.jsxs("p",{className:"mt-2 max-w-2xl text-sm text-slate-500",children:["Chat rechtstreeks met je coach",e?` ${e.name}`:"",". Gebruik dit kanaal voor vragen en updates."]})]}),C?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:C}):null,g?l.jsx(xs,{label:"Berichten laden"}):l.jsx(JT,{threads:i,activeThreadId:u,onSelectThread:d,messages:R,draft:f[u]??"",onDraftChange:U=>m(v=>({...v,[u]:U})),onSend:M,emptyLabel:i.length===0?"Nog geen berichten. Start een gesprek met je coach.":"Selecteer een gesprek"}),D?l.jsx("p",{className:"text-xs text-slate-400",children:"Bericht wordt verzonden…"}):null]})},CO={dateOfBirth:"",placeOfBirth:"",nationality:"",phoneFixed:"",phoneMobile:"",street:"",houseNumber:"",addition:"",postalCode:"",city:"",email:"",name:"",educations:[],certificates:[],workExperience:[]},IO=()=>{const{customer:t,coach:e}=Rp(),[n,s]=j.useState(CO),[i,a]=j.useState(!0),[r,c]=j.useState(!1),[u,d]=j.useState(null),[f,m]=j.useState({title:"",institution:"",startDate:"",endDate:"",note:""}),[g,x]=j.useState({role:"",organisation:"",startDate:"",endDate:"",note:""}),[C,I]=j.useState({title:"",note:"",file:null}),[D,T]=j.useState(!1),[_,w]=j.useState(null),[R,M]=j.useState(0),U=j.useMemo(()=>(t==null?void 0:t.name)||n.name||"Jouw profiel",[t==null?void 0:t.name,n.name]),v=n.email||(t==null?void 0:t.email)||"",y=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Date.now()}-${Math.round(Math.random()*1e6)}`;j.useEffect(()=>{let P=!0;return(async()=>{var L;a(!0);try{const H=await Nt("/customer/profile");if(!P)return;s($=>({...$,...H}))}catch(H){if(!P)return;d({type:"error",message:((L=H==null?void 0:H.data)==null?void 0:L.error)||(H==null?void 0:H.message)||"Kon profiel niet laden"})}finally{P&&a(!1)}})(),()=>{P=!1}},[]);const b=P=>{const{name:F,value:L}=P.target;s(H=>({...H,[F]:L}))},S=async P=>{var F;P.preventDefault(),c(!0),d(null);try{const L={dateOfBirth:n.dateOfBirth,placeOfBirth:n.placeOfBirth,nationality:n.nationality,phoneFixed:n.phoneFixed,phoneMobile:n.phoneMobile,street:n.street,houseNumber:n.houseNumber,addition:n.addition,postalCode:n.postalCode,city:n.city,educations:n.educations||[],certificates:(n.certificates||[]).map(({id:$,title:W,filePath:Me,fileName:G,size:Q,uploadedAt:Z,note:te})=>({id:$,title:W,filePath:Me,fileName:G,size:Q,uploadedAt:Z,note:te})),workExperience:n.workExperience||[]},H=await y1("/customer/profile",L);s($=>({...$,...H})),d({type:"success",message:"Wijzigingen opgeslagen"})}catch(L){d({type:"error",message:((F=L==null?void 0:L.data)==null?void 0:F.error)||(L==null?void 0:L.message)||"Opslaan mislukt"})}finally{c(!1)}},N=({state:P})=>{if(!(P!=null&&P.message))return null;const F=P.type==="error",L=F?jC:Li,H=F?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return l.jsxs("div",{className:`flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${H}`,children:[l.jsx(L,{className:"h-4 w-4"}),l.jsx("span",{children:P.message})]})},k=(P,F)=>{s(L=>({...L,[P]:(L[P]||[]).filter(H=>H.id!==F)}))},A=()=>{if(!f.title.trim()){d({type:"error",message:"Voeg minimaal een titel toe voor je opleiding."});return}const P={id:y(),title:f.title.trim(),institution:f.institution.trim(),startDate:f.startDate||"",endDate:f.endDate||"",note:f.note.trim()};s(F=>({...F,educations:[...F.educations||[],P]})),m({title:"",institution:"",startDate:"",endDate:"",note:""})},Ee=()=>{if(!g.role.trim()&&!g.organisation.trim()&&!g.note.trim()){d({type:"error",message:"Vul minimaal een functie, organisatie of toelichting in."});return}const P={id:y(),role:g.role.trim(),organisation:g.organisation.trim(),startDate:g.startDate||"",endDate:g.endDate||"",note:g.note.trim()};s(F=>({...F,workExperience:[...F.workExperience||[],P]})),x({role:"",organisation:"",startDate:"",endDate:"",note:""})},Ie=P=>{var L;const F=((L=P.target.files)==null?void 0:L[0])||null;I(H=>({...H,file:F}))},K=async()=>{var F;if(!C.file){w({type:"error",message:"Kies eerst een bestand."});return}const P=C.title.trim()||C.file.name;T(!0),w(null);try{const L=new FormData;L.append("file",C.file);const H=await fd("/customer/profile/certificates/upload",L),$={id:y(),title:P,filePath:H.filePath,fileName:H.fileName||C.file.name,size:H.size,uploadedAt:H.uploadedAt,note:C.note.trim()};s(W=>({...W,certificates:[...W.certificates||[],$]})),I({title:"",note:"",file:null}),M(W=>W+1),w({type:"success",message:"Certificaat toegevoegd"})}catch(L){w({type:"error",message:((F=L==null?void 0:L.data)==null?void 0:F.error)||(L==null?void 0:L.message)||"Upload mislukt"})}finally{T(!1)}};return i?l.jsx(xs,{label:"Profiel laden"}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-brand-500",children:"Profiel bewerken"}),l.jsx("h1",{className:"mt-1 text-3xl font-semibold text-slate-900",children:U}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-500",children:"Werk je persoonsgegevens en adresgegevens eenvoudig bij. Je coach ziet altijd de meest recente informatie."})]}),e?l.jsxs("div",{className:"rounded-3xl border border-brand-100 bg-brand-50 px-4 py-3 text-sm text-brand-700 shadow-sm",children:["Begeleid door ",l.jsx("strong",{children:e.name})]}):null]}),l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l.jsx(N,{state:u}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"grid gap-6 xl:grid-cols-[1.4fr,1fr]",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Persoonsgegevens"}),l.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"dateOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboortedatum"}),l.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:n.dateOfBirth||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"placeOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboorteplaats"}),l.jsx("input",{id:"placeOfBirth",name:"placeOfBirth",value:n.placeOfBirth||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Alkmaar"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"nationality",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Nationaliteit"}),l.jsx("input",{id:"nationality",name:"nationality",value:n.nationality||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: NL"})]})]})]}),l.jsxs("div",{className:"space-y-4 border-t border-slate-100 pt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Contactgegevens"}),l.jsx("button",{type:"button",onClick:()=>alert("Vraag je beheerder om je wachtwoord te wijzigen."),className:"text-sm font-semibold text-brand-600 transition hover:text-brand-500",children:"Wachtwoord wijzigen"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"phoneFixed",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (vast)"}),l.jsx("input",{id:"phoneFixed",name:"phoneFixed",value:n.phoneFixed||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0201234567"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"phoneMobile",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (mobiel)"}),l.jsx("input",{id:"phoneMobile",name:"phoneMobile",value:n.phoneMobile||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0612345678"})]}),l.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[l.jsx("label",{htmlFor:"email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mailadres"}),l.jsx("input",{id:"email",name:"email",value:v,readOnly:!0,className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm text-slate-500 shadow-inner"}),l.jsx("p",{className:"text-xs text-slate-400",children:"Het e-mailadres wordt beheerd door je organisatie."})]})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-6 rounded-2xl bg-slate-50 p-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Adresgegevens"}),l.jsxs("div",{className:"mt-4 grid gap-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"street",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Straatnaam"}),l.jsx("input",{id:"street",name:"street",value:n.street||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr,0.8fr]",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"houseNumber",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Huisnummer"}),l.jsx("input",{id:"houseNumber",name:"houseNumber",value:n.houseNumber||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"addition",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Toevoeging"}),l.jsx("input",{id:"addition",name:"addition",value:n.addition||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"postalCode",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Postcode"}),l.jsx("input",{id:"postalCode",name:"postalCode",value:n.postalCode||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijv. 1822 BW"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"city",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Woonplaats"}),l.jsx("input",{id:"city",name:"city",value:n.city||"",onChange:b,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Downloads"}),l.jsx("button",{type:"button",onClick:()=>alert("Download van profiel volgt later in de productieroute."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn profiel"}),l.jsx("button",{type:"button",onClick:()=>alert("Document downloads zijn binnenkort beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn documenten"}),l.jsx("button",{type:"button",onClick:()=>alert("Zelfevaluatie download is nog niet beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn zelfevaluatie"})]})]})]})}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Opleidingen"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Leg je afgeronde of lopende opleidingen vast inclusief toelichting."})]}),l.jsx("div",{className:"space-y-4",children:(n.educations||[]).length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen opleidingen toegevoegd."}):l.jsx("ul",{className:"space-y-3",children:n.educations.map(P=>l.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:P.title}),P.institution?l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:P.institution}):null]}),l.jsx("button",{type:"button",onClick:()=>k("educations",P.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[P.startDate?l.jsxs("span",{children:["Start: ",P.startDate]}):null,P.endDate?l.jsxs("span",{children:["Einde: ",P.endDate]}):null]}),P.note?l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:P.note}):null]},P.id))})}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe opleiding toevoegen"}),l.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[l.jsx("input",{type:"text",value:f.title,onChange:P=>m(F=>({...F,title:P.target.value})),placeholder:"Naam opleiding",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"text",value:f.institution,onChange:P=>m(F=>({...F,institution:P.target.value})),placeholder:"Onderwijsinstelling",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsx("input",{type:"month",value:f.startDate,onChange:P=>m(F=>({...F,startDate:P.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"month",value:f.endDate,onChange:P=>m(F=>({...F,endDate:P.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsx("textarea",{value:f.note,onChange:P=>m(F=>({...F,note:P.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("button",{type:"button",onClick:A,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg opleiding toe"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Certificaten & diploma's"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Upload officiële documenten en voeg een toelichting toe."})]}),l.jsx("div",{className:"space-y-4",children:(n.certificates||[]).length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen certificaten geüpload."}):l.jsx("ul",{className:"space-y-3",children:n.certificates.map(P=>l.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:P.title}),l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:P.fileName})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("a",{href:P.filePath,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Bekijk"}),l.jsx("button",{type:"button",onClick:()=>k("certificates",P.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]})]}),P.note?l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:P.note}):null,l.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[P.uploadedAt?l.jsxs("span",{children:["Geüpload: ",new Date(P.uploadedAt).toLocaleDateString()]}):null,P.size?l.jsxs("span",{children:[(P.size/(1024*1024)).toFixed(2)," MB"]}):null]})]},P.id))})}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuw certificaat toevoegen"}),l.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[l.jsx("input",{type:"text",value:C.title,onChange:P=>I(F=>({...F,title:P.target.value})),placeholder:"Titel certificaat of diploma",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("textarea",{value:C.note,onChange:P=>I(F=>({...F,note:P.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"file",onChange:Ie,className:"text-sm"},R),l.jsx("button",{type:"button",onClick:K,disabled:D,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:D?"Bezig met uploaden...":"Upload en voeg toe"}),_?l.jsx("p",{className:`text-xs ${_.type==="error"?"text-red-500":"text-emerald-600"}`,children:_.message}):null]})]})]})]})}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Relevante werkervaring"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beschrijf je belangrijke werkervaringen en voeg een toelichting toe."})]}),l.jsx("div",{className:"space-y-4",children:(n.workExperience||[]).length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen werkervaring toegevoegd."}):l.jsx("ul",{className:"space-y-3",children:n.workExperience.map(P=>l.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:P.role||"Functie onbekend"}),P.organisation?l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:P.organisation}):null]}),l.jsx("button",{type:"button",onClick:()=>k("workExperience",P.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[P.startDate?l.jsxs("span",{children:["Start: ",P.startDate]}):null,P.endDate?l.jsxs("span",{children:["Einde: ",P.endDate]}):null]}),P.note?l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:P.note}):null]},P.id))})}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe ervaring toevoegen"}),l.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[l.jsx("input",{type:"text",value:g.role,onChange:P=>x(F=>({...F,role:P.target.value})),placeholder:"Functietitel",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"text",value:g.organisation,onChange:P=>x(F=>({...F,organisation:P.target.value})),placeholder:"Organisatie",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsx("input",{type:"month",value:g.startDate,onChange:P=>x(F=>({...F,startDate:P.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"month",value:g.endDate,onChange:P=>x(F=>({...F,endDate:P.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsx("textarea",{value:g.note,onChange:P=>x(F=>({...F,note:P.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("button",{type:"button",onClick:Ee,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg werkervaring toe"})]})]})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:r,className:"rounded-full bg-lime-500 px-6 py-3 text-sm font-semibold text-white shadow transition hover:bg-lime-400 disabled:cursor-not-allowed disabled:bg-lime-300",children:r?"Opslaan...":"Opslaan"})})]})]})},RO=({title:t,value:e,trend:n,icon:s,variant:i="brand"})=>{const a={brand:"bg-brand-50 text-brand-700",emerald:"bg-emerald-50 text-emerald-700",amber:"bg-amber-50 text-amber-700",sky:"bg-sky-50 text-sky-700",slate:"bg-slate-50 text-slate-700"};return l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-white p-6 shadow-card transition hover:-translate-y-1 hover:shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-500",children:t}),l.jsx("p",{className:"mt-2 text-3xl font-semibold text-slate-900",children:e})]}),s?l.jsx("span",{className:ir("rounded-full p-3",a[i]||a.brand),children:l.jsx(s,{className:"h-6 w-6"})}):null]}),n?l.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-slate-500",children:[l.jsxs("span",{className:ir("inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold",n.direction==="up"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"),children:[n.direction==="up"?"▲":"▼",n.value]}),l.jsx("span",{children:n.caption})]}):null,l.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-transparent via-white/40 to-transparent opacity-0 transition group-hover:opacity-100"})]})},kO=[{label:"Dashboard",to:"/admin",icon:dd,end:!0},{label:"Trajectbeheer",to:"/admin/trajects",icon:Mp},{label:"Assignments",to:"/admin/assignments",icon:f1},{label:"User management",to:"/admin/users",icon:wo},{label:"Profile",to:"/admin/profile",icon:Vp}],DO=[{label:"Dashboard",to:"/coach",icon:dd,end:!0},{label:"My Customers",to:"/coach/customers",icon:wo},{label:"Feedback",to:"/coach/feedback",icon:Mp},{label:"Messages",to:"/coach/messages",icon:nC},{label:"Profile",to:"/coach/profile",icon:Vp},{label:"Settings",to:"/coach/settings",icon:xC}],OO=[{label:"Wat is de procedure?",to:"/customer/procedure",icon:dd},{label:"Planning",to:"/customer/planning",icon:Lj},{label:"Messages",to:"/customer/messages",icon:rC},{label:"Profile",to:"/customer/profile",icon:Vp}],Sn={name:"Isabelle Janssen",role:"Senior Coach",email:"isabelle.janssen@example.com",phone:"+31 6 1234 5678",location:"Amsterdam, NL",bio:"Met ruim 10 jaar ervaring in sociaal werk begeleidt Isabelle professionals bij het vertalen van praktijkervaring naar erkende competenties.",expertise:["Methodisch werken","Reflectieve vaardigheden","Teamcoaching","Portfolio-ontwikkeling"],availability:[{day:"Maandag",slots:"09:00 - 13:00"},{day:"Woensdag",slots:"12:00 - 17:00"},{day:"Vrijdag",slots:"09:00 - 12:00"}],upcomingSessions:[{id:"sess-1",customer:"Daniël Vermeer",date:"15 sep 2025",focus:"Portfolio review"},{id:"sess-2",customer:"Noah Smits",date:"18 sep 2025",focus:"Competentie B1-K1"}],performance:[{id:"perf-1",label:"Beoordeelde uploads",value:"124"},{id:"perf-2",label:"Gem. feedbackscore",value:"4.8/5"},{id:"perf-3",label:"Doorlooptijd",value:"5.2 weken"}]},MO=[{id:"thread-1",name:"Daniël ↔ Isabelle",lastMessage:"Zullen we volgende week afstemmen?"},{id:"thread-2",name:"Noah ↔ Bas",lastMessage:"Feedback ontvangen, bedankt!"},{id:"thread-3",name:"Fatima ↔ Support",lastMessage:"Ik heb het document geüpload."}],VO={"thread-1":[{id:"m-1",author:"Daniël",body:"Hoi Isabelle, ik heb zojuist mijn rapport geüpload.",timestamp:"09:12",from:"other"},{id:"m-2",author:"Isabelle",body:"Top! Ik geef vandaag nog feedback.",timestamp:"09:20",from:"me"}],"thread-2":[{id:"m-3",author:"Noah",body:"Bedankt voor de snelle reactie!",timestamp:"08:45",from:"other"}],"thread-3":[{id:"m-4",author:"Fatima",body:"Het projectplan staat nu klaar.",timestamp:"07:30",from:"other"}]},qu=[{id:"cust-1",name:"Daniël Vermeer",email:"daniel.vermeer@example.com",lastActivity:"2h ago",coachId:"coach-1"},{id:"cust-2",name:"Noah Smits",email:"noah.smits@example.com",lastActivity:"10h ago",coachId:"coach-1"},{id:"cust-3",name:"Fatima El Amrani",email:"fatima.el-amrani@example.com",lastActivity:"1d ago",coachId:"coach-2"},{id:"cust-4",name:"Lotus van Leeuwen",email:"lotus.van.leeuwen@example.com",lastActivity:"3d ago",coachId:"coach-3"}],PO=[{id:"assigned",title:"Assigned Customers",value:"8",trend:{direction:"up",value:"+2",caption:"new this month"},icon:wo,variant:"brand"},{id:"feedback",title:"Feedback Given",value:"56",trend:{direction:"up",value:"+7",caption:"since last week"},icon:Mp,variant:"emerald"},{id:"pending",title:"Pending Uploads",value:"5",trend:{direction:"down",value:"-3",caption:"to review"},icon:f1,variant:"amber"}],LO={"cust-1":[{competency:"B1-K1-W1",description:"Onderzoekt de behoefte aan sociaal werk.",uploads:["Onderzoeksrapport.pdf","Interviewnotities.docx"],feedback:[{id:"f-1",author:"Isabelle",body:"Sterke analyse. Voeg concrete voorbeelden toe."}]},{competency:"B1-K1-W2",description:"Verzamelt en analyseert signalen in de praktijk.",uploads:["Reflectieverslag.docx"],feedback:[]}],"cust-2":[{competency:"B1-K2-W1",description:"Organiseert passende ondersteuning.",uploads:["Projectplan.pdf"],feedback:[{id:"f-2",author:"Isabelle",body:"Mooi plan! Denk aan de planning."}]}]},WT=[{id:"fb-1",customer:"Daniël Vermeer",competency:"B1-K1-W1",summary:"Feedback verstuurd",updatedAt:"1 day ago"},{id:"fb-2",customer:"Noah Smits",competency:"B1-K1-W2",summary:"Wacht op reactie",updatedAt:"3 days ago"},{id:"fb-3",customer:"Fatima El Amrani",competency:"B1-K2-W1",summary:"Nog te reviewen",updatedAt:"5 days ago"}],UO=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-brand-500 via-brand-600 to-brand-700 px-8 py-10 text-white shadow-card",children:[l.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/70",children:"Welcome back"}),l.jsx("h2",{className:"mt-2 text-3xl font-semibold",children:"Hi Isabelle, ready to coach?"}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/80",children:"Review the latest uploads, leave actionable feedback, and keep your customers moving forward in their EVC journey."})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Today at a glance"}),l.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:PO.map(t=>l.jsx(RO,{...t},t.id))})]}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Recent feedback activity"}),l.jsx("div",{className:"mt-4 divide-y divide-slate-100",children:WT.map(t=>l.jsxs("article",{className:"flex items-center justify-between py-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:t.customer}),l.jsx("p",{className:"text-xs text-slate-500",children:t.competency})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Status"}),l.jsx("p",{className:"text-sm font-medium text-slate-700",children:t.summary})]}),l.jsx("div",{className:"text-right text-xs text-slate-400",children:t.updatedAt})]},t.id))})]})]}),zO=({columns:t=[],data:e=[],renderActions:n,emptyMessage:s="No data available",dense:i})=>l.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-card",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:ir("min-w-full divide-y divide-slate-200",i?"text-sm":"text-base"),children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{children:[t.map(a=>l.jsx("th",{scope:"col",className:"whitespace-nowrap px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:a.header},a.accessor||a.id)),n?l.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actions"}):null]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:e.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:t.length+(n?1:0),className:"px-4 py-8 text-center text-sm text-slate-500",children:s})}):e.map((a,r)=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[t.map(c=>l.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-slate-700",children:c.render?c.render(a):a[c.accessor]},c.accessor||c.id)),n?l.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-500",children:n(a)}):null]},a.id||r))})]})})}),BO=()=>{const[t,e]=j.useState(""),n=qn(),s=j.useMemo(()=>t?qu.filter(a=>`${a.name} ${a.email}`.toLowerCase().includes(t.toLowerCase())):qu,[t]),i=[{header:"Name",accessor:"name"},{header:"Email",accessor:"email"},{header:"Last Activity",accessor:"lastActivity"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"My customers"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Track progress and dive into each competency set."})]}),l.jsxs("div",{className:"relative",children:[l.jsx(mC,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),l.jsx("input",{type:"search",value:t,onChange:a=>e(a.target.value),placeholder:"Search customers",className:"h-10 w-full min-w-[220px] rounded-full border border-slate-200 bg-white pl-10 pr-4 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),l.jsx(zO,{columns:i,data:s,dense:!0,renderActions:a=>l.jsxs("button",{type:"button",onClick:()=>n(`/coach/customers/${a.id}`),className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-3 py-1.5 text-xs font-semibold text-white shadow-lg transition hover:bg-brand-500",children:["View details ",l.jsx(Rc,{className:"h-3 w-3"})]})})]})},qO=()=>{const{customerId:t}=ej(),e=qn(),n=qu.find(d=>d.id===t),s=j.useMemo(()=>LO[t]??[],[t]),[i,a]=j.useState(s.map((d,f)=>f===0)),[r,c]=j.useState({}),u=d=>{a(f=>f.map((m,g)=>g===d?!m:m))};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("button",{type:"button",onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-500",children:[l.jsx(Mj,{className:"h-4 w-4"})," Back to customers"]}),l.jsxs("header",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Customer dossier"}),l.jsx("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:(n==null?void 0:n.name)??"Unknown"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:n==null?void 0:n.email})]}),l.jsx("section",{className:"space-y-4",children:s.length===0?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"No competencies recorded yet."}):s.map((d,f)=>{const m=i[f];return l.jsxs("article",{className:"overflow-hidden rounded-3xl bg-white shadow-card",children:[l.jsxs("button",{type:"button",onClick:()=>u(f),className:"flex w-full items-center justify-between px-6 py-5 text-left",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Competency"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:d.competency}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:d.description})]}),m?l.jsx(Bj,{className:"h-5 w-5 text-slate-400"}):l.jsx(h1,{className:"h-5 w-5 text-slate-400"})]}),l.jsxs("div",{className:ir("grid grid-cols-1 gap-6 border-t border-slate-100 px-6 transition-all duration-200 lg:grid-cols-[2fr,1fr]",m?"max-h-[520px] py-6":"max-h-0 overflow-hidden"),children:[l.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Uploads"}),l.jsxs("ul",{className:"mt-2 space-y-2",children:[d.uploads.map(g=>l.jsxs("li",{className:"flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-2",children:[l.jsx("span",{children:g}),l.jsx("button",{className:"text-xs font-medium text-brand-600 hover:text-brand-500",children:"Preview"})]},g)),d.uploads.length===0?l.jsx("li",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-center text-xs text-slate-400",children:"No uploads yet."}):null]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Past feedback"}),l.jsxs("ul",{className:"mt-2 space-y-3",children:[d.feedback.map(g=>l.jsxs("li",{className:"rounded-2xl bg-slate-100 px-4 py-3 text-xs text-slate-600",children:["“",g.body,"” — ",g.author]},g.id)),d.feedback.length===0?l.jsx("li",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-center text-xs text-slate-400",children:"No feedback captured yet."}):null]})]})]}),l.jsxs("form",{className:"flex h-full flex-col rounded-3xl bg-slate-50 p-5",onSubmit:g=>{g.preventDefault(),alert("Mock save feedback"),c(x=>({...x,[d.competency]:""}))},children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Add feedback"}),l.jsx("textarea",{rows:6,value:r[d.competency]??"",onChange:g=>c(x=>({...x,[d.competency]:g.target.value})),placeholder:"Highlight strengths, note improvements, and suggest next steps.",className:"mt-2 flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsxs("button",{type:"submit",className:"mt-4 inline-flex items-center justify-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500",children:[l.jsx(hC,{className:"h-4 w-4"})," Save feedback"]})]})]})]},d.competency)})})]})},HO=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Feedback queue"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Keep track of open reviews and recently submitted guidance."})]}),l.jsx("div",{className:"overflow-hidden rounded-3xl bg-white shadow-card",children:l.jsx("ul",{className:"divide-y divide-slate-100",children:WT.map(t=>l.jsxs("li",{className:"flex items-center justify-between px-6 py-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:t.customer}),l.jsx("p",{className:"text-xs text-slate-500",children:t.competency})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Status"}),l.jsx("p",{className:"font-medium text-slate-700",children:t.summary})]}),l.jsx("span",{className:"text-xs text-slate-400",children:t.updatedAt})]},t.id))})})]}),FO=()=>{var u;const t=j.useMemo(()=>MO.filter(d=>d.name.includes("Isabelle")),[]),[e,n]=j.useState(((u=t[0])==null?void 0:u.id)??""),[s,i]=j.useState({}),[a,r]=j.useState(!1);j.useEffect(()=>{if(!e)return;r(!0);const d=setTimeout(()=>r(!1),350);return()=>clearTimeout(d)},[e]);const c=j.useMemo(()=>VO[e]??[],[e]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Messages"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Stay connected with your customers and admins."})]}),a?l.jsx(xs,{label:"Loading messages"}):l.jsx(JT,{threads:t,activeThreadId:e,onSelectThread:n,messages:c,draft:s[e]??"",onDraftChange:d=>i(f=>({...f,[e]:d})),onSend:()=>{alert("Mock send message"),i(d=>({...d,[e]:""}))},emptyLabel:"Select a thread to see the conversation"})]})},GO=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Profile settings"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Keep your coaching profile up to date."})]}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Personal information"}),l.jsxs("div",{className:"mt-4 space-y-3 text-sm text-slate-600",children:[l.jsxs("label",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Display name"}),l.jsx("input",{defaultValue:"Isabelle Janssen",className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("label",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Email"}),l.jsx("input",{defaultValue:"isabelle.janssen@example.com",className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]})]}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Security"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Change your password or enable two-factor authentication."}),l.jsx("button",{className:"mt-4 rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50",children:"Update password"})]})]}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Availability"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Share when you typically review uploads or host coaching sessions."}),l.jsx("textarea",{rows:4,placeholder:"e.g. Feedback review on Tuesdays & Thursdays, 14:00 - 16:00",className:"mt-4 w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("button",{className:"mt-4 inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500",children:"Save preferences"})]})]}),KO=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-brand-500 via-brand-600 to-brand-700 px-8 py-10 text-white shadow-card",children:[l.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/70",children:"Coach profile"}),l.jsxs("div",{className:"mt-4 flex flex-col justify-between gap-6 lg:flex-row lg:items-end",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-semibold",children:Sn.name}),l.jsx("p",{className:"mt-2 text-white/80",children:Sn.role}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/70",children:Sn.bio})]}),l.jsx("dl",{className:"grid grid-cols-3 gap-4",children:Sn.performance.map(t=>l.jsxs("div",{className:"rounded-2xl bg-white/10 px-4 py-3 text-center shadow-inner backdrop-blur",children:[l.jsx("dt",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:t.label}),l.jsx("dd",{className:"mt-2 text-2xl font-semibold",children:t.value})]},t.id))})]})]}),l.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.2fr,1fr]",children:[l.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Contactgegevens"}),l.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"E-mail"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Sn.email})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Telefoon"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Sn.phone})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Locatie"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:Sn.location})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Expertisegebieden"}),l.jsx("ul",{className:"mt-3 flex flex-wrap gap-3",children:Sn.expertise.map(t=>l.jsx("li",{className:"rounded-full bg-brand-50 px-4 py-2 text-sm font-medium text-brand-700",children:t},t))})]})]}),l.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Beschikbaarheid"}),l.jsx("ul",{className:"mt-4 space-y-3",children:Sn.availability.map(t=>l.jsxs("li",{className:"flex items-center justify-between rounded-2xl border border-slate-100 px-4 py-3 text-sm text-slate-700",children:[l.jsx("span",{className:"font-medium text-slate-900",children:t.day}),l.jsx("span",{children:t.slots})]},`${t.day}-${t.slots}`))})]})]}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Aankomende sessies"}),l.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:Sn.upcomingSessions.map(t=>l.jsxs("article",{className:"rounded-2xl border border-slate-100 p-4 shadow-sm transition hover:border-brand-300 hover:shadow-md",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:t.customer}),l.jsx("p",{className:"text-xs text-slate-500",children:t.date}),l.jsx("p",{className:"mt-3 text-sm text-slate-600",children:t.focus})]},t.id))})]})]}),QO=()=>{const t=qn(),[e,n]=j.useState(null),[s,i]=j.useState(null),[a,r]=j.useState(null),c=()=>{localStorage.removeItem("token"),t("/login",{replace:!0})};j.useEffect(()=>{let m=!0;const g=localStorage.getItem("user");if(g)try{const C=JSON.parse(g);C!=null&&C.firebaseUid&&m&&n(C.firebaseUid)}catch{}const x=nw(Oo,C=>{m&&C!=null&&C.uid&&n(I=>I||C.uid)});return()=>{m=!1,x()}},[]),j.useEffect(()=>{if(!e){i(null);return}const m=XT(e,({data:g,error:x})=>{if(x){r(x),i(null);return}r(null),i(g||null)});return()=>{typeof m=="function"&&m()}},[e]);const u=(s==null?void 0:s.name)||(s==null?void 0:s.email)||"Admin",d=s!=null&&s.role?s.role.charAt(0).toUpperCase()+s.role.slice(1):"Administrator",f=a?"Administrator":d;return l.jsx(Dp,{sidebar:l.jsx(Op,{header:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Admin"}),l.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"EVC Control"})]}),navItems:kO,footer:l.jsx("button",{type:"button",onClick:c,className:"flex w-full items-center justify-center rounded-lg border border-slate-200 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600",children:"Sign out"})}),topbar:l.jsx(Pp,{title:"Administration overview",user:{name:u,subtitle:f,role:"Admin"},rightSlot:l.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[l.jsx("button",{type:"button",onClick:()=>alert("Mock: generate report"),className:"rounded-full border border-slate-200 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600",children:"Generate report"}),l.jsx("button",{type:"button",onClick:c,className:"rounded-full bg-brand-600 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500",children:"Sign out"})]})}),children:l.jsx(kp,{})})},YO=()=>{const[t,e]=j.useState("All customers"),n=j.useMemo(()=>["All customers",...qu.map(s=>s.name)],[]);return l.jsx(Dp,{sidebar:l.jsx(Op,{header:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-400",children:"Coach"}),l.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"EVC Workspace"})]}),navItems:DO}),topbar:l.jsx(Pp,{title:"Coaching dashboard",user:{name:"Isabelle Janssen",subtitle:t,role:"Coach"},rightSlot:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("select",{value:t,onChange:s=>e(s.target.value),className:"h-10 rounded-full border border-slate-200 bg-white px-3 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",children:n.map(s=>l.jsx("option",{children:s},s))}),l.jsx("button",{type:"button",onClick:()=>alert("Mock logout"),className:"rounded-full bg-brand-600 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500",children:"Sign out"})]})}),children:l.jsx(kp,{})})},$O=()=>{const[t,e]=j.useState(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}}),[n,s]=j.useState(!t),[i,a]=j.useState(null),[r,c]=j.useState(null),[u,d]=j.useState(null),[f,m]=j.useState(null),[g,x]=j.useState(null);j.useEffect(()=>{let M=!0;return(async()=>{s(!0);try{const v=await Nt("/auth/me");if(!M)return;e(y=>{const b={...y||{},...v||{}};try{localStorage.setItem("user",JSON.stringify(b))}catch{}return b}),a(null)}catch(v){if(!M)return;a(v)}finally{M&&s(!1)}})(),()=>{M=!1}},[]);const C=(t==null?void 0:t.firebaseUid)||null;j.useEffect(()=>{if(!C){c(null),d(null),m(null),x(null);return}const M=SO(C,({customer:U,coach:v,assignment:y,error:b})=>{if(b){x(b);return}x(null),U!==void 0&&c(U||null),v!==void 0&&d(v||null),y!==void 0&&m(y||null)});return()=>{typeof M=="function"&&M()}},[C]);const I=j.useMemo(()=>r||(t?{id:t.firebaseUid||String(t.id||""),name:t.name||t.email||"Customer",email:t.email||"",role:t.role||"customer",trajectId:t.trajectId||null}:null),[r,t]),D=j.useMemo(()=>u||null,[u]),T=j.useMemo(()=>{if(!(I!=null&&I.lastActivity))return"-";const M=I.lastActivity;return M instanceof Date?M.toLocaleString():typeof M=="string"?M:"-"},[I==null?void 0:I.lastActivity]),_=[];D!=null&&D.name&&_.push(`Coach: ${D.name}`),f!=null&&f.status&&_.push(f.status);const w=_.join(" • ")||"Customer",R={name:(I==null?void 0:I.name)||"Customer",subtitle:w,role:"Customer"};return l.jsx(Dp,{sidebar:l.jsx(Op,{header:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-400",children:"Customer"}),l.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Mijn EVC"})]}),navItems:OO}),topbar:l.jsx(Pp,{title:"Jouw EVC-traject",user:R,rightSlot:l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-500",children:[l.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-600",children:["Laatste activiteit: ",T]}),D?l.jsxs("span",{className:"hidden rounded-full bg-brand-50 px-3 py-1 font-medium text-brand-600 sm:inline",children:["Coach ",D.name]}):null]})}),children:l.jsx(kp,{context:{customer:I,coach:D,assignment:f,account:t,loadingUser:n,userError:i,firestoreError:g}})})},XO=()=>l.jsx(Tj,{children:l.jsxs(gj,{children:[l.jsx(de,{path:"/",element:l.jsx(iO,{})}),l.jsx(de,{path:"/login",element:l.jsx(W6,{})}),l.jsx(de,{path:"/testing/create-account",element:l.jsx(xO,{})}),l.jsx(de,{path:"/dashboard",element:l.jsx(PC,{})}),l.jsx(de,{path:"/profile",element:l.jsx(Z6,{})}),l.jsx(de,{path:"/planning",element:l.jsx(eO,{})}),l.jsx(de,{path:"/messages",element:l.jsx(tO,{})}),l.jsx(de,{path:"/evidence",element:l.jsx(nO,{})}),l.jsxs(de,{path:"/admin",element:l.jsx(QO,{}),children:[l.jsx(de,{index:!0,element:l.jsx(oO,{})}),l.jsx(de,{path:"assignments",element:l.jsx(cO,{})}),l.jsx(de,{path:"trajects",element:l.jsx(hO,{})}),l.jsx(de,{path:"profile",element:l.jsx(fO,{})}),l.jsx(de,{path:"users",element:l.jsx(gO,{})})]}),l.jsxs(de,{path:"/coach",element:l.jsx(YO,{}),children:[l.jsx(de,{index:!0,element:l.jsx(UO,{})}),l.jsx(de,{path:"customers",element:l.jsx(BO,{})}),l.jsx(de,{path:"customers/:customerId",element:l.jsx(qO,{})}),l.jsx(de,{path:"feedback",element:l.jsx(HO,{})}),l.jsx(de,{path:"messages",element:l.jsx(FO,{})}),l.jsx(de,{path:"profile",element:l.jsx(KO,{})}),l.jsx(de,{path:"settings",element:l.jsx(GO,{})})]}),l.jsxs(de,{path:"/customer",element:l.jsx($O,{}),children:[l.jsx(de,{index:!0,element:l.jsx(Qn,{to:"/customer/procedure",replace:!0})}),l.jsx(de,{path:"procedure",element:l.jsx(vO,{})}),l.jsx(de,{path:"planning",element:l.jsx(AO,{})}),l.jsx(de,{path:"messages",element:l.jsx(jO,{})}),l.jsx(de,{path:"profile",element:l.jsx(IO,{})})]}),l.jsx(de,{path:"/Login.html",element:l.jsx(Qn,{to:"/login",replace:!0})}),l.jsx(de,{path:"/Dashboard.html",element:l.jsx(Qn,{to:"/dashboard",replace:!0})}),l.jsx(de,{path:"/Profile.html",element:l.jsx(Qn,{to:"/profile",replace:!0})}),l.jsx(de,{path:"/Planning.html",element:l.jsx(Qn,{to:"/planning",replace:!0})}),l.jsx(de,{path:"/Messages.html",element:l.jsx(Qn,{to:"/messages",replace:!0})}),l.jsx(de,{path:"/Evidence.html",element:l.jsx(Qn,{to:"/evidence",replace:!0})}),l.jsx(de,{path:"/index.html",element:l.jsx(Qn,{to:"/",replace:!0})}),l.jsx(de,{path:"*",element:l.jsx(Qn,{to:"/",replace:!0})})]})});function JO(){return l.jsx(XO,{})}const WO=SA.createRoot(document.getElementById("root"));WO.render(l.jsx(Hc.StrictMode,{children:l.jsx(JO,{})}));
