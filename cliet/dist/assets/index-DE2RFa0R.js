function RS(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Vb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ub={exports:{}},ld={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IS=Symbol.for("react.transitional.element"),jS=Symbol.for("react.fragment");function Lb(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:IS,type:t,key:s,ref:e!==void 0?e:null,props:n}}ld.Fragment=jS;ld.jsx=Lb;ld.jsxs=Lb;Ub.exports=ld;var u=Ub.exports,Pb={exports:{}},ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=Symbol.for("react.transitional.element"),kS=Symbol.for("react.portal"),DS=Symbol.for("react.fragment"),OS=Symbol.for("react.strict_mode"),MS=Symbol.for("react.profiler"),VS=Symbol.for("react.consumer"),US=Symbol.for("react.context"),LS=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),zS=Symbol.for("react.memo"),zb=Symbol.for("react.lazy"),BS=Symbol.for("react.activity"),r0=Symbol.iterator;function qS(t){return t===null||typeof t!="object"?null:(t=r0&&t[r0]||t["@@iterator"],typeof t=="function"?t:null)}var Bb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qb=Object.assign,Hb={};function Oa(t,e,n){this.props=t,this.context=e,this.refs=Hb,this.updater=n||Bb}Oa.prototype.isReactComponent={};Oa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fb(){}Fb.prototype=Oa.prototype;function Jm(t,e,n){this.props=t,this.context=e,this.refs=Hb,this.updater=n||Bb}var Wm=Jm.prototype=new Fb;Wm.constructor=Jm;qb(Wm,Oa.prototype);Wm.isPureReactComponent=!0;var i0=Array.isArray;function Ef(){}var Be={H:null,A:null,T:null,S:null},Gb=Object.prototype.hasOwnProperty;function Zm(t,e,n){var s=n.ref;return{$$typeof:Xm,type:t,key:e,ref:s!==void 0?s:null,props:n}}function HS(t,e){return Zm(t.type,e,t.props)}function ep(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xm}function FS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var a0=/\/+/g;function Eh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FS(""+t.key):e.toString(36)}function GS(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ef,Ef):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Mi(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Xm:case kS:a=!0;break;case zb:return a=t._init,Mi(a(t._payload),e,n,s,r)}}if(a)return r=r(t),a=s===""?"."+Eh(t,0):s,i0(r)?(n="",a!=null&&(n=a.replace(a0,"$&/")+"/"),Mi(r,e,n,"",function(d){return d})):r!=null&&(ep(r)&&(r=HS(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(a0,"$&/")+"/")+a)),e.push(r)),1;a=0;var l=s===""?".":s+":";if(i0(t))for(var c=0;c<t.length;c++)s=t[c],i=l+Eh(s,c),a+=Mi(s,e,n,i,r);else if(c=qS(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,i=l+Eh(s,c++),a+=Mi(s,e,n,i,r);else if(i==="object"){if(typeof t.then=="function")return Mi(GS(t),e,n,s,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function uc(t,e,n){if(t==null)return t;var s=[],r=0;return Mi(t,s,"","",function(i){return e.call(n,i,r++)}),s}function KS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var l0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},QS={map:uc,forEach:function(t,e,n){uc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uc(t,function(){e++}),e},toArray:function(t){return uc(t,function(e){return e})||[]},only:function(t){if(!ep(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Activity=BS;ce.Children=QS;ce.Component=Oa;ce.Fragment=DS;ce.Profiler=MS;ce.PureComponent=Jm;ce.StrictMode=OS;ce.Suspense=PS;ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Be;ce.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Be.H.useMemoCache(t)}};ce.cache=function(t){return function(){return t.apply(null,arguments)}};ce.cacheSignal=function(){return null};ce.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=qb({},t.props),r=t.key;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)!Gb.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(s[i]=e[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var a=Array(i),l=0;l<i;l++)a[l]=arguments[l+2];s.children=a}return Zm(t.type,r,s)};ce.createContext=function(t){return t={$$typeof:US,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:VS,_context:t},t};ce.createElement=function(t,e,n){var s,r={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)Gb.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return Zm(t,i,r)};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:LS,render:t}};ce.isValidElement=ep;ce.lazy=function(t){return{$$typeof:zb,_payload:{_status:-1,_result:t},_init:KS}};ce.memo=function(t,e){return{$$typeof:zS,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Be.T,n={};Be.T=n;try{var s=t(),r=Be.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Ef,l0)}catch(i){l0(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),Be.T=e}};ce.unstable_useCacheRefresh=function(){return Be.H.useCacheRefresh()};ce.use=function(t){return Be.H.use(t)};ce.useActionState=function(t,e,n){return Be.H.useActionState(t,e,n)};ce.useCallback=function(t,e){return Be.H.useCallback(t,e)};ce.useContext=function(t){return Be.H.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t,e){return Be.H.useDeferredValue(t,e)};ce.useEffect=function(t,e){return Be.H.useEffect(t,e)};ce.useEffectEvent=function(t){return Be.H.useEffectEvent(t)};ce.useId=function(){return Be.H.useId()};ce.useImperativeHandle=function(t,e,n){return Be.H.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Be.H.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Be.H.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Be.H.useMemo(t,e)};ce.useOptimistic=function(t,e){return Be.H.useOptimistic(t,e)};ce.useReducer=function(t,e,n){return Be.H.useReducer(t,e,n)};ce.useRef=function(t){return Be.H.useRef(t)};ce.useState=function(t){return Be.H.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Be.H.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Be.H.useTransition()};ce.version="19.2.0";Pb.exports=ce;var N=Pb.exports;const ou=Vb(N),$S=RS({__proto__:null,default:ou},[N]);var Kb={exports:{}},od={},Qb={exports:{}},$b={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,V){var O=z.length;z.push(V);e:for(;0<O;){var $=O-1>>>1,Y=z[$];if(0<r(Y,V))z[$]=V,z[O]=Y,O=$;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var V=z[0],O=z.pop();if(O!==V){z[0]=O;e:for(var $=0,Y=z.length,fe=Y>>>1;$<fe;){var ne=2*($+1)-1,ke=z[ne],K=ne+1,Z=z[K];if(0>r(ke,O))K<Y&&0>r(Z,ke)?(z[$]=Z,z[K]=O,$=K):(z[$]=ke,z[ne]=O,$=ne);else if(K<Y&&0>r(Z,O))z[$]=Z,z[K]=O,$=K;else break e}}return V}function r(z,V){var O=z.sortIndex-V.sortIndex;return O!==0?O:z.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,m=null,p=3,y=!1,R=!1,I=!1,D=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function j(z){for(var V=n(d);V!==null;){if(V.callback===null)s(d);else if(V.startTime<=z)s(d),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(d)}}function U(z){if(I=!1,j(z),!R)if(n(c)!==null)R=!0,B||(B=!0,k());else{var V=n(d);V!==null&&he(U,V.startTime-z)}}var B=!1,T=-1,_=5,v=-1;function S(){return D?!0:!(t.unstable_now()-v<_)}function w(){if(D=!1,B){var z=t.unstable_now();v=z;var V=!0;try{e:{R=!1,I&&(I=!1,b(T),T=-1),y=!0;var O=p;try{t:{for(j(z),m=n(c);m!==null&&!(m.expirationTime>z&&S());){var $=m.callback;if(typeof $=="function"){m.callback=null,p=m.priorityLevel;var Y=$(m.expirationTime<=z);if(z=t.unstable_now(),typeof Y=="function"){m.callback=Y,j(z),V=!0;break t}m===n(c)&&s(c),j(z)}else s(c);m=n(c)}if(m!==null)V=!0;else{var fe=n(d);fe!==null&&he(U,fe.startTime-z),V=!1}}break e}finally{m=null,p=O,y=!1}V=void 0}}finally{V?k():B=!1}}}var k;if(typeof x=="function")k=function(){x(w)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ae=C.port2;C.port1.onmessage=w,k=function(){ae.postMessage(null)}}else k=function(){A(w,0)};function he(z,V){T=A(function(){z(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var O=p;p=V;try{return z()}finally{p=O}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var O=p;p=z;try{return V()}finally{p=O}},t.unstable_scheduleCallback=function(z,V,O){var $=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?$+O:$):O=$,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,z={id:f++,callback:V,priorityLevel:z,startTime:O,expirationTime:Y,sortIndex:-1},O>$?(z.sortIndex=O,e(d,z),n(c)===null&&z===n(d)&&(I?(b(T),T=-1):I=!0,he(U,O-$))):(z.sortIndex=Y,e(c,z),R||y||(R=!0,B||(B=!0,k()))),z},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(z){var V=p;return function(){var O=p;p=V;try{return z.apply(this,arguments)}finally{p=O}}}})($b);Qb.exports=$b;var YS=Qb.exports,Yb={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS=N;function Xb(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ls(){}var Pt={d:{f:Ls,r:function(){throw Error(Xb(522))},D:Ls,C:Ls,L:Ls,m:Ls,X:Ls,S:Ls,M:Ls},p:0,findDOMNode:null},JS=Symbol.for("react.portal");function WS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:JS,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var kl=XS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function cd(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pt;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Xb(299));return WS(t,e,null,n)};zt.flushSync=function(t){var e=kl.T,n=Pt.p;try{if(kl.T=null,Pt.p=2,t)return t()}finally{kl.T=e,Pt.p=n,Pt.d.f()}};zt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Pt.d.C(t,e))};zt.prefetchDNS=function(t){typeof t=="string"&&Pt.d.D(t)};zt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=cd(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Pt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):n==="script"&&Pt.d.X(t,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};zt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=cd(e.as,e.crossOrigin);Pt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Pt.d.M(t)};zt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=cd(n,e.crossOrigin);Pt.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};zt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=cd(e.as,e.crossOrigin);Pt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Pt.d.m(t)};zt.requestFormReset=function(t){Pt.d.r(t)};zt.unstable_batchedUpdates=function(t,e){return t(e)};zt.useFormState=function(t,e,n){return kl.H.useFormState(t,e,n)};zt.useFormStatus=function(){return kl.H.useHostTransitionStatus()};zt.version="19.2.0";function Jb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jb)}catch(t){console.error(t)}}Jb(),Yb.exports=zt;var ZS=Yb.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt=YS,Wb=N,e2=ZS;function H(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Zb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function No(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ex(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tx(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o0(t){if(No(t)!==t)throw Error(H(188))}function t2(t){var e=t.alternate;if(!e){if(e=No(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return o0(r),t;if(i===s)return o0(r),e;i=i.sibling}throw Error(H(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==s)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function nx(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=nx(t),e!==null)return e;t=t.sibling}return null}var He=Object.assign,n2=Symbol.for("react.element"),dc=Symbol.for("react.transitional.element"),xl=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),sx=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),rx=Symbol.for("react.consumer"),cs=Symbol.for("react.context"),tp=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),Af=Symbol.for("react.suspense_list"),np=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),Sf=Symbol.for("react.activity"),s2=Symbol.for("react.memo_cache_sentinel"),c0=Symbol.iterator;function fl(t){return t===null||typeof t!="object"?null:(t=c0&&t[c0]||t["@@iterator"],typeof t=="function"?t:null)}var r2=Symbol.for("react.client.reference");function Nf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===r2?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Tf:return"Profiler";case sx:return"StrictMode";case wf:return"Suspense";case Af:return"SuspenseList";case Sf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case xl:return"Portal";case cs:return t.displayName||"Context";case rx:return(t._context.displayName||"Context")+".Consumer";case tp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case np:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case zs:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}var El=Array.isArray,ie=Wb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=e2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xr={pending:!1,data:null,method:null,action:null},Cf=[],Hi=-1;function Xn(t){return{current:t}}function vt(t){0>Hi||(t.current=Cf[Hi],Cf[Hi]=null,Hi--)}function Ve(t,e){Hi++,Cf[Hi]=t.current,t.current=e}var zn=Xn(null),Zl=Xn(null),rr=Xn(null),cu=Xn(null);function uu(t,e){switch(Ve(rr,e),Ve(Zl,t),Ve(zn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?p_(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=p_(e),t=wT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}vt(zn),Ve(zn,t)}function ha(){vt(zn),vt(Zl),vt(rr)}function Rf(t){t.memoizedState!==null&&Ve(cu,t);var e=zn.current,n=wT(e,t.type);e!==n&&(Ve(Zl,t),Ve(zn,n))}function du(t){Zl.current===t&&(vt(zn),vt(Zl)),cu.current===t&&(vt(cu),uo._currentValue=Xr)}var Th,u0;function Fr(t){if(Th===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Th=e&&e[1]||"",u0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Th+t+u0}var wh=!1;function Ah(t,e){if(!t||wh)return"";wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(y){var p=y}Reflect.construct(t,[],m)}else{try{m.call()}catch(y){p=y}t.call(m.prototype)}}else{try{throw Error()}catch(y){p=y}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(y){if(y&&p&&typeof y.stack=="string")return[y.stack,p.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),a=i[0],l=i[1];if(a&&l){var c=a.split(`
`),d=l.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<d.length&&!d[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===d.length)for(s=c.length-1,r=d.length-1;1<=s&&0<=r&&c[s]!==d[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==d[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==d[r]){var f=`
`+c[s].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=s&&0<=r);break}}}finally{wh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Fr(n):""}function i2(t,e){switch(t.tag){case 26:case 27:case 5:return Fr(t.type);case 16:return Fr("Lazy");case 13:return t.child!==e&&e!==null?Fr("Suspense Fallback"):Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 15:return Ah(t.type,!1);case 11:return Ah(t.type.render,!1);case 1:return Ah(t.type,!0);case 31:return Fr("Activity");default:return""}}function d0(t){try{var e="",n=null;do e+=i2(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var If=Object.prototype.hasOwnProperty,sp=mt.unstable_scheduleCallback,Sh=mt.unstable_cancelCallback,a2=mt.unstable_shouldYield,l2=mt.unstable_requestPaint,sn=mt.unstable_now,o2=mt.unstable_getCurrentPriorityLevel,ix=mt.unstable_ImmediatePriority,ax=mt.unstable_UserBlockingPriority,hu=mt.unstable_NormalPriority,c2=mt.unstable_LowPriority,lx=mt.unstable_IdlePriority,u2=mt.log,d2=mt.unstable_setDisableYieldValue,Co=null,rn=null;function Js(t){if(typeof u2=="function"&&d2(t),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Co,t)}catch{}}var an=Math.clz32?Math.clz32:m2,h2=Math.log,f2=Math.LN2;function m2(t){return t>>>=0,t===0?32:31-(h2(t)/f2|0)|0}var hc=256,fc=262144,mc=4194304;function Gr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ud(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~i,s!==0?r=Gr(s):(a&=l,a!==0?r=Gr(a):n||(n=l&~t,n!==0&&(r=Gr(n))))):(l=s&~i,l!==0?r=Gr(l):a!==0?r=Gr(a):n||(n=s&~t,n!==0&&(r=Gr(n)))),r===0?0:e!==0&&e!==r&&!(e&i)&&(i=r&-r,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:r}function Ro(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function p2(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ox(){var t=mc;return mc<<=1,!(mc&62914560)&&(mc=4194304),t}function Nh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Io(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function g2(t,e,n,s,r,i){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=a&~n;0<n;){var f=31-an(n),m=1<<f;l[f]=0,c[f]=-1;var p=d[f];if(p!==null)for(d[f]=null,f=0;f<p.length;f++){var y=p[f];y!==null&&(y.lane&=-536870913)}n&=~m}s!==0&&cx(t,s,0),i!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=i&~(a&~e))}function cx(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-an(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function ux(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-an(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}function dx(t,e){var n=e&-e;return n=n&42?1:rp(n),n&(t.suspendedLanes|e)?0:n}function rp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ip(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function hx(){var t=Ae.p;return t!==0?t:(t=window.event,t===void 0?32:MT(t.type))}function h0(t,e){var n=Ae.p;try{return Ae.p=t,e()}finally{Ae.p=n}}var Ir=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Ir,$t="__reactProps$"+Ir,Ma="__reactContainer$"+Ir,jf="__reactEvents$"+Ir,y2="__reactListeners$"+Ir,_2="__reactHandles$"+Ir,f0="__reactResources$"+Ir,jo="__reactMarker$"+Ir;function ap(t){delete t[Tt],delete t[$t],delete t[jf],delete t[y2],delete t[_2]}function Fi(t){var e=t[Tt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ma]||n[Tt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b_(t);t!==null;){if(n=t[Tt])return n;t=b_(t)}return e}t=n,n=t.parentNode}return null}function Va(t){if(t=t[Tt]||t[Ma]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Tl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(H(33))}function ta(t){var e=t[f0];return e||(e=t[f0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function _t(t){t[jo]=!0}var fx=new Set,mx={};function _i(t,e){fa(t,e),fa(t+"Capture",e)}function fa(t,e){for(mx[t]=e,t=0;t<e.length;t++)fx.add(e[t])}var v2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),m0={},p0={};function b2(t){return If.call(p0,t)?!0:If.call(m0,t)?!1:v2.test(t)?p0[t]=!0:(m0[t]=!0,!1)}function Oc(t,e,n){if(b2(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function pc(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ts(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function px(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x2(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kf(t){if(!t._valueTracker){var e=px(t)?"checked":"value";t._valueTracker=x2(t,e,""+t[e])}}function gx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=px(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var E2=/[\n"\\]/g;function mn(t){return t.replace(E2,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Df(t,e,n,s,r,i,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+dn(e)):t.value!==""+dn(e)&&(t.value=""+dn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Of(t,a,dn(e)):n!=null?Of(t,a,dn(n)):s!=null&&t.removeAttribute("value"),r==null&&i!=null&&(t.defaultChecked=!!i),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+dn(l):t.removeAttribute("name")}function yx(t,e,n,s,r,i,a,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){kf(t);return}n=n!=null?""+dn(n):"",e=e!=null?""+dn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),kf(t)}function Of(t,e,n){e==="number"&&fu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function na(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+dn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function _x(t,e,n){if(e!=null&&(e=""+dn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+dn(n):""}function vx(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(H(92));if(El(s)){if(1<s.length)throw Error(H(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=dn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),kf(t)}function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var T2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function g0(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||T2.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function bx(t,e,n){if(e!=null&&typeof e!="object")throw Error(H(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var r in e)s=e[r],e.hasOwnProperty(r)&&n[r]!==s&&g0(t,r,s)}else for(var i in e)e.hasOwnProperty(i)&&g0(t,i,e[i])}function lp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mc(t){return A2.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function us(){}var Mf=null;function op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,sa=null;function y0(t){var e=Va(t);if(e&&(t=e.stateNode)){var n=t[$t]||null;e:switch(t=e.stateNode,e.type){case"input":if(Df(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=s[$t]||null;if(!r)throw Error(H(90));Df(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&gx(s)}break e;case"textarea":_x(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}}}var Ch=!1;function xx(t,e,n){if(Ch)return t(e,n);Ch=!0;try{var s=t(e);return s}finally{if(Ch=!1,(Gi!==null||sa!==null)&&(Ed(),Gi&&(e=Gi,t=sa,sa=Gi=null,y0(e),t)))for(e=0;e<t.length;e++)y0(t[e])}}function eo(t,e){var n=t.stateNode;if(n===null)return null;var s=n[$t]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vf=!1;if(_s)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Vf=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Vf=!1}var Ws=null,cp=null,Vc=null;function Ex(){if(Vc)return Vc;var t,e=cp,n=e.length,s,r="value"in Ws?Ws.value:Ws.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===r[i-s];s++);return Vc=r.slice(t,1<s?1-s:void 0)}function Uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gc(){return!0}function _0(){return!1}function Yt(t){function e(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gc:_0,this.isPropagationStopped=_0,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=Yt(vi),ko=He({},vi,{view:0,detail:0}),S2=Yt(ko),Rh,Ih,pl,hd=He({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pl&&(pl&&t.type==="mousemove"?(Rh=t.screenX-pl.screenX,Ih=t.screenY-pl.screenY):Ih=Rh=0,pl=t),Rh)},movementY:function(t){return"movementY"in t?t.movementY:Ih}}),v0=Yt(hd),N2=He({},hd,{dataTransfer:0}),C2=Yt(N2),R2=He({},ko,{relatedTarget:0}),jh=Yt(R2),I2=He({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),j2=Yt(I2),k2=He({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D2=Yt(k2),O2=He({},vi,{data:0}),b0=Yt(O2),M2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U2[t])?!!e[t]:!1}function up(){return L2}var P2=He({},ko,{key:function(t){if(t.key){var e=M2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?V2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(t){return t.type==="keypress"?Uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),z2=Yt(P2),B2=He({},hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x0=Yt(B2),q2=He({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),H2=Yt(q2),F2=He({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),G2=Yt(F2),K2=He({},hd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q2=Yt(K2),$2=He({},vi,{newState:0,oldState:0}),Y2=Yt($2),X2=[9,13,27,32],dp=_s&&"CompositionEvent"in window,Dl=null;_s&&"documentMode"in document&&(Dl=document.documentMode);var J2=_s&&"TextEvent"in window&&!Dl,Tx=_s&&(!dp||Dl&&8<Dl&&11>=Dl),E0=" ",T0=!1;function wx(t,e){switch(t){case"keyup":return X2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ax(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function W2(t,e){switch(t){case"compositionend":return Ax(e);case"keypress":return e.which!==32?null:(T0=!0,E0);case"textInput":return t=e.data,t===E0&&T0?null:t;default:return null}}function Z2(t,e){if(Ki)return t==="compositionend"||!dp&&wx(t,e)?(t=Ex(),Vc=cp=Ws=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tx&&e.locale!=="ko"?null:e.data;default:return null}}var eN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eN[t.type]:e==="textarea"}function Sx(t,e,n,s){Gi?sa?sa.push(s):sa=[s]:Gi=s,e=ju(e,"onChange"),0<e.length&&(n=new dd("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Ol=null,to=null;function tN(t){xT(t,0)}function fd(t){var e=Tl(t);if(gx(e))return t}function A0(t,e){if(t==="change")return e}var Nx=!1;if(_s){var kh;if(_s){var Dh="oninput"in document;if(!Dh){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),Dh=typeof S0.oninput=="function"}kh=Dh}else kh=!1;Nx=kh&&(!document.documentMode||9<document.documentMode)}function N0(){Ol&&(Ol.detachEvent("onpropertychange",Cx),to=Ol=null)}function Cx(t){if(t.propertyName==="value"&&fd(to)){var e=[];Sx(e,to,t,op(t)),xx(tN,e)}}function nN(t,e,n){t==="focusin"?(N0(),Ol=e,to=n,Ol.attachEvent("onpropertychange",Cx)):t==="focusout"&&N0()}function sN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fd(to)}function rN(t,e){if(t==="click")return fd(e)}function iN(t,e){if(t==="input"||t==="change")return fd(e)}function aN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:aN;function no(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!If.call(e,r)||!on(t[r],e[r]))return!1}return!0}function C0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function R0(t,e){var n=C0(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=C0(n)}}function Rx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ix(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=fu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fu(t.document)}return e}function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var lN=_s&&"documentMode"in document&&11>=document.documentMode,Qi=null,Uf=null,Ml=null,Lf=!1;function I0(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lf||Qi==null||Qi!==fu(s)||(s=Qi,"selectionStart"in s&&hp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ml&&no(Ml,s)||(Ml=s,s=ju(Uf,"onSelect"),0<s.length&&(e=new dd("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Qi)))}function Hr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $i={animationend:Hr("Animation","AnimationEnd"),animationiteration:Hr("Animation","AnimationIteration"),animationstart:Hr("Animation","AnimationStart"),transitionrun:Hr("Transition","TransitionRun"),transitionstart:Hr("Transition","TransitionStart"),transitioncancel:Hr("Transition","TransitionCancel"),transitionend:Hr("Transition","TransitionEnd")},Oh={},jx={};_s&&(jx=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function bi(t){if(Oh[t])return Oh[t];if(!$i[t])return t;var e=$i[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jx)return Oh[t]=e[n];return t}var kx=bi("animationend"),Dx=bi("animationiteration"),Ox=bi("animationstart"),oN=bi("transitionrun"),cN=bi("transitionstart"),uN=bi("transitioncancel"),Mx=bi("transitionend"),Vx=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function In(t,e){Vx.set(t,e),_i(e,[t])}var mu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},un=[],Yi=0,fp=0;function md(){for(var t=Yi,e=fp=Yi=0;e<t;){var n=un[e];un[e++]=null;var s=un[e];un[e++]=null;var r=un[e];un[e++]=null;var i=un[e];if(un[e++]=null,s!==null&&r!==null){var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}i!==0&&Ux(n,r,i)}}function pd(t,e,n,s){un[Yi++]=t,un[Yi++]=e,un[Yi++]=n,un[Yi++]=s,fp|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function mp(t,e,n,s){return pd(t,e,n,s),pu(t)}function xi(t,e){return pd(t,null,null,e),pu(t)}function Ux(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var r=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(r=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,r&&e!==null&&(r=31-an(n),t=i.hiddenUpdates,s=t[r],s===null?t[r]=[e]:s.push(e),e.lane=n|536870912),i):null}function pu(t){if(50<Fl)throw Fl=0,am=null,Error(H(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Xi={};function dN(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,s){return new dN(t,e,n,s)}function pp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ms(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Lx(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Lc(t,e,n,s,r,i){var a=0;if(s=t,typeof t=="function")pp(t)&&(a=1);else if(typeof t=="string")a=gC(t,n,zn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Sf:return t=Zt(31,n,e,r),t.elementType=Sf,t.lanes=i,t;case qi:return Jr(n.children,r,i,e);case sx:a=8,r|=24;break;case Tf:return t=Zt(12,n,e,r|2),t.elementType=Tf,t.lanes=i,t;case wf:return t=Zt(13,n,e,r),t.elementType=wf,t.lanes=i,t;case Af:return t=Zt(19,n,e,r),t.elementType=Af,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cs:a=10;break e;case rx:a=9;break e;case tp:a=11;break e;case np:a=14;break e;case zs:a=16,s=null;break e}a=29,n=Error(H(130,t===null?"null":typeof t,"")),s=null}return e=Zt(a,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Jr(t,e,n,s){return t=Zt(7,t,s,e),t.lanes=n,t}function Mh(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function Px(t){var e=Zt(18,null,null,0);return e.stateNode=t,e}function Vh(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var j0=new WeakMap;function pn(t,e){if(typeof t=="object"&&t!==null){var n=j0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:d0(e)},j0.set(t,e),e)}return{value:t,source:e,stack:d0(e)}}var Ji=[],Wi=0,gu=null,so=0,hn=[],fn=0,vr=null,Vn=1,Un="";function ls(t,e){Ji[Wi++]=so,Ji[Wi++]=gu,gu=t,so=e}function zx(t,e,n){hn[fn++]=Vn,hn[fn++]=Un,hn[fn++]=vr,vr=t;var s=Vn;t=Un;var r=32-an(s)-1;s&=~(1<<r),n+=1;var i=32-an(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Vn=1<<32-an(e)+r|n<<r|s,Un=i+t}else Vn=1<<i|n<<r|s,Un=t}function gp(t){t.return!==null&&(ls(t,1),zx(t,1,0))}function yp(t){for(;t===gu;)gu=Ji[--Wi],Ji[Wi]=null,so=Ji[--Wi],Ji[Wi]=null;for(;t===vr;)vr=hn[--fn],hn[fn]=null,Un=hn[--fn],hn[fn]=null,Vn=hn[--fn],hn[fn]=null}function Bx(t,e){hn[fn++]=Vn,hn[fn++]=Un,hn[fn++]=vr,Vn=e.id,Un=e.overflow,vr=t}var wt=null,Pe=null,xe=!1,ir=null,gn=!1,zf=Error(H(519));function br(t){var e=Error(H(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ro(pn(e,t)),zf}function k0(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Tt]=t,e[$t]=s,n){case"dialog":me("cancel",e),me("close",e);break;case"iframe":case"object":case"embed":me("load",e);break;case"video":case"audio":for(n=0;n<oo.length;n++)me(oo[n],e);break;case"source":me("error",e);break;case"img":case"image":case"link":me("error",e),me("load",e);break;case"details":me("toggle",e);break;case"input":me("invalid",e),yx(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":me("invalid",e);break;case"textarea":me("invalid",e),vx(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||TT(e.textContent,n)?(s.popover!=null&&(me("beforetoggle",e),me("toggle",e)),s.onScroll!=null&&me("scroll",e),s.onScrollEnd!=null&&me("scrollend",e),s.onClick!=null&&(e.onclick=us),e=!0):e=!1,e||br(t,!0)}function D0(t){for(wt=t.return;wt;)switch(wt.tag){case 5:case 31:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:wt=wt.return}}function Di(t){if(t!==wt)return!1;if(!xe)return D0(t),xe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||dm(t.type,t.memoizedProps)),n=!n),n&&Pe&&br(t),D0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Pe=v_(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Pe=v_(t)}else e===27?(e=Pe,jr(t.type)?(t=pm,pm=null,Pe=t):Pe=e):Pe=wt?bn(t.stateNode.nextSibling):null;return!0}function ai(){Pe=wt=null,xe=!1}function Uh(){var t=ir;return t!==null&&(Ft===null?Ft=t:Ft.push.apply(Ft,t),ir=null),t}function ro(t){ir===null?ir=[t]:ir.push(t)}var Bf=Xn(null),Ei=null,ds=null;function qs(t,e,n){Ve(Bf,e._currentValue),e._currentValue=n}function ps(t){t._currentValue=Bf.current,vt(Bf)}function qf(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Hf(t,e,n,s){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var i=r.dependencies;if(i!==null){var a=r.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=r;for(var c=0;c<e.length;c++)if(l.context===e[c]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),qf(i.return,n,t),s||(a=null);break e}i=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(H(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),qf(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Ua(t,e,n,s){t=null;for(var r=e,i=!1;r!==null;){if(!i){if(r.flags&524288)i=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(H(387));if(a=a.memoizedProps,a!==null){var l=r.type;on(r.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(r===cu.current){if(a=r.alternate,a===null)throw Error(H(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(uo):t=[uo])}r=r.return}t!==null&&Hf(e,t,n,s),e.flags|=262144}function yu(t){for(t=t.firstContext;t!==null;){if(!on(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function li(t){Ei=t,ds=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function St(t){return qx(Ei,t)}function yc(t,e){return Ei===null&&li(t),qx(t,e)}function qx(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ds===null){if(t===null)throw Error(H(308));ds=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ds=ds.next=e;return n}var hN=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},fN=mt.unstable_scheduleCallback,mN=mt.unstable_NormalPriority,lt={$$typeof:cs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _p(){return{controller:new hN,data:new Map,refCount:0}}function Do(t){t.refCount--,t.refCount===0&&fN(mN,function(){t.controller.abort()})}var Vl=null,Ff=0,pa=0,ra=null;function pN(t,e){if(Vl===null){var n=Vl=[];Ff=0,pa=Hp(),ra={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Ff++,e.then(O0,O0),e}function O0(){if(--Ff===0&&Vl!==null){ra!==null&&(ra.status="fulfilled");var t=Vl;Vl=null,pa=0,ra=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function gN(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var M0=ie.S;ie.S=function(t,e){nT=sn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&pN(t,e),M0!==null&&M0(t,e)};var Wr=Xn(null);function vp(){var t=Wr.current;return t!==null?t:Oe.pooledCache}function Pc(t,e){e===null?Ve(Wr,Wr.current):Ve(Wr,e.pool)}function Hx(){var t=vp();return t===null?null:{parent:lt._currentValue,pool:t}}var La=Error(H(460)),bp=Error(H(474)),gd=Error(H(542)),_u={then:function(){}};function V0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fx(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(us,us),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,L0(t),t;default:if(typeof e.status=="string")e.then(us,us);else{if(t=Oe,t!==null&&100<t.shellSuspendCounter)throw Error(H(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=s}},function(s){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,L0(t),t}throw Zr=e,La}}function Kr(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Zr=n,La):n}}var Zr=null;function U0(){if(Zr===null)throw Error(H(459));var t=Zr;return Zr=null,t}function L0(t){if(t===La||t===gd)throw Error(H(483))}var ia=null,io=0;function _c(t){var e=io;return io+=1,ia===null&&(ia=[]),Fx(ia,t,e)}function gl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function vc(t,e){throw e.$$typeof===n2?Error(H(525)):(t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Gx(t){function e(A,b){if(t){var x=A.deletions;x===null?(A.deletions=[b],A.flags|=16):x.push(b)}}function n(A,b){if(!t)return null;for(;b!==null;)e(A,b),b=b.sibling;return null}function s(A){for(var b=new Map;A!==null;)A.key!==null?b.set(A.key,A):b.set(A.index,A),A=A.sibling;return b}function r(A,b){return A=ms(A,b),A.index=0,A.sibling=null,A}function i(A,b,x){return A.index=x,t?(x=A.alternate,x!==null?(x=x.index,x<b?(A.flags|=67108866,b):x):(A.flags|=67108866,b)):(A.flags|=1048576,b)}function a(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function l(A,b,x,j){return b===null||b.tag!==6?(b=Mh(x,A.mode,j),b.return=A,b):(b=r(b,x),b.return=A,b)}function c(A,b,x,j){var U=x.type;return U===qi?f(A,b,x.props.children,j,x.key):b!==null&&(b.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===zs&&Kr(U)===b.type)?(b=r(b,x.props),gl(b,x),b.return=A,b):(b=Lc(x.type,x.key,x.props,null,A.mode,j),gl(b,x),b.return=A,b)}function d(A,b,x,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=Vh(x,A.mode,j),b.return=A,b):(b=r(b,x.children||[]),b.return=A,b)}function f(A,b,x,j,U){return b===null||b.tag!==7?(b=Jr(x,A.mode,j,U),b.return=A,b):(b=r(b,x),b.return=A,b)}function m(A,b,x){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Mh(""+b,A.mode,x),b.return=A,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dc:return x=Lc(b.type,b.key,b.props,null,A.mode,x),gl(x,b),x.return=A,x;case xl:return b=Vh(b,A.mode,x),b.return=A,b;case zs:return b=Kr(b),m(A,b,x)}if(El(b)||fl(b))return b=Jr(b,A.mode,x,null),b.return=A,b;if(typeof b.then=="function")return m(A,_c(b),x);if(b.$$typeof===cs)return m(A,yc(A,b),x);vc(A,b)}return null}function p(A,b,x,j){var U=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return U!==null?null:l(A,b,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case dc:return x.key===U?c(A,b,x,j):null;case xl:return x.key===U?d(A,b,x,j):null;case zs:return x=Kr(x),p(A,b,x,j)}if(El(x)||fl(x))return U!==null?null:f(A,b,x,j,null);if(typeof x.then=="function")return p(A,b,_c(x),j);if(x.$$typeof===cs)return p(A,b,yc(A,x),j);vc(A,x)}return null}function y(A,b,x,j,U){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return A=A.get(x)||null,l(b,A,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case dc:return A=A.get(j.key===null?x:j.key)||null,c(b,A,j,U);case xl:return A=A.get(j.key===null?x:j.key)||null,d(b,A,j,U);case zs:return j=Kr(j),y(A,b,x,j,U)}if(El(j)||fl(j))return A=A.get(x)||null,f(b,A,j,U,null);if(typeof j.then=="function")return y(A,b,x,_c(j),U);if(j.$$typeof===cs)return y(A,b,x,yc(b,j),U);vc(b,j)}return null}function R(A,b,x,j){for(var U=null,B=null,T=b,_=b=0,v=null;T!==null&&_<x.length;_++){T.index>_?(v=T,T=null):v=T.sibling;var S=p(A,T,x[_],j);if(S===null){T===null&&(T=v);break}t&&T&&S.alternate===null&&e(A,T),b=i(S,b,_),B===null?U=S:B.sibling=S,B=S,T=v}if(_===x.length)return n(A,T),xe&&ls(A,_),U;if(T===null){for(;_<x.length;_++)T=m(A,x[_],j),T!==null&&(b=i(T,b,_),B===null?U=T:B.sibling=T,B=T);return xe&&ls(A,_),U}for(T=s(T);_<x.length;_++)v=y(T,A,_,x[_],j),v!==null&&(t&&v.alternate!==null&&T.delete(v.key===null?_:v.key),b=i(v,b,_),B===null?U=v:B.sibling=v,B=v);return t&&T.forEach(function(w){return e(A,w)}),xe&&ls(A,_),U}function I(A,b,x,j){if(x==null)throw Error(H(151));for(var U=null,B=null,T=b,_=b=0,v=null,S=x.next();T!==null&&!S.done;_++,S=x.next()){T.index>_?(v=T,T=null):v=T.sibling;var w=p(A,T,S.value,j);if(w===null){T===null&&(T=v);break}t&&T&&w.alternate===null&&e(A,T),b=i(w,b,_),B===null?U=w:B.sibling=w,B=w,T=v}if(S.done)return n(A,T),xe&&ls(A,_),U;if(T===null){for(;!S.done;_++,S=x.next())S=m(A,S.value,j),S!==null&&(b=i(S,b,_),B===null?U=S:B.sibling=S,B=S);return xe&&ls(A,_),U}for(T=s(T);!S.done;_++,S=x.next())S=y(T,A,_,S.value,j),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?_:S.key),b=i(S,b,_),B===null?U=S:B.sibling=S,B=S);return t&&T.forEach(function(k){return e(A,k)}),xe&&ls(A,_),U}function D(A,b,x,j){if(typeof x=="object"&&x!==null&&x.type===qi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case dc:e:{for(var U=x.key;b!==null;){if(b.key===U){if(U=x.type,U===qi){if(b.tag===7){n(A,b.sibling),j=r(b,x.props.children),j.return=A,A=j;break e}}else if(b.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===zs&&Kr(U)===b.type){n(A,b.sibling),j=r(b,x.props),gl(j,x),j.return=A,A=j;break e}n(A,b);break}else e(A,b);b=b.sibling}x.type===qi?(j=Jr(x.props.children,A.mode,j,x.key),j.return=A,A=j):(j=Lc(x.type,x.key,x.props,null,A.mode,j),gl(j,x),j.return=A,A=j)}return a(A);case xl:e:{for(U=x.key;b!==null;){if(b.key===U)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(A,b.sibling),j=r(b,x.children||[]),j.return=A,A=j;break e}else{n(A,b);break}else e(A,b);b=b.sibling}j=Vh(x,A.mode,j),j.return=A,A=j}return a(A);case zs:return x=Kr(x),D(A,b,x,j)}if(El(x))return R(A,b,x,j);if(fl(x)){if(U=fl(x),typeof U!="function")throw Error(H(150));return x=U.call(x),I(A,b,x,j)}if(typeof x.then=="function")return D(A,b,_c(x),j);if(x.$$typeof===cs)return D(A,b,yc(A,x),j);vc(A,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,b!==null&&b.tag===6?(n(A,b.sibling),j=r(b,x),j.return=A,A=j):(n(A,b),j=Mh(x,A.mode,j),j.return=A,A=j),a(A)):n(A,b)}return function(A,b,x,j){try{io=0;var U=D(A,b,x,j);return ia=null,U}catch(T){if(T===La||T===gd)throw T;var B=Zt(29,T,null,A.mode);return B.lanes=j,B.return=A,B}finally{}}}var oi=Gx(!0),Kx=Gx(!1),Bs=!1;function xp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ar(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function lr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,we&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,e=pu(t),Ux(t,null,n),e}return pd(t,s,e,n),pu(t)}function Ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,ux(t,n)}}function Lh(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Kf=!1;function Ll(){if(Kf){var t=ra;if(t!==null)throw t}}function Pl(t,e,n,s){Kf=!1;var r=t.updateQueue;Bs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;a=0,f=d=c=null,l=i;do{var p=l.lane&-536870913,y=p!==l.lane;if(y?(ve&p)===p:(s&p)===p){p!==0&&p===pa&&(Kf=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var R=t,I=l;p=e;var D=n;switch(I.tag){case 1:if(R=I.payload,typeof R=="function"){m=R.call(D,m,p);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=I.payload,p=typeof R=="function"?R.call(D,m,p):R,p==null)break e;m=He({},m,p);break e;case 2:Bs=!0}}p=l.callback,p!==null&&(t.flags|=64,y&&(t.flags|=8192),y=r.callbacks,y===null?r.callbacks=[p]:y.push(p))}else y={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=y,c=m):f=f.next=y,a|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,i===null&&(r.shared.lanes=0),Er|=a,t.lanes=a,t.memoizedState=m}}function Qx(t,e){if(typeof t!="function")throw Error(H(191,t));t.call(e)}function $x(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Qx(n[t],e)}var ga=Xn(null),vu=Xn(0);function P0(t,e){t=Es,Ve(vu,t),Ve(ga,e),Es=t|e.baseLanes}function Qf(){Ve(vu,Es),Ve(ga,ga.current)}function Ep(){Es=vu.current,vt(ga),vt(vu)}var cn=Xn(null),vn=null;function Hs(t){var e=t.alternate;Ve(tt,tt.current&1),Ve(cn,t),vn===null&&(e===null||ga.current!==null||e.memoizedState!==null)&&(vn=t)}function $f(t){Ve(tt,tt.current),Ve(cn,t),vn===null&&(vn=t)}function Yx(t){t.tag===22?(Ve(tt,tt.current),Ve(cn,t),vn===null&&(vn=t)):Fs()}function Fs(){Ve(tt,tt.current),Ve(cn,cn.current)}function Wt(t){vt(cn),vn===t&&(vn=null),vt(tt)}var tt=Xn(0);function bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||fm(n)||mm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vs=0,ue=null,je=null,it=null,xu=!1,aa=!1,ci=!1,Eu=0,ao=0,la=null,yN=0;function Ye(){throw Error(H(321))}function Tp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function wp(t,e,n,s,r,i){return vs=i,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ie.H=t===null||t.memoizedState===null?SE:Mp,ci=!1,i=n(s,r),ci=!1,aa&&(i=Jx(e,n,s,r)),Xx(t),i}function Xx(t){ie.H=lo;var e=je!==null&&je.next!==null;if(vs=0,it=je=ue=null,xu=!1,ao=0,la=null,e)throw Error(H(300));t===null||ct||(t=t.dependencies,t!==null&&yu(t)&&(ct=!0))}function Jx(t,e,n,s){ue=t;var r=0;do{if(aa&&(la=null),ao=0,aa=!1,25<=r)throw Error(H(301));if(r+=1,it=je=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ie.H=NE,i=e(n,s)}while(aa);return i}function _N(){var t=ie.H,e=t.useState()[0];return e=typeof e.then=="function"?Oo(e):e,t=t.useState()[0],(je!==null?je.memoizedState:null)!==t&&(ue.flags|=1024),e}function Ap(){var t=Eu!==0;return Eu=0,t}function Sp(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Np(t){if(xu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}xu=!1}vs=0,it=je=ue=null,aa=!1,ao=Eu=0,la=null}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ue.memoizedState=it=t:it=it.next=t,it}function st(){if(je===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=it===null?ue.memoizedState:it.next;if(e!==null)it=e,je=t;else{if(t===null)throw ue.alternate===null?Error(H(467)):Error(H(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},it===null?ue.memoizedState=it=t:it=it.next=t}return it}function yd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(t){var e=ao;return ao+=1,la===null&&(la=[]),t=Fx(la,t,e),e=ue,(it===null?e.memoizedState:it.next)===null&&(e=e.alternate,ie.H=e===null||e.memoizedState===null?SE:Mp),t}function _d(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Oo(t);if(t.$$typeof===cs)return St(t)}throw Error(H(438,String(t)))}function Cp(t){var e=null,n=ue.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ue.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=yd(),ue.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=s2;return e.index++,n}function bs(t,e){return typeof e=="function"?e(t):e}function zc(t){var e=st();return Rp(e,je,t)}function Rp(t,e,n){var s=t.queue;if(s===null)throw Error(H(311));s.lastRenderedReducer=n;var r=t.baseQueue,i=s.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}e.baseQueue=r=i,s.pending=null}if(i=t.baseState,r===null)t.memoizedState=i;else{e=r.next;var l=a=null,c=null,d=e,f=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(ve&m)===m:(vs&m)===m){var p=d.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===pa&&(f=!0);else if((vs&p)===p){d=d.next,p===pa&&(f=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=m,a=i):c=c.next=m,ue.lanes|=p,Er|=p;m=d.action,ci&&n(i,m),i=d.hasEagerState?d.eagerState:n(i,m)}else p={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,a=i):c=c.next=p,ue.lanes|=m,Er|=m;d=d.next}while(d!==null&&d!==e);if(c===null?a=i:c.next=l,!on(i,t.memoizedState)&&(ct=!0,f&&(n=ra,n!==null)))throw n;t.memoizedState=i,t.baseState=a,t.baseQueue=c,s.lastRenderedState=i}return r===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Ph(t){var e=st(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);on(i,e.memoizedState)||(ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Wx(t,e,n){var s=ue,r=st(),i=xe;if(i){if(n===void 0)throw Error(H(407));n=n()}else n=e();var a=!on((je||r).memoizedState,n);if(a&&(r.memoizedState=n,ct=!0),r=r.queue,Ip(tE.bind(null,s,r,t),[t]),r.getSnapshot!==e||a||it!==null&&it.memoizedState.tag&1){if(s.flags|=2048,ya(9,{destroy:void 0},eE.bind(null,s,r,n,e),null),Oe===null)throw Error(H(349));i||vs&127||Zx(s,e,n)}return n}function Zx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e=yd(),ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eE(t,e,n,s){e.value=n,e.getSnapshot=s,nE(e)&&sE(t)}function tE(t,e,n){return n(function(){nE(e)&&sE(t)})}function nE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function sE(t){var e=xi(t,2);e!==null&&Qt(e,t,2)}function Yf(t){var e=Lt();if(typeof t=="function"){var n=t;if(t=n(),ci){Js(!0);try{n()}finally{Js(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},e}function rE(t,e,n,s){return t.baseState=n,Rp(t,je,typeof s=="function"?s:bs)}function vN(t,e,n,s,r){if(bd(t))throw Error(H(485));if(t=e.action,t!==null){var i={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){i.listeners.push(a)}};ie.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,iE(e,i)):(i.next=n.next,e.pending=n.next=i)}}function iE(t,e){var n=e.action,s=e.payload,r=t.state;if(e.isTransition){var i=ie.T,a={};ie.T=a;try{var l=n(r,s),c=ie.S;c!==null&&c(a,l),z0(t,e,l)}catch(d){Xf(t,e,d)}finally{i!==null&&a.types!==null&&(i.types=a.types),ie.T=i}}else try{i=n(r,s),z0(t,e,i)}catch(d){Xf(t,e,d)}}function z0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){B0(t,e,s)},function(s){return Xf(t,e,s)}):B0(t,e,n)}function B0(t,e,n){e.status="fulfilled",e.value=n,aE(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,iE(t,n)))}function Xf(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,aE(e),e=e.next;while(e!==s)}t.action=null}function aE(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function lE(t,e){return e}function q0(t,e){if(xe){var n=Oe.formState;if(n!==null){e:{var s=ue;if(xe){if(Pe){t:{for(var r=Pe,i=gn;r.nodeType!==8;){if(!i){r=null;break t}if(r=bn(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){Pe=bn(r.nextSibling),s=r.data==="F!";break e}}br(s)}s=!1}s&&(e=n[0])}}return n=Lt(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lE,lastRenderedState:e},n.queue=s,n=TE.bind(null,ue,s),s.dispatch=n,s=Yf(!1),i=Op.bind(null,ue,!1,s.queue),s=Lt(),r={state:e,dispatch:null,action:t,pending:null},s.queue=r,n=vN.bind(null,ue,r,i,n),r.dispatch=n,s.memoizedState=t,[e,n,!1]}function H0(t){var e=st();return oE(e,je,t)}function oE(t,e,n){if(e=Rp(t,e,lE)[0],t=zc(bs)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Oo(e)}catch(a){throw a===La?gd:a}else s=e;e=st();var r=e.queue,i=r.dispatch;return n!==e.memoizedState&&(ue.flags|=2048,ya(9,{destroy:void 0},bN.bind(null,r,n),null)),[s,i,t]}function bN(t,e){t.action=e}function F0(t){var e=st(),n=je;if(n!==null)return oE(e,n,t);st(),e=e.memoizedState,n=st();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function ya(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ue.updateQueue,e===null&&(e=yd(),ue.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function cE(){return st().memoizedState}function Bc(t,e,n,s){var r=Lt();ue.flags|=t,r.memoizedState=ya(1|e,{destroy:void 0},n,s===void 0?null:s)}function vd(t,e,n,s){var r=st();s=s===void 0?null:s;var i=r.memoizedState.inst;je!==null&&s!==null&&Tp(s,je.memoizedState.deps)?r.memoizedState=ya(e,i,n,s):(ue.flags|=t,r.memoizedState=ya(1|e,i,n,s))}function G0(t,e){Bc(8390656,8,t,e)}function Ip(t,e){vd(2048,8,t,e)}function xN(t){ue.flags|=4;var e=ue.updateQueue;if(e===null)e=yd(),ue.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function uE(t){var e=st().memoizedState;return xN({ref:e,nextImpl:t}),function(){if(we&2)throw Error(H(440));return e.impl.apply(void 0,arguments)}}function dE(t,e){return vd(4,2,t,e)}function hE(t,e){return vd(4,4,t,e)}function fE(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mE(t,e,n){n=n!=null?n.concat([t]):null,vd(4,4,fE.bind(null,e,t),n)}function jp(){}function pE(t,e){var n=st();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&Tp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function gE(t,e){var n=st();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&Tp(e,s[1]))return s[0];if(s=t(),ci){Js(!0);try{t()}finally{Js(!1)}}return n.memoizedState=[s,e],s}function kp(t,e,n){return n===void 0||vs&1073741824&&!(ve&261930)?t.memoizedState=e:(t.memoizedState=n,t=rT(),ue.lanes|=t,Er|=t,n)}function yE(t,e,n,s){return on(n,e)?n:ga.current!==null?(t=kp(t,n,s),on(t,e)||(ct=!0),t):!(vs&42)||vs&1073741824&&!(ve&261930)?(ct=!0,t.memoizedState=n):(t=rT(),ue.lanes|=t,Er|=t,e)}function _E(t,e,n,s,r){var i=Ae.p;Ae.p=i!==0&&8>i?i:8;var a=ie.T,l={};ie.T=l,Op(t,!1,e,n);try{var c=r(),d=ie.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=gN(c,s);zl(t,e,f,ln(t))}else zl(t,e,s,ln(t))}catch(m){zl(t,e,{then:function(){},status:"rejected",reason:m},ln())}finally{Ae.p=i,a!==null&&l.types!==null&&(a.types=l.types),ie.T=a}}function EN(){}function Jf(t,e,n,s){if(t.tag!==5)throw Error(H(476));var r=vE(t).queue;_E(t,r,e,Xr,n===null?EN:function(){return bE(t),n(s)})}function vE(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Xr,baseState:Xr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:Xr},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function bE(t){var e=vE(t);e.next===null&&(e=t.alternate.memoizedState),zl(t,e.next.queue,{},ln())}function Dp(){return St(uo)}function xE(){return st().memoizedState}function EE(){return st().memoizedState}function TN(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ln();t=ar(n);var s=lr(e,t,n);s!==null&&(Qt(s,e,n),Ul(s,e,n)),e={cache:_p()},t.payload=e;return}e=e.return}}function wN(t,e,n){var s=ln();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},bd(t)?wE(e,n):(n=mp(t,e,n,s),n!==null&&(Qt(n,t,s),AE(n,e,s)))}function TE(t,e,n){var s=ln();zl(t,e,n,s)}function zl(t,e,n,s){var r={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(bd(t))wE(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,on(l,a))return pd(t,e,r,0),Oe===null&&md(),!1}catch{}finally{}if(n=mp(t,e,r,s),n!==null)return Qt(n,t,s),AE(n,e,s),!0}return!1}function Op(t,e,n,s){if(s={lane:2,revertLane:Hp(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},bd(t)){if(e)throw Error(H(479))}else e=mp(t,n,s,2),e!==null&&Qt(e,t,2)}function bd(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function wE(t,e){aa=xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function AE(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,ux(t,n)}}var lo={readContext:St,use:_d,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};lo.useEffectEvent=Ye;var SE={readContext:St,use:_d,useCallback:function(t,e){return Lt().memoizedState=[t,e===void 0?null:e],t},useContext:St,useEffect:G0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Bc(4194308,4,fE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bc(4194308,4,t,e)},useInsertionEffect:function(t,e){Bc(4,2,t,e)},useMemo:function(t,e){var n=Lt();e=e===void 0?null:e;var s=t();if(ci){Js(!0);try{t()}finally{Js(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Lt();if(n!==void 0){var r=n(e);if(ci){Js(!0);try{n(e)}finally{Js(!1)}}}else r=e;return s.memoizedState=s.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=wN.bind(null,ue,t),[s.memoizedState,t]},useRef:function(t){var e=Lt();return t={current:t},e.memoizedState=t},useState:function(t){t=Yf(t);var e=t.queue,n=TE.bind(null,ue,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:jp,useDeferredValue:function(t,e){var n=Lt();return kp(n,t,e)},useTransition:function(){var t=Yf(!1);return t=_E.bind(null,ue,t.queue,!0,!1),Lt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ue,r=Lt();if(xe){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Oe===null)throw Error(H(349));ve&127||Zx(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,G0(tE.bind(null,s,i,t),[t]),s.flags|=2048,ya(9,{destroy:void 0},eE.bind(null,s,i,n,e),null),n},useId:function(){var t=Lt(),e=Oe.identifierPrefix;if(xe){var n=Un,s=Vn;n=(s&~(1<<32-an(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Eu++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=yN++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Dp,useFormState:q0,useActionState:q0,useOptimistic:function(t){var e=Lt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Op.bind(null,ue,!0,n),n.dispatch=e,[t,e]},useMemoCache:Cp,useCacheRefresh:function(){return Lt().memoizedState=TN.bind(null,ue)},useEffectEvent:function(t){var e=Lt(),n={impl:t};return e.memoizedState=n,function(){if(we&2)throw Error(H(440));return n.impl.apply(void 0,arguments)}}},Mp={readContext:St,use:_d,useCallback:pE,useContext:St,useEffect:Ip,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:hE,useMemo:gE,useReducer:zc,useRef:cE,useState:function(){return zc(bs)},useDebugValue:jp,useDeferredValue:function(t,e){var n=st();return yE(n,je.memoizedState,t,e)},useTransition:function(){var t=zc(bs)[0],e=st().memoizedState;return[typeof t=="boolean"?t:Oo(t),e]},useSyncExternalStore:Wx,useId:xE,useHostTransitionStatus:Dp,useFormState:H0,useActionState:H0,useOptimistic:function(t,e){var n=st();return rE(n,je,t,e)},useMemoCache:Cp,useCacheRefresh:EE};Mp.useEffectEvent=uE;var NE={readContext:St,use:_d,useCallback:pE,useContext:St,useEffect:Ip,useImperativeHandle:mE,useInsertionEffect:dE,useLayoutEffect:hE,useMemo:gE,useReducer:Ph,useRef:cE,useState:function(){return Ph(bs)},useDebugValue:jp,useDeferredValue:function(t,e){var n=st();return je===null?kp(n,t,e):yE(n,je.memoizedState,t,e)},useTransition:function(){var t=Ph(bs)[0],e=st().memoizedState;return[typeof t=="boolean"?t:Oo(t),e]},useSyncExternalStore:Wx,useId:xE,useHostTransitionStatus:Dp,useFormState:F0,useActionState:F0,useOptimistic:function(t,e){var n=st();return je!==null?rE(n,je,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Cp,useCacheRefresh:EE};NE.useEffectEvent=uE;function zh(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wf={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=ln(),r=ar(s);r.payload=e,n!=null&&(r.callback=n),e=lr(t,r,s),e!==null&&(Qt(e,t,s),Ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=ln(),r=ar(s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=lr(t,r,s),e!==null&&(Qt(e,t,s),Ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),s=ar(n);s.tag=2,e!=null&&(s.callback=e),e=lr(t,s,n),e!==null&&(Qt(e,t,n),Ul(e,t,n))}};function K0(t,e,n,s,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!no(n,s)||!no(r,i):!0}function Q0(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Wf.enqueueReplaceState(e,e.state,null)}function ui(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=He({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function CE(t){mu(t)}function RE(t){console.error(t)}function IE(t){mu(t)}function Tu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function $0(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Zf(t,e,n){return n=ar(n),n.tag=3,n.payload={element:null},n.callback=function(){Tu(t,e)},n}function jE(t){return t=ar(t),t.tag=3,t}function kE(t,e,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;t.payload=function(){return r(i)},t.callback=function(){$0(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){$0(e,n,s),typeof r!="function"&&(or===null?or=new Set([this]):or.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function AN(t,e,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Ua(e,n,r,!0),n=cn.current,n!==null){switch(n.tag){case 31:case 13:return vn===null?Cu():n.alternate===null&&Xe===0&&(Xe=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===_u?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Jh(t,s,r)),!1;case 22:return n.flags|=65536,s===_u?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Jh(t,s,r)),!1}throw Error(H(435,n.tag))}return Jh(t,s,r),Cu(),!1}if(xe)return e=cn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,s!==zf&&(t=Error(H(422),{cause:s}),ro(pn(t,n)))):(s!==zf&&(e=Error(H(423),{cause:s}),ro(pn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,s=pn(s,n),r=Zf(t.stateNode,s,r),Lh(t,r),Xe!==4&&(Xe=2)),!1;var i=Error(H(520),{cause:s});if(i=pn(i,n),Hl===null?Hl=[i]:Hl.push(i),Xe!==4&&(Xe=2),e===null)return!0;s=pn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Zf(n.stateNode,s,t),Lh(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(or===null||!or.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,r=jE(r),kE(r,t,n,s),Lh(n,r),!1}n=n.return}while(n!==null);return!1}var Vp=Error(H(461)),ct=!1;function xt(t,e,n,s){e.child=t===null?Kx(e,null,n,s):oi(e,t.child,n,s)}function Y0(t,e,n,s,r){n=n.render;var i=e.ref;if("ref"in s){var a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}else a=s;return li(e),s=wp(t,e,n,a,i,r),l=Ap(),t!==null&&!ct?(Sp(t,e,r),xs(t,e,r)):(xe&&l&&gp(e),e.flags|=1,xt(t,e,s,r),e.child)}function X0(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!pp(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,DE(t,e,i,s,r)):(t=Lc(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!Up(t,r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:no,n(a,s)&&t.ref===e.ref)return xs(t,e,r)}return e.flags|=1,t=ms(i,s),t.ref=e.ref,t.return=e,e.child=t}function DE(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(no(i,s)&&t.ref===e.ref)if(ct=!1,e.pendingProps=s=i,Up(t,r))t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,xs(t,e,r)}return em(t,e,n,s,r)}function OE(t,e,n,s){var r=s.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~i}else s=0,e.child=null;return J0(t,e,i,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pc(e,i!==null?i.cachePool:null),i!==null?P0(e,i):Qf(),Yx(e);else return s=e.lanes=536870912,J0(t,e,i!==null?i.baseLanes|n:n,n,s)}else i!==null?(Pc(e,i.cachePool),P0(e,i),Fs(),e.memoizedState=null):(t!==null&&Pc(e,null),Qf(),Fs());return xt(t,e,r,n),e.child}function wl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function J0(t,e,n,s,r){var i=vp();return i=i===null?null:{parent:lt._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&Pc(e,null),Qf(),Yx(e),t!==null&&Ua(t,e,s,!0),e.childLanes=r,null}function qc(t,e){return e=wu({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function W0(t,e,n){return oi(e,t.child,null,n),t=qc(e,e.pendingProps),t.flags|=2,Wt(e),e.memoizedState=null,t}function SN(t,e,n){var s=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(xe){if(s.mode==="hidden")return t=qc(e,s),e.lanes=536870912,wl(null,t);if($f(e),(t=Pe)?(t=ST(t,gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vr!==null?{id:Vn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},n=Px(t),n.return=e,e.child=n,wt=e,Pe=null)):t=null,t===null)throw br(e);return e.lanes=536870912,null}return qc(e,s)}var i=t.memoizedState;if(i!==null){var a=i.dehydrated;if($f(e),r)if(e.flags&256)e.flags&=-257,e=W0(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(H(558));else if(ct||Ua(t,e,n,!1),r=(n&t.childLanes)!==0,ct||r){if(s=Oe,s!==null&&(a=dx(s,n),a!==0&&a!==i.retryLane))throw i.retryLane=a,xi(t,a),Qt(s,t,a),Vp;Cu(),e=W0(t,e,n)}else t=i.treeContext,Pe=bn(a.nextSibling),wt=e,xe=!0,ir=null,gn=!1,t!==null&&Bx(e,t),e=qc(e,s),e.flags|=4096;return e}return t=ms(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Hc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(H(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function em(t,e,n,s,r){return li(e),n=wp(t,e,n,s,void 0,r),s=Ap(),t!==null&&!ct?(Sp(t,e,r),xs(t,e,r)):(xe&&s&&gp(e),e.flags|=1,xt(t,e,n,r),e.child)}function Z0(t,e,n,s,r,i){return li(e),e.updateQueue=null,n=Jx(e,s,n,r),Xx(t),s=Ap(),t!==null&&!ct?(Sp(t,e,i),xs(t,e,i)):(xe&&s&&gp(e),e.flags|=1,xt(t,e,n,i),e.child)}function e_(t,e,n,s,r){if(li(e),e.stateNode===null){var i=Xi,a=n.contextType;typeof a=="object"&&a!==null&&(i=St(a)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Wf,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},xp(e),a=n.contextType,i.context=typeof a=="object"&&a!==null?St(a):Xi,i.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(zh(e,n,a,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(a=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),a!==i.state&&Wf.enqueueReplaceState(i,i.state,null),Pl(e,s,i,r),Ll(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var l=e.memoizedProps,c=ui(n,l);i.props=c;var d=i.context,f=n.contextType;a=Xi,typeof f=="object"&&f!==null&&(a=St(f));var m=n.getDerivedStateFromProps;f=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||d!==a)&&Q0(e,i,s,a),Bs=!1;var p=e.memoizedState;i.state=p,Pl(e,s,i,r),Ll(),d=e.memoizedState,l||p!==d||Bs?(typeof m=="function"&&(zh(e,n,m,s),d=e.memoizedState),(c=Bs||K0(e,n,c,s,p,d,a))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),i.props=s,i.state=d,i.context=a,s=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,Gf(t,e),a=e.memoizedProps,f=ui(n,a),i.props=f,m=e.pendingProps,p=i.context,d=n.contextType,c=Xi,typeof d=="object"&&d!==null&&(c=St(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==m||p!==c)&&Q0(e,i,s,c),Bs=!1,p=e.memoizedState,i.state=p,Pl(e,s,i,r),Ll();var y=e.memoizedState;a!==m||p!==y||Bs||t!==null&&t.dependencies!==null&&yu(t.dependencies)?(typeof l=="function"&&(zh(e,n,l,s),y=e.memoizedState),(f=Bs||K0(e,n,f,s,p,y,c)||t!==null&&t.dependencies!==null&&yu(t.dependencies))?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,y,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),i.props=s,i.state=y,i.context=c,s=f):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,Hc(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=oi(e,t.child,null,r),e.child=oi(e,null,n,r)):xt(t,e,n,r),e.memoizedState=i.state,t=e.child):t=xs(t,e,r),t}function t_(t,e,n,s){return ai(),e.flags|=256,xt(t,e,n,s),e.child}var Bh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qh(t){return{baseLanes:t,cachePool:Hx()}}function Hh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=en),t}function ME(t,e,n){var s=e.pendingProps,r=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(tt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(xe){if(r?Hs(e):Fs(),(t=Pe)?(t=ST(t,gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vr!==null?{id:Vn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},n=Px(t),n.return=e,e.child=n,wt=e,Pe=null)):t=null,t===null)throw br(e);return mm(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,r?(Fs(),r=e.mode,l=wu({mode:"hidden",children:l},r),s=Jr(s,r,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=qh(n),s.childLanes=Hh(t,a,n),e.memoizedState=Bh,wl(null,s)):(Hs(e),tm(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(i)e.flags&256?(Hs(e),e.flags&=-257,e=Fh(t,e,n)):e.memoizedState!==null?(Fs(),e.child=t.child,e.flags|=128,e=null):(Fs(),l=s.fallback,r=e.mode,s=wu({mode:"visible",children:s.children},r),l=Jr(l,r,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,oi(e,t.child,null,n),s=e.child,s.memoizedState=qh(n),s.childLanes=Hh(t,a,n),e.memoizedState=Bh,e=wl(null,s));else if(Hs(e),mm(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var d=a.dgst;a=d,s=Error(H(419)),s.stack="",s.digest=a,ro({value:s,source:null,stack:null}),e=Fh(t,e,n)}else if(ct||Ua(t,e,n,!1),a=(n&t.childLanes)!==0,ct||a){if(a=Oe,a!==null&&(s=dx(a,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,xi(t,s),Qt(a,t,s),Vp;fm(l)||Cu(),e=Fh(t,e,n)}else fm(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Pe=bn(l.nextSibling),wt=e,xe=!0,ir=null,gn=!1,t!==null&&Bx(e,t),e=tm(e,s.children),e.flags|=4096);return e}return r?(Fs(),l=s.fallback,r=e.mode,c=t.child,d=c.sibling,s=ms(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=ms(d,l):(l=Jr(l,r,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,wl(null,s),s=e.child,l=t.child.memoizedState,l===null?l=qh(n):(r=l.cachePool,r!==null?(c=lt._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=Hx(),l={baseLanes:l.baseLanes|n,cachePool:r}),s.memoizedState=l,s.childLanes=Hh(t,a,n),e.memoizedState=Bh,wl(t.child,s)):(Hs(e),n=t.child,t=n.sibling,n=ms(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function tm(t,e){return e=wu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function wu(t,e){return t=Zt(22,t,null,e),t.lanes=0,t}function Fh(t,e,n){return oi(e,t.child,null,n),t=tm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function n_(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),qf(t.return,e,n)}function Gh(t,e,n,s,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r,treeForkCount:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r,a.treeForkCount=i)}function VE(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;s=s.children;var a=tt.current,l=(a&2)!==0;if(l?(a=a&1|2,e.flags|=128):a&=1,Ve(tt,a),xt(t,e,s,n),s=xe?so:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n_(t,n,e);else if(t.tag===19)n_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&bu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Gh(e,!1,r,n,i,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&bu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Gh(e,!0,n,null,i,s);break;case"together":Gh(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Er|=e.lanes,!(n&e.childLanes))if(t!==null){if(Ua(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ms(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ms(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Up(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&yu(t)))}function NN(t,e,n){switch(e.tag){case 3:uu(e,e.stateNode.containerInfo),qs(e,lt,t.memoizedState.cache),ai();break;case 27:case 5:Rf(e);break;case 4:uu(e,e.stateNode.containerInfo);break;case 10:qs(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,$f(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Hs(e),e.flags|=128,null):n&e.child.childLanes?ME(t,e,n):(Hs(e),t=xs(t,e,n),t!==null?t.sibling:null);Hs(e);break;case 19:var r=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Ua(t,e,n,!1),s=(n&e.childLanes)!==0),r){if(s)return VE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ve(tt,tt.current),s)break;return null;case 22:return e.lanes=0,OE(t,e,n,e.pendingProps);case 24:qs(e,lt,t.memoizedState.cache)}return xs(t,e,n)}function UE(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ct=!0;else{if(!Up(t,n)&&!(e.flags&128))return ct=!1,NN(t,e,n);ct=!!(t.flags&131072)}else ct=!1,xe&&e.flags&1048576&&zx(e,so,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=Kr(e.elementType),e.type=t,typeof t=="function")pp(t)?(s=ui(t,s),e.tag=1,e=e_(null,e,t,s,n)):(e.tag=0,e=em(null,e,t,s,n));else{if(t!=null){var r=t.$$typeof;if(r===tp){e.tag=11,e=Y0(null,e,t,s,n);break e}else if(r===np){e.tag=14,e=X0(null,e,t,s,n);break e}}throw e=Nf(t)||t,Error(H(306,e,""))}}return e;case 0:return em(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,r=ui(s,e.pendingProps),e_(t,e,s,r,n);case 3:e:{if(uu(e,e.stateNode.containerInfo),t===null)throw Error(H(387));s=e.pendingProps;var i=e.memoizedState;r=i.element,Gf(t,e),Pl(e,s,null,n);var a=e.memoizedState;if(s=a.cache,qs(e,lt,s),s!==i.cache&&Hf(e,[lt],n,!0),Ll(),s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=t_(t,e,s,n);break e}else if(s!==r){r=pn(Error(H(424)),e),ro(r),e=t_(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Pe=bn(t.firstChild),wt=e,xe=!0,ir=null,gn=!0,n=Kx(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ai(),s===r){e=xs(t,e,n);break e}xt(t,e,s,n)}e=e.child}return e;case 26:return Hc(t,e),t===null?(n=E_(e.type,null,e.pendingProps,null))?e.memoizedState=n:xe||(n=e.type,t=e.pendingProps,s=ku(rr.current).createElement(n),s[Tt]=e,s[$t]=t,Nt(s,n,t),_t(s),e.stateNode=s):e.memoizedState=E_(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Rf(e),t===null&&xe&&(s=e.stateNode=NT(e.type,e.pendingProps,rr.current),wt=e,gn=!0,r=Pe,jr(e.type)?(pm=r,Pe=bn(s.firstChild)):Pe=r),xt(t,e,e.pendingProps.children,n),Hc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&xe&&((r=s=Pe)&&(s=sC(s,e.type,e.pendingProps,gn),s!==null?(e.stateNode=s,wt=e,Pe=bn(s.firstChild),gn=!1,r=!0):r=!1),r||br(e)),Rf(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,dm(r,i)?s=null:a!==null&&dm(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=wp(t,e,_N,null,null,n),uo._currentValue=r),Hc(t,e),xt(t,e,s,n),e.child;case 6:return t===null&&xe&&((t=n=Pe)&&(n=rC(n,e.pendingProps,gn),n!==null?(e.stateNode=n,wt=e,Pe=null,t=!0):t=!1),t||br(e)),null;case 13:return ME(t,e,n);case 4:return uu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=oi(e,null,s,n):xt(t,e,s,n),e.child;case 11:return Y0(t,e,e.type,e.pendingProps,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,qs(e,e.type,s.value),xt(t,e,s.children,n),e.child;case 9:return r=e.type._context,s=e.pendingProps.children,li(e),r=St(r),s=s(r),e.flags|=1,xt(t,e,s,n),e.child;case 14:return X0(t,e,e.type,e.pendingProps,n);case 15:return DE(t,e,e.type,e.pendingProps,n);case 19:return VE(t,e,n);case 31:return SN(t,e,n);case 22:return OE(t,e,n,e.pendingProps);case 24:return li(e),s=St(lt),t===null?(r=vp(),r===null&&(r=Oe,i=_p(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=n),r=i),e.memoizedState={parent:s,cache:r},xp(e),qs(e,lt,r)):(t.lanes&n&&(Gf(t,e),Pl(e,null,null,n),Ll()),r=t.memoizedState,i=e.memoizedState,r.parent!==s?(r={parent:s,cache:s},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),qs(e,lt,s)):(s=i.cache,qs(e,lt,s),s!==r.cache&&Hf(e,[lt],n,!0))),xt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(H(156,e.tag))}function ns(t){t.flags|=4}function Kh(t,e,n,s,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(lT())t.flags|=8192;else throw Zr=_u,bp}else t.flags&=-16777217}function s_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!IT(e))if(lT())t.flags|=8192;else throw Zr=_u,bp}function bc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?ox():536870912,t.lanes|=e,_a|=e)}function yl(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function CN(t,e,n){var s=e.pendingProps;switch(yp(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return Le(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),ps(lt),ha(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Di(e)?ns(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Uh())),Le(e),null;case 26:var r=e.type,i=e.memoizedState;return t===null?(ns(e),i!==null?(Le(e),s_(e,i)):(Le(e),Kh(e,r,null,s,n))):i?i!==t.memoizedState?(ns(e),Le(e),s_(e,i)):(Le(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&ns(e),Le(e),Kh(e,r,t,s,n)),null;case 27:if(du(e),n=rr.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&ns(e);else{if(!s){if(e.stateNode===null)throw Error(H(166));return Le(e),null}t=zn.current,Di(e)?k0(e):(t=NT(r,s,n),e.stateNode=t,ns(e))}return Le(e),null;case 5:if(du(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&ns(e);else{if(!s){if(e.stateNode===null)throw Error(H(166));return Le(e),null}if(i=zn.current,Di(e))k0(e);else{var a=ku(rr.current);switch(i){case 1:i=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?a.createElement(r,{is:s.is}):a.createElement(r)}}i[Tt]=e,i[$t]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=i;e:switch(Nt(i,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ns(e)}}return Le(e),Kh(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&ns(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(H(166));if(t=rr.current,Di(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,r=wt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}t[Tt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||TT(t.nodeValue,n)),t||br(e,!0)}else t=ku(t).createTextNode(s),t[Tt]=e,e.stateNode=t}return Le(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Di(e),n!==null){if(t===null){if(!s)throw Error(H(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(557));t[Tt]=e}else ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),t=!1}else n=Uh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Wt(e),e):(Wt(e),null);if(e.flags&128)throw Error(H(558))}return Le(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Di(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(H(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(H(317));r[Tt]=e}else ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),r=!1}else r=Uh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Wt(e),e):(Wt(e),null)}return Wt(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),bc(e,e.updateQueue),Le(e),null);case 4:return ha(),t===null&&Fp(e.stateNode.containerInfo),Le(e),null;case 10:return ps(e.type),Le(e),null;case 19:if(vt(tt),s=e.memoizedState,s===null)return Le(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)yl(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=bu(t),i!==null){for(e.flags|=128,yl(s,!1),t=i.updateQueue,e.updateQueue=t,bc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Lx(n,t),n=n.sibling;return Ve(tt,tt.current&1|2),xe&&ls(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&sn()>Su&&(e.flags|=128,r=!0,yl(s,!1),e.lanes=4194304)}else{if(!r)if(t=bu(i),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,bc(e,t),yl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!xe)return Le(e),null}else 2*sn()-s.renderingStartTime>Su&&n!==536870912&&(e.flags|=128,r=!0,yl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=sn(),t.sibling=null,n=tt.current,Ve(tt,r?n&1|2:n&1),xe&&ls(e,s.treeForkCount),t):(Le(e),null);case 22:case 23:return Wt(e),Ep(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),n=e.updateQueue,n!==null&&bc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&vt(Wr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ps(lt),Le(e),null;case 25:return null;case 30:return null}throw Error(H(156,e.tag))}function RN(t,e){switch(yp(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ps(lt),ha(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return du(e),null;case 31:if(e.memoizedState!==null){if(Wt(e),e.alternate===null)throw Error(H(340));ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Wt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(tt),null;case 4:return ha(),null;case 10:return ps(e.type),null;case 22:case 23:return Wt(e),Ep(),t!==null&&vt(Wr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ps(lt),null;case 25:return null;default:return null}}function LE(t,e){switch(yp(e),e.tag){case 3:ps(lt),ha();break;case 26:case 27:case 5:du(e);break;case 4:ha();break;case 31:e.memoizedState!==null&&Wt(e);break;case 13:Wt(e);break;case 19:vt(tt);break;case 10:ps(e.type);break;case 22:case 23:Wt(e),Ep(),t!==null&&vt(Wr);break;case 24:ps(lt)}}function Mo(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&t)===t){s=void 0;var i=n.create,a=n.inst;s=i(),a.destroy=s}n=n.next}while(n!==r)}}catch(l){Re(e,e.return,l)}}function xr(t,e,n){try{var s=e.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&t)===t){var a=s.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=e;var c=n,d=l;try{d()}catch(f){Re(r,c,f)}}}s=s.next}while(s!==i)}}catch(f){Re(e,e.return,f)}}function PE(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{$x(e,n)}catch(s){Re(t,t.return,s)}}}function zE(t,e,n){n.props=ui(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Re(t,e,s)}}function Bl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){Re(t,e,r)}}function Ln(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){Re(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function BE(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){Re(t,t.return,r)}}function Qh(t,e,n){try{var s=t.stateNode;JN(s,t.type,n,e),s[$t]=e}catch(r){Re(t,t.return,r)}}function qE(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&jr(t.type)||t.tag===4}function $h(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&jr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=us));else if(s!==4&&(s===27&&jr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(nm(t,e,n),t=t.sibling;t!==null;)nm(t,e,n),t=t.sibling}function Au(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&jr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Au(t,e,n),t=t.sibling;t!==null;)Au(t,e,n),t=t.sibling}function HE(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Nt(e,s,n),e[Tt]=t,e[$t]=n}catch(i){Re(t,t.return,i)}}var os=!1,at=!1,Yh=!1,r_=typeof WeakSet=="function"?WeakSet:Set,yt=null;function IN(t,e){if(t=t.containerInfo,cm=Vu,t=Ix(t),hp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,f=0,m=t,p=null;t:for(;;){for(var y;m!==n||r!==0&&m.nodeType!==3||(l=a+r),m!==i||s!==0&&m.nodeType!==3||(c=a+s),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===t)break t;if(p===n&&++d===r&&(l=a),p===i&&++f===s&&(c=a),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(um={focusedElem:t,selectionRange:n},Vu=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){switch(e=yt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var R=ui(n.type,r);t=s.getSnapshotBeforeUpdate(R,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(I){Re(n,n.return,I)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)hm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(H(163))}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}}function FE(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:rs(t,n),s&4&&Mo(5,n);break;case 1:if(rs(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Re(n,n.return,a)}else{var r=ui(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Re(n,n.return,a)}}s&64&&PE(n),s&512&&Bl(n,n.return);break;case 3:if(rs(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{$x(t,e)}catch(a){Re(n,n.return,a)}}break;case 27:e===null&&s&4&&HE(n);case 26:case 5:rs(t,n),e===null&&s&4&&BE(n),s&512&&Bl(n,n.return);break;case 12:rs(t,n);break;case 31:rs(t,n),s&4&&QE(t,n);break;case 13:rs(t,n),s&4&&$E(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=PN.bind(null,n),iC(t,n))));break;case 22:if(s=n.memoizedState!==null||os,!s){e=e!==null&&e.memoizedState!==null||at,r=os;var i=at;os=s,(at=e)&&!i?as(t,n,(n.subtreeFlags&8772)!==0):rs(t,n),os=r,at=i}break;case 30:break;default:rs(t,n)}}function GE(t){var e=t.alternate;e!==null&&(t.alternate=null,GE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ap(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fe=null,Ht=!1;function ss(t,e,n){for(n=n.child;n!==null;)KE(t,e,n),n=n.sibling}function KE(t,e,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Co,n)}catch{}switch(n.tag){case 26:at||Ln(n,e),ss(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:at||Ln(n,e);var s=Fe,r=Ht;jr(n.type)&&(Fe=n.stateNode,Ht=!1),ss(t,e,n),Gl(n.stateNode),Fe=s,Ht=r;break;case 5:at||Ln(n,e);case 6:if(s=Fe,r=Ht,Fe=null,ss(t,e,n),Fe=s,Ht=r,Fe!==null)if(Ht)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(n.stateNode)}catch(i){Re(n,e,i)}else try{Fe.removeChild(n.stateNode)}catch(i){Re(n,e,i)}break;case 18:Fe!==null&&(Ht?(t=Fe,y_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ea(t)):y_(Fe,n.stateNode));break;case 4:s=Fe,r=Ht,Fe=n.stateNode.containerInfo,Ht=!0,ss(t,e,n),Fe=s,Ht=r;break;case 0:case 11:case 14:case 15:xr(2,n,e),at||xr(4,n,e),ss(t,e,n);break;case 1:at||(Ln(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&zE(n,e,s)),ss(t,e,n);break;case 21:ss(t,e,n);break;case 22:at=(s=at)||n.memoizedState!==null,ss(t,e,n),at=s;break;default:ss(t,e,n)}}function QE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ea(t)}catch(n){Re(e,e.return,n)}}}function $E(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ea(t)}catch(n){Re(e,e.return,n)}}function jN(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new r_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new r_),e;default:throw Error(H(435,t.tag))}}function xc(t,e){var n=jN(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var r=zN.bind(null,t,s);s.then(r,r)}})}function Bt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(jr(l.type)){Fe=l.stateNode,Ht=!1;break e}break;case 5:Fe=l.stateNode,Ht=!1;break e;case 3:case 4:Fe=l.stateNode.containerInfo,Ht=!0;break e}l=l.return}if(Fe===null)throw Error(H(160));KE(i,a,r),Fe=null,Ht=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)YE(e,t),e=e.sibling}var An=null;function YE(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Bt(e,t),qt(t),s&4&&(xr(3,t,t.return),Mo(3,t),xr(5,t,t.return));break;case 1:Bt(e,t),qt(t),s&512&&(at||n===null||Ln(n,n.return)),s&64&&os&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=An;if(Bt(e,t),qt(t),s&512&&(at||n===null||Ln(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[jo]||i[Tt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),Nt(i,s,n),i[Tt]=t,_t(i),s=i;break e;case"link":var a=w_("link","href",r).get(s+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(i=a[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}i=r.createElement(s),Nt(i,s,n),r.head.appendChild(i);break;case"meta":if(a=w_("meta","content",r).get(s+(n.content||""))){for(l=0;l<a.length;l++)if(i=a[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}i=r.createElement(s),Nt(i,s,n),r.head.appendChild(i);break;default:throw Error(H(468,s))}i[Tt]=t,_t(i),s=i}t.stateNode=s}else A_(r,t.type,t.stateNode);else t.stateNode=T_(r,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?A_(r,t.type,t.stateNode):T_(r,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Qh(t,t.memoizedProps,n.memoizedProps)}break;case 27:Bt(e,t),qt(t),s&512&&(at||n===null||Ln(n,n.return)),n!==null&&s&4&&Qh(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Bt(e,t),qt(t),s&512&&(at||n===null||Ln(n,n.return)),t.flags&32){r=t.stateNode;try{ma(r,"")}catch(R){Re(t,t.return,R)}}s&4&&t.stateNode!=null&&(r=t.memoizedProps,Qh(t,r,n!==null?n.memoizedProps:r)),s&1024&&(Yh=!0);break;case 6:if(Bt(e,t),qt(t),s&4){if(t.stateNode===null)throw Error(H(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(R){Re(t,t.return,R)}}break;case 3:if(Kc=null,r=An,An=Du(e.containerInfo),Bt(e,t),An=r,qt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ea(e.containerInfo)}catch(R){Re(t,t.return,R)}Yh&&(Yh=!1,XE(t));break;case 4:s=An,An=Du(t.stateNode.containerInfo),Bt(e,t),qt(t),An=s;break;case 12:Bt(e,t),qt(t);break;case 31:Bt(e,t),qt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,xc(t,s)));break;case 13:Bt(e,t),qt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(xd=sn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,xc(t,s)));break;case 22:r=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=os,f=at;if(os=d||r,at=f||c,Bt(e,t),at=f,os=d,qt(t),s&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||c||os||at||Qr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(i=c.stateNode,r)a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var m=c.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(R){Re(c,c.return,R)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(R){Re(c,c.return,R)}}}else if(e.tag===18){if(n===null){c=e;try{var y=c.stateNode;r?__(y,!0):__(c.stateNode,!1)}catch(R){Re(c,c.return,R)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,xc(t,n))));break;case 19:Bt(e,t),qt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,xc(t,s)));break;case 30:break;case 21:break;default:Bt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(qE(s)){n=s;break}s=s.return}if(n==null)throw Error(H(160));switch(n.tag){case 27:var r=n.stateNode,i=$h(t);Au(t,i,r);break;case 5:var a=n.stateNode;n.flags&32&&(ma(a,""),n.flags&=-33);var l=$h(t);Au(t,l,a);break;case 3:case 4:var c=n.stateNode.containerInfo,d=$h(t);nm(t,d,c);break;default:throw Error(H(161))}}catch(f){Re(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XE(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;XE(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function rs(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)FE(t,e.alternate,e),e=e.sibling}function Qr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:xr(4,e,e.return),Qr(e);break;case 1:Ln(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&zE(e,e.return,n),Qr(e);break;case 27:Gl(e.stateNode);case 26:case 5:Ln(e,e.return),Qr(e);break;case 22:e.memoizedState===null&&Qr(e);break;case 30:Qr(e);break;default:Qr(e)}t=t.sibling}}function as(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,r=t,i=e,a=i.flags;switch(i.tag){case 0:case 11:case 15:as(r,i,n),Mo(4,i);break;case 1:if(as(r,i,n),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(d){Re(s,s.return,d)}if(s=i,r=s.updateQueue,r!==null){var l=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)Qx(c[r],l)}catch(d){Re(s,s.return,d)}}n&&a&64&&PE(i),Bl(i,i.return);break;case 27:HE(i);case 26:case 5:as(r,i,n),n&&s===null&&a&4&&BE(i),Bl(i,i.return);break;case 12:as(r,i,n);break;case 31:as(r,i,n),n&&a&4&&QE(r,i);break;case 13:as(r,i,n),n&&a&4&&$E(r,i);break;case 22:i.memoizedState===null&&as(r,i,n),Bl(i,i.return);break;case 30:break;default:as(r,i,n)}e=e.sibling}}function Lp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Do(n))}function Pp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Do(t))}function wn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)JE(t,e,n,s),e=e.sibling}function JE(t,e,n,s){var r=e.flags;switch(e.tag){case 0:case 11:case 15:wn(t,e,n,s),r&2048&&Mo(9,e);break;case 1:wn(t,e,n,s);break;case 3:wn(t,e,n,s),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Do(t)));break;case 12:if(r&2048){wn(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,a=i.id,l=i.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Re(e,e.return,c)}}else wn(t,e,n,s);break;case 31:wn(t,e,n,s);break;case 13:wn(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,a=e.alternate,e.memoizedState!==null?i._visibility&2?wn(t,e,n,s):ql(t,e):i._visibility&2?wn(t,e,n,s):(i._visibility|=2,Vi(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Lp(a,e);break;case 24:wn(t,e,n,s),r&2048&&Pp(e.alternate,e);break;default:wn(t,e,n,s)}}function Vi(t,e,n,s,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,a=e,l=n,c=s,d=a.flags;switch(a.tag){case 0:case 11:case 15:Vi(i,a,l,c,r),Mo(8,a);break;case 23:break;case 22:var f=a.stateNode;a.memoizedState!==null?f._visibility&2?Vi(i,a,l,c,r):ql(i,a):(f._visibility|=2,Vi(i,a,l,c,r)),r&&d&2048&&Lp(a.alternate,a);break;case 24:Vi(i,a,l,c,r),r&&d&2048&&Pp(a.alternate,a);break;default:Vi(i,a,l,c,r)}e=e.sibling}}function ql(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,r=s.flags;switch(s.tag){case 22:ql(n,s),r&2048&&Lp(s.alternate,s);break;case 24:ql(n,s),r&2048&&Pp(s.alternate,s);break;default:ql(n,s)}e=e.sibling}}var Al=8192;function Oi(t,e,n){if(t.subtreeFlags&Al)for(t=t.child;t!==null;)WE(t,e,n),t=t.sibling}function WE(t,e,n){switch(t.tag){case 26:Oi(t,e,n),t.flags&Al&&t.memoizedState!==null&&yC(n,An,t.memoizedState,t.memoizedProps);break;case 5:Oi(t,e,n);break;case 3:case 4:var s=An;An=Du(t.stateNode.containerInfo),Oi(t,e,n),An=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Al,Al=16777216,Oi(t,e,n),Al=s):Oi(t,e,n));break;default:Oi(t,e,n)}}function ZE(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function _l(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];yt=s,tT(s,t)}ZE(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)eT(t),t=t.sibling}function eT(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&xr(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Fc(t)):_l(t);break;default:_l(t)}}function Fc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];yt=s,tT(s,t)}ZE(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:xr(8,e,e.return),Fc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Fc(e));break;default:Fc(e)}t=t.sibling}}function tT(t,e){for(;yt!==null;){var n=yt;switch(n.tag){case 0:case 11:case 15:xr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Do(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,yt=s;else e:for(n=t;yt!==null;){s=yt;var r=s.sibling,i=s.return;if(GE(s),s===n){yt=null;break e}if(r!==null){r.return=i,yt=r;break e}yt=i}}}var kN={getCacheForType:function(t){var e=St(lt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return St(lt).controller.signal}},DN=typeof WeakMap=="function"?WeakMap:Map,we=0,Oe=null,pe=null,ve=0,Ce=0,Jt=null,Zs=!1,Pa=!1,zp=!1,Es=0,Xe=0,Er=0,ei=0,Bp=0,en=0,_a=0,Hl=null,Ft=null,sm=!1,xd=0,nT=0,Su=1/0,Nu=null,or=null,ht=0,cr=null,va=null,gs=0,rm=0,im=null,sT=null,Fl=0,am=null;function ln(){return we&2&&ve!==0?ve&-ve:ie.T!==null?Hp():hx()}function rT(){if(en===0)if(!(ve&536870912)||xe){var t=fc;fc<<=1,!(fc&3932160)&&(fc=262144),en=t}else en=536870912;return t=cn.current,t!==null&&(t.flags|=32),en}function Qt(t,e,n){(t===Oe&&(Ce===2||Ce===9)||t.cancelPendingCommit!==null)&&(ba(t,0),er(t,ve,en,!1)),Io(t,n),(!(we&2)||t!==Oe)&&(t===Oe&&(!(we&2)&&(ei|=n),Xe===4&&er(t,ve,en,!1)),Jn(t))}function iT(t,e,n){if(we&6)throw Error(H(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Ro(t,e),r=s?VN(t,e):Xh(t,e,!0),i=s;do{if(r===0){Pa&&!s&&er(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!ON(n)){r=Xh(t,e,!1),i=!1;continue}if(r===2){if(i=e,t.errorRecoveryDisabledLanes&i)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;r=Hl;var c=l.current.memoizedState.isDehydrated;if(c&&(ba(l,a).flags|=256),a=Xh(l,a,!1),a!==2){if(zp&&!c){l.errorRecoveryDisabledLanes|=i,ei|=i,r=4;break e}i=Ft,Ft=r,i!==null&&(Ft===null?Ft=i:Ft.push.apply(Ft,i))}r=a}if(i=!1,r!==2)continue}}if(r===1){ba(t,0),er(t,e,0,!0);break}e:{switch(s=t,i=r,i){case 0:case 1:throw Error(H(345));case 4:if((e&4194048)!==e)break;case 6:er(s,e,en,!Zs);break e;case 2:Ft=null;break;case 3:case 5:break;default:throw Error(H(329))}if((e&62914560)===e&&(r=xd+300-sn(),10<r)){if(er(s,e,en,!Zs),ud(s,0,!0)!==0)break e;gs=e,s.timeoutHandle=AT(i_.bind(null,s,n,Ft,Nu,sm,e,en,ei,_a,Zs,i,"Throttled",-0,0),r);break e}i_(s,n,Ft,Nu,sm,e,en,ei,_a,Zs,i,null,-0,0)}}break}while(!0);Jn(t)}function i_(t,e,n,s,r,i,a,l,c,d,f,m,p,y){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:us},WE(e,i,m);var R=(i&62914560)===i?xd-sn():(i&4194048)===i?nT-sn():0;if(R=_C(m,R),R!==null){gs=i,t.cancelPendingCommit=R(l_.bind(null,t,e,i,n,s,r,a,l,c,f,m,null,p,y)),er(t,i,a,!d);return}}l_(t,e,i,n,s,r,a,l,c)}function ON(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!on(i(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e,n,s){e&=~Bp,e&=~ei,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var r=e;0<r;){var i=31-an(r),a=1<<i;s[i]=-1,r&=~a}n!==0&&cx(t,n,e)}function Ed(){return we&6?!0:(Vo(0),!1)}function qp(){if(pe!==null){if(Ce===0)var t=pe.return;else t=pe,ds=Ei=null,Np(t),ia=null,io=0,t=pe;for(;t!==null;)LE(t.alternate,t),t=t.return;pe=null}}function ba(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,eC(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),gs=0,qp(),Oe=t,pe=n=ms(t.current,null),ve=e,Ce=0,Jt=null,Zs=!1,Pa=Ro(t,e),zp=!1,_a=en=Bp=ei=Er=Xe=0,Ft=Hl=null,sm=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var r=31-an(s),i=1<<r;e|=t[r],s&=~i}return Es=e,md(),n}function aT(t,e){ue=null,ie.H=lo,e===La||e===gd?(e=U0(),Ce=3):e===bp?(e=U0(),Ce=4):Ce=e===Vp?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Jt=e,pe===null&&(Xe=1,Tu(t,pn(e,t.current)))}function lT(){var t=cn.current;return t===null?!0:(ve&4194048)===ve?vn===null:(ve&62914560)===ve||ve&536870912?t===vn:!1}function oT(){var t=ie.H;return ie.H=lo,t===null?lo:t}function cT(){var t=ie.A;return ie.A=kN,t}function Cu(){Xe=4,Zs||(ve&4194048)!==ve&&cn.current!==null||(Pa=!0),!(Er&134217727)&&!(ei&134217727)||Oe===null||er(Oe,ve,en,!1)}function Xh(t,e,n){var s=we;we|=2;var r=oT(),i=cT();(Oe!==t||ve!==e)&&(Nu=null,ba(t,e)),e=!1;var a=Xe;e:do try{if(Ce!==0&&pe!==null){var l=pe,c=Jt;switch(Ce){case 8:qp(),a=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(e=!0);var d=Ce;if(Ce=0,Jt=null,Zi(t,l,c,d),n&&Pa){a=0;break e}break;default:d=Ce,Ce=0,Jt=null,Zi(t,l,c,d)}}MN(),a=Xe;break}catch(f){aT(t,f)}while(!0);return e&&t.shellSuspendCounter++,ds=Ei=null,we=s,ie.H=r,ie.A=i,pe===null&&(Oe=null,ve=0,md()),a}function MN(){for(;pe!==null;)uT(pe)}function VN(t,e){var n=we;we|=2;var s=oT(),r=cT();Oe!==t||ve!==e?(Nu=null,Su=sn()+500,ba(t,e)):Pa=Ro(t,e);e:do try{if(Ce!==0&&pe!==null){e=pe;var i=Jt;t:switch(Ce){case 1:Ce=0,Jt=null,Zi(t,e,i,1);break;case 2:case 9:if(V0(i)){Ce=0,Jt=null,a_(e);break}e=function(){Ce!==2&&Ce!==9||Oe!==t||(Ce=7),Jn(t)},i.then(e,e);break e;case 3:Ce=7;break e;case 4:Ce=5;break e;case 7:V0(i)?(Ce=0,Jt=null,a_(e)):(Ce=0,Jt=null,Zi(t,e,i,7));break;case 5:var a=null;switch(pe.tag){case 26:a=pe.memoizedState;case 5:case 27:var l=pe;if(a?IT(a):l.stateNode.complete){Ce=0,Jt=null;var c=l.sibling;if(c!==null)pe=c;else{var d=l.return;d!==null?(pe=d,Td(d)):pe=null}break t}}Ce=0,Jt=null,Zi(t,e,i,5);break;case 6:Ce=0,Jt=null,Zi(t,e,i,6);break;case 8:qp(),Xe=6;break e;default:throw Error(H(462))}}UN();break}catch(f){aT(t,f)}while(!0);return ds=Ei=null,ie.H=s,ie.A=r,we=n,pe!==null?0:(Oe=null,ve=0,md(),Xe)}function UN(){for(;pe!==null&&!a2();)uT(pe)}function uT(t){var e=UE(t.alternate,t,Es);t.memoizedProps=t.pendingProps,e===null?Td(t):pe=e}function a_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Z0(n,e,e.pendingProps,e.type,void 0,ve);break;case 11:e=Z0(n,e,e.pendingProps,e.type.render,e.ref,ve);break;case 5:Np(e);default:LE(n,e),e=pe=Lx(e,Es),e=UE(n,e,Es)}t.memoizedProps=t.pendingProps,e===null?Td(t):pe=e}function Zi(t,e,n,s){ds=Ei=null,Np(e),ia=null,io=0;var r=e.return;try{if(AN(t,r,e,n,ve)){Xe=1,Tu(t,pn(n,t.current)),pe=null;return}}catch(i){if(r!==null)throw pe=r,i;Xe=1,Tu(t,pn(n,t.current)),pe=null;return}e.flags&32768?(xe||s===1?t=!0:Pa||ve&536870912?t=!1:(Zs=t=!0,(s===2||s===9||s===3||s===6)&&(s=cn.current,s!==null&&s.tag===13&&(s.flags|=16384))),dT(e,t)):Td(e)}function Td(t){var e=t;do{if(e.flags&32768){dT(e,Zs);return}t=e.return;var n=CN(e.alternate,e,Es);if(n!==null){pe=n;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=t}while(e!==null);Xe===0&&(Xe=5)}function dT(t,e){do{var n=RN(t.alternate,t);if(n!==null){n.flags&=32767,pe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){pe=t;return}pe=t=n}while(t!==null);Xe=6,pe=null}function l_(t,e,n,s,r,i,a,l,c){t.cancelPendingCommit=null;do wd();while(ht!==0);if(we&6)throw Error(H(327));if(e!==null){if(e===t.current)throw Error(H(177));if(i=e.lanes|e.childLanes,i|=fp,g2(t,n,i,a,l,c),t===Oe&&(pe=Oe=null,ve=0),va=e,cr=t,gs=n,rm=i,im=r,sT=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,BN(hu,function(){return gT(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ie.T,ie.T=null,r=Ae.p,Ae.p=2,a=we,we|=4;try{IN(t,e,n)}finally{we=a,Ae.p=r,ie.T=s}}ht=1,hT(),fT(),mT()}}function hT(){if(ht===1){ht=0;var t=cr,e=va,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ie.T,ie.T=null;var s=Ae.p;Ae.p=2;var r=we;we|=4;try{YE(e,t);var i=um,a=Ix(t.containerInfo),l=i.focusedElem,c=i.selectionRange;if(a!==l&&l&&l.ownerDocument&&Rx(l.ownerDocument.documentElement,l)){if(c!==null&&hp(l)){var d=c.start,f=c.end;if(f===void 0&&(f=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(f,l.value.length);else{var m=l.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var y=p.getSelection(),R=l.textContent.length,I=Math.min(c.start,R),D=c.end===void 0?I:Math.min(c.end,R);!y.extend&&I>D&&(a=D,D=I,I=a);var A=R0(l,I),b=R0(l,D);if(A&&b&&(y.rangeCount!==1||y.anchorNode!==A.node||y.anchorOffset!==A.offset||y.focusNode!==b.node||y.focusOffset!==b.offset)){var x=m.createRange();x.setStart(A.node,A.offset),y.removeAllRanges(),I>D?(y.addRange(x),y.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),y.addRange(x))}}}}for(m=[],y=l;y=y.parentNode;)y.nodeType===1&&m.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var j=m[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Vu=!!cm,um=cm=null}finally{we=r,Ae.p=s,ie.T=n}}t.current=e,ht=2}}function fT(){if(ht===2){ht=0;var t=cr,e=va,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ie.T,ie.T=null;var s=Ae.p;Ae.p=2;var r=we;we|=4;try{FE(t,e.alternate,e)}finally{we=r,Ae.p=s,ie.T=n}}ht=3}}function mT(){if(ht===4||ht===3){ht=0,l2();var t=cr,e=va,n=gs,s=sT;e.subtreeFlags&10256||e.flags&10256?ht=5:(ht=0,va=cr=null,pT(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(or=null),ip(n),e=e.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Co,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ie.T,r=Ae.p,Ae.p=2,ie.T=null;try{for(var i=t.onRecoverableError,a=0;a<s.length;a++){var l=s[a];i(l.value,{componentStack:l.stack})}}finally{ie.T=e,Ae.p=r}}gs&3&&wd(),Jn(t),r=t.pendingLanes,n&261930&&r&42?t===am?Fl++:(Fl=0,am=t):Fl=0,Vo(0)}}function pT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Do(e)))}function wd(){return hT(),fT(),mT(),gT()}function gT(){if(ht!==5)return!1;var t=cr,e=rm;rm=0;var n=ip(gs),s=ie.T,r=Ae.p;try{Ae.p=32>n?32:n,ie.T=null,n=im,im=null;var i=cr,a=gs;if(ht=0,va=cr=null,gs=0,we&6)throw Error(H(331));var l=we;if(we|=4,eT(i.current),JE(i,i.current,a,n),we=l,Vo(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Co,i)}catch{}return!0}finally{Ae.p=r,ie.T=s,pT(t,e)}}function o_(t,e,n){e=pn(n,e),e=Zf(t.stateNode,e,2),t=lr(t,e,2),t!==null&&(Io(t,2),Jn(t))}function Re(t,e,n){if(t.tag===3)o_(t,t,n);else for(;e!==null;){if(e.tag===3){o_(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(or===null||!or.has(s))){t=pn(n,t),n=jE(2),s=lr(e,n,2),s!==null&&(kE(n,s,e,t),Io(s,2),Jn(s));break}}e=e.return}}function Jh(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new DN;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(zp=!0,r.add(n),t=LN.bind(null,t,e,n),e.then(t,t))}function LN(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Oe===t&&(ve&n)===n&&(Xe===4||Xe===3&&(ve&62914560)===ve&&300>sn()-xd?!(we&2)&&ba(t,0):Bp|=n,_a===ve&&(_a=0)),Jn(t)}function yT(t,e){e===0&&(e=ox()),t=xi(t,e),t!==null&&(Io(t,e),Jn(t))}function PN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yT(t,n)}function zN(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(H(314))}s!==null&&s.delete(e),yT(t,n)}function BN(t,e){return sp(t,e)}var Ru=null,Ui=null,lm=!1,Iu=!1,Wh=!1,tr=0;function Jn(t){t!==Ui&&t.next===null&&(Ui===null?Ru=Ui=t:Ui=Ui.next=t),Iu=!0,lm||(lm=!0,HN())}function Vo(t,e){if(!Wh&&Iu){Wh=!0;do for(var n=!1,s=Ru;s!==null;){if(t!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var a=s.suspendedLanes,l=s.pingedLanes;i=(1<<31-an(42|t)+1)-1,i&=r&~(a&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,c_(s,i))}else i=ve,i=ud(s,s===Oe?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Ro(s,i)||(n=!0,c_(s,i));s=s.next}while(n);Wh=!1}}function qN(){_T()}function _T(){Iu=lm=!1;var t=0;tr!==0&&ZN()&&(t=tr);for(var e=sn(),n=null,s=Ru;s!==null;){var r=s.next,i=vT(s,e);i===0?(s.next=null,n===null?Ru=r:n.next=r,r===null&&(Ui=n)):(n=s,(t!==0||i&3)&&(Iu=!0)),s=r}ht!==0&&ht!==5||Vo(t),tr!==0&&(tr=0)}function vT(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var a=31-an(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=p2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}if(e=Oe,n=ve,n=ud(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Ce===2||Ce===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Sh(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ro(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Sh(s),ip(n)){case 2:case 8:n=ax;break;case 32:n=hu;break;case 268435456:n=lx;break;default:n=hu}return s=bT.bind(null,t),n=sp(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Sh(s),t.callbackPriority=2,t.callbackNode=null,2}function bT(t,e){if(ht!==0&&ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(wd()&&t.callbackNode!==n)return null;var s=ve;return s=ud(t,t===Oe?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(iT(t,s,e),vT(t,sn()),t.callbackNode!=null&&t.callbackNode===n?bT.bind(null,t):null)}function c_(t,e){if(wd())return null;iT(t,e,!0)}function HN(){tC(function(){we&6?sp(ix,qN):_T()})}function Hp(){if(tr===0){var t=pa;t===0&&(t=hc,hc<<=1,!(hc&261888)&&(hc=256)),tr=t}return tr}function u_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Mc(""+t)}function d_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function FN(t,e,n,s,r){if(e==="submit"&&n&&n.stateNode===r){var i=u_((r[$t]||null).action),a=s.submitter;a&&(e=(e=a[$t]||null)?u_(e.formAction):a.getAttribute("formAction"),e!==null&&(i=e,a=null));var l=new dd("action","action",null,s,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(tr!==0){var c=a?d_(r,a):new FormData(r);Jf(n,{pending:!0,data:c,method:r.method,action:i},null,c)}}else typeof i=="function"&&(l.preventDefault(),c=a?d_(r,a):new FormData(r),Jf(n,{pending:!0,data:c,method:r.method,action:i},i,c))},currentTarget:r}]})}}for(var Zh=0;Zh<Pf.length;Zh++){var ef=Pf[Zh],GN=ef.toLowerCase(),KN=ef[0].toUpperCase()+ef.slice(1);In(GN,"on"+KN)}In(kx,"onAnimationEnd");In(Dx,"onAnimationIteration");In(Ox,"onAnimationStart");In("dblclick","onDoubleClick");In("focusin","onFocus");In("focusout","onBlur");In(oN,"onTransitionRun");In(cN,"onTransitionStart");In(uN,"onTransitionCancel");In(Mx,"onTransitionEnd");fa("onMouseEnter",["mouseout","mouseover"]);fa("onMouseLeave",["mouseout","mouseover"]);fa("onPointerEnter",["pointerout","pointerover"]);fa("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oo));function xT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=d;try{i(r)}catch(f){mu(f)}r.currentTarget=null,i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=d;try{i(r)}catch(f){mu(f)}r.currentTarget=null,i=c}}}}function me(t,e){var n=e[jf];n===void 0&&(n=e[jf]=new Set);var s=t+"__bubble";n.has(s)||(ET(e,t,2,!1),n.add(s))}function tf(t,e,n){var s=0;e&&(s|=4),ET(n,t,s,e)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function Fp(t){if(!t[Ec]){t[Ec]=!0,fx.forEach(function(n){n!=="selectionchange"&&(QN.has(n)||tf(n,!1,t),tf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ec]||(e[Ec]=!0,tf("selectionchange",!1,e))}}function ET(t,e,n,s){switch(MT(e)){case 2:var r=xC;break;case 8:r=EC;break;default:r=$p}n=r.bind(null,e,n,t),r=void 0,!Vf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function nf(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;l!==null;){if(a=Fi(l),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){s=i=a;continue e}l=l.parentNode}}s=s.return}xx(function(){var d=i,f=op(n),m=[];e:{var p=Vx.get(t);if(p!==void 0){var y=dd,R=t;switch(t){case"keypress":if(Uc(n)===0)break e;case"keydown":case"keyup":y=z2;break;case"focusin":R="focus",y=jh;break;case"focusout":R="blur",y=jh;break;case"beforeblur":case"afterblur":y=jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=v0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=C2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=H2;break;case kx:case Dx:case Ox:y=j2;break;case Mx:y=G2;break;case"scroll":case"scrollend":y=S2;break;case"wheel":y=Q2;break;case"copy":case"cut":case"paste":y=D2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=x0;break;case"toggle":case"beforetoggle":y=Y2}var I=(e&4)!==0,D=!I&&(t==="scroll"||t==="scrollend"),A=I?p!==null?p+"Capture":null:p;I=[];for(var b=d,x;b!==null;){var j=b;if(x=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||x===null||A===null||(j=eo(b,A),j!=null&&I.push(co(b,j,x))),D)break;b=b.return}0<I.length&&(p=new y(p,R,null,n,f),m.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Mf&&(R=n.relatedTarget||n.fromElement)&&(Fi(R)||R[Ma]))break e;if((y||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,y?(R=n.relatedTarget||n.toElement,y=d,R=R?Fi(R):null,R!==null&&(D=No(R),I=R.tag,R!==D||I!==5&&I!==27&&I!==6)&&(R=null)):(y=null,R=d),y!==R)){if(I=v0,j="onMouseLeave",A="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(I=x0,j="onPointerLeave",A="onPointerEnter",b="pointer"),D=y==null?p:Tl(y),x=R==null?p:Tl(R),p=new I(j,b+"leave",y,n,f),p.target=D,p.relatedTarget=x,j=null,Fi(f)===d&&(I=new I(A,b+"enter",R,n,f),I.target=x,I.relatedTarget=D,j=I),D=j,y&&R)t:{for(I=$N,A=y,b=R,x=0,j=A;j;j=I(j))x++;j=0;for(var U=b;U;U=I(U))j++;for(;0<x-j;)A=I(A),x--;for(;0<j-x;)b=I(b),j--;for(;x--;){if(A===b||b!==null&&A===b.alternate){I=A;break t}A=I(A),b=I(b)}I=null}else I=null;y!==null&&h_(m,p,y,I,!1),R!==null&&D!==null&&h_(m,D,R,I,!0)}}e:{if(p=d?Tl(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var B=A0;else if(w0(p))if(Nx)B=iN;else{B=sN;var T=nN}else y=p.nodeName,!y||y.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&lp(d.elementType)&&(B=A0):B=rN;if(B&&(B=B(t,d))){Sx(m,B,n,f);break e}T&&T(t,p,d),t==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&Of(p,"number",p.value)}switch(T=d?Tl(d):window,t){case"focusin":(w0(T)||T.contentEditable==="true")&&(Qi=T,Uf=d,Ml=null);break;case"focusout":Ml=Uf=Qi=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,I0(m,n,f);break;case"selectionchange":if(lN)break;case"keydown":case"keyup":I0(m,n,f)}var _;if(dp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ki?wx(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Tx&&n.locale!=="ko"&&(Ki||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ki&&(_=Ex()):(Ws=f,cp="value"in Ws?Ws.value:Ws.textContent,Ki=!0)),T=ju(d,v),0<T.length&&(v=new b0(v,t,null,n,f),m.push({event:v,listeners:T}),_?v.data=_:(_=Ax(n),_!==null&&(v.data=_)))),(_=J2?W2(t,n):Z2(t,n))&&(v=ju(d,"onBeforeInput"),0<v.length&&(T=new b0("onBeforeInput","beforeinput",null,n,f),m.push({event:T,listeners:v}),T.data=_)),FN(m,t,d,n,f)}xT(m,e)})}function co(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ju(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=eo(t,n),r!=null&&s.unshift(co(t,r,i)),r=eo(t,e),r!=null&&s.push(co(t,r,i))),t.tag===3)return s;t=t.return}return[]}function $N(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function h_(t,e,n,s,r){for(var i=e._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,r?(d=eo(n,i),d!=null&&a.unshift(co(n,d,c))):r||(d=eo(n,i),d!=null&&a.push(co(n,d,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var YN=/\r\n?/g,XN=/\u0000|\uFFFD/g;function f_(t){return(typeof t=="string"?t:""+t).replace(YN,`
`).replace(XN,"")}function TT(t,e){return e=f_(e),f_(t)===e}function Ie(t,e,n,s,r,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||ma(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&ma(t,""+s);break;case"className":pc(t,"class",s);break;case"tabIndex":pc(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":pc(t,n,s);break;case"style":bx(t,s,i);break;case"data":if(e!=="object"){pc(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Mc(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&Ie(t,e,"name",r.name,r,null),Ie(t,e,"formEncType",r.formEncType,r,null),Ie(t,e,"formMethod",r.formMethod,r,null),Ie(t,e,"formTarget",r.formTarget,r,null)):(Ie(t,e,"encType",r.encType,r,null),Ie(t,e,"method",r.method,r,null),Ie(t,e,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Mc(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=us);break;case"onScroll":s!=null&&me("scroll",t);break;case"onScrollEnd":s!=null&&me("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(H(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Mc(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":me("beforetoggle",t),me("toggle",t),Oc(t,"popover",s);break;case"xlinkActuate":ts(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ts(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ts(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ts(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ts(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ts(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ts(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ts(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ts(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Oc(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=w2.get(n)||n,Oc(t,n,s))}}function om(t,e,n,s,r,i){switch(n){case"style":bx(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(H(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"children":typeof s=="string"?ma(t,s):(typeof s=="number"||typeof s=="bigint")&&ma(t,""+s);break;case"onScroll":s!=null&&me("scroll",t);break;case"onScrollEnd":s!=null&&me("scrollend",t);break;case"onClick":s!=null&&(t.onclick=us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mx.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),i=t[$t]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,r);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Oc(t,n,s)}}}function Nt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",t),me("load",t);var s=!1,r=!1,i;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(a!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Ie(t,e,i,a,n,null)}}r&&Ie(t,e,"srcSet",n.srcSet,n,null),s&&Ie(t,e,"src",n.src,n,null);return;case"input":me("invalid",t);var l=i=a=r=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var f=n[s];if(f!=null)switch(s){case"name":r=f;break;case"type":a=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":i=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(H(137,e));break;default:Ie(t,e,s,f,n,null)}}yx(t,i,l,c,d,a,r,!1);return;case"select":me("invalid",t),s=a=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Ie(t,e,r,l,n,null)}e=i,n=a,t.multiple=!!s,e!=null?na(t,!!s,e,!1):n!=null&&na(t,!!s,n,!0);return;case"textarea":me("invalid",t),i=r=s=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":r=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(H(91));break;default:Ie(t,e,a,l,n,null)}vx(t,s,r,i);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ie(t,e,c,s,n,null)}return;case"dialog":me("beforetoggle",t),me("toggle",t),me("cancel",t),me("close",t);break;case"iframe":case"object":me("load",t);break;case"video":case"audio":for(s=0;s<oo.length;s++)me(oo[s],t);break;case"image":me("error",t),me("load",t);break;case"details":me("toggle",t);break;case"embed":case"source":case"link":me("error",t),me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Ie(t,e,d,s,n,null)}return;default:if(lp(e)){for(f in n)n.hasOwnProperty(f)&&(s=n[f],s!==void 0&&om(t,e,f,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ie(t,e,l,s,n,null))}function JN(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,a=null,l=null,c=null,d=null,f=null;for(y in n){var m=n[y];if(n.hasOwnProperty(y)&&m!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":c=m;default:s.hasOwnProperty(y)||Ie(t,e,y,null,s,m)}}for(var p in s){var y=s[p];if(m=n[p],s.hasOwnProperty(p)&&(y!=null||m!=null))switch(p){case"type":i=y;break;case"name":r=y;break;case"checked":d=y;break;case"defaultChecked":f=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(H(137,e));break;default:y!==m&&Ie(t,e,p,y,s,m)}}Df(t,a,l,c,d,f,i,r);return;case"select":y=a=l=p=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":y=c;default:s.hasOwnProperty(i)||Ie(t,e,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(i!=null||c!=null))switch(r){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":a=i;default:i!==c&&Ie(t,e,r,i,s,c)}e=l,n=a,s=y,p!=null?na(t,!!n,p,!1):!!s!=!!n&&(e!=null?na(t,!!n,e,!0):na(t,!!n,n?[]:"",!1));return;case"textarea":y=p=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ie(t,e,l,null,s,r)}for(a in s)if(r=s[a],i=n[a],s.hasOwnProperty(a)&&(r!=null||i!=null))switch(a){case"value":p=r;break;case"defaultValue":y=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(H(91));break;default:r!==i&&Ie(t,e,a,r,s,i)}_x(t,p,y);return;case"option":for(var R in n)if(p=n[R],n.hasOwnProperty(R)&&p!=null&&!s.hasOwnProperty(R))switch(R){case"selected":t.selected=!1;break;default:Ie(t,e,R,null,s,p)}for(c in s)if(p=s[c],y=n[c],s.hasOwnProperty(c)&&p!==y&&(p!=null||y!=null))switch(c){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ie(t,e,c,p,s,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in n)p=n[I],n.hasOwnProperty(I)&&p!=null&&!s.hasOwnProperty(I)&&Ie(t,e,I,null,s,p);for(d in s)if(p=s[d],y=n[d],s.hasOwnProperty(d)&&p!==y&&(p!=null||y!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(H(137,e));break;default:Ie(t,e,d,p,s,y)}return;default:if(lp(e)){for(var D in n)p=n[D],n.hasOwnProperty(D)&&p!==void 0&&!s.hasOwnProperty(D)&&om(t,e,D,void 0,s,p);for(f in s)p=s[f],y=n[f],!s.hasOwnProperty(f)||p===y||p===void 0&&y===void 0||om(t,e,f,p,s,y);return}}for(var A in n)p=n[A],n.hasOwnProperty(A)&&p!=null&&!s.hasOwnProperty(A)&&Ie(t,e,A,null,s,p);for(m in s)p=s[m],y=n[m],!s.hasOwnProperty(m)||p===y||p==null&&y==null||Ie(t,e,m,p,s,y)}function m_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var r=n[s],i=r.transferSize,a=r.initiatorType,l=r.duration;if(i&&l&&m_(a)){for(a=0,l=r.responseEnd,s+=1;s<n.length;s++){var c=n[s],d=c.startTime;if(d>l)break;var f=c.transferSize,m=c.initiatorType;f&&m_(m)&&(c=c.responseEnd,a+=f*(c<l?1:(l-d)/(c-d)))}if(--s,e+=8*(i+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cm=null,um=null;function ku(t){return t.nodeType===9?t:t.ownerDocument}function p_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function dm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sf=null;function ZN(){var t=window.event;return t&&t.type==="popstate"?t===sf?!1:(sf=t,!0):(sf=null,!1)}var AT=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(t){return g_.resolve(null).then(t).catch(nC)}:AT;function nC(t){setTimeout(function(){throw t})}function jr(t){return t==="head"}function y_(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(r),Ea(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")Gl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Gl(n);for(var i=n.firstChild;i;){var a=i.nextSibling,l=i.nodeName;i[jo]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=a}}else n==="body"&&Gl(t.ownerDocument.body);n=r}while(n);Ea(e)}function __(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function hm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":hm(n),ap(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function sC(t,e,n,s){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[jo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=bn(t.nextSibling),t===null)break}return null}function rC(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=bn(t.nextSibling),t===null))return null;return t}function ST(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=bn(t.nextSibling),t===null))return null;return t}function fm(t){return t.data==="$?"||t.data==="$~"}function mm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function iC(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var pm=null;function v_(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return bn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function b_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function NT(t,e,n){switch(e=ku(n),t){case"html":if(t=e.documentElement,!t)throw Error(H(452));return t;case"head":if(t=e.head,!t)throw Error(H(453));return t;case"body":if(t=e.body,!t)throw Error(H(454));return t;default:throw Error(H(451))}}function Gl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ap(t)}var En=new Map,x_=new Set;function Du(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Is=Ae.d;Ae.d={f:aC,r:lC,D:oC,C:cC,L:uC,m:dC,X:fC,S:hC,M:mC};function aC(){var t=Is.f(),e=Ed();return t||e}function lC(t){var e=Va(t);e!==null&&e.tag===5&&e.type==="form"?bE(e):Is.r(t)}var za=typeof document>"u"?null:document;function CT(t,e,n){var s=za;if(s&&typeof e=="string"&&e){var r=mn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),x_.has(r)||(x_.add(r),t={rel:t,crossOrigin:n,href:e},s.querySelector(r)===null&&(e=s.createElement("link"),Nt(e,"link",t),_t(e),s.head.appendChild(e)))}}function oC(t){Is.D(t),CT("dns-prefetch",t,null)}function cC(t,e){Is.C(t,e),CT("preconnect",t,e)}function uC(t,e,n){Is.L(t,e,n);var s=za;if(s&&t&&e){var r='link[rel="preload"][as="'+mn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+mn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+mn(n.imageSizes)+'"]')):r+='[href="'+mn(t)+'"]';var i=r;switch(e){case"style":i=xa(t);break;case"script":i=Ba(t)}En.has(i)||(t=He({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),En.set(i,t),s.querySelector(r)!==null||e==="style"&&s.querySelector(Uo(i))||e==="script"&&s.querySelector(Lo(i))||(e=s.createElement("link"),Nt(e,"link",t),_t(e),s.head.appendChild(e)))}}function dC(t,e){Is.m(t,e);var n=za;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+mn(s)+'"][href="'+mn(t)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Ba(t)}if(!En.has(i)&&(t=He({rel:"modulepreload",href:t},e),En.set(i,t),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Lo(i)))return}s=n.createElement("link"),Nt(s,"link",t),_t(s),n.head.appendChild(s)}}}function hC(t,e,n){Is.S(t,e,n);var s=za;if(s&&t){var r=ta(s).hoistableStyles,i=xa(t);e=e||"default";var a=r.get(i);if(!a){var l={loading:0,preload:null};if(a=s.querySelector(Uo(i)))l.loading=5;else{t=He({rel:"stylesheet",href:t,"data-precedence":e},n),(n=En.get(i))&&Gp(t,n);var c=a=s.createElement("link");_t(c),Nt(c,"link",t),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Gc(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(i,a)}}}function fC(t,e){Is.X(t,e);var n=za;if(n&&t){var s=ta(n).hoistableScripts,r=Ba(t),i=s.get(r);i||(i=n.querySelector(Lo(r)),i||(t=He({src:t,async:!0},e),(e=En.get(r))&&Kp(t,e),i=n.createElement("script"),_t(i),Nt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function mC(t,e){Is.M(t,e);var n=za;if(n&&t){var s=ta(n).hoistableScripts,r=Ba(t),i=s.get(r);i||(i=n.querySelector(Lo(r)),i||(t=He({src:t,async:!0,type:"module"},e),(e=En.get(r))&&Kp(t,e),i=n.createElement("script"),_t(i),Nt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function E_(t,e,n,s){var r=(r=rr.current)?Du(r):null;if(!r)throw Error(H(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=xa(n.href),n=ta(r).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=xa(n.href);var i=ta(r).hoistableStyles,a=i.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,a),(i=r.querySelector(Uo(t)))&&!i._p&&(a.instance=i,a.state.loading=5),En.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},En.set(t,n),i||pC(r,t,n,a.state))),e&&s===null)throw Error(H(528,""));return a}if(e&&s!==null)throw Error(H(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ba(n),n=ta(r).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,t))}}function xa(t){return'href="'+mn(t)+'"'}function Uo(t){return'link[rel="stylesheet"]['+t+"]"}function RT(t){return He({},t,{"data-precedence":t.precedence,precedence:null})}function pC(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Nt(e,"link",n),_t(e),t.head.appendChild(e))}function Ba(t){return'[src="'+mn(t)+'"]'}function Lo(t){return"script[async]"+t}function T_(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+mn(n.href)+'"]');if(s)return e.instance=s,_t(s),s;var r=He({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),_t(s),Nt(s,"style",r),Gc(s,n.precedence,t),e.instance=s;case"stylesheet":r=xa(n.href);var i=t.querySelector(Uo(r));if(i)return e.state.loading|=4,e.instance=i,_t(i),i;s=RT(n),(r=En.get(r))&&Gp(s,r),i=(t.ownerDocument||t).createElement("link"),_t(i);var a=i;return a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),Nt(i,"link",s),e.state.loading|=4,Gc(i,n.precedence,t),e.instance=i;case"script":return i=Ba(n.src),(r=t.querySelector(Lo(i)))?(e.instance=r,_t(r),r):(s=n,(r=En.get(i))&&(s=He({},n),Kp(s,r)),t=t.ownerDocument||t,r=t.createElement("script"),_t(r),Nt(r,"link",s),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(H(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Gc(s,n.precedence,t));return e.instance}function Gc(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,a=0;a<s.length;a++){var l=s[a];if(l.dataset.precedence===e)i=l;else if(i!==r)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Gp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Kp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Kc=null;function w_(t,e,n){if(Kc===null){var s=new Map,r=Kc=new Map;r.set(n,s)}else r=Kc,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var i=n[r];if(!(i[jo]||i[Tt]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var a=i.getAttribute(e)||"";a=t+a;var l=s.get(a);l?l.push(i):s.set(a,[i])}}return s}function A_(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function gC(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function IT(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function yC(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=xa(s.href),i=e.querySelector(Uo(r));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Ou.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,_t(i);return}i=e.ownerDocument||e,s=RT(s),(r=En.get(r))&&Gp(s,r),i=i.createElement("link"),_t(i);var a=i;a._p=new Promise(function(l,c){a.onload=l,a.onerror=c}),Nt(i,"link",s),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Ou.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var rf=0;function _C(t,e){return t.stylesheets&&t.count===0&&Qc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Qc(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&rf===0&&(rf=62500*WN());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qc(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>rf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}function Ou(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mu=null;function Qc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mu=new Map,e.forEach(vC,t),Mu=null,Ou.call(t))}function vC(t,e){if(!(e.state.loading&4)){var n=Mu.get(t);if(n)var s=n.get(null);else{n=new Map,Mu.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var a=r[i];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}r=e.instance,a=r.getAttribute("data-precedence"),i=n.get(a)||s,i===s&&n.set(null,r),n.set(a,r),this.count++,s=Ou.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var uo={$$typeof:cs,Provider:null,Consumer:null,_currentValue:Xr,_currentValue2:Xr,_threadCount:0};function bC(t,e,n,s,r,i,a,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.hiddenUpdates=Nh(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function jT(t,e,n,s,r,i,a,l,c,d,f,m){return t=new bC(t,e,n,a,c,d,f,m,l),e=1,i===!0&&(e|=24),i=Zt(3,null,null,e),t.current=i,i.stateNode=t,e=_p(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},xp(i),t}function kT(t){return t?(t=Xi,t):Xi}function DT(t,e,n,s,r,i){r=kT(r),s.context===null?s.context=r:s.pendingContext=r,s=ar(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=lr(t,s,e),n!==null&&(Qt(n,t,e),Ul(n,t,e))}function S_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qp(t,e){S_(t,e),(t=t.alternate)&&S_(t,e)}function OT(t){if(t.tag===13||t.tag===31){var e=xi(t,67108864);e!==null&&Qt(e,t,67108864),Qp(t,67108864)}}function N_(t){if(t.tag===13||t.tag===31){var e=ln();e=rp(e);var n=xi(t,e);n!==null&&Qt(n,t,e),Qp(t,e)}}var Vu=!0;function xC(t,e,n,s){var r=ie.T;ie.T=null;var i=Ae.p;try{Ae.p=2,$p(t,e,n,s)}finally{Ae.p=i,ie.T=r}}function EC(t,e,n,s){var r=ie.T;ie.T=null;var i=Ae.p;try{Ae.p=8,$p(t,e,n,s)}finally{Ae.p=i,ie.T=r}}function $p(t,e,n,s){if(Vu){var r=gm(s);if(r===null)nf(t,e,s,Uu,n),C_(t,s);else if(wC(r,t,e,n,s))s.stopPropagation();else if(C_(t,s),e&4&&-1<TC.indexOf(t)){for(;r!==null;){var i=Va(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var a=Gr(i.pendingLanes);if(a!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var c=1<<31-an(a);l.entanglements[1]|=c,a&=~c}Jn(i),!(we&6)&&(Su=sn()+500,Vo(0))}}break;case 31:case 13:l=xi(i,2),l!==null&&Qt(l,i,2),Ed(),Qp(i,2)}if(i=gm(s),i===null&&nf(t,e,s,Uu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else nf(t,e,s,null,n)}}function gm(t){return t=op(t),Yp(t)}var Uu=null;function Yp(t){if(Uu=null,t=Fi(t),t!==null){var e=No(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=ex(e),t!==null)return t;t=null}else if(n===31){if(t=tx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Uu=t,null}function MT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(o2()){case ix:return 2;case ax:return 8;case hu:case c2:return 32;case lx:return 268435456;default:return 32}default:return 32}}var ym=!1,ur=null,dr=null,hr=null,ho=new Map,fo=new Map,Gs=[],TC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C_(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(e.pointerId)}}function vl(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Va(e),e!==null&&OT(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function wC(t,e,n,s,r){switch(e){case"focusin":return ur=vl(ur,t,e,n,s,r),!0;case"dragenter":return dr=vl(dr,t,e,n,s,r),!0;case"mouseover":return hr=vl(hr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return ho.set(i,vl(ho.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,fo.set(i,vl(fo.get(i)||null,t,e,n,s,r)),!0}return!1}function VT(t){var e=Fi(t.target);if(e!==null){var n=No(e);if(n!==null){if(e=n.tag,e===13){if(e=ex(n),e!==null){t.blockedOn=e,h0(t.priority,function(){N_(n)});return}}else if(e===31){if(e=tx(n),e!==null){t.blockedOn=e,h0(t.priority,function(){N_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $c(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gm(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Mf=s,n.target.dispatchEvent(s),Mf=null}else return e=Va(n),e!==null&&OT(e),t.blockedOn=n,!1;e.shift()}return!0}function R_(t,e,n){$c(t)&&n.delete(e)}function AC(){ym=!1,ur!==null&&$c(ur)&&(ur=null),dr!==null&&$c(dr)&&(dr=null),hr!==null&&$c(hr)&&(hr=null),ho.forEach(R_),fo.forEach(R_)}function Tc(t,e){t.blockedOn===e&&(t.blockedOn=null,ym||(ym=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,AC)))}var wc=null;function I_(t){wc!==t&&(wc=t,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,function(){wc===t&&(wc=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],r=t[e+2];if(typeof s!="function"){if(Yp(s||n)===null)continue;break}var i=Va(n);i!==null&&(t.splice(e,3),e-=3,Jf(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Ea(t){function e(c){return Tc(c,t)}ur!==null&&Tc(ur,t),dr!==null&&Tc(dr,t),hr!==null&&Tc(hr,t),ho.forEach(e),fo.forEach(e);for(var n=0;n<Gs.length;n++){var s=Gs[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Gs.length&&(n=Gs[0],n.blockedOn===null);)VT(n),n.blockedOn===null&&Gs.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],a=r[$t]||null;if(typeof i=="function")a||I_(n);else if(a){var l=null;if(i&&i.hasAttribute("formAction")){if(r=i,a=i[$t]||null)l=a.formAction;else if(Yp(r)!==null)continue}else l=a.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),I_(n)}}}function UT(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Xp(t){this._internalRoot=t}Ad.prototype.render=Xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));var n=e.current,s=ln();DT(n,s,t,e,null,null)};Ad.prototype.unmount=Xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;DT(t.current,2,null,t,null,null),Ed(),e[Ma]=null}};function Ad(t){this._internalRoot=t}Ad.prototype.unstable_scheduleHydration=function(t){if(t){var e=hx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gs.length&&e!==0&&e<Gs[n].priority;n++);Gs.splice(n,0,t),n===0&&VT(t)}};var j_=Wb.version;if(j_!=="19.2.0")throw Error(H(527,j_,"19.2.0"));Ae.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=t2(e),t=t!==null?nx(t):null,t=t===null?null:t.stateNode,t};var SC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{Co=Ac.inject(SC),rn=Ac}catch{}}od.createRoot=function(t,e){if(!Zb(t))throw Error(H(299));var n=!1,s="",r=CE,i=RE,a=IE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=jT(t,1,!1,null,null,n,s,null,r,i,a,UT),t[Ma]=e.current,Fp(t),new Xp(e)};od.hydrateRoot=function(t,e,n){if(!Zb(t))throw Error(H(299));var s=!1,r="",i=CE,a=RE,l=IE,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=jT(t,1,!0,e,n??null,s,r,c,i,a,l,UT),e.context=kT(null),n=e.current,s=ln(),s=rp(s),r=ar(s),r.callback=null,lr(n,r,s),n=s,e.current.lanes=n,Io(e,n),Jn(e),t[Ma]=e.current,Fp(t),new Ad(e)};od.version="19.2.0";function LT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LT)}catch(t){console.error(t)}}LT(),Kb.exports=od;var NC=Kb.exports;const CC=Vb(NC);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mo(){return mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},mo.apply(this,arguments)}var nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nr||(nr={}));const k_="popstate";function RC(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:a,hash:l}=s.location;return _m("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Lu(r)}return jC(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function PT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IC(){return Math.random().toString(36).substr(2,8)}function D_(t,e){return{usr:t.state,key:t.key,idx:e}}function _m(t,e,n,s){return n===void 0&&(n=null),mo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qa(e):e,{state:n,key:e&&e.key||s||IC()})}function Lu(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function qa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function jC(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=nr.Pop,c=null,d=f();d==null&&(d=0,a.replaceState(mo({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function m(){l=nr.Pop;let D=f(),A=D==null?null:D-d;d=D,c&&c({action:l,location:I.location,delta:A})}function p(D,A){l=nr.Push;let b=_m(I.location,D,A);d=f()+1;let x=D_(b,d),j=I.createHref(b);try{a.pushState(x,"",j)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;r.location.assign(j)}i&&c&&c({action:l,location:I.location,delta:1})}function y(D,A){l=nr.Replace;let b=_m(I.location,D,A);d=f();let x=D_(b,d),j=I.createHref(b);a.replaceState(x,"",j),i&&c&&c({action:l,location:I.location,delta:0})}function R(D){let A=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof D=="string"?D:Lu(D);return b=b.replace(/ $/,"%20"),Ke(A,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,A)}let I={get action(){return l},get location(){return t(r,a)},listen(D){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(k_,m),c=D,()=>{r.removeEventListener(k_,m),c=null}},createHref(D){return e(r,D)},createURL:R,encodeLocation(D){let A=R(D);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:p,replace:y,go(D){return a.go(D)}};return I}var O_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(O_||(O_={}));function kC(t,e,n){return n===void 0&&(n="/"),DC(t,e,n)}function DC(t,e,n,s){let r=typeof e=="string"?qa(e):e,i=Ta(r.pathname||"/",n);if(i==null)return null;let a=zT(t);OC(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=GC(i);l=HC(a[c],d)}return l}function zT(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=fr([s,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),zT(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:BC(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of BT(i.path))r(i,a,c)}),e}function BT(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=BT(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function OC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qC(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const MC=/^:[\w-]+$/,VC=3,UC=2,LC=1,PC=10,zC=-2,M_=t=>t==="*";function BC(t,e){let n=t.split("/"),s=n.length;return n.some(M_)&&(s+=zC),e&&(s+=UC),n.filter(r=>!M_(r)).reduce((r,i)=>r+(MC.test(i)?VC:i===""?LC:PC),s)}function qC(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function HC(t,e,n){let{routesMeta:s}=t,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=vm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),p=c.route;if(!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:fr([i,m.pathname]),pathnameBase:YC(fr([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=fr([i,m.pathnameBase]))}return a}function vm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=FC(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:p,isOptional:y}=f;if(p==="*"){let I=l[m]||"";a=i.slice(0,i.length-I.length).replace(/(.)\/+$/,"$1")}const R=l[m];return y&&!R?d[p]=void 0:d[p]=(R||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function FC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),PT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function GC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return PT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ta(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function KC(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?qa(t):t;return{pathname:n?n.startsWith("/")?n:QC(n,e):e,search:XC(s),hash:JC(r)}}function QC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function af(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $C(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jp(t,e){let n=$C(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Wp(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=qa(t):(r=mo({},t),Ke(!r.pathname||!r.pathname.includes("?"),af("?","pathname","search",r)),Ke(!r.pathname||!r.pathname.includes("#"),af("#","pathname","hash",r)),Ke(!r.search||!r.search.includes("#"),af("#","search","hash",r)));let i=t===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!s&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),m-=1;r.pathname=p.join("/")}l=m>=0?e[m]:"/"}let c=KC(r,l),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const fr=t=>t.join("/").replace(/\/\/+/g,"/"),YC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qT=["post","put","patch","delete"];new Set(qT);const ZC=["get",...qT];new Set(ZC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function po(){return po=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},po.apply(this,arguments)}const Sd=N.createContext(null),HT=N.createContext(null),js=N.createContext(null),Nd=N.createContext(null),Wn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),FT=N.createContext(null);function eR(t,e){let{relative:n}=e===void 0?{}:e;Ha()||Ke(!1);let{basename:s,navigator:r}=N.useContext(js),{hash:i,pathname:a,search:l}=Cd(t,{relative:n}),c=a;return s!=="/"&&(c=a==="/"?s:fr([s,a])),r.createHref({pathname:c,search:l,hash:i})}function Ha(){return N.useContext(Nd)!=null}function Ti(){return Ha()||Ke(!1),N.useContext(Nd).location}function GT(t){N.useContext(js).static||N.useLayoutEffect(t)}function Zn(){let{isDataRoute:t}=N.useContext(Wn);return t?pR():tR()}function tR(){Ha()||Ke(!1);let t=N.useContext(Sd),{basename:e,future:n,navigator:s}=N.useContext(js),{matches:r}=N.useContext(Wn),{pathname:i}=Ti(),a=JSON.stringify(Jp(r,n.v7_relativeSplatPath)),l=N.useRef(!1);return GT(()=>{l.current=!0}),N.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let m=Wp(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:fr([e,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[e,s,a,i,t])}const KT=N.createContext(null);function kr(){return N.useContext(KT)}function nR(t){let e=N.useContext(Wn).outlet;return e&&N.createElement(KT.Provider,{value:t},e)}function sR(){let{matches:t}=N.useContext(Wn),e=t[t.length-1];return e?e.params:{}}function Cd(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=N.useContext(js),{matches:r}=N.useContext(Wn),{pathname:i}=Ti(),a=JSON.stringify(Jp(r,s.v7_relativeSplatPath));return N.useMemo(()=>Wp(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function rR(t,e){return iR(t,e)}function iR(t,e,n,s){Ha()||Ke(!1);let{navigator:r}=N.useContext(js),{matches:i}=N.useContext(Wn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Ti(),f;if(e){var m;let D=typeof e=="string"?qa(e):e;c==="/"||(m=D.pathname)!=null&&m.startsWith(c)||Ke(!1),f=D}else f=d;let p=f.pathname||"/",y=p;if(c!=="/"){let D=c.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(D.length).join("/")}let R=kC(t,{pathname:y}),I=uR(R&&R.map(D=>Object.assign({},D,{params:Object.assign({},l,D.params),pathname:fr([c,r.encodeLocation?r.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?c:fr([c,r.encodeLocation?r.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),i,n,s);return e&&I?N.createElement(Nd.Provider,{value:{location:po({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:nr.Pop}},I):I}function aR(){let t=mR(),e=WC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:r},n):null,null)}const lR=N.createElement(aR,null);class oR extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Wn.Provider,{value:this.props.routeContext},N.createElement(FT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cR(t){let{routeContext:e,match:n,children:s}=t,r=N.useContext(Sd);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Wn.Provider,{value:e},s)}function uR(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let f=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Ke(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:p,errors:y}=n,R=m.route.loader&&p[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||R){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,m,p)=>{let y,R=!1,I=null,D=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,I=m.route.errorElement||lR,c&&(d<0&&p===0?(gR("route-fallback"),R=!0,D=null):d===p&&(R=!0,D=m.route.hydrateFallbackElement||null)));let A=e.concat(a.slice(0,p+1)),b=()=>{let x;return y?x=I:R?x=D:m.route.Component?x=N.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=f,N.createElement(cR,{match:m,routeContext:{outlet:f,matches:A,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?N.createElement(oR,{location:n.location,revalidation:n.revalidation,component:I,error:y,children:b(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):b()},null)}var QT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(QT||{}),$T=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($T||{});function dR(t){let e=N.useContext(Sd);return e||Ke(!1),e}function hR(t){let e=N.useContext(HT);return e||Ke(!1),e}function fR(t){let e=N.useContext(Wn);return e||Ke(!1),e}function YT(t){let e=fR(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function mR(){var t;let e=N.useContext(FT),n=hR(),s=YT();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function pR(){let{router:t}=dR(QT.UseNavigateStable),e=YT($T.UseNavigateStable),n=N.useRef(!1);return GT(()=>{n.current=!0}),N.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,po({fromRouteId:e},i)))},[t,e])}const V_={};function gR(t,e,n){V_[t]||(V_[t]=!0)}function yR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function is(t){let{to:e,replace:n,state:s,relative:r}=t;Ha()||Ke(!1);let{future:i,static:a}=N.useContext(js),{matches:l}=N.useContext(Wn),{pathname:c}=Ti(),d=Zn(),f=Wp(e,Jp(l,i.v7_relativeSplatPath),c,r==="path"),m=JSON.stringify(f);return N.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:r}),[d,m,r,n,s]),null}function Zp(t){return nR(t.context)}function Ne(t){Ke(!1)}function _R(t){let{basename:e="/",children:n=null,location:s,navigationType:r=nr.Pop,navigator:i,static:a=!1,future:l}=t;Ha()&&Ke(!1);let c=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:i,static:a,future:po({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=qa(s));let{pathname:f="/",search:m="",hash:p="",state:y=null,key:R="default"}=s,I=N.useMemo(()=>{let D=Ta(f,c);return D==null?null:{location:{pathname:D,search:m,hash:p,state:y,key:R},navigationType:r}},[c,f,m,p,y,R,r]);return I==null?null:N.createElement(js.Provider,{value:d},N.createElement(Nd.Provider,{children:n,value:I}))}function vR(t){let{children:e,location:n}=t;return rR(bm(e),n)}new Promise(()=>{});function bm(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(s,r)=>{if(!N.isValidElement(s))return;let i=[...e,r];if(s.type===N.Fragment){n.push.apply(n,bm(s.props.children,i));return}s.type!==Ne&&Ke(!1),!s.props.index||!s.props.children||Ke(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=bm(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Pu.apply(this,arguments)}function XT(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function bR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xR(t,e){return t.button===0&&(!e||e==="_self")&&!bR(t)}const ER=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],wR="6";try{window.__reactRouterVersion=wR}catch{}const AR=N.createContext({isTransitioning:!1}),SR="startTransition",U_=$S[SR];function NR(t){let{basename:e,children:n,future:s,window:r}=t,i=N.useRef();i.current==null&&(i.current=RC({window:r,v5Compat:!0}));let a=i.current,[l,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},f=N.useCallback(m=>{d&&U_?U_(()=>c(m)):c(m)},[c,d]);return N.useLayoutEffect(()=>a.listen(f),[a,f]),N.useEffect(()=>yR(s),[s]),N.createElement(_R,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const CR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yc=N.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,p=XT(e,ER),{basename:y}=N.useContext(js),R,I=!1;if(typeof d=="string"&&RR.test(d)&&(R=d,CR))try{let x=new URL(window.location.href),j=d.startsWith("//")?new URL(x.protocol+d):new URL(d),U=Ta(j.pathname,y);j.origin===x.origin&&U!=null?d=U+j.search+j.hash:I=!0}catch{}let D=eR(d,{relative:r}),A=kR(d,{replace:a,state:l,target:c,preventScrollReset:f,relative:r,viewTransition:m});function b(x){s&&s(x),x.defaultPrevented||A(x)}return N.createElement("a",Pu({},p,{href:R||D,onClick:I||i?s:b,ref:n,target:c}))}),IR=N.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:f}=e,m=XT(e,TR),p=Cd(c,{relative:m.relative}),y=Ti(),R=N.useContext(HT),{navigator:I,basename:D}=N.useContext(js),A=R!=null&&DR(p)&&d===!0,b=I.encodeLocation?I.encodeLocation(p).pathname:p.pathname,x=y.pathname,j=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(x=x.toLowerCase(),j=j?j.toLowerCase():null,b=b.toLowerCase()),j&&D&&(j=Ta(j,D)||j);const U=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let B=x===b||!a&&x.startsWith(b)&&x.charAt(U)==="/",T=j!=null&&(j===b||!a&&j.startsWith(b)&&j.charAt(b.length)==="/"),_={isActive:B,isPending:T,isTransitioning:A},v=B?s:void 0,S;typeof i=="function"?S=i(_):S=[i,B?"active":null,T?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let w=typeof l=="function"?l(_):l;return N.createElement(Yc,Pu({},m,{"aria-current":v,className:S,ref:n,style:w,to:c,viewTransition:d}),typeof f=="function"?f(_):f)});var xm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xm||(xm={}));var L_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(L_||(L_={}));function jR(t){let e=N.useContext(Sd);return e||Ke(!1),e}function kR(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=Zn(),d=Ti(),f=Cd(t,{relative:a});return N.useCallback(m=>{if(xR(m,n)){m.preventDefault();let p=s!==void 0?s:Lu(d)===Lu(f);c(t,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,f,s,r,n,t,i,a,l])}function DR(t,e){e===void 0&&(e={});let n=N.useContext(AR);n==null&&Ke(!1);let{basename:s}=jR(xm.useViewTransitionState),r=Cd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Ta(n.currentLocation.pathname,s)||n.currentLocation.pathname,a=Ta(n.nextLocation.pathname,s)||n.nextLocation.pathname;return vm(r.pathname,a)!=null||vm(r.pathname,i)!=null}function JT(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=JT(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function wa(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=JT(t))&&(s&&(s+=" "),s+=e);return s}const eg=({sidebar:t,topbar:e,children:n})=>{const[s,r]=N.useState(!1);return u.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-900",children:[u.jsxs("div",{className:"lg:grid lg:grid-cols-[320px,1fr]",children:[u.jsx("div",{className:wa("fixed inset-y-0 left-0 z-40 w-80 max-w-full transform bg-white shadow-xl transition-transform duration-300 lg:sticky lg:top-0 lg:h-screen lg:overflow-y-auto lg:translate-x-0 lg:shadow-none lg:transform-none",s?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:t?ou.cloneElement(t,{onNavigate:(...i)=>{var a,l;(l=(a=t.props).onNavigate)==null||l.call(a,...i),r(!1)}}):null}),u.jsxs("div",{className:"flex min-h-screen flex-col lg:col-start-2",children:[e?ou.cloneElement(e,{onToggleSidebar:()=>r(i=>!i)}):null,u.jsx("main",{className:"flex-1 px-4 pb-10 pt-6 sm:px-6 lg:px-10",children:u.jsx("div",{className:"mx-auto w-full max-w-7xl space-y-8",children:n})})]})]}),s?u.jsx("div",{className:"fixed inset-0 z-30 bg-slate-900/40 lg:hidden",onClick:()=>r(!1)}):null]})},tg=({header:t,navItems:e=[],footer:n,onNavigate:s})=>u.jsxs("aside",{className:"flex h-full w-80 max-w-full flex-col bg-white shadow-lg lg:h-screen",children:[u.jsx("div",{className:"px-6 pb-4 pt-6 border-b border-slate-100",children:t||u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-500",children:"EVC Portal"}),u.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Coaching Suite"})]})}),u.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:u.jsx("ul",{className:"flex flex-col gap-1",children:e.map(r=>{const i=r.icon;return u.jsx("li",{children:u.jsxs(IR,{to:r.to,end:r.end,onClick:()=>s==null?void 0:s(r),className:({isActive:a})=>wa("group flex items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-brand-50 text-brand-700":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"),children:[i?u.jsx(i,{className:"mr-3 h-4 w-4 flex-none text-slate-400 group-hover:text-brand-600"}):null,u.jsx("span",{className:"truncate",children:r.label}),r.badge?u.jsx("span",{className:"ml-auto inline-flex items-center rounded-full bg-brand-100 px-2 py-0.5 text-xs font-semibold text-brand-700",children:r.badge}):null]})},r.to)})})}),n?u.jsx("div",{className:"border-t border-slate-100 p-4",children:n}):null]});/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WT=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...l},c)=>N.createElement("svg",{ref:c,...MR,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:WT("lucide",r),...l},[...a.map(([d,f])=>N.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const n=N.forwardRef(({className:s,...r},i)=>N.createElement(VR,{ref:i,iconNode:e,className:WT(`lucide-${OR(t)}`,s),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],P_=Ee("ArrowLeft",UR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Xc=Ee("ArrowRight",LR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],zR=Ee("CalendarCheck",PR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ZT=Ee("ChevronDown",BR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],HR=Ee("ChevronUp",qR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ti=Ee("CircleCheck",FR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],KR=Ee("CircleX",GR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],$R=Ee("ClipboardList",QR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],XR=Ee("Clock",YR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],WR=Ee("FileSpreadsheet",JR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ew=Ee("FileText",ZR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],tw=Ee("IdCard",eI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ng=Ee("LayoutDashboard",tI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lf=Ee("LoaderCircle",nI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],rI=Ee("LogIn",sI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],z_=Ee("LogOut",iI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],lI=Ee("Mail",aI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],nw=Ee("Menu",oI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],uI=Ee("MessageCircle",cI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],hI=Ee("MessageSquare",dI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],B_=Ee("Paperclip",fI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q_=Ee("Plus",mI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],gI=Ee("RefreshCcw",pI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_I=Ee("Save",yI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],bI=Ee("Search",vI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],EI=Ee("Send",xI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],wI=Ee("ShieldAlert",TI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SI=Ee("ShieldCheck",AI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CI=Ee("ShieldQuestion",NI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],H_=Ee("Shield",RI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],F_=Ee("Trash2",II);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kI=Ee("TriangleAlert",jI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sw=Ee("UserPlus",DI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Po=Ee("Users",OI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],VI=Ee("X",MI),sg=({title:t,user:e,children:n,onToggleSidebar:s,rightSlot:r})=>{var i;return u.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between bg-white/80 px-4 py-3 backdrop-blur supports-[backdrop-filter]:bg-white/60 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{type:"button",onClick:s,className:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 text-slate-500 transition hover:bg-slate-100 lg:hidden",children:[u.jsx(nw,{className:"h-5 w-5"}),u.jsx("span",{className:"sr-only",children:"Toggle navigation"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-400",children:(e==null?void 0:e.role)??"Portal"}),u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:t})]}),n]}),u.jsxs("div",{className:"flex items-center gap-4",children:[r,e?u.jsxs("div",{className:"flex items-center gap-3 rounded-full bg-slate-100/60 px-3 py-2 text-sm",children:[u.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-brand-100 font-semibold text-brand-700",children:e.initials||((i=e.name)==null?void 0:i.split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase())||"EV"}),u.jsxs("div",{className:"hidden sm:block",children:[u.jsx("p",{className:"font-medium text-slate-900",children:e.name}),u.jsx("p",{className:"text-xs text-slate-500",children:e.subtitle})]})]}):null]})]})},UI="http://localhost:5000";function LI(){const t=localStorage.getItem("token");return t?{Authorization:"Bearer "+t}:{}}async function Rd(t,e={}){const{method:n="GET",headers:s={},body:r,isForm:i=!1}=e,a={method:n,headers:{...s,...LI()}};r!==void 0&&(i?a.body=r:(a.headers["Content-Type"]="application/json",a.body=typeof r=="string"?r:JSON.stringify(r)));const l=await fetch(`${UI}${t}`,a);let c;if((l.headers.get("content-type")||"").includes("application/json"))try{c=await l.json()}catch{c=null}else c=await l.text().catch(()=>null);if(!l.ok){const f=new Error(c&&c.error||l.statusText||"Request failed");throw f.status=l.status,f.data=c,f}return c}const Ts=(t,e)=>Rd(t,{method:"GET",headers:e}),Aa=(t,e,n)=>Rd(t,{method:"POST",body:e,headers:n}),rw=(t,e,n)=>Rd(t,{method:"PUT",body:e,headers:n}),PI=(t,e,n)=>Rd(t,{method:"POST",body:e,headers:n,isForm:!0}),zI=()=>{};var G_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},BI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},aw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,l=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(p=64)),s.push(n[f],n[m],n[p],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||d==null||m==null)throw new qI;const p=i<<2|l>>4;if(s.push(p),d!==64){const y=l<<4&240|d>>2;if(s.push(y),m!==64){const R=d<<6&192|m;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HI=function(t){const e=iw(t);return aw.encodeByteArray(e,!0)},zu=function(t){return HI(t).replace(/\./g,"")},lw=function(t){try{return aw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=()=>FI().__FIREBASE_DEFAULTS__,KI=()=>{if(typeof process>"u"||typeof G_>"u")return;const t=G_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lw(t[1]);return e&&JSON.parse(e)},Id=()=>{try{return zI()||GI()||KI()||QI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ow=t=>{var e,n;return(n=(e=Id())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},cw=t=>{const e=ow(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},uw=()=>{var t;return(t=Id())==null?void 0:t.config},dw=t=>{var e;return(e=Id())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zu(JSON.stringify(n)),zu(JSON.stringify(a)),""].join(".")}const Kl={};function YI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Kl))Kl[e]?t.emulator.push(e):t.prod.push(e);return t}function XI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let K_=!1;function ig(t,e){if(typeof window>"u"||typeof document>"u"||!Dr(window.location.host)||Kl[t]===e||Kl[t]||K_)return;Kl[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=YI().prod.length>0;function a(){const p=document.getElementById(s);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{K_=!0,a()},p}function f(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=XI(s),y=n("text"),R=document.getElementById(y)||document.createElement("span"),I=n("learnmore"),D=document.getElementById(I)||document.createElement("a"),A=n("preprendIcon"),b=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),f(D,I);const j=d();c(b,A),x.append(b,R,D,j),document.body.appendChild(x)}i?(R.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function WI(){var e;const t=(e=Id())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ej(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nj(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sj(){return!WI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rj(){try{return typeof indexedDB=="object"}catch{return!1}}function ij(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="FirebaseError";class es extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=aj,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?lj(i,s):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new es(r,l,s)}}function lj(t,e){return t.replace(oj,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const oj=/\{\$([^}]+)}/g;function cj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function di(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(Q_(i)&&Q_(a)){if(!di(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Q_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Nl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function uj(t,e){const n=new dj(t,e);return n.subscribe.bind(n)}class dj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");hj(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=of),r.error===void 0&&(r.error=of),r.complete===void 0&&(r.complete=of);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class Tr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $I;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pj(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&a.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mj(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mj(t){return t===$r?void 0:t}function pj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const yj={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},_j=ge.INFO,vj={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},bj=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=vj[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ag{constructor(e){this.name=e,this._logLevel=_j,this._logHandler=bj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const xj=(t,e)=>e.some(n=>t instanceof n);let $_,Y_;function Ej(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tj(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fw=new WeakMap,Em=new WeakMap,mw=new WeakMap,cf=new WeakMap,lg=new WeakMap;function wj(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(mr(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&fw.set(n,t)}).catch(()=>{}),lg.set(e,t),e}function Aj(t){if(Em.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Em.set(t,e)}let Tm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Em.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sj(t){Tm=t(Tm)}function Nj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(uf(this),e,...n);return mw.set(s,e.sort?e.sort():[e]),mr(s)}:Tj().includes(t)?function(...e){return t.apply(uf(this),e),mr(fw.get(this))}:function(...e){return mr(t.apply(uf(this),e))}}function Cj(t){return typeof t=="function"?Nj(t):(t instanceof IDBTransaction&&Aj(t),xj(t,Ej())?new Proxy(t,Tm):t)}function mr(t){if(t instanceof IDBRequest)return wj(t);if(cf.has(t))return cf.get(t);const e=Cj(t);return e!==t&&(cf.set(t,e),lg.set(e,t)),e}const uf=t=>lg.get(t);function Rj(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),l=mr(a);return s&&a.addEventListener("upgradeneeded",c=>{s(mr(a.result),c.oldVersion,c.newVersion,mr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Ij=["get","getKey","getAll","getAllKeys","count"],jj=["put","add","delete","clear"],df=new Map;function X_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(df.get(e))return df.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=jj.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Ij.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&c.done]))[0]};return df.set(e,i),i}Sj(t=>({...t,get:(e,n,s)=>X_(e,n)||t.get(e,n,s),has:(e,n)=>!!X_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dj(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Dj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wm="@firebase/app",J_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new ag("@firebase/app"),Oj="@firebase/app-compat",Mj="@firebase/analytics-compat",Vj="@firebase/analytics",Uj="@firebase/app-check-compat",Lj="@firebase/app-check",Pj="@firebase/auth",zj="@firebase/auth-compat",Bj="@firebase/database",qj="@firebase/data-connect",Hj="@firebase/database-compat",Fj="@firebase/functions",Gj="@firebase/functions-compat",Kj="@firebase/installations",Qj="@firebase/installations-compat",$j="@firebase/messaging",Yj="@firebase/messaging-compat",Xj="@firebase/performance",Jj="@firebase/performance-compat",Wj="@firebase/remote-config",Zj="@firebase/remote-config-compat",e4="@firebase/storage",t4="@firebase/storage-compat",n4="@firebase/firestore",s4="@firebase/ai",r4="@firebase/firestore-compat",i4="firebase",a4="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",l4={[wm]:"fire-core",[Oj]:"fire-core-compat",[Vj]:"fire-analytics",[Mj]:"fire-analytics-compat",[Lj]:"fire-app-check",[Uj]:"fire-app-check-compat",[Pj]:"fire-auth",[zj]:"fire-auth-compat",[Bj]:"fire-rtdb",[qj]:"fire-data-connect",[Hj]:"fire-rtdb-compat",[Fj]:"fire-fn",[Gj]:"fire-fn-compat",[Kj]:"fire-iid",[Qj]:"fire-iid-compat",[$j]:"fire-fcm",[Yj]:"fire-fcm-compat",[Xj]:"fire-perf",[Jj]:"fire-perf-compat",[Wj]:"fire-rc",[Zj]:"fire-rc-compat",[e4]:"fire-gcs",[t4]:"fire-gcs-compat",[n4]:"fire-fst",[r4]:"fire-fst-compat",[s4]:"fire-vertex","fire-js":"fire-js",[i4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Map,o4=new Map,Sm=new Map;function W_(t,e){try{t.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hi(t){const e=t.name;if(Sm.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;Sm.set(e,t);for(const n of Bu.values())W_(n,t);for(const n of o4.values())W_(n,t);return!0}function jd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new zo("app","Firebase",c4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=a4;function pw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Am,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw pr.create("bad-app-name",{appName:String(r)});if(n||(n=uw()),!n)throw pr.create("no-options");const i=Bu.get(r);if(i){if(di(n,i.options)&&di(s,i.config))return i;throw pr.create("duplicate-app",{appName:r})}const a=new gj(r);for(const c of Sm.values())a.addComponent(c);const l=new u4(n,s,a);return Bu.set(r,l),l}function og(t=Am){const e=Bu.get(t);if(!e&&t===Am&&uw())return pw();if(!e)throw pr.create("no-app",{appName:t});return e}function Bn(t,e,n){let s=l4[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(a.join(" "));return}hi(new Tr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="firebase-heartbeat-database",h4=1,go="firebase-heartbeat-store";let hf=null;function gw(){return hf||(hf=Rj(d4,h4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(go)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),hf}async function f4(t){try{const n=(await gw()).transaction(go),s=await n.objectStore(go).get(yw(t));return await n.done,s}catch(e){if(e instanceof es)ws.warn(e.message);else{const n=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(n.message)}}}async function Z_(t,e){try{const s=(await gw()).transaction(go,"readwrite");await s.objectStore(go).put(e,yw(t)),await s.done}catch(n){if(n instanceof es)ws.warn(n.message);else{const s=pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ws.warn(s.message)}}}function yw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=1024,p4=30;class g4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _4(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ev();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>p4){const a=v4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ws.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ev(),{heartbeatsToSend:s,unsentEntries:r}=y4(this._heartbeatsCache.heartbeats),i=zu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ws.warn(n),""}}}function ev(){return new Date().toISOString().substring(0,10)}function y4(t,e=m4){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),tv(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rj()?ij().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await f4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function tv(t){return zu(JSON.stringify({version:2,heartbeats:t})).length}function v4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){hi(new Tr("platform-logger",e=>new kj(e),"PRIVATE")),hi(new Tr("heartbeat",e=>new g4(e),"PRIVATE")),Bn(wm,J_,t),Bn(wm,J_,"esm2020"),Bn("fire-js","")}b4("");var x4="firebase",E4="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(x4,E4,"app");function _w(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T4=_w,vw=new zo("auth","Firebase",_w());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new ag("@firebase/auth");function w4(t,...e){qu.logLevel<=ge.WARN&&qu.warn(`Auth (${wi}): ${t}`,...e)}function Jc(t,...e){qu.logLevel<=ge.ERROR&&qu.error(`Auth (${wi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,...e){throw cg(t,...e)}function qn(t,...e){return cg(t,...e)}function bw(t,e,n){const s={...T4(),[e]:n};return new zo("auth","Firebase",s).create(e,{appName:t.name})}function gr(t){return bw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return vw.create(t,...e)}function se(t,e,...n){if(!t)throw cg(e,...n)}function hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jc(e),new Error(e)}function As(t,e){t||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function A4(){return nv()==="http:"||nv()==="https:"}function nv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A4()||ej()||"connection"in navigator)?navigator.onLine:!0}function N4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.shortDelay=e,this.longDelay=n,As(n>e,"Short delay should be less than long delay!"),this.isMobile=JI()||tj()}get(){return S4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){As(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I4=new qo(3e4,6e4);function Ai(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Or(t,e,n,s,r={}){return Ew(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const l=Bo({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return ZI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Dr(t.emulatorConfig.host)&&(d.credentials="include"),xw.fetch()(await Tw(t,t.config.apiHost,n,l),d)})}async function Ew(t,e,n){t._canInitEmulator=!1;const s={...C4,...e};try{const r=new k4(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Sc(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sc(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Sc(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Sc(t,"user-disabled",a);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bw(t,f,d);Cn(t,f)}}catch(r){if(r instanceof es)throw r;Cn(t,"network-request-failed",{message:String(r)})}}async function kd(t,e,n,s,r={}){const i=await Or(t,e,n,s,r);return"mfaPendingCredential"in i&&Cn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Tw(t,e,n,s){const r=`${e}${n}?${s}`,i=t,a=i.config.emulator?ug(t.config,r):`${t.config.apiScheme}://${r}`;return R4.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function j4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(qn(this.auth,"network-request-failed")),I4.get())})}}function Sc(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=qn(t,e,s);return r.customData._tokenResponse=n,r}function sv(t){return t!==void 0&&t.enterprise!==void 0}class D4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return j4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O4(t,e){return Or(t,"GET","/v2/recaptchaConfig",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(t,e){return Or(t,"POST","/v1/accounts:delete",e)}async function Hu(t,e){return Or(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V4(t,e=!1){const n=Je(t),s=await n.getIdToken(e),r=dg(s);se(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Ql(ff(r.auth_time)),issuedAtTime:Ql(ff(r.iat)),expirationTime:Ql(ff(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ff(t){return Number(t)*1e3}function dg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{const r=lw(n);return r?JSON.parse(r):(Jc("Failed to decode base64 JWT payload"),null)}catch(r){return Jc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function rv(t){const e=dg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof es&&U4(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function U4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(t){var m;const e=t.auth,n=await t.getIdToken(),s=await yo(t,Hu(e,{idToken:n}));se(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(m=r.providerUserInfo)!=null&&m.length?ww(r.providerUserInfo):[],a=z4(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Cm(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function P4(t){const e=Je(t);await Fu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z4(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function ww(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e){const n=await Ew(t,{},async()=>{const s=Bo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=await Tw(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Dr(t.emulatorConfig.host)&&(c.credentials="include"),xw.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q4(t,e){return Or(t,"POST","/v2/accounts:revokeToken",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await B4(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new oa;return s&&(se(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(se(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(se(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new L4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Cm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await yo(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V4(this,e)}reload(){return P4(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await yo(this,M4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:y,providerData:R,stsTokenManager:I}=n;se(m&&I,e,"internal-error");const D=oa.fromJSON(this.name,I);se(typeof m=="string",e,"internal-error"),Ps(s,e.name),Ps(r,e.name),se(typeof p=="boolean",e,"internal-error"),se(typeof y=="boolean",e,"internal-error"),Ps(i,e.name),Ps(a,e.name),Ps(l,e.name),Ps(c,e.name),Ps(d,e.name),Ps(f,e.name);const A=new Sn({uid:m,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:y,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:D,createdAt:d,lastLoginAt:f});return R&&Array.isArray(R)&&(A.providerData=R.map(b=>({...b}))),c&&(A._redirectEventId=c),A}static async _fromIdTokenResponse(e,n,s=!1){const r=new oa;r.updateFromServerResponse(n);const i=new Sn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Fu(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];se(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?ww(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new oa;l.updateFromIdToken(s);const c=new Sn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Cm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;function fs(t){As(t instanceof Function,"Expected a class definition");let e=iv.get(t);return e?(As(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Aw.type="NONE";const av=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e,n){return`firebase:${t}:${e}:${n}`}class ca{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Wc(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hu(this.auth,{idToken:e}).catch(()=>{});return n?Sn._fromGetAccountInfoResponse(this.auth,n,e):null}return Sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ca(fs(av),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||fs(av);const a=Wc(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(a);if(f){let m;if(typeof f=="string"){const p=await Hu(e,{idToken:f}).catch(()=>{});if(!p)break;m=await Sn._fromGetAccountInfoResponse(e,p,f)}else m=Sn._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ca(i,e,s):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new ca(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if(kw(e))return"Webos";if(Nw(e))return"Safari";if((e.includes("chrome/")||Cw(e))&&!e.includes("edge/"))return"Chrome";if(Iw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Sw(t=Ot()){return/firefox\//i.test(t)}function Nw(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cw(t=Ot()){return/crios\//i.test(t)}function Rw(t=Ot()){return/iemobile/i.test(t)}function Iw(t=Ot()){return/android/i.test(t)}function jw(t=Ot()){return/blackberry/i.test(t)}function kw(t=Ot()){return/webos/i.test(t)}function hg(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function H4(t=Ot()){var e;return hg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function F4(){return nj()&&document.documentMode===10}function Dw(t=Ot()){return hg(t)||Iw(t)||kw(t)||jw(t)||/windows phone/i.test(t)||Rw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e=[]){let n;switch(t){case"Browser":n=lv(Ot());break;case"Worker":n=`${lv(Ot())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(t,e={}){return Or(t,"GET","/v2/passwordPolicy",Ai(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=6;class $4{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Q4,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ov(this),this.idTokenSubscription=new ov(this),this.beforeStateQueue=new G4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hu(this,{idToken:e}),s=await Sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(gr(this));const n=e?Je(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K4(this),n=new $4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await q4(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fs(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&w4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fa(t){return Je(t)}class ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=uj(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X4(t){Dd=t}function Mw(t){return Dd.loadJS(t)}function J4(){return Dd.recaptchaEnterpriseScript}function W4(){return Dd.gapiScript}function Z4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ek{constructor(){this.enterprise=new tk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nk="recaptcha-enterprise",Vw="NO_RECAPTCHA";class sk{constructor(e){this.type=nk,this.auth=Fa(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{O4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new D4(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function r(i,a,l){const c=window.grecaptcha;sv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(Vw)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ek().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{s(this.auth).then(l=>{if(!n&&sv(window.grecaptcha))r(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=J4();c.length!==0&&(c+=l),Mw(c).then(()=>{r(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function cv(t,e,n,s=!1,r=!1){const i=new sk(t);let a;if(r)a=Vw;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function uv(t,e,n,s,r){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await cv(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await cv(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e){const n=jd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(di(i,e??{}))return r;Cn(r,"already-initialized")}return n.initialize({options:e})}function ik(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Uw(t,e,n){const s=Fa(t);se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Lw(e),{host:a,port:l}=ak(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},f=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),se(di(d,s.config.emulator)&&di(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Dr(a)?(rg(`${i}//${a}${c}`),ig("Auth",!0)):lk()}function Lw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ak(t){const e=Lw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:dv(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:dv(a)}}}function dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function ok(t,e){return Or(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e){return kd(t,"POST","/v1/accounts:signInWithPassword",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(t,e){return kd(t,"POST","/v1/accounts:signInWithEmailLink",Ai(t,e))}async function dk(t,e){return kd(t,"POST","/v1/accounts:signInWithEmailLink",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends fg{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new _o(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new _o(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uv(e,n,"signInWithPassword",ck);case"emailLink":return uk(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uv(e,s,"signUpPassword",ok);case"emailLink":return dk(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t,e){return kd(t,"POST","/v1/accounts:signInWithIdp",Ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="http://localhost";class fi extends fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const a=new fi(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ua(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ua(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ua(e,n)}buildRequest(){const e={requestUri:hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mk(t){const e=Sl(Nl(t)).link,n=e?Sl(Nl(e)).deep_link_id:null,s=Sl(Nl(t)).deep_link_id;return(s?Sl(Nl(s)).link:null)||s||n||e||t}class mg{constructor(e){const n=Sl(Nl(e)),s=n.apiKey??null,r=n.oobCode??null,i=fk(n.mode??null);se(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=mk(e);try{return new mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,n){return _o._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=mg.parseLink(n);return se(s,"argument-error"),_o._fromEmailAndCode(e,s.code,s.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Pw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Ho{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Ho{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Qs.credential(n,s)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Ho{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Ho{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ys.credential(n,s)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Sn._fromIdTokenResponse(e,s,r),a=hv(s);return new Sa({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=hv(s);return new Sa({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function hv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends es{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Gu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Gu(e,n,s,r)}}function zw(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gu._fromErrorAndOperation(t,i,e,s):i})}async function pk(t,e,n=!1){const s=await yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sa._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e,n=!1){const{auth:s}=t;if(yn(s.app))return Promise.reject(gr(s));const r="reauthenticate";try{const i=await yo(t,zw(s,r,e,t),n);se(i.idToken,s,"internal-error");const a=dg(i.idToken);se(a,s,"internal-error");const{sub:l}=a;return se(t.uid===l,s,"user-mismatch"),Sa._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Cn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(t,e,n=!1){if(yn(t.app))return Promise.reject(gr(t));const s="signIn",r=await zw(t,s,e),i=await Sa._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function yk(t,e){return Bw(Fa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t){const e=Fa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function vk(t,e,n){return yn(t.app)?Promise.reject(gr(t)):yk(Je(t),Ga.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&_k(t),s})}function bk(t,e,n,s){return Je(t).onIdTokenChanged(e,n,s)}function xk(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function qw(t,e,n,s){return Je(t).onAuthStateChanged(e,n,s)}const Ku="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ku,"1"),this.storage.removeItem(Ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=1e3,Tk=10;class Fw extends Hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);F4()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Tk):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fw.type="LOCAL";const wk=Fw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gw.type="SESSION";const Kw=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Od(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await Ak(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=pg("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return window}function Nk(t){Hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}async function Ck(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ik(){return Qw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="firebaseLocalStorageDb",jk=1,Qu="firebaseLocalStorage",Yw="fbase_key";class Fo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Md(t,e){return t.transaction([Qu],e?"readwrite":"readonly").objectStore(Qu)}function kk(){const t=indexedDB.deleteDatabase($w);return new Fo(t).toPromise()}function Rm(){const t=indexedDB.open($w,jk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Qu,{keyPath:Yw})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Qu)?e(s):(s.close(),await kk(),e(await Rm()))})})}async function fv(t,e,n){const s=Md(t,!0).put({[Yw]:e,value:n});return new Fo(s).toPromise()}async function Dk(t,e){const n=Md(t,!1).get(e),s=await new Fo(n).toPromise();return s===void 0?null:s.value}function mv(t,e){const n=Md(t,!0).delete(e);return new Fo(n).toPromise()}const Ok=800,Mk=3;class Xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Mk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(Ik()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await Ck(),!this.activeServiceWorker)return;this.sender=new Sk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rm();return await fv(e,Ku,"1"),await mv(e,Ku),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>fv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Dk(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Md(r,!1).getAll();return new Fo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xw.type="LOCAL";const Vk=Xw;new qo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e){return e?fs(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ua(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Lk(t){return Bw(t.auth,new gg(t),t.bypassAuthState)}function Pk(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),gk(n,new gg(t),t.bypassAuthState)}async function zk(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),pk(n,new gg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lk;case"linkViaPopup":case"linkViaRedirect":return zk;case"reauthViaPopup":case"reauthViaRedirect":return Pk;default:Cn(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new qo(2e3,1e4);class ea extends Jw{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const e=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bk.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="pendingRedirect",Zc=new Map;class Hk extends Jw{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const s=await Fk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Fk(t,e){const n=Qk(e),s=Kk(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Gk(t,e){Zc.set(t._key(),e)}function Kk(t){return fs(t._redirectPersistence)}function Qk(t){return Wc(qk,t.config.apiKey,t.name)}async function $k(t,e,n=!1){if(yn(t.app))return Promise.reject(gr(t));const s=Fa(t),r=Uk(s,e),a=await new Hk(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=10*60*1e3;class Xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Jk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Ww(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yk&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(e))}saveEventToCache(e){this.cachedEventUids.add(pv(e)),this.lastProcessedEventTime=Date.now()}}function pv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ww({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Jk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ww(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(t,e={}){return Or(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eD=/^https?/;async function tD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Wk(t);for(const n of e)try{if(nD(n))return}catch{}Cn(t,"unauthorized-domain")}function nD(t){const e=Nm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!eD.test(n))return!1;if(Zk.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=new qo(3e4,6e4);function gv(){const t=Hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rD(t){return new Promise((e,n)=>{var r,i,a;function s(){gv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gv(),n(qn(t,"network-request-failed"))},timeout:sD.get()})}if((i=(r=Hn().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Hn().gapi)!=null&&a.load)s();else{const l=Z4("iframefcb");return Hn()[l]=()=>{gapi.load?s():n(qn(t,"network-request-failed"))},Mw(`${W4()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw eu=null,e})}let eu=null;function iD(t){return eu=eu||rD(t),eu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=new qo(5e3,15e3),lD="__/auth/iframe",oD="emulator/auth/iframe",cD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dD(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ug(e,oD):`https://${t.config.authDomain}/${lD}`,s={apiKey:e.apiKey,appName:t.name,v:wi},r=uD.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Bo(s).slice(1)}`}async function hD(t){const e=await iD(t),n=Hn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:dD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cD,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=qn(t,"network-request-failed"),l=Hn().setTimeout(()=>{i(a)},aD.get());function c(){Hn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mD=500,pD=600,gD="_blank",yD="http://localhost";class yv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _D(t,e,n,s=mD,r=pD){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...fD,width:s.toString(),height:r.toString(),top:i,left:a},d=Ot().toLowerCase();n&&(l=Cw(d)?gD:n),Sw(d)&&(e=e||yD,c.scrollbars="yes");const f=Object.entries(c).reduce((p,[y,R])=>`${p}${y}=${R},`,"");if(H4(d)&&l!=="_self")return vD(e||"",l),new yv(null);const m=window.open(e||"",l,f);se(m,t,"popup-blocked");try{m.focus()}catch{}return new yv(m)}function vD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="__/auth/handler",xD="emulator/auth/handler",ED=encodeURIComponent("fac");async function _v(t,e,n,s,r,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:wi,eventId:r};if(e instanceof Pw){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",cj(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof Ho){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${ED}=${encodeURIComponent(c)}`:"";return`${TD(t)}?${Bo(l).slice(1)}${d}`}function TD({config:t}){return t.emulator?ug(t,xD):`https://${t.authDomain}/${bD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="webStorageSupport";class wD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kw,this._completeRedirectFn=$k,this._overrideRedirectResult=Gk}async _openPopup(e,n,s,r){var a;As((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await _v(e,n,s,Nm(),r);return _D(e,i,pg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await _v(e,n,s,Nm(),r);return Nk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(As(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await hD(e),s=new Xk(e);return n.register("authEvent",r=>(se(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mf,{type:mf},r=>{var a;const i=(a=r==null?void 0:r[0])==null?void 0:a[mf];i!==void 0&&n(!!i),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Dw()||Nw()||hg()}}const AD=wD;var vv="@firebase/auth",bv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CD(t){hi(new Tr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;se(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ow(t)},d=new Y4(s,r,i,c);return ik(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),hi(new Tr("auth-internal",e=>{const n=Fa(e.getProvider("auth").getImmediate());return(s=>new SD(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(vv,bv,ND(t)),Bn(vv,bv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=5*60,ID=dw("authIdTokenMaxAge")||RD;let xv=null;const jD=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ID)return;const r=n==null?void 0:n.token;xv!==r&&(xv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function kD(t=og()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rk(t,{popupRedirectResolver:AD,persistence:[Vk,wk,Kw]}),s=dw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const a=jD(i.toString());xk(n,a,()=>a(n.currentUser)),bk(n,l=>a(l))}}const r=ow("auth");return r&&Uw(n,`http://${r}`),n}function DD(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}X4({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=qn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",DD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CD("Browser");var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yr,Zw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function v(){}v.prototype=_.prototype,T.F=_.prototype,T.prototype=new v,T.prototype.constructor=T,T.D=function(S,w,k){for(var C=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)C[ae-2]=arguments[ae];return _.prototype[w].apply(S,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,_,v){v||(v=0);const S=Array(16);if(typeof _=="string")for(var w=0;w<16;++w)S[w]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(w=0;w<16;++w)S[w]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=T.g[0],v=T.g[1],w=T.g[2];let k=T.g[3],C;C=_+(k^v&(w^k))+S[0]+3614090360&4294967295,_=v+(C<<7&4294967295|C>>>25),C=k+(w^_&(v^w))+S[1]+3905402710&4294967295,k=_+(C<<12&4294967295|C>>>20),C=w+(v^k&(_^v))+S[2]+606105819&4294967295,w=k+(C<<17&4294967295|C>>>15),C=v+(_^w&(k^_))+S[3]+3250441966&4294967295,v=w+(C<<22&4294967295|C>>>10),C=_+(k^v&(w^k))+S[4]+4118548399&4294967295,_=v+(C<<7&4294967295|C>>>25),C=k+(w^_&(v^w))+S[5]+1200080426&4294967295,k=_+(C<<12&4294967295|C>>>20),C=w+(v^k&(_^v))+S[6]+2821735955&4294967295,w=k+(C<<17&4294967295|C>>>15),C=v+(_^w&(k^_))+S[7]+4249261313&4294967295,v=w+(C<<22&4294967295|C>>>10),C=_+(k^v&(w^k))+S[8]+1770035416&4294967295,_=v+(C<<7&4294967295|C>>>25),C=k+(w^_&(v^w))+S[9]+2336552879&4294967295,k=_+(C<<12&4294967295|C>>>20),C=w+(v^k&(_^v))+S[10]+4294925233&4294967295,w=k+(C<<17&4294967295|C>>>15),C=v+(_^w&(k^_))+S[11]+2304563134&4294967295,v=w+(C<<22&4294967295|C>>>10),C=_+(k^v&(w^k))+S[12]+1804603682&4294967295,_=v+(C<<7&4294967295|C>>>25),C=k+(w^_&(v^w))+S[13]+4254626195&4294967295,k=_+(C<<12&4294967295|C>>>20),C=w+(v^k&(_^v))+S[14]+2792965006&4294967295,w=k+(C<<17&4294967295|C>>>15),C=v+(_^w&(k^_))+S[15]+1236535329&4294967295,v=w+(C<<22&4294967295|C>>>10),C=_+(w^k&(v^w))+S[1]+4129170786&4294967295,_=v+(C<<5&4294967295|C>>>27),C=k+(v^w&(_^v))+S[6]+3225465664&4294967295,k=_+(C<<9&4294967295|C>>>23),C=w+(_^v&(k^_))+S[11]+643717713&4294967295,w=k+(C<<14&4294967295|C>>>18),C=v+(k^_&(w^k))+S[0]+3921069994&4294967295,v=w+(C<<20&4294967295|C>>>12),C=_+(w^k&(v^w))+S[5]+3593408605&4294967295,_=v+(C<<5&4294967295|C>>>27),C=k+(v^w&(_^v))+S[10]+38016083&4294967295,k=_+(C<<9&4294967295|C>>>23),C=w+(_^v&(k^_))+S[15]+3634488961&4294967295,w=k+(C<<14&4294967295|C>>>18),C=v+(k^_&(w^k))+S[4]+3889429448&4294967295,v=w+(C<<20&4294967295|C>>>12),C=_+(w^k&(v^w))+S[9]+568446438&4294967295,_=v+(C<<5&4294967295|C>>>27),C=k+(v^w&(_^v))+S[14]+3275163606&4294967295,k=_+(C<<9&4294967295|C>>>23),C=w+(_^v&(k^_))+S[3]+4107603335&4294967295,w=k+(C<<14&4294967295|C>>>18),C=v+(k^_&(w^k))+S[8]+1163531501&4294967295,v=w+(C<<20&4294967295|C>>>12),C=_+(w^k&(v^w))+S[13]+2850285829&4294967295,_=v+(C<<5&4294967295|C>>>27),C=k+(v^w&(_^v))+S[2]+4243563512&4294967295,k=_+(C<<9&4294967295|C>>>23),C=w+(_^v&(k^_))+S[7]+1735328473&4294967295,w=k+(C<<14&4294967295|C>>>18),C=v+(k^_&(w^k))+S[12]+2368359562&4294967295,v=w+(C<<20&4294967295|C>>>12),C=_+(v^w^k)+S[5]+4294588738&4294967295,_=v+(C<<4&4294967295|C>>>28),C=k+(_^v^w)+S[8]+2272392833&4294967295,k=_+(C<<11&4294967295|C>>>21),C=w+(k^_^v)+S[11]+1839030562&4294967295,w=k+(C<<16&4294967295|C>>>16),C=v+(w^k^_)+S[14]+4259657740&4294967295,v=w+(C<<23&4294967295|C>>>9),C=_+(v^w^k)+S[1]+2763975236&4294967295,_=v+(C<<4&4294967295|C>>>28),C=k+(_^v^w)+S[4]+1272893353&4294967295,k=_+(C<<11&4294967295|C>>>21),C=w+(k^_^v)+S[7]+4139469664&4294967295,w=k+(C<<16&4294967295|C>>>16),C=v+(w^k^_)+S[10]+3200236656&4294967295,v=w+(C<<23&4294967295|C>>>9),C=_+(v^w^k)+S[13]+681279174&4294967295,_=v+(C<<4&4294967295|C>>>28),C=k+(_^v^w)+S[0]+3936430074&4294967295,k=_+(C<<11&4294967295|C>>>21),C=w+(k^_^v)+S[3]+3572445317&4294967295,w=k+(C<<16&4294967295|C>>>16),C=v+(w^k^_)+S[6]+76029189&4294967295,v=w+(C<<23&4294967295|C>>>9),C=_+(v^w^k)+S[9]+3654602809&4294967295,_=v+(C<<4&4294967295|C>>>28),C=k+(_^v^w)+S[12]+3873151461&4294967295,k=_+(C<<11&4294967295|C>>>21),C=w+(k^_^v)+S[15]+530742520&4294967295,w=k+(C<<16&4294967295|C>>>16),C=v+(w^k^_)+S[2]+3299628645&4294967295,v=w+(C<<23&4294967295|C>>>9),C=_+(w^(v|~k))+S[0]+4096336452&4294967295,_=v+(C<<6&4294967295|C>>>26),C=k+(v^(_|~w))+S[7]+1126891415&4294967295,k=_+(C<<10&4294967295|C>>>22),C=w+(_^(k|~v))+S[14]+2878612391&4294967295,w=k+(C<<15&4294967295|C>>>17),C=v+(k^(w|~_))+S[5]+4237533241&4294967295,v=w+(C<<21&4294967295|C>>>11),C=_+(w^(v|~k))+S[12]+1700485571&4294967295,_=v+(C<<6&4294967295|C>>>26),C=k+(v^(_|~w))+S[3]+2399980690&4294967295,k=_+(C<<10&4294967295|C>>>22),C=w+(_^(k|~v))+S[10]+4293915773&4294967295,w=k+(C<<15&4294967295|C>>>17),C=v+(k^(w|~_))+S[1]+2240044497&4294967295,v=w+(C<<21&4294967295|C>>>11),C=_+(w^(v|~k))+S[8]+1873313359&4294967295,_=v+(C<<6&4294967295|C>>>26),C=k+(v^(_|~w))+S[15]+4264355552&4294967295,k=_+(C<<10&4294967295|C>>>22),C=w+(_^(k|~v))+S[6]+2734768916&4294967295,w=k+(C<<15&4294967295|C>>>17),C=v+(k^(w|~_))+S[13]+1309151649&4294967295,v=w+(C<<21&4294967295|C>>>11),C=_+(w^(v|~k))+S[4]+4149444226&4294967295,_=v+(C<<6&4294967295|C>>>26),C=k+(v^(_|~w))+S[11]+3174756917&4294967295,k=_+(C<<10&4294967295|C>>>22),C=w+(_^(k|~v))+S[2]+718787259&4294967295,w=k+(C<<15&4294967295|C>>>17),C=v+(k^(w|~_))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(w+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+w&4294967295,T.g[3]=T.g[3]+k&4294967295}s.prototype.v=function(T,_){_===void 0&&(_=T.length);const v=_-this.blockSize,S=this.C;let w=this.h,k=0;for(;k<_;){if(w==0)for(;k<=v;)r(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<_;)if(S[w++]=T.charCodeAt(k++),w==this.blockSize){r(this,S),w=0;break}}else for(;k<_;)if(S[w++]=T[k++],w==this.blockSize){r(this,S),w=0;break}}this.h=w,this.o+=_},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var v=T.length-8;v<T.length;++v)T[v]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,v=0;v<4;++v)for(let S=0;S<32;S+=8)T[_++]=this.g[v]>>>S&255;return T};function i(T,_){var v=l;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=_(T)}function a(T,_){this.h=_;const v=[];let S=!0;for(let w=T.length-1;w>=0;w--){const k=T[w]|0;S&&k==_||(v[w]=k,S=!1)}this.g=v}var l={};function c(T){return-128<=T&&T<128?i(T,function(_){return new a([_|0],_<0?-1:0)}):new a([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return D(d(-T));const _=[];let v=1;for(let S=0;T>=v;S++)_[S]=T/v|0,v*=4294967296;return new a(_,0)}function f(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return D(f(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=d(Math.pow(_,8));let S=m;for(let k=0;k<T.length;k+=8){var w=Math.min(8,T.length-k);const C=parseInt(T.substring(k,k+w),_);w<8?(w=d(Math.pow(_,w)),S=S.j(w).add(d(C))):(S=S.j(v),S=S.add(d(C)))}return S}var m=c(0),p=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(I(this))return-D(this).m();let T=0,_=1;for(let v=0;v<this.g.length;v++){const S=this.i(v);T+=(S>=0?S:4294967296+S)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R(this))return"0";if(I(this))return"-"+D(this).toString(T);const _=d(Math.pow(T,6));var v=this;let S="";for(;;){const w=j(v,_).g;v=A(v,w.j(_));let k=((v.g.length>0?v.g[0]:v.h)>>>0).toString(T);if(v=w,R(v))return k+S;for(;k.length<6;)k="0"+k;S=k+S}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function R(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=A(this,T),I(T)?-1:R(T)?0:1};function D(T){const _=T.g.length,v=[];for(let S=0;S<_;S++)v[S]=~T.g[S];return new a(v,~T.h).add(p)}t.abs=function(){return I(this)?D(this):this},t.add=function(T){const _=Math.max(this.g.length,T.g.length),v=[];let S=0;for(let w=0;w<=_;w++){let k=S+(this.i(w)&65535)+(T.i(w)&65535),C=(k>>>16)+(this.i(w)>>>16)+(T.i(w)>>>16);S=C>>>16,k&=65535,C&=65535,v[w]=C<<16|k}return new a(v,v[v.length-1]&-2147483648?-1:0)};function A(T,_){return T.add(D(_))}t.j=function(T){if(R(this)||R(T))return m;if(I(this))return I(T)?D(this).j(D(T)):D(D(this).j(T));if(I(T))return D(this.j(D(T)));if(this.l(y)<0&&T.l(y)<0)return d(this.m()*T.m());const _=this.g.length+T.g.length,v=[];for(var S=0;S<2*_;S++)v[S]=0;for(S=0;S<this.g.length;S++)for(let w=0;w<T.g.length;w++){const k=this.i(S)>>>16,C=this.i(S)&65535,ae=T.i(w)>>>16,he=T.i(w)&65535;v[2*S+2*w]+=C*he,b(v,2*S+2*w),v[2*S+2*w+1]+=k*he,b(v,2*S+2*w+1),v[2*S+2*w+1]+=C*ae,b(v,2*S+2*w+1),v[2*S+2*w+2]+=k*ae,b(v,2*S+2*w+2)}for(T=0;T<_;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=_;T<2*_;T++)v[T]=0;return new a(v,0)};function b(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function x(T,_){this.g=T,this.h=_}function j(T,_){if(R(_))throw Error("division by zero");if(R(T))return new x(m,m);if(I(T))return _=j(D(T),_),new x(D(_.g),D(_.h));if(I(_))return _=j(T,D(_)),new x(D(_.g),_.h);if(T.g.length>30){if(I(T)||I(_))throw Error("slowDivide_ only works with positive integers.");for(var v=p,S=_;S.l(T)<=0;)v=U(v),S=U(S);var w=B(v,1),k=B(S,1);for(S=B(S,2),v=B(v,2);!R(S);){var C=k.add(S);C.l(T)<=0&&(w=w.add(v),k=C),S=B(S,1),v=B(v,1)}return _=A(T,w.j(_)),new x(w,_)}for(w=m;T.l(_)>=0;){for(v=Math.max(1,Math.floor(T.m()/_.m())),S=Math.ceil(Math.log(v)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),k=d(v),C=k.j(_);I(C)||C.l(T)>0;)v-=S,k=d(v),C=k.j(_);R(k)&&(k=p),w=w.add(k),T=A(T,C)}return new x(w,T)}t.B=function(T){return j(this,T).h},t.and=function(T){const _=Math.max(this.g.length,T.g.length),v=[];for(let S=0;S<_;S++)v[S]=this.i(S)&T.i(S);return new a(v,this.h&T.h)},t.or=function(T){const _=Math.max(this.g.length,T.g.length),v=[];for(let S=0;S<_;S++)v[S]=this.i(S)|T.i(S);return new a(v,this.h|T.h)},t.xor=function(T){const _=Math.max(this.g.length,T.g.length),v=[];for(let S=0;S<_;S++)v[S]=this.i(S)^T.i(S);return new a(v,this.h^T.h)};function U(T){const _=T.g.length+1,v=[];for(let S=0;S<_;S++)v[S]=T.i(S)<<1|T.i(S-1)>>>31;return new a(v,T.h)}function B(T,_){const v=_>>5;_%=32;const S=T.g.length-v,w=[];for(let k=0;k<S;k++)w[k]=_>0?T.i(k+v)>>>_|T.i(k+v+1)<<32-_:T.i(k+v);return new a(w,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Zw=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,yr=a}).apply(typeof Ev<"u"?Ev:typeof self<"u"?self:typeof window<"u"?window:{});var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e1,Cl,t1,tu,Im,n1,s1,r1;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nc=="object"&&Nc];for(var h=0;h<o.length;++h){var g=o[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(o,h){if(h)e:{var g=s;o=o.split(".");for(var E=0;E<o.length-1;E++){var M=o[E];if(!(M in g))break e;g=g[M]}o=o[o.length-1],E=g[o],h=h(E),h!=E&&h!=null&&e(g,o,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(o){return o||function(h){var g=[],E;for(E in h)Object.prototype.hasOwnProperty.call(h,E)&&g.push([E,h[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function c(o,h,g){return o.call.apply(o.bind,arguments)}function d(o,h,g){return d=c,d.apply(null,arguments)}function f(o,h){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),o.apply(this,E)}}function m(o,h){function g(){}g.prototype=h.prototype,o.Z=h.prototype,o.prototype=new g,o.prototype.constructor=o,o.Ob=function(E,M,L){for(var X=Array(arguments.length-2),de=2;de<arguments.length;de++)X[de-2]=arguments[de];return h.prototype[M].apply(E,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function y(o){const h=o.length;if(h>0){const g=Array(h);for(let E=0;E<h;E++)g[E]=o[E];return g}return[]}function R(o,h){for(let E=1;E<arguments.length;E++){const M=arguments[E];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=o.length||0;const L=M.length||0;o.length=g+L;for(let X=0;X<L;X++)o[g+X]=M[X]}else o.push(M)}}class I{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function D(o){a.setTimeout(()=>{throw o},0)}function A(){var o=T;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class b{constructor(){this.h=this.g=null}add(h,g){const E=x.get();E.set(h,g),this.h?this.h.next=E:this.g=E,this.h=E}}var x=new I(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let U,B=!1,T=new b,_=()=>{const o=Promise.resolve(void 0);U=()=>{o.then(v)}};function v(){for(var o;o=A();){try{o.h.call(o.g)}catch(g){D(g)}var h=x;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}B=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};a.addEventListener("test",g,h),a.removeEventListener("test",g,h)}catch{}return o}();function C(o){return/^[\s\xa0]*$/.test(o)}function ae(o,h){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}m(ae,w),ae.prototype.init=function(o,h){const g=this.type=o.type,E=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(g=="mouseover"?h=o.fromElement:g=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),z=0;function V(o,h,g,E,M){this.listener=o,this.proxy=null,this.src=h,this.type=g,this.capture=!!E,this.ha=M,this.key=++z,this.da=this.fa=!1}function O(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function $(o,h,g){for(const E in o)h.call(g,o[E],E,o)}function Y(o,h){for(const g in o)h.call(void 0,o[g],g,o)}function fe(o){const h={};for(const g in o)h[g]=o[g];return h}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(o,h){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)o[g]=E[g];for(let L=0;L<ne.length;L++)g=ne[L],Object.prototype.hasOwnProperty.call(E,g)&&(o[g]=E[g])}}function K(o){this.src=o,this.g={},this.h=0}K.prototype.add=function(o,h,g,E,M){const L=o.toString();o=this.g[L],o||(o=this.g[L]=[],this.h++);const X=P(o,h,E,M);return X>-1?(h=o[X],g||(h.fa=!1)):(h=new V(h,this.src,L,!!E,M),h.fa=g,o.push(h)),h};function Z(o,h){const g=h.type;if(g in o.g){var E=o.g[g],M=Array.prototype.indexOf.call(E,h,void 0),L;(L=M>=0)&&Array.prototype.splice.call(E,M,1),L&&(O(h),o.g[g].length==0&&(delete o.g[g],o.h--))}}function P(o,h,g,E){for(let M=0;M<o.length;++M){const L=o[M];if(!L.da&&L.listener==h&&L.capture==!!g&&L.ha==E)return M}return-1}var Q="closure_lm_"+(Math.random()*1e6|0),G={};function J(o,h,g,E,M){if(Array.isArray(h)){for(let L=0;L<h.length;L++)J(o,h[L],g,E,M);return null}return g=cy(g),o&&o[he]?o.J(h,g,l(E)?!!E.capture:!1,M):Ge(o,h,g,!1,E,M)}function Ge(o,h,g,E,M,L){if(!h)throw Error("Invalid event type");const X=l(M)?!!M.capture:!!M;let de=sh(o);if(de||(o[Q]=de=new K(o)),g=de.add(h,g,E,X,L),g.proxy)return g;if(E=kn(),g.proxy=E,E.src=o,E.listener=g,o.addEventListener)k||(M=X),M===void 0&&(M=!1),o.addEventListener(h.toString(),E,M);else if(o.attachEvent)o.attachEvent(Ri(h.toString()),E);else if(o.addListener&&o.removeListener)o.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function kn(){function o(g){return h.call(o.src,o.listener,g)}const h=nS;return o}function be(o,h,g,E,M){if(Array.isArray(h))for(var L=0;L<h.length;L++)be(o,h[L],g,E,M);else E=l(E)?!!E.capture:!!E,g=cy(g),o&&o[he]?(o=o.i,L=String(h).toString(),L in o.g&&(h=o.g[L],g=P(h,g,E,M),g>-1&&(O(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete o.g[L],o.h--)))):o&&(o=sh(o))&&(h=o.g[h.toString()],o=-1,h&&(o=P(h,g,E,M)),(g=o>-1?h[o]:null)&&Tn(g))}function Tn(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[he])Z(h.i,o);else{var g=o.type,E=o.proxy;h.removeEventListener?h.removeEventListener(g,E,o.capture):h.detachEvent?h.detachEvent(Ri(g),E):h.addListener&&h.removeListener&&h.removeListener(E),(g=sh(h))?(Z(g,o),g.h==0&&(g.src=null,h[Q]=null)):O(o)}}}function Ri(o){return o in G?G[o]:G[o]="on"+o}function nS(o,h){if(o.da)o=!0;else{h=new ae(h,this);const g=o.listener,E=o.ha||o.src;o.fa&&Tn(o),o=g.call(E,h)}return o}function sh(o){return o=o[Q],o instanceof K?o:null}var rh="__closure_events_fn_"+(Math.random()*1e9>>>0);function cy(o){return typeof o=="function"?o:(o[rh]||(o[rh]=function(h){return o.handleEvent(h)}),o[rh])}function It(){S.call(this),this.i=new K(this),this.M=this,this.G=null}m(It,S),It.prototype[he]=!0,It.prototype.removeEventListener=function(o,h,g,E){be(this,o,h,g,E)};function Mt(o,h){var g,E=o.G;if(E)for(g=[];E;E=E.G)g.push(E);if(o=o.M,E=h.type||h,typeof h=="string")h=new w(h,o);else if(h instanceof w)h.target=h.target||o;else{var M=h;h=new w(E,o),ke(h,M)}M=!0;let L,X;if(g)for(X=g.length-1;X>=0;X--)L=h.g=g[X],M=Wo(L,E,!0,h)&&M;if(L=h.g=o,M=Wo(L,E,!0,h)&&M,M=Wo(L,E,!1,h)&&M,g)for(X=0;X<g.length;X++)L=h.g=g[X],M=Wo(L,E,!1,h)&&M}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const g=o.g[h];for(let E=0;E<g.length;E++)O(g[E]);delete o.g[h],o.h--}}this.G=null},It.prototype.J=function(o,h,g,E){return this.i.add(String(o),h,!1,g,E)},It.prototype.K=function(o,h,g,E){return this.i.add(String(o),h,!0,g,E)};function Wo(o,h,g,E){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let M=!0;for(let L=0;L<h.length;++L){const X=h[L];if(X&&!X.da&&X.capture==g){const de=X.listener,dt=X.ha||X.src;X.fa&&Z(o.i,X),M=de.call(dt,E)!==!1&&M}}return M&&!E.defaultPrevented}function sS(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function uy(o){o.g=sS(()=>{o.g=null,o.i&&(o.i=!1,uy(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class rS extends S{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:uy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ja(o){S.call(this),this.h=o,this.g={}}m(Ja,S);var dy=[];function hy(o){$(o.g,function(h,g){this.g.hasOwnProperty(g)&&Tn(h)},o),o.g={}}Ja.prototype.N=function(){Ja.Z.N.call(this),hy(this)},Ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ih=a.JSON.stringify,iS=a.JSON.parse,aS=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function fy(){}function my(){}var Wa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ah(){w.call(this,"d")}m(ah,w);function lh(){w.call(this,"c")}m(lh,w);var Lr={},py=null;function Zo(){return py=py||new It}Lr.Ia="serverreachability";function gy(o){w.call(this,Lr.Ia,o)}m(gy,w);function Za(o){const h=Zo();Mt(h,new gy(h))}Lr.STAT_EVENT="statevent";function yy(o,h){w.call(this,Lr.STAT_EVENT,o),this.stat=h}m(yy,w);function Vt(o){const h=Zo();Mt(h,new yy(h,o))}Lr.Ja="timingevent";function _y(o,h){w.call(this,Lr.Ja,o),this.size=h}m(_y,w);function el(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function tl(){this.g=!0}tl.prototype.ua=function(){this.g=!1};function lS(o,h,g,E,M,L){o.info(function(){if(o.g)if(L){var X="",de=L.split("&");for(let De=0;De<de.length;De++){var dt=de[De].split("=");if(dt.length>1){const pt=dt[0];dt=dt[1];const On=pt.split("_");X=On.length>=2&&On[1]=="type"?X+(pt+"="+dt+"&"):X+(pt+"=redacted&")}}}else X=null;else X=L;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+h+`
`+g+`
`+X})}function oS(o,h,g,E,M,L,X){o.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+h+`
`+g+`
`+L+" "+X})}function Ii(o,h,g,E){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+uS(o,g)+(E?" "+E:"")})}function cS(o,h){o.info(function(){return"TIMEOUT: "+h})}tl.prototype.info=function(){};function uS(o,h){if(!o.g)return h;if(!h)return null;try{const L=JSON.parse(h);if(L){for(o=0;o<L.length;o++)if(Array.isArray(L[o])){var g=L[o];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var M=E[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<E.length;X++)E[X]=""}}}}return ih(L)}catch{return h}}var ec={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},by;function oh(){}m(oh,fy),oh.prototype.g=function(){return new XMLHttpRequest},by=new oh;function nl(o){return encodeURIComponent(String(o))}function dS(o){var h=1;o=o.split(":");const g=[];for(;h>0&&o.length;)g.push(o.shift()),h--;return o.length&&g.push(o.join(":")),g}function ks(o,h,g,E){this.j=o,this.i=h,this.l=g,this.S=E||1,this.V=new Ja(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xy}function xy(){this.i=null,this.g="",this.h=!1}var Ey={},ch={};function uh(o,h,g){o.M=1,o.A=nc(Dn(h)),o.u=g,o.R=!0,Ty(o,null)}function Ty(o,h){o.F=Date.now(),tc(o),o.B=Dn(o.A);var g=o.B,E=o.S;Array.isArray(E)||(E=[String(E)]),Vy(g.i,"t",E),o.C=0,g=o.j.L,o.h=new xy,o.g=e0(o.j,g?h:null,!o.u),o.P>0&&(o.O=new rS(d(o.Y,o,o.g),o.P)),h=o.V,g=o.g,E=o.ba;var M="readystatechange";Array.isArray(M)||(M&&(dy[0]=M.toString()),M=dy);for(let L=0;L<M.length;L++){const X=J(g,M[L],E||h.handleEvent,!1,h.h||h);if(!X)break;h.g[X.key]=X}h=o.J?fe(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),Za(),lS(o.i,o.v,o.B,o.l,o.S,o.u)}ks.prototype.ba=function(o){o=o.target;const h=this.O;h&&Ms(o)==3?h.j():this.Y(o)},ks.prototype.Y=function(o){try{if(o==this.g)e:{const de=Ms(this.g),dt=this.g.ya(),De=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||Hy(this.g)))){this.K||de!=4||dt==7||(dt==8||De<=0?Za(3):Za(2)),dh(this);var h=this.g.ca();this.X=h;var g=hS(this);if(this.o=h==200,oS(this.i,this.v,this.B,this.l,this.S,de,h),this.o){if(this.U&&!this.L){t:{if(this.g){var E,M=this.g;if((E=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(E)){var L=E;break t}}L=null}if(o=L)Ii(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hh(this,o);else{this.o=!1,this.m=3,Vt(12),Pr(this),sl(this);break e}}if(this.R){o=!0;let pt;for(;!this.K&&this.C<g.length;)if(pt=fS(this,g),pt==ch){de==4&&(this.m=4,Vt(14),o=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Ey){this.m=4,Vt(15),Ii(this.i,this.l,g,"[Invalid Chunk]"),o=!1;break}else Ii(this.i,this.l,pt,null),hh(this,pt);if(wy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||g.length!=0||this.h.h||(this.m=1,Vt(16),o=!1),this.o=this.o&&o,!o)Ii(this.i,this.l,g,"[Invalid Chunked Response]"),Pr(this),sl(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),bh(X),X.P=!0,Vt(11))}}else Ii(this.i,this.l,g,null),hh(this,g);de==4&&Pr(this),this.o&&!this.K&&(de==4?Xy(this.j,this):(this.o=!1,tc(this)))}else NS(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Pr(this),sl(this)}}}catch{}finally{}};function hS(o){if(!wy(o))return o.g.la();const h=Hy(o.g);if(h==="")return"";let g="";const E=h.length,M=Ms(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Pr(o),sl(o),"";o.h.i=new a.TextDecoder}for(let L=0;L<E;L++)o.h.h=!0,g+=o.h.i.decode(h[L],{stream:!(M&&L==E-1)});return h.length=0,o.h.g+=g,o.C=0,o.h.g}function wy(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function fS(o,h){var g=o.C,E=h.indexOf(`
`,g);return E==-1?ch:(g=Number(h.substring(g,E)),isNaN(g)?Ey:(E+=1,E+g>h.length?ch:(h=h.slice(E,E+g),o.C=E+g,h)))}ks.prototype.cancel=function(){this.K=!0,Pr(this)};function tc(o){o.T=Date.now()+o.H,Ay(o,o.H)}function Ay(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=el(d(o.aa,o),h)}function dh(o){o.D&&(a.clearTimeout(o.D),o.D=null)}ks.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(cS(this.i,this.B),this.M!=2&&(Za(),Vt(17)),Pr(this),this.m=2,sl(this)):Ay(this,this.T-o)};function sl(o){o.j.I==0||o.K||Xy(o.j,o)}function Pr(o){dh(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,hy(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function hh(o,h){try{var g=o.j;if(g.I!=0&&(g.g==o||fh(g.h,o))){if(!o.L&&fh(g.h,o)&&g.I==3){try{var E=g.Ba.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<o.F)lc(g),ic(g);else break e;vh(g),Vt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=el(d(g.Va,g),6e3));Cy(g.h)<=1&&g.ta&&(g.ta=void 0)}else Br(g,11)}else if((o.L||g.g==o)&&lc(g),!C(h))for(M=g.Ba.g.parse(h),h=0;h<M.length;h++){let De=M[h];const pt=De[0];if(!(pt<=g.K))if(g.K=pt,De=De[1],g.I==2)if(De[0]=="c"){g.M=De[1],g.ba=De[2];const On=De[3];On!=null&&(g.ka=On,g.j.info("VER="+g.ka));const qr=De[4];qr!=null&&(g.za=qr,g.j.info("SVER="+g.za));const Vs=De[5];Vs!=null&&typeof Vs=="number"&&Vs>0&&(E=1.5*Vs,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Us=o.g;if(Us){const cc=Us.g?Us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cc){var L=E.h;L.g||cc.indexOf("spdy")==-1&&cc.indexOf("quic")==-1&&cc.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(mh(L,L.h),L.h=null))}if(E.G){const xh=Us.g?Us.g.getResponseHeader("X-HTTP-Session-Id"):null;xh&&(E.wa=xh,Ue(E.J,E.G,xh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-o.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var X=o;if(E.na=Zy(E,E.L?E.ba:null,E.W),X.L){Ry(E.h,X);var de=X,dt=E.O;dt&&(de.H=dt),de.D&&(dh(de),tc(de)),E.g=X}else $y(E);g.i.length>0&&ac(g)}else De[0]!="stop"&&De[0]!="close"||Br(g,7);else g.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Br(g,7):_h(g):De[0]!="noop"&&g.l&&g.l.qa(De),g.A=0)}}Za(4)}catch{}}var mS=class{constructor(o,h){this.g=o,this.map=h}};function Sy(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ny(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Cy(o){return o.h?1:o.g?o.g.size:0}function fh(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function mh(o,h){o.g?o.g.add(h):o.h=h}function Ry(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Sy.prototype.cancel=function(){if(this.i=Iy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Iy(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const g of o.g.values())h=h.concat(g.G);return h}return y(o.i)}var jy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pS(o,h){if(o){o=o.split("&");for(let g=0;g<o.length;g++){const E=o[g].indexOf("=");let M,L=null;E>=0?(M=o[g].substring(0,E),L=o[g].substring(E+1)):M=o[g],h(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ds(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof Ds?(this.l=o.l,rl(this,o.j),this.o=o.o,this.g=o.g,il(this,o.u),this.h=o.h,ph(this,Uy(o.i)),this.m=o.m):o&&(h=String(o).match(jy))?(this.l=!1,rl(this,h[1]||"",!0),this.o=al(h[2]||""),this.g=al(h[3]||"",!0),il(this,h[4]),this.h=al(h[5]||"",!0),ph(this,h[6]||"",!0),this.m=al(h[7]||"")):(this.l=!1,this.i=new ol(null,this.l))}Ds.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(ll(h,ky,!0),":");var g=this.g;return(g||h=="file")&&(o.push("//"),(h=this.o)&&o.push(ll(h,ky,!0),"@"),o.push(nl(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&o.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(ll(g,g.charAt(0)=="/"?_S:yS,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",ll(g,bS)),o.join("")},Ds.prototype.resolve=function(o){const h=Dn(this);let g=!!o.j;g?rl(h,o.j):g=!!o.o,g?h.o=o.o:g=!!o.g,g?h.g=o.g:g=o.u!=null;var E=o.h;if(g)il(h,o.u);else if(g=!!o.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var M=h.h.lastIndexOf("/");M!=-1&&(E=h.h.slice(0,M+1)+E)}if(M=E,M==".."||M==".")E="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){E=M.lastIndexOf("/",0)==0,M=M.split("/");const L=[];for(let X=0;X<M.length;){const de=M[X++];de=="."?E&&X==M.length&&L.push(""):de==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),E&&X==M.length&&L.push("")):(L.push(de),E=!0)}E=L.join("/")}else E=M}return g?h.h=E:g=o.i.toString()!=="",g?ph(h,Uy(o.i)):g=!!o.m,g&&(h.m=o.m),h};function Dn(o){return new Ds(o)}function rl(o,h,g){o.j=g?al(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function il(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function ph(o,h,g){h instanceof ol?(o.i=h,xS(o.i,o.l)):(g||(h=ll(h,vS)),o.i=new ol(h,o.l))}function Ue(o,h,g){o.i.set(h,g)}function nc(o){return Ue(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function al(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ll(o,h,g){return typeof o=="string"?(o=encodeURI(o).replace(h,gS),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function gS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ky=/[#\/\?@]/g,yS=/[#\?:]/g,_S=/[#\?]/g,vS=/[#\?@]/g,bS=/#/g;function ol(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function zr(o){o.g||(o.g=new Map,o.h=0,o.i&&pS(o.i,function(h,g){o.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=ol.prototype,t.add=function(o,h){zr(this),this.i=null,o=ji(this,o);let g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(h),this.h+=1,this};function Dy(o,h){zr(o),h=ji(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Oy(o,h){return zr(o),h=ji(o,h),o.g.has(h)}t.forEach=function(o,h){zr(this),this.g.forEach(function(g,E){g.forEach(function(M){o.call(h,M,E,this)},this)},this)};function My(o,h){zr(o);let g=[];if(typeof h=="string")Oy(o,h)&&(g=g.concat(o.g.get(ji(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)g=g.concat(o[h]);return g}t.set=function(o,h){return zr(this),this.i=null,o=ji(this,o),Oy(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=My(this,o),o.length>0?String(o[0]):h):h};function Vy(o,h,g){Dy(o,h),g.length>0&&(o.i=null,o.g.set(ji(o,h),y(g)),o.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let E=0;E<h.length;E++){var g=h[E];const M=nl(g);g=My(this,g);for(let L=0;L<g.length;L++){let X=M;g[L]!==""&&(X+="="+nl(g[L])),o.push(X)}}return this.i=o.join("&")};function Uy(o){const h=new ol;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function ji(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function xS(o,h){h&&!o.j&&(zr(o),o.i=null,o.g.forEach(function(g,E){const M=E.toLowerCase();E!=M&&(Dy(this,E),Vy(this,M,g))},o)),o.j=h}function ES(o,h){const g=new tl;if(a.Image){const E=new Image;E.onload=f(Os,g,"TestLoadImage: loaded",!0,h,E),E.onerror=f(Os,g,"TestLoadImage: error",!1,h,E),E.onabort=f(Os,g,"TestLoadImage: abort",!1,h,E),E.ontimeout=f(Os,g,"TestLoadImage: timeout",!1,h,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=o}else h(!1)}function TS(o,h){const g=new tl,E=new AbortController,M=setTimeout(()=>{E.abort(),Os(g,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:E.signal}).then(L=>{clearTimeout(M),L.ok?Os(g,"TestPingServer: ok",!0,h):Os(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Os(g,"TestPingServer: error",!1,h)})}function Os(o,h,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function wS(){this.g=new aS}function gh(o){this.i=o.Sb||null,this.h=o.ab||!1}m(gh,fy),gh.prototype.g=function(){return new sc(this.i,this.h)};function sc(o,h){It.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(sc,It),t=sc.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,ul(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cl(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ly(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ly(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?cl(this):ul(this),this.readyState==3&&Ly(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,cl(this))},t.Na=function(o){this.g&&(this.response=o,cl(this))},t.ga=function(){this.g&&cl(this)};function cl(o){o.readyState=4,o.l=null,o.j=null,o.B=null,ul(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=h.next();return o.join(`\r
`)};function ul(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Py(o){let h="";return $(o,function(g,E){h+=E,h+=":",h+=g,h+=`\r
`}),h}function yh(o,h,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Py(g),typeof o=="string"?g!=null&&nl(g):Ue(o,h,g))}function $e(o){It.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m($e,It);var AS=/^https?$/i,SS=["POST","PUT"];t=$e.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():by.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(L){zy(this,L);return}if(o=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const L of E.keys())g.set(L,E.get(L));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),M=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(SS,h,void 0)>=0)||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,X]of g)this.g.setRequestHeader(L,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(L){zy(this,L)}};function zy(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,By(o),rc(o)}function By(o){o.A||(o.A=!0,Mt(o,"complete"),Mt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Mt(this,"complete"),Mt(this,"abort"),rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rc(this,!0)),$e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?qy(this):this.Xa())},t.Xa=function(){qy(this)};function qy(o){if(o.h&&typeof i<"u"){if(o.v&&Ms(o)==4)setTimeout(o.Ca.bind(o),0);else if(Mt(o,"readystatechange"),Ms(o)==4){o.h=!1;try{const L=o.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var E;if(E=L===0){let X=String(o.D).match(jy)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),E=!AS.test(X?X.toLowerCase():"")}g=E}if(g)Mt(o,"complete"),Mt(o,"success");else{o.o=6;try{var M=Ms(o)>2?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.ca()+"]",By(o)}}finally{rc(o)}}}}function rc(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const g=o.g;o.g=null,h||Mt(o,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ms(o){return o.g?o.g.readyState:0}t.ca=function(){try{return Ms(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),iS(h)}};function Hy(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function NS(o){const h={};o=(o.g&&Ms(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<o.length;E++){if(C(o[E]))continue;var g=dS(o[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=h[M]||[];h[M]=L,L.push(g)}Y(h,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(o,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||h}function Fy(o){this.za=0,this.i=[],this.j=new tl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=dl("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=dl("baseRetryDelayMs",5e3,o),this.Za=dl("retryDelaySeedMs",1e4,o),this.Ta=dl("forwardChannelMaxRetries",2,o),this.va=dl("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Sy(o&&o.concurrentRequestLimit),this.Ba=new wS,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Fy.prototype,t.ka=8,t.I=1,t.connect=function(o,h,g,E){Vt(0),this.W=o,this.H=h||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=Zy(this,null,this.W),ac(this)};function _h(o){if(Gy(o),o.I==3){var h=o.V++,g=Dn(o.J);if(Ue(g,"SID",o.M),Ue(g,"RID",h),Ue(g,"TYPE","terminate"),hl(o,g),h=new ks(o,o.j,h),h.M=2,h.A=nc(Dn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=h.A,g=!0),g||(h.g=e0(h.j,null),h.g.ea(h.A)),h.F=Date.now(),tc(h)}Wy(o)}function ic(o){o.g&&(bh(o),o.g.cancel(),o.g=null)}function Gy(o){ic(o),o.v&&(a.clearTimeout(o.v),o.v=null),lc(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ac(o){if(!Ny(o.h)&&!o.m){o.m=!0;var h=o.Ea;U||_(),B||(U(),B=!0),T.add(h,o),o.D=0}}function CS(o,h){return Cy(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=el(d(o.Ea,o,h),Jy(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const M=new ks(this,this.j,o);let L=this.o;if(this.U&&(L?(L=fe(L),ke(L,this.U)):L=this.U),this.u!==null||this.R||(M.J=L,L=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Qy(this,M,h),g=Dn(this.J),Ue(g,"RID",o),Ue(g,"CVER",22),this.G&&Ue(g,"X-HTTP-Session-Id",this.G),hl(this,g),L&&(this.R?h="headers="+nl(Py(L))+"&"+h:this.u&&yh(g,this.u,L)),mh(this.h,M),this.Ra&&Ue(g,"TYPE","init"),this.S?(Ue(g,"$req",h),Ue(g,"SID","null"),M.U=!0,uh(M,g,null)):uh(M,g,h),this.I=2}}else this.I==3&&(o?Ky(this,o):this.i.length==0||Ny(this.h)||Ky(this))};function Ky(o,h){var g;h?g=h.l:g=o.V++;const E=Dn(o.J);Ue(E,"SID",o.M),Ue(E,"RID",g),Ue(E,"AID",o.K),hl(o,E),o.u&&o.o&&yh(E,o.u,o.o),g=new ks(o,o.j,g,o.D+1),o.u===null&&(g.J=o.o),h&&(o.i=h.G.concat(o.i)),h=Qy(o,g,1e3),g.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),mh(o.h,g),uh(g,E,h)}function hl(o,h){o.H&&$(o.H,function(g,E){Ue(h,E,g)}),o.l&&$({},function(g,E){Ue(h,E,g)})}function Qy(o,h,g){g=Math.min(o.i.length,g);const E=o.l?d(o.l.Ka,o.l,o):null;e:{var M=o.i;let de=-1;for(;;){const dt=["count="+g];de==-1?g>0?(de=M[0].g,dt.push("ofs="+de)):de=0:dt.push("ofs="+de);let De=!0;for(let pt=0;pt<g;pt++){var L=M[pt].g;const On=M[pt].map;if(L-=de,L<0)de=Math.max(0,M[pt].g-100),De=!1;else try{L="req"+L+"_"||"";try{var X=On instanceof Map?On:Object.entries(On);for(const[qr,Vs]of X){let Us=Vs;l(Vs)&&(Us=ih(Vs)),dt.push(L+qr+"="+encodeURIComponent(Us))}}catch(qr){throw dt.push(L+"type="+encodeURIComponent("_badmap")),qr}}catch{E&&E(On)}}if(De){X=dt.join("&");break e}}X=void 0}return o=o.i.splice(0,g),h.G=o,X}function $y(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;U||_(),B||(U(),B=!0),T.add(h,o),o.A=0}}function vh(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=el(d(o.Da,o),Jy(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Yy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=el(d(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),ic(this),Yy(this))};function bh(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Yy(o){o.g=new ks(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=Dn(o.na);Ue(h,"RID","rpc"),Ue(h,"SID",o.M),Ue(h,"AID",o.K),Ue(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Ue(h,"TO",o.ia),Ue(h,"TYPE","xmlhttp"),hl(o,h),o.u&&o.o&&yh(h,o.u,o.o),o.O&&(o.g.H=o.O);var g=o.g;o=o.ba,g.M=1,g.A=nc(Dn(h)),g.u=null,g.R=!0,Ty(g,o)}t.Va=function(){this.C!=null&&(this.C=null,ic(this),vh(this),Vt(19))};function lc(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Xy(o,h){var g=null;if(o.g==h){lc(o),bh(o),o.g=null;var E=2}else if(fh(o.h,h))g=h.G,Ry(o.h,h),E=1;else return;if(o.I!=0){if(h.o)if(E==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var M=o.D;E=Zo(),Mt(E,new _y(E,g)),ac(o)}else $y(o);else if(M=h.m,M==3||M==0&&h.X>0||!(E==1&&CS(o,h)||E==2&&vh(o)))switch(g&&g.length>0&&(h=o.h,h.i=h.i.concat(g)),M){case 1:Br(o,5);break;case 4:Br(o,10);break;case 3:Br(o,6);break;default:Br(o,2)}}}function Jy(o,h){let g=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(g*=2),g*h}function Br(o,h){if(o.j.info("Error code "+h),h==2){var g=d(o.bb,o),E=o.Ua;const M=!E;E=new Ds(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rl(E,"https"),nc(E),M?ES(E.toString(),g):TS(E.toString(),g)}else Vt(2);o.I=0,o.l&&o.l.pa(h),Wy(o),Gy(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Wy(o){if(o.I=0,o.ja=[],o.l){const h=Iy(o.h);(h.length!=0||o.i.length!=0)&&(R(o.ja,h),R(o.ja,o.i),o.h.i.length=0,y(o.i),o.i.length=0),o.l.oa()}}function Zy(o,h,g){var E=g instanceof Ds?Dn(g):new Ds(g);if(E.g!="")h&&(E.g=h+"."+E.g),il(E,E.u);else{var M=a.location;E=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;const L=new Ds(null);E&&rl(L,E),h&&(L.g=h),M&&il(L,M),g&&(L.h=g),E=L}return g=o.G,h=o.wa,g&&h&&Ue(E,g,h),Ue(E,"VER",o.ka),hl(o,E),E}function e0(o,h,g){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new $e(new gh({ab:g})):new $e(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function t0(){}t=t0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oc(){}oc.prototype.g=function(o,h){return new Xt(o,h)};function Xt(o,h){It.call(this),this.g=new Fy(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!C(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!C(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new ki(this)}m(Xt,It),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){_h(this.g)},Xt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.v&&(g={},g.__data__=ih(o),o=g);h.i.push(new mS(h.Ya++,o)),h.I==3&&ac(h)},Xt.prototype.N=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,Xt.Z.N.call(this)};function n0(o){ah.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const g in h){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}m(n0,ah);function s0(){lh.call(this),this.status=1}m(s0,lh);function ki(o){this.g=o}m(ki,t0),ki.prototype.ra=function(){Mt(this.g,"a")},ki.prototype.qa=function(o){Mt(this.g,new n0(o))},ki.prototype.pa=function(o){Mt(this.g,new s0)},ki.prototype.oa=function(){Mt(this.g,"b")},oc.prototype.createWebChannel=oc.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,r1=function(){return new oc},s1=function(){return Zo()},n1=Lr,Im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ec.NO_ERROR=0,ec.TIMEOUT=8,ec.HTTP_ERROR=6,tu=ec,vy.COMPLETE="complete",t1=vy,my.EventType=Wa,Wa.OPEN="a",Wa.CLOSE="b",Wa.ERROR="c",Wa.MESSAGE="d",It.prototype.listen=It.prototype.J,Cl=my,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,e1=$e}).apply(typeof Nc<"u"?Nc:typeof self<"u"?self:typeof window<"u"?window:{});const Tv="@firebase/firestore",wv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new ag("@firebase/firestore");function Li(){return mi.logLevel}function ee(t,...e){if(mi.logLevel<=ge.DEBUG){const n=e.map(yg);mi.debug(`Firestore (${Ka}): ${t}`,...n)}}function Ss(t,...e){if(mi.logLevel<=ge.ERROR){const n=e.map(yg);mi.error(`Firestore (${Ka}): ${t}`,...n)}}function Na(t,...e){if(mi.logLevel<=ge.WARN){const n=e.map(yg);mi.warn(`Firestore (${Ka}): ${t}`,...n)}}function yg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,i1(t,s,n)}function i1(t,e,n){let s=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ss(s),new Error(s)}function Se(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||i1(e,r,s)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class MD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VD{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ys,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ys)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Se(typeof s.accessToken=="string",31837,{l:s}),new a1(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class UD{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LD{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new UD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const s=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Av(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=zD(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function ye(t,e){return t<e?-1:t>e?1:0}function jm(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return pf(r)===pf(i)?ye(r,i):pf(r)?1:-1}return ye(t.length,e.length)}const BD=55296,qD=57343;function pf(t){const e=t.charCodeAt(0);return e>=BD&&e<=qD}function Ca(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="__name__";class Mn{constructor(e,n,s){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&re(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Mn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Mn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return ye(e.length,n.length)}static compareSegments(e,n){const s=Mn.isNumericId(e),r=Mn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Mn.extractNumericId(e).compare(Mn.extractNumericId(n)):jm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yr.fromString(e.substring(4,e.length-2))}}class Me extends Mn{construct(e,n,s){return new Me(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new W(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const HD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Mn{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return HD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sv}static keyField(){return new At([Sv])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new W(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new W(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(s+=l,r++):(i(),r++)}if(i(),a)throw new W(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Me.fromString(e))}static fromName(e){return new te(Me.fromString(e).popFirst(5))}static empty(){return new te(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e,n){if(!n)throw new W(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FD(t,e,n,s){if(e===!0&&s===!0)throw new W(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nv(t){if(!te.isDocumentKey(t))throw new W(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cv(t){if(te.isDocumentKey(t))throw new W(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function o1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vd(t);throw new W(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function Go(t,e){if(!o1(t))throw new W(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const a=t[s];if(r&&typeof a!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new W(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=-62135596800,Iv=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Iv);return new ze(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Rv)throw new W(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Go(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:ut("string",ze._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new ze(0,0))}static max(){return new le(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=-1;function GD(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=le.fromTimestamp(s===1e9?new ze(n+1,0):new ze(n,s));return new wr(r,te.empty(),e)}function KD(t){return new wr(t.readTime,t.key,vo)}class wr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new wr(le.min(),te.empty(),vo)}static max(){return new wr(le.max(),te.empty(),vo)}}function QD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==$D)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,s)=>{n(e)})}static reject(e){return new F((n,s)=>{s(e)})}static waitFor(e){return new F((n,s)=>{let r=0,i=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++i,a&&i===r&&n()},c=>s(c))}),a=!0,i===r&&n()})}static or(e){let n=F.resolve(!1);for(const s of e)n=n.next(r=>r?F.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new F((s,r)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{a[d]=f,++l,l===i&&s(a)},f=>r(f))}})}static doWhile(e,n){return new F((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function XD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $a(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ud.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=-1;function Ld(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function JD(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="";function WD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jv(e)),e=ZD(t.get(n),e);return jv(e)}function ZD(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case c1:n+="";break;default:n+=i}}return n}function jv(t){return t+c1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function u1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cc(this.root,e,this.comparator,!0)}}class Cc{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Et.RED,this.left=r??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Et(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Et.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new tn([])}unionWith(e){let n=new ft(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new d1("Invalid base64 string: "+i):i}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const eO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=eO.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="server_timestamp",f1="__type__",m1="__previous_value__",p1="__local_write_time__";function bg(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[f1])==null?void 0:s.stringValue)===h1}function Pd(t){const e=t.mapValue.fields[m1];return bg(e)?Pd(e):e}function bo(t){const e=Ar(t.mapValue.fields[p1].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,s,r,i,a,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const Yu="(default)";class xo{constructor(e,n){this.projectId=e,this.database=n||Yu}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database===Yu}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="__type__",nO="__max__",Rc={mapValue:{}},y1="__vector__",Xu="value";function Nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bg(t)?4:rO(t)?9007199254740991:sO(t)?10:11:re(28295,{value:t})}function Yn(t,e){if(t===e)return!0;const n=Nr(t);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bo(t).isEqual(bo(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ar(r.timestampValue),l=Ar(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Sr(r.bytesValue).isEqual(Sr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return et(r.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return et(r.integerValue)===et(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=et(r.doubleValue),l=et(i.doubleValue);return a===l?$u(a)===$u(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ca(t.arrayValue.values||[],e.arrayValue.values||[],Yn);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(kv(a)!==kv(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Yn(a[c],l[c])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function Eo(t,e){return(t.values||[]).find(n=>Yn(n,e))!==void 0}function Ra(t,e){if(t===e)return 0;const n=Nr(t),s=Nr(e);if(n!==s)return ye(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=et(i.integerValue||i.doubleValue),c=et(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ov(t.timestampValue,e.timestampValue);case 4:return Ov(bo(t),bo(e));case 5:return jm(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Sr(i),c=Sr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=ye(l[d],c[d]);if(f!==0)return f}return ye(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ye(et(i.latitude),et(a.latitude));return l!==0?l:ye(et(i.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Mv(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,y,R,I;const l=i.fields||{},c=a.fields||{},d=(p=l[Xu])==null?void 0:p.arrayValue,f=(y=c[Xu])==null?void 0:y.arrayValue,m=ye(((R=d==null?void 0:d.values)==null?void 0:R.length)||0,((I=f==null?void 0:f.values)==null?void 0:I.length)||0);return m!==0?m:Mv(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Rc.mapValue&&a===Rc.mapValue)return 0;if(i===Rc.mapValue)return 1;if(a===Rc.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const p=jm(c[m],f[m]);if(p!==0)return p;const y=Ra(l[c[m]],d[f[m]]);if(y!==0)return y}return ye(c.length,f.length)}(t.mapValue,e.mapValue);default:throw re(23264,{he:n})}}function Ov(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Ar(t),s=Ar(e),r=ye(n.seconds,s.seconds);return r!==0?r:ye(n.nanos,s.nanos)}function Mv(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Ra(n[r],s[r]);if(i)return i}return ye(n.length,s.length)}function Ia(t){return km(t)}function km(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ar(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=km(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${km(n.fields[a])}`;return r+"}"}(t.mapValue):re(61005,{value:t})}function nu(t){switch(Nr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(t);return e?16+nu(e):16;case 5:return 2*t.stringValue.length;case 6:return Sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+nu(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Mr(s.fields,(i,a)=>{r+=i.length+nu(a)}),r}(t.mapValue);default:throw re(13486,{value:t})}}function Vv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dm(t){return!!t&&"integerValue"in t}function xg(t){return!!t&&"arrayValue"in t}function Uv(t){return!!t&&"nullValue"in t}function Lv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function su(t){return!!t&&"mapValue"in t}function sO(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[g1])==null?void 0:s.stringValue)===y1}function $l(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Mr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=$l(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$l(t.arrayValue.values[n]);return e}return{...t}}function rO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!su(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(n)}setAll(e){let n=At.emptyPath(),s={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}a?s[l.lastSegment()]=$l(a):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());su(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];su(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Mr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Kt($l(this.value))}}function _1(t){const e=[];return Mr(t.fields,(n,s)=>{const r=new At([n]);if(su(s)){const i=_1(s.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,s,r,i,a,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,le.min(),le.min(),le.min(),Kt.empty(),0)}static newFoundDocument(e,n,s,r){return new Dt(e,1,n,le.min(),s,r,0)}static newNoDocument(e,n){return new Dt(e,2,n,le.min(),le.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,le.min(),le.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.position=e,this.inclusive=n}}function Pv(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?s=te.comparator(te.fromName(a.referenceValue),n.key):s=Ra(a,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function zv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n="asc"){this.field=e,this.dir=n}}function iO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{}class ot extends v1{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new lO(e,n,s):n==="array-contains"?new uO(e,s):n==="in"?new dO(e,s):n==="not-in"?new hO(e,s):n==="array-contains-any"?new fO(e,s):new ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new oO(e,s):new cO(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ra(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rn extends v1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Rn(e,n)}matches(e){return b1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b1(t){return t.op==="and"}function x1(t){return aO(t)&&b1(t)}function aO(t){for(const e of t.filters)if(e instanceof Rn)return!1;return!0}function Om(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+Ia(t.value);if(x1(t))return t.filters.map(e=>Om(e)).join(",");{const e=t.filters.map(n=>Om(n)).join(",");return`${t.op}(${e})`}}function E1(t,e){return t instanceof ot?function(s,r){return r instanceof ot&&s.op===r.op&&s.field.isEqual(r.field)&&Yn(s.value,r.value)}(t,e):t instanceof Rn?function(s,r){return r instanceof Rn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,l)=>i&&E1(a,r.filters[l]),!0):!1}(t,e):void re(19439)}function T1(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Ia(n.value)}`}(t):t instanceof Rn?function(n){return n.op.toString()+" {"+n.getFilters().map(T1).join(" ,")+"}"}(t):"Filter"}class lO extends ot{constructor(e,n,s){super(e,n,s),this.key=te.fromName(s.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class oO extends ot{constructor(e,n){super(e,"in",n),this.keys=w1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cO extends ot{constructor(e,n){super(e,"not-in",n),this.keys=w1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function w1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>te.fromName(s.referenceValue))}class uO extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xg(n)&&Eo(n.arrayValue,this.value)}}class dO extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Eo(this.value.arrayValue,n)}}class hO extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Eo(this.value.arrayValue,n)}}class fO extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Eo(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n=null,s=[],r=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Bv(t,e=null,n=[],s=[],r=null,i=null,a=null){return new mO(t,e,n,s,r,i,a)}function Eg(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Om(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ld(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ia(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ia(s)).join(",")),e.Te=n}return e.Te}function Tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!E1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zv(t.startAt,e.startAt)&&zv(t.endAt,e.endAt)}function Mm(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n=null,s=[],r=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pO(t,e,n,s,r,i,a,l){return new Ya(t,e,n,s,r,i,a,l)}function zd(t){return new Ya(t)}function qv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function A1(t){return t.collectionGroup!==null}function Yl(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ft(At.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new To(i,s))}),n.has(At.keyField().canonicalString())||e.Ie.push(new To(At.keyField(),s))}return e.Ie}function Fn(t){const e=oe(t);return e.Ee||(e.Ee=gO(e,Yl(t))),e.Ee}function gO(t,e){if(t.limitType==="F")return Bv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new To(r.field,i)});const n=t.endAt?new Ju(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ju(t.startAt.position,t.startAt.inclusive):null;return Bv(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Vm(t,e){const n=t.filters.concat([e]);return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Um(t,e,n){return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bd(t,e){return Tg(Fn(t),Fn(e))&&t.limitType===e.limitType}function S1(t){return`${Eg(Fn(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>T1(r)).join(", ")}]`),Ld(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Ia(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Ia(r)).join(",")),`Target(${s})`}(Fn(t))}; limitType=${t.limitType})`}function qd(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):te.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Yl(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(a,l,c){const d=Pv(a,l,c);return a.inclusive?d<=0:d<0}(s.startAt,Yl(s),r)||s.endAt&&!function(a,l,c){const d=Pv(a,l,c);return a.inclusive?d>=0:d>0}(s.endAt,Yl(s),r))}(t,e)}function yO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function N1(t){return(e,n)=>{let s=!1;for(const r of Yl(t)){const i=_O(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function _O(t,e,n){const s=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Ra(c,d):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return u1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=new Qe(te.comparator);function Ns(){return vO}const C1=new Qe(te.comparator);function Rl(...t){let e=C1;for(const n of t)e=e.insert(n.key,n);return e}function R1(t){let e=C1;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Yr(){return Xl()}function I1(){return Xl()}function Xl(){return new Si(t=>t.toString(),(t,e)=>t.isEqual(e))}const bO=new Qe(te.comparator),xO=new ft(te.comparator);function _e(...t){let e=xO;for(const n of t)e=e.add(n);return e}const EO=new ft(ye);function TO(){return EO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function j1(t){return{integerValue:""+t}}function wO(t,e){return JD(e)?j1(e):wg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this._=void 0}}function AO(t,e,n){return t instanceof wo?function(r,i){const a={fields:{[f1]:{stringValue:h1},[p1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&bg(i)&&(i=Pd(i)),i&&(a.fields[m1]=i),{mapValue:a}}(n,e):t instanceof Ao?D1(t,e):t instanceof So?O1(t,e):function(r,i){const a=k1(r,i),l=Hv(a)+Hv(r.Ae);return Dm(a)&&Dm(r.Ae)?j1(l):wg(r.serializer,l)}(t,e)}function SO(t,e,n){return t instanceof Ao?D1(t,e):t instanceof So?O1(t,e):n}function k1(t,e){return t instanceof Wu?function(s){return Dm(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class wo extends Hd{}class Ao extends Hd{constructor(e){super(),this.elements=e}}function D1(t,e){const n=M1(e);for(const s of t.elements)n.some(r=>Yn(r,s))||n.push(s);return{arrayValue:{values:n}}}class So extends Hd{constructor(e){super(),this.elements=e}}function O1(t,e){let n=M1(e);for(const s of t.elements)n=n.filter(r=>!Yn(r,s));return{arrayValue:{values:n}}}class Wu extends Hd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hv(t){return et(t.integerValue||t.doubleValue)}function M1(t){return xg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n){this.field=e,this.transform=n}}function CO(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Ao&&r instanceof Ao||s instanceof So&&r instanceof So?Ca(s.elements,r.elements,Yn):s instanceof Wu&&r instanceof Wu?Yn(s.Ae,r.Ae):s instanceof wo&&r instanceof wo}(t.transform,e.transform)}class RO{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ru(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fd{}function V1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new L1(t.key,Gn.none()):new Ko(t.key,t.data,Gn.none());{const n=t.data,s=Kt.empty();let r=new ft(At.comparator);for(let i of e.fields)if(!r.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new Vr(t.key,s,new tn(r.toArray()),Gn.none())}}function IO(t,e,n){t instanceof Ko?function(r,i,a){const l=r.value.clone(),c=Gv(r.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(r,i,a){if(!ru(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Gv(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(U1(r)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Jl(t,e,n,s){return t instanceof Ko?function(i,a,l,c){if(!ru(i.precondition,a))return l;const d=i.value.clone(),f=Kv(i.fieldTransforms,c,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Vr?function(i,a,l,c){if(!ru(i.precondition,a))return l;const d=Kv(i.fieldTransforms,c,a),f=a.data;return f.setAll(U1(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(i,a,l){return ru(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function jO(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=k1(s.transform,r||null);i!=null&&(n===null&&(n=Kt.empty()),n.set(s.field,i))}return n||null}function Fv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ca(s,r,(i,a)=>CO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ko extends Fd{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vr extends Fd{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function U1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Gv(t,e,n){const s=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],a=i.transform,l=e.data.field(i.field);s.set(i.field,SO(a,l,n[r]))}return s}function Kv(t,e,n){const s=new Map;for(const r of t){const i=r.transform,a=n.data.field(r.field);s.set(r.field,AO(i,a,e))}return s}class L1 extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kO extends Fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&IO(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Jl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=I1();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(r.key)?null:l;const c=V1(a,l);c!==null&&s.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(le.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,(n,s)=>Fv(n,s))&&Ca(this.baseMutations,e.baseMutations,(n,s)=>Fv(n,s))}}class Ag{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Se(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return bO}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new Ag(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,Te;function VO(t){switch(t){case q.OK:return re(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function P1(t){if(t===void 0)return Ss("GRPC error has no .code"),q.UNKNOWN;switch(t){case rt.OK:return q.OK;case rt.CANCELLED:return q.CANCELLED;case rt.UNKNOWN:return q.UNKNOWN;case rt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case rt.INTERNAL:return q.INTERNAL;case rt.UNAVAILABLE:return q.UNAVAILABLE;case rt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case rt.NOT_FOUND:return q.NOT_FOUND;case rt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case rt.ABORTED:return q.ABORTED;case rt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case rt.DATA_LOSS:return q.DATA_LOSS;default:return re(39323,{code:t})}}(Te=rt||(rt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=new yr([4294967295,4294967295],0);function Qv(t){const e=UO().encode(t),n=new Zw;return n.update(e),new Uint8Array(n.digest())}function $v(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yr([n,s],0),new yr([r,i],0)]}class Sg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Il(`Invalid padding: ${n}`);if(s<0)throw new Il(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Il(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=yr.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(yr.fromNumber(s)));return r.compare(LO)===1&&(r=new yr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qv(e),[s,r]=$v(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(s,r,i);if(!this.we(a))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Sg(i,r,n);return s.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Qv(e),[s,r]=$v(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(s,r,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Qo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Gd(le.min(),r,new Qe(ye),Ns(),_e())}}class Qo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Qo(s,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class z1{constructor(e,n){this.targetId=e,this.Ce=n}}class B1{constructor(e,n,s=Ct.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Yv{constructor(){this.ve=0,this.Fe=Xv(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),s=_e();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:re(38017,{changeType:i})}}),new Qo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Xv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=Ic(),this.He=Ic(),this.Ye=new Qe(ye)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Mm(i))if(s===0){const a=new te(i.path);this.et(n,a,Dt.newNoDocument(a,le.min()))}else Se(s===1,20013,{expectedCount:s});else{const a=this._t(n);if(a!==s){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let a,l;try{a=Sr(s).toUint8Array()}catch(c){if(c instanceof d1)return Na("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Sg(a,r,i)}catch(c){return Na(c instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Mm(l.target)){const c=new te(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Dt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let s=_e();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const r=new Gd(e,n,this.Ye,this.je,s);return this.je=Ns(),this.Je=Ic(),this.He=Ic(),this.Ye=new Qe(ye),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(ye),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ic(){return new Qe(te.comparator)}function Xv(){return new Qe(te.comparator)}const zO={asc:"ASCENDING",desc:"DESCENDING"},BO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qO={and:"AND",or:"OR"};class HO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lm(t,e){return t.useProto3Json||Ld(e)?e:{value:e}}function Zu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FO(t,e){return Zu(t,e.toTimestamp())}function Kn(t){return Se(!!t,49232),le.fromTimestamp(function(n){const s=Ar(n);return new ze(s.seconds,s.nanos)}(t))}function Ng(t,e){return Pm(t,e).canonicalString()}function Pm(t,e){const n=function(r){return new Me(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function H1(t){const e=Me.fromString(t);return Se($1(e),10190,{key:e.toString()}),e}function zm(t,e){return Ng(t.databaseId,e.path)}function gf(t,e){const n=H1(e);if(n.get(1)!==t.databaseId.projectId)throw new W(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(G1(n))}function F1(t,e){return Ng(t.databaseId,e)}function GO(t){const e=H1(t);return e.length===4?Me.emptyPath():G1(e)}function Bm(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G1(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Jv(t,e,n){return{name:zm(t,e),fields:n.value.mapValue.fields}}function KO(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Se(f===void 0||typeof f=="string",58123),Ct.fromBase64String(f||"")):(Se(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ct.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?q.UNKNOWN:P1(d.code);return new W(f,d.message||"")}(a);n=new B1(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=gf(t,s.document.name),i=Kn(s.document.updateTime),a=s.document.createTime?Kn(s.document.createTime):le.min(),l=new Kt({mapValue:{fields:s.document.fields}}),c=Dt.newFoundDocument(r,i,a,l),d=s.targetIds||[],f=s.removedTargetIds||[];n=new iu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=gf(t,s.document),i=s.readTime?Kn(s.readTime):le.min(),a=Dt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new iu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=gf(t,s.document),i=s.removedTargetIds||[];n=new iu([],i,r,null)}else{if(!("filter"in e))return re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new MO(r,i),l=s.targetId;n=new z1(l,a)}}return n}function QO(t,e){let n;if(e instanceof Ko)n={update:Jv(t,e.key,e.value)};else if(e instanceof L1)n={delete:zm(t,e.key)};else if(e instanceof Vr)n={update:Jv(t,e.key,e.data),updateMask:n6(e.fieldMask)};else{if(!(e instanceof kO))return re(16599,{Vt:e.type});n={verify:zm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,a){const l=a.transform;if(l instanceof wo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ao)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof So)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw re(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:FO(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function $O(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(r,i){let a=r.updateTime?Kn(r.updateTime):Kn(i);return a.isEqual(le.min())&&(a=Kn(i)),new RO(a,r.transformResults||[])}(n,e))):[]}function YO(t,e){return{documents:[F1(t,e.path)]}}function XO(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=F1(t,r);const i=function(d){if(d.length!==0)return Q1(Rn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:zi(p.field),direction:ZO(p.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Lm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:r}}function JO(t){let e=GO(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Se(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const p=K1(m);return p instanceof Rn&&x1(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(R){return new To(Bi(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Ld(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(m){const p=!!m.before,y=m.values||[];return new Ju(y,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new Ju(y,p)}(n.endAt)),pO(e,r,a,i,l,"F",c,d)}function WO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function K1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Bi(n.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Bi(n.unaryFilter.field);return ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bi(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bi(n.unaryFilter.field);return ot.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Bi(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rn.create(n.compositeFilter.filters.map(s=>K1(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function ZO(t){return zO[t]}function e6(t){return BO[t]}function t6(t){return qO[t]}function zi(t){return{fieldPath:t.canonicalString()}}function Bi(t){return At.fromServerFormat(t.fieldPath)}function Q1(t){return t instanceof ot?function(n){if(n.op==="=="){if(Lv(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NAN"}};if(Uv(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lv(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NAN"}};if(Uv(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zi(n.field),op:e6(n.op),value:n.value}}}(t):t instanceof Rn?function(n){const s=n.getFilters().map(r=>Q1(r));return s.length===1?s[0]:{compositeFilter:{op:t6(n.op),filters:s}}}(t):re(54877,{filter:t})}function n6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,s,r,i=le.min(),a=le.min(),l=Ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.yt=e}}function r6(t){const e=JO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.Cn=new a6}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(wr.min())}updateCollectionGroup(e,n,s){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class a6{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ft(Me.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ft(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y1=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(Y1,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ja(0)}static cr(){return new ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="LruGarbageCollector",l6=1048576;function eb([t,e],[n,s]){const r=ye(t,n);return r===0?ye(e,s):r}class o6{constructor(e){this.Ir=e,this.buffer=new ft(eb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();eb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c6{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(Zv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$a(n)?ee(Zv,"Ignoring IndexedDB error during garbage collection: ",n):await Qa(n)}await this.Vr(3e5)})}}class u6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Ud.ce);const s=new o6(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Wv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,a,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),Li()<=ge.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function d6(t,e){return new u6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(){this.changes=new Si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?F.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Jl(s.mutation,r,tn.empty(),ze.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,_e()).next(()=>s))}getLocalViewOfDocuments(e,n,s=_e()){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let a=Rl();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,_e()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,s,r){let i=Ns();const a=Xl(),l=function(){return Xl()}();return n.forEach((c,d)=>{const f=s.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Vr)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Jl(f.mutation,d,f.mutation.getFieldMask(),ze.now())):a.set(d.key,tn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>l.set(d,new f6(f,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Xl();let r=new Qe((a,l)=>a-l),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=s.get(c)||tn.empty();f=l.applyToLocalView(d,f),s.set(c,f);const m=(r.get(l.batchId)||_e()).add(c);r=r.insert(l.batchId,m)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,m=I1();f.forEach(p=>{if(!i.has(p)){const y=V1(n.get(p),s.get(p));y!==null&&m.set(p,y),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):A1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):F.resolve(Yr());let l=vo,c=i;return a.next(d=>F.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{c=c.insert(f,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,_e())).next(f=>({batchId:l,changes:R1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(s=>{let r=Rl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let a=Rl();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const d=function(m,p){return new Ya(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(f=>{f.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(a=>{i.forEach((c,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Dt.newInvalidDocument(f)))});let l=Rl();return a.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Jl(f.mutation,d,tn.empty(),ze.now()),qd(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Kn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:r6(r.bundledQuery),readTime:Kn(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(){this.overlays=new Qe(te.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Yr();return F.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),F.resolve()}getOverlaysForCollection(e,n,s){const r=Yr(),i=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Qe((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let f=i.get(d.largestBatchId);f===null&&(f=Yr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Yr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=r)););return F.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new OO(n,s));let i=this.qr.get(n);i===void 0&&(i=_e(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this.Qr=new ft(gt.$r),this.Ur=new ft(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new gt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new te(new Me([])),s=new gt(n,e),r=new gt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Me([])),s=new gt(n,e),r=new gt(n,e+1);let i=_e();return this.Ur.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new gt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||ye(e.Yr,n.Yr)}static Kr(e,n){return ye(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(gt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new DO(i,n,s,r);this.mutationQueue.push(a);for(const l of r)this.Zr=this.Zr.add(new gt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?vg:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new gt(n,0),r=new gt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],a=>{const l=this.Xr(a.Yr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ft(ye);return n.forEach(r=>{const i=new gt(r,0),a=new gt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{s=s.add(l.Yr)})}),F.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;te.isDocumentKey(i)||(i=i.child(""));const a=new gt(new te(i),0);let l=new ft(ye);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(l=l.add(c.Yr)),!0)},a),F.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return F.forEach(n.mutations,r=>{const i=new gt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new gt(n,0),r=this.Zr.firstAfterOrEqual(s);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.ri=e,this.docs=function(){return new Qe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return F.resolve(s?s.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let s=Ns();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Dt.newInvalidDocument(r))}),F.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Ns();const a=n.path,l=new te(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||QD(KD(f),s)<=0||(r.has(f.key)||qd(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,s,r){re(9500)}ii(e,n){return F.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new b6(this)}getSize(e){return F.resolve(this.size)}}class b6 extends h6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.persistence=e,this.si=new Si(n=>Eg(n),Tg),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new Cg,this.targetCount=0,this.ai=ja.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ja(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),F.waitFor(i).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return F.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),F.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return F.resolve(s)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ud(0),this.li=!1,this.li=!0,this.hi=new y6,this.referenceDelegate=e(this),this.Pi=new x6(this),this.indexManager=new i6,this.remoteDocumentCache=function(r){return new v6(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new s6(n),this.Ii=new p6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new _6(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ee("MemoryPersistence","Starting transaction:",e);const r=new E6(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return F.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class E6 extends YD{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.Ri=new Cg,this.Vi=null}static mi(e){return new Rg(e)}get fi(){if(this.Vi)return this.Vi;throw re(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),F.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,s=>{const r=te.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,le.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ed{constructor(e,n){this.persistence=e,this.pi=new Si(s=>WD(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=d6(this,n)}static mi(e,n){return new ed(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?F.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(l=>{l||(s++,i.removeEntry(a,le.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nu(e.data.value)),n}br(e,n,s){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return F.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=_e(),r=_e();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ig(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return sj()?8:XD(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new T6;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Li()<=ge.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Li()<=ge.DEBUG&&ee("QueryEngine","Query:",Pi(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Li()<=ge.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):F.resolve())}ys(e,n){if(qv(n))return F.resolve(null);let s=Fn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Um(n,null,"F"),s=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const a=_e(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Um(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,s,r){return qv(n)||r.isEqual(le.min())?F.resolve(null):this.ps.getDocuments(e,s).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,s,r)?F.resolve(null):(Li()<=ge.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pi(n)),this.vs(e,a,n,GD(r,vo)).next(l=>l))})}Ds(e,n){let s=new ft(N1(e));return n.forEach((r,i)=>{qd(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Li()<=ge.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.ps.getDocumentsMatchingQuery(e,n,wr.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="LocalStore",A6=3e8;class S6{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Qe(ye),this.xs=new Si(i=>Eg(i),Tg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function N6(t,e,n,s){return new S6(t,e,n,s)}async function J1(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],l=[];let c=_e();for(const d of r){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function C6(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const m=d.batch,p=m.keys();let y=F.resolve();return p.forEach(R=>{y=y.next(()=>f.getEntry(c,R)).next(I=>{const D=d.docVersions.get(R);Se(D!==null,48541),I.version.compareTo(D)<0&&(m.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),f.addEntry(I)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=_e();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function W1(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function R6(t,e){const n=oe(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((f,m)=>{const p=r.get(m);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Ct.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,s)),r=r.insert(m,y),function(I,D,A){return I.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=A6?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(p,y,f)&&l.push(n.Pi.updateTargetData(i,y))});let c=Ns(),d=_e();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(I6(i,a,e.documentUpdates).next(f=>{c=f.ks,d=f.qs})),!s.isEqual(le.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(f)}return F.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=r,i))}function I6(t,e,n){let s=_e(),r=_e();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let a=Ns();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ee(jg,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:r}})}function j6(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=vg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function k6(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,F.resolve(r)):n.Pi.allocateTargetId(s).next(a=>(r=new sr(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function qm(t,e,n){const s=oe(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!$a(a))throw a;ee(jg,`Failed to update sequence numbers for target ${e}: ${a}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function tb(t,e,n){const s=oe(t);let r=le.min(),i=_e();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,f){const m=oe(c),p=m.xs.get(f);return p!==void 0?F.resolve(m.Ms.get(p)):m.Pi.getTargetData(d,f)}(s,a,Fn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(a,e,n?r:le.min(),n?i:_e())).next(l=>(D6(s,yO(e),l),{documents:l,Qs:i})))}function D6(t,e,n){let s=t.Os.get(e)||le.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class nb{constructor(){this.activeTargetIds=TO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O6{constructor(){this.Mo=new nb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="ConnectivityMonitor";class rb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(sb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc=null;function Hm(){return jc===null?jc=function(){return 268435456+Math.round(2147483648*Math.random())}():jc++,"0x"+jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="RestConnection",V6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Yu?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const a=Hm(),l=this.zo(e,n.toUriEncodedString());ee(yf,`Sending RPC '${e}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:d}=new URL(l),f=Dr(d);return this.Jo(e,l,c,s,f).then(m=>(ee(yf,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Na(yf,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",s),m})}Ho(e,n,s,r,i,a){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=V6[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class P6 extends U6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const a=Hm();return new Promise((l,c)=>{const d=new e1;d.setWithCredentials(!0),d.listenOnce(t1.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case tu.NO_ERROR:const m=d.getResponseJson();ee(jt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case tu.TIMEOUT:ee(jt,`RPC '${e}' ${a} timed out`),c(new W(q.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const p=d.getStatus();if(ee(jt,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const R=y==null?void 0:y.error;if(R&&R.status&&R.message){const I=function(A){const b=A.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(b)>=0?b:q.UNKNOWN}(R.status);c(new W(I,R.message))}else c(new W(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new W(q.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ee(jt,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(r);ee(jt,`RPC '${e}' ${a} sending request:`,r),d.send(n,"POST",f,s,15)})}T_(e,n,s){const r=Hm(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=r1(),l=s1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");ee(jt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=a.createWebChannel(f,c);this.I_(m);let p=!1,y=!1;const R=new L6({Yo:D=>{y?ee(jt,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(p||(ee(jt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),p=!0),ee(jt,`RPC '${e}' stream ${r} sending:`,D),m.send(D))},Zo:()=>m.close()}),I=(D,A,b)=>{D.listen(A,x=>{try{b(x)}catch(j){setTimeout(()=>{throw j},0)}})};return I(m,Cl.EventType.OPEN,()=>{y||(ee(jt,`RPC '${e}' stream ${r} transport opened.`),R.o_())}),I(m,Cl.EventType.CLOSE,()=>{y||(y=!0,ee(jt,`RPC '${e}' stream ${r} transport closed`),R.a_(),this.E_(m))}),I(m,Cl.EventType.ERROR,D=>{y||(y=!0,Na(jt,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),R.a_(new W(q.UNAVAILABLE,"The operation could not be completed")))}),I(m,Cl.EventType.MESSAGE,D=>{var A;if(!y){const b=D.data[0];Se(!!b,16349);const x=b,j=(x==null?void 0:x.error)||((A=x[0])==null?void 0:A.error);if(j){ee(jt,`RPC '${e}' stream ${r} received error:`,j);const U=j.status;let B=function(v){const S=rt[v];if(S!==void 0)return P1(S)}(U),T=j.message;B===void 0&&(B=q.INTERNAL,T="Unknown error status: "+U+" with message "+j.message),y=!0,R.a_(new W(B,T)),m.close()}else ee(jt,`RPC '${e}' stream ${r} received:`,b),R.u_(b)}}),I(l,n1.STAT_EVENT,D=>{D.stat===Im.PROXY?ee(jt,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Im.NOPROXY&&ee(jt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function _f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){return new HO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="PersistentStream";class eA{constructor(e,n,s,r,i,a,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new W(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(ib,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ee(ib,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z6 extends eA{constructor(e,n,s,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=KO(this.serializer,e),s=function(i){if(!("targetChange"in i))return le.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?Kn(a.readTime):le.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Bm(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Mm(c)?{documents:YO(i,c)}:{query:XO(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=q1(i,a.resumeToken);const d=Lm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(le.min())>0){l.readTime=Zu(i,a.snapshotVersion.toTimestamp());const d=Lm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=WO(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Bm(this.serializer),n.removeTarget=e,this.q_(n)}}class B6 extends eA{constructor(e,n,s,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$O(e.writeResults,e.commitTime),s=Kn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>QO(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{}class H6 extends q6{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new W(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Pm(n,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(q.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Pm(n,s),r,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(q.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class F6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="RemoteStore";class G6{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{s.enqueueAndForget(async()=>{Ni(this)&&(ee(pi,"Restarting streams for network reachability change."),await async function(c){const d=oe(c);d.Ea.add(4),await $o(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Qd(d)}(this))})}),this.Ra=new F6(s,r)}}async function Qd(t){if(Ni(t))for(const e of t.da)await e(!0)}async function $o(t){for(const e of t.da)await e(!1)}function tA(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mg(n)?Og(n):Xa(n).O_()&&Dg(n,e))}function kg(t,e){const n=oe(t),s=Xa(n);n.Ia.delete(e),s.O_()&&nA(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ni(n)&&n.Ra.set("Unknown"))}function Dg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xa(t).Y_(e)}function nA(t,e){t.Va.Ue(e),Xa(t).Z_(e)}function Og(t){t.Va=new PO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xa(t).start(),t.Ra.ua()}function Mg(t){return Ni(t)&&!Xa(t).x_()&&t.Ia.size>0}function Ni(t){return oe(t).Ea.size===0}function sA(t){t.Va=void 0}async function K6(t){t.Ra.set("Online")}async function Q6(t){t.Ia.forEach((e,n)=>{Dg(t,e)})}async function $6(t,e){sA(t),Mg(t)?(t.Ra.ha(e),Og(t)):t.Ra.set("Unknown")}async function Y6(t,e,n){if(t.Ra.set("Online"),e instanceof B1&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){ee(pi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await td(t,s)}else if(e instanceof iu?t.Va.Ze(e):e instanceof z1?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const s=await W1(t.localStore);n.compareTo(s)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(Ct.EMPTY_BYTE_STRING,f.snapshotVersion)),nA(i,c);const m=new sr(f.target,c,d,f.sequenceNumber);Dg(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ee(pi,"Failed to raise snapshot:",s),await td(t,s)}}async function td(t,e,n){if(!$a(e))throw e;t.Ea.add(1),await $o(t),t.Ra.set("Offline"),n||(n=()=>W1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(pi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qd(t)})}function rA(t,e){return e().catch(n=>td(t,n,e))}async function $d(t){const e=oe(t),n=Cr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vg;for(;X6(e);)try{const r=await j6(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,J6(e,r)}catch(r){await td(e,r)}iA(e)&&aA(e)}function X6(t){return Ni(t)&&t.Ta.length<10}function J6(t,e){t.Ta.push(e);const n=Cr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function iA(t){return Ni(t)&&!Cr(t).x_()&&t.Ta.length>0}function aA(t){Cr(t).start()}async function W6(t){Cr(t).ra()}async function Z6(t){const e=Cr(t);for(const n of t.Ta)e.ea(n.mutations)}async function eM(t,e,n){const s=t.Ta.shift(),r=Ag.from(s,e,n);await rA(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await $d(t)}async function tM(t,e){e&&Cr(t).X_&&await async function(s,r){if(function(a){return VO(a)&&a!==q.ABORTED}(r.code)){const i=s.Ta.shift();Cr(s).B_(),await rA(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await $d(s)}}(t,e),iA(t)&&aA(t)}async function ab(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),ee(pi,"RemoteStore received new credentials");const s=Ni(n);n.Ea.add(3),await $o(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qd(n)}async function nM(t,e){const n=oe(t);e?(n.Ea.delete(2),await Qd(n)):e||(n.Ea.add(2),await $o(n),n.Ra.set("Unknown"))}function Xa(t){return t.ma||(t.ma=function(n,s,r){const i=oe(n);return i.sa(),new z6(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:K6.bind(null,t),t_:Q6.bind(null,t),r_:$6.bind(null,t),H_:Y6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Mg(t)?Og(t):t.Ra.set("Unknown")):(await t.ma.stop(),sA(t))})),t.ma}function Cr(t){return t.fa||(t.fa=function(n,s,r){const i=oe(n);return i.sa(),new B6(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:W6.bind(null,t),r_:tM.bind(null,t),ta:Z6.bind(null,t),na:eM.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $d(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(pi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const a=Date.now()+s,l=new Vg(e,n,a,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),$a(t))return new W(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{static emptySet(e){return new da(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||te.comparator(n.key,s.key):(n,s)=>te.comparator(n.key,s.key),this.keyedMap=Rl(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new da;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.ga=new Qe(te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class ka{constructor(e,n,s,r,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ka(e,n,da.emptySet(n),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class rM{constructor(){this.queries=ob(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=oe(n),i=r.queries;r.queries=ob(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new W(q.ABORTED,"Firestore shutting down"))}}function ob(){return new Si(t=>S1(t),Bd)}async function Lg(t,e){const n=oe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new sM,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Ug(a,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&zg(n)}async function Pg(t,e){const n=oe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function iM(t,e){const n=oe(t);let s=!1;for(const r of e){const i=r.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(r)&&(s=!0);a.wa=r}}s&&zg(n)}function aM(t,e,n){const s=oe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function zg(t){t.Ca.forEach(e=>{e.next()})}var Fm,cb;(cb=Fm||(Fm={})).Ma="default",cb.Cache="cache";class Bg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ka(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.key=e}}class oA{constructor(e){this.key=e}}class lM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=N1(e),this.tu=new da(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new lb,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const p=r.get(f),y=qd(this.query,m)?m:null,R=!!p&&this.mutatedKeys.has(p.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let D=!1;p&&y?p.data.isEqual(y.data)?R!==I&&(s.track({type:3,doc:y}),D=!0):this.su(p,y)||(s.track({type:2,doc:y}),D=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!p&&y?(s.track({type:0,doc:y}),D=!0):p&&!y&&(s.track({type:1,doc:p}),D=!0,(c||d)&&(l=!0)),D&&(y?(a=a.add(y),i=I?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:a,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,m)=>function(y,R){const I=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Rt:D})}};return I(y)-I(R)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new ka(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new oA(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new lA(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qg="SyncEngine";class oM{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class cM{constructor(e){this.key=e,this.hu=!1}}class uM{constructor(e,n,s,r,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Si(l=>S1(l),Bd),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(te.comparator),this.Au=new Map,this.Ru=new Cg,this.Vu={},this.mu=new Map,this.fu=ja.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dM(t,e,n=!0){const s=mA(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await cA(s,e,n,!0),r}async function hM(t,e){const n=mA(t);await cA(n,e,!0,!1)}async function cA(t,e,n,s){const r=await k6(t.localStore,Fn(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await fM(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&tA(t.remoteStore,r),l}async function fM(t,e,n,s,r){t.pu=(m,p,y)=>async function(I,D,A,b){let x=D.view.ru(A);x.Cs&&(x=await tb(I.localStore,D.query,!1).then(({documents:T})=>D.view.ru(T,x)));const j=b&&b.targetChanges.get(D.targetId),U=b&&b.targetMismatches.get(D.targetId)!=null,B=D.view.applyChanges(x,I.isPrimaryClient,j,U);return db(I,D.targetId,B.au),B.snapshot}(t,m,p,y);const i=await tb(t.localStore,e,!0),a=new lM(e,i.Qs),l=a.ru(i.documents),c=Qo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=a.applyChanges(l,t.isPrimaryClient,c);db(t,n,d.au);const f=new oM(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function mM(t,e,n){const s=oe(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(a=>!Bd(a,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await qm(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&kg(s.remoteStore,r.targetId),Gm(s,r.targetId)}).catch(Qa)):(Gm(s,r.targetId),await qm(s.localStore,r.targetId,!0))}async function pM(t,e){const n=oe(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),kg(n.remoteStore,s.targetId))}async function gM(t,e,n){const s=TM(t);try{const r=await function(a,l){const c=oe(a),d=ze.now(),f=l.reduce((y,R)=>y.add(R.key),_e());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let R=Ns(),I=_e();return c.Ns.getEntries(y,f).next(D=>{R=D,R.forEach((A,b)=>{b.isValidDocument()||(I=I.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,R)).next(D=>{m=D;const A=[];for(const b of l){const x=jO(b,m.get(b.key).overlayedDocument);x!=null&&A.push(new Vr(b.key,x,_1(x.value.mapValue),Gn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,A,l)}).next(D=>{p=D;const A=D.applyToLocalDocumentSet(m,I);return c.documentOverlayCache.saveOverlays(y,D.batchId,A)})}).then(()=>({batchId:p.batchId,changes:R1(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new Qe(ye)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(s,r.batchId,n),await Yo(s,r.changes),await $d(s.remoteStore)}catch(r){const i=Ug(r,"Failed to persist write");n.reject(i)}}async function uA(t,e){const n=oe(t);try{const s=await R6(n.localStore,e);e.targetChanges.forEach((r,i)=>{const a=n.Au.get(i);a&&(Se(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Se(a.hu,14607):r.removedDocuments.size>0&&(Se(a.hu,42227),a.hu=!1))}),await Yo(n,s,e)}catch(s){await Qa(s)}}function ub(t,e,n){const s=oe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=oe(a);c.onlineState=l;let d=!1;c.queries.forEach((f,m)=>{for(const p of m.Sa)p.va(l)&&(d=!0)}),d&&zg(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function yM(t,e,n){const s=oe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let a=new Qe(te.comparator);a=a.insert(i,Dt.newNoDocument(i,le.min()));const l=_e().add(i),c=new Gd(le.min(),new Map,new Qe(ye),a,l);await uA(s,c),s.du=s.du.remove(i),s.Au.delete(e),Hg(s)}else await qm(s.localStore,e,!1).then(()=>Gm(s,e,n)).catch(Qa)}async function _M(t,e){const n=oe(t),s=e.batch.batchId;try{const r=await C6(n.localStore,e);hA(n,s,null),dA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Yo(n,r)}catch(r){await Qa(r)}}async function vM(t,e,n){const s=oe(t);try{const r=await function(a,l){const c=oe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(Se(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(s.localStore,e);hA(s,e,n),dA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Yo(s,r)}catch(r){await Qa(r)}}function dA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function hA(t,e,n){const s=oe(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Gm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||fA(t,s)})}function fA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Hg(t))}function db(t,e,n){for(const s of n)s instanceof lA?(t.Ru.addReference(s.key,e),bM(t,s)):s instanceof oA?(ee(qg,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||fA(t,s.key)):re(19791,{wu:s})}function bM(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ee(qg,"New document in limbo: "+n),t.Eu.add(s),Hg(t))}function Hg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Me.fromString(e)),s=t.fu.next();t.Au.set(s,new cM(n)),t.du=t.du.insert(n,s),tA(t.remoteStore,new sr(Fn(zd(n.path)),s,"TargetPurposeLimboResolution",Ud.ce))}}async function Yo(t,e,n){const s=oe(t),r=[],i=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{a.push(s.pu(c,e,n).then(d=>{var f;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=Ig.As(c.targetId,d);i.push(m)}}))}),await Promise.all(a),s.Pu.H_(r),await async function(c,d){const f=oe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,p=>F.forEach(p.Es,y=>f.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>F.forEach(p.ds,y=>f.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!$a(m))throw m;ee(jg,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=f.Ms.get(p),R=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(R);f.Ms=f.Ms.insert(p,I)}}}(s.localStore,i))}async function xM(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){ee(qg,"User change. New user:",e.toKey());const s=await J1(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new W(q.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Yo(n,s.Ls)}}function EM(t,e){const n=oe(t),s=n.Au.get(e);if(s&&s.hu)return _e().add(s.key);{let r=_e();const i=n.Iu.get(e);if(!i)return r;for(const a of i){const l=n.Tu.get(a);r=r.unionWith(l.view.nu)}return r}}function mA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yM.bind(null,e),e.Pu.H_=iM.bind(null,e.eventManager),e.Pu.yu=aM.bind(null,e.eventManager),e}function TM(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vM.bind(null,e),e}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return N6(this.persistence,new w6,e.initialUser,this.serializer)}Cu(e){return new X1(Rg.mi,this.serializer)}Du(e){return new O6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class wM extends nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof ed,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new c6(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new X1(s=>ed.mi(s,n),this.serializer)}}class Km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ub(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=xM.bind(null,this.syncEngine),await nM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rM}()}createDatastore(e){const n=Kd(e.databaseInfo.databaseId),s=function(i){return new P6(i)}(e.databaseInfo);return function(i,a,l,c){return new H6(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,a,l){return new G6(s,r,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ub(this.syncEngine,n,0),function(){return rb.v()?new rb:new M6}())}createSyncEngine(e,n){return function(r,i,a,l,c,d,f){const m=new uM(r,i,a,l,c,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=oe(r);ee(pi,"RemoteStore shutting down."),i.Ea.add(5),await $o(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Km.provider={build:()=>new Km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="FirestoreClient";class AM{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=kt.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{ee(Rr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(ee(Rr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ug(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function vf(t,e){t.asyncQueue.verifyOperationInProgress(),ee(Rr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await J1(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SM(t);ee(Rr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>ab(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>ab(e.remoteStore,r)),t._onlineComponents=e}async function SM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(Rr,"Using user provided OfflineComponentProvider");try{await vf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Na("Error using user provided cache. Falling back to memory cache: "+n),await vf(t,new nd)}}else ee(Rr,"Using default OfflineComponentProvider"),await vf(t,new wM(void 0));return t._offlineComponents}async function pA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(Rr,"Using user provided OnlineComponentProvider"),await hb(t,t._uninitializedComponentsProvider._online)):(ee(Rr,"Using default OnlineComponentProvider"),await hb(t,new Km))),t._onlineComponents}function NM(t){return pA(t).then(e=>e.syncEngine)}async function sd(t){const e=await pA(t),n=e.eventManager;return n.onListen=dM.bind(null,e.syncEngine),n.onUnlisten=mM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pM.bind(null,e.syncEngine),n}function CM(t,e,n={}){const s=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const f=new Fg({next:p=>{f.Nu(),a.enqueueAndForget(()=>Pg(i,m));const y=p.docs.has(l);!y&&p.fromCache?d.reject(new W(q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&c&&c.source==="server"?d.reject(new W(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Bg(zd(l.path),f,{includeMetadataChanges:!0,qa:!0});return Lg(i,m)}(await sd(t),t.asyncQueue,e,n,s)),s.promise}function RM(t,e,n={}){const s=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const f=new Fg({next:p=>{f.Nu(),a.enqueueAndForget(()=>Pg(i,m)),p.fromCache&&c.source==="server"?d.reject(new W(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Bg(l,f,{includeMetadataChanges:!0,qa:!0});return Lg(i,m)}(await sd(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="firestore.googleapis.com",mb=!0;class pb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yA,this.ssl=mb}else this.host=e.host,this.ssl=e.ssl??mb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Y1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l6)throw new W(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yd{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new OD;switch(s.type){case"firstParty":return new LD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new W(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=fb.get(n);s&&(ee("ComponentProvider","Removing Datastore"),fb.delete(n),s.terminate())}(this),Promise.resolve()}}function _A(t,e,n,s={}){var d;t=Nn(t,Yd);const r=Dr(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(rg(`https://${l}`),ig("Firestore",!0)),i.host!==yA&&i.host!==l&&Na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!di(c,a)&&(t._setSettings(c),s.mockUserToken)){let f,m;if(typeof s.mockUserToken=="string")f=s.mockUserToken,m=kt.MOCK_USER;else{f=hw(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new W(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new kt(p)}t._authCredentials=new MD(new a1(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class nt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nt(this.firestore,e,this._key)}toJSON(){return{type:nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Go(n,nt._jsonSchema))return new nt(e,s||null,new te(Me.fromString(n.referencePath)))}}nt._jsonSchemaVersion="firestore/documentReference/1.0",nt._jsonSchema={type:ut("string",nt._jsonSchemaVersion),referencePath:ut("string")};class _r extends Ur{constructor(e,n,s){super(e,n,zd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new te(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function Rt(t,e,...n){if(t=Je(t),l1("collection","path",e),t instanceof Yd){const s=Me.fromString(e,...n);return Cv(s),new _r(t,null,s)}{if(!(t instanceof nt||t instanceof _r))throw new W(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Me.fromString(e,...n));return Cv(s),new _r(t.firestore,null,s)}}function Cs(t,e,...n){if(t=Je(t),arguments.length===1&&(e=_g.newId()),l1("doc","path",e),t instanceof Yd){const s=Me.fromString(e,...n);return Nv(s),new nt(t,null,new te(s))}{if(!(t instanceof nt||t instanceof _r))throw new W(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Me.fromString(e,...n));return Nv(s),new nt(t.firestore,t instanceof _r?t.converter:null,new te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="AsyncQueue";class yb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z1(this,"async_queue_retry"),this._c=()=>{const s=_f();s&&ee(gb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=_f();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ys;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$a(e))throw e;ee(gb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",_b(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Vg.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&re(47125,{Pc:_b(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _b(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class gi extends Yd{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new yb,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yb(e),this._firestoreClient=void 0,await e}}}function IM(t,e){const n=typeof t=="object"?t:og(),s=typeof t=="string"?t:Yu,r=jd(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=cw("firestore");i&&_A(r,...i)}return r}function Xd(t){if(t._terminated)throw new W(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jM(t),t._firestoreClient}function jM(t){var s,r,i;const e=t._freezeSettings(),n=function(l,c,d,f){return new tO(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,gA(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new AM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Ct.fromBase64String(e))}catch(n){throw new W(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Go(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:ut("string",_n._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qn._jsonSchemaVersion}}static fromJSON(e){if(Go(e,Qn._jsonSchema))return new Qn(e.latitude,e.longitude)}}Qn._jsonSchemaVersion="firestore/geoPoint/1.0",Qn._jsonSchema={type:ut("string",Qn._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Go(e,$n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $n(e.vectorValues);throw new W(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$n._jsonSchemaVersion="firestore/vectorValue/1.0",$n._jsonSchema={type:ut("string",$n._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=/^__.*__$/;class DM{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ko(e,this.data,n,this.fieldTransforms)}}class vA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ac:t})}}class Gg{constructor(e,n,s,r,i,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bA(this.Ac)&&kM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class OM{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Kd(e)}Cc(e,n,s,r=!1){return new Gg({Ac:e,methodName:n,Dc:s,path:At.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kg(t){const e=t._freezeSettings(),n=Kd(t._databaseId);return new OM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MM(t,e,n,s,r,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);$g("Data must be an object, but it was:",a,s);const l=xA(s,a);let c,d;if(i.merge)c=new tn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const p=Qm(e,m,n);if(!a.contains(p))throw new W(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);TA(f,p)||f.push(p)}c=new tn(f),d=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=a.fieldTransforms;return new DM(new Kt(l),c,d)}class Zd extends Wd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zd}}class Qg extends Wd{_toFieldTransform(e){return new NO(e.path,new wo)}isEqual(e){return e instanceof Qg}}function VM(t,e,n,s){const r=t.Cc(1,e,n);$g("Data must be an object, but it was:",r,s);const i=[],a=Kt.empty();Mr(s,(c,d)=>{const f=Yg(e,c,n);d=Je(d);const m=r.yc(f);if(d instanceof Zd)i.push(f);else{const p=Xo(d,m);p!=null&&(i.push(f),a.set(f,p))}});const l=new tn(i);return new vA(a,l,r.fieldTransforms)}function UM(t,e,n,s,r,i){const a=t.Cc(1,e,n),l=[Qm(e,s,n)],c=[r];if(i.length%2!=0)throw new W(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Qm(e,i[p])),c.push(i[p+1]);const d=[],f=Kt.empty();for(let p=l.length-1;p>=0;--p)if(!TA(d,l[p])){const y=l[p];let R=c[p];R=Je(R);const I=a.yc(y);if(R instanceof Zd)d.push(y);else{const D=Xo(R,I);D!=null&&(d.push(y),f.set(y,D))}}const m=new tn(d);return new vA(f,m,a.fieldTransforms)}function LM(t,e,n,s=!1){return Xo(n,t.Cc(s?4:3,e))}function Xo(t,e){if(EA(t=Je(t)))return $g("Unsupported field value:",e,t),xA(t,e);if(t instanceof Wd)return function(s,r){if(!bA(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const l of s){let c=Xo(l,r.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Je(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return wO(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=ze.fromDate(s);return{timestampValue:Zu(r.serializer,i)}}if(s instanceof ze){const i=new ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Zu(r.serializer,i)}}if(s instanceof Qn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _n)return{bytesValue:q1(r.serializer,s._byteString)};if(s instanceof nt){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ng(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof $n)return function(a,l){return{mapValue:{fields:{[g1]:{stringValue:y1},[Xu]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return wg(l.serializer,d)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Vd(s)}`)}(t,e)}function xA(t,e){const n={};return u1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(t,(s,r)=>{const i=Xo(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function EA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Qn||t instanceof _n||t instanceof nt||t instanceof Wd||t instanceof $n)}function $g(t,e,n){if(!EA(n)||!o1(n)){const s=Vd(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Qm(t,e,n){if((e=Je(e))instanceof Jd)return e._internalPath;if(typeof e=="string")return Yg(t,e);throw rd("Field path arguments must be of type string or ",t,!1,void 0,n)}const PM=new RegExp("[~\\*/\\[\\]]");function Yg(t,e,n){if(e.search(PM)>=0)throw rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jd(...e.split("."))._internalPath}catch{throw rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rd(t,e,n,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${s}`),a&&(c+=` in document ${r}`),c+=")"),new W(q.INVALID_ARGUMENT,l+t+c)}function TA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zM extends wA{data(){return super.data()}}function eh(t,e){return typeof e=="string"?Yg(t,e):e instanceof Jd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xg{}class SA extends Xg{}function jn(t,e,...n){let s=[];e instanceof Xg&&s.push(e),s=s.concat(n),function(i){const a=i.filter(c=>c instanceof Jg).length,l=i.filter(c=>c instanceof th).length;if(a>1||a>0&&l>0)throw new W(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class th extends SA{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new th(e,n,s)}_apply(e){const n=this._parse(e);return NA(e._query,n),new Ur(e.firestore,e.converter,Vm(e._query,n))}_parse(e){const n=Kg(e.firestore);return function(i,a,l,c,d,f,m){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){xb(m,f);const R=[];for(const I of m)R.push(bb(c,i,I));p={arrayValue:{values:R}}}else p=bb(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||xb(m,f),p=LM(l,a,m,f==="in"||f==="not-in");return ot.create(d,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Rs(t,e,n){const s=e,r=eh("where",t);return th._create(r,s,n)}class Jg extends Xg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const c of l)NA(a,c),a=Vm(a,c)}(e._query,n),new Ur(e.firestore,e.converter,Vm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wg extends SA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wg(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new W(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new W(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new To(i,a)}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ya(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Ci(t,e="asc"){const n=e,s=eh("orderBy",t);return Wg._create(s,n)}function bb(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new W(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A1(e)&&n.indexOf("/")!==-1)throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Me.fromString(n));if(!te.isDocumentKey(s))throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Vv(t,new te(s))}if(n instanceof nt)return Vv(t,n._key);throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vd(n)}.`)}function xb(t,e){if(!Array.isArray(t)||t.length===0)throw new W(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NA(t,e){const n=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BM{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Mr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,r,i;const n=(i=(r=(s=e.fields)==null?void 0:s[Xu].arrayValue)==null?void 0:r.values)==null?void 0:i.map(a=>et(a.doubleValue));return new $n(n)}convertGeoPoint(e){return new Qn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Pd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(bo(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Me.fromString(e);Se($1(s),9688,{name:e});const r=new xo(s.get(1),s.get(3)),i=new te(s.popFirst(5));return r.isEqual(n)||Ss(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ni extends wA{constructor(e,n,s,r,i,a){super(e,n,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(eh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ni._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ni._jsonSchemaVersion="firestore/documentSnapshot/1.0",ni._jsonSchema={type:ut("string",ni._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class au extends ni{data(e={}){return super.data(e)}}class si{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new jl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new au(this._firestore,this._userDataWriter,s.key,s,new jl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new au(r._firestore,r._userDataWriter,l.doc.key,l.doc,new jl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new au(r._firestore,r._userDataWriter,l.doc.key,l.doc,new jl(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:HM(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=si._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t){t=Nn(t,nt);const e=Nn(t.firestore,gi);return CM(Xd(e),t._key).then(n=>RA(e,t,n))}si._jsonSchemaVersion="firestore/querySnapshot/1.0",si._jsonSchema={type:ut("string",si._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class Zg extends BM{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}}function GM(t){t=Nn(t,Ur);const e=Nn(t.firestore,gi),n=Xd(e),s=new Zg(e);return AA(t._query),RM(n,t._query).then(r=>new si(e,s,t,r))}function KM(t,e,n,...s){t=Nn(t,nt);const r=Nn(t.firestore,gi),i=Kg(r);let a;return a=typeof(e=Je(e))=="string"||e instanceof Jd?UM(i,"updateDoc",t._key,e,n,s):VM(i,"updateDoc",t._key,e),CA(r,[a.toMutation(t._key,Gn.exists(!0))])}function nh(t,e){const n=Nn(t.firestore,gi),s=Cs(t),r=qM(t.converter,e);return CA(n,[MM(Kg(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,Gn.exists(!1))]).then(()=>s)}function bt(t,...e){var c,d,f;t=Je(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||vb(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(vb(e[s])){const m=e[s];e[s]=(c=m.next)==null?void 0:c.bind(m),e[s+1]=(d=m.error)==null?void 0:d.bind(m),e[s+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,a,l;if(t instanceof nt)a=Nn(t.firestore,gi),l=zd(t._key.path),i={next:m=>{e[s]&&e[s](RA(a,t,m))},error:e[s+1],complete:e[s+2]};else{const m=Nn(t,Ur);a=Nn(m.firestore,gi),l=m._query;const p=new Zg(a);i={next:y=>{e[s]&&e[s](new si(a,p,m,y))},error:e[s+1],complete:e[s+2]},AA(t._query)}return function(p,y,R,I){const D=new Fg(I),A=new Bg(y,D,R);return p.asyncQueue.enqueueAndForget(async()=>Lg(await sd(p),A)),()=>{D.Nu(),p.asyncQueue.enqueueAndForget(async()=>Pg(await sd(p),A))}}(Xd(a),l,r,i)}function CA(t,e){return function(s,r){const i=new ys;return s.asyncQueue.enqueueAndForget(async()=>gM(await NM(s),r,i)),i.promise}(Xd(t),e)}function RA(t,e,n){const s=n.docs.get(e._key),r=new Zg(t);return new ni(t,r,e._key,s,new jl(n.hasPendingWrites,n.fromCache),e.converter)}function ri(){return new Qg("serverTimestamp")}(function(e,n=!0){(function(r){Ka=r})(wi),hi(new Tr("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),l=new gi(new VD(s.getProvider("auth-internal")),new PD(a,s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(d.options.projectId,f)}(a,r),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Bn(Tv,wv,e),Bn(Tv,wv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="firebasestorage.googleapis.com",jA="storageBucket",QM=2*60*1e3,$M=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends es{constructor(e,n,s=0){super(bf(e),`Firebase Storage: ${n} (${bf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function bf(t){return"storage/"+t}function ey(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(We.UNKNOWN,t)}function YM(t){return new Ze(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function XM(t){return new Ze(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function JM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(We.UNAUTHENTICATED,t)}function WM(){return new Ze(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZM(t){return new Ze(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function e3(){return new Ze(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t3(){return new Ze(We.CANCELED,"User canceled the upload/download.")}function n3(t){return new Ze(We.INVALID_URL,"Invalid URL '"+t+"'.")}function s3(t){return new Ze(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function r3(){return new Ze(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jA+"' property when initializing the app?")}function i3(){return new Ze(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function a3(){return new Ze(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function l3(t){return new Ze(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $m(t){return new Ze(We.INVALID_ARGUMENT,t)}function kA(){return new Ze(We.APP_DELETED,"The Firebase app was deleted.")}function o3(t){return new Ze(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wl(t,e){return new Ze(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function bl(t){throw new Ze(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=nn.makeFromUrl(e,n)}catch{return new nn(e,"")}if(s.path==="")return s;throw s3(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${f}/b/${r}/o${p}`,"i"),R={bucket:1,path:3},I=n===IA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",A=new RegExp(`^https?://${I}/${r}/${D}`,"i"),x=[{regex:l,indices:c,postModify:i},{regex:y,indices:R,postModify:d},{regex:A,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<x.length;j++){const U=x[j],B=U.regex.exec(e);if(B){const T=B[U.indices.bucket];let _=B[U.indices.path];_||(_=""),s=new nn(T,_),U.postModify(s);break}}if(s==null)throw n3(e);return s}}class c3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t,e,n){let s=1,r=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function f(...D){d||(d=!0,e.apply(null,D))}function m(D){r=setTimeout(()=>{r=null,t(y,c())},D)}function p(){i&&clearTimeout(i)}function y(D,...A){if(d){p();return}if(D){p(),f.call(null,D,...A);return}if(c()||a){p(),f.call(null,D,...A);return}s<64&&(s*=2);let x;l===1?(l=2,x=0):x=(s+Math.random())*1e3,m(x)}let R=!1;function I(D){R||(R=!0,p(),!d&&(r!==null?(D||(l=2),clearTimeout(r),m(0)):D||(l=1)))}return m(0),i=setTimeout(()=>{a=!0,I(!0)},n),I}function d3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t){return t!==void 0}function f3(t){return typeof t=="object"&&!Array.isArray(t)}function ty(t){return typeof t=="string"||t instanceof String}function Eb(t){return ny()&&t instanceof Blob}function ny(){return typeof Blob<"u"}function Tb(t,e,n,s){if(s<e)throw $m(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw $m(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function DA(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var ii;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ii||(ii={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n,s,r,i,a,l,c,d,f,m,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,I)=>{this.resolve_=R,this.reject_=I,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new kc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===ii.NO_ERROR,c=i.getStatus();if(!l||m3(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===ii.ABORT;s(!1,new kc(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;s(!0,new kc(d,i))})},n=(s,r)=>{const i=this.resolve_,a=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());h3(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=ey();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(r.canceled){const c=this.appDelete_?kA():t3();a(c)}else{const c=e3();a(c)}};this.canceled_?n(!1,new kc(!1,null,!0)):this.backoffId_=u3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&d3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kc{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function g3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function y3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function v3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function b3(t,e,n,s,r,i,a=!0,l=!1){const c=DA(t.urlParams),d=t.url+c,f=Object.assign({},t.headers);return _3(f,e),g3(f,n),y3(f,i),v3(f,s),new p3(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function E3(...t){const e=x3();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(ny())return new Blob(t);throw new Ze(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function T3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){if(typeof atob>"u")throw l3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xf{constructor(e,n){this.data=e,this.contentType=n||null}}function A3(t,e){switch(t){case Pn.RAW:return new xf(OA(e));case Pn.BASE64:case Pn.BASE64URL:return new xf(MA(t,e));case Pn.DATA_URL:return new xf(N3(e),C3(e))}throw ey()}function OA(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,a=t.charCodeAt(++n);s=65536|(i&1023)<<10|a&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function S3(t){let e;try{e=decodeURIComponent(t)}catch{throw Wl(Pn.DATA_URL,"Malformed data URL.")}return OA(e)}function MA(t,e){switch(t){case Pn.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Wl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Pn.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Wl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=w3(e)}catch(r){throw r.message.includes("polyfill")?r:Wl(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class VA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wl(Pn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=R3(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function N3(t){const e=new VA(t);return e.base64?MA(Pn.BASE64,e.rest):S3(e.rest)}function C3(t){return new VA(t).contentType}function R3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){let s=0,r="";Eb(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Eb(this.data_)){const s=this.data_,r=T3(s,e,n);return r===null?null:new Xs(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Xs(s,!0)}}static getBlob(...e){if(ny()){const n=e.map(s=>s instanceof Xs?s.data_:s);return new Xs(E3.apply(null,n))}else{const n=e.map(a=>ty(a)?A3(Pn.RAW,a).data:a.data_);let s=0;n.forEach(a=>{s+=a.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)r[i++]=a[l]}),new Xs(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){let e;try{e=JSON.parse(t)}catch{return null}return f3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function j3(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function LA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t,e){return e}class Ut{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||k3}}let Dc=null;function D3(t){return!ty(t)||t.length<2?t:LA(t)}function PA(){if(Dc)return Dc;const t=[];t.push(new Ut("bucket")),t.push(new Ut("generation")),t.push(new Ut("metageneration")),t.push(new Ut("name","fullPath",!0));function e(i,a){return D3(a)}const n=new Ut("name");n.xform=e,t.push(n);function s(i,a){return a!==void 0?Number(a):a}const r=new Ut("size");return r.xform=s,t.push(r),t.push(new Ut("timeCreated")),t.push(new Ut("updated")),t.push(new Ut("md5Hash",null,!0)),t.push(new Ut("cacheControl",null,!0)),t.push(new Ut("contentDisposition",null,!0)),t.push(new Ut("contentEncoding",null,!0)),t.push(new Ut("contentLanguage",null,!0)),t.push(new Ut("contentType",null,!0)),t.push(new Ut("metadata","customMetadata",!0)),Dc=t,Dc}function O3(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new nn(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function M3(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const a=n[i];s[a.local]=a.xform(s,e[a.server])}return O3(s,t),s}function zA(t,e,n){const s=UA(e);return s===null?null:M3(t,s,n)}function V3(t,e,n,s){const r=UA(e);if(r===null||!ty(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,p="/b/"+a(f)+"/o/"+a(m),y=sy(p,n,s),R=DA({alt:"media",token:d});return y+R})[0]}function U3(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class BA{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){if(!t)throw ey()}function L3(t,e){function n(s,r){const i=zA(t,r,e);return qA(i!==null),i}return n}function P3(t,e){function n(s,r){const i=zA(t,r,e);return qA(i!==null),V3(i,r,t.host,t._protocol)}return n}function HA(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=WM():r=JM():n.getStatus()===402?r=XM(t.bucket):n.getStatus()===403?r=ZM(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function z3(t){const e=HA(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=YM(t.path)),i.serverResponse=r.serverResponse,i}return n}function B3(t,e,n){const s=e.fullServerUrl(),r=sy(s,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new BA(r,i,P3(t,n),a);return l.errorHandler=z3(e),l}function q3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function H3(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=q3(null,e)),s}function F3(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let x="";for(let j=0;j<2;j++)x=x+Math.random().toString().slice(2);return x}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=H3(e,s,r),f=U3(d,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+c+"--",y=Xs.getBlob(m,s,p);if(y===null)throw i3();const R={name:d.fullPath},I=sy(i,t.host,t._protocol),D="POST",A=t.maxUploadRetryTime,b=new BA(I,D,L3(t,n),A);return b.urlParams=R,b.headers=a,b.body=y.uploadData(),b.errorHandler=HA(e),b}class G3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ii.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ii.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ii.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw bl("cannot .send() more than once");if(Dr(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class K3 extends G3{initXhr(){this.xhr_.responseType="text"}}function FA(){return new K3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this._service=e,n instanceof nn?this._location=n:this._location=nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yi(e,n)}get root(){const e=new nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LA(this._location.path)}get storage(){return this._service}get parent(){const e=I3(this._location.path);if(e===null)return null;const n=new nn(this._location.bucket,e);return new yi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw o3(e)}}function Q3(t,e,n){t._throwIfRoot("uploadBytes");const s=F3(t.storage,t._location,PA(),new Xs(e,!0),n);return t.storage.makeRequestWithTokens(s,FA).then(r=>({metadata:r,ref:t}))}function $3(t){t._throwIfRoot("getDownloadURL");const e=B3(t.storage,t._location,PA());return t.storage.makeRequestWithTokens(e,FA).then(n=>{if(n===null)throw a3();return n})}function Y3(t,e){const n=j3(t._location.path,e),s=new nn(t._location.bucket,n);return new yi(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){return/^[A-Za-z]+:\/\//.test(t)}function J3(t,e){return new yi(t,e)}function GA(t,e){if(t instanceof ry){const n=t;if(n._bucket==null)throw r3();const s=new yi(n,n._bucket);return e!=null?GA(s,e):s}else return e!==void 0?Y3(t,e):t}function W3(t,e){if(e&&X3(e)){if(t instanceof ry)return J3(t,e);throw $m("To use ref(service, url), the first argument must be a Storage instance.")}else return GA(t,e)}function wb(t,e){const n=e==null?void 0:e[jA];return n==null?null:nn.makeFromBucketSpec(n,t)}function Z3(t,e,n,s={}){t.host=`${e}:${n}`;const r=Dr(e);r&&(rg(`https://${t.host}/b`),ig("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:hw(i,t.app.options.projectId))}class ry{constructor(e,n,s,r,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=IA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QM,this._maxUploadRetryTime=$M,this._requests=new Set,r!=null?this._bucket=nn.makeFromBucketSpec(r,this._host):this._bucket=wb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nn.makeFromBucketSpec(this._url,e):this._bucket=wb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yi(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new c3(kA());{const a=b3(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const Ab="@firebase/storage",Sb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="storage";function e5(t,e,n){return t=Je(t),Q3(t,e,n)}function QA(t){return t=Je(t),$3(t)}function $A(t,e){return t=Je(t),W3(t,e)}function t5(t=og(),e){t=Je(t);const s=jd(t,KA).getImmediate({identifier:e}),r=cw("storage");return r&&YA(s,...r),s}function YA(t,e,n,s={}){Z3(t,e,n,s)}function n5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new ry(n,s,r,e,wi)}function s5(){hi(new Tr(KA,n5,"PUBLIC").setMultipleInstances(!0)),Bn(Ab,Sb,""),Bn(Ab,Sb,"esm2020")}s5();const r5={apiKey:"fake-api-key",authDomain:"localhost",projectId:"evcwebsite12345"},iy=pw(r5),Jo=kD(iy),qe=IM(iy),ay=t5(iy),i5=typeof window<"u"&&["localhost","127.0.0.1","::1"].includes(window.location.hostname);var kb,Db,Ob,Mb;const a5=((Db=(kb=import.meta)==null?void 0:kb.env)==null?void 0:Db.DEV)===!0||((Mb=(Ob=import.meta)==null?void 0:Ob.env)==null?void 0:Mb.VITE_USE_EMULATORS)==="true"||i5;let Nb=!1;if(!Nb&&a5){try{Uw(Jo,"http://localhost:9099")}catch{}try{_A(qe,"localhost",8080)}catch{}try{YA(ay,"localhost",9199)}catch{}Nb=!0}const l5=[{label:"Admin • Dashboard",to:"/admin"},{label:"Admin • Assignments",to:"/admin/assignments"},{label:"Admin • Trajects",to:"/admin/trajects"},{label:"Admin • Users",to:"/admin/users"},{label:"Admin • Profile",to:"/admin/profile"},{label:"Coach • Dashboard",to:"/coach"},{label:"Coach • My Customers",to:"/coach/customers"},{label:"Coach • Feedback",to:"/coach/feedback"},{label:"Coach • Messages",to:"/coach/messages"},{label:"Customer • Planning",to:"/customer/planning"},{label:"Customer • Messages",to:"/customer/messages"},{label:"Customer • Profile",to:"/customer/profile"},{label:"Test • Create Account",to:"/testing/create-account",badge:"DEV"}],o5=()=>{const t=Zn(),e=Ti(),[n,s]=N.useState(!1),r=N.useMemo(()=>l5.map(l=>({...l,active:e.pathname===l.to||e.pathname.startsWith(`${l.to}/`)})),[e.pathname]),i=l=>{t(l),s(!1)},a=()=>{localStorage.removeItem("token"),t("/login",{replace:!0}),s(!1)};return u.jsxs("header",{className:"sticky top-0 z-30 border-b border-slate-200 bg-white/95 backdrop-blur",children:[u.jsxs("div",{className:"mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6",children:[u.jsxs("button",{type:"button",onClick:()=>i("/"),className:"flex items-center gap-2 text-lg font-semibold text-slate-900 transition hover:text-brand-600",children:[u.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-brand-100 text-base font-bold text-brand-700",children:"E"}),u.jsx("span",{className:"hidden text-sm font-medium text-slate-500 md:block",children:"EVC Portfolio"})]}),u.jsx("nav",{className:"hidden items-center gap-6 text-sm font-medium text-slate-600 md:flex",children:r.map(l=>u.jsxs("button",{type:"button",onClick:()=>i(l.to),className:`relative inline-flex items-center gap-2 transition hover:text-brand-600 ${l.active?"text-brand-600":""}`,children:[u.jsx("span",{children:l.label}),l.badge?u.jsx("span",{className:"rounded-full bg-brand-100 px-2 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-brand-600",children:l.badge}):null,l.active&&u.jsx("span",{className:"absolute -bottom-2 left-0 right-0 h-0.5 rounded-full bg-brand-500"})]},l.to))}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{type:"button",onClick:a,className:"hidden items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600 md:inline-flex",children:[u.jsx(z_,{className:"h-4 w-4"}),u.jsx("span",{children:"Logout"})]}),u.jsx("button",{type:"button",onClick:()=>s(l=>!l),className:"inline-flex items-center justify-center rounded-full border border-slate-200 p-2 text-slate-600 transition hover:border-brand-500 hover:text-brand-600 md:hidden","aria-label":"Toggle navigation",children:n?u.jsx(VI,{className:"h-5 w-5"}):u.jsx(nw,{className:"h-5 w-5"})})]})]}),n&&u.jsx("div",{className:"border-t border-slate-200 bg-white md:hidden",children:u.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-1 px-4 py-3 text-sm font-medium text-slate-600",children:[r.map(l=>u.jsxs("button",{type:"button",onClick:()=>i(l.to),className:`flex items-center justify-between rounded-lg px-3 py-2 text-left transition hover:bg-slate-100 ${l.active?"bg-brand-50 text-brand-700":""}`,children:[u.jsxs("span",{className:"flex items-center gap-2",children:[l.label,l.badge?u.jsx("span",{className:"rounded-full bg-brand-100 px-2 py-0.5 text-[0.6rem] font-semibold uppercase tracking-wide text-brand-600",children:l.badge}):null]}),l.active&&u.jsx("span",{className:"text-xs font-semibold uppercase text-brand-600",children:"Now"})]},l.to)),u.jsxs("button",{type:"button",onClick:a,className:"mt-2 inline-flex items-center justify-center gap-2 rounded-lg bg-brand-600 px-3 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:[u.jsx(z_,{className:"h-4 w-4"}),u.jsx("span",{children:"Logout"})]})]})})]})},ly=({title:t,description:e,kicker:n,actions:s,children:r,showHeader:i=!0})=>u.jsxs("div",{className:"min-h-screen bg-slate-50",children:[u.jsx(o5,{}),u.jsxs("main",{className:"mx-auto w-full max-w-6xl px-4 pb-16 pt-10 sm:px-6 lg:px-8",children:[i&&(t||e||n||s)?u.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6 border-b border-slate-200 pb-8",children:[u.jsxs("div",{className:"max-w-2xl space-y-2",children:[n?u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-brand-600",children:n}):null,t?u.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900 sm:text-4xl",children:t}):null,e?u.jsx("p",{className:"text-base text-slate-500 sm:text-lg",children:e}):null]}),s?u.jsx("div",{className:"flex flex-col items-stretch gap-3 sm:flex-row sm:items-center",children:s}):null]}):null,u.jsx("div",{className:i?"mt-8 space-y-8":"space-y-8",children:r})]})]}),c5=()=>{const[t,e]=N.useState(""),[n,s]=N.useState(""),[r,i]=N.useState(!1),[a,l]=N.useState(""),c=Zn(),d=async f=>{f.preventDefault(),i(!0),l("");try{const p=await(await vk(Jo,t,n)).user.getIdToken(),y=await Aa("/auth/login/firebase",{idToken:p});if(y!=null&&y.token){localStorage.setItem("token",y.token),y.user&&localStorage.setItem("user",JSON.stringify(y.user));const I=y.redirectPath||"/dashboard";c(I,{replace:!0});return}const R=await Aa("/auth/login",{email:t,password:n});if(R!=null&&R.token){localStorage.setItem("token",R.token),R.user&&localStorage.setItem("user",JSON.stringify(R.user));const I=R.redirectPath||"/dashboard";c(I,{replace:!0});return}l((y==null?void 0:y.error)||(R==null?void 0:R.error)||"Inloggen is niet gelukt. Probeer het opnieuw.")}catch{l("Inloggen is niet gelukt. Controleer je gegevens.")}finally{i(!1)}};return u.jsx(ly,{kicker:"Inloggen",title:"Welkom terug bij EVC",description:"Log in om je traject te volgen, bewijsstukken te uploaden en contact te houden met je coach. Nieuwe accounts worden door een administrator aangemaakt.",children:u.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:u.jsx(rI,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Log in op je account"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Gebruik het e-mailadres waarmee je bent aangemeld voor het traject."})]})]}),u.jsxs("form",{onSubmit:d,className:"mt-6 space-y-5",children:[a?u.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:a}):null,u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"login-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),u.jsx("input",{id:"login-email",type:"email",placeholder:"jij@voorbeeld.nl",value:t,onChange:f=>e(f.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"login-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Wachtwoord"}),u.jsx("input",{id:"login-password",type:"password",placeholder:"Vul je wachtwoord in",value:n,onChange:f=>s(f.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("label",{className:"flex items-center gap-2 text-slate-600",children:[u.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),u.jsx("span",{children:"Onthoud mij"})]}),u.jsx("button",{type:"button",onClick:()=>alert("Neem contact op met support om je wachtwoord te resetten."),className:"font-medium text-brand-600 transition hover:text-brand-500",children:"Wachtwoord vergeten?"})]}),u.jsx("button",{type:"submit",disabled:r,className:"mt-4 w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:r?"Bezig met inloggen...":"Inloggen"})]}),u.jsx("p",{className:"mt-6 text-center text-sm text-slate-500",children:"Hulp nodig? Neem contact op met het EVC-team."})]})})},u5=["Je portfolio opbouwen met duidelijke stappen","Bewijsstukken veilig uploaden en beheren","Berichten sturen naar coaches en begeleiders","Voortgang bijhouden via planning en taken"],d5=()=>u.jsxs(ly,{showHeader:!1,children:[u.jsx("section",{className:"overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 via-brand-500 to-brand-400 text-white shadow-xl",children:u.jsxs("div",{className:"grid gap-10 px-8 py-16 sm:px-12 lg:grid-cols-2 lg:px-16",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.32em] text-white/60",children:"EVC platform"}),u.jsx("h1",{className:"mt-6 text-4xl font-semibold leading-tight tracking-tight sm:text-5xl",children:"Welkom bij jouw EVC portfolio"}),u.jsx("p",{className:"mt-6 max-w-xl text-lg text-white/80",children:"Werk stap voor stap naar je erkenning toe. Verzamel bewijsstukken, werk samen met je coach en houd alles op één plek bij."}),u.jsxs("div",{className:"mt-10 flex flex-wrap gap-4",children:[u.jsxs(Yc,{to:"/login",className:"inline-flex items-center justify-center gap-2 rounded-full bg-white px-5 py-3 text-sm font-semibold text-brand-600 shadow-lg shadow-brand-900/10 transition hover:-translate-y-0.5 hover:bg-slate-50",children:["Naar login",u.jsx(Xc,{className:"h-4 w-4"})]}),u.jsx("span",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-white/40 px-5 py-3 text-sm font-semibold text-white/80",children:"Nieuwe accounts? Neem contact op met het EVC-team"})]})]}),u.jsxs("div",{className:"relative isolate",children:[u.jsx("div",{className:"absolute -top-10 right-10 h-32 w-32 rounded-full bg-white/10 blur-3xl","aria-hidden":"true"}),u.jsx("div",{className:"absolute -bottom-12 left-6 h-24 w-24 rounded-full bg-brand-200/40 blur-3xl","aria-hidden":"true"}),u.jsxs("div",{className:"relative rounded-2xl border border-white/20 bg-white/10 p-8 backdrop-blur",children:[u.jsx("h2",{className:"text-xl font-semibold text-white",children:"Alles in één vertrouwde omgeving"}),u.jsx("ul",{className:"mt-6 space-y-4",children:u5.map(t=>u.jsxs("li",{className:"flex items-start gap-3 text-sm text-white/85",children:[u.jsx(ti,{className:"mt-0.5 h-5 w-5 flex-none text-white"}),u.jsx("span",{children:t})]},t))})]})]})]})}),u.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor kandidaten"}),u.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Werk op je eigen tempo aan opdrachten, voeg reflecties toe en beheer bewijsstukken."})]}),u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor coaches"}),u.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Krijg realtime inzicht in voortgang, geef feedback en begeleid kandidaten gericht."})]}),u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Veilig en transparant"}),u.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bewaar bestanden veilig en werk samen in een omgeving met duidelijke rollen en rechten."})]})]}),u.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[u.jsxs(Yc,{to:"/admin",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[u.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:u.jsx(ng,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Bekijk de admin-ervaring"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Navigeer naar het beheerdersdashboard met klantoverzicht en toewijzingen."}),u.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar admin-dashboard",u.jsx(Xc,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]}),u.jsxs(Yc,{to:"/coach",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[u.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:u.jsx(Po,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Ervaar het coachportaal"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Ga direct naar het coachdashboard met klantkaarten, feedback en berichten."}),u.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar coach-dashboard",u.jsx(Xc,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]})]})]});function oy(t){if(!(t!=null&&t.exists()))return null;const e=t.data();return{id:t.id,...e}}function h5(t){const e=[];if(Array.isArray(t)&&t.length>0){const n=t.map(s=>typeof s=="string"?s.trim().toLowerCase():"").filter(Boolean);n.length===1?e.push(Rs("role","==",n[0])):n.length>1&&e.push(Rs("role","in",n.slice(0,10)))}return e}function Ym(t,e={}){const{roles:n}=e,s=Rt(qe,"users"),r=jn(s,...h5(n));return bt(r,i=>{const a=i.docs.map(oy).filter(Boolean).sort((l,c)=>{const d=(l.name||"").toLowerCase(),f=(c.name||"").toLowerCase();return d.localeCompare(f)});t({data:a,error:null})},i=>t({data:null,error:i}))}function f5(t){const e=Rt(qe,"assignments"),n=jn(e,Ci("createdAt","desc"));return bt(n,s=>{const r=s.docs.map(i=>{var l,c;const a=i.data();return{id:i.id,customerId:a.customerId||null,coachId:a.coachId||null,status:a.status||"pending",createdAt:a.createdAt?((c=(l=a.createdAt).toDate)==null?void 0:c.call(l))??a.createdAt:null,createdBy:a.createdBy||null}});t({data:r,error:null})},s=>t({data:null,error:s}))}async function m5({customerId:t,coachId:e,status:n="pending"}){if(!t||!e)throw new Error("customerId and coachId are verplicht");const s=Jo.currentUser,r=(s==null?void 0:s.uid)??null,i=Rt(qe,"assignments");await nh(i,{customerId:t,coachId:e,status:n,createdBy:r,createdAt:ri()})}function XA(t,e){if(!t)return e({data:null,error:new Error("Missing uid")}),()=>{};const n=Cs(qe,"users",t),s=Cs(qe,"adminProfiles",t);let r=null,i=null,a=null,l=null;const c=()=>{if(a||l){e({data:null,error:a||l});return}if(!r){e({data:null,error:null});return}e({data:{...r,...i},error:null})},d=bt(n,m=>{r=oy(m),a=null,c()},m=>{a=m,c()}),f=bt(s,m=>{i=m.exists()?m.data():null,l=null,c()},m=>{l=m,c()});return()=>{d(),f()}}async function p5(){const t=Rt(qe,"users"),e=await GM(t),n=new Map;return e.forEach(s=>{const r=oy(s);r&&n.set(r.id,r)}),n}const g5=()=>{const t=Zn(),[e,n]=N.useState([]),[s,r]=N.useState(null),[i,a]=N.useState(!0),[l,c]=N.useState(null),[d,f]=N.useState(null);N.useEffect(()=>{a(!0);const y=Ym(({data:R,error:I})=>{if(I){r(I),a(!1);return}n(Array.isArray(R)?R:[]),r(null),a(!1)});return()=>{typeof y=="function"&&y()}},[]);const m=y=>y?y.charAt(0).toUpperCase()+y.slice(1):"Onbekend",p=async y=>{var R;if(!(!y||y.role!=="customer")){c(null),f(y.id);try{const I=await Aa("/auth/admin/impersonate",{firebaseUid:y.id});if(!(I!=null&&I.token))throw new Error("Geen sessie ontvangen");const D=localStorage.getItem("token")||null,A=localStorage.getItem("user")||null;let b=null;if(A)try{b=JSON.parse(A)}catch{b=null}const x={token:D,user:A,userData:b,customerFirebaseUid:y.id,customerName:y.name||"",createdAt:new Date().toISOString()};localStorage.setItem("impersonationBackup",JSON.stringify(x)),localStorage.setItem("token",I.token),I.user?localStorage.setItem("user",JSON.stringify(I.user)):localStorage.removeItem("user"),t("/customer",{replace:!0})}catch(I){const D=((R=I==null?void 0:I.data)==null?void 0:R.error)||(I==null?void 0:I.message)||"Kon klantomgeving niet openen";c(D)}finally{f(null)}}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Customer accounts"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beheer klantprofielen en stap in hun omgeving om hun voortgang in te zien."})]}),s?u.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Kan accounts niet laden: ",s.message||"Onbekende fout"]}):null,l?u.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:l}):null,u.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[u.jsx("thead",{className:"bg-slate-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Naam"}),u.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"E-mail"}),u.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Rol"}),u.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actie"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:i?u.jsx("tr",{children:u.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Accounts laden..."})}):e.length===0?u.jsx("tr",{children:u.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Nog geen accounts gevonden."})}):e.map(y=>{const R=y.role==="customer";return u.jsxs("tr",{className:"hover:bg-slate-50",children:[u.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:y.name||"Naam onbekend"}),u.jsx("td",{className:"px-4 py-3",children:y.email?u.jsx("a",{href:`mailto:${y.email}`,className:"text-brand-600 hover:text-brand-500",children:y.email}):u.jsx("span",{className:"text-slate-400",children:"Geen e-mail"})}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:m(y.role)})}),u.jsx("td",{className:"px-4 py-3 text-right",children:u.jsx("button",{type:"button",onClick:()=>p(y),className:`inline-flex items-center gap-2 rounded-full px-3 py-2 text-xs font-semibold transition ${R&&d!==y.id?"bg-brand-600 text-white shadow-sm hover:bg-brand-500":"cursor-not-allowed bg-slate-100 text-slate-400"}`,disabled:!R||d===y.id,children:R?d===y.id?"Bezig...":"Open as Customer":"Alleen klanten"})})]},y.id)})})]})})]})},y5=()=>{const[t,e]=N.useState([]),[n,s]=N.useState([]),[r,i]=N.useState([]),[a,l]=N.useState({customerId:"",coachId:""}),[c,d]=N.useState(!0),[f,m]=N.useState(!0),[p,y]=N.useState(!0),[R,I]=N.useState(!1),[D,A]=N.useState(null),[b,x]=N.useState({customers:null,coaches:null,assignments:null});N.useEffect(()=>{const _=Ym(({data:w,error:k})=>{if(k){x(C=>({...C,customers:k})),d(!1);return}x(C=>({...C,customers:null})),e(Array.isArray(w)?w:[]),d(!1)},{roles:["customer"]}),v=Ym(({data:w,error:k})=>{if(k){x(C=>({...C,coaches:k})),m(!1);return}x(C=>({...C,coaches:null})),s(Array.isArray(w)?w:[]),m(!1)},{roles:["coach"]}),S=f5(({data:w,error:k})=>{if(k){x(C=>({...C,assignments:k})),y(!1);return}x(C=>({...C,assignments:null})),i(Array.isArray(w)?w:[]),y(!1)});return()=>{typeof _=="function"&&_(),typeof v=="function"&&v(),typeof S=="function"&&S()}},[]),N.useEffect(()=>{l(_=>{var v;return{..._,customerId:_.customerId||((v=t[0])==null?void 0:v.id)||""}})},[t]),N.useEffect(()=>{l(_=>{var v;return{..._,coachId:_.coachId||((v=n[0])==null?void 0:v.id)||""}})},[n]);const j=_=>{const{name:v,value:S}=_.target;l(w=>({...w,[v]:S}))},U=_=>{if(_.preventDefault(),!a.customerId||!a.coachId){A({type:"error",message:"Selecteer zowel een klant als een coach."});return}I(!0),A(null),m5({customerId:a.customerId,coachId:a.coachId}).then(()=>{A({type:"success",message:"Toewijzing opgeslagen."})}).catch(v=>{A({type:"error",message:(v==null?void 0:v.message)||"Toewijzing mislukt."})}).finally(()=>{I(!1)})},B=N.useMemo(()=>{const _=new Map;return t.forEach(v=>_.set(v.id,v)),n.forEach(v=>_.set(v.id,v)),_},[t,n]),T=()=>{if(!D)return null;const v=D.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return u.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${v}`,children:D.message})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Assignments"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Pair customers with their coaches and keep the overview tidy."})]}),T(),u.jsxs("form",{onSubmit:U,className:"grid gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm sm:grid-cols-4 sm:items-end",children:[u.jsxs("div",{className:"sm:col-span-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Customer"}),u.jsxs("select",{name:"customerId",value:a.customerId,onChange:j,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:c||t.length===0,children:[c?u.jsx("option",{value:"",children:"Laden..."}):null,!c&&t.length===0?u.jsx("option",{value:"",children:"Geen klanten beschikbaar"}):null,t.map(_=>u.jsx("option",{value:_.id,children:_.name||_.email},_.id))]})]}),u.jsxs("div",{className:"sm:col-span-1",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Coach"}),u.jsxs("select",{name:"coachId",value:a.coachId,onChange:j,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:f||n.length===0,children:[f?u.jsx("option",{value:"",children:"Laden..."}):null,!f&&n.length===0?u.jsx("option",{value:"",children:"Geen coaches beschikbaar"}):null,n.map(_=>u.jsx("option",{value:_.id,children:_.name||_.email},_.id))]})]}),u.jsx("div",{className:"sm:col-span-1",children:u.jsx("button",{type:"submit",disabled:R||!a.customerId||!a.coachId,className:"inline-flex w-full items-center justify-center rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:R?"Bezig...":"Assign"})})]}),b.customers?u.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Klanten konden niet geladen worden: ",b.customers.message||"Onbekende fout"]}):null,b.coaches?u.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Coaches konden niet geladen worden: ",b.coaches.message||"Onbekende fout"]}):null,b.assignments?u.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Toewijzingen konden niet geladen worden: ",b.assignments.message||"Onbekende fout"]}):null,u.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[u.jsx("thead",{className:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3",children:"Customer"}),u.jsx("th",{className:"px-4 py-3",children:"Coach"}),u.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:p?u.jsx("tr",{children:u.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"Toewijzingen laden..."})}):r.length===0?u.jsx("tr",{children:u.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"No assignments yet."})}):r.map(_=>{var v,S,w,k;return u.jsxs("tr",{className:"hover:bg-slate-50",children:[u.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:((v=B.get(_.customerId))==null?void 0:v.name)||((S=B.get(_.customerId))==null?void 0:S.email)||"Onbekende klant"}),u.jsx("td",{className:"px-4 py-3",children:((w=B.get(_.coachId))==null?void 0:w.name)||((k=B.get(_.coachId))==null?void 0:k.email)||"Onbekende coach"}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:_.status})})]},_.id)})})]})})]})},id=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Math.random().toString(36).slice(2,10)}`,ad=()=>({id:id(),code:"",title:"",description:"",desiredOutcome:"",subjectKnowledge:"",behavioralComponents:""}),lu=()=>({id:id(),code:"",title:"",competencies:[ad()]}),Cb=()=>({id:null,name:"",description:"",competencyGroups:[lu()]}),_5=t=>{if(!t)return"-";try{const e=typeof t=="string"?new Date(t):t;return Number.isNaN(e.getTime())?"-":new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"short",day:"numeric"}).format(e)}catch{return"-"}},v5=(t,e=0)=>({id:id(),code:(t==null?void 0:t.code)||"",title:(t==null?void 0:t.title)||"",order:(t==null?void 0:t.order)??e,competencies:Array.isArray(t==null?void 0:t.competencies)&&t.competencies.length>0?[...t.competencies].sort((n,s)=>((n==null?void 0:n.order)??(n==null?void 0:n.competencyOrder)??0)-((s==null?void 0:s.order)??(s==null?void 0:s.competencyOrder)??0)).map(n=>({id:id(),code:(n==null?void 0:n.code)||"",title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",desiredOutcome:(n==null?void 0:n.desiredOutcome)||"",subjectKnowledge:(n==null?void 0:n.subjectKnowledge)||"",behavioralComponents:(n==null?void 0:n.behavioralComponents)||""})):[ad()]}),b5=()=>{const[t,e]=N.useState([]),[n,s]=N.useState(!0),[r,i]=N.useState(null),[a,l]=N.useState(null),[c,d]=N.useState(!1),[f,m]=N.useState(null),[p,y]=N.useState(Cb),[R,I]=N.useState(!1),[D,A]=N.useState(null),[b,x]=N.useState(null),j=!!p.id,U=R||c,B=N.useCallback(async()=>{s(!0),i(null);try{const K=await Ts("/trajects"),Z=Array.isArray(K)?K:[];return e(Z),Z}catch(K){const Z=(K==null?void 0:K.message)||"Kon trajecten niet ophalen";return i(Z),e([]),[]}finally{s(!1)}},[]),T=N.useCallback(()=>{l(null),y(Cb()),m(null),A(null),x(null)},[]),_=N.useCallback(async K=>{if(K){d(!0),m(null);try{const Z=await Ts(`/trajects/${K}`),Q=(Array.isArray(Z==null?void 0:Z.competencyGroups)?Z.competencyGroups:[]).map((G,J)=>v5(G,J)).sort((G,J)=>(G.order??0)-(J.order??0)).map(({order:G,...J})=>J);y({id:(Z==null?void 0:Z.id)||K,name:(Z==null?void 0:Z.name)||"",description:(Z==null?void 0:Z.description)||"",competencyGroups:Q.length>0?Q:[lu()]}),l(K)}catch(Z){const P=(Z==null?void 0:Z.message)||"Kon traject niet laden";m(P)}finally{d(!1)}}},[]);N.useEffect(()=>{B()},[B]),N.useEffect(()=>{if(!b&&!D)return()=>{};const K=setTimeout(()=>{x(null),A(null)},4e3);return()=>clearTimeout(K)},[b,D]);const v=K=>{const{name:Z,value:P}=K.target;y(Q=>({...Q,[Z]:P}))},S=(K,Z,P)=>{y(Q=>({...Q,competencyGroups:Q.competencyGroups.map(G=>G.id===K?{...G,[Z]:P}:G)}))},w=()=>{U||y(K=>({...K,competencyGroups:[...K.competencyGroups,lu()]}))},k=K=>{U||y(Z=>{const P=Z.competencyGroups.filter(Q=>Q.id!==K);return{...Z,competencyGroups:P.length>0?P:[lu()]}})},C=(K,Z,P,Q)=>{y(G=>({...G,competencyGroups:G.competencyGroups.map(J=>J.id!==K?J:{...J,competencies:J.competencies.map(Ge=>Ge.id===Z?{...Ge,[P]:Q}:Ge)})}))},ae=K=>{U||y(Z=>({...Z,competencyGroups:Z.competencyGroups.map(P=>P.id===K?{...P,competencies:[...P.competencies,ad()]}:P)}))},he=(K,Z)=>{U||y(P=>({...P,competencyGroups:P.competencyGroups.map(Q=>{if(Q.id!==K)return Q;const G=Q.competencies.filter(J=>J.id!==Z);return{...Q,competencies:G.length>0?G:[ad()]}})}))},z=N.useMemo(()=>p.competencyGroups.map((K,Z)=>{const P=K.code.trim(),Q=K.title.trim(),G=K.competencies.map((J,Ge)=>{const kn={code:J.code.trim(),title:J.title.trim(),description:J.description.trim(),desiredOutcome:J.desiredOutcome.trim(),subjectKnowledge:J.subjectKnowledge.trim(),behavioralComponents:J.behavioralComponents.trim()};return Object.values(kn).some(Tn=>Tn.length>0)?{...kn,rawId:J.id,groupId:K.id,competencyIndex:Ge}:null}).filter(Boolean);return{id:K.id,groupIndex:Z,trimmedCode:P,trimmedTitle:Q,competencies:G}}).filter(K=>K.trimmedCode||K.trimmedTitle||K.competencies.length>0),[p.competencyGroups]),V=N.useMemo(()=>z.some(K=>!K.trimmedCode||!K.trimmedTitle),[z]),O=N.useMemo(()=>z.some(K=>K.competencies.some(Z=>!Z.code||!Z.title||!Z.desiredOutcome||!Z.subjectKnowledge||!Z.behavioralComponents)),[z]),$=N.useMemo(()=>z.filter(K=>K.competencies.length>0),[z]),Y=N.useMemo(()=>!(U||!p.name.trim()||$.length===0||V||O),[U,p.name,$,V,O]),fe=async K=>{var P;if(K.preventDefault(),!Y)return;I(!0),A(null),x(null);const Z={name:p.name.trim(),description:p.description.trim(),competencyGroups:$.map((Q,G)=>({code:Q.trimmedCode,title:Q.trimmedTitle,order:G,competencies:Q.competencies.map((J,Ge)=>({code:J.code,title:J.title,description:J.description,desiredOutcome:J.desiredOutcome,subjectKnowledge:J.subjectKnowledge,behavioralComponents:J.behavioralComponents,order:Ge}))}))};try{if(j)await rw(`/trajects/${p.id}`,Z),x("Traject bijgewerkt"),await B(),await _(p.id);else{const Q=await Aa("/trajects",Z);x("Nieuw traject opgeslagen");const G=await B(),J=(Q==null?void 0:Q.id)||((P=G.find(Ge=>Ge.name===Z.name))==null?void 0:P.id)||null;J?await _(J):T()}}catch(Q){A((Q==null?void 0:Q.message)||"Opslaan mislukt")}finally{I(!1)}},ne=N.useMemo(()=>t.find(K=>K.id===a)||null,[t,a]),ke=$.reduce((K,Z)=>K+Z.competencies.length,0);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Trajectbeheer"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Maak nieuwe trajecten aan of bewerk bestaande trajecten en competenties. Wijzigingen zijn direct zichtbaar voor deelnemers en coaches."})]}),u.jsxs("div",{className:"grid gap-8 xl:grid-cols-[minmax(0,1fr)_360px]",children:[u.jsxs("form",{onSubmit:fe,className:"relative space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[c&&u.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-2xl bg-white/70",children:u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[u.jsx(lf,{className:"h-4 w-4 animate-spin"}),"Traject laden..."]})}),u.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-slate-50/60 p-4 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:j?"Bewerk traject":"Nieuw traject"}),u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:j?p.name||(ne==null?void 0:ne.name)||"Naamloos traject":"Maak een nieuw traject"})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[j&&ne&&u.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700",children:[u.jsx(ti,{className:"h-3.5 w-3.5"}),"Gekoppeld: ",ne.competencyCount||0," competenties"]}),u.jsx("button",{type:"button",onClick:T,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 transition hover:border-slate-300 hover:text-slate-900",children:"Nieuw traject"})]})]}),f&&u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:f}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"traject-name",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Trajectnaam"}),u.jsx("input",{id:"traject-name",name:"name",value:p.name,onChange:v,disabled:U,placeholder:"Bijvoorbeeld: Sociaal Werk Niveau 5",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"traject-description",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Beschrijving"}),u.jsx("textarea",{id:"traject-description",name:"description",value:p.description,onChange:v,disabled:U,rows:3,placeholder:"Optioneel. Geef een korte toelichting voor coaches.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Competentie-structuur"}),u.jsxs("p",{className:"text-xs text-slate-500",children:["Groepeer competenties per betekenisvolle cluster, zoals ",u.jsx("strong",{children:"B1-K1"})," met meerdere werkprocessen."]})]}),u.jsxs("button",{type:"button",onClick:w,disabled:U,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-300",children:[u.jsx(q_,{className:"h-4 w-4"}),"Nieuw cluster"]})]}),p.competencyGroups.map((K,Z)=>u.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-5 shadow-sm",children:[u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:["Cluster ",Z+1]}),u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Competentiegebied"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Bijvoorbeeld B1-K1 met een herkenbare titel."})]}),u.jsxs("button",{type:"button",onClick:()=>k(K.id),disabled:U,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[u.jsx(F_,{className:"h-4 w-4"}),"Verwijder cluster"]})]}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster code"}),u.jsx("input",{value:K.code,onChange:P=>S(K.id,"code",P.target.value),disabled:U,placeholder:"Bijv. B1-K1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster naam"}),u.jsx("input",{value:K.title,onChange:P=>S(K.id,"title",P.target.value),disabled:U,placeholder:"Bijv. Analyseren van ondersteuningsvragen",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),u.jsxs("div",{className:"space-y-4",children:[K.competencies.map((P,Q)=>u.jsxs("div",{className:"space-y-4 rounded-xl border border-slate-200 p-4 shadow-sm",children:[u.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Competentie ",Q+1]}),u.jsx("p",{className:"text-sm text-slate-500",children:"Vul de werkprocescode en aanvullende velden in."})]}),u.jsxs("button",{type:"button",onClick:()=>he(K.id,P.id),disabled:U,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[u.jsx(F_,{className:"h-4 w-4"}),"Verwijder competentie"]})]}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Code"}),u.jsx("input",{value:P.code,onChange:G=>C(K.id,P.id,"code",G.target.value),disabled:U,placeholder:"Bijv. B1-K1-W1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Titel"}),u.jsx("input",{value:P.title,onChange:G=>C(K.id,P.id,"title",G.target.value),disabled:U,placeholder:"Bijv. Ondersteuningsvragen analyseren",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[u.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Omschrijving"}),u.jsx("textarea",{value:P.description,onChange:G=>C(K.id,P.id,"description",G.target.value),disabled:U,rows:2,placeholder:"Optioneel. Beschrijf het werkproces kort.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gewenst resultaat"}),u.jsx("textarea",{value:P.desiredOutcome,onChange:G=>C(K.id,P.id,"desiredOutcome",G.target.value),disabled:U,rows:2,placeholder:"Wat moet er bereikt worden?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Vakkennis"}),u.jsx("textarea",{value:P.subjectKnowledge,onChange:G=>C(K.id,P.id,"subjectKnowledge",G.target.value),disabled:U,rows:2,placeholder:"Welke kennis is nodig?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gedragscomponenten"}),u.jsx("textarea",{value:P.behavioralComponents,onChange:G=>C(K.id,P.id,"behavioralComponents",G.target.value),disabled:U,rows:2,placeholder:"Welke houding wordt verwacht?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]})]},P.id)),u.jsxs("button",{type:"button",onClick:()=>ae(K.id),disabled:U,className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 transition hover:border-brand-400 hover:text-brand-700 disabled:cursor-not-allowed disabled:border-brand-100 disabled:text-brand-200",children:[u.jsx(q_,{className:"h-4 w-4"}),"Voeg competentie toe"]})]})]},K.id))]}),u.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{className:"space-y-1 text-sm",children:[b&&u.jsx("p",{className:"text-sm font-medium text-emerald-600",children:b}),D&&u.jsx("p",{className:"text-sm font-medium text-red-600",children:D}),!b&&!D&&u.jsxs("p",{className:"text-xs text-slate-500",children:["Je traject bevat ",ke," competenties verdeeld over ",$.length," clusters."]})]}),u.jsxs("button",{type:"submit",disabled:!Y,className:"inline-flex items-center gap-2 rounded-full bg-brand-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-600 disabled:cursor-not-allowed disabled:bg-slate-300",children:[R?u.jsx(lf,{className:"h-4 w-4 animate-spin"}):u.jsx(ti,{className:"h-4 w-4"}),j?"Wijzigingen opslaan":"Traject opslaan"]})]})]}),u.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Trajecten"}),u.jsxs("button",{type:"button",onClick:B,disabled:n,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-slate-300 hover:text-slate-700 disabled:cursor-not-allowed disabled:text-slate-300",children:[u.jsx(gI,{className:n?"h-4 w-4 animate-spin":"h-4 w-4"}),"Vernieuwen"]})]}),n?u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[u.jsx(lf,{className:"h-4 w-4 animate-spin"})," Trajecten laden..."]}):r?u.jsx("p",{className:"text-sm text-red-600",children:r}):t.length===0?u.jsx("p",{className:"text-sm text-slate-500",children:"Er zijn nog geen trajecten aangemaakt."}):u.jsx("ul",{className:"space-y-3",children:t.map(K=>{var P;const Z=K.id===a;return u.jsx("li",{children:u.jsxs("button",{type:"button",onClick:()=>_(K.id),className:`w-full text-left transition focus:outline-none focus:ring-2 focus:ring-brand-200 ${Z?"rounded-xl border border-brand-300 bg-brand-50 p-4 shadow-sm":"rounded-xl border border-slate-200 p-4 shadow-sm hover:border-brand-200 hover:bg-brand-50/60"}`,children:[u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-base font-semibold text-slate-900",children:K.name}),u.jsxs("p",{className:"text-xs text-slate-500",children:[((P=K.competencyGroups)==null?void 0:P.length)||0," clusters · ",K.competencyCount||0," competenties"]})]}),Z&&u.jsx(ti,{className:"h-4 w-4 text-brand-600"})]}),u.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:["Laatst bijgewerkt: ",_5(K.updatedAt)]})]})},K.id)})})]})]})]})},x5=()=>{const[t,e]=N.useState(null),[n,s]=N.useState(null),[r,i]=N.useState(!0),[a,l]=N.useState(null);N.useEffect(()=>{let I=!0;const D=localStorage.getItem("user");if(D)try{const b=JSON.parse(D);b!=null&&b.firebaseUid&&I&&e(b.firebaseUid)}catch{}const A=qw(Jo,b=>{I&&e(x=>x||(b==null?void 0:b.uid)||null)});return()=>{I=!1,A()}},[]),N.useEffect(()=>{if(!t){i(!1);return}i(!0);const I=XA(t,({data:D,error:A})=>{if(A){l(A),i(!1);return}s(D),l(null),i(!1)});return()=>{typeof I=="function"&&I()}},[t]);const c=(n==null?void 0:n.securityClearance)||null,d=N.useMemo(()=>{if(!(c!=null&&c.badge))return H_;switch(String(c.badge).toLowerCase()){case"shield-check":case"check":return SI;case"alert":case"shield-alert":return wI;case"question":case"shield-question":return CI;default:return H_}},[c]),f=Array.isArray(n==null?void 0:n.highlights)?n.highlights:[],m=Array.isArray(n==null?void 0:n.responsibilities)?n.responsibilities:[],p=Array.isArray(n==null?void 0:n.certifications)?n.certifications:[],y=n!=null&&n.role?n.role.charAt(0).toUpperCase()+n.role.slice(1):"Admin",R=(n==null?void 0:n.name)||(n==null?void 0:n.email)||"Admin";return r?u.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Profiel laden..."}):a?u.jsxs("div",{className:"rounded-3xl border border-red-200 bg-red-50 px-6 py-8 text-center text-sm text-red-700 shadow-sm",children:["Kon profiel niet laden: ",a.message||"Onbekende fout"]}):n?u.jsxs("div",{className:"space-y-8",children:[u.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 px-8 py-10 text-white shadow-card",children:[u.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/60",children:"Profile"}),u.jsxs("div",{className:"mt-4 flex flex-col justify-between gap-6 lg:flex-row lg:items-end",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-semibold",children:R}),u.jsx("p",{className:"mt-2 text-white/80",children:y}),u.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/70",children:n.bio||"Nog geen biografie toegevoegd."})]}),u.jsxs("dl",{className:"grid grid-cols-3 gap-4",children:[f.length===0?u.jsx("div",{className:"col-span-3 text-sm text-white/70",children:"Nog geen statistieken vastgelegd."}):null,f.map(I=>u.jsxs("div",{className:"rounded-2xl bg-white/10 px-4 py-3 text-center shadow-inner backdrop-blur",children:[u.jsx("dt",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:I.label}),u.jsx("dd",{className:"mt-2 text-2xl font-semibold",children:I.metric})]},I.id))]})]})]}),u.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.2fr,1fr]",children:[u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[u.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Contact & verantwoordelijkheden"}),u.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"E-mail"}),u.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.email||"-"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Telefoon"}),u.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.phone||"Niet opgegeven"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Locatie"}),u.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.location||"Niet opgegeven"})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Kernverantwoordelijkheden"}),m.length===0?u.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Nog geen verantwoordelijkheden toegevoegd."}):u.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:m.map(I=>u.jsxs("li",{className:"flex items-center gap-3 rounded-xl bg-slate-50 px-3 py-2",children:[u.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-brand-500"}),u.jsx("span",{children:I})]},I))})]})]})]}),u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[u.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Beveiliging"}),u.jsxs("div",{className:"mt-4 flex items-center gap-4 rounded-2xl bg-brand-50 px-4 py-5 text-brand-700",children:[d?u.jsx(d,{className:"h-10 w-10"}):null,u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm font-semibold",children:["Toegangsniveau: ",(c==null?void 0:c.level)||"Onbekend"]}),u.jsxs("p",{className:"text-sm text-brand-600",children:["Laatste verlenging: ",(c==null?void 0:c.renewedOn)||"Niet geregistreerd"]})]})]}),u.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Administratieve gebruikers hebben uitgebreide rechten om deelnemers, coaches en bewijsstukken te beheren. Houd de logboeken in de gaten en plan jaarlijkse veiligheidsaudits."})]})]}),u.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[u.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Certificeringen & professionalisering"}),u.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[p.length===0?u.jsx("p",{className:"col-span-full text-sm text-slate-500",children:"Nog geen certificeringen geregistreerd."}):null,p.map(I=>u.jsxs("article",{className:"rounded-2xl border border-slate-100 p-4 shadow-sm transition hover:border-brand-300 hover:shadow-md",children:[u.jsx("p",{className:"text-sm font-semibold text-slate-900",children:I.title||"Certificering"}),u.jsx("p",{className:"text-xs text-slate-500",children:I.issuer||"Onbekende instantie"}),u.jsxs("p",{className:"mt-3 text-xs uppercase tracking-[0.2em] text-slate-400",children:["Behaald in ",I.year||"-"]})]},I.id))]})]})]}):u.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Geen profielgegevens gevonden. Zorg dat je account is gekoppeld aan Firebase."})},E5=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],Rb={name:"",email:"",password:"",role:"customer",trajectId:""},T5=({status:t})=>{if(!(t!=null&&t.message))return null;const e=t.type==="error",n=e?KR:ti,s=e?"text-red-600 bg-red-50 border-red-200":"text-emerald-600 bg-emerald-50 border-emerald-200";return u.jsxs("div",{className:`mb-6 flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${s}`,children:[u.jsx(n,{className:"h-5 w-5"}),u.jsx("span",{children:t.message})]})},w5=()=>{const[t,e]=N.useState([]),[n,s]=N.useState(Rb),[r,i]=N.useState(!1),[a,l]=N.useState(null),[c,d]=N.useState(!1),[f,m]=N.useState([]),[p,y]=N.useState(!1),R=N.useMemo(()=>{const x=new Map;return f.forEach(j=>{x.set(j.id,j)}),x},[f]),I=async()=>{d(!0);try{const x=await Ts("/auth/admin/users");e(Array.isArray(x)?x:[])}catch(x){l({type:"error",message:(x==null?void 0:x.message)||"Kon gebruikers niet laden"})}finally{d(!1)}},D=async()=>{y(!0);try{const x=await Ts("/trajects"),j=Array.isArray(x)?x:[];m(j),s(U=>{var B;return{...U,trajectId:((B=j[0])==null?void 0:B.id)||""}})}catch(x){l({type:"error",message:(x==null?void 0:x.message)||"Kon trajecten niet laden"})}finally{y(!1)}};N.useEffect(()=>{I(),D()},[]);const A=x=>{const{name:j,value:U}=x.target;s(B=>{var T;if(j==="role"){if(U==="customer"){const _=((T=f[0])==null?void 0:T.id)||B.trajectId||"";return{...B,role:U,trajectId:_}}return{...B,role:U}}return{...B,[j]:U}})},b=async x=>{var j,U;x.preventDefault(),i(!0),l(null);try{const B={name:n.name.trim(),email:n.email.trim(),password:n.password,role:n.role,trajectId:n.role==="customer"?n.trajectId:null};await Aa("/auth/admin/users",B),l({type:"success",message:"Account aangemaakt"}),s({...Rb,trajectId:((j=f[0])==null?void 0:j.id)||""}),await I()}catch(B){l({type:"error",message:((U=B==null?void 0:B.data)==null?void 0:U.error)||(B==null?void 0:B.message)||"Aanmaken mislukt"})}finally{i(!1)}};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Admin"}),u.jsx("h1",{className:"mt-1 text-2xl font-semibold text-slate-900",children:"Beheer gebruikers"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Maak nieuwe accounts voor coaches en deelnemers."})]}),u.jsxs("div",{className:"hidden items-center gap-2 rounded-full bg-brand-50 px-4 py-2 text-sm font-medium text-brand-600 sm:flex",children:[u.jsx(Po,{className:"h-4 w-4"}),u.jsxs("span",{children:[t.length," actieve gebruikers"]})]})]}),u.jsx(T5,{status:a}),u.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[u.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:u.jsx(sw,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nieuw account"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Voer de gegevens in en kies de juiste rol."})]})]}),u.jsxs("form",{onSubmit:b,className:"mt-6 space-y-5",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"user-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Volledige naam"}),u.jsx("input",{id:"user-name",name:"name",value:n.name,onChange:A,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Kim de Vries",required:!0})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"user-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),u.jsx("input",{id:"user-email",name:"email",type:"email",value:n.email,onChange:A,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"jij@voorbeeld.nl",required:!0})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"user-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),u.jsx("input",{id:"user-password",name:"password",type:"password",value:n.password,onChange:A,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Minimaal 8 tekens",required:!0}),u.jsx("p",{className:"text-xs text-slate-400",children:"De gebruiker kan dit wachtwoord later wijzigen."})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"user-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),u.jsx("select",{id:"user-role",name:"role",value:n.role,onChange:A,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:E5.map(x=>u.jsx("option",{value:x.value,children:x.label},x.value))})]}),n.role==="customer"?u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"user-traject",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Traject"}),u.jsxs("select",{id:"user-traject",name:"trajectId",value:n.trajectId,onChange:A,disabled:p||f.length===0,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:text-slate-400",required:!0,children:[f.length===0?u.jsx("option",{value:"",children:"Geen trajecten beschikbaar"}):null,f.map(x=>u.jsx("option",{value:x.id,children:x.name},x.id))]}),u.jsx("p",{className:"text-xs text-slate-400",children:"Wijs deze deelnemer aan een traject toe. Dit bepaalt welke competenties zichtbaar zijn."})]}):null,u.jsx("button",{type:"submit",disabled:r,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:r?"Account aanmaken...":"Account aanmaken"})]})]}),u.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bestaande gebruikers"}),u.jsx("span",{className:"text-xs font-medium uppercase tracking-[0.2em] text-slate-400",children:c?"Bezig met laden...":"Laatste update"})]}),u.jsx("div",{className:"mt-4 max-h-[420px] space-y-4 overflow-y-auto pr-2",children:t.length===0?u.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 p-6 text-sm text-slate-500",children:"Nog geen gebruikers gevonden. Voeg de eerste toe via het formulier hiernaast."}):t.map(x=>{var j;return u.jsxs("article",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-900",children:x.name||"Naam onbekend"}),u.jsx("p",{className:"text-xs text-slate-500",children:x.email}),x.trajectId?u.jsxs("p",{className:"text-xs text-slate-400",children:["Traject: ",((j=R.get(x.trajectId))==null?void 0:j.name)||x.trajectId]}):null]}),u.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:x.role})]},x.id)})})]})]})]})},A5=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],S5=()=>{const[t,e]=N.useState({name:"",email:"",password:"",role:"customer"}),[n,s]=N.useState(!1),[r,i]=N.useState(null),a=c=>{const{name:d,value:f}=c.target;e(m=>({...m,[d]:f}))},l=async c=>{var d;c.preventDefault(),s(!0),i(null);try{const f="http://localhost:5000",m={name:t.name.trim(),email:t.email.trim(),password:t.password,role:t.role},p=await fetch(`${f}/auth/admin/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),y=p.headers.get("content-type")||"";let R=null;if(y.includes("application/json"))try{R=await p.json()}catch{R=null}else try{R=await p.text()}catch{R=null}if(!p.ok){const I=R&&R.error||typeof R=="string"&&R||p.statusText||"Aanmaken mislukt",D=new Error(I);throw D.status=p.status,D}i({type:"success",message:"Account aangemaakt"}),e({name:"",email:"",password:"",role:"customer"})}catch(f){const m=((d=f==null?void 0:f.data)==null?void 0:d.error)||(f==null?void 0:f.message)||"Aanmaken mislukt";i({type:"error",message:m})}finally{s(!1)}};return u.jsx(ly,{kicker:"Testing",title:"Test account aanmaken",description:"Gebruik dit formulier om snel een account aan te maken via de admin endpoint.",children:u.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:u.jsx(sw,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Nieuwe gebruiker"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Deze testpagina maakt direct een account aan zonder ingelogd te zijn."})]})]}),r!=null&&r.message?u.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${r.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:r.message}):null,u.jsxs("form",{onSubmit:l,className:"mt-6 space-y-5",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"test-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Naam"}),u.jsx("input",{id:"test-name",name:"name",value:t.name,onChange:a,placeholder:"Bijv. Daniël Vermeer",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"test-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),u.jsx("input",{id:"test-email",name:"email",type:"email",value:t.email,onChange:a,placeholder:"jij@voorbeeld.nl",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"test-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),u.jsx("input",{id:"test-password",name:"password",type:"password",value:t.password,onChange:a,placeholder:"Minimaal 8 tekens",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"test-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),u.jsx("select",{id:"test-role",name:"role",value:t.role,onChange:a,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:A5.map(c=>u.jsx("option",{value:c.value,children:c.label},c.value))})]}),u.jsx("button",{type:"submit",disabled:n,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:n?"Bezig...":"Account aanmaken"})]})]})})},Da=({label:t="Loading"})=>u.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-12 text-sm text-slate-500",children:[u.jsx("span",{className:"inline-flex h-12 w-12 animate-spin items-center justify-center rounded-full border-4 border-slate-200 border-t-brand-500"}),u.jsxs("p",{children:[t,"…"]})]});function N5(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,name:e.name||"",description:e.description||"",competencyCount:e.competencyCount??null,...e}}function Ib(t){return t?Array.isArray(t)?t.filter(e=>e!=null):typeof t=="string"?t.split(/\r?\n/).map(e=>e.trim()).filter(Boolean):[t]:[]}function C5(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,code:e.code||"",title:e.title||"",description:e.description||"",desiredOutcome:e.desiredOutcome||e.gewenstResultaat||"",subjectKnowledge:Ib(e.subjectKnowledge||e.vakkennis||e.vakkennisEnVaardigheden),behavioralComponents:Ib(e.behavioralComponents||e.gedragsComponenten||e.behavioral||e.gedragscomponenten),groupCode:e.groupCode||"",groupTitle:e.groupTitle||"",groupOrder:e.groupOrder??0,competencyOrder:e.competencyOrder??0,order:e.order??0}}function jb(t){var n,s;if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,name:e.name||"",email:e.email||"",role:e.role||"",trajectId:e.trajectId||null,coachId:e.coachId||null,lastActivity:e.lastActivity?((s=(n=e.lastActivity).toDate)==null?void 0:s.call(n))??e.lastActivity:null}}async function R5(t){if(!t)return null;const e=Cs(qe,"trajects",t),n=await FM(e);return N5(n)}function I5(t){return!Array.isArray(t)||t.length===0?null:t.map(e=>{var s,r;const n=e.data()||{};return{id:e.id,coachId:n.coachId||null,customerId:n.customerId||null,status:n.status||"",createdAt:n.createdAt?((r=(s=n.createdAt).toDate)==null?void 0:r.call(s))??n.createdAt:null}}).sort((e,n)=>{const s=e.createdAt instanceof Date?e.createdAt.getTime():0;return(n.createdAt instanceof Date?n.createdAt.getTime():0)-s})[0]}function j5(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{},n=e.uploadedAt?typeof e.uploadedAt.toDate=="function"?e.uploadedAt.toDate():e.uploadedAt:null,s=e.name||e.displayName||e.fileName||t.id;return{id:t.id,name:s,displayName:s,fileName:e.fileName||s,downloadURL:e.downloadURL||"",storagePath:e.storagePath||"",competencyId:e.competencyId||"",userId:e.userId||"",trajectId:e.trajectId||null,uploadedAt:n,contentType:e.contentType||"",size:e.size??null}}async function k5({userId:t,competencyId:e,file:n,displayName:s,trajectId:r}){if(!t)throw new Error("userId is verplicht");if(!e)throw new Error("competencyId is verplicht");if(!n)throw new Error("Bestand ontbreekt");const i=(s||n.name||"Bestand").trim(),a=n.name||"upload",l=`user_uploads/${t}/${e}/${Date.now()}-${a}`,c=$A(ay,l),d=n.type?{contentType:n.type}:void 0;await e5(c,n,d);const f=await QA(c),m=Rt(qe,"users",t,"uploads");await nh(m,{name:i,fileName:a,downloadURL:f,storagePath:l,competencyId:e,userId:t,trajectId:r||null,uploadedAt:ri(),contentType:n.type||null,size:typeof n.size=="number"?n.size:null})}function JA(t,e){if(!t)return e({uploads:[],error:new Error("Missing user id")}),()=>{};const n=Rt(qe,"users",t,"uploads"),s=jn(n,Ci("uploadedAt","desc"));return bt(s,r=>{const i=r.docs.map(j5).filter(Boolean);e({uploads:i,error:null})},r=>{e({uploads:[],error:r})})}async function D5(t){if(!t)return null;if(t.downloadURL)return t.downloadURL;if(!t.storagePath)return null;const e=$A(ay,t.storagePath);return QA(e)}function O5(t,e){if(!t)return e({customer:null,coach:null,assignment:null,error:new Error("Missing user id")}),()=>{};let n=null,s={customer:null,coach:null,assignment:null};const r=(f={},m=null)=>{s={...s,...f},e({...s,error:m})},i=f=>{if(n&&(n(),n=null),!f){r({coach:null});return}n=bt(Cs(qe,"users",f),m=>r({coach:jb(m)}),m=>r({},m))},a=bt(Cs(qe,"users",t),f=>{const m=jb(f);r({customer:m}),m!=null&&m.coachId&&i(m.coachId)},f=>r({},f)),l=Rt(qe,"assignments"),c=jn(l,Rs("customerId","==",t)),d=bt(c,f=>{const m=I5(f.docs);r({assignment:m}),m!=null&&m.coachId?i(m.coachId):s.coach||r({})},f=>r({},f));return()=>{a(),d(),n&&n()}}function WA(t,e){if(!t)return e({data:[],error:new Error("Missing trajectId")}),()=>{};const n=jn(Rt(qe,"competencies"),Rs("trajectId","==",t)),s=Rt(qe,"trajects",t,"competencies");let r=[],i=[];const a=(d=null)=>{const m=(r.length>0?r:i).map(C5).filter(Boolean).sort((p,y)=>p.groupOrder!==y.groupOrder?p.groupOrder-y.groupOrder:p.competencyOrder!==y.competencyOrder?p.competencyOrder-y.competencyOrder:p.order!==y.order?p.order-y.order:(p.title||"").localeCompare(y.title||""));e({data:m,error:d})},l=bt(n,d=>{r=d.docs,a()},d=>{r=[],a(d)}),c=bt(s,d=>{i=d.docs,r.length===0&&a()},d=>{i=[],r.length===0&&a(d)});return()=>{l(),c()}}const M5=()=>{const{customer:t,coach:e}=kr(),[n,s]=N.useState(null),[r,i]=N.useState([]),[a,l]=N.useState([]),[c,d]=N.useState(!0),[f,m]=N.useState(!0),[p,y]=N.useState(null),[R,I]=N.useState(null),[D,A]=N.useState(null),[b,x]=N.useState([]),[j,U]=N.useState(null),[B,T]=N.useState(null),[_,v]=N.useState({}),[S,w]=N.useState({}),k=N.useRef({}),[C]=N.useState(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}}),ae=(t==null?void 0:t.id)||null,he=N.useCallback(async()=>{var P;d(!0),y(null);try{const Q=await Ts("/customer/planning");Q!=null&&Q.traject&&s(Q.traject)}catch(Q){y(((P=Q==null?void 0:Q.data)==null?void 0:P.error)||(Q==null?void 0:Q.message)||"Kon planning niet laden")}finally{d(!1)}},[]);N.useEffect(()=>{he()},[he]);const z=(n==null?void 0:n.id)||(C==null?void 0:C.trajectId)||(t==null?void 0:t.trajectId)||null;N.useEffect(()=>{if(!z){i([]),I(null),m(!1);return}m(!0);const P=WA(z,({data:Q,error:G})=>{if(G){I(G),m(!1);return}I(null),i(Array.isArray(Q)?Q:[]),m(!1)});return()=>{typeof P=="function"&&P()}},[z]);const V=N.useMemo(()=>{const P={};return b.forEach(Q=>{if(!Q)return;const G=Q.competencyId||"__unassigned__";P[G]||(P[G]=[]),P[G].push(Q)}),P},[b]);N.useEffect(()=>{if(n||!z)return;let P=!1;return R5(z).then(Q=>{!P&&Q&&s(G=>G||Q)}).catch(()=>{}),()=>{P=!0}},[n,z]),N.useEffect(()=>{if(!ae){x([]),U(null);return}const P=JA(ae,({uploads:Q,error:G})=>{if(G){U(G);return}U(null),x(Array.isArray(Q)?Q:[])});return()=>{typeof P=="function"&&P()}},[ae]);const O=c||f,$=P=>{if(!(_[P]||"").trim()){w(J=>({...J,[P]:"Geef een naam op voor je upload."}));return}w(J=>{if(!J[P])return J;const Ge={...J};return delete Ge[P],Ge});const G=k.current[P];G&&G.click()},Y=async(P,Q)=>{var kn;const G=(kn=Q.target.files)==null?void 0:kn[0];if(!G)return;Q.target.value="";const J=z;if(!J){y("Er is geen traject gekoppeld aan dit account.");return}if(!ae){y("Kon je accountgegevens niet vinden. Probeer opnieuw in te loggen.");return}const Ge=(_[P]||"").trim();if(!Ge){w(be=>({...be,[P]:"Geef een naam op voor je upload."}));return}A(P),y(null);try{await k5({userId:ae,competencyId:P,file:G,displayName:Ge,trajectId:J}),v(be=>({...be,[P]:""})),w(be=>{if(!be[P])return be;const Tn={...be};return delete Tn[P],Tn})}catch(be){y((be==null?void 0:be.message)||"Uploaden mislukt")}finally{A(null)}},fe=P=>{l(Q=>Q.includes(P)?Q.filter(G=>G!==P):[...Q,P])},ne=(P,Q)=>{v(G=>({...G,[P]:Q})),w(G=>{if(!G[P])return G;const J={...G};return delete J[P],J})};N.useEffect(()=>{l(P=>{const Q=new Set(r.map((J,Ge)=>J.id||J.code||String(Ge))),G=P.filter(J=>Q.has(J));return G.length===P.length?P:G})},[r]),N.useEffect(()=>{const P=new Set(r.map((Q,G)=>Q.id||Q.code||String(G)));v(Q=>{const G={};return P.forEach(J=>{Q[J]!==void 0&&(G[J]=Q[J])}),Object.keys(G).length===Object.keys(Q).length?Q:G}),w(Q=>{const G={};return P.forEach(J=>{Q[J]&&(G[J]=Q[J])}),Object.keys(G).length===Object.keys(Q).length?Q:G})},[r]);const ke=(P,Q)=>!P||P.length===0?u.jsx("p",{className:"mt-2 text-sm text-slate-400",children:Q}):u.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:P.map((G,J)=>u.jsxs("li",{className:"flex items-start gap-3 rounded-xl bg-white/70 px-3 py-2 shadow-sm",children:[u.jsx("span",{className:"mt-1 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-brand-500"}),u.jsx("span",{className:"leading-relaxed",children:String(G)})]},`${G}-${J}`))}),K=(P,Q)=>{if(!P)return[];const G=[P.id,P.code,Q].filter(Boolean);for(const J of G)if(V[J])return V[J];return[]},Z=async P=>{if(!P)return;if(!!!(P.downloadURL||P.storagePath)){y("Downloadlink is niet beschikbaar voor dit bestand.");return}const G=P.id||P.storagePath||P.fileName||P.name||null;G&&T(G),y(null);try{const J=await D5(P);if(!J)throw new Error("Downloadlink is niet beschikbaar.");window.open(J,"_blank","noopener")}catch(J){y((J==null?void 0:J.message)||"Download mislukt")}finally{T(null)}};return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:"Planning"}),u.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Jouw competenties en bewijsstukken"}),u.jsxs("p",{className:"max-w-2xl text-sm text-slate-500",children:["Bekijk welke competenties onderdeel zijn van je traject en voeg eenvoudig nieuwe bewijsstukken toe.",e?` Je coach ${e.name} kijkt mee en geeft feedback.`:""]}),n?u.jsxs("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:["Traject: ",n.name]}):null]}),O?u.jsx(Da,{label:"Planning laden"}):null,p&&!O?u.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:p}):null,R&&!O?u.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:["Kon competenties niet laden: ",R.message||"Onbekende fout"]}):null,j?u.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:["Kon uploads niet laden: ",j.message||"Onbekende fout"]}):null,!O&&!z?u.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er is nog geen traject aan jouw account gekoppeld."}):null,!O&&z&&r.length===0?u.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er zijn nog geen competenties gekoppeld aan jouw traject."}):null,u.jsx("section",{className:"space-y-4",children:r.map((P,Q)=>{const G=P.id||P.code||String(Q),J=a.includes(G),Ge=K(P,G),kn=`competency-${G}`;return u.jsxs("article",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm transition-shadow hover:shadow-md",children:[u.jsxs("button",{type:"button",onClick:()=>fe(G),className:"flex w-full items-center justify-between gap-4 px-6 py-5 text-left","aria-expanded":J,"aria-controls":kn,children:[u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("span",{className:"inline-flex w-fit items-center gap-2 rounded-full bg-brand-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600",children:P.code||"Code ontbreekt"}),u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:P.title||"Competentie zonder titel"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"hidden items-center gap-2 rounded-full bg-brand-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 sm:inline-flex",children:[u.jsx(ti,{className:"h-4 w-4"})," Actief"]}),u.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-full border border-slate-200 text-slate-500 transition-all duration-300 ${J?"rotate-180 border-brand-200 bg-brand-50 text-brand-600 shadow-inner":""}`,children:u.jsx(ZT,{className:"h-4 w-4"})})]})]}),u.jsx("div",{id:kn,className:`px-6 ${J?"pb-6":"hidden"}`,hidden:!J,children:u.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-100 bg-slate-50/80 px-5 py-5 text-slate-600",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Omschrijving"}),u.jsx("p",{className:"mt-2 text-base leading-relaxed text-slate-600",children:P.description||"Geen omschrijving beschikbaar."})]}),u.jsxs("div",{className:"rounded-2xl bg-white px-4 py-4 shadow-inner",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Gewenst resultaat"}),u.jsx("p",{className:"mt-2 text-sm leading-relaxed text-slate-600",children:P.desiredOutcome||"Nog niet vastgelegd."})]}),u.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Vakkennis & vaardigheden"}),ke(P.subjectKnowledge,"Nog geen vakkennis vastgelegd.")]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Gedragscomponenten"}),ke(P.behavioralComponents,"Nog geen gedragscomponenten vastgelegd.")]}),u.jsxs("div",{className:"space-y-3 rounded-2xl bg-white px-4 py-4 shadow-inner",children:[u.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:["Uploads (",Ge.length,")"]}),Ge.length===0?u.jsx("p",{className:"text-sm text-slate-400",children:'Nog geen bestanden. Klik op "Voeg upload toe" om te starten.'}):u.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:Ge.map(be=>{const Tn=!!(be.downloadURL||be.storagePath),Ri=be.id||be.storagePath||be.fileName||be.name;return u.jsxs("li",{className:"flex items-center gap-3 rounded-xl bg-white px-3 py-2 shadow-sm",children:[u.jsx(B_,{className:"h-4 w-4 text-slate-400"}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("p",{className:"truncate text-sm font-medium text-slate-700",children:be.displayName||be.name||be.fileName}),be.uploadedAt?u.jsxs("p",{className:"mt-0.5 text-xs text-slate-400",children:["Geüpload op ",be.uploadedAt.toLocaleString()]}):null]}),u.jsx("button",{type:"button",className:"ml-auto whitespace-nowrap rounded-full border border-brand-200 px-3 py-1 text-xs font-semibold text-brand-600 transition hover:border-brand-400 hover:bg-brand-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-400",onClick:()=>Z(be),disabled:B===Ri||!Tn,children:B===Ri?"Bezig...":Tn?"Download":"Niet beschikbaar"})]},Ri)})}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Naam van je upload"}),u.jsx("input",{type:"text",value:_[G]||"",onChange:be=>ne(G,be.target.value),placeholder:"Bijvoorbeeld: Reflectieverslag week 3",className:`mt-2 w-full rounded-full border px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 ${S[G]?"border-red-300 focus:ring-red-300":"border-slate-200 focus:border-brand-400"}`}),S[G]?u.jsx("p",{className:"mt-1 text-xs text-red-500",children:S[G]}):null]}),u.jsx("input",{ref:be=>{be?k.current[G]=be:delete k.current[G]},type:"file",className:"hidden",onChange:be=>Y(P.id||P.code||G,be)}),u.jsxs("button",{type:"button",onClick:()=>$(G),disabled:D===(P.id||P.code||G),className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-2 text-xs font-semibold text-brand-600 transition hover:border-brand-400 hover:bg-brand-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-400",children:[u.jsx(B_,{className:"h-4 w-4"}),D===(P.id||P.code||G)?"Bezig...":"Voeg upload toe"]})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 rounded-2xl bg-white px-4 py-3 text-sm text-slate-500 shadow-inner",children:[u.jsx(uI,{className:"h-4 w-4 text-brand-500"}),u.jsx("span",{className:"leading-relaxed",children:"Heb je vragen? Laat een bericht achter bij je coach in het berichtenoverzicht."})]})]})})]},G)})})]})},ZA=({threads:t=[],activeThreadId:e,onSelectThread:n,messages:s=[],draft:r,onDraftChange:i,onSend:a,emptyLabel:l="No thread selected"})=>u.jsxs("div",{className:"grid h-[600px] grid-cols-1 overflow-hidden rounded-3xl bg-white shadow-card lg:grid-cols-[280px,1fr]",children:[u.jsxs("aside",{className:"border-r border-slate-100",children:[u.jsx("div",{className:"px-4 py-4",children:u.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Conversations"})}),u.jsx("div",{className:"h-full overflow-y-auto px-2 pb-6",children:u.jsxs("ul",{className:"space-y-1",children:[t.map(c=>u.jsx("li",{children:u.jsxs("button",{type:"button",onClick:()=>n==null?void 0:n(c.id),className:`w-full rounded-2xl px-4 py-3 text-left text-sm transition ${e===c.id?"bg-brand-50 text-brand-700":"text-slate-600 hover:bg-slate-50"}`,children:[u.jsx("p",{className:"font-semibold text-slate-900",children:c.name}),u.jsx("p",{className:"truncate text-xs text-slate-500",children:c.lastMessage})]})},c.id)),t.length===0?u.jsx("li",{className:"px-4 py-12 text-center text-sm text-slate-400",children:"No threads yet."}):null]})})]}),u.jsxs("section",{className:"flex flex-1 flex-col",children:[u.jsx("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto px-6 py-6",children:s.length===0?u.jsx("div",{className:"m-auto text-center text-sm text-slate-400",children:u.jsx("p",{children:l})}):s.map(c=>u.jsxs("div",{className:`max-w-md rounded-2xl px-4 py-3 text-sm shadow-sm ${c.from==="me"?"self-end bg-brand-600 text-white":"bg-slate-100 text-slate-700"}`,children:[u.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:c.author}),u.jsx("p",{className:"mt-1 whitespace-pre-line",children:c.body}),u.jsx("p",{className:"mt-2 text-[10px] uppercase tracking-wide opacity-60",children:c.timestamp})]},c.id))}),u.jsx("form",{onSubmit:c=>{c.preventDefault(),a==null||a()},className:"border-t border-slate-100 bg-slate-50/60 px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-3 rounded-full bg-white px-4 py-2 shadow-inner",children:[u.jsx("input",{type:"text",value:r??"",onChange:c=>i==null?void 0:i(c.target.value),placeholder:"Type a message",className:"flex-1 border-none bg-transparent text-sm outline-none focus:ring-0"}),u.jsxs("button",{type:"submit",className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white shadow-lg transition hover:bg-brand-500",children:[u.jsx(EI,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Send message"})]})]})})]})]}),V5=()=>{const{customer:t,coach:e,account:n}=kr(),s=(n==null?void 0:n.id)??null,[r,i]=N.useState([]),[a,l]=N.useState({}),[c,d]=N.useState(""),[f,m]=N.useState({}),[p,y]=N.useState(!1),[R,I]=N.useState(null),[D,A]=N.useState(!1),b=N.useCallback(B=>{const T=new Map;B.forEach(w=>{const k=(w==null?void 0:w.fromUser)||{},C=(w==null?void 0:w.toUser)||{},ae=(k==null?void 0:k.id)===s,he=ae?C:k;if(!(he!=null&&he.id))return;const z=String(he.id);T.has(z)||T.set(z,{id:z,name:he.name||he.email||"Contactpersoon",targetUserId:he.id,lastMessage:"",lastTimestamp:0,messages:[]});const V=T.get(z),O=w.createdAt?new Date(w.createdAt):null,$=O?O.getTime():Date.now(),Y=ae?(t==null?void 0:t.name)||"Ik":he.name||he.email||"Contactpersoon";V.messages.push({id:w.id,author:Y,body:w.content||"",from:ae?"me":"other",timestamp:O?O.toLocaleString():"",timestampMs:$}),V.lastMessage=w.content||V.lastMessage,V.lastTimestamp=Math.max(V.lastTimestamp,$)});const _=Array.from(T.values()).sort((w,k)=>k.lastTimestamp-w.lastTimestamp),v=_.map(({id:w,name:k,lastMessage:C,targetUserId:ae})=>({id:w,name:k,lastMessage:C,targetUserId:ae})),S={};return _.forEach(w=>{const k=w.messages.sort((C,ae)=>C.timestampMs-ae.timestampMs).map(({timestampMs:C,...ae})=>ae);S[w.id]=k}),{threads:v,messagesByThread:S}},[s,t==null?void 0:t.name]),x=N.useCallback(async()=>{var B;if(!s){i([]),l({}),d(""),y(!1);return}y(!0);try{const T=await Ts("/messages"),_=b(Array.isArray(T)?T:[]);i(_.threads),l(_.messagesByThread),d(v=>{var S;return v&&_.threads.some(w=>w.id===v)?v:((S=_.threads[0])==null?void 0:S.id)??""}),I(null)}catch(T){I(((B=T==null?void 0:T.data)==null?void 0:B.error)||(T==null?void 0:T.message)||"Berichten laden mislukt")}finally{y(!1)}},[s,b]);N.useEffect(()=>{x()},[x]);const j=N.useMemo(()=>a[c]??[],[a,c]),U=async()=>{var v;const T=(f[c]??"").trim();if(!T)return;const _=r.find(S=>S.id===c);if(!(_!=null&&_.targetUserId)){I("Geen ontvanger gekoppeld aan dit gesprek.");return}A(!0);try{await Aa("/messages/send",{toUserId:_.targetUserId,content:T}),m(S=>({...S,[c]:""})),await x()}catch(S){I(((v=S==null?void 0:S.data)==null?void 0:v.error)||(S==null?void 0:S.message)||"Versturen mislukt")}finally{A(!1)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("header",{children:[u.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Berichten"}),u.jsxs("p",{className:"mt-2 max-w-2xl text-sm text-slate-500",children:["Chat rechtstreeks met je coach",e?` ${e.name}`:"",". Gebruik dit kanaal voor vragen en updates."]})]}),R?u.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:R}):null,p?u.jsx(Da,{label:"Berichten laden"}):u.jsx(ZA,{threads:r,activeThreadId:c,onSelectThread:d,messages:j,draft:f[c]??"",onDraftChange:B=>m(T=>({...T,[c]:B})),onSend:U,emptyLabel:r.length===0?"Nog geen berichten. Start een gesprek met je coach.":"Selecteer een gesprek"}),D?u.jsx("p",{className:"text-xs text-slate-400",children:"Bericht wordt verzonden…"}):null]})},U5={dateOfBirth:"",placeOfBirth:"",nationality:"",phoneFixed:"",phoneMobile:"",street:"",houseNumber:"",addition:"",postalCode:"",city:"",email:"",name:"",educations:[],certificates:[],workExperience:[]},L5=()=>{const{customer:t,coach:e}=kr(),[n,s]=N.useState(U5),[r,i]=N.useState(!0),[a,l]=N.useState(!1),[c,d]=N.useState(null),[f,m]=N.useState({title:"",institution:"",startDate:"",endDate:"",note:""}),[p,y]=N.useState({role:"",organisation:"",startDate:"",endDate:"",note:""}),[R,I]=N.useState({title:"",note:"",file:null}),[D,A]=N.useState(!1),[b,x]=N.useState(null),[j,U]=N.useState(0),B=N.useMemo(()=>(t==null?void 0:t.name)||n.name||"Jouw profiel",[t==null?void 0:t.name,n.name]),T=n.email||(t==null?void 0:t.email)||"",_=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Date.now()}-${Math.round(Math.random()*1e6)}`;N.useEffect(()=>{let V=!0;return(async()=>{var $;i(!0);try{const Y=await Ts("/customer/profile");if(!V)return;s(fe=>({...fe,...Y}))}catch(Y){if(!V)return;d({type:"error",message:(($=Y==null?void 0:Y.data)==null?void 0:$.error)||(Y==null?void 0:Y.message)||"Kon profiel niet laden"})}finally{V&&i(!1)}})(),()=>{V=!1}},[]);const v=V=>{const{name:O,value:$}=V.target;s(Y=>({...Y,[O]:$}))},S=async V=>{var O;V.preventDefault(),l(!0),d(null);try{const $={dateOfBirth:n.dateOfBirth,placeOfBirth:n.placeOfBirth,nationality:n.nationality,phoneFixed:n.phoneFixed,phoneMobile:n.phoneMobile,street:n.street,houseNumber:n.houseNumber,addition:n.addition,postalCode:n.postalCode,city:n.city,educations:n.educations||[],certificates:(n.certificates||[]).map(({id:fe,title:ne,filePath:ke,fileName:K,size:Z,uploadedAt:P,note:Q})=>({id:fe,title:ne,filePath:ke,fileName:K,size:Z,uploadedAt:P,note:Q})),workExperience:n.workExperience||[]},Y=await rw("/customer/profile",$);s(fe=>({...fe,...Y})),d({type:"success",message:"Wijzigingen opgeslagen"})}catch($){d({type:"error",message:((O=$==null?void 0:$.data)==null?void 0:O.error)||($==null?void 0:$.message)||"Opslaan mislukt"})}finally{l(!1)}},w=({state:V})=>{if(!(V!=null&&V.message))return null;const O=V.type==="error",$=O?kI:ti,Y=O?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return u.jsxs("div",{className:`flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${Y}`,children:[u.jsx($,{className:"h-4 w-4"}),u.jsx("span",{children:V.message})]})},k=(V,O)=>{s($=>({...$,[V]:($[V]||[]).filter(Y=>Y.id!==O)}))},C=()=>{if(!f.title.trim()){d({type:"error",message:"Voeg minimaal een titel toe voor je opleiding."});return}const V={id:_(),title:f.title.trim(),institution:f.institution.trim(),startDate:f.startDate||"",endDate:f.endDate||"",note:f.note.trim()};s(O=>({...O,educations:[...O.educations||[],V]})),m({title:"",institution:"",startDate:"",endDate:"",note:""})},ae=()=>{if(!p.role.trim()&&!p.organisation.trim()&&!p.note.trim()){d({type:"error",message:"Vul minimaal een functie, organisatie of toelichting in."});return}const V={id:_(),role:p.role.trim(),organisation:p.organisation.trim(),startDate:p.startDate||"",endDate:p.endDate||"",note:p.note.trim()};s(O=>({...O,workExperience:[...O.workExperience||[],V]})),y({role:"",organisation:"",startDate:"",endDate:"",note:""})},he=V=>{var $;const O=(($=V.target.files)==null?void 0:$[0])||null;I(Y=>({...Y,file:O}))},z=async()=>{var O;if(!R.file){x({type:"error",message:"Kies eerst een bestand."});return}const V=R.title.trim()||R.file.name;A(!0),x(null);try{const $=new FormData;$.append("file",R.file);const Y=await PI("/customer/profile/certificates/upload",$),fe={id:_(),title:V,filePath:Y.filePath,fileName:Y.fileName||R.file.name,size:Y.size,uploadedAt:Y.uploadedAt,note:R.note.trim()};s(ne=>({...ne,certificates:[...ne.certificates||[],fe]})),I({title:"",note:"",file:null}),U(ne=>ne+1),x({type:"success",message:"Certificaat toegevoegd"})}catch($){x({type:"error",message:((O=$==null?void 0:$.data)==null?void 0:O.error)||($==null?void 0:$.message)||"Upload mislukt"})}finally{A(!1)}};return r?u.jsx(Da,{label:"Profiel laden"}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-brand-500",children:"Profiel bewerken"}),u.jsx("h1",{className:"mt-1 text-3xl font-semibold text-slate-900",children:B}),u.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-500",children:"Werk je persoonsgegevens en adresgegevens eenvoudig bij. Je coach ziet altijd de meest recente informatie."})]}),e?u.jsxs("div",{className:"rounded-3xl border border-brand-100 bg-brand-50 px-4 py-3 text-sm text-brand-700 shadow-sm",children:["Begeleid door ",u.jsx("strong",{children:e.name})]}):null]}),u.jsxs("form",{onSubmit:S,className:"space-y-6",children:[u.jsx(w,{state:c}),u.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:u.jsxs("div",{className:"grid gap-6 xl:grid-cols-[1.4fr,1fr]",children:[u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Persoonsgegevens"}),u.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"dateOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboortedatum"}),u.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:n.dateOfBirth||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"placeOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboorteplaats"}),u.jsx("input",{id:"placeOfBirth",name:"placeOfBirth",value:n.placeOfBirth||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Alkmaar"})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"nationality",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Nationaliteit"}),u.jsx("input",{id:"nationality",name:"nationality",value:n.nationality||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: NL"})]})]})]}),u.jsxs("div",{className:"space-y-4 border-t border-slate-100 pt-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Contactgegevens"}),u.jsx("button",{type:"button",onClick:()=>alert("Vraag je beheerder om je wachtwoord te wijzigen."),className:"text-sm font-semibold text-brand-600 transition hover:text-brand-500",children:"Wachtwoord wijzigen"})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"phoneFixed",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (vast)"}),u.jsx("input",{id:"phoneFixed",name:"phoneFixed",value:n.phoneFixed||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0201234567"})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"phoneMobile",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (mobiel)"}),u.jsx("input",{id:"phoneMobile",name:"phoneMobile",value:n.phoneMobile||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0612345678"})]}),u.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[u.jsx("label",{htmlFor:"email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mailadres"}),u.jsx("input",{id:"email",name:"email",value:T,readOnly:!0,className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm text-slate-500 shadow-inner"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Het e-mailadres wordt beheerd door je organisatie."})]})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-6 rounded-2xl bg-slate-50 p-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Adresgegevens"}),u.jsxs("div",{className:"mt-4 grid gap-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"street",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Straatnaam"}),u.jsx("input",{id:"street",name:"street",value:n.street||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr,0.8fr]",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"houseNumber",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Huisnummer"}),u.jsx("input",{id:"houseNumber",name:"houseNumber",value:n.houseNumber||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"addition",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Toevoeging"}),u.jsx("input",{id:"addition",name:"addition",value:n.addition||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"postalCode",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Postcode"}),u.jsx("input",{id:"postalCode",name:"postalCode",value:n.postalCode||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijv. 1822 BW"})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("label",{htmlFor:"city",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Woonplaats"}),u.jsx("input",{id:"city",name:"city",value:n.city||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Downloads"}),u.jsx("button",{type:"button",onClick:()=>alert("Download van profiel volgt later in de productieroute."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn profiel"}),u.jsx("button",{type:"button",onClick:()=>alert("Document downloads zijn binnenkort beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn documenten"}),u.jsx("button",{type:"button",onClick:()=>alert("Zelfevaluatie download is nog niet beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn zelfevaluatie"})]})]})]})}),u.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:u.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Opleidingen"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Leg je afgeronde of lopende opleidingen vast inclusief toelichting."})]}),u.jsx("div",{className:"space-y-4",children:(n.educations||[]).length===0?u.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen opleidingen toegevoegd."}):u.jsx("ul",{className:"space-y-3",children:n.educations.map(V=>u.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-900",children:V.title}),V.institution?u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:V.institution}):null]}),u.jsx("button",{type:"button",onClick:()=>k("educations",V.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),u.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[V.startDate?u.jsxs("span",{children:["Start: ",V.startDate]}):null,V.endDate?u.jsxs("span",{children:["Einde: ",V.endDate]}):null]}),V.note?u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:V.note}):null]},V.id))})}),u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe opleiding toevoegen"}),u.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[u.jsx("input",{type:"text",value:f.title,onChange:V=>m(O=>({...O,title:V.target.value})),placeholder:"Naam opleiding",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("input",{type:"text",value:f.institution,onChange:V=>m(O=>({...O,institution:V.target.value})),placeholder:"Onderwijsinstelling",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.jsx("input",{type:"month",value:f.startDate,onChange:V=>m(O=>({...O,startDate:V.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("input",{type:"month",value:f.endDate,onChange:V=>m(O=>({...O,endDate:V.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),u.jsx("textarea",{value:f.note,onChange:V=>m(O=>({...O,note:V.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("button",{type:"button",onClick:C,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg opleiding toe"})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Certificaten & diploma's"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Upload officiële documenten en voeg een toelichting toe."})]}),u.jsx("div",{className:"space-y-4",children:(n.certificates||[]).length===0?u.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen certificaten geüpload."}):u.jsx("ul",{className:"space-y-3",children:n.certificates.map(V=>u.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-900",children:V.title}),u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:V.fileName})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("a",{href:V.filePath,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Bekijk"}),u.jsx("button",{type:"button",onClick:()=>k("certificates",V.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]})]}),V.note?u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:V.note}):null,u.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[V.uploadedAt?u.jsxs("span",{children:["Geüpload: ",new Date(V.uploadedAt).toLocaleDateString()]}):null,V.size?u.jsxs("span",{children:[(V.size/(1024*1024)).toFixed(2)," MB"]}):null]})]},V.id))})}),u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuw certificaat toevoegen"}),u.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[u.jsx("input",{type:"text",value:R.title,onChange:V=>I(O=>({...O,title:V.target.value})),placeholder:"Titel certificaat of diploma",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("textarea",{value:R.note,onChange:V=>I(O=>({...O,note:V.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("input",{type:"file",onChange:he,className:"text-sm"},j),u.jsx("button",{type:"button",onClick:z,disabled:D,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:D?"Bezig met uploaden...":"Upload en voeg toe"}),b?u.jsx("p",{className:`text-xs ${b.type==="error"?"text-red-500":"text-emerald-600"}`,children:b.message}):null]})]})]})]})}),u.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Relevante werkervaring"}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beschrijf je belangrijke werkervaringen en voeg een toelichting toe."})]}),u.jsx("div",{className:"space-y-4",children:(n.workExperience||[]).length===0?u.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen werkervaring toegevoegd."}):u.jsx("ul",{className:"space-y-3",children:n.workExperience.map(V=>u.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-900",children:V.role||"Functie onbekend"}),V.organisation?u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:V.organisation}):null]}),u.jsx("button",{type:"button",onClick:()=>k("workExperience",V.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),u.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[V.startDate?u.jsxs("span",{children:["Start: ",V.startDate]}):null,V.endDate?u.jsxs("span",{children:["Einde: ",V.endDate]}):null]}),V.note?u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:V.note}):null]},V.id))})}),u.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe ervaring toevoegen"}),u.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[u.jsx("input",{type:"text",value:p.role,onChange:V=>y(O=>({...O,role:V.target.value})),placeholder:"Functietitel",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("input",{type:"text",value:p.organisation,onChange:V=>y(O=>({...O,organisation:V.target.value})),placeholder:"Organisatie",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[u.jsx("input",{type:"month",value:p.startDate,onChange:V=>y(O=>({...O,startDate:V.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("input",{type:"month",value:p.endDate,onChange:V=>y(O=>({...O,endDate:V.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),u.jsx("textarea",{value:p.note,onChange:V=>y(O=>({...O,note:V.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),u.jsx("button",{type:"button",onClick:ae,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg werkervaring toe"})]})]})]})}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"submit",disabled:a,className:"rounded-full bg-lime-500 px-6 py-3 text-sm font-semibold text-white shadow transition hover:bg-lime-400 disabled:cursor-not-allowed disabled:bg-lime-300",children:a?"Opslaan...":"Opslaan"})})]})]})},P5=({title:t,value:e,trend:n,icon:s,variant:r="brand"})=>{const i={brand:"bg-brand-50 text-brand-700",emerald:"bg-emerald-50 text-emerald-700",amber:"bg-amber-50 text-amber-700",sky:"bg-sky-50 text-sky-700",slate:"bg-slate-50 text-slate-700"};return u.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-white p-6 shadow-card transition hover:-translate-y-1 hover:shadow-xl",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-slate-500",children:t}),u.jsx("p",{className:"mt-2 text-3xl font-semibold text-slate-900",children:e})]}),s?u.jsx("span",{className:wa("rounded-full p-3",i[r]||i.brand),children:u.jsx(s,{className:"h-6 w-6"})}):null]}),n?u.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-slate-500",children:[u.jsxs("span",{className:wa("inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold",n.direction==="up"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"),children:[n.direction==="up"?"▲":"▼",n.value]}),u.jsx("span",{children:n.caption})]}):null,u.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-transparent via-white/40 to-transparent opacity-0 transition group-hover:opacity-100"})]})},z5=()=>{const{coach:t,customers:e=[],assignments:n=[],feedback:s=[]}=kr()??{},r=N.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Coach",[t]),i=N.useMemo(()=>{const c=e.length,d=n.filter(m=>((m==null?void 0:m.status)||"").toLowerCase()==="active").length,f=n.filter(m=>{const p=((m==null?void 0:m.status)||"").toLowerCase();return p==="pending"||p==="open"||p==="todo"}).length;return[{id:"assigned-customers",title:"Assigned customers",value:String(c),icon:Po,variant:"brand"},{id:"active-assignments",title:"Active assignments",value:String(d),icon:$R,variant:"emerald"},{id:"pending-reviews",title:"Pending reviews",value:String(f),icon:XR,variant:"amber"}]},[n,e]),a=N.useMemo(()=>[...s].sort((c,d)=>{const f=(c==null?void 0:c.updatedAt)instanceof Date?c.updatedAt.getTime():0;return((d==null?void 0:d.updatedAt)instanceof Date?d.updatedAt.getTime():0)-f}).slice(0,5),[s]),l=N.useMemo(()=>(r==null?void 0:r.split(" ")[0])||"Coach",[r]);return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-brand-500 via-brand-600 to-brand-700 px-8 py-10 text-white shadow-card",children:[u.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/70",children:"Welcome back"}),u.jsx("h2",{className:"mt-2 text-3xl font-semibold",children:`Hi ${l}, ready to coach?`}),u.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/80",children:"Review the latest uploads, leave actionable feedback, and keep your customers moving forward in their EVC journey."})]}),u.jsxs("section",{children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Today at a glance"}),u.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:i.map(c=>u.jsx(P5,{...c},c.id))})]}),u.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[u.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Recent feedback activity"}),a.length===0?u.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Nog geen feedback vastgelegd."}):u.jsx("div",{className:"mt-4 divide-y divide-slate-100",children:a.map(c=>u.jsxs("article",{className:"flex items-center justify-between py-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-slate-800",children:c.customerName||"Onbekende klant"}),u.jsx("p",{className:"text-xs text-slate-500",children:c.competencyId||"Competentie"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Feedback"}),u.jsx("p",{className:"text-sm font-medium text-slate-700",children:c.summary||c.content||"-"})]}),u.jsx("div",{className:"text-right text-xs text-slate-400",children:c.updatedAt?c.updatedAt.toLocaleString():""})]},c.id))})]})]})},B5=({columns:t=[],data:e=[],renderActions:n,emptyMessage:s="No data available",dense:r})=>u.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-card",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:wa("min-w-full divide-y divide-slate-200",r?"text-sm":"text-base"),children:[u.jsx("thead",{className:"bg-slate-50",children:u.jsxs("tr",{children:[t.map(i=>u.jsx("th",{scope:"col",className:"whitespace-nowrap px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:i.header},i.accessor||i.id)),n?u.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actions"}):null]})}),u.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:e.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:t.length+(n?1:0),className:"px-4 py-8 text-center text-sm text-slate-500",children:s})}):e.map((i,a)=>u.jsxs("tr",{className:"hover:bg-slate-50",children:[t.map(l=>u.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-slate-700",children:l.render?l.render(i):i[l.accessor]},l.accessor||l.id)),n?u.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-500",children:n(i)}):null]},i.id||a))})]})})}),q5=()=>{const{customers:t=[]}=kr()??{},[e,n]=N.useState(""),s=Zn(),r=N.useMemo(()=>t.map(l=>{let c="-";return(l==null?void 0:l.lastActivity)instanceof Date?c=l.lastActivity.toLocaleDateString():typeof(l==null?void 0:l.lastActivity)=="string"&&l.lastActivity.trim()&&(c=l.lastActivity),{id:l.id,name:l.name||l.email||"Onbekende klant",email:l.email||"-",lastActivityLabel:c}}),[t]),i=N.useMemo(()=>e?r.filter(l=>`${l.name} ${l.email}`.toLowerCase().includes(e.toLowerCase())):r,[r,e]),a=[{header:"Name",accessor:"name"},{header:"Email",accessor:"email"},{header:"Last Activity",accessor:"lastActivityLabel"}];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"My customers"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Track progress and dive into each competency set."})]}),u.jsxs("div",{className:"relative",children:[u.jsx(bI,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),u.jsx("input",{type:"search",value:e,onChange:l=>n(l.target.value),placeholder:"Search customers",className:"h-10 w-full min-w-[220px] rounded-full border border-slate-200 bg-white pl-10 pr-4 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),u.jsx(B5,{columns:a,data:i,dense:!0,renderActions:l=>u.jsxs("button",{type:"button",onClick:()=>s(`/coach/customers/${l.id}`),className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-3 py-1.5 text-xs font-semibold text-white shadow-lg transition hover:bg-brand-500",children:["View details ",u.jsx(Xc,{className:"h-3 w-3"})]})})]})},xn=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t.toDate=="function")try{const n=t.toDate();return Number.isNaN(n.getTime())?null:n}catch{return null}const e=new Date(t);return Number.isNaN(e.getTime())?null:e},eS=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,...e,lastActivity:xn(e.lastActivity),createdAt:xn(e.createdAt),updatedAt:xn(e.updatedAt)}},H5=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,coachId:e.coachId||null,customerId:e.customerId||null,status:e.status||"pending",createdAt:xn(e.createdAt),updatedAt:xn(e.updatedAt)}},tS=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{},n=xn(e.updatedAt)||xn(e.createdAt);return{id:t.id,coachId:e.coachId||null,coachName:e.coachName||"",customerId:e.customerId||null,customerName:e.customerName||"",competencyId:e.competencyId||"",summary:e.summary||e.status||"",content:e.content||e.body||"",updatedAt:n,createdAt:xn(e.createdAt)}},F5=(t,e,n)=>{var f,m;if(!(t!=null&&t.exists()))return null;const s=t.data()||{},i=(Array.isArray(s.participants)?s.participants:Array.isArray(s.participantIds)?s.participantIds:[]).map(p=>typeof p=="string"?p:p==null?void 0:p.id).filter(Boolean),a=i.find(p=>p!==e)||null,l=s.participantProfiles||{};let c=s.title||s.name||"";if(!c&&a&&((f=l[a])!=null&&f.name)&&(c=l[a].name),!c&&a&&((m=l[a])!=null&&m.email)&&(c=l[a].email),!c&&a&&(n!=null&&n.has(a))){const p=n.get(a);c=p.name||p.email||`Gesprek met ${a.slice(0,6)}`}c||(c="Gesprek");const d=xn(s.updatedAt)||xn(s.lastMessageAt)||xn(s.createdAt);return{id:t.id,name:c,lastMessage:s.lastMessage||"",updatedAt:d,participantIds:i,targetUserId:a||null}},G5=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,authorId:e.authorId||e.userId||null,authorName:e.authorName||e.displayName||"",content:e.content||e.body||"",createdAt:xn(e.createdAt)||new Date}};function K5(t,e){if(!t)return e({data:null,error:new Error("coachUid ontbreekt")}),()=>{};const n=Cs(qe,"users",t),s=Cs(qe,"coachProfiles",t);let r=null,i=null,a=null,l=null;const c=()=>{if(a||l){e({data:null,error:a||l});return}if(!r){e({data:null,error:null});return}e({data:{...r,...i},error:null})},d=bt(n,m=>{r=eS(m),a=null,c()},m=>{a=m,c()}),f=bt(s,m=>{i=m!=null&&m.exists()?m.data():null,l=null,c()},m=>{l=m,c()});return()=>{d(),f()}}function Q5(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Rt(qe,"users"),s=jn(n,Rs("coachId","==",t));return bt(s,r=>{const i=r.docs.map(eS).filter(Boolean).sort((a,l)=>(a.name||"").localeCompare(l.name||""));e({data:i,error:null})},r=>e({data:[],error:r}))}function $5(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Rt(qe,"assignments"),s=jn(n,Rs("coachId","==",t),Ci("createdAt","desc"));return bt(s,r=>{const i=r.docs.map(H5).filter(Boolean);e({data:i,error:null})},r=>e({data:[],error:r}))}function Y5(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Rt(qe,"feedback"),s=jn(n,Rs("coachId","==",t),Ci("updatedAt","desc"));return bt(s,r=>{const i=r.docs.map(tS).filter(Boolean);e({data:i,error:null})},r=>e({data:[],error:r}))}function X5(t,e){if(!t)return e({data:[],error:new Error("customerId ontbreekt")}),()=>{};const n=Rt(qe,"feedback"),s=jn(n,Rs("customerId","==",t),Ci("updatedAt","desc"));return bt(s,r=>{const i=r.docs.map(tS).filter(Boolean);e({data:i,error:null})},r=>e({data:[],error:r}))}async function J5({coachId:t,coachName:e,customerId:n,customerName:s,competencyId:r,body:i}){if(!t)throw new Error("coachId is verplicht");if(!n)throw new Error("customerId is verplicht");if(!r)throw new Error("competencyId is verplicht");const a=(i||"").trim();if(!a)throw new Error("Feedbacktekst is verplicht");const l=Rt(qe,"feedback");await nh(l,{coachId:t,coachName:e,customerId:n,customerName:s||null,competencyId:r,content:a,summary:a.slice(0,90),createdAt:ri(),updatedAt:ri()})}function W5(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Rt(qe,"threads"),s=jn(n,Rs("participants","array-contains",t),Ci("updatedAt","desc"));return bt(s,async r=>{try{const i=await p5().catch(()=>new Map),a=r.docs.map(l=>F5(l,t,i)).filter(Boolean).sort((l,c)=>{const d=l.updatedAt?l.updatedAt.getTime():0;return(c.updatedAt?c.updatedAt.getTime():0)-d});e({data:a,error:null})}catch(i){e({data:[],error:i})}},r=>e({data:[],error:r}))}function Z5(t,e){if(!t)return e({data:[],error:new Error("threadId ontbreekt")}),()=>{};const n=Rt(qe,"threads",t,"messages"),s=jn(n,Ci("createdAt","asc"));return bt(s,r=>{const i=r.docs.map(G5).filter(Boolean);e({data:i,error:null})},r=>e({data:[],error:r}))}async function eV({threadId:t,fromUserId:e,toUserId:n,body:s,authorName:r}){if(!t)throw new Error("threadId is verplicht");if(!e)throw new Error("fromUserId is verplicht");const i=(s||"").trim();if(!i)throw new Error("Bericht mag niet leeg zijn");const a=Cs(qe,"threads",t),l=Rt(a,"messages");await nh(l,{authorId:e,authorName:r,toUserId:n||null,content:i,createdAt:ri()}),await KM(a,{lastMessage:i,lastMessageAuthorId:e,lastMessageAuthorName:r,lastMessageAt:ri(),updatedAt:ri()}).catch(()=>{})}const tV=()=>{const{customerId:t}=sR(),e=Zn(),{customers:n=[],coach:s}=kr()??{},r=N.useMemo(()=>n.find(O=>O.id===t)||null,[n,t]),[i,a]=N.useState([]),[l,c]=N.useState(!1),[d,f]=N.useState(null),[m,p]=N.useState([]),[y,R]=N.useState(!1),[I,D]=N.useState(null),[A,b]=N.useState([]),[x,j]=N.useState(!1),[U,B]=N.useState(null),[T,_]=N.useState({}),[v,S]=N.useState({}),[w,k]=N.useState([]);N.useEffect(()=>{if(!(r!=null&&r.trajectId))return a([]),f(null),c(!1),()=>{};c(!0);const O=WA(r.trajectId,({data:$,error:Y})=>{a(Array.isArray($)?$:[]),f(Y||null),c(!1)});return()=>{typeof O=="function"&&O()}},[r==null?void 0:r.trajectId]),N.useEffect(()=>{if(!(r!=null&&r.id))return p([]),D(null),R(!1),()=>{};R(!0);const O=JA(r.id,({uploads:$,error:Y})=>{p(Array.isArray($)?$:[]),D(Y||null),R(!1)});return()=>{typeof O=="function"&&O()}},[r==null?void 0:r.id]),N.useEffect(()=>{if(!(r!=null&&r.id))return b([]),B(null),j(!1),()=>{};j(!0);const O=X5(r.id,({data:$,error:Y})=>{b(Array.isArray($)?$:[]),B(Y||null),j(!1)});return()=>{typeof O=="function"&&O()}},[r==null?void 0:r.id]);const C=N.useMemo(()=>i.map(O=>{const $=m.filter(ne=>ne.competencyId===O.id).sort((ne,ke)=>{const K=ne.uploadedAt instanceof Date?ne.uploadedAt.getTime():0;return(ke.uploadedAt instanceof Date?ke.uploadedAt.getTime():0)-K}),Y=A.filter(ne=>ne.competencyId===O.id).sort((ne,ke)=>{const K=ne.updatedAt instanceof Date?ne.updatedAt.getTime():0;return(ke.updatedAt instanceof Date?ke.updatedAt.getTime():0)-K}),fe=[];return O.code&&fe.push(O.code),O.title&&fe.push(O.title),{id:O.id,title:fe.length>0?fe.join(" • "):O.title||O.code||"Competentie",description:O.description||O.desiredOutcome||"",uploads:$,feedback:Y}}),[i,A,m]);N.useEffect(()=>{k(O=>O.length===C.length?O:C.map(($,Y)=>Y===0))},[C.length]);const ae=l||y||x,he=(d==null?void 0:d.message)||(I==null?void 0:I.message)||(U==null?void 0:U.message)||null,z=O=>{k($=>$.map((Y,fe)=>fe===O?!Y:Y))},V=async O=>{const $=(T[O.id]||"").trim();if(!$){S(Y=>({...Y,[O.id]:{status:"error",message:"Voer feedback in"}}));return}if(!(s!=null&&s.id)||!(r!=null&&r.id)){S(Y=>({...Y,[O.id]:{status:"error",message:"Informatie ontbreekt"}}));return}S(Y=>({...Y,[O.id]:{status:"saving"}}));try{await J5({coachId:s.id,coachName:s.name||s.email||"Coach",customerId:r.id,customerName:r.name||r.email||"",competencyId:O.id,body:$}),_(Y=>({...Y,[O.id]:""})),S(Y=>({...Y,[O.id]:{status:"success",message:"Feedback opgeslagen"}}))}catch(Y){S(fe=>({...fe,[O.id]:{status:"error",message:Y.message||"Opslaan mislukt"}}))}};return r?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("button",{type:"button",onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-500",children:[u.jsx(P_,{className:"h-4 w-4"})," Terug naar klanten"]}),u.jsxs("header",{className:"rounded-3xl bg-white p-6 shadow-card",children:[u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Klantdossier"}),u.jsx("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:r.name||"Onbekend"}),u.jsx("p",{className:"mt-1 text-sm text-slate-500",children:r.email||"Geen e-mail"})]}),ae?u.jsx(Da,{label:"Gegevens laden"}):u.jsxs("section",{className:"space-y-4",children:[he?u.jsx("div",{className:"rounded-3xl border border-rose-200 bg-rose-50 px-6 py-4 text-sm text-rose-700",children:he}):null,C.length===0?u.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"Nog geen competenties beschikbaar voor deze klant."}):C.map((O,$)=>{const Y=w[$],fe=v[O.id]||{status:"idle"};return u.jsxs("article",{className:"overflow-hidden rounded-3xl bg-white shadow-card",children:[u.jsxs("button",{type:"button",onClick:()=>z($),className:"flex w-full items-center justify-between px-6 py-5 text-left",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Competentie"}),u.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:O.title}),u.jsx("p",{className:"mt-1 text-sm text-slate-500",children:O.description||"Geen beschrijving"})]}),Y?u.jsx(HR,{className:"h-5 w-5 text-slate-400"}):u.jsx(ZT,{className:"h-5 w-5 text-slate-400"})]}),u.jsxs("div",{className:wa("grid grid-cols-1 gap-6 border-t border-slate-100 px-6 transition-all duration-200 lg:grid-cols-[2fr,1fr]",Y?"max-h-[560px] py-6":"max-h-0 overflow-hidden"),children:[u.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Uploads"}),u.jsxs("ul",{className:"mt-2 space-y-2",children:[O.uploads.map(ne=>{const ke=ne.uploadedAt instanceof Date?ne.uploadedAt.toLocaleDateString():"";return u.jsxs("li",{className:"flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-2",children:[u.jsxs("span",{children:[ne.displayName||ne.name||ne.fileName||"Bestand",ke?u.jsx("span",{className:"ml-2 text-xs text-slate-400",children:ke}):null]}),ne.downloadURL?u.jsx("a",{href:ne.downloadURL,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium text-brand-600 hover:text-brand-500",children:"Bekijken"}):null]},ne.id)}),O.uploads.length===0?u.jsx("li",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-center text-xs text-slate-400",children:"Nog geen uploads."}):null]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Eerdere feedback"}),u.jsxs("ul",{className:"mt-2 space-y-3",children:[O.feedback.map(ne=>{const ke=ne.updatedAt instanceof Date?ne.updatedAt.toLocaleString():"";return u.jsxs("li",{className:"rounded-2xl bg-slate-100 px-4 py-3 text-xs text-slate-600",children:[u.jsx("p",{className:"font-medium text-slate-800",children:ne.coachName||(s==null?void 0:s.name)||"Coach"}),u.jsx("p",{className:"mt-1 whitespace-pre-line",children:ne.content||ne.summary||"-"}),ke?u.jsx("p",{className:"mt-2 text-[10px] uppercase tracking-wide text-slate-400",children:ke}):null]},ne.id)}),O.feedback.length===0?u.jsx("li",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-center text-xs text-slate-400",children:"Nog geen feedback vastgelegd."}):null]})]})]}),u.jsxs("form",{className:"flex h-full flex-col rounded-3xl bg-slate-50 p-5",onSubmit:ne=>{ne.preventDefault(),V(O)},children:[u.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Nieuwe feedback"}),u.jsx("textarea",{rows:6,value:T[O.id]??"",onChange:ne=>_(ke=>({...ke,[O.id]:ne.target.value})),placeholder:"Beschrijf observaties, geef complimenten, en noteer vervolgstappen.",className:"mt-2 flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"}),fe.status==="error"&&fe.message?u.jsx("p",{className:"mt-2 text-xs text-rose-600",children:fe.message}):null,fe.status==="success"&&fe.message?u.jsx("p",{className:"mt-2 text-xs text-emerald-600",children:fe.message}):null,u.jsxs("button",{type:"submit",disabled:fe.status==="saving",className:"mt-4 inline-flex items-center justify-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500 disabled:opacity-60",children:[u.jsx(_I,{className:"h-4 w-4"})," ",fe.status==="saving"?"Opslaan…":"Sla feedback op"]})]})]})]},O.id)})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("button",{type:"button",onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-500",children:[u.jsx(P_,{className:"h-4 w-4"})," Terug naar klanten"]}),u.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"Klant niet gevonden."})]})},nV=()=>{const{feedback:t=[],customers:e=[]}=kr()??{},n=N.useMemo(()=>{const s=new Map(e.map(r=>[r.id,r]));return[...t].map(r=>{const i=s.get(r.customerId)||{},a=r.customerName||i.name||i.email||"Onbekende klant",l=r.updatedAt instanceof Date?r.updatedAt:null,c=l?l.toLocaleString():"";return{id:r.id,customerName:a,competencyLabel:r.competencyId||"Competentie",summary:r.summary||r.content||"-",updatedAt:l,updatedAtLabel:c}}).sort((r,i)=>{const a=r.updatedAt instanceof Date?r.updatedAt.getTime():0;return(i.updatedAt instanceof Date?i.updatedAt.getTime():0)-a})},[e,t]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Feedback queue"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Keep track of open reviews and recently submitted guidance."})]}),u.jsx("div",{className:"overflow-hidden rounded-3xl bg-white shadow-card",children:n.length===0?u.jsx("p",{className:"px-6 py-16 text-center text-sm text-slate-500",children:"Nog geen feedback geregistreerd."}):u.jsx("ul",{className:"divide-y divide-slate-100",children:n.map(s=>u.jsxs("li",{className:"flex items-center justify-between px-6 py-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-slate-800",children:s.customerName}),u.jsx("p",{className:"text-xs text-slate-500",children:s.competencyLabel})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Feedback"}),u.jsx("p",{className:"font-medium text-slate-700",children:s.summary})]}),u.jsx("span",{className:"text-xs text-slate-400",children:s.updatedAtLabel})]},s.id))})})]})},sV=()=>{const{coach:t}=kr()??{},e=(t==null?void 0:t.id)||null,n=(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Coach",[s,r]=N.useState([]),[i,a]=N.useState(!1),[l,c]=N.useState(null),[d,f]=N.useState(""),[m,p]=N.useState([]),[y,R]=N.useState(!1),[I,D]=N.useState(null),[A,b]=N.useState({}),[x,j]=N.useState(!1),[U,B]=N.useState(null);N.useEffect(()=>{if(!e)return r([]),c(null),a(!1),()=>{};a(!0);const v=W5(e,({data:S,error:w})=>{r(Array.isArray(S)?S:[]),c(w||null),a(!1)});return()=>{typeof v=="function"&&v()}},[e]),N.useEffect(()=>{var v;if(!d&&s.length>0){f(s[0].id);return}d&&!s.some(S=>S.id===d)&&f(((v=s[0])==null?void 0:v.id)||"")},[d,s]),N.useEffect(()=>{if(!d)return p([]),D(null),R(!1),()=>{};R(!0);const v=Z5(d,({data:S,error:w})=>{p(Array.isArray(S)?S:[]),D(w||null),R(!1)});return()=>{typeof v=="function"&&v()}},[d]);const T=N.useMemo(()=>m.map(v=>{const S=v.authorId===e,w=v.createdAt instanceof Date?v.createdAt.toLocaleString():"";return{id:v.id,author:v.authorName||(S?n:"Contact"),body:v.content||v.summary||"",timestamp:w,from:S?"me":"other"}}),[e,n,m]),_=async()=>{var S;if(x||!e||!d)return;const v=(A[d]||"").trim();if(v){j(!0),B(null);try{const w=((S=s.find(k=>k.id===d))==null?void 0:S.targetUserId)||null;await eV({threadId:d,fromUserId:e,toUserId:w,body:v,authorName:n}),b(k=>({...k,[d]:""}))}catch(w){B(w.message||"Versturen mislukt")}finally{j(!1)}}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Berichten"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Blijf in contact met je klanten en collega's."})]}),l?u.jsx("div",{className:"rounded-3xl border border-rose-200 bg-rose-50 px-6 py-4 text-sm text-rose-700",children:l.message||"Kon gesprekken niet laden."}):null,i&&s.length===0?u.jsx(Da,{label:"Gesprekken laden"}):u.jsxs(u.Fragment,{children:[I?u.jsx("div",{className:"rounded-3xl border border-amber-200 bg-amber-50 px-6 py-3 text-sm text-amber-700",children:I.message||"Kon berichten niet laden."}):null,y?u.jsx(Da,{label:"Berichten laden"}):u.jsx(ZA,{threads:s,activeThreadId:d,onSelectThread:v=>{f(v),B(null)},messages:T,draft:A[d]??"",onDraftChange:v=>{b(S=>({...S,[d]:v})),B(null)},onSend:_,emptyLabel:"Selecteer een gesprek om het bericht te bekijken"})]}),U?u.jsx("p",{className:"text-sm text-rose-600",children:U}):null]})},rV=[{label:"Dashboard",to:"/admin",icon:ng,end:!0},{label:"Assignments",to:"/admin/assignments",icon:WR},{label:"Trajects",to:"/admin/trajects",icon:ew},{label:"Users",to:"/admin/users",icon:Po},{label:"Profile",to:"/admin/profile",icon:tw}],iV=[{label:"Dashboard",to:"/coach",icon:ng,end:!0},{label:"My Customers",to:"/coach/customers",icon:Po},{label:"Feedback",to:"/coach/feedback",icon:ew},{label:"Messages",to:"/coach/messages",icon:lI}],aV=[{label:"Planning",to:"/customer/planning",icon:zR},{label:"Messages",to:"/customer/messages",icon:hI},{label:"Profile",to:"/customer/profile",icon:tw}],lV=()=>{const t=Zn(),[e,n]=N.useState(null),[s,r]=N.useState(null),[i,a]=N.useState(null),l=()=>{localStorage.removeItem("token"),t("/login",{replace:!0})};N.useEffect(()=>{let m=!0;const p=localStorage.getItem("user");if(p)try{const R=JSON.parse(p);R!=null&&R.firebaseUid&&m&&n(R.firebaseUid)}catch{}const y=qw(Jo,R=>{m&&R!=null&&R.uid&&n(I=>I||R.uid)});return()=>{m=!1,y()}},[]),N.useEffect(()=>{if(!e){r(null);return}const m=XA(e,({data:p,error:y})=>{if(y){a(y),r(null);return}a(null),r(p||null)});return()=>{typeof m=="function"&&m()}},[e]);const c=(s==null?void 0:s.name)||(s==null?void 0:s.email)||"Admin",d=s!=null&&s.role?s.role.charAt(0).toUpperCase()+s.role.slice(1):"Administrator",f=i?"Administrator":d;return u.jsx(eg,{sidebar:u.jsx(tg,{header:u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Admin"}),u.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"EVC Control"})]}),navItems:rV,footer:u.jsx("button",{type:"button",onClick:l,className:"flex w-full items-center justify-center rounded-lg border border-slate-200 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600",children:"Sign out"})}),topbar:u.jsx(sg,{title:"Administration overview",user:{name:c,subtitle:f,role:"Admin"},rightSlot:u.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[u.jsx("button",{type:"button",onClick:()=>alert("Mock: generate report"),className:"rounded-full border border-slate-200 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600",children:"Generate report"}),u.jsx("button",{type:"button",onClick:l,className:"rounded-full bg-brand-600 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500",children:"Sign out"})]})}),children:u.jsx(Zp,{})})},oV=()=>{const t=Zn(),[e,n]=N.useState(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}}),[s,r]=N.useState(!e),[i,a]=N.useState(null);N.useEffect(()=>{let z=!0;return(async()=>{r(!0);try{const O=await Ts("/auth/me");if(!z)return;n($=>{const Y={...$||{},...O||{}};try{localStorage.setItem("user",JSON.stringify(Y))}catch{}return Y}),a(null)}catch(O){if(!z)return;a(O)}finally{z&&r(!1)}})(),()=>{z=!1}},[]);const l=(e==null?void 0:e.firebaseUid)||null,[c,d]=N.useState(null),[f,m]=N.useState(null);N.useEffect(()=>{if(!l)return d(null),m(null),()=>{};const z=K5(l,({data:V,error:O})=>{if(O){m(O),d(null);return}m(null),d(V||null)});return()=>{typeof z=="function"&&z()}},[l]);const[p,y]=N.useState([]),[R,I]=N.useState(null);N.useEffect(()=>{if(!l)return y([]),I(null),()=>{};const z=Q5(l,({data:V,error:O})=>{if(O){I(O),y([]);return}I(null),y(Array.isArray(V)?V:[])});return()=>{typeof z=="function"&&z()}},[l]);const[D,A]=N.useState([]),[b,x]=N.useState(null);N.useEffect(()=>{if(!l)return A([]),x(null),()=>{};const z=$5(l,({data:V,error:O})=>{if(O){x(O),A([]);return}x(null),A(Array.isArray(V)?V:[])});return()=>{typeof z=="function"&&z()}},[l]);const[j,U]=N.useState([]),[B,T]=N.useState(null);N.useEffect(()=>{if(!l)return U([]),T(null),()=>{};const z=Y5(l,({data:V,error:O})=>{if(O){T(O),U([]);return}T(null),U(Array.isArray(V)?V:[])});return()=>{typeof z=="function"&&z()}},[l]);const _=N.useMemo(()=>[{value:"all",label:"Alle klanten"},...p.map(V=>({value:V.id,label:V.name||V.email||"Unknown customer"}))],[p]),[v,S]=N.useState("all");N.useEffect(()=>{var z;_.some(V=>V.value===v)||S(((z=_[0])==null?void 0:z.value)||"all")},[_,v]);const w=N.useMemo(()=>v==="all"?null:p.find(z=>z.id===v)||null,[v,p]),k=N.useMemo(()=>w?`Focus: ${w.name||w.email||"Customer"}`:p.length===0?"Geen klanten gekoppeld":`${p.length} klanten gekoppeld`,[w,p.length]),C={name:(c==null?void 0:c.name)||(e==null?void 0:e.name)||(c==null?void 0:c.email)||(e==null?void 0:e.email)||"Coach",subtitle:k,role:"Coach"},ae=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/login",{replace:!0})},he=N.useMemo(()=>({coach:c,account:e,customers:p,assignments:D,feedback:j,selectedCustomer:w,errors:{user:i,profile:f,customers:R,assignments:b,feedback:B},loading:{user:s}}),[D,b,c,f,R,p,B,j,s,w,e,i]);return u.jsx(eg,{sidebar:u.jsx(tg,{header:u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-400",children:"Coach"}),u.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"EVC Workspace"})]}),navItems:iV}),topbar:u.jsx(sg,{title:"Coaching dashboard",user:C,rightSlot:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("select",{value:v,onChange:z=>S(z.target.value),className:"h-10 rounded-full border border-slate-200 bg-white px-3 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",children:_.map(z=>u.jsx("option",{value:z.value,children:z.label},z.value))}),u.jsx("button",{type:"button",onClick:ae,className:"rounded-full bg-brand-600 px-3 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500",children:"Sign out"})]})}),children:u.jsx(Zp,{context:he})})},cV=()=>{const t=Zn(),[e,n]=N.useState(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}}),[s,r]=N.useState(()=>{try{const w=localStorage.getItem("impersonationBackup");return w?JSON.parse(w):null}catch{return null}}),[i,a]=N.useState(!e),[l,c]=N.useState(null),[d,f]=N.useState(null),[m,p]=N.useState(null),[y,R]=N.useState(null),[I,D]=N.useState(null);N.useEffect(()=>{let w=!0;return(async()=>{a(!0);try{const C=await Ts("/auth/me");if(!w)return;n(ae=>{const he={...ae||{},...C||{}};try{localStorage.setItem("user",JSON.stringify(he))}catch{}return he}),c(null)}catch(C){if(!w)return;c(C)}finally{w&&a(!1)}})(),()=>{w=!1}},[]);const A=(e==null?void 0:e.firebaseUid)||null;N.useEffect(()=>{if(!A){f(null),p(null),R(null),D(null);return}const w=O5(A,({customer:k,coach:C,assignment:ae,error:he})=>{if(he){D(he);return}D(null),k!==void 0&&f(k||null),C!==void 0&&p(C||null),ae!==void 0&&R(ae||null)});return()=>{typeof w=="function"&&w()}},[A]);const b=N.useMemo(()=>d||(e?{id:e.firebaseUid||String(e.id||""),name:e.name||e.email||"Customer",email:e.email||"",role:e.role||"customer",trajectId:e.trajectId||null}:null),[d,e]),x=N.useMemo(()=>m||null,[m]),j=N.useMemo(()=>{if(!(b!=null&&b.lastActivity))return"-";const w=b.lastActivity;return w instanceof Date?w.toLocaleString():typeof w=="string"?w:"-"},[b==null?void 0:b.lastActivity]),U=!!s,B=N.useMemo(()=>{if(!(s!=null&&s.userData))return null;const{name:w,email:k}=s.userData;return w||k||null},[s]),T=[];U&&T.push(`Meekijken door ${B||"Admin"}`),x!=null&&x.name&&T.push(`Coach: ${x.name}`),y!=null&&y.status&&T.push(y.status);const _=T.join(" • ")||"Customer",v={name:(b==null?void 0:b.name)||"Customer",subtitle:_,role:"Customer"},S=()=>{if(!U){t("/admin",{replace:!0});return}let w=s;if(!w)try{const k=localStorage.getItem("impersonationBackup");w=k?JSON.parse(k):null}catch{w=null}if(w&&Object.prototype.hasOwnProperty.call(w,"token")?w.token===null?localStorage.removeItem("token"):localStorage.setItem("token",w.token):localStorage.removeItem("token"),w&&Object.prototype.hasOwnProperty.call(w,"user"))if(w.user===null)localStorage.removeItem("user"),n(null);else{localStorage.setItem("user",w.user);try{n(JSON.parse(w.user))}catch{n(null)}}else localStorage.removeItem("user"),n(null);localStorage.removeItem("impersonationBackup"),r(null),f(null),p(null),R(null),t("/admin",{replace:!0})};return u.jsx(eg,{sidebar:u.jsx(tg,{header:u.jsxs("div",{children:[u.jsx("p",{className:"text-xs uppercase tracking-widest text-slate-400",children:"Customer"}),u.jsx("h1",{className:"mt-1 text-xl font-semibold text-slate-900",children:"Mijn EVC"})]}),navItems:aV}),topbar:u.jsx(sg,{title:"Jouw EVC-traject",user:v,rightSlot:u.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500",children:[U?u.jsx("button",{type:"button",onClick:S,className:"rounded-full border border-brand-200 bg-brand-50 px-3 py-1 font-semibold text-brand-600 transition hover:bg-brand-100",children:"Stop meekijken"}):null,u.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-600",children:["Laatste activiteit: ",j]}),x?u.jsxs("span",{className:"hidden rounded-full bg-brand-50 px-3 py-1 font-medium text-brand-600 sm:inline",children:["Coach ",x.name]}):null]})}),children:u.jsx(Zp,{context:{customer:b,coach:x,assignment:y,account:e,loadingUser:i,userError:l,firestoreError:I}})})},uV=()=>u.jsx(NR,{children:u.jsxs(vR,{children:[u.jsx(Ne,{path:"/",element:u.jsx(d5,{})}),u.jsx(Ne,{path:"/login",element:u.jsx(c5,{})}),u.jsx(Ne,{path:"/testing/create-account",element:u.jsx(S5,{})}),u.jsxs(Ne,{path:"/admin",element:u.jsx(lV,{}),children:[u.jsx(Ne,{index:!0,element:u.jsx(g5,{})}),u.jsx(Ne,{path:"assignments",element:u.jsx(y5,{})}),u.jsx(Ne,{path:"trajects",element:u.jsx(b5,{})}),u.jsx(Ne,{path:"profile",element:u.jsx(x5,{})}),u.jsx(Ne,{path:"users",element:u.jsx(w5,{})})]}),u.jsxs(Ne,{path:"/coach",element:u.jsx(oV,{}),children:[u.jsx(Ne,{index:!0,element:u.jsx(z5,{})}),u.jsx(Ne,{path:"customers",element:u.jsx(q5,{})}),u.jsx(Ne,{path:"customers/:customerId",element:u.jsx(tV,{})}),u.jsx(Ne,{path:"feedback",element:u.jsx(nV,{})}),u.jsx(Ne,{path:"messages",element:u.jsx(sV,{})})]}),u.jsxs(Ne,{path:"/customer",element:u.jsx(cV,{}),children:[u.jsx(Ne,{index:!0,element:u.jsx(is,{to:"/customer/planning",replace:!0})}),u.jsx(Ne,{path:"planning",element:u.jsx(M5,{})}),u.jsx(Ne,{path:"messages",element:u.jsx(V5,{})}),u.jsx(Ne,{path:"profile",element:u.jsx(L5,{})})]}),u.jsx(Ne,{path:"/Login.html",element:u.jsx(is,{to:"/login",replace:!0})}),u.jsx(Ne,{path:"/Dashboard.html",element:u.jsx(is,{to:"/admin",replace:!0})}),u.jsx(Ne,{path:"/Profile.html",element:u.jsx(is,{to:"/customer/profile",replace:!0})}),u.jsx(Ne,{path:"/Planning.html",element:u.jsx(is,{to:"/customer/planning",replace:!0})}),u.jsx(Ne,{path:"/Messages.html",element:u.jsx(is,{to:"/customer/messages",replace:!0})}),u.jsx(Ne,{path:"/Evidence.html",element:u.jsx(is,{to:"/customer/planning",replace:!0})}),u.jsx(Ne,{path:"/index.html",element:u.jsx(is,{to:"/",replace:!0})}),u.jsx(Ne,{path:"*",element:u.jsx(is,{to:"/",replace:!0})})]})});function dV(){return u.jsx(uV,{})}const hV=CC.createRoot(document.getElementById("root"));hV.render(u.jsx(ou.StrictMode,{children:u.jsx(dV,{})}));
