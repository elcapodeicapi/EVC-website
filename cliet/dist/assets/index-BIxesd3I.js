function L2(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function $x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yx={exports:{}},hd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U2=Symbol.for("react.transitional.element"),P2=Symbol.for("react.fragment");function Xx(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:U2,type:t,key:s,ref:e!==void 0?e:null,props:n}}hd.Fragment=P2;hd.jsx=Xx;hd.jsxs=Xx;Yx.exports=hd;var c=Yx.exports,Wx={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op=Symbol.for("react.transitional.element"),z2=Symbol.for("react.portal"),B2=Symbol.for("react.fragment"),q2=Symbol.for("react.strict_mode"),F2=Symbol.for("react.profiler"),H2=Symbol.for("react.consumer"),G2=Symbol.for("react.context"),K2=Symbol.for("react.forward_ref"),Q2=Symbol.for("react.suspense"),$2=Symbol.for("react.memo"),Jx=Symbol.for("react.lazy"),Y2=Symbol.for("react.activity"),b0=Symbol.iterator;function X2(t){return t===null||typeof t!="object"?null:(t=b0&&t[b0]||t["@@iterator"],typeof t=="function"?t:null)}var Zx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e_=Object.assign,t_={};function za(t,e,n){this.props=t,this.context=e,this.refs=t_,this.updater=n||Zx}za.prototype.isReactComponent={};za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n_(){}n_.prototype=za.prototype;function cp(t,e,n){this.props=t,this.context=e,this.refs=t_,this.updater=n||Zx}var up=cp.prototype=new n_;up.constructor=cp;e_(up,za.prototype);up.isPureReactComponent=!0;var v0=Array.isArray;function jf(){}var Qe={H:null,A:null,T:null,S:null},s_=Object.prototype.hasOwnProperty;function dp(t,e,n){var s=n.ref;return{$$typeof:op,type:t,key:e,ref:s!==void 0?s:null,props:n}}function W2(t,e){return dp(t.type,e,t.props)}function hp(t){return typeof t=="object"&&t!==null&&t.$$typeof===op}function J2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var x0=/\/+/g;function Rh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J2(""+t.key):e.toString(36)}function Z2(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(jf,jf):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Br(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case op:case z2:a=!0;break;case Jx:return a=t._init,Br(a(t._payload),e,n,s,i)}}if(a)return i=i(t),a=s===""?"."+Rh(t,0):s,v0(i)?(n="",a!=null&&(n=a.replace(x0,"$&/")+"/"),Br(i,e,n,"",function(d){return d})):i!=null&&(hp(i)&&(i=W2(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(x0,"$&/")+"/")+a)),e.push(i)),1;a=0;var l=s===""?".":s+":";if(v0(t))for(var u=0;u<t.length;u++)s=t[u],r=l+Rh(s,u),a+=Br(s,e,n,r,i);else if(u=X2(t),typeof u=="function")for(t=u.call(t),u=0;!(s=t.next()).done;)s=s.value,r=l+Rh(s,u++),a+=Br(s,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return Br(Z2(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function yc(t,e,n){if(t==null)return t;var s=[],i=0;return Br(t,s,"","",function(r){return e.call(n,r,i++)}),s}function eS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},tS={map:yc,forEach:function(t,e,n){yc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yc(t,function(){e++}),e},toArray:function(t){return yc(t,function(e){return e})||[]},only:function(t){if(!hp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Activity=Y2;ue.Children=tS;ue.Component=za;ue.Fragment=B2;ue.Profiler=F2;ue.PureComponent=cp;ue.StrictMode=q2;ue.Suspense=Q2;ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qe;ue.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Qe.H.useMemoCache(t)}};ue.cache=function(t){return function(){return t.apply(null,arguments)}};ue.cacheSignal=function(){return null};ue.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=e_({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!s_.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];s.children=a}return dp(t.type,i,s)};ue.createContext=function(t){return t={$$typeof:G2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:H2,_context:t},t};ue.createElement=function(t,e,n){var s,i={},r=null;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)s_.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return dp(t,r,i)};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:K2,render:t}};ue.isValidElement=hp;ue.lazy=function(t){return{$$typeof:Jx,_payload:{_status:-1,_result:t},_init:eS}};ue.memo=function(t,e){return{$$typeof:$2,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Qe.T,n={};Qe.T=n;try{var s=t(),i=Qe.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(jf,_0)}catch(r){_0(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),Qe.T=e}};ue.unstable_useCacheRefresh=function(){return Qe.H.useCacheRefresh()};ue.use=function(t){return Qe.H.use(t)};ue.useActionState=function(t,e,n){return Qe.H.useActionState(t,e,n)};ue.useCallback=function(t,e){return Qe.H.useCallback(t,e)};ue.useContext=function(t){return Qe.H.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t,e){return Qe.H.useDeferredValue(t,e)};ue.useEffect=function(t,e){return Qe.H.useEffect(t,e)};ue.useEffectEvent=function(t){return Qe.H.useEffectEvent(t)};ue.useId=function(){return Qe.H.useId()};ue.useImperativeHandle=function(t,e,n){return Qe.H.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Qe.H.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Qe.H.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Qe.H.useMemo(t,e)};ue.useOptimistic=function(t,e){return Qe.H.useOptimistic(t,e)};ue.useReducer=function(t,e,n){return Qe.H.useReducer(t,e,n)};ue.useRef=function(t){return Qe.H.useRef(t)};ue.useState=function(t){return Qe.H.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Qe.H.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Qe.H.useTransition()};ue.version="19.2.0";Wx.exports=ue;var A=Wx.exports;const fu=$x(A),nS=L2({__proto__:null,default:fu},[A]);var i_={exports:{}},fd={},r_={exports:{}},a_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,M){var O=P.length;P.push(M);e:for(;0<O;){var H=O-1>>>1,Q=P[H];if(0<i(Q,M))P[H]=M,P[O]=Q,O=H;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var M=P[0],O=P.pop();if(O!==M){P[0]=O;e:for(var H=0,Q=P.length,ge=Q>>>1;H<ge;){var te=2*(H+1)-1,Ue=P[te],G=te+1,W=P[G];if(0>i(Ue,O))G<Q&&0>i(W,Ue)?(P[H]=W,P[G]=O,H=G):(P[H]=Ue,P[te]=O,H=te);else if(G<Q&&0>i(W,O))P[H]=W,P[G]=O,H=G;else break e}}return M}function i(P,M){var O=P.sortIndex-M.sortIndex;return O!==0?O:P.id-M.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],h=1,m=null,p=3,y=!1,N=!1,I=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function j(P){for(var M=n(d);M!==null;){if(M.callback===null)s(d);else if(M.startTime<=P)s(d),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(d)}}function L(P){if(I=!1,j(P),!N)if(n(u)!==null)N=!0,z||(z=!0,D());else{var M=n(d);M!==null&&Y(L,M.startTime-P)}}var z=!1,w=-1,b=5,v=-1;function S(){return k?!0:!(t.unstable_now()-v<b)}function C(){if(k=!1,z){var P=t.unstable_now();v=P;var M=!0;try{e:{N=!1,I&&(I=!1,x(w),w=-1),y=!0;var O=p;try{t:{for(j(P),m=n(u);m!==null&&!(m.expirationTime>P&&S());){var H=m.callback;if(typeof H=="function"){m.callback=null,p=m.priorityLevel;var Q=H(m.expirationTime<=P);if(P=t.unstable_now(),typeof Q=="function"){m.callback=Q,j(P),M=!0;break t}m===n(u)&&s(u),j(P)}else s(u);m=n(u)}if(m!==null)M=!0;else{var ge=n(d);ge!==null&&Y(L,ge.startTime-P),M=!1}}break e}finally{m=null,p=O,y=!1}M=void 0}}finally{M?D():z=!1}}}var D;if(typeof _=="function")D=function(){_(C)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,pe=R.port2;R.port1.onmessage=C,D=function(){pe.postMessage(null)}}else D=function(){T(C,0)};function Y(P,M){w=T(function(){P(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var O=p;p=M;try{return P()}finally{p=O}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(P,M){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var O=p;p=P;try{return M()}finally{p=O}},t.unstable_scheduleCallback=function(P,M,O){var H=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?H+O:H):O=H,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=O+Q,P={id:h++,callback:M,priorityLevel:P,startTime:O,expirationTime:Q,sortIndex:-1},O>H?(P.sortIndex=O,e(d,P),n(u)===null&&P===n(d)&&(I?(x(w),w=-1):I=!0,Y(L,O-H))):(P.sortIndex=Q,e(u,P),N||y||(N=!0,z||(z=!0,D()))),P},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(P){var M=p;return function(){var O=p;p=M;try{return P.apply(this,arguments)}finally{p=O}}}})(a_);r_.exports=a_;var sS=r_.exports,l_={exports:{}},Ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS=A;function o_(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Hs(){}var Ft={d:{f:Hs,r:function(){throw Error(o_(522))},D:Hs,C:Hs,L:Hs,m:Hs,X:Hs,S:Hs,M:Hs},p:0,findDOMNode:null},rS=Symbol.for("react.portal");function aS(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rS,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var Ul=iS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function md(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ft;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(o_(299));return aS(t,e,null,n)};Ht.flushSync=function(t){var e=Ul.T,n=Ft.p;try{if(Ul.T=null,Ft.p=2,t)return t()}finally{Ul.T=e,Ft.p=n,Ft.d.f()}};Ht.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ft.d.C(t,e))};Ht.prefetchDNS=function(t){typeof t=="string"&&Ft.d.D(t)};Ht.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=md(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ft.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):n==="script"&&Ft.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ht.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=md(e.as,e.crossOrigin);Ft.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ft.d.M(t)};Ht.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=md(n,e.crossOrigin);Ft.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ht.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=md(e.as,e.crossOrigin);Ft.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ft.d.m(t)};Ht.requestFormReset=function(t){Ft.d.r(t)};Ht.unstable_batchedUpdates=function(t,e){return t(e)};Ht.useFormState=function(t,e,n){return Ul.H.useFormState(t,e,n)};Ht.useFormStatus=function(){return Ul.H.useHostTransitionStatus()};Ht.version="19.2.0";function c_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c_)}catch(t){console.error(t)}}c_(),l_.exports=Ht;var lS=l_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=sS,u_=A,oS=lS;function q(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function h_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f_(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function E0(t){if(Oo(t)!==t)throw Error(q(188))}function cS(t){var e=t.alternate;if(!e){if(e=Oo(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return E0(i),t;if(r===s)return E0(i),e;r=r.sibling}throw Error(q(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a)throw Error(q(189))}}if(n.alternate!==s)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function m_(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=m_(t),e!==null)return e;t=t.sibling}return null}var $e=Object.assign,uS=Symbol.for("react.element"),bc=Symbol.for("react.transitional.element"),Nl=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),g_=Symbol.for("react.consumer"),gs=Symbol.for("react.context"),fp=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),Of=Symbol.for("react.suspense_list"),mp=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),Mf=Symbol.for("react.activity"),dS=Symbol.for("react.memo_cache_sentinel"),w0=Symbol.iterator;function vl(t){return t===null||typeof t!="object"?null:(t=w0&&t[w0]||t["@@iterator"],typeof t=="function"?t:null)}var hS=Symbol.for("react.client.reference");function Vf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===hS?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case kf:return"Profiler";case p_:return"StrictMode";case Df:return"Suspense";case Of:return"SuspenseList";case Mf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Nl:return"Portal";case gs:return t.displayName||"Context";case g_:return(t._context.displayName||"Context")+".Consumer";case fp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mp:return e=t.displayName||null,e!==null?e:Vf(t.type)||"Memo";case Ks:e=t._payload,t=t._init;try{return Vf(t(e))}catch{}}return null}var Cl=Array.isArray,ae=u_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie=oS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ir={pending:!1,data:null,method:null,action:null},Lf=[],Yr=-1;function ts(t){return{current:t}}function At(t){0>Yr||(t.current=Lf[Yr],Lf[Yr]=null,Yr--)}function ze(t,e){Yr++,Lf[Yr]=t.current,t.current=e}var Gn=ts(null),ao=ts(null),ui=ts(null),mu=ts(null);function pu(t,e){switch(ze(ui,e),ze(ao,t),ze(Gn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Rb(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Rb(e),t=Vw(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}At(Gn),ze(Gn,t)}function xa(){At(Gn),At(ao),At(ui)}function Uf(t){t.memoizedState!==null&&ze(mu,t);var e=Gn.current,n=Vw(e,t.type);e!==n&&(ze(ao,t),ze(Gn,n))}function gu(t){ao.current===t&&(At(Gn),At(ao)),mu.current===t&&(At(mu),bo._currentValue=ir)}var Ih,T0;function Ji(t){if(Ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ih=e&&e[1]||"",T0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ih+t+T0}var jh=!1;function kh(t,e){if(!t||jh)return"";jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(y){var p=y}Reflect.construct(t,[],m)}else{try{m.call()}catch(y){p=y}t.call(m.prototype)}}else{try{throw Error()}catch(y){p=y}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(y){if(y&&p&&typeof y.stack=="string")return[y.stack,p.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),d=l.split(`
`);for(i=s=0;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;for(;i<d.length&&!d[i].includes("DetermineComponentFrameRoot");)i++;if(s===u.length||i===d.length)for(s=u.length-1,i=d.length-1;1<=s&&0<=i&&u[s]!==d[i];)i--;for(;1<=s&&0<=i;s--,i--)if(u[s]!==d[i]){if(s!==1||i!==1)do if(s--,i--,0>i||u[s]!==d[i]){var h=`
`+u[s].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=s&&0<=i);break}}}finally{jh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ji(n):""}function fS(t,e){switch(t.tag){case 26:case 27:case 5:return Ji(t.type);case 16:return Ji("Lazy");case 13:return t.child!==e&&e!==null?Ji("Suspense Fallback"):Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 15:return kh(t.type,!1);case 11:return kh(t.type.render,!1);case 1:return kh(t.type,!0);case 31:return Ji("Activity");default:return""}}function A0(t){try{var e="",n=null;do e+=fS(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Pf=Object.prototype.hasOwnProperty,pp=xt.unstable_scheduleCallback,Dh=xt.unstable_cancelCallback,mS=xt.unstable_shouldYield,pS=xt.unstable_requestPaint,un=xt.unstable_now,gS=xt.unstable_getCurrentPriorityLevel,y_=xt.unstable_ImmediatePriority,b_=xt.unstable_UserBlockingPriority,yu=xt.unstable_NormalPriority,yS=xt.unstable_LowPriority,v_=xt.unstable_IdlePriority,bS=xt.log,vS=xt.unstable_setDisableYieldValue,Mo=null,dn=null;function si(t){if(typeof bS=="function"&&vS(t),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(Mo,t)}catch{}}var hn=Math.clz32?Math.clz32:ES,xS=Math.log,_S=Math.LN2;function ES(t){return t>>>=0,t===0?32:31-(xS(t)/_S|0)|0}var vc=256,xc=262144,_c=4194304;function Zi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function pd(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~r,s!==0?i=Zi(s):(a&=l,a!==0?i=Zi(a):n||(n=l&~t,n!==0&&(i=Zi(n))))):(l=s&~r,l!==0?i=Zi(l):a!==0?i=Zi(a):n||(n=s&~t,n!==0&&(i=Zi(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function Vo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function wS(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x_(){var t=_c;return _c<<=1,!(_c&62914560)&&(_c=4194304),t}function Oh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lo(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function TS(t,e,n,s,i,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,d=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-hn(n),m=1<<h;l[h]=0,u[h]=-1;var p=d[h];if(p!==null)for(d[h]=null,h=0;h<p.length;h++){var y=p[h];y!==null&&(y.lane&=-536870913)}n&=~m}s!==0&&__(t,s,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function __(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-hn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function E_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-hn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function w_(t,e){var n=e&-e;return n=n&42?1:gp(n),n&(t.suspendedLanes|e)?0:n}function gp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function yp(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function T_(){var t=Ie.p;return t!==0?t:(t=window.event,t===void 0?32:Qw(t.type))}function S0(t,e){var n=Ie.p;try{return Ie.p=t,e()}finally{Ie.p=n}}var Ui=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Ui,Zt="__reactProps$"+Ui,Ba="__reactContainer$"+Ui,zf="__reactEvents$"+Ui,AS="__reactListeners$"+Ui,SS="__reactHandles$"+Ui,N0="__reactResources$"+Ui,Uo="__reactMarker$"+Ui;function bp(t){delete t[Rt],delete t[Zt],delete t[zf],delete t[AS],delete t[SS]}function Xr(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ba]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ob(t);t!==null;){if(n=t[Rt])return n;t=Ob(t)}return e}t=n,n=t.parentNode}return null}function qa(t){if(t=t[Rt]||t[Ba]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Rl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(q(33))}function la(t){var e=t[N0];return e||(e=t[N0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Tt(t){t[Uo]=!0}var A_=new Set,S_={};function Ar(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for(S_[t]=e,t=0;t<e.length;t++)A_.add(e[t])}var NS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),C0={},R0={};function CS(t){return Pf.call(R0,t)?!0:Pf.call(C0,t)?!1:NS.test(t)?R0[t]=!0:(C0[t]=!0,!1)}function Bc(t,e,n){if(CS(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Ec(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function os(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function yn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RS(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bf(t){if(!t._valueTracker){var e=N_(t)?"checked":"value";t._valueTracker=RS(t,e,""+t[e])}}function C_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=N_(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var IS=/[\n"\\]/g;function xn(t){return t.replace(IS,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function qf(t,e,n,s,i,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+yn(e)):t.value!==""+yn(e)&&(t.value=""+yn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Ff(t,a,yn(e)):n!=null?Ff(t,a,yn(n)):s!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+yn(l):t.removeAttribute("name")}function R_(t,e,n,s,i,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){Bf(t);return}n=n!=null?""+yn(n):"",e=e!=null?""+yn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),Bf(t)}function Ff(t,e,n){e==="number"&&bu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function oa(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function I_(t,e,n){if(e!=null&&(e=""+yn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+yn(n):""}function j_(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(q(92));if(Cl(s)){if(1<s.length)throw Error(q(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=yn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Bf(t)}function Ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function I0(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||jS.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function k_(t,e,n){if(e!=null&&typeof e!="object")throw Error(q(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&I0(t,i,s)}else for(var r in e)e.hasOwnProperty(r)&&I0(t,r,e[r])}function vp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),DS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qc(t){return DS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ys(){}var Hf=null;function xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wr=null,ca=null;function j0(t){var e=qa(t);if(e&&(t=e.stateNode)){var n=t[Zt]||null;e:switch(t=e.stateNode,e.type){case"input":if(qf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[Zt]||null;if(!i)throw Error(q(90));qf(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&C_(s)}break e;case"textarea":I_(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&oa(t,!!n.multiple,e,!1)}}}var Mh=!1;function D_(t,e,n){if(Mh)return t(e,n);Mh=!0;try{var s=t(e);return s}finally{if(Mh=!1,(Wr!==null||ca!==null)&&(Nd(),Wr&&(e=Wr,t=ca,ca=Wr=null,j0(e),t)))for(e=0;e<t.length;e++)j0(t[e])}}function lo(t,e){var n=t.stateNode;if(n===null)return null;var s=n[Zt]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=!1;if(As)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){Gf=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{Gf=!1}var ii=null,_p=null,Fc=null;function O_(){if(Fc)return Fc;var t,e=_p,n=e.length,s,i="value"in ii?ii.value:ii.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===i[r-s];s++);return Fc=i.slice(t,1<s?1-s:void 0)}function Hc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wc(){return!0}function k0(){return!1}function en(t){function e(n,s,i,r,a){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?wc:k0,this.isPropagationStopped=k0,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wc)},persist:function(){},isPersistent:wc}),e}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gd=en(Sr),Po=$e({},Sr,{view:0,detail:0}),OS=en(Po),Vh,Lh,_l,yd=$e({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ep,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_l&&(_l&&t.type==="mousemove"?(Vh=t.screenX-_l.screenX,Lh=t.screenY-_l.screenY):Lh=Vh=0,_l=t),Vh)},movementY:function(t){return"movementY"in t?t.movementY:Lh}}),D0=en(yd),MS=$e({},yd,{dataTransfer:0}),VS=en(MS),LS=$e({},Po,{relatedTarget:0}),Uh=en(LS),US=$e({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=en(US),zS=$e({},Sr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BS=en(zS),qS=$e({},Sr,{data:0}),O0=en(qS),FS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GS[t])?!!e[t]:!1}function Ep(){return KS}var QS=$e({},Po,{key:function(t){if(t.key){var e=FS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ep,charCode:function(t){return t.type==="keypress"?Hc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$S=en(QS),YS=$e({},yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=en(YS),XS=$e({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ep}),WS=en(XS),JS=$e({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZS=en(JS),eN=$e({},yd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tN=en(eN),nN=$e({},Sr,{newState:0,oldState:0}),sN=en(nN),iN=[9,13,27,32],wp=As&&"CompositionEvent"in window,Pl=null;As&&"documentMode"in document&&(Pl=document.documentMode);var rN=As&&"TextEvent"in window&&!Pl,M_=As&&(!wp||Pl&&8<Pl&&11>=Pl),V0=" ",L0=!1;function V_(t,e){switch(t){case"keyup":return iN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function aN(t,e){switch(t){case"compositionend":return L_(e);case"keypress":return e.which!==32?null:(L0=!0,V0);case"textInput":return t=e.data,t===V0&&L0?null:t;default:return null}}function lN(t,e){if(Jr)return t==="compositionend"||!wp&&V_(t,e)?(t=O_(),Fc=_p=ii=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M_&&e.locale!=="ko"?null:e.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oN[t.type]:e==="textarea"}function U_(t,e,n,s){Wr?ca?ca.push(s):ca=[s]:Wr=s,e=Vu(e,"onChange"),0<e.length&&(n=new gd("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var zl=null,oo=null;function cN(t){Dw(t,0)}function bd(t){var e=Rl(t);if(C_(e))return t}function P0(t,e){if(t==="change")return e}var P_=!1;if(As){var Ph;if(As){var zh="oninput"in document;if(!zh){var z0=document.createElement("div");z0.setAttribute("oninput","return;"),zh=typeof z0.oninput=="function"}Ph=zh}else Ph=!1;P_=Ph&&(!document.documentMode||9<document.documentMode)}function B0(){zl&&(zl.detachEvent("onpropertychange",z_),oo=zl=null)}function z_(t){if(t.propertyName==="value"&&bd(oo)){var e=[];U_(e,oo,t,xp(t)),D_(cN,e)}}function uN(t,e,n){t==="focusin"?(B0(),zl=e,oo=n,zl.attachEvent("onpropertychange",z_)):t==="focusout"&&B0()}function dN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bd(oo)}function hN(t,e){if(t==="click")return bd(e)}function fN(t,e){if(t==="input"||t==="change")return bd(e)}function mN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:mN;function co(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Pf.call(e,i)||!mn(t[i],e[i]))return!1}return!0}function q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F0(t,e){var n=q0(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=q0(n)}}function B_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?B_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=bu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bu(t.document)}return e}function Tp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var pN=As&&"documentMode"in document&&11>=document.documentMode,Zr=null,Kf=null,Bl=null,Qf=!1;function H0(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qf||Zr==null||Zr!==bu(s)||(s=Zr,"selectionStart"in s&&Tp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Bl&&co(Bl,s)||(Bl=s,s=Vu(Kf,"onSelect"),0<s.length&&(e=new gd("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Zr)))}function Wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},Bh={},F_={};As&&(F_=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Nr(t){if(Bh[t])return Bh[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in F_)return Bh[t]=e[n];return t}var H_=Nr("animationend"),G_=Nr("animationiteration"),K_=Nr("animationstart"),gN=Nr("transitionrun"),yN=Nr("transitionstart"),bN=Nr("transitioncancel"),Q_=Nr("transitionend"),$_=new Map,$f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$f.push("scrollEnd");function Vn(t,e){$_.set(t,e),Ar(e,[t])}var vu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},gn=[],ta=0,Ap=0;function vd(){for(var t=ta,e=Ap=ta=0;e<t;){var n=gn[e];gn[e++]=null;var s=gn[e];gn[e++]=null;var i=gn[e];gn[e++]=null;var r=gn[e];if(gn[e++]=null,s!==null&&i!==null){var a=s.pending;a===null?i.next=i:(i.next=a.next,a.next=i),s.pending=i}r!==0&&Y_(n,i,r)}}function xd(t,e,n,s){gn[ta++]=t,gn[ta++]=e,gn[ta++]=n,gn[ta++]=s,Ap|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Sp(t,e,n,s){return xd(t,e,n,s),xu(t)}function Cr(t,e){return xd(t,null,null,e),xu(t)}function Y_(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-hn(n),t=r.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),r):null}function xu(t){if(50<Xl)throw Xl=0,pm=null,Error(q(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var na={};function vN(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,s){return new vN(t,e,n,s)}function Np(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _s(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function X_(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Gc(t,e,n,s,i,r){var a=0;if(s=t,typeof t=="function")Np(t)&&(a=1);else if(typeof t=="string")a=TC(t,n,Gn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Mf:return t=an(31,n,e,i),t.elementType=Mf,t.lanes=r,t;case $r:return rr(n.children,i,r,e);case p_:a=8,i|=24;break;case kf:return t=an(12,n,e,i|2),t.elementType=kf,t.lanes=r,t;case Df:return t=an(13,n,e,i),t.elementType=Df,t.lanes=r,t;case Of:return t=an(19,n,e,i),t.elementType=Of,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gs:a=10;break e;case g_:a=9;break e;case fp:a=11;break e;case mp:a=14;break e;case Ks:a=16,s=null;break e}a=29,n=Error(q(130,t===null?"null":typeof t,"")),s=null}return e=an(a,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function rr(t,e,n,s){return t=an(7,t,s,e),t.lanes=n,t}function qh(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function W_(t){var e=an(18,null,null,0);return e.stateNode=t,e}function Fh(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var G0=new WeakMap;function _n(t,e){if(typeof t=="object"&&t!==null){var n=G0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:A0(e)},G0.set(t,e),e)}return{value:t,source:e,stack:A0(e)}}var sa=[],ia=0,_u=null,uo=0,bn=[],vn=0,Ai=null,Bn=1,qn="";function ms(t,e){sa[ia++]=uo,sa[ia++]=_u,_u=t,uo=e}function J_(t,e,n){bn[vn++]=Bn,bn[vn++]=qn,bn[vn++]=Ai,Ai=t;var s=Bn;t=qn;var i=32-hn(s)-1;s&=~(1<<i),n+=1;var r=32-hn(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Bn=1<<32-hn(e)+i|n<<i|s,qn=r+t}else Bn=1<<r|n<<i|s,qn=t}function Cp(t){t.return!==null&&(ms(t,1),J_(t,1,0))}function Rp(t){for(;t===_u;)_u=sa[--ia],sa[ia]=null,uo=sa[--ia],sa[ia]=null;for(;t===Ai;)Ai=bn[--vn],bn[vn]=null,qn=bn[--vn],bn[vn]=null,Bn=bn[--vn],bn[vn]=null}function Z_(t,e){bn[vn++]=Bn,bn[vn++]=qn,bn[vn++]=Ai,Bn=e.id,qn=e.overflow,Ai=t}var It=null,Ge=null,Se=!1,di=null,En=!1,Yf=Error(q(519));function Si(t){var e=Error(q(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ho(_n(e,t)),Yf}function K0(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Rt]=t,e[Zt]=s,n){case"dialog":ve("cancel",e),ve("close",e);break;case"iframe":case"object":case"embed":ve("load",e);break;case"video":case"audio":for(n=0;n<go.length;n++)ve(go[n],e);break;case"source":ve("error",e);break;case"img":case"image":case"link":ve("error",e),ve("load",e);break;case"details":ve("toggle",e);break;case"input":ve("invalid",e),R_(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ve("invalid",e);break;case"textarea":ve("invalid",e),j_(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||Mw(e.textContent,n)?(s.popover!=null&&(ve("beforetoggle",e),ve("toggle",e)),s.onScroll!=null&&ve("scroll",e),s.onScrollEnd!=null&&ve("scrollend",e),s.onClick!=null&&(e.onclick=ys),e=!0):e=!1,e||Si(t,!0)}function Q0(t){for(It=t.return;It;)switch(It.tag){case 5:case 31:case 13:En=!1;return;case 27:case 3:En=!0;return;default:It=It.return}}function Pr(t){if(t!==It)return!1;if(!Se)return Q0(t),Se=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||xm(t.type,t.memoizedProps)),n=!n),n&&Ge&&Si(t),Q0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));Ge=Db(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));Ge=Db(t)}else e===27?(e=Ge,Pi(t.type)?(t=Tm,Tm=null,Ge=t):Ge=e):Ge=It?Sn(t.stateNode.nextSibling):null;return!0}function mr(){Ge=It=null,Se=!1}function Hh(){var t=di;return t!==null&&(Yt===null?Yt=t:Yt.push.apply(Yt,t),di=null),t}function ho(t){di===null?di=[t]:di.push(t)}var Xf=ts(null),Rr=null,bs=null;function $s(t,e,n){ze(Xf,e._currentValue),e._currentValue=n}function Es(t){t._currentValue=Xf.current,At(Xf)}function Wf(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Jf(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var a=i.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=i;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Wf(r.return,n,t),s||(a=null);break e}r=l.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Wf(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function Fa(t,e,n,s){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(q(387));if(a=a.memoizedProps,a!==null){var l=i.type;mn(i.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(i===mu.current){if(a=i.alternate,a===null)throw Error(q(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(bo):t=[bo])}i=i.return}t!==null&&Jf(e,t,n,s),e.flags|=262144}function Eu(t){for(t=t.firstContext;t!==null;){if(!mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function pr(t){Rr=t,bs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function kt(t){return eE(Rr,t)}function Tc(t,e){return Rr===null&&pr(t),eE(t,e)}function eE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},bs===null){if(t===null)throw Error(q(308));bs=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else bs=bs.next=e;return n}var xN=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},_N=xt.unstable_scheduleCallback,EN=xt.unstable_NormalPriority,ht={$$typeof:gs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ip(){return{controller:new xN,data:new Map,refCount:0}}function zo(t){t.refCount--,t.refCount===0&&_N(EN,function(){t.controller.abort()})}var ql=null,Zf=0,wa=0,ua=null;function wN(t,e){if(ql===null){var n=ql=[];Zf=0,wa=tg(),ua={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Zf++,e.then($0,$0),e}function $0(){if(--Zf===0&&ql!==null){ua!==null&&(ua.status="fulfilled");var t=ql;ql=null,wa=0,ua=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function TN(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var Y0=ae.S;ae.S=function(t,e){mw=un(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&wN(t,e),Y0!==null&&Y0(t,e)};var ar=ts(null);function jp(){var t=ar.current;return t!==null?t:Le.pooledCache}function Kc(t,e){e===null?ze(ar,ar.current):ze(ar,e.pool)}function tE(){var t=jp();return t===null?null:{parent:ht._currentValue,pool:t}}var Ha=Error(q(460)),kp=Error(q(474)),_d=Error(q(542)),wu={then:function(){}};function X0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nE(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ys,ys),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,J0(t),t;default:if(typeof e.status=="string")e.then(ys,ys);else{if(t=Le,t!==null&&100<t.shellSuspendCounter)throw Error(q(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,J0(t),t}throw lr=e,Ha}}function er(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(lr=n,Ha):n}}var lr=null;function W0(){if(lr===null)throw Error(q(459));var t=lr;return lr=null,t}function J0(t){if(t===Ha||t===_d)throw Error(q(483))}var da=null,fo=0;function Ac(t){var e=fo;return fo+=1,da===null&&(da=[]),nE(da,t,e)}function El(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Sc(t,e){throw e.$$typeof===uS?Error(q(525)):(t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function sE(t){function e(T,x){if(t){var _=T.deletions;_===null?(T.deletions=[x],T.flags|=16):_.push(x)}}function n(T,x){if(!t)return null;for(;x!==null;)e(T,x),x=x.sibling;return null}function s(T){for(var x=new Map;T!==null;)T.key!==null?x.set(T.key,T):x.set(T.index,T),T=T.sibling;return x}function i(T,x){return T=_s(T,x),T.index=0,T.sibling=null,T}function r(T,x,_){return T.index=_,t?(_=T.alternate,_!==null?(_=_.index,_<x?(T.flags|=67108866,x):_):(T.flags|=67108866,x)):(T.flags|=1048576,x)}function a(T){return t&&T.alternate===null&&(T.flags|=67108866),T}function l(T,x,_,j){return x===null||x.tag!==6?(x=qh(_,T.mode,j),x.return=T,x):(x=i(x,_),x.return=T,x)}function u(T,x,_,j){var L=_.type;return L===$r?h(T,x,_.props.children,j,_.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ks&&er(L)===x.type)?(x=i(x,_.props),El(x,_),x.return=T,x):(x=Gc(_.type,_.key,_.props,null,T.mode,j),El(x,_),x.return=T,x)}function d(T,x,_,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Fh(_,T.mode,j),x.return=T,x):(x=i(x,_.children||[]),x.return=T,x)}function h(T,x,_,j,L){return x===null||x.tag!==7?(x=rr(_,T.mode,j,L),x.return=T,x):(x=i(x,_),x.return=T,x)}function m(T,x,_){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=qh(""+x,T.mode,_),x.return=T,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bc:return _=Gc(x.type,x.key,x.props,null,T.mode,_),El(_,x),_.return=T,_;case Nl:return x=Fh(x,T.mode,_),x.return=T,x;case Ks:return x=er(x),m(T,x,_)}if(Cl(x)||vl(x))return x=rr(x,T.mode,_,null),x.return=T,x;if(typeof x.then=="function")return m(T,Ac(x),_);if(x.$$typeof===gs)return m(T,Tc(T,x),_);Sc(T,x)}return null}function p(T,x,_,j){var L=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return L!==null?null:l(T,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bc:return _.key===L?u(T,x,_,j):null;case Nl:return _.key===L?d(T,x,_,j):null;case Ks:return _=er(_),p(T,x,_,j)}if(Cl(_)||vl(_))return L!==null?null:h(T,x,_,j,null);if(typeof _.then=="function")return p(T,x,Ac(_),j);if(_.$$typeof===gs)return p(T,x,Tc(T,_),j);Sc(T,_)}return null}function y(T,x,_,j,L){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return T=T.get(_)||null,l(x,T,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case bc:return T=T.get(j.key===null?_:j.key)||null,u(x,T,j,L);case Nl:return T=T.get(j.key===null?_:j.key)||null,d(x,T,j,L);case Ks:return j=er(j),y(T,x,_,j,L)}if(Cl(j)||vl(j))return T=T.get(_)||null,h(x,T,j,L,null);if(typeof j.then=="function")return y(T,x,_,Ac(j),L);if(j.$$typeof===gs)return y(T,x,_,Tc(x,j),L);Sc(x,j)}return null}function N(T,x,_,j){for(var L=null,z=null,w=x,b=x=0,v=null;w!==null&&b<_.length;b++){w.index>b?(v=w,w=null):v=w.sibling;var S=p(T,w,_[b],j);if(S===null){w===null&&(w=v);break}t&&w&&S.alternate===null&&e(T,w),x=r(S,x,b),z===null?L=S:z.sibling=S,z=S,w=v}if(b===_.length)return n(T,w),Se&&ms(T,b),L;if(w===null){for(;b<_.length;b++)w=m(T,_[b],j),w!==null&&(x=r(w,x,b),z===null?L=w:z.sibling=w,z=w);return Se&&ms(T,b),L}for(w=s(w);b<_.length;b++)v=y(w,T,b,_[b],j),v!==null&&(t&&v.alternate!==null&&w.delete(v.key===null?b:v.key),x=r(v,x,b),z===null?L=v:z.sibling=v,z=v);return t&&w.forEach(function(C){return e(T,C)}),Se&&ms(T,b),L}function I(T,x,_,j){if(_==null)throw Error(q(151));for(var L=null,z=null,w=x,b=x=0,v=null,S=_.next();w!==null&&!S.done;b++,S=_.next()){w.index>b?(v=w,w=null):v=w.sibling;var C=p(T,w,S.value,j);if(C===null){w===null&&(w=v);break}t&&w&&C.alternate===null&&e(T,w),x=r(C,x,b),z===null?L=C:z.sibling=C,z=C,w=v}if(S.done)return n(T,w),Se&&ms(T,b),L;if(w===null){for(;!S.done;b++,S=_.next())S=m(T,S.value,j),S!==null&&(x=r(S,x,b),z===null?L=S:z.sibling=S,z=S);return Se&&ms(T,b),L}for(w=s(w);!S.done;b++,S=_.next())S=y(w,T,b,S.value,j),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?b:S.key),x=r(S,x,b),z===null?L=S:z.sibling=S,z=S);return t&&w.forEach(function(D){return e(T,D)}),Se&&ms(T,b),L}function k(T,x,_,j){if(typeof _=="object"&&_!==null&&_.type===$r&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case bc:e:{for(var L=_.key;x!==null;){if(x.key===L){if(L=_.type,L===$r){if(x.tag===7){n(T,x.sibling),j=i(x,_.props.children),j.return=T,T=j;break e}}else if(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ks&&er(L)===x.type){n(T,x.sibling),j=i(x,_.props),El(j,_),j.return=T,T=j;break e}n(T,x);break}else e(T,x);x=x.sibling}_.type===$r?(j=rr(_.props.children,T.mode,j,_.key),j.return=T,T=j):(j=Gc(_.type,_.key,_.props,null,T.mode,j),El(j,_),j.return=T,T=j)}return a(T);case Nl:e:{for(L=_.key;x!==null;){if(x.key===L)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(T,x.sibling),j=i(x,_.children||[]),j.return=T,T=j;break e}else{n(T,x);break}else e(T,x);x=x.sibling}j=Fh(_,T.mode,j),j.return=T,T=j}return a(T);case Ks:return _=er(_),k(T,x,_,j)}if(Cl(_))return N(T,x,_,j);if(vl(_)){if(L=vl(_),typeof L!="function")throw Error(q(150));return _=L.call(_),I(T,x,_,j)}if(typeof _.then=="function")return k(T,x,Ac(_),j);if(_.$$typeof===gs)return k(T,x,Tc(T,_),j);Sc(T,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,x!==null&&x.tag===6?(n(T,x.sibling),j=i(x,_),j.return=T,T=j):(n(T,x),j=qh(_,T.mode,j),j.return=T,T=j),a(T)):n(T,x)}return function(T,x,_,j){try{fo=0;var L=k(T,x,_,j);return da=null,L}catch(w){if(w===Ha||w===_d)throw w;var z=an(29,w,null,T.mode);return z.lanes=j,z.return=T,z}finally{}}}var gr=sE(!0),iE=sE(!1),Qs=!1;function Dp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function em(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function fi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Re&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=xu(t),Y_(t,null,n),e}return xd(t,s,e,n),xu(t)}function Fl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,E_(t,n)}}function Gh(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var tm=!1;function Hl(){if(tm){var t=ua;if(t!==null)throw t}}function Gl(t,e,n,s){tm=!1;var i=t.updateQueue;Qs=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?r=d:a.next=d,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(r!==null){var m=i.baseState;a=0,h=d=u=null,l=r;do{var p=l.lane&-536870913,y=p!==l.lane;if(y?(Te&p)===p:(s&p)===p){p!==0&&p===wa&&(tm=!0),h!==null&&(h=h.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var N=t,I=l;p=e;var k=n;switch(I.tag){case 1:if(N=I.payload,typeof N=="function"){m=N.call(k,m,p);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=I.payload,p=typeof N=="function"?N.call(k,m,p):N,p==null)break e;m=$e({},m,p);break e;case 2:Qs=!0}}p=l.callback,p!==null&&(t.flags|=64,y&&(t.flags|=8192),y=i.callbacks,y===null?i.callbacks=[p]:y.push(p))}else y={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,u=m):h=h.next=y,a|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,r===null&&(i.shared.lanes=0),Ci|=a,t.lanes=a,t.memoizedState=m}}function rE(t,e){if(typeof t!="function")throw Error(q(191,t));t.call(e)}function aE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)rE(n[t],e)}var Ta=ts(null),Tu=ts(0);function Z0(t,e){t=Rs,ze(Tu,t),ze(Ta,e),Rs=t|e.baseLanes}function nm(){ze(Tu,Rs),ze(Ta,Ta.current)}function Op(){Rs=Tu.current,At(Ta),At(Tu)}var pn=ts(null),An=null;function Ys(t){var e=t.alternate;ze(at,at.current&1),ze(pn,t),An===null&&(e===null||Ta.current!==null||e.memoizedState!==null)&&(An=t)}function sm(t){ze(at,at.current),ze(pn,t),An===null&&(An=t)}function lE(t){t.tag===22?(ze(at,at.current),ze(pn,t),An===null&&(An=t)):Xs()}function Xs(){ze(at,at.current),ze(pn,pn.current)}function rn(t){At(pn),An===t&&(An=null),At(at)}var at=ts(0);function Au(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Em(n)||wm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ss=0,de=null,Me=null,ut=null,Su=!1,ha=!1,yr=!1,Nu=0,mo=0,fa=null,AN=0;function tt(){throw Error(q(321))}function Mp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function Vp(t,e,n,s,i,r){return Ss=r,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ae.H=t===null||t.memoizedState===null?UE:Qp,yr=!1,r=n(s,i),yr=!1,ha&&(r=cE(e,n,s,i)),oE(t),r}function oE(t){ae.H=po;var e=Me!==null&&Me.next!==null;if(Ss=0,ut=Me=de=null,Su=!1,mo=0,fa=null,e)throw Error(q(300));t===null||mt||(t=t.dependencies,t!==null&&Eu(t)&&(mt=!0))}function cE(t,e,n,s){de=t;var i=0;do{if(ha&&(fa=null),mo=0,ha=!1,25<=i)throw Error(q(301));if(i+=1,ut=Me=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ae.H=PE,r=e(n,s)}while(ha);return r}function SN(){var t=ae.H,e=t.useState()[0];return e=typeof e.then=="function"?Bo(e):e,t=t.useState()[0],(Me!==null?Me.memoizedState:null)!==t&&(de.flags|=1024),e}function Lp(){var t=Nu!==0;return Nu=0,t}function Up(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Pp(t){if(Su){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Su=!1}Ss=0,ut=Me=de=null,ha=!1,mo=Nu=0,fa=null}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?de.memoizedState=ut=t:ut=ut.next=t,ut}function ot(){if(Me===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=ut===null?de.memoizedState:ut.next;if(e!==null)ut=e,Me=t;else{if(t===null)throw de.alternate===null?Error(q(467)):Error(q(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},ut===null?de.memoizedState=ut=t:ut=ut.next=t}return ut}function Ed(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bo(t){var e=mo;return mo+=1,fa===null&&(fa=[]),t=nE(fa,t,e),e=de,(ut===null?e.memoizedState:ut.next)===null&&(e=e.alternate,ae.H=e===null||e.memoizedState===null?UE:Qp),t}function wd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Bo(t);if(t.$$typeof===gs)return kt(t)}throw Error(q(438,String(t)))}function zp(t){var e=null,n=de.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=de.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Ed(),de.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=dS;return e.index++,n}function Ns(t,e){return typeof e=="function"?e(t):e}function Qc(t){var e=ot();return Bp(e,Me,t)}function Bp(t,e,n){var s=t.queue;if(s===null)throw Error(q(311));s.lastRenderedReducer=n;var i=t.baseQueue,r=s.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}e.baseQueue=i=r,s.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var l=a=null,u=null,d=e,h=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(Te&m)===m:(Ss&m)===m){var p=d.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===wa&&(h=!0);else if((Ss&p)===p){d=d.next,p===wa&&(h=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,de.lanes|=p,Ci|=p;m=d.action,yr&&n(r,m),r=d.hasEagerState?d.eagerState:n(r,m)}else p={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(l=u=p,a=r):u=u.next=p,de.lanes|=m,Ci|=m;d=d.next}while(d!==null&&d!==e);if(u===null?a=r:u.next=l,!mn(r,t.memoizedState)&&(mt=!0,h&&(n=ua,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,s.lastRenderedState=r}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Kh(t){var e=ot(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do r=t(r,a.action),a=a.next;while(a!==i);mn(r,e.memoizedState)||(mt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function uE(t,e,n){var s=de,i=ot(),r=Se;if(r){if(n===void 0)throw Error(q(407));n=n()}else n=e();var a=!mn((Me||i).memoizedState,n);if(a&&(i.memoizedState=n,mt=!0),i=i.queue,qp(fE.bind(null,s,i,t),[t]),i.getSnapshot!==e||a||ut!==null&&ut.memoizedState.tag&1){if(s.flags|=2048,Aa(9,{destroy:void 0},hE.bind(null,s,i,n,e),null),Le===null)throw Error(q(349));r||Ss&127||dE(s,e,n)}return n}function dE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e=Ed(),de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hE(t,e,n,s){e.value=n,e.getSnapshot=s,mE(e)&&pE(t)}function fE(t,e,n){return n(function(){mE(e)&&pE(t)})}function mE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function pE(t){var e=Cr(t,2);e!==null&&Jt(e,t,2)}function im(t){var e=qt();if(typeof t=="function"){var n=t;if(t=n(),yr){si(!0);try{n()}finally{si(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},e}function gE(t,e,n,s){return t.baseState=n,Bp(t,Me,typeof s=="function"?s:Ns)}function NN(t,e,n,s,i){if(Ad(t))throw Error(q(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ae.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,yE(e,r)):(r.next=n.next,e.pending=n.next=r)}}function yE(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var r=ae.T,a={};ae.T=a;try{var l=n(i,s),u=ae.S;u!==null&&u(a,l),eb(t,e,l)}catch(d){rm(t,e,d)}finally{r!==null&&a.types!==null&&(r.types=a.types),ae.T=r}}else try{r=n(i,s),eb(t,e,r)}catch(d){rm(t,e,d)}}function eb(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){tb(t,e,s)},function(s){return rm(t,e,s)}):tb(t,e,n)}function tb(t,e,n){e.status="fulfilled",e.value=n,bE(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,yE(t,n)))}function rm(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,bE(e),e=e.next;while(e!==s)}t.action=null}function bE(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function vE(t,e){return e}function nb(t,e){if(Se){var n=Le.formState;if(n!==null){e:{var s=de;if(Se){if(Ge){t:{for(var i=Ge,r=En;i.nodeType!==8;){if(!r){i=null;break t}if(i=Sn(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Ge=Sn(i.nextSibling),s=i.data==="F!";break e}}Si(s)}s=!1}s&&(e=n[0])}}return n=qt(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vE,lastRenderedState:e},n.queue=s,n=ME.bind(null,de,s),s.dispatch=n,s=im(!1),r=Kp.bind(null,de,!1,s.queue),s=qt(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=NN.bind(null,de,i,r,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function sb(t){var e=ot();return xE(e,Me,t)}function xE(t,e,n){if(e=Bp(t,e,vE)[0],t=Qc(Ns)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Bo(e)}catch(a){throw a===Ha?_d:a}else s=e;e=ot();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(de.flags|=2048,Aa(9,{destroy:void 0},CN.bind(null,i,n),null)),[s,r,t]}function CN(t,e){t.action=e}function ib(t){var e=ot(),n=Me;if(n!==null)return xE(e,n,t);ot(),e=e.memoizedState,n=ot();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Aa(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=de.updateQueue,e===null&&(e=Ed(),de.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function _E(){return ot().memoizedState}function $c(t,e,n,s){var i=qt();de.flags|=t,i.memoizedState=Aa(1|e,{destroy:void 0},n,s===void 0?null:s)}function Td(t,e,n,s){var i=ot();s=s===void 0?null:s;var r=i.memoizedState.inst;Me!==null&&s!==null&&Mp(s,Me.memoizedState.deps)?i.memoizedState=Aa(e,r,n,s):(de.flags|=t,i.memoizedState=Aa(1|e,r,n,s))}function rb(t,e){$c(8390656,8,t,e)}function qp(t,e){Td(2048,8,t,e)}function RN(t){de.flags|=4;var e=de.updateQueue;if(e===null)e=Ed(),de.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function EE(t){var e=ot().memoizedState;return RN({ref:e,nextImpl:t}),function(){if(Re&2)throw Error(q(440));return e.impl.apply(void 0,arguments)}}function wE(t,e){return Td(4,2,t,e)}function TE(t,e){return Td(4,4,t,e)}function AE(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SE(t,e,n){n=n!=null?n.concat([t]):null,Td(4,4,AE.bind(null,e,t),n)}function Fp(){}function NE(t,e){var n=ot();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&Mp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function CE(t,e){var n=ot();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&Mp(e,s[1]))return s[0];if(s=t(),yr){si(!0);try{t()}finally{si(!1)}}return n.memoizedState=[s,e],s}function Hp(t,e,n){return n===void 0||Ss&1073741824&&!(Te&261930)?t.memoizedState=e:(t.memoizedState=n,t=gw(),de.lanes|=t,Ci|=t,n)}function RE(t,e,n,s){return mn(n,e)?n:Ta.current!==null?(t=Hp(t,n,s),mn(t,e)||(mt=!0),t):!(Ss&42)||Ss&1073741824&&!(Te&261930)?(mt=!0,t.memoizedState=n):(t=gw(),de.lanes|=t,Ci|=t,e)}function IE(t,e,n,s,i){var r=Ie.p;Ie.p=r!==0&&8>r?r:8;var a=ae.T,l={};ae.T=l,Kp(t,!1,e,n);try{var u=i(),d=ae.S;if(d!==null&&d(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=TN(u,s);Kl(t,e,h,fn(t))}else Kl(t,e,s,fn(t))}catch(m){Kl(t,e,{then:function(){},status:"rejected",reason:m},fn())}finally{Ie.p=r,a!==null&&l.types!==null&&(a.types=l.types),ae.T=a}}function IN(){}function am(t,e,n,s){if(t.tag!==5)throw Error(q(476));var i=jE(t).queue;IE(t,i,e,ir,n===null?IN:function(){return kE(t),n(s)})}function jE(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ir,baseState:ir,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:ir},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function kE(t){var e=jE(t);e.next===null&&(e=t.alternate.memoizedState),Kl(t,e.next.queue,{},fn())}function Gp(){return kt(bo)}function DE(){return ot().memoizedState}function OE(){return ot().memoizedState}function jN(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=fn();t=hi(n);var s=fi(e,t,n);s!==null&&(Jt(s,e,n),Fl(s,e,n)),e={cache:Ip()},t.payload=e;return}e=e.return}}function kN(t,e,n){var s=fn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ad(t)?VE(e,n):(n=Sp(t,e,n,s),n!==null&&(Jt(n,t,s),LE(n,e,s)))}function ME(t,e,n){var s=fn();Kl(t,e,n,s)}function Kl(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ad(t))VE(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(i.hasEagerState=!0,i.eagerState=l,mn(l,a))return xd(t,e,i,0),Le===null&&vd(),!1}catch{}finally{}if(n=Sp(t,e,i,s),n!==null)return Jt(n,t,s),LE(n,e,s),!0}return!1}function Kp(t,e,n,s){if(s={lane:2,revertLane:tg(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ad(t)){if(e)throw Error(q(479))}else e=Sp(t,n,s,2),e!==null&&Jt(e,t,2)}function Ad(t){var e=t.alternate;return t===de||e!==null&&e===de}function VE(t,e){ha=Su=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LE(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,E_(t,n)}}var po={readContext:kt,use:wd,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};po.useEffectEvent=tt;var UE={readContext:kt,use:wd,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:kt,useEffect:rb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,$c(4194308,4,AE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $c(4194308,4,t,e)},useInsertionEffect:function(t,e){$c(4,2,t,e)},useMemo:function(t,e){var n=qt();e=e===void 0?null:e;var s=t();if(yr){si(!0);try{t()}finally{si(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=qt();if(n!==void 0){var i=n(e);if(yr){si(!0);try{n(e)}finally{si(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=kN.bind(null,de,t),[s.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:function(t){t=im(t);var e=t.queue,n=ME.bind(null,de,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Fp,useDeferredValue:function(t,e){var n=qt();return Hp(n,t,e)},useTransition:function(){var t=im(!1);return t=IE.bind(null,de,t.queue,!0,!1),qt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=de,i=qt();if(Se){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Le===null)throw Error(q(349));Te&127||dE(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,rb(fE.bind(null,s,r,t),[t]),s.flags|=2048,Aa(9,{destroy:void 0},hE.bind(null,s,r,n,e),null),n},useId:function(){var t=qt(),e=Le.identifierPrefix;if(Se){var n=qn,s=Bn;n=(s&~(1<<32-hn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Nu++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=AN++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Gp,useFormState:nb,useActionState:nb,useOptimistic:function(t){var e=qt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Kp.bind(null,de,!0,n),n.dispatch=e,[t,e]},useMemoCache:zp,useCacheRefresh:function(){return qt().memoizedState=jN.bind(null,de)},useEffectEvent:function(t){var e=qt(),n={impl:t};return e.memoizedState=n,function(){if(Re&2)throw Error(q(440));return n.impl.apply(void 0,arguments)}}},Qp={readContext:kt,use:wd,useCallback:NE,useContext:kt,useEffect:qp,useImperativeHandle:SE,useInsertionEffect:wE,useLayoutEffect:TE,useMemo:CE,useReducer:Qc,useRef:_E,useState:function(){return Qc(Ns)},useDebugValue:Fp,useDeferredValue:function(t,e){var n=ot();return RE(n,Me.memoizedState,t,e)},useTransition:function(){var t=Qc(Ns)[0],e=ot().memoizedState;return[typeof t=="boolean"?t:Bo(t),e]},useSyncExternalStore:uE,useId:DE,useHostTransitionStatus:Gp,useFormState:sb,useActionState:sb,useOptimistic:function(t,e){var n=ot();return gE(n,Me,t,e)},useMemoCache:zp,useCacheRefresh:OE};Qp.useEffectEvent=EE;var PE={readContext:kt,use:wd,useCallback:NE,useContext:kt,useEffect:qp,useImperativeHandle:SE,useInsertionEffect:wE,useLayoutEffect:TE,useMemo:CE,useReducer:Kh,useRef:_E,useState:function(){return Kh(Ns)},useDebugValue:Fp,useDeferredValue:function(t,e){var n=ot();return Me===null?Hp(n,t,e):RE(n,Me.memoizedState,t,e)},useTransition:function(){var t=Kh(Ns)[0],e=ot().memoizedState;return[typeof t=="boolean"?t:Bo(t),e]},useSyncExternalStore:uE,useId:DE,useHostTransitionStatus:Gp,useFormState:ib,useActionState:ib,useOptimistic:function(t,e){var n=ot();return Me!==null?gE(n,Me,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:zp,useCacheRefresh:OE};PE.useEffectEvent=EE;function Qh(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lm={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=fn(),i=hi(s);i.payload=e,n!=null&&(i.callback=n),e=fi(t,i,s),e!==null&&(Jt(e,t,s),Fl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=fn(),i=hi(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fi(t,i,s),e!==null&&(Jt(e,t,s),Fl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),s=hi(n);s.tag=2,e!=null&&(s.callback=e),e=fi(t,s,n),e!==null&&(Jt(e,t,n),Fl(e,t,n))}};function ab(t,e,n,s,i,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!co(n,s)||!co(i,r):!0}function lb(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&lm.enqueueReplaceState(e,e.state,null)}function br(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=$e({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function zE(t){vu(t)}function BE(t){console.error(t)}function qE(t){vu(t)}function Cu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function ob(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function om(t,e,n){return n=hi(n),n.tag=3,n.payload={element:null},n.callback=function(){Cu(t,e)},n}function FE(t){return t=hi(t),t.tag=3,t}function HE(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=s.value;t.payload=function(){return i(r)},t.callback=function(){ob(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){ob(e,n,s),typeof i!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function DN(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Fa(e,n,i,!0),n=pn.current,n!==null){switch(n.tag){case 31:case 13:return An===null?Du():n.alternate===null&&nt===0&&(nt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===wu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),rf(t,s,i)),!1;case 22:return n.flags|=65536,s===wu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),rf(t,s,i)),!1}throw Error(q(435,n.tag))}return rf(t,s,i),Du(),!1}if(Se)return e=pn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==Yf&&(t=Error(q(422),{cause:s}),ho(_n(t,n)))):(s!==Yf&&(e=Error(q(423),{cause:s}),ho(_n(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=_n(s,n),i=om(t.stateNode,s,i),Gh(t,i),nt!==4&&(nt=2)),!1;var r=Error(q(520),{cause:s});if(r=_n(r,n),Yl===null?Yl=[r]:Yl.push(r),nt!==4&&(nt=2),e===null)return!0;s=_n(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=om(n.stateNode,s,t),Gh(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(mi===null||!mi.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=FE(i),HE(i,t,n,s),Gh(n,i),!1}n=n.return}while(n!==null);return!1}var $p=Error(q(461)),mt=!1;function Nt(t,e,n,s){e.child=t===null?iE(e,null,n,s):gr(e,t.child,n,s)}function cb(t,e,n,s,i){n=n.render;var r=e.ref;if("ref"in s){var a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}else a=s;return pr(e),s=Vp(t,e,n,a,r,i),l=Lp(),t!==null&&!mt?(Up(t,e,i),Cs(t,e,i)):(Se&&l&&Cp(e),e.flags|=1,Nt(t,e,s,i),e.child)}function ub(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!Np(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,GE(t,e,r,s,i)):(t=Gc(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!Yp(t,i)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:co,n(a,s)&&t.ref===e.ref)return Cs(t,e,i)}return e.flags|=1,t=_s(r,s),t.ref=e.ref,t.return=e,e.child=t}function GE(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(co(r,s)&&t.ref===e.ref)if(mt=!1,e.pendingProps=s=r,Yp(t,i))t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,Cs(t,e,i)}return cm(t,e,n,s,i)}function KE(t,e,n,s){var i=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~r}else s=0,e.child=null;return db(t,e,r,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Kc(e,r!==null?r.cachePool:null),r!==null?Z0(e,r):nm(),lE(e);else return s=e.lanes=536870912,db(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?(Kc(e,r.cachePool),Z0(e,r),Xs(),e.memoizedState=null):(t!==null&&Kc(e,null),nm(),Xs());return Nt(t,e,i,n),e.child}function Il(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function db(t,e,n,s,i){var r=jp();return r=r===null?null:{parent:ht._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&Kc(e,null),nm(),lE(e),t!==null&&Fa(t,e,s,!0),e.childLanes=i,null}function Yc(t,e){return e=Ru({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function hb(t,e,n){return gr(e,t.child,null,n),t=Yc(e,e.pendingProps),t.flags|=2,rn(e),e.memoizedState=null,t}function ON(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Se){if(s.mode==="hidden")return t=Yc(e,s),e.lanes=536870912,Il(null,t);if(sm(e),(t=Ge)?(t=Uw(t,En),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ai!==null?{id:Bn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},n=W_(t),n.return=e,e.child=n,It=e,Ge=null)):t=null,t===null)throw Si(e);return e.lanes=536870912,null}return Yc(e,s)}var r=t.memoizedState;if(r!==null){var a=r.dehydrated;if(sm(e),i)if(e.flags&256)e.flags&=-257,e=hb(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(q(558));else if(mt||Fa(t,e,n,!1),i=(n&t.childLanes)!==0,mt||i){if(s=Le,s!==null&&(a=w_(s,n),a!==0&&a!==r.retryLane))throw r.retryLane=a,Cr(t,a),Jt(s,t,a),$p;Du(),e=hb(t,e,n)}else t=r.treeContext,Ge=Sn(a.nextSibling),It=e,Se=!0,di=null,En=!1,t!==null&&Z_(e,t),e=Yc(e,s),e.flags|=4096;return e}return t=_s(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Xc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(q(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function cm(t,e,n,s,i){return pr(e),n=Vp(t,e,n,s,void 0,i),s=Lp(),t!==null&&!mt?(Up(t,e,i),Cs(t,e,i)):(Se&&s&&Cp(e),e.flags|=1,Nt(t,e,n,i),e.child)}function fb(t,e,n,s,i,r){return pr(e),e.updateQueue=null,n=cE(e,s,n,i),oE(t),s=Lp(),t!==null&&!mt?(Up(t,e,r),Cs(t,e,r)):(Se&&s&&Cp(e),e.flags|=1,Nt(t,e,n,r),e.child)}function mb(t,e,n,s,i){if(pr(e),e.stateNode===null){var r=na,a=n.contextType;typeof a=="object"&&a!==null&&(r=kt(a)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=lm,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},Dp(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?kt(a):na,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Qh(e,n,a,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&lm.enqueueReplaceState(r,r.state,null),Gl(e,s,r,i),Hl(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=br(n,l);r.props=u;var d=r.context,h=n.contextType;a=na,typeof h=="object"&&h!==null&&(a=kt(h));var m=n.getDerivedStateFromProps;h=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||d!==a)&&lb(e,r,s,a),Qs=!1;var p=e.memoizedState;r.state=p,Gl(e,s,r,i),Hl(),d=e.memoizedState,l||p!==d||Qs?(typeof m=="function"&&(Qh(e,n,m,s),d=e.memoizedState),(u=Qs||ab(e,n,u,s,p,d,a))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),r.props=s,r.state=d,r.context=a,s=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,em(t,e),a=e.memoizedProps,h=br(n,a),r.props=h,m=e.pendingProps,p=r.context,d=n.contextType,u=na,typeof d=="object"&&d!==null&&(u=kt(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==m||p!==u)&&lb(e,r,s,u),Qs=!1,p=e.memoizedState,r.state=p,Gl(e,s,r,i),Hl();var y=e.memoizedState;a!==m||p!==y||Qs||t!==null&&t.dependencies!==null&&Eu(t.dependencies)?(typeof l=="function"&&(Qh(e,n,l,s),y=e.memoizedState),(h=Qs||ab(e,n,h,s,p,y,u)||t!==null&&t.dependencies!==null&&Eu(t.dependencies))?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,y,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,y,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),r.props=s,r.state=y,r.context=u,s=h):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,Xc(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=gr(e,t.child,null,i),e.child=gr(e,null,n,i)):Nt(t,e,n,i),e.memoizedState=r.state,t=e.child):t=Cs(t,e,i),t}function pb(t,e,n,s){return mr(),e.flags|=256,Nt(t,e,n,s),e.child}var $h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(t){return{baseLanes:t,cachePool:tE()}}function Xh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=ln),t}function QE(t,e,n){var s=e.pendingProps,i=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(at.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Se){if(i?Ys(e):Xs(),(t=Ge)?(t=Uw(t,En),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ai!==null?{id:Bn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},n=W_(t),n.return=e,e.child=n,It=e,Ge=null)):t=null,t===null)throw Si(e);return wm(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(Xs(),i=e.mode,l=Ru({mode:"hidden",children:l},i),s=rr(s,i,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=Yh(n),s.childLanes=Xh(t,a,n),e.memoizedState=$h,Il(null,s)):(Ys(e),um(e,l))}var u=t.memoizedState;if(u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(Ys(e),e.flags&=-257,e=Wh(t,e,n)):e.memoizedState!==null?(Xs(),e.child=t.child,e.flags|=128,e=null):(Xs(),l=s.fallback,i=e.mode,s=Ru({mode:"visible",children:s.children},i),l=rr(l,i,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,gr(e,t.child,null,n),s=e.child,s.memoizedState=Yh(n),s.childLanes=Xh(t,a,n),e.memoizedState=$h,e=Il(null,s));else if(Ys(e),wm(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var d=a.dgst;a=d,s=Error(q(419)),s.stack="",s.digest=a,ho({value:s,source:null,stack:null}),e=Wh(t,e,n)}else if(mt||Fa(t,e,n,!1),a=(n&t.childLanes)!==0,mt||a){if(a=Le,a!==null&&(s=w_(a,n),s!==0&&s!==u.retryLane))throw u.retryLane=s,Cr(t,s),Jt(a,t,s),$p;Em(l)||Du(),e=Wh(t,e,n)}else Em(l)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Ge=Sn(l.nextSibling),It=e,Se=!0,di=null,En=!1,t!==null&&Z_(e,t),e=um(e,s.children),e.flags|=4096);return e}return i?(Xs(),l=s.fallback,i=e.mode,u=t.child,d=u.sibling,s=_s(u,{mode:"hidden",children:s.children}),s.subtreeFlags=u.subtreeFlags&65011712,d!==null?l=_s(d,l):(l=rr(l,i,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,Il(null,s),s=e.child,l=t.child.memoizedState,l===null?l=Yh(n):(i=l.cachePool,i!==null?(u=ht._currentValue,i=i.parent!==u?{parent:u,pool:u}:i):i=tE(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=Xh(t,a,n),e.memoizedState=$h,Il(t.child,s)):(Ys(e),n=t.child,t=n.sibling,n=_s(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function um(t,e){return e=Ru({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Ru(t,e){return t=an(22,t,null,e),t.lanes=0,t}function Wh(t,e,n){return gr(e,t.child,null,n),t=um(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gb(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Wf(t.return,e,n)}function Jh(t,e,n,s,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i,a.treeForkCount=r)}function $E(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;s=s.children;var a=at.current,l=(a&2)!==0;if(l?(a=a&1|2,e.flags|=128):a&=1,ze(at,a),Nt(t,e,s,n),s=Se?uo:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gb(t,n,e);else if(t.tag===19)gb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Au(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Jh(e,!1,i,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Au(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Jh(e,!0,n,null,r,s);break;case"together":Jh(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function Cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ci|=e.lanes,!(n&e.childLanes))if(t!==null){if(Fa(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=_s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Eu(t)))}function MN(t,e,n){switch(e.tag){case 3:pu(e,e.stateNode.containerInfo),$s(e,ht,t.memoizedState.cache),mr();break;case 27:case 5:Uf(e);break;case 4:pu(e,e.stateNode.containerInfo);break;case 10:$s(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,sm(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Ys(e),e.flags|=128,null):n&e.child.childLanes?QE(t,e,n):(Ys(e),t=Cs(t,e,n),t!==null?t.sibling:null);Ys(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Fa(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return $E(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(at,at.current),s)break;return null;case 22:return e.lanes=0,KE(t,e,n,e.pendingProps);case 24:$s(e,ht,t.memoizedState.cache)}return Cs(t,e,n)}function YE(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)mt=!0;else{if(!Yp(t,n)&&!(e.flags&128))return mt=!1,MN(t,e,n);mt=!!(t.flags&131072)}else mt=!1,Se&&e.flags&1048576&&J_(e,uo,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=er(e.elementType),e.type=t,typeof t=="function")Np(t)?(s=br(t,s),e.tag=1,e=mb(null,e,t,s,n)):(e.tag=0,e=cm(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===fp){e.tag=11,e=cb(null,e,t,s,n);break e}else if(i===mp){e.tag=14,e=ub(null,e,t,s,n);break e}}throw e=Vf(t)||t,Error(q(306,e,""))}}return e;case 0:return cm(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=br(s,e.pendingProps),mb(t,e,s,i,n);case 3:e:{if(pu(e,e.stateNode.containerInfo),t===null)throw Error(q(387));s=e.pendingProps;var r=e.memoizedState;i=r.element,em(t,e),Gl(e,s,null,n);var a=e.memoizedState;if(s=a.cache,$s(e,ht,s),s!==r.cache&&Jf(e,[ht],n,!0),Hl(),s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=pb(t,e,s,n);break e}else if(s!==i){i=_n(Error(q(424)),e),ho(i),e=pb(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ge=Sn(t.firstChild),It=e,Se=!0,di=null,En=!0,n=iE(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(mr(),s===i){e=Cs(t,e,n);break e}Nt(t,e,s,n)}e=e.child}return e;case 26:return Xc(t,e),t===null?(n=Vb(e.type,null,e.pendingProps,null))?e.memoizedState=n:Se||(n=e.type,t=e.pendingProps,s=Lu(ui.current).createElement(n),s[Rt]=e,s[Zt]=t,Dt(s,n,t),Tt(s),e.stateNode=s):e.memoizedState=Vb(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Uf(e),t===null&&Se&&(s=e.stateNode=Pw(e.type,e.pendingProps,ui.current),It=e,En=!0,i=Ge,Pi(e.type)?(Tm=i,Ge=Sn(s.firstChild)):Ge=i),Nt(t,e,e.pendingProps.children,n),Xc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Se&&((i=s=Ge)&&(s=dC(s,e.type,e.pendingProps,En),s!==null?(e.stateNode=s,It=e,Ge=Sn(s.firstChild),En=!1,i=!0):i=!1),i||Si(e)),Uf(e),i=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,s=r.children,xm(i,r)?s=null:a!==null&&xm(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=Vp(t,e,SN,null,null,n),bo._currentValue=i),Xc(t,e),Nt(t,e,s,n),e.child;case 6:return t===null&&Se&&((t=n=Ge)&&(n=hC(n,e.pendingProps,En),n!==null?(e.stateNode=n,It=e,Ge=null,t=!0):t=!1),t||Si(e)),null;case 13:return QE(t,e,n);case 4:return pu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=gr(e,null,s,n):Nt(t,e,s,n),e.child;case 11:return cb(t,e,e.type,e.pendingProps,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,$s(e,e.type,s.value),Nt(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,pr(e),i=kt(i),s=s(i),e.flags|=1,Nt(t,e,s,n),e.child;case 14:return ub(t,e,e.type,e.pendingProps,n);case 15:return GE(t,e,e.type,e.pendingProps,n);case 19:return $E(t,e,n);case 31:return ON(t,e,n);case 22:return KE(t,e,n,e.pendingProps);case 24:return pr(e),s=kt(ht),t===null?(i=jp(),i===null&&(i=Le,r=Ip(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:s,cache:i},Dp(e),$s(e,ht,i)):(t.lanes&n&&(em(t,e),Gl(e,null,null,n),Hl()),i=t.memoizedState,r=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),$s(e,ht,s)):(s=r.cache,$s(e,ht,s),s!==i.cache&&Jf(e,[ht],n,!0))),Nt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(q(156,e.tag))}function cs(t){t.flags|=4}function Zh(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(vw())t.flags|=8192;else throw lr=wu,kp}else t.flags&=-16777217}function yb(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!qw(e))if(vw())t.flags|=8192;else throw lr=wu,kp}function Nc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?x_():536870912,t.lanes|=e,Sa|=e)}function wl(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Fe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function VN(t,e,n){var s=e.pendingProps;switch(Rp(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(e),null;case 1:return Fe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Es(ht),xa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Pr(e)?cs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hh())),Fe(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(cs(e),r!==null?(Fe(e),yb(e,r)):(Fe(e),Zh(e,i,null,s,n))):r?r!==t.memoizedState?(cs(e),Fe(e),yb(e,r)):(Fe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&cs(e),Fe(e),Zh(e,i,t,s,n)),null;case 27:if(gu(e),n=ui.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&cs(e);else{if(!s){if(e.stateNode===null)throw Error(q(166));return Fe(e),null}t=Gn.current,Pr(e)?K0(e):(t=Pw(i,s,n),e.stateNode=t,cs(e))}return Fe(e),null;case 5:if(gu(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&cs(e);else{if(!s){if(e.stateNode===null)throw Error(q(166));return Fe(e),null}if(r=Gn.current,Pr(e))K0(e);else{var a=Lu(ui.current);switch(r){case 1:r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?a.createElement(i,{is:s.is}):a.createElement(i)}}r[Rt]=e,r[Zt]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=r;e:switch(Dt(r,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&cs(e)}}return Fe(e),Zh(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&cs(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(q(166));if(t=ui.current,Pr(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=It,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[Rt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Mw(t.nodeValue,n)),t||Si(e,!0)}else t=Lu(t).createTextNode(s),t[Rt]=e,e.stateNode=t}return Fe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Pr(e),n!==null){if(t===null){if(!s)throw Error(q(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(557));t[Rt]=e}else mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fe(e),t=!1}else n=Hh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(rn(e),e):(rn(e),null);if(e.flags&128)throw Error(q(558))}return Fe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Pr(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Rt]=e}else mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fe(e),i=!1}else i=Hh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(rn(e),e):(rn(e),null)}return rn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Nc(e,e.updateQueue),Fe(e),null);case 4:return xa(),t===null&&ng(e.stateNode.containerInfo),Fe(e),null;case 10:return Es(e.type),Fe(e),null;case 19:if(At(at),s=e.memoizedState,s===null)return Fe(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)wl(s,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Au(t),r!==null){for(e.flags|=128,wl(s,!1),t=r.updateQueue,e.updateQueue=t,Nc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)X_(n,t),n=n.sibling;return ze(at,at.current&1|2),Se&&ms(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&un()>ju&&(e.flags|=128,i=!0,wl(s,!1),e.lanes=4194304)}else{if(!i)if(t=Au(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Nc(e,t),wl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Se)return Fe(e),null}else 2*un()-s.renderingStartTime>ju&&n!==536870912&&(e.flags|=128,i=!0,wl(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=un(),t.sibling=null,n=at.current,ze(at,i?n&1|2:n&1),Se&&ms(e,s.treeForkCount),t):(Fe(e),null);case 22:case 23:return rn(e),Op(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Fe(e),e.subtreeFlags&6&&(e.flags|=8192)):Fe(e),n=e.updateQueue,n!==null&&Nc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&At(ar),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Es(ht),Fe(e),null;case 25:return null;case 30:return null}throw Error(q(156,e.tag))}function LN(t,e){switch(Rp(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(ht),xa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return gu(e),null;case 31:if(e.memoizedState!==null){if(rn(e),e.alternate===null)throw Error(q(340));mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(rn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return At(at),null;case 4:return xa(),null;case 10:return Es(e.type),null;case 22:case 23:return rn(e),Op(),t!==null&&At(ar),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Es(ht),null;case 25:return null;default:return null}}function XE(t,e){switch(Rp(e),e.tag){case 3:Es(ht),xa();break;case 26:case 27:case 5:gu(e);break;case 4:xa();break;case 31:e.memoizedState!==null&&rn(e);break;case 13:rn(e);break;case 19:At(at);break;case 10:Es(e.type);break;case 22:case 23:rn(e),Op(),t!==null&&At(ar);break;case 24:Es(ht)}}function qo(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var r=n.create,a=n.inst;s=r(),a.destroy=s}n=n.next}while(n!==i)}}catch(l){De(e,e.return,l)}}function Ni(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var r=i.next;s=r;do{if((s.tag&t)===t){var a=s.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,i=e;var u=n,d=l;try{d()}catch(h){De(i,u,h)}}}s=s.next}while(s!==r)}}catch(h){De(e,e.return,h)}}function WE(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{aE(e,n)}catch(s){De(t,t.return,s)}}}function JE(t,e,n){n.props=br(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){De(t,e,s)}}function Ql(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){De(t,e,i)}}function Fn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){De(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){De(t,e,i)}else n.current=null}function ZE(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){De(t,t.return,i)}}function ef(t,e,n){try{var s=t.stateNode;rC(s,t.type,n,e),s[Zt]=e}catch(i){De(t,t.return,i)}}function ew(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Pi(t.type)||t.tag===4}function tf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ew(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Pi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ys));else if(s!==4&&(s===27&&Pi(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(dm(t,e,n),t=t.sibling;t!==null;)dm(t,e,n),t=t.sibling}function Iu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Pi(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Iu(t,e,n),t=t.sibling;t!==null;)Iu(t,e,n),t=t.sibling}function tw(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Dt(e,s,n),e[Rt]=t,e[Zt]=n}catch(r){De(t,t.return,r)}}var ps=!1,dt=!1,nf=!1,bb=typeof WeakSet=="function"?WeakSet:Set,wt=null;function UN(t,e){if(t=t.containerInfo,bm=Bu,t=q_(t),Tp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==r||s!==0&&m.nodeType!==3||(u=a+s),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===t)break t;if(p===n&&++d===i&&(l=a),p===r&&++h===s&&(u=a),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vm={focusedElem:t,selectionRange:n},Bu=!1,wt=e;wt!==null;)if(e=wt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,wt=t;else for(;wt!==null;){switch(e=wt,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var N=br(n.type,i);t=s.getSnapshotBeforeUpdate(N,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(I){De(n,n.return,I)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)_m(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_m(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(q(163))}if(t=e.sibling,t!==null){t.return=e.return,wt=t;break}wt=e.return}}function nw(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:ds(t,n),s&4&&qo(5,n);break;case 1:if(ds(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){De(n,n.return,a)}else{var i=br(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){De(n,n.return,a)}}s&64&&WE(n),s&512&&Ql(n,n.return);break;case 3:if(ds(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{aE(t,e)}catch(a){De(n,n.return,a)}}break;case 27:e===null&&s&4&&tw(n);case 26:case 5:ds(t,n),e===null&&s&4&&ZE(n),s&512&&Ql(n,n.return);break;case 12:ds(t,n);break;case 31:ds(t,n),s&4&&rw(t,n);break;case 13:ds(t,n),s&4&&aw(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=QN.bind(null,n),fC(t,n))));break;case 22:if(s=n.memoizedState!==null||ps,!s){e=e!==null&&e.memoizedState!==null||dt,i=ps;var r=dt;ps=s,(dt=e)&&!r?fs(t,n,(n.subtreeFlags&8772)!==0):ds(t,n),ps=i,dt=r}break;case 30:break;default:ds(t,n)}}function sw(t){var e=t.alternate;e!==null&&(t.alternate=null,sw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&bp(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,$t=!1;function us(t,e,n){for(n=n.child;n!==null;)iw(t,e,n),n=n.sibling}function iw(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Mo,n)}catch{}switch(n.tag){case 26:dt||Fn(n,e),us(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:dt||Fn(n,e);var s=Ye,i=$t;Pi(n.type)&&(Ye=n.stateNode,$t=!1),us(t,e,n),Wl(n.stateNode),Ye=s,$t=i;break;case 5:dt||Fn(n,e);case 6:if(s=Ye,i=$t,Ye=null,us(t,e,n),Ye=s,$t=i,Ye!==null)if($t)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(n.stateNode)}catch(r){De(n,e,r)}else try{Ye.removeChild(n.stateNode)}catch(r){De(n,e,r)}break;case 18:Ye!==null&&($t?(t=Ye,jb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ia(t)):jb(Ye,n.stateNode));break;case 4:s=Ye,i=$t,Ye=n.stateNode.containerInfo,$t=!0,us(t,e,n),Ye=s,$t=i;break;case 0:case 11:case 14:case 15:Ni(2,n,e),dt||Ni(4,n,e),us(t,e,n);break;case 1:dt||(Fn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&JE(n,e,s)),us(t,e,n);break;case 21:us(t,e,n);break;case 22:dt=(s=dt)||n.memoizedState!==null,us(t,e,n),dt=s;break;default:us(t,e,n)}}function rw(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ia(t)}catch(n){De(e,e.return,n)}}}function aw(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ia(t)}catch(n){De(e,e.return,n)}}function PN(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new bb),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new bb),e;default:throw Error(q(435,t.tag))}}function Cc(t,e){var n=PN(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=$N.bind(null,t,s);s.then(i,i)}})}function Kt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(Pi(l.type)){Ye=l.stateNode,$t=!1;break e}break;case 5:Ye=l.stateNode,$t=!1;break e;case 3:case 4:Ye=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if(Ye===null)throw Error(q(160));iw(r,a,i),Ye=null,$t=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)lw(e,t),e=e.sibling}var jn=null;function lw(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kt(e,t),Qt(t),s&4&&(Ni(3,t,t.return),qo(3,t),Ni(5,t,t.return));break;case 1:Kt(e,t),Qt(t),s&512&&(dt||n===null||Fn(n,n.return)),s&64&&ps&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=jn;if(Kt(e,t),Qt(t),s&512&&(dt||n===null||Fn(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Uo]||r[Rt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),Dt(r,s,n),r[Rt]=t,Tt(r),s=r;break e;case"link":var a=Ub("link","href",i).get(s+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=i.createElement(s),Dt(r,s,n),i.head.appendChild(r);break;case"meta":if(a=Ub("meta","content",i).get(s+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=i.createElement(s),Dt(r,s,n),i.head.appendChild(r);break;default:throw Error(q(468,s))}r[Rt]=t,Tt(r),s=r}t.stateNode=s}else Pb(i,t.type,t.stateNode);else t.stateNode=Lb(i,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?Pb(i,t.type,t.stateNode):Lb(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&ef(t,t.memoizedProps,n.memoizedProps)}break;case 27:Kt(e,t),Qt(t),s&512&&(dt||n===null||Fn(n,n.return)),n!==null&&s&4&&ef(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Kt(e,t),Qt(t),s&512&&(dt||n===null||Fn(n,n.return)),t.flags&32){i=t.stateNode;try{Ea(i,"")}catch(N){De(t,t.return,N)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,ef(t,i,n!==null?n.memoizedProps:i)),s&1024&&(nf=!0);break;case 6:if(Kt(e,t),Qt(t),s&4){if(t.stateNode===null)throw Error(q(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(N){De(t,t.return,N)}}break;case 3:if(Zc=null,i=jn,jn=Uu(e.containerInfo),Kt(e,t),jn=i,Qt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ia(e.containerInfo)}catch(N){De(t,t.return,N)}nf&&(nf=!1,ow(t));break;case 4:s=jn,jn=Uu(t.stateNode.containerInfo),Kt(e,t),Qt(t),jn=s;break;case 12:Kt(e,t),Qt(t);break;case 31:Kt(e,t),Qt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Cc(t,s)));break;case 13:Kt(e,t),Qt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Sd=un()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Cc(t,s)));break;case 22:i=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,d=ps,h=dt;if(ps=d||i,dt=h||u,Kt(e,t),dt=h,ps=d,Qt(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||u||ps||dt||tr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,i)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var m=u.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(N){De(u,u.return,N)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(N){De(u,u.return,N)}}}else if(e.tag===18){if(n===null){u=e;try{var y=u.stateNode;i?kb(y,!0):kb(u.stateNode,!1)}catch(N){De(u,u.return,N)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Cc(t,n))));break;case 19:Kt(e,t),Qt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Cc(t,s)));break;case 30:break;case 21:break;default:Kt(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(ew(s)){n=s;break}s=s.return}if(n==null)throw Error(q(160));switch(n.tag){case 27:var i=n.stateNode,r=tf(t);Iu(t,r,i);break;case 5:var a=n.stateNode;n.flags&32&&(Ea(a,""),n.flags&=-33);var l=tf(t);Iu(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,d=tf(t);dm(t,d,u);break;default:throw Error(q(161))}}catch(h){De(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ow(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;ow(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ds(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)nw(t,e.alternate,e),e=e.sibling}function tr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ni(4,e,e.return),tr(e);break;case 1:Fn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&JE(e,e.return,n),tr(e);break;case 27:Wl(e.stateNode);case 26:case 5:Fn(e,e.return),tr(e);break;case 22:e.memoizedState===null&&tr(e);break;case 30:tr(e);break;default:tr(e)}t=t.sibling}}function fs(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:fs(i,r,n),qo(4,r);break;case 1:if(fs(i,r,n),s=r,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(d){De(s,s.return,d)}if(s=r,i=s.updateQueue,i!==null){var l=s.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)rE(u[i],l)}catch(d){De(s,s.return,d)}}n&&a&64&&WE(r),Ql(r,r.return);break;case 27:tw(r);case 26:case 5:fs(i,r,n),n&&s===null&&a&4&&ZE(r),Ql(r,r.return);break;case 12:fs(i,r,n);break;case 31:fs(i,r,n),n&&a&4&&rw(i,r);break;case 13:fs(i,r,n),n&&a&4&&aw(i,r);break;case 22:r.memoizedState===null&&fs(i,r,n),Ql(r,r.return);break;case 30:break;default:fs(i,r,n)}e=e.sibling}}function Xp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&zo(n))}function Wp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&zo(t))}function In(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cw(t,e,n,s),e=e.sibling}function cw(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:In(t,e,n,s),i&2048&&qo(9,e);break;case 1:In(t,e,n,s);break;case 3:In(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&zo(t)));break;case 12:if(i&2048){In(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){De(e,e.return,u)}}else In(t,e,n,s);break;case 31:In(t,e,n,s);break;case 13:In(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?In(t,e,n,s):$l(t,e):r._visibility&2?In(t,e,n,s):(r._visibility|=2,qr(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&Xp(a,e);break;case 24:In(t,e,n,s),i&2048&&Wp(e.alternate,e);break;default:In(t,e,n,s)}}function qr(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,a=e,l=n,u=s,d=a.flags;switch(a.tag){case 0:case 11:case 15:qr(r,a,l,u,i),qo(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?qr(r,a,l,u,i):$l(r,a):(h._visibility|=2,qr(r,a,l,u,i)),i&&d&2048&&Xp(a.alternate,a);break;case 24:qr(r,a,l,u,i),i&&d&2048&&Wp(a.alternate,a);break;default:qr(r,a,l,u,i)}e=e.sibling}}function $l(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:$l(n,s),i&2048&&Xp(s.alternate,s);break;case 24:$l(n,s),i&2048&&Wp(s.alternate,s);break;default:$l(n,s)}e=e.sibling}}var jl=8192;function zr(t,e,n){if(t.subtreeFlags&jl)for(t=t.child;t!==null;)uw(t,e,n),t=t.sibling}function uw(t,e,n){switch(t.tag){case 26:zr(t,e,n),t.flags&jl&&t.memoizedState!==null&&AC(n,jn,t.memoizedState,t.memoizedProps);break;case 5:zr(t,e,n);break;case 3:case 4:var s=jn;jn=Uu(t.stateNode.containerInfo),zr(t,e,n),jn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=jl,jl=16777216,zr(t,e,n),jl=s):zr(t,e,n));break;default:zr(t,e,n)}}function dw(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Tl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];wt=s,fw(s,t)}dw(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hw(t),t=t.sibling}function hw(t){switch(t.tag){case 0:case 11:case 15:Tl(t),t.flags&2048&&Ni(9,t,t.return);break;case 3:Tl(t);break;case 12:Tl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Wc(t)):Tl(t);break;default:Tl(t)}}function Wc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];wt=s,fw(s,t)}dw(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ni(8,e,e.return),Wc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Wc(e));break;default:Wc(e)}t=t.sibling}}function fw(t,e){for(;wt!==null;){var n=wt;switch(n.tag){case 0:case 11:case 15:Ni(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:zo(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,wt=s;else e:for(n=t;wt!==null;){s=wt;var i=s.sibling,r=s.return;if(sw(s),s===n){wt=null;break e}if(i!==null){i.return=r,wt=i;break e}wt=r}}}var zN={getCacheForType:function(t){var e=kt(ht),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return kt(ht).controller.signal}},BN=typeof WeakMap=="function"?WeakMap:Map,Re=0,Le=null,xe=null,Te=0,ke=0,sn=null,ri=!1,Ga=!1,Jp=!1,Rs=0,nt=0,Ci=0,or=0,Zp=0,ln=0,Sa=0,Yl=null,Yt=null,hm=!1,Sd=0,mw=0,ju=1/0,ku=null,mi=null,bt=0,pi=null,Na=null,ws=0,fm=0,mm=null,pw=null,Xl=0,pm=null;function fn(){return Re&2&&Te!==0?Te&-Te:ae.T!==null?tg():T_()}function gw(){if(ln===0)if(!(Te&536870912)||Se){var t=xc;xc<<=1,!(xc&3932160)&&(xc=262144),ln=t}else ln=536870912;return t=pn.current,t!==null&&(t.flags|=32),ln}function Jt(t,e,n){(t===Le&&(ke===2||ke===9)||t.cancelPendingCommit!==null)&&(Ca(t,0),ai(t,Te,ln,!1)),Lo(t,n),(!(Re&2)||t!==Le)&&(t===Le&&(!(Re&2)&&(or|=n),nt===4&&ai(t,Te,ln,!1)),ns(t))}function yw(t,e,n){if(Re&6)throw Error(q(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Vo(t,e),i=s?HN(t,e):sf(t,e,!0),r=s;do{if(i===0){Ga&&!s&&ai(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!qN(n)){i=sf(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;i=Yl;var u=l.current.memoizedState.isDehydrated;if(u&&(Ca(l,a).flags|=256),a=sf(l,a,!1),a!==2){if(Jp&&!u){l.errorRecoveryDisabledLanes|=r,or|=r,i=4;break e}r=Yt,Yt=i,r!==null&&(Yt===null?Yt=r:Yt.push.apply(Yt,r))}i=a}if(r=!1,i!==2)continue}}if(i===1){Ca(t,0),ai(t,e,0,!0);break}e:{switch(s=t,r=i,r){case 0:case 1:throw Error(q(345));case 4:if((e&4194048)!==e)break;case 6:ai(s,e,ln,!ri);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(q(329))}if((e&62914560)===e&&(i=Sd+300-un(),10<i)){if(ai(s,e,ln,!ri),pd(s,0,!0)!==0)break e;ws=e,s.timeoutHandle=Lw(vb.bind(null,s,n,Yt,ku,hm,e,ln,or,Sa,ri,r,"Throttled",-0,0),i);break e}vb(s,n,Yt,ku,hm,e,ln,or,Sa,ri,r,null,-0,0)}}break}while(!0);ns(t)}function vb(t,e,n,s,i,r,a,l,u,d,h,m,p,y){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ys},uw(e,r,m);var N=(r&62914560)===r?Sd-un():(r&4194048)===r?mw-un():0;if(N=SC(m,N),N!==null){ws=r,t.cancelPendingCommit=N(_b.bind(null,t,e,r,n,s,i,a,l,u,h,m,null,p,y)),ai(t,r,a,!d);return}}_b(t,e,r,n,s,i,a,l,u)}function qN(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!mn(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ai(t,e,n,s){e&=~Zp,e&=~or,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var r=31-hn(i),a=1<<r;s[r]=-1,i&=~a}n!==0&&__(t,n,e)}function Nd(){return Re&6?!0:(Fo(0),!1)}function eg(){if(xe!==null){if(ke===0)var t=xe.return;else t=xe,bs=Rr=null,Pp(t),da=null,fo=0,t=xe;for(;t!==null;)XE(t.alternate,t),t=t.return;xe=null}}function Ca(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,oC(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ws=0,eg(),Le=t,xe=n=_s(t.current,null),Te=e,ke=0,sn=null,ri=!1,Ga=Vo(t,e),Jp=!1,Sa=ln=Zp=or=Ci=nt=0,Yt=Yl=null,hm=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-hn(s),r=1<<i;e|=t[i],s&=~r}return Rs=e,vd(),n}function bw(t,e){de=null,ae.H=po,e===Ha||e===_d?(e=W0(),ke=3):e===kp?(e=W0(),ke=4):ke=e===$p?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,sn=e,xe===null&&(nt=1,Cu(t,_n(e,t.current)))}function vw(){var t=pn.current;return t===null?!0:(Te&4194048)===Te?An===null:(Te&62914560)===Te||Te&536870912?t===An:!1}function xw(){var t=ae.H;return ae.H=po,t===null?po:t}function _w(){var t=ae.A;return ae.A=zN,t}function Du(){nt=4,ri||(Te&4194048)!==Te&&pn.current!==null||(Ga=!0),!(Ci&134217727)&&!(or&134217727)||Le===null||ai(Le,Te,ln,!1)}function sf(t,e,n){var s=Re;Re|=2;var i=xw(),r=_w();(Le!==t||Te!==e)&&(ku=null,Ca(t,e)),e=!1;var a=nt;e:do try{if(ke!==0&&xe!==null){var l=xe,u=sn;switch(ke){case 8:eg(),a=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(e=!0);var d=ke;if(ke=0,sn=null,ra(t,l,u,d),n&&Ga){a=0;break e}break;default:d=ke,ke=0,sn=null,ra(t,l,u,d)}}FN(),a=nt;break}catch(h){bw(t,h)}while(!0);return e&&t.shellSuspendCounter++,bs=Rr=null,Re=s,ae.H=i,ae.A=r,xe===null&&(Le=null,Te=0,vd()),a}function FN(){for(;xe!==null;)Ew(xe)}function HN(t,e){var n=Re;Re|=2;var s=xw(),i=_w();Le!==t||Te!==e?(ku=null,ju=un()+500,Ca(t,e)):Ga=Vo(t,e);e:do try{if(ke!==0&&xe!==null){e=xe;var r=sn;t:switch(ke){case 1:ke=0,sn=null,ra(t,e,r,1);break;case 2:case 9:if(X0(r)){ke=0,sn=null,xb(e);break}e=function(){ke!==2&&ke!==9||Le!==t||(ke=7),ns(t)},r.then(e,e);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:X0(r)?(ke=0,sn=null,xb(e)):(ke=0,sn=null,ra(t,e,r,7));break;case 5:var a=null;switch(xe.tag){case 26:a=xe.memoizedState;case 5:case 27:var l=xe;if(a?qw(a):l.stateNode.complete){ke=0,sn=null;var u=l.sibling;if(u!==null)xe=u;else{var d=l.return;d!==null?(xe=d,Cd(d)):xe=null}break t}}ke=0,sn=null,ra(t,e,r,5);break;case 6:ke=0,sn=null,ra(t,e,r,6);break;case 8:eg(),nt=6;break e;default:throw Error(q(462))}}GN();break}catch(h){bw(t,h)}while(!0);return bs=Rr=null,ae.H=s,ae.A=i,Re=n,xe!==null?0:(Le=null,Te=0,vd(),nt)}function GN(){for(;xe!==null&&!mS();)Ew(xe)}function Ew(t){var e=YE(t.alternate,t,Rs);t.memoizedProps=t.pendingProps,e===null?Cd(t):xe=e}function xb(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=fb(n,e,e.pendingProps,e.type,void 0,Te);break;case 11:e=fb(n,e,e.pendingProps,e.type.render,e.ref,Te);break;case 5:Pp(e);default:XE(n,e),e=xe=X_(e,Rs),e=YE(n,e,Rs)}t.memoizedProps=t.pendingProps,e===null?Cd(t):xe=e}function ra(t,e,n,s){bs=Rr=null,Pp(e),da=null,fo=0;var i=e.return;try{if(DN(t,i,e,n,Te)){nt=1,Cu(t,_n(n,t.current)),xe=null;return}}catch(r){if(i!==null)throw xe=i,r;nt=1,Cu(t,_n(n,t.current)),xe=null;return}e.flags&32768?(Se||s===1?t=!0:Ga||Te&536870912?t=!1:(ri=t=!0,(s===2||s===9||s===3||s===6)&&(s=pn.current,s!==null&&s.tag===13&&(s.flags|=16384))),ww(e,t)):Cd(e)}function Cd(t){var e=t;do{if(e.flags&32768){ww(e,ri);return}t=e.return;var n=VN(e.alternate,e,Rs);if(n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);nt===0&&(nt=5)}function ww(t,e){do{var n=LN(t.alternate,t);if(n!==null){n.flags&=32767,xe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){xe=t;return}xe=t=n}while(t!==null);nt=6,xe=null}function _b(t,e,n,s,i,r,a,l,u){t.cancelPendingCommit=null;do Rd();while(bt!==0);if(Re&6)throw Error(q(327));if(e!==null){if(e===t.current)throw Error(q(177));if(r=e.lanes|e.childLanes,r|=Ap,TS(t,n,r,a,l,u),t===Le&&(xe=Le=null,Te=0),Na=e,pi=t,ws=n,fm=r,mm=i,pw=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,YN(yu,function(){return Cw(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ae.T,ae.T=null,i=Ie.p,Ie.p=2,a=Re,Re|=4;try{UN(t,e,n)}finally{Re=a,Ie.p=i,ae.T=s}}bt=1,Tw(),Aw(),Sw()}}function Tw(){if(bt===1){bt=0;var t=pi,e=Na,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ae.T,ae.T=null;var s=Ie.p;Ie.p=2;var i=Re;Re|=4;try{lw(e,t);var r=vm,a=q_(t.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&B_(l.ownerDocument.documentElement,l)){if(u!==null&&Tp(l)){var d=u.start,h=u.end;if(h===void 0&&(h=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(h,l.value.length);else{var m=l.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var y=p.getSelection(),N=l.textContent.length,I=Math.min(u.start,N),k=u.end===void 0?I:Math.min(u.end,N);!y.extend&&I>k&&(a=k,k=I,I=a);var T=F0(l,I),x=F0(l,k);if(T&&x&&(y.rangeCount!==1||y.anchorNode!==T.node||y.anchorOffset!==T.offset||y.focusNode!==x.node||y.focusOffset!==x.offset)){var _=m.createRange();_.setStart(T.node,T.offset),y.removeAllRanges(),I>k?(y.addRange(_),y.extend(x.node,x.offset)):(_.setEnd(x.node,x.offset),y.addRange(_))}}}}for(m=[],y=l;y=y.parentNode;)y.nodeType===1&&m.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var j=m[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Bu=!!bm,vm=bm=null}finally{Re=i,Ie.p=s,ae.T=n}}t.current=e,bt=2}}function Aw(){if(bt===2){bt=0;var t=pi,e=Na,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ae.T,ae.T=null;var s=Ie.p;Ie.p=2;var i=Re;Re|=4;try{nw(t,e.alternate,e)}finally{Re=i,Ie.p=s,ae.T=n}}bt=3}}function Sw(){if(bt===4||bt===3){bt=0,pS();var t=pi,e=Na,n=ws,s=pw;e.subtreeFlags&10256||e.flags&10256?bt=5:(bt=0,Na=pi=null,Nw(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(mi=null),yp(n),e=e.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Mo,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ae.T,i=Ie.p,Ie.p=2,ae.T=null;try{for(var r=t.onRecoverableError,a=0;a<s.length;a++){var l=s[a];r(l.value,{componentStack:l.stack})}}finally{ae.T=e,Ie.p=i}}ws&3&&Rd(),ns(t),i=t.pendingLanes,n&261930&&i&42?t===pm?Xl++:(Xl=0,pm=t):Xl=0,Fo(0)}}function Nw(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,zo(e)))}function Rd(){return Tw(),Aw(),Sw(),Cw()}function Cw(){if(bt!==5)return!1;var t=pi,e=fm;fm=0;var n=yp(ws),s=ae.T,i=Ie.p;try{Ie.p=32>n?32:n,ae.T=null,n=mm,mm=null;var r=pi,a=ws;if(bt=0,Na=pi=null,ws=0,Re&6)throw Error(q(331));var l=Re;if(Re|=4,hw(r.current),cw(r,r.current,a,n),Re=l,Fo(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Mo,r)}catch{}return!0}finally{Ie.p=i,ae.T=s,Nw(t,e)}}function Eb(t,e,n){e=_n(n,e),e=om(t.stateNode,e,2),t=fi(t,e,2),t!==null&&(Lo(t,2),ns(t))}function De(t,e,n){if(t.tag===3)Eb(t,t,n);else for(;e!==null;){if(e.tag===3){Eb(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(mi===null||!mi.has(s))){t=_n(n,t),n=FE(2),s=fi(e,n,2),s!==null&&(HE(n,s,e,t),Lo(s,2),ns(s));break}}e=e.return}}function rf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new BN;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(Jp=!0,i.add(n),t=KN.bind(null,t,e,n),e.then(t,t))}function KN(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Le===t&&(Te&n)===n&&(nt===4||nt===3&&(Te&62914560)===Te&&300>un()-Sd?!(Re&2)&&Ca(t,0):Zp|=n,Sa===Te&&(Sa=0)),ns(t)}function Rw(t,e){e===0&&(e=x_()),t=Cr(t,e),t!==null&&(Lo(t,e),ns(t))}function QN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Rw(t,n)}function $N(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(q(314))}s!==null&&s.delete(e),Rw(t,n)}function YN(t,e){return pp(t,e)}var Ou=null,Fr=null,gm=!1,Mu=!1,af=!1,li=0;function ns(t){t!==Fr&&t.next===null&&(Fr===null?Ou=Fr=t:Fr=Fr.next=t),Mu=!0,gm||(gm=!0,WN())}function Fo(t,e){if(!af&&Mu){af=!0;do for(var n=!1,s=Ou;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var r=0;else{var a=s.suspendedLanes,l=s.pingedLanes;r=(1<<31-hn(42|t)+1)-1,r&=i&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,wb(s,r))}else r=Te,r=pd(s,s===Le?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||Vo(s,r)||(n=!0,wb(s,r));s=s.next}while(n);af=!1}}function XN(){Iw()}function Iw(){Mu=gm=!1;var t=0;li!==0&&lC()&&(t=li);for(var e=un(),n=null,s=Ou;s!==null;){var i=s.next,r=jw(s,e);r===0?(s.next=null,n===null?Ou=i:n.next=i,i===null&&(Fr=n)):(n=s,(t!==0||r&3)&&(Mu=!0)),s=i}bt!==0&&bt!==5||Fo(t),li!==0&&(li=0)}function jw(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-hn(r),l=1<<a,u=i[a];u===-1?(!(l&n)||l&s)&&(i[a]=wS(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=Le,n=Te,n=pd(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(ke===2||ke===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Dh(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Vo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Dh(s),yp(n)){case 2:case 8:n=b_;break;case 32:n=yu;break;case 268435456:n=v_;break;default:n=yu}return s=kw.bind(null,t),n=pp(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Dh(s),t.callbackPriority=2,t.callbackNode=null,2}function kw(t,e){if(bt!==0&&bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Rd()&&t.callbackNode!==n)return null;var s=Te;return s=pd(t,t===Le?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(yw(t,s,e),jw(t,un()),t.callbackNode!=null&&t.callbackNode===n?kw.bind(null,t):null)}function wb(t,e){if(Rd())return null;yw(t,e,!0)}function WN(){cC(function(){Re&6?pp(y_,XN):Iw()})}function tg(){if(li===0){var t=wa;t===0&&(t=vc,vc<<=1,!(vc&261888)&&(vc=256)),li=t}return li}function Tb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:qc(""+t)}function Ab(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function JN(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var r=Tb((i[Zt]||null).action),a=s.submitter;a&&(e=(e=a[Zt]||null)?Tb(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new gd("action","action",null,s,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(li!==0){var u=a?Ab(i,a):new FormData(i);am(n,{pending:!0,data:u,method:i.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Ab(i,a):new FormData(i),am(n,{pending:!0,data:u,method:i.method,action:r},r,u))},currentTarget:i}]})}}for(var lf=0;lf<$f.length;lf++){var of=$f[lf],ZN=of.toLowerCase(),eC=of[0].toUpperCase()+of.slice(1);Vn(ZN,"on"+eC)}Vn(H_,"onAnimationEnd");Vn(G_,"onAnimationIteration");Vn(K_,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(gN,"onTransitionRun");Vn(yN,"onTransitionStart");Vn(bN,"onTransitionCancel");Vn(Q_,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function Dw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=d;try{r(i)}catch(h){vu(h)}i.currentTarget=null,r=u}else for(a=0;a<s.length;a++){if(l=s[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=d;try{r(i)}catch(h){vu(h)}i.currentTarget=null,r=u}}}}function ve(t,e){var n=e[zf];n===void 0&&(n=e[zf]=new Set);var s=t+"__bubble";n.has(s)||(Ow(e,t,2,!1),n.add(s))}function cf(t,e,n){var s=0;e&&(s|=4),Ow(n,t,s,e)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function ng(t){if(!t[Rc]){t[Rc]=!0,A_.forEach(function(n){n!=="selectionchange"&&(tC.has(n)||cf(n,!1,t),cf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rc]||(e[Rc]=!0,cf("selectionchange",!1,e))}}function Ow(t,e,n,s){switch(Qw(e)){case 2:var i=RC;break;case 8:i=IC;break;default:i=ag}n=i.bind(null,e,n,t),i=void 0,!Gf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function uf(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===i)break;if(a===4)for(a=s.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;l!==null;){if(a=Xr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){s=r=a;continue e}l=l.parentNode}}s=s.return}D_(function(){var d=r,h=xp(n),m=[];e:{var p=$_.get(t);if(p!==void 0){var y=gd,N=t;switch(t){case"keypress":if(Hc(n)===0)break e;case"keydown":case"keyup":y=$S;break;case"focusin":N="focus",y=Uh;break;case"focusout":N="blur",y=Uh;break;case"beforeblur":case"afterblur":y=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=D0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=VS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=WS;break;case H_:case G_:case K_:y=PS;break;case Q_:y=ZS;break;case"scroll":case"scrollend":y=OS;break;case"wheel":y=tN;break;case"copy":case"cut":case"paste":y=BS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=M0;break;case"toggle":case"beforetoggle":y=sN}var I=(e&4)!==0,k=!I&&(t==="scroll"||t==="scrollend"),T=I?p!==null?p+"Capture":null:p;I=[];for(var x=d,_;x!==null;){var j=x;if(_=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||_===null||T===null||(j=lo(x,T),j!=null&&I.push(yo(x,j,_))),k)break;x=x.return}0<I.length&&(p=new y(p,N,null,n,h),m.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Hf&&(N=n.relatedTarget||n.fromElement)&&(Xr(N)||N[Ba]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(N=n.relatedTarget||n.toElement,y=d,N=N?Xr(N):null,N!==null&&(k=Oo(N),I=N.tag,N!==k||I!==5&&I!==27&&I!==6)&&(N=null)):(y=null,N=d),y!==N)){if(I=D0,j="onMouseLeave",T="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(I=M0,j="onPointerLeave",T="onPointerEnter",x="pointer"),k=y==null?p:Rl(y),_=N==null?p:Rl(N),p=new I(j,x+"leave",y,n,h),p.target=k,p.relatedTarget=_,j=null,Xr(h)===d&&(I=new I(T,x+"enter",N,n,h),I.target=_,I.relatedTarget=k,j=I),k=j,y&&N)t:{for(I=nC,T=y,x=N,_=0,j=T;j;j=I(j))_++;j=0;for(var L=x;L;L=I(L))j++;for(;0<_-j;)T=I(T),_--;for(;0<j-_;)x=I(x),j--;for(;_--;){if(T===x||x!==null&&T===x.alternate){I=T;break t}T=I(T),x=I(x)}I=null}else I=null;y!==null&&Sb(m,p,y,I,!1),N!==null&&k!==null&&Sb(m,k,N,I,!0)}}e:{if(p=d?Rl(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var z=P0;else if(U0(p))if(P_)z=fN;else{z=dN;var w=uN}else y=p.nodeName,!y||y.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&vp(d.elementType)&&(z=P0):z=hN;if(z&&(z=z(t,d))){U_(m,z,n,h);break e}w&&w(t,p,d),t==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&Ff(p,"number",p.value)}switch(w=d?Rl(d):window,t){case"focusin":(U0(w)||w.contentEditable==="true")&&(Zr=w,Kf=d,Bl=null);break;case"focusout":Bl=Kf=Zr=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,H0(m,n,h);break;case"selectionchange":if(pN)break;case"keydown":case"keyup":H0(m,n,h)}var b;if(wp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Jr?V_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(M_&&n.locale!=="ko"&&(Jr||v!=="onCompositionStart"?v==="onCompositionEnd"&&Jr&&(b=O_()):(ii=h,_p="value"in ii?ii.value:ii.textContent,Jr=!0)),w=Vu(d,v),0<w.length&&(v=new O0(v,t,null,n,h),m.push({event:v,listeners:w}),b?v.data=b:(b=L_(n),b!==null&&(v.data=b)))),(b=rN?aN(t,n):lN(t,n))&&(v=Vu(d,"onBeforeInput"),0<v.length&&(w=new O0("onBeforeInput","beforeinput",null,n,h),m.push({event:w,listeners:v}),w.data=b)),JN(m,t,d,n,h)}Dw(m,e)})}function yo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vu(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=lo(t,n),i!=null&&s.unshift(yo(t,i,r)),i=lo(t,e),i!=null&&s.push(yo(t,i,r))),t.tag===3)return s;t=t.return}return[]}function nC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sb(t,e,n,s,i){for(var r=e._reactName,a=[];n!==null&&n!==s;){var l=n,u=l.alternate,d=l.stateNode;if(l=l.tag,u!==null&&u===s)break;l!==5&&l!==26&&l!==27||d===null||(u=d,i?(d=lo(n,r),d!=null&&a.unshift(yo(n,d,u))):i||(d=lo(n,r),d!=null&&a.push(yo(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var sC=/\r\n?/g,iC=/\u0000|\uFFFD/g;function Nb(t){return(typeof t=="string"?t:""+t).replace(sC,`
`).replace(iC,"")}function Mw(t,e){return e=Nb(e),Nb(t)===e}function Oe(t,e,n,s,i,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Ea(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Ea(t,""+s);break;case"className":Ec(t,"class",s);break;case"tabIndex":Ec(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ec(t,n,s);break;case"style":k_(t,s,r);break;case"data":if(e!=="object"){Ec(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=qc(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Oe(t,e,"name",i.name,i,null),Oe(t,e,"formEncType",i.formEncType,i,null),Oe(t,e,"formMethod",i.formMethod,i,null),Oe(t,e,"formTarget",i.formTarget,i,null)):(Oe(t,e,"encType",i.encType,i,null),Oe(t,e,"method",i.method,i,null),Oe(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=qc(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=ys);break;case"onScroll":s!=null&&ve("scroll",t);break;case"onScrollEnd":s!=null&&ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(q(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=qc(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":ve("beforetoggle",t),ve("toggle",t),Bc(t,"popover",s);break;case"xlinkActuate":os(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":os(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":os(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":os(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":os(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":os(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":os(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":os(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":os(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Bc(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=kS.get(n)||n,Bc(t,n,s))}}function ym(t,e,n,s,i,r){switch(n){case"style":k_(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(q(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Ea(t,s):(typeof s=="number"||typeof s=="bigint")&&Ea(t,""+s);break;case"onScroll":s!=null&&ve("scroll",t);break;case"onScrollEnd":s!=null&&ve("scrollend",t);break;case"onClick":s!=null&&(t.onclick=ys);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!S_.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[Zt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Bc(t,n,s)}}}function Dt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ve("error",t),ve("load",t);var s=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:Oe(t,e,r,a,n,null)}}i&&Oe(t,e,"srcSet",n.srcSet,n,null),s&&Oe(t,e,"src",n.src,n,null);return;case"input":ve("invalid",t);var l=r=a=i=null,u=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"name":i=h;break;case"type":a=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(q(137,e));break;default:Oe(t,e,s,h,n,null)}}R_(t,r,l,u,d,a,i,!1);return;case"select":ve("invalid",t),s=a=r=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Oe(t,e,i,l,n,null)}e=r,n=a,t.multiple=!!s,e!=null?oa(t,!!s,e,!1):n!=null&&oa(t,!!s,n,!0);return;case"textarea":ve("invalid",t),r=i=s=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(q(91));break;default:Oe(t,e,a,l,n,null)}j_(t,s,i,r);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Oe(t,e,u,s,n,null)}return;case"dialog":ve("beforetoggle",t),ve("toggle",t),ve("cancel",t),ve("close",t);break;case"iframe":case"object":ve("load",t);break;case"video":case"audio":for(s=0;s<go.length;s++)ve(go[s],t);break;case"image":ve("error",t),ve("load",t);break;case"details":ve("toggle",t);break;case"embed":case"source":case"link":ve("error",t),ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:Oe(t,e,d,s,n,null)}return;default:if(vp(e)){for(h in n)n.hasOwnProperty(h)&&(s=n[h],s!==void 0&&ym(t,e,h,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Oe(t,e,l,s,n,null))}function rC(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,a=null,l=null,u=null,d=null,h=null;for(y in n){var m=n[y];if(n.hasOwnProperty(y)&&m!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=m;default:s.hasOwnProperty(y)||Oe(t,e,y,null,s,m)}}for(var p in s){var y=s[p];if(m=n[p],s.hasOwnProperty(p)&&(y!=null||m!=null))switch(p){case"type":r=y;break;case"name":i=y;break;case"checked":d=y;break;case"defaultChecked":h=y;break;case"value":a=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(q(137,e));break;default:y!==m&&Oe(t,e,p,y,s,m)}}qf(t,a,l,u,d,h,r,i);return;case"select":y=a=l=p=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":y=u;default:s.hasOwnProperty(r)||Oe(t,e,r,null,s,u)}for(i in s)if(r=s[i],u=n[i],s.hasOwnProperty(i)&&(r!=null||u!=null))switch(i){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Oe(t,e,i,r,s,u)}e=l,n=a,s=y,p!=null?oa(t,!!n,p,!1):!!s!=!!n&&(e!=null?oa(t,!!n,e,!0):oa(t,!!n,n?[]:"",!1));return;case"textarea":y=p=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Oe(t,e,l,null,s,i)}for(a in s)if(i=s[a],r=n[a],s.hasOwnProperty(a)&&(i!=null||r!=null))switch(a){case"value":p=i;break;case"defaultValue":y=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(q(91));break;default:i!==r&&Oe(t,e,a,i,s,r)}I_(t,p,y);return;case"option":for(var N in n)if(p=n[N],n.hasOwnProperty(N)&&p!=null&&!s.hasOwnProperty(N))switch(N){case"selected":t.selected=!1;break;default:Oe(t,e,N,null,s,p)}for(u in s)if(p=s[u],y=n[u],s.hasOwnProperty(u)&&p!==y&&(p!=null||y!=null))switch(u){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Oe(t,e,u,p,s,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in n)p=n[I],n.hasOwnProperty(I)&&p!=null&&!s.hasOwnProperty(I)&&Oe(t,e,I,null,s,p);for(d in s)if(p=s[d],y=n[d],s.hasOwnProperty(d)&&p!==y&&(p!=null||y!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(q(137,e));break;default:Oe(t,e,d,p,s,y)}return;default:if(vp(e)){for(var k in n)p=n[k],n.hasOwnProperty(k)&&p!==void 0&&!s.hasOwnProperty(k)&&ym(t,e,k,void 0,s,p);for(h in s)p=s[h],y=n[h],!s.hasOwnProperty(h)||p===y||p===void 0&&y===void 0||ym(t,e,h,p,s,y);return}}for(var T in n)p=n[T],n.hasOwnProperty(T)&&p!=null&&!s.hasOwnProperty(T)&&Oe(t,e,T,null,s,p);for(m in s)p=s[m],y=n[m],!s.hasOwnProperty(m)||p===y||p==null&&y==null||Oe(t,e,m,p,s,y)}function Cb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],r=i.transferSize,a=i.initiatorType,l=i.duration;if(r&&l&&Cb(a)){for(a=0,l=i.responseEnd,s+=1;s<n.length;s++){var u=n[s],d=u.startTime;if(d>l)break;var h=u.transferSize,m=u.initiatorType;h&&Cb(m)&&(u=u.responseEnd,a+=h*(u<l?1:(l-d)/(u-d)))}if(--s,e+=8*(r+a)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var bm=null,vm=null;function Lu(t){return t.nodeType===9?t:t.ownerDocument}function Rb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vw(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function xm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var df=null;function lC(){var t=window.event;return t&&t.type==="popstate"?t===df?!1:(df=t,!0):(df=null,!1)}var Lw=typeof setTimeout=="function"?setTimeout:void 0,oC=typeof clearTimeout=="function"?clearTimeout:void 0,Ib=typeof Promise=="function"?Promise:void 0,cC=typeof queueMicrotask=="function"?queueMicrotask:typeof Ib<"u"?function(t){return Ib.resolve(null).then(t).catch(uC)}:Lw;function uC(t){setTimeout(function(){throw t})}function Pi(t){return t==="head"}function jb(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),Ia(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")Wl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Wl(n);for(var r=n.firstChild;r;){var a=r.nextSibling,l=r.nodeName;r[Uo]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=a}}else n==="body"&&Wl(t.ownerDocument.body);n=i}while(n);Ia(e)}function kb(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function _m(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_m(n),bp(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function dC(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Uo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Sn(t.nextSibling),t===null)break}return null}function hC(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Sn(t.nextSibling),t===null))return null;return t}function Uw(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Sn(t.nextSibling),t===null))return null;return t}function Em(t){return t.data==="$?"||t.data==="$~"}function wm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function fC(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Tm=null;function Db(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Sn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Ob(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Pw(t,e,n){switch(e=Lu(n),t){case"html":if(t=e.documentElement,!t)throw Error(q(452));return t;case"head":if(t=e.head,!t)throw Error(q(453));return t;case"body":if(t=e.body,!t)throw Error(q(454));return t;default:throw Error(q(451))}}function Wl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);bp(t)}var Rn=new Map,Mb=new Set;function Uu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Vs=Ie.d;Ie.d={f:mC,r:pC,D:gC,C:yC,L:bC,m:vC,X:_C,S:xC,M:EC};function mC(){var t=Vs.f(),e=Nd();return t||e}function pC(t){var e=qa(t);e!==null&&e.tag===5&&e.type==="form"?kE(e):Vs.r(t)}var Ka=typeof document>"u"?null:document;function zw(t,e,n){var s=Ka;if(s&&typeof e=="string"&&e){var i=xn(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Mb.has(i)||(Mb.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),Dt(e,"link",t),Tt(e),s.head.appendChild(e)))}}function gC(t){Vs.D(t),zw("dns-prefetch",t,null)}function yC(t,e){Vs.C(t,e),zw("preconnect",t,e)}function bC(t,e,n){Vs.L(t,e,n);var s=Ka;if(s&&t&&e){var i='link[rel="preload"][as="'+xn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+xn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+xn(n.imageSizes)+'"]')):i+='[href="'+xn(t)+'"]';var r=i;switch(e){case"style":r=Ra(t);break;case"script":r=Qa(t)}Rn.has(r)||(t=$e({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Rn.set(r,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(Ho(r))||e==="script"&&s.querySelector(Go(r))||(e=s.createElement("link"),Dt(e,"link",t),Tt(e),s.head.appendChild(e)))}}function vC(t,e){Vs.m(t,e);var n=Ka;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+xn(s)+'"][href="'+xn(t)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Qa(t)}if(!Rn.has(r)&&(t=$e({rel:"modulepreload",href:t},e),Rn.set(r,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Go(r)))return}s=n.createElement("link"),Dt(s,"link",t),Tt(s),n.head.appendChild(s)}}}function xC(t,e,n){Vs.S(t,e,n);var s=Ka;if(s&&t){var i=la(s).hoistableStyles,r=Ra(t);e=e||"default";var a=i.get(r);if(!a){var l={loading:0,preload:null};if(a=s.querySelector(Ho(r)))l.loading=5;else{t=$e({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Rn.get(r))&&sg(t,n);var u=a=s.createElement("link");Tt(u),Dt(u,"link",t),u._p=new Promise(function(d,h){u.onload=d,u.onerror=h}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Jc(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:l},i.set(r,a)}}}function _C(t,e){Vs.X(t,e);var n=Ka;if(n&&t){var s=la(n).hoistableScripts,i=Qa(t),r=s.get(i);r||(r=n.querySelector(Go(i)),r||(t=$e({src:t,async:!0},e),(e=Rn.get(i))&&ig(t,e),r=n.createElement("script"),Tt(r),Dt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function EC(t,e){Vs.M(t,e);var n=Ka;if(n&&t){var s=la(n).hoistableScripts,i=Qa(t),r=s.get(i);r||(r=n.querySelector(Go(i)),r||(t=$e({src:t,async:!0,type:"module"},e),(e=Rn.get(i))&&ig(t,e),r=n.createElement("script"),Tt(r),Dt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function Vb(t,e,n,s){var i=(i=ui.current)?Uu(i):null;if(!i)throw Error(q(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ra(n.href),n=la(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ra(n.href);var r=la(i).hoistableStyles,a=r.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=i.querySelector(Ho(t)))&&!r._p&&(a.instance=r,a.state.loading=5),Rn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Rn.set(t,n),r||wC(i,t,n,a.state))),e&&s===null)throw Error(q(528,""));return a}if(e&&s!==null)throw Error(q(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Qa(n),n=la(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(q(444,t))}}function Ra(t){return'href="'+xn(t)+'"'}function Ho(t){return'link[rel="stylesheet"]['+t+"]"}function Bw(t){return $e({},t,{"data-precedence":t.precedence,precedence:null})}function wC(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Dt(e,"link",n),Tt(e),t.head.appendChild(e))}function Qa(t){return'[src="'+xn(t)+'"]'}function Go(t){return"script[async]"+t}function Lb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+xn(n.href)+'"]');if(s)return e.instance=s,Tt(s),s;var i=$e({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Tt(s),Dt(s,"style",i),Jc(s,n.precedence,t),e.instance=s;case"stylesheet":i=Ra(n.href);var r=t.querySelector(Ho(i));if(r)return e.state.loading|=4,e.instance=r,Tt(r),r;s=Bw(n),(i=Rn.get(i))&&sg(s,i),r=(t.ownerDocument||t).createElement("link"),Tt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Dt(r,"link",s),e.state.loading|=4,Jc(r,n.precedence,t),e.instance=r;case"script":return r=Qa(n.src),(i=t.querySelector(Go(r)))?(e.instance=i,Tt(i),i):(s=n,(i=Rn.get(r))&&(s=$e({},n),ig(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),Tt(i),Dt(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(q(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Jc(s,n.precedence,t));return e.instance}function Jc(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,a=0;a<s.length;a++){var l=s[a];if(l.dataset.precedence===e)r=l;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function sg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ig(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Zc=null;function Ub(t,e,n){if(Zc===null){var s=new Map,i=Zc=new Map;i.set(n,s)}else i=Zc,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[Uo]||r[Rt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=s.get(a);l?l.push(r):s.set(a,[r])}}return s}function Pb(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function TC(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function qw(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function AC(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=Ra(s.href),r=e.querySelector(Ho(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Pu.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,Tt(r);return}r=e.ownerDocument||e,s=Bw(s),(i=Rn.get(i))&&sg(s,i),r=r.createElement("link"),Tt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),Dt(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Pu.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var hf=0;function SC(t,e){return t.stylesheets&&t.count===0&&eu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&eu(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&hf===0&&(hf=62500*aC());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&eu(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>hf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function Pu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)eu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zu=null;function eu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zu=new Map,e.forEach(NC,t),zu=null,Pu.call(t))}function NC(t,e){if(!(e.state.loading&4)){var n=zu.get(t);if(n)var s=n.get(null);else{n=new Map,zu.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var a=i[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}i=e.instance,a=i.getAttribute("data-precedence"),r=n.get(a)||s,r===s&&n.set(null,i),n.set(a,i),this.count++,s=Pu.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var bo={$$typeof:gs,Provider:null,Consumer:null,_currentValue:ir,_currentValue2:ir,_threadCount:0};function CC(t,e,n,s,i,r,a,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.hiddenUpdates=Oh(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function Fw(t,e,n,s,i,r,a,l,u,d,h,m){return t=new CC(t,e,n,a,u,d,h,m,l),e=1,r===!0&&(e|=24),r=an(3,null,null,e),t.current=r,r.stateNode=t,e=Ip(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},Dp(r),t}function Hw(t){return t?(t=na,t):na}function Gw(t,e,n,s,i,r){i=Hw(i),s.context===null?s.context=i:s.pendingContext=i,s=hi(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=fi(t,s,e),n!==null&&(Jt(n,t,e),Fl(n,t,e))}function zb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rg(t,e){zb(t,e),(t=t.alternate)&&zb(t,e)}function Kw(t){if(t.tag===13||t.tag===31){var e=Cr(t,67108864);e!==null&&Jt(e,t,67108864),rg(t,67108864)}}function Bb(t){if(t.tag===13||t.tag===31){var e=fn();e=gp(e);var n=Cr(t,e);n!==null&&Jt(n,t,e),rg(t,e)}}var Bu=!0;function RC(t,e,n,s){var i=ae.T;ae.T=null;var r=Ie.p;try{Ie.p=2,ag(t,e,n,s)}finally{Ie.p=r,ae.T=i}}function IC(t,e,n,s){var i=ae.T;ae.T=null;var r=Ie.p;try{Ie.p=8,ag(t,e,n,s)}finally{Ie.p=r,ae.T=i}}function ag(t,e,n,s){if(Bu){var i=Am(s);if(i===null)uf(t,e,s,qu,n),qb(t,s);else if(kC(i,t,e,n,s))s.stopPropagation();else if(qb(t,s),e&4&&-1<jC.indexOf(t)){for(;i!==null;){var r=qa(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Zi(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-hn(a);l.entanglements[1]|=u,a&=~u}ns(r),!(Re&6)&&(ju=un()+500,Fo(0))}}break;case 31:case 13:l=Cr(r,2),l!==null&&Jt(l,r,2),Nd(),rg(r,2)}if(r=Am(s),r===null&&uf(t,e,s,qu,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else uf(t,e,s,null,n)}}function Am(t){return t=xp(t),lg(t)}var qu=null;function lg(t){if(qu=null,t=Xr(t),t!==null){var e=Oo(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=h_(e),t!==null)return t;t=null}else if(n===31){if(t=f_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return qu=t,null}function Qw(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gS()){case y_:return 2;case b_:return 8;case yu:case yS:return 32;case v_:return 268435456;default:return 32}default:return 32}}var Sm=!1,gi=null,yi=null,bi=null,vo=new Map,xo=new Map,Ws=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qb(t,e){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xo.delete(e.pointerId)}}function Al(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=qa(e),e!==null&&Kw(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kC(t,e,n,s,i){switch(e){case"focusin":return gi=Al(gi,t,e,n,s,i),!0;case"dragenter":return yi=Al(yi,t,e,n,s,i),!0;case"mouseover":return bi=Al(bi,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return vo.set(r,Al(vo.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,xo.set(r,Al(xo.get(r)||null,t,e,n,s,i)),!0}return!1}function $w(t){var e=Xr(t.target);if(e!==null){var n=Oo(e);if(n!==null){if(e=n.tag,e===13){if(e=h_(n),e!==null){t.blockedOn=e,S0(t.priority,function(){Bb(n)});return}}else if(e===31){if(e=f_(n),e!==null){t.blockedOn=e,S0(t.priority,function(){Bb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Am(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Hf=s,n.target.dispatchEvent(s),Hf=null}else return e=qa(n),e!==null&&Kw(e),t.blockedOn=n,!1;e.shift()}return!0}function Fb(t,e,n){tu(t)&&n.delete(e)}function DC(){Sm=!1,gi!==null&&tu(gi)&&(gi=null),yi!==null&&tu(yi)&&(yi=null),bi!==null&&tu(bi)&&(bi=null),vo.forEach(Fb),xo.forEach(Fb)}function Ic(t,e){t.blockedOn===e&&(t.blockedOn=null,Sm||(Sm=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,DC)))}var jc=null;function Hb(t){jc!==t&&(jc=t,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,function(){jc===t&&(jc=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(lg(s||n)===null)continue;break}var r=qa(n);r!==null&&(t.splice(e,3),e-=3,am(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function Ia(t){function e(u){return Ic(u,t)}gi!==null&&Ic(gi,t),yi!==null&&Ic(yi,t),bi!==null&&Ic(bi,t),vo.forEach(e),xo.forEach(e);for(var n=0;n<Ws.length;n++){var s=Ws[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)$w(n),n.blockedOn===null&&Ws.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],a=i[Zt]||null;if(typeof r=="function")a||Hb(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(i=r,a=r[Zt]||null)l=a.formAction;else if(lg(i)!==null)continue}else l=a.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),Hb(n)}}}function Yw(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(a){return i=a})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function og(t){this._internalRoot=t}Id.prototype.render=og.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));var n=e.current,s=fn();Gw(n,s,t,e,null,null)};Id.prototype.unmount=og.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gw(t.current,2,null,t,null,null),Nd(),e[Ba]=null}};function Id(t){this._internalRoot=t}Id.prototype.unstable_scheduleHydration=function(t){if(t){var e=T_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ws.length&&e!==0&&e<Ws[n].priority;n++);Ws.splice(n,0,t),n===0&&$w(t)}};var Gb=u_.version;if(Gb!=="19.2.0")throw Error(q(527,Gb,"19.2.0"));Ie.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=cS(e),t=t!==null?m_(t):null,t=t===null?null:t.stateNode,t};var OC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{Mo=kc.inject(OC),dn=kc}catch{}}fd.createRoot=function(t,e){if(!d_(t))throw Error(q(299));var n=!1,s="",i=zE,r=BE,a=qE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Fw(t,1,!1,null,null,n,s,null,i,r,a,Yw),t[Ba]=e.current,ng(t),new og(e)};fd.hydrateRoot=function(t,e,n){if(!d_(t))throw Error(q(299));var s=!1,i="",r=zE,a=BE,l=qE,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=Fw(t,1,!0,e,n??null,s,i,u,r,a,l,Yw),e.context=Hw(null),n=e.current,s=fn(),s=gp(s),i=hi(s),i.callback=null,fi(n,i,s),n=s,e.current.lanes=n,Lo(e,n),ns(e),t[Ba]=e.current,ng(t),new Id(e)};fd.version="19.2.0";function Xw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xw)}catch(t){console.error(t)}}Xw(),i_.exports=fd;var MC=i_.exports;const VC=$x(MC);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _o(){return _o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_o.apply(this,arguments)}var oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oi||(oi={}));const Kb="popstate";function LC(t){t===void 0&&(t={});function e(s,i){let{pathname:r,search:a,hash:l}=s.location;return Nm("",{pathname:r,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:Fu(i)}return PC(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ww(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UC(){return Math.random().toString(36).substr(2,8)}function Qb(t,e){return{usr:t.state,key:t.key,idx:e}}function Nm(t,e,n,s){return n===void 0&&(n=null),_o({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$a(e):e,{state:n,key:e&&e.key||s||UC()})}function Fu(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function $a(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function PC(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,a=i.history,l=oi.Pop,u=null,d=h();d==null&&(d=0,a.replaceState(_o({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function m(){l=oi.Pop;let k=h(),T=k==null?null:k-d;d=k,u&&u({action:l,location:I.location,delta:T})}function p(k,T){l=oi.Push;let x=Nm(I.location,k,T);d=h()+1;let _=Qb(x,d),j=I.createHref(x);try{a.pushState(_,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(j)}r&&u&&u({action:l,location:I.location,delta:1})}function y(k,T){l=oi.Replace;let x=Nm(I.location,k,T);d=h();let _=Qb(x,d),j=I.createHref(x);a.replaceState(_,"",j),r&&u&&u({action:l,location:I.location,delta:0})}function N(k){let T=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof k=="string"?k:Fu(k);return x=x.replace(/ $/,"%20"),We(T,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,T)}let I={get action(){return l},get location(){return t(i,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Kb,m),u=k,()=>{i.removeEventListener(Kb,m),u=null}},createHref(k){return e(i,k)},createURL:N,encodeLocation(k){let T=N(k);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:y,go(k){return a.go(k)}};return I}var $b;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($b||($b={}));function zC(t,e,n){return n===void 0&&(n="/"),BC(t,e,n)}function BC(t,e,n,s){let i=typeof e=="string"?$a(e):e,r=ja(i.pathname||"/",n);if(r==null)return null;let a=Jw(t);qC(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let d=ZC(r);l=WC(a[u],d)}return l}function Jw(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(r,a,l)=>{let u={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};u.relativePath.startsWith("/")&&(We(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=vi([s,u.relativePath]),h=n.concat(u);r.children&&r.children.length>0&&(We(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Jw(r.children,e,h,d)),!(r.path==null&&!r.index)&&e.push({path:d,score:YC(d,r.index),routesMeta:h})};return t.forEach((r,a)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,a);else for(let u of Zw(r.path))i(r,a,u)}),e}function Zw(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let a=Zw(s.join("/")),l=[];return l.push(...a.map(u=>u===""?r:[r,u].join("/"))),i&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function qC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XC(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const FC=/^:[\w-]+$/,HC=3,GC=2,KC=1,QC=10,$C=-2,Yb=t=>t==="*";function YC(t,e){let n=t.split("/"),s=n.length;return n.some(Yb)&&(s+=$C),e&&(s+=GC),n.filter(i=>!Yb(i)).reduce((i,r)=>i+(FC.test(r)?HC:r===""?KC:QC),s)}function XC(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function WC(t,e,n){let{routesMeta:s}=t,i={},r="/",a=[];for(let l=0;l<s.length;++l){let u=s[l],d=l===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",m=Cm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:vi([r,m.pathname]),pathnameBase:sR(vi([r,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(r=vi([r,m.pathnameBase]))}return a}function Cm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=JC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((d,h,m)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let I=l[m]||"";a=r.slice(0,r.length-I.length).replace(/(.)\/+$/,"$1")}const N=l[m];return y&&!N?d[p]=void 0:d[p]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:a,pattern:t}}function JC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ww(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(s.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function ZC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ww(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ja(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function eR(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?$a(t):t;return{pathname:n?n.startsWith("/")?n:tR(n,e):e,search:iR(s),hash:rR(i)}}function tR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ff(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cg(t,e){let n=nR(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function ug(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=$a(t):(i=_o({},t),We(!i.pathname||!i.pathname.includes("?"),ff("?","pathname","search",i)),We(!i.pathname||!i.pathname.includes("#"),ff("#","pathname","hash",i)),We(!i.search||!i.search.includes("#"),ff("#","search","hash",i)));let r=t===""||i.pathname==="",a=r?"/":i.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!s&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}l=m>=0?e[m]:"/"}let u=eR(i,l),d=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const vi=t=>t.join("/").replace(/\/\/+/g,"/"),sR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const e1=["post","put","patch","delete"];new Set(e1);const lR=["get",...e1];new Set(lR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eo(){return Eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Eo.apply(this,arguments)}const jd=A.createContext(null),t1=A.createContext(null),Ls=A.createContext(null),kd=A.createContext(null),ss=A.createContext({outlet:null,matches:[],isDataRoute:!1}),n1=A.createContext(null);function oR(t,e){let{relative:n}=e===void 0?{}:e;Ya()||We(!1);let{basename:s,navigator:i}=A.useContext(Ls),{hash:r,pathname:a,search:l}=Dd(t,{relative:n}),u=a;return s!=="/"&&(u=a==="/"?s:vi([s,a])),i.createHref({pathname:u,search:l,hash:r})}function Ya(){return A.useContext(kd)!=null}function zi(){return Ya()||We(!1),A.useContext(kd).location}function s1(t){A.useContext(Ls).static||A.useLayoutEffect(t)}function is(){let{isDataRoute:t}=A.useContext(ss);return t?wR():cR()}function cR(){Ya()||We(!1);let t=A.useContext(jd),{basename:e,future:n,navigator:s}=A.useContext(Ls),{matches:i}=A.useContext(ss),{pathname:r}=zi(),a=JSON.stringify(cg(i,n.v7_relativeSplatPath)),l=A.useRef(!1);return s1(()=>{l.current=!0}),A.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let m=ug(d,JSON.parse(a),r,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:vi([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,a,r,t])}const i1=A.createContext(null);function rs(){return A.useContext(i1)}function uR(t){let e=A.useContext(ss).outlet;return e&&A.createElement(i1.Provider,{value:t},e)}function dR(){let{matches:t}=A.useContext(ss),e=t[t.length-1];return e?e.params:{}}function Dd(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=A.useContext(Ls),{matches:i}=A.useContext(ss),{pathname:r}=zi(),a=JSON.stringify(cg(i,s.v7_relativeSplatPath));return A.useMemo(()=>ug(t,JSON.parse(a),r,n==="path"),[t,a,r,n])}function hR(t,e){return fR(t,e)}function fR(t,e,n,s){Ya()||We(!1);let{navigator:i}=A.useContext(Ls),{matches:r}=A.useContext(ss),a=r[r.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=zi(),h;if(e){var m;let k=typeof e=="string"?$a(e):e;u==="/"||(m=k.pathname)!=null&&m.startsWith(u)||We(!1),h=k}else h=d;let p=h.pathname||"/",y=p;if(u!=="/"){let k=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(k.length).join("/")}let N=zC(t,{pathname:y}),I=bR(N&&N.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:vi([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:vi([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),r,n,s);return e&&I?A.createElement(kd.Provider,{value:{location:Eo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:oi.Pop}},I):I}function mR(){let t=ER(),e=aR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,null)}const pR=A.createElement(mR,null);class gR extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(ss.Provider,{value:this.props.routeContext},A.createElement(n1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yR(t){let{routeContext:e,match:n,children:s}=t,i=A.useContext(jd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(ss.Provider,{value:e},s)}function bR(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||We(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:y}=n,N=m.route.loader&&p[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||N){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,m,p)=>{let y,N=!1,I=null,k=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,I=m.route.errorElement||pR,u&&(d<0&&p===0?(TR("route-fallback"),N=!0,k=null):d===p&&(N=!0,k=m.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,p+1)),x=()=>{let _;return y?_=I:N?_=k:m.route.Component?_=A.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=h,A.createElement(yR,{match:m,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?A.createElement(gR,{location:n.location,revalidation:n.revalidation,component:I,error:y,children:x(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):x()},null)}var r1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(r1||{}),a1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(a1||{});function vR(t){let e=A.useContext(jd);return e||We(!1),e}function xR(t){let e=A.useContext(t1);return e||We(!1),e}function _R(t){let e=A.useContext(ss);return e||We(!1),e}function l1(t){let e=_R(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function ER(){var t;let e=A.useContext(n1),n=xR(),s=l1();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function wR(){let{router:t}=vR(r1.UseNavigateStable),e=l1(a1.UseNavigateStable),n=A.useRef(!1);return s1(()=>{n.current=!0}),A.useCallback(function(i,r){r===void 0&&(r={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Eo({fromRouteId:e},r)))},[t,e])}const Xb={};function TR(t,e,n){Xb[t]||(Xb[t]=!0)}function AR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hs(t){let{to:e,replace:n,state:s,relative:i}=t;Ya()||We(!1);let{future:r,static:a}=A.useContext(Ls),{matches:l}=A.useContext(ss),{pathname:u}=zi(),d=is(),h=ug(e,cg(l,r.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(h);return A.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:i}),[d,m,i,n,s]),null}function dg(t){return uR(t.context)}function Ce(t){We(!1)}function SR(t){let{basename:e="/",children:n=null,location:s,navigationType:i=oi.Pop,navigator:r,static:a=!1,future:l}=t;Ya()&&We(!1);let u=e.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:u,navigator:r,static:a,future:Eo({v7_relativeSplatPath:!1},l)}),[u,l,r,a]);typeof s=="string"&&(s=$a(s));let{pathname:h="/",search:m="",hash:p="",state:y=null,key:N="default"}=s,I=A.useMemo(()=>{let k=ja(h,u);return k==null?null:{location:{pathname:k,search:m,hash:p,state:y,key:N},navigationType:i}},[u,h,m,p,y,N,i]);return I==null?null:A.createElement(Ls.Provider,{value:d},A.createElement(kd.Provider,{children:n,value:I}))}function NR(t){let{children:e,location:n}=t;return hR(Rm(e),n)}new Promise(()=>{});function Rm(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(s,i)=>{if(!A.isValidElement(s))return;let r=[...e,i];if(s.type===A.Fragment){n.push.apply(n,Rm(s.props.children,r));return}s.type!==Ce&&We(!1),!s.props.index||!s.props.children||We(!1);let a={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Rm(s.props.children,r)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Hu.apply(this,arguments)}function o1(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,r;for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function CR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RR(t,e){return t.button===0&&(!e||e==="_self")&&!CR(t)}const IR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],kR="6";try{window.__reactRouterVersion=kR}catch{}const DR=A.createContext({isTransitioning:!1}),OR="startTransition",Wb=nS[OR];function MR(t){let{basename:e,children:n,future:s,window:i}=t,r=A.useRef();r.current==null&&(r.current=LC({window:i,v5Compat:!0}));let a=r.current,[l,u]=A.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},h=A.useCallback(m=>{d&&Wb?Wb(()=>u(m)):u(m)},[u,d]);return A.useLayoutEffect(()=>a.listen(h),[a,h]),A.useEffect(()=>AR(s),[s]),A.createElement(SR,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const VR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ma=A.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:r,replace:a,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=o1(e,IR),{basename:y}=A.useContext(Ls),N,I=!1;if(typeof d=="string"&&LR.test(d)&&(N=d,VR))try{let _=new URL(window.location.href),j=d.startsWith("//")?new URL(_.protocol+d):new URL(d),L=ja(j.pathname,y);j.origin===_.origin&&L!=null?d=L+j.search+j.hash:I=!0}catch{}let k=oR(d,{relative:i}),T=zR(d,{replace:a,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m});function x(_){s&&s(_),_.defaultPrevented||T(_)}return A.createElement("a",Hu({},p,{href:N||k,onClick:I||r?s:x,ref:n,target:u}))}),UR=A.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:i=!1,className:r="",end:a=!1,style:l,to:u,viewTransition:d,children:h}=e,m=o1(e,jR),p=Dd(u,{relative:m.relative}),y=zi(),N=A.useContext(t1),{navigator:I,basename:k}=A.useContext(Ls),T=N!=null&&BR(p)&&d===!0,x=I.encodeLocation?I.encodeLocation(p).pathname:p.pathname,_=y.pathname,j=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;i||(_=_.toLowerCase(),j=j?j.toLowerCase():null,x=x.toLowerCase()),j&&k&&(j=ja(j,k)||j);const L=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let z=_===x||!a&&_.startsWith(x)&&_.charAt(L)==="/",w=j!=null&&(j===x||!a&&j.startsWith(x)&&j.charAt(x.length)==="/"),b={isActive:z,isPending:w,isTransitioning:T},v=z?s:void 0,S;typeof r=="function"?S=r(b):S=[r,z?"active":null,w?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(b):l;return A.createElement(ma,Hu({},m,{"aria-current":v,className:S,ref:n,style:C,to:u,viewTransition:d}),typeof h=="function"?h(b):h)});var Im;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Im||(Im={}));var Jb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jb||(Jb={}));function PR(t){let e=A.useContext(jd);return e||We(!1),e}function zR(t,e){let{target:n,replace:s,state:i,preventScrollReset:r,relative:a,viewTransition:l}=e===void 0?{}:e,u=is(),d=zi(),h=Dd(t,{relative:a});return A.useCallback(m=>{if(RR(m,n)){m.preventDefault();let p=s!==void 0?s:Fu(d)===Fu(h);u(t,{replace:p,state:i,preventScrollReset:r,relative:a,viewTransition:l})}},[d,u,h,s,i,n,t,r,a,l])}function BR(t,e){e===void 0&&(e={});let n=A.useContext(DR);n==null&&We(!1);let{basename:s}=PR(Im.useViewTransitionState),i=Dd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let r=ja(n.currentLocation.pathname,s)||n.currentLocation.pathname,a=ja(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Cm(i.pathname,a)!=null||Cm(i.pathname,r)!=null}function c1(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=c1(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function He(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=c1(t))&&(s&&(s+=" "),s+=e);return s}const hg=({sidebar:t,topbar:e,children:n,className:s="",mainClassName:i="",contentClassName:r=""})=>{const[a,l]=A.useState(!1);return c.jsxs("div",{className:He("min-h-screen bg-transparent text-slate-900",s),children:[c.jsxs("div",{className:"lg:grid lg:grid-cols-[320px,1fr]",children:[c.jsx("div",{className:He("fixed inset-y-0 left-0 z-40 w-80 max-w-full transform bg-white shadow-xl transition-transform duration-300 lg:sticky lg:top-0 lg:h-screen lg:overflow-y-auto lg:translate-x-0 lg:shadow-none lg:transform-none",a?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:t?fu.cloneElement(t,{onNavigate:(...u)=>{var d,h;(h=(d=t.props).onNavigate)==null||h.call(d,...u),l(!1)}}):null}),c.jsxs("div",{className:"flex min-h-screen flex-col lg:col-start-2",children:[e?fu.cloneElement(e,{onToggleSidebar:()=>l(u=>!u)}):null,c.jsx("main",{className:He("flex-1 px-4 pb-10 pt-6 sm:px-6 lg:px-10",i),children:c.jsx("div",{className:He("mx-auto w-full max-w-7xl space-y-8",r),children:n})})]})]}),a?c.jsx("div",{className:"fixed inset-0 z-30 bg-slate-900/40 lg:hidden",onClick:()=>l(!1)}):null]})},Zb={light:{container:"bg-white text-slate-900 shadow-lg",headerBorder:"border-slate-100",navActive:"bg-brand-50 text-brand-700",navInactive:"text-slate-600 hover:bg-slate-100 hover:text-slate-900",iconIdle:"text-slate-400",iconActive:"text-brand-600",badge:"bg-brand-100 text-brand-700",footerBorder:"border-slate-100"},dark:{container:"bg-slate-950 text-white shadow-xl",headerBorder:"border-white/10",navActive:"bg-white/10 text-white",navInactive:"text-white/70 hover:bg-white/5 hover:text-white",iconIdle:"text-white/50",iconActive:"text-white",badge:"bg-white/10 text-white",footerBorder:"border-white/10"}},fg=({header:t,navItems:e=[],footer:n,onNavigate:s,tone:i="light"})=>{const r=Zb[i]||Zb.light;return c.jsxs("aside",{className:He("flex h-full w-80 max-w-full flex-col lg:h-screen",r.container),children:[c.jsx("div",{className:He("border-b px-6 pb-4 pt-6",r.headerBorder),children:t||c.jsxs("div",{className:"text-current",children:[c.jsx("p",{className:"text-xs uppercase tracking-widest opacity-70",children:"EVC Portal"}),c.jsx("h1",{className:"mt-1 text-xl font-semibold",children:"Coaching Suite"})]})}),c.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:c.jsx("ul",{className:"flex flex-col gap-1",children:e.map(a=>{const l=a.icon;return c.jsx("li",{children:c.jsx(UR,{to:a.to,end:a.end,onClick:()=>s==null?void 0:s(a),className:({isActive:u})=>He("group flex items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors",u?r.navActive:r.navInactive),children:({isActive:u})=>c.jsxs(c.Fragment,{children:[l?c.jsx(l,{className:He("mr-3 h-4 w-4 flex-none transition-colors",u?r.iconActive:r.iconIdle)}):null,c.jsx("span",{className:"truncate",children:a.label}),a.badge?c.jsx("span",{className:He("ml-auto inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold",r.badge),children:a.badge}):null]})})},a.to)})})}),n?c.jsx("div",{className:He("border-t p-4",r.footerBorder),children:n}):null]})};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u1=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:a,...l},u)=>A.createElement("svg",{ref:u,...FR,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:u1("lucide",i),...l},[...a.map(([d,h])=>A.createElement(d,h)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(t,e)=>{const n=A.forwardRef(({className:s,...i},r)=>A.createElement(HR,{ref:r,iconNode:e,className:u1(`lucide-${qR(t)}`,s),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ev=he("ArrowLeft",GR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cr=he("ArrowRight",KR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$R=he("BookOpen",QR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],XR=he("Briefcase",YR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jm=he("ChevronDown",WR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZR=he("ChevronUp",JR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pa=he("CircleCheck",eI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],tv=he("CirclePlay",tI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sI=he("CircleX",nI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],rI=he("ClipboardCheck",iI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],lI=he("ClipboardList",aI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],cI=he("Clock",oI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],dI=he("FileSpreadsheet",uI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],d1=he("FileText",hI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],mI=he("FolderOpen",fI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M12 13V2l8 4-8 4",key:"5wlwwj"}],["path",{d:"M20.561 10.222a9 9 0 1 1-12.55-5.29",key:"1c0wjv"}],["path",{d:"M8.002 9.997a5 5 0 1 0 8.9 2.02",key:"gb1g7m"}]],gI=he("Goal",pI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],h1=he("IdCard",yI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Od=he("LayoutDashboard",bI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mf=he("LoaderCircle",vI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],km=he("LogIn",xI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],nv=he("LogOut",_I);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],wI=he("Mail",EI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],f1=he("Menu",TI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],SI=he("MessageCircle",AI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],CI=he("MessageSquare",NI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],sv=he("Paperclip",RI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iv=he("Plus",II);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],kI=he("RefreshCcw",jI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],m1=he("Save",DI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],MI=he("Search",OI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],LI=he("Send",VI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],PI=he("ShieldAlert",UI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],BI=he("ShieldCheck",zI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]],FI=he("ShieldQuestion",qI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rv=he("Shield",HI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],KI=he("Sparkles",GI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Dm=he("Trash2",QI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],YI=he("TriangleAlert",$I);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],p1=he("UserPlus",XI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ko=he("Users",WI);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ZI=he("X",JI),g1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAuCAYAAADjs904AAAEnElEQVR4Adybi24jIQxFm/z/N88uJy2SSwzY5jGkVa0B+/peP5pkFWmfX+Lnuq5/s38EffWYNauAhYHV2pm/91zV4mvBWfzxeEzXgbtGSgzLcc5Yvq98ooNlDc5YvkefcEiz8kRyLNyvBVuAIxiKL/M1X4lZdW9pt2Kteq7r+92vhbHGqAGz4lu45yyilggxqSPPxErrxUv8nXdqxR6PNe9+cI/0t+UVPFLg7NzRgcl6ZnJJ3vI8onPsgkeaKge04r67PvQwby/bFvxIP7m4dJz/fpbJNzwjg55Vlld724IjDV7X9S+SV8vxDkfjmcGh8Xp8nhq2LDj6ik15nr492Co2aVbfXTyDrQpsDpgWTNMjpvUEn+YvfbOGOsozkk+vLSt7nnk3LXim4MlcLEGr77r8HxVwZdM4pS/jeEr/jPOtC17RkDaUkVcffKlOHiZL2NevCayASFbcYdetC7ZWPbogq46G82jPWk6PpxeXfdy+YE+xsvDZ59E6Wvn8kbRM6wU+rIxpvhIj77cvWBbTOjOgVrwWi+bBZ82tDZ18DK6WgcE0DNzSNEzLd8SCaaBV5OrYCv3awlq9eHLAlqZxH7FgrTDNR0Oav+bz4ms8Lb/2xzGi28sljmk14cdkrFiwDO09p8L2Cv6oaQsilOoJfYtWy0OnZuhZrMZd5krcMQt+Pp/Vb5DKBix32aQFH8GwMEteD9eLo+HtJ+NNCwbsMQpaZdQxi9syWI+WVptVA1y2UvO69C9aMp5nmZPvpgVnsPWpNWrJbRVqyT8NM6ufxPOrtXR//UonDnnnzB6WLDiT81xhFN7i7cXJTRgef8q0JS9bcHRyWpFRrlbe7M/8ltadseMWbB1GegWq/8qt+a28O3HUWrNZdRy54NT0rP5Unl3vEqr4jzP1qP6B/oS/evGMk08tZ9mCR4YYffvUGpQDqJ8/K2Ltkx0sWTDEO0ZmbVTWsqs2NFv1eerQsHCXhmZppgUj4LFSJHJHL5J3Z45WM0uo1QQ+W4nBX/o895xvWrCHeDc2DzA/W/oJ0wq7Y4nv7XM0+d54ku8NJ0G9OFgWhnHumcQdvWBZaK8pS9zz2R7VrmmwROy6vv+LC+dsZe0t7VYMnjJ+9IIp2GIMyoJbgdG0yyFL3RST17dzine/kwdTs5LwTyy4bEq7MxDNv8oX0Yvk9Oo/fsErmu4NJcet2tqrGA7yMc4tA4NpGLilaZiW7/gFt4q3xmrDs+ZbcCyhhkO/ZVoefFgZ03wlRt7bC5bIG88M5y55j7Z3+LWeejy9uOT9iAXLgk8/M3wsWudIrqb5MQv2vJJko9G8UQ4WhUme2hlcthom6jctOItHn9HiTsqL/qFYZrayT9OCRwugyVGOSH50KTWt2Xw1nZn+LQum4BlLPmHAn1bDtgWz5J22chEruXsz8mp/3IK9DfYGFo3vrgM9zFvvxy3Y22AIb0yKDNxI/Qs2ovMcSf5VRecyU6fH1Yt3SnWF0cJcSUYwvJgRrsJer+BREpVZOFfzC6mvnVql7ixteDDJHz2/FkzyLEK4pK3kldycMal9x5kasnn0cw5PT14P+x8AAP//7ZVCGgAAAAZJREFUAwA3A6cC1pBeLQAAAABJRU5ErkJggg==",mg=({title:t,user:e,children:n,onToggleSidebar:s,rightSlot:i,tone:r="light",className:a="",logoSlot:l,logoTo:u="/"})=>{var p;const d={light:{header:"bg-white/85 backdrop-blur supports-[backdrop-filter]:bg-white/70",role:"text-slate-400",title:"text-slate-900",toggle:"border-slate-200 text-slate-500 transition hover:bg-slate-100",userChip:"bg-slate-100/60 text-slate-900",initials:"bg-brand-100 text-brand-700",subtitle:"text-slate-500",rightSection:"text-slate-900"},brand:{header:"bg-evc-blue-600/95 text-white backdrop-blur supports-[backdrop-filter]:bg-evc-blue-600/75",role:"text-white/70",title:"text-white",toggle:"border-white/40 text-white transition hover:bg-white/10",userChip:"bg-white/12 text-white",initials:"bg-white/15 text-white",subtitle:"text-white/70",rightSection:"text-white"}},h=d[r]||d.light,m=l??c.jsx(ma,{to:u,className:"inline-flex shrink-0 items-center","aria-label":"Ga naar het hoofdscherm",children:c.jsx("img",{src:g1,alt:"EVC GO",className:"h-7 w-auto"})});return c.jsxs("header",{className:He("sticky top-0 z-20 flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8",h.header,a),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{type:"button",onClick:s,className:He("flex h-10 w-10 items-center justify-center rounded-full border lg:hidden",h.toggle),children:[c.jsx(f1,{className:"h-5 w-5"}),c.jsx("span",{className:"sr-only",children:"Toggle navigation"})]}),m,c.jsxs("div",{children:[c.jsx("p",{className:He("text-xs uppercase tracking-widest",h.role),children:(e==null?void 0:e.role)??"Portal"}),c.jsx("h2",{className:He("text-lg font-semibold",h.title),children:t})]}),n]}),c.jsxs("div",{className:He("flex items-center gap-4",h.rightSection),children:[i,e?c.jsxs("div",{className:He("flex items-center gap-3 rounded-full px-3 py-2 text-sm",h.userChip),children:[c.jsx("div",{className:He("flex h-9 w-9 items-center justify-center rounded-full font-semibold",h.initials),children:e.initials||((p=e.name)==null?void 0:p.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase())||"EV"}),c.jsxs("div",{className:"hidden sm:block",children:[c.jsx("p",{className:He("font-medium",h.title),children:e.name}),c.jsx("p",{className:He("text-xs",h.subtitle),children:e.subtitle})]})]}):null]})]})},av={light:{shell:"bg-evc-blue-600 text-white ring-evc-blue-500/60 shadow-sm",hover:"hover:bg-evc-blue-500",image:"h-6 w-auto"},dark:{shell:"bg-white/10 text-white ring-white/20 shadow-lg",hover:"hover:bg-white/20",image:"h-6 w-auto drop-shadow-[0_2px_6px_rgba(15,23,42,0.45)]"}},Md=({to:t="/",className:e="",tone:n="light"})=>{const s=av[n]??av.light;return c.jsxs(ma,{to:t,className:He("inline-flex items-center gap-2 transition",e),"aria-label":"Ga naar de EVC GO homepage",children:[c.jsx("span",{className:He("inline-flex items-center justify-center rounded-2xl px-3 py-2 ring-1 ring-inset",s.shell,s.hover),children:c.jsx("img",{src:g1,alt:"EVC GO",className:s.image})}),c.jsx("span",{className:"sr-only",children:"EVC GO"})]})},ej="http://localhost:5000";function tj(){const t=localStorage.getItem("token");return t?{Authorization:"Bearer "+t}:{}}async function Vd(t,e={}){const{method:n="GET",headers:s={},body:i,isForm:r=!1}=e,a={method:n,headers:{...s,...tj()}};i!==void 0&&(r?a.body=i:(a.headers["Content-Type"]="application/json",a.body=typeof i=="string"?i:JSON.stringify(i)));const l=await fetch(`${ej}${t}`,a);let u;if((l.headers.get("content-type")||"").includes("application/json"))try{u=await l.json()}catch{u=null}else u=await l.text().catch(()=>null);if(!l.ok){const h=new Error(u&&u.error||l.statusText||"Request failed");throw h.status=l.status,h.data=u,h}return u}const Is=(t,e)=>Vd(t,{method:"GET",headers:e}),Qo=(t,e,n)=>Vd(t,{method:"POST",body:e,headers:n}),y1=(t,e,n)=>Vd(t,{method:"PUT",body:e,headers:n}),nj=(t,e,n)=>Vd(t,{method:"POST",body:e,headers:n,isForm:!0}),sj=()=>{};var lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ij=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|a&63)}}return e.join("")},v1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=r>>2,m=(r&3)<<4|l>>4;let p=(l&15)<<2|d>>6,y=d&63;u||(y=64,a||(p=64)),s.push(n[h],n[m],n[p],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ij(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||l==null||d==null||m==null)throw new rj;const p=r<<2|l>>4;if(s.push(p),d!==64){const y=l<<4&240|d>>2;if(s.push(y),m!==64){const N=d<<6&192|m;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aj=function(t){const e=b1(t);return v1.encodeByteArray(e,!0)},Gu=function(t){return aj(t).replace(/\./g,"")},x1=function(t){try{return v1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=()=>lj().__FIREBASE_DEFAULTS__,cj=()=>{if(typeof process>"u"||typeof lv>"u")return;const t=lv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x1(t[1]);return e&&JSON.parse(e)},Ld=()=>{try{return sj()||oj()||cj()||uj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_1=t=>{var e,n;return(n=(e=Ld())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},E1=t=>{const e=_1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},w1=()=>{var t;return(t=Ld())==null?void 0:t.config},T1=t=>{var e;return(e=Ld())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gu(JSON.stringify(n)),Gu(JSON.stringify(a)),""].join(".")}const Jl={};function hj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?t.emulator.push(e):t.prod.push(e);return t}function fj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ov=!1;function gg(t,e){if(typeof window>"u"||typeof document>"u"||!Bi(window.location.host)||Jl[t]===e||Jl[t]||ov)return;Jl[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",r=hj().prod.length>0;function a(){const p=document.getElementById(s);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{ov=!0,a()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=fj(s),y=n("text"),N=document.getElementById(y)||document.createElement("span"),I=n("learnmore"),k=document.getElementById(I)||document.createElement("a"),T=n("preprendIcon"),x=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;l(_),h(k,I);const j=d();u(x,T),_.append(x,N,k,j),document.body.appendChild(_)}r?(N.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function pj(){var e;const t=(e=Ld())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vj(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xj(){return!pj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _j(){try{return typeof indexedDB=="object"}catch{return!1}}function Ej(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="FirebaseError";class as extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=wj,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],a=r?Tj(r,s):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new as(i,l,s)}}function Tj(t,e){return t.replace(Aj,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const Aj=/\{\$([^}]+)}/g;function Sj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],a=e[i];if(cv(r)&&cv(a)){if(!vr(r,a))return!1}else if(r!==a)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function cv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function kl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function Dl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Nj(t,e){const n=new Cj(t,e);return n.subscribe.bind(n)}class Cj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Rj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=pf),i.error===void 0&&(i.error=pf),i.complete===void 0&&(i.complete=pf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class Ri{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new dj;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kj(e))try{this.getOrInitializeService({instanceIdentifier:nr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nr){return this.instances.has(e)}getOptions(e=nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&a.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:jj(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=nr){return this.component?this.component.multipleInstances?e:nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jj(t){return t===nr?void 0:t}function kj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ij(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const Oj={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Mj=_e.INFO,Vj={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Lj=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=Vj[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yg{constructor(e){this.name=e,this._logLevel=Mj,this._logHandler=Lj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Oj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Uj=(t,e)=>e.some(n=>t instanceof n);let uv,dv;function Pj(){return uv||(uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zj(){return dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S1=new WeakMap,Om=new WeakMap,N1=new WeakMap,gf=new WeakMap,bg=new WeakMap;function Bj(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(xi(t.result)),i()},a=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&S1.set(n,t)}).catch(()=>{}),bg.set(e,t),e}function qj(t){if(Om.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),i()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Om.set(t,e)}let Mm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Om.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Fj(t){Mm=t(Mm)}function Hj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(yf(this),e,...n);return N1.set(s,e.sort?e.sort():[e]),xi(s)}:zj().includes(t)?function(...e){return t.apply(yf(this),e),xi(S1.get(this))}:function(...e){return xi(t.apply(yf(this),e))}}function Gj(t){return typeof t=="function"?Hj(t):(t instanceof IDBTransaction&&qj(t),Uj(t,Pj())?new Proxy(t,Mm):t)}function xi(t){if(t instanceof IDBRequest)return Bj(t);if(gf.has(t))return gf.get(t);const e=Gj(t);return e!==t&&(gf.set(t,e),bg.set(e,t)),e}const yf=t=>bg.get(t);function Kj(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const a=indexedDB.open(t,e),l=xi(a);return s&&a.addEventListener("upgradeneeded",u=>{s(xi(a.result),u.oldVersion,u.newVersion,xi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Qj=["get","getKey","getAll","getAllKeys","count"],$j=["put","add","delete","clear"],bf=new Map;function hv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bf.get(e))return bf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=$j.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Qj.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return bf.set(e,r),r}Fj(t=>({...t,get:(e,n,s)=>hv(e,n)||t.get(e,n,s),has:(e,n)=>!!hv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xj(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Xj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vm="@firebase/app",fv="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new yg("@firebase/app"),Wj="@firebase/app-compat",Jj="@firebase/analytics-compat",Zj="@firebase/analytics",e4="@firebase/app-check-compat",t4="@firebase/app-check",n4="@firebase/auth",s4="@firebase/auth-compat",i4="@firebase/database",r4="@firebase/data-connect",a4="@firebase/database-compat",l4="@firebase/functions",o4="@firebase/functions-compat",c4="@firebase/installations",u4="@firebase/installations-compat",d4="@firebase/messaging",h4="@firebase/messaging-compat",f4="@firebase/performance",m4="@firebase/performance-compat",p4="@firebase/remote-config",g4="@firebase/remote-config-compat",y4="@firebase/storage",b4="@firebase/storage-compat",v4="@firebase/firestore",x4="@firebase/ai",_4="@firebase/firestore-compat",E4="firebase",w4="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="[DEFAULT]",T4={[Vm]:"fire-core",[Wj]:"fire-core-compat",[Zj]:"fire-analytics",[Jj]:"fire-analytics-compat",[t4]:"fire-app-check",[e4]:"fire-app-check-compat",[n4]:"fire-auth",[s4]:"fire-auth-compat",[i4]:"fire-rtdb",[r4]:"fire-data-connect",[a4]:"fire-rtdb-compat",[l4]:"fire-fn",[o4]:"fire-fn-compat",[c4]:"fire-iid",[u4]:"fire-iid-compat",[d4]:"fire-fcm",[h4]:"fire-fcm-compat",[f4]:"fire-perf",[m4]:"fire-perf-compat",[p4]:"fire-rc",[g4]:"fire-rc-compat",[y4]:"fire-gcs",[b4]:"fire-gcs-compat",[v4]:"fire-fst",[_4]:"fire-fst-compat",[x4]:"fire-vertex","fire-js":"fire-js",[E4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Map,A4=new Map,Um=new Map;function mv(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){const e=t.name;if(Um.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Um.set(e,t);for(const n of Ku.values())mv(n,t);for(const n of A4.values())mv(n,t);return!0}function Ud(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new $o("app","Firebase",S4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=w4;function C1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Lm,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw _i.create("bad-app-name",{appName:String(i)});if(n||(n=w1()),!n)throw _i.create("no-options");const r=Ku.get(i);if(r){if(vr(n,r.options)&&vr(s,r.config))return r;throw _i.create("duplicate-app",{appName:i})}const a=new Dj(i);for(const u of Um.values())a.addComponent(u);const l=new N4(n,s,a);return Ku.set(i,l),l}function vg(t=Lm){const e=Ku.get(t);if(!e&&t===Lm&&w1())return C1();if(!e)throw _i.create("no-app",{appName:t});return e}function Kn(t,e,n){let s=T4[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(a.join(" "));return}xr(new Ri(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="firebase-heartbeat-database",R4=1,wo="firebase-heartbeat-store";let vf=null;function R1(){return vf||(vf=Kj(C4,R4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wo)}catch(n){console.warn(n)}}}}).catch(t=>{throw _i.create("idb-open",{originalErrorMessage:t.message})})),vf}async function I4(t){try{const n=(await R1()).transaction(wo),s=await n.objectStore(wo).get(I1(t));return await n.done,s}catch(e){if(e instanceof as)js.warn(e.message);else{const n=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function pv(t,e){try{const s=(await R1()).transaction(wo,"readwrite");await s.objectStore(wo).put(e,I1(t)),await s.done}catch(n){if(n instanceof as)js.warn(n.message);else{const s=_i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(s.message)}}}function I1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=1024,k4=30;class D4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M4(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>k4){const a=V4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){js.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gv(),{heartbeatsToSend:s,unsentEntries:i}=O4(this._heartbeatsCache.heartbeats),r=Gu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return js.warn(n),""}}}function gv(){return new Date().toISOString().substring(0,10)}function O4(t,e=j4){const n=[];let s=t.slice();for(const i of t){const r=n.find(a=>a.agent===i.agent);if(r){if(r.dates.push(i.date),yv(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class M4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _j()?Ej().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yv(t){return Gu(JSON.stringify({version:2,heartbeats:t})).length}function V4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t){xr(new Ri("platform-logger",e=>new Yj(e),"PRIVATE")),xr(new Ri("heartbeat",e=>new D4(e),"PRIVATE")),Kn(Vm,fv,t),Kn(Vm,fv,"esm2020"),Kn("fire-js","")}L4("");var U4="firebase",P4="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(U4,P4,"app");function j1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z4=j1,k1=new $o("auth","Firebase",j1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new yg("@firebase/auth");function B4(t,...e){Qu.logLevel<=_e.WARN&&Qu.warn(`Auth (${Ir}): ${t}`,...e)}function nu(t,...e){Qu.logLevel<=_e.ERROR&&Qu.error(`Auth (${Ir}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw xg(t,...e)}function Qn(t,...e){return xg(t,...e)}function D1(t,e,n){const s={...z4(),[e]:n};return new $o("auth","Firebase",s).create(e,{appName:t.name})}function Ei(t){return D1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return k1.create(t,...e)}function ie(t,e,...n){if(!t)throw xg(e,...n)}function vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nu(e),new Error(e)}function ks(t,e){t||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function q4(){return bv()==="http:"||bv()==="https:"}function bv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q4()||yj()||"connection"in navigator)?navigator.onLine:!0}function H4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.shortDelay=e,this.longDelay=n,ks(n>e,"Short delay should be less than long delay!"),this.isMobile=mj()||bj()}get(){return F4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e){ks(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Q4=new Xo(3e4,6e4);function jr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qi(t,e,n,s,i={}){return M1(t,i,async()=>{let r={},a={};s&&(e==="GET"?a=s:r={body:JSON.stringify(s)});const l=Yo({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...r};return gj()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(d.credentials="include"),O1.fetch()(await V1(t,t.config.apiHost,n,l),d)})}async function M1(t,e,n){t._canInitEmulator=!1;const s={...G4,...e};try{const i=new Y4(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Dc(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dc(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Dc(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Dc(t,"user-disabled",a);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw D1(t,h,d);On(t,h)}}catch(i){if(i instanceof as)throw i;On(t,"network-request-failed",{message:String(i)})}}async function Pd(t,e,n,s,i={}){const r=await qi(t,e,n,s,i);return"mfaPendingCredential"in r&&On(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function V1(t,e,n,s){const i=`${e}${n}?${s}`,r=t,a=r.config.emulator?_g(t.config,i):`${t.config.apiScheme}://${i}`;return K4.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function $4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Qn(this.auth,"network-request-failed")),Q4.get())})}}function Dc(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Qn(t,e,s);return i.customData._tokenResponse=n,i}function vv(t){return t!==void 0&&t.enterprise!==void 0}class X4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function W4(t,e){return qi(t,"GET","/v2/recaptchaConfig",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4(t,e){return qi(t,"POST","/v1/accounts:delete",e)}async function $u(t,e){return qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Z4(t,e=!1){const n=Xe(t),s=await n.getIdToken(e),i=Eg(s);ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Zl(xf(i.auth_time)),issuedAtTime:Zl(xf(i.iat)),expirationTime:Zl(xf(i.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function xf(t){return Number(t)*1e3}function Eg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return nu("JWT malformed, contained fewer than 3 sections"),null;try{const i=x1(n);return i?JSON.parse(i):(nu("Failed to decode base64 JWT payload"),null)}catch(i){return nu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xv(t){const e=Eg(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof as&&ek(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function ek({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(t){var m;const e=t.auth,n=await t.getIdToken(),s=await To(t,$u(e,{idToken:n}));ie(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const r=(m=i.providerUserInfo)!=null&&m.length?L1(i.providerUserInfo):[],a=sk(t.providerData,r),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new zm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function nk(t){const e=Xe(t);await Yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sk(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function L1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){const n=await M1(t,{},async()=>{const s=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,a=await V1(t,i,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:s};return t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(u.credentials="include"),O1.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rk(t,e){return qi(t,"POST","/v2/accounts:revokeToken",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=xv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await ik(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,a=new ga;return s&&(ie(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),i&&(ie(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),r&&(ie(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ga,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kn{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new tk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await To(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Z4(this,e)}reload(){return nk(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Yu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await To(this,J4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:y,providerData:N,stsTokenManager:I}=n;ie(m&&I,e,"internal-error");const k=ga.fromJSON(this.name,I);ie(typeof m=="string",e,"internal-error"),Gs(s,e.name),Gs(i,e.name),ie(typeof p=="boolean",e,"internal-error"),ie(typeof y=="boolean",e,"internal-error"),Gs(r,e.name),Gs(a,e.name),Gs(l,e.name),Gs(u,e.name),Gs(d,e.name),Gs(h,e.name);const T=new kn({uid:m,auth:e,email:i,emailVerified:p,displayName:s,isAnonymous:y,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:k,createdAt:d,lastLoginAt:h});return N&&Array.isArray(N)&&(T.providerData=N.map(x=>({...x}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,s=!1){const i=new ga;i.updateFromServerResponse(n);const r=new kn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Yu(r),r}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];ie(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?L1(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),l=new ga;l.updateFromIdToken(s);const u=new kn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new zm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;function xs(t){ks(t instanceof Function,"Expected a class definition");let e=_v.get(t);return e?(ks(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_v.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}U1.type="NONE";const Ev=U1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e,n){return`firebase:${t}:${e}:${n}`}class ya{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=su(this.userKey,i.apiKey,r),this.fullPersistenceKey=su("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $u(this.auth,{idToken:e}).catch(()=>{});return n?kn._fromGetAccountInfoResponse(this.auth,n,e):null}return kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ya(xs(Ev),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=i[0]||xs(Ev);const a=su(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let m;if(typeof h=="string"){const p=await $u(e,{idToken:h}).catch(()=>{});if(!p)break;m=await kn._fromGetAccountInfoResponse(e,p,h)}else m=kn._fromJSON(e,h);d!==r&&(l=m),r=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new ya(r,e,s):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==r)try{await d._remove(a)}catch{}})),new ya(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H1(e))return"Blackberry";if(G1(e))return"Webos";if(z1(e))return"Safari";if((e.includes("chrome/")||B1(e))&&!e.includes("edge/"))return"Chrome";if(F1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function P1(t=Pt()){return/firefox\//i.test(t)}function z1(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B1(t=Pt()){return/crios\//i.test(t)}function q1(t=Pt()){return/iemobile/i.test(t)}function F1(t=Pt()){return/android/i.test(t)}function H1(t=Pt()){return/blackberry/i.test(t)}function G1(t=Pt()){return/webos/i.test(t)}function wg(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ak(t=Pt()){var e;return wg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lk(){return vj()&&document.documentMode===10}function K1(t=Pt()){return wg(t)||F1(t)||G1(t)||H1(t)||/windows phone/i.test(t)||q1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e=[]){let n;switch(t){case"Browser":n=wv(Pt());break;case"Worker":n=`${wv(Pt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ir}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e={}){return qi(t,"GET","/v2/passwordPolicy",jr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=6;class dk{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??uk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tv(this),this.idTokenSubscription=new Tv(this),this.beforeStateQueue=new ok(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xs(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $u(this,{idToken:e}),s=await kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(wn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Ei(this));const n=e?Xe(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ck(this),n=new dk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await rk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xs(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[xs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&B4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xa(t){return Xe(t)}class Tv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nj(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fk(t){zd=t}function $1(t){return zd.loadJS(t)}function mk(){return zd.recaptchaEnterpriseScript}function pk(){return zd.gapiScript}function gk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yk{constructor(){this.enterprise=new bk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vk="recaptcha-enterprise",Y1="NO_RECAPTCHA";class xk{constructor(e){this.type=vk,this.auth=Xa(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{W4(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new X4(u);return r.tenantId==null?r._agentRecaptchaConfig=d:r._tenantRecaptchaConfigs[r.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function i(r,a,l){const u=window.grecaptcha;vv(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(d=>{a(d)}).catch(()=>{a(Y1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yk().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{s(this.auth).then(l=>{if(!n&&vv(window.grecaptcha))i(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mk();u.length!==0&&(u+=l),$1(u).then(()=>{i(l,r,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function Av(t,e,n,s=!1,i=!1){const r=new xk(t);let a;if(i)a=Y1;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Sv(t,e,n,s,i){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Av(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Av(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t,e){const n=Ud(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(vr(r,e??{}))return i;On(i,"already-initialized")}return n.initialize({options:e})}function Ek(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(xs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function X1(t,e,n){const s=Xa(t);ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=W1(e),{host:a,port:l}=wk(e),u=l===null?"":`:${l}`,d={url:`${r}//${a}${u}/`},h=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ie(vr(d,s.config.emulator)&&vr(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Bi(a)?(pg(`${r}//${a}${u}`),gg("Auth",!0)):Tk()}function W1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wk(t){const e=W1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Nv(s.substr(r.length+1))}}else{const[r,a]=s.split(":");return{host:r,port:Nv(a)}}}function Nv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Tk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,n){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function Ak(t,e){return qi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(t,e){return Pd(t,"POST","/v1/accounts:signInWithPassword",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,e))}async function Ck(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Tg{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ao(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ao(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sv(e,n,"signInWithPassword",Sk);case"emailLink":return Nk(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sv(e,s,"signUpPassword",Ak);case"emailLink":return Ck(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e){return Pd(t,"POST","/v1/accounts:signInWithIdp",jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="http://localhost";class _r extends Tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const a=new _r(s,i);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ba(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ba(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ba(e,n)}buildRequest(){const e={requestUri:Rk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jk(t){const e=kl(Dl(t)).link,n=e?kl(Dl(e)).deep_link_id:null,s=kl(Dl(t)).deep_link_id;return(s?kl(Dl(s)).link:null)||s||n||e||t}class Ag{constructor(e){const n=kl(Dl(e)),s=n.apiKey??null,i=n.oobCode??null,r=Ik(n.mode??null);ie(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=jk(e);try{return new Ag(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,n){return Ao._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ag.parseLink(n);return ie(s,"argument-error"),Ao._fromEmailAndCode(e,s.code,s.tenantId)}}Wa.PROVIDER_ID="password";Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends J1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Wo{constructor(){super("facebook.com")}static credential(e){return _r._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.FACEBOOK_SIGN_IN_METHOD="facebook.com";Js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Wo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _r._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Zs.credential(n,s)}catch{return null}}}Zs.GOOGLE_SIGN_IN_METHOD="google.com";Zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Wo{constructor(){super("github.com")}static credential(e){return _r._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com";ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Wo{constructor(){super("twitter.com")}static credential(e,n){return _r._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ti.credential(n,s)}catch{return null}}}ti.TWITTER_SIGN_IN_METHOD="twitter.com";ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await kn._fromIdTokenResponse(e,s,i),a=Cv(s);return new ka({user:r,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Cv(s);return new ka({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Cv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends as{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Xu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Xu(e,n,s,i)}}function Z1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Xu._fromErrorAndOperation(t,r,e,s):r})}async function kk(t,e,n=!1){const s=await To(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ka._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(t,e,n=!1){const{auth:s}=t;if(wn(s.app))return Promise.reject(Ei(s));const i="reauthenticate";try{const r=await To(t,Z1(s,i,e,t),n);ie(r.idToken,s,"internal-error");const a=Eg(r.idToken);ie(a,s,"internal-error");const{sub:l}=a;return ie(t.uid===l,s,"user-mismatch"),ka._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&On(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(t,e,n=!1){if(wn(t.app))return Promise.reject(Ei(t));const s="signIn",i=await Z1(t,s,e),r=await ka._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function Ok(t,e){return eT(Xa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t){const e=Xa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Vk(t,e,n){return wn(t.app)?Promise.reject(Ei(t)):Ok(Xe(t),Wa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Mk(t),s})}function Lk(t,e,n,s){return Xe(t).onIdTokenChanged(e,n,s)}function Uk(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}function Sg(t,e,n,s){return Xe(t).onAuthStateChanged(e,n,s)}function tT(t){return Xe(t).signOut()}const Wu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wu,"1"),this.storage.removeItem(Wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=1e3,zk=10;class sT extends nT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},r=this.storage.getItem(s);lk()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zk):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sT.type="LOCAL";const Bk=sT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends nT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iT.type="SESSION";const rT=iT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new Bd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(a).map(async d=>d(n.origin,r)),u=await qk(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const d=Ng("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);a={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(p.data.response);break;default:clearTimeout(h),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return window}function Hk(t){$n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}async function Gk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Qk(){return aT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebaseLocalStorageDb",$k=1,Ju="firebaseLocalStorage",oT="fbase_key";class Jo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qd(t,e){return t.transaction([Ju],e?"readwrite":"readonly").objectStore(Ju)}function Yk(){const t=indexedDB.deleteDatabase(lT);return new Jo(t).toPromise()}function Bm(){const t=indexedDB.open(lT,$k);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ju,{keyPath:oT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ju)?e(s):(s.close(),await Yk(),e(await Bm()))})})}async function Rv(t,e,n){const s=qd(t,!0).put({[oT]:e,value:n});return new Jo(s).toPromise()}async function Xk(t,e){const n=qd(t,!1).get(e),s=await new Jo(n).toPromise();return s===void 0?null:s.value}function Iv(t,e){const n=qd(t,!0).delete(e);return new Jo(n).toPromise()}const Wk=800,Jk=3;class cT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Jk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bd._getInstance(Qk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await Gk(),!this.activeServiceWorker)return;this.sender=new Fk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bm();return await Rv(e,Wu,"1"),await Iv(e,Wu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Rv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Xk(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=qd(i,!1).getAll();return new Jo(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cT.type="LOCAL";const Zk=cT;new Xo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e){return e?xs(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends Tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tD(t){return eT(t.auth,new Cg(t),t.bypassAuthState)}function nD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),Dk(n,new Cg(t),t.bypassAuthState)}async function sD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),kk(n,new Cg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tD;case"linkViaPopup":case"linkViaRedirect":return sD;case"reauthViaPopup":case"reauthViaRedirect":return nD;default:On(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new Xo(2e3,1e4);class aa extends uT{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,aa.currentPopupAction&&aa.currentPopupAction.cancel(),aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=Ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iD.get())};e()}}aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="pendingRedirect",iu=new Map;class aD extends uT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=iu.get(this.auth._key());if(!e){try{const s=await lD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}iu.set(this.auth._key(),e)}return this.bypassAuthState||iu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lD(t,e){const n=uD(e),s=cD(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function oD(t,e){iu.set(t._key(),e)}function cD(t){return xs(t._redirectPersistence)}function uD(t){return su(rD,t.config.apiKey,t.name)}async function dD(t,e,n=!1){if(wn(t.app))return Promise.reject(Ei(t));const s=Xa(t),i=eD(s,e),a=await new aD(s,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=10*60*1e3;class fD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!dT(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hD&&this.cachedEventUids.clear(),this.cachedEventUids.has(jv(e))}saveEventToCache(e){this.cachedEventUids.add(jv(e)),this.lastProcessedEventTime=Date.now()}}function jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t,e={}){return qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yD=/^https?/;async function bD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pD(t);for(const n of e)try{if(vD(n))return}catch{}On(t,"unauthorized-domain")}function vD(t){const e=Pm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!yD.test(n))return!1;if(gD.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new Xo(3e4,6e4);function kv(){const t=$n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _D(t){return new Promise((e,n)=>{var i,r,a;function s(){kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kv(),n(Qn(t,"network-request-failed"))},timeout:xD.get()})}if((r=(i=$n().gapi)==null?void 0:i.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((a=$n().gapi)!=null&&a.load)s();else{const l=gk("iframefcb");return $n()[l]=()=>{gapi.load?s():n(Qn(t,"network-request-failed"))},$1(`${pk()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ru=null,e})}let ru=null;function ED(t){return ru=ru||_D(t),ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new Xo(5e3,15e3),TD="__/auth/iframe",AD="emulator/auth/iframe",SD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ND=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CD(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_g(e,AD):`https://${t.config.authDomain}/${TD}`,s={apiKey:e.apiKey,appName:t.name,v:Ir},i=ND.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Yo(s).slice(1)}`}async function RD(t){const e=await ED(t),n=$n().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:CD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SD,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const a=Qn(t,"network-request-failed"),l=$n().setTimeout(()=>{r(a)},wD.get());function u(){$n().clearTimeout(l),i(s)}s.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jD=500,kD=600,DD="_blank",OD="http://localhost";class Dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MD(t,e,n,s=jD,i=kD){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u={...ID,width:s.toString(),height:i.toString(),top:r,left:a},d=Pt().toLowerCase();n&&(l=B1(d)?DD:n),P1(d)&&(e=e||OD,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[y,N])=>`${p}${y}=${N},`,"");if(ak(d)&&l!=="_self")return VD(e||"",l),new Dv(null);const m=window.open(e||"",l,h);ie(m,t,"popup-blocked");try{m.focus()}catch{}return new Dv(m)}function VD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="__/auth/handler",UD="emulator/auth/handler",PD=encodeURIComponent("fac");async function Ov(t,e,n,s,i,r){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ir,eventId:i};if(e instanceof J1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Sj(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof Wo){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${PD}=${encodeURIComponent(u)}`:"";return`${zD(t)}?${Yo(l).slice(1)}${d}`}function zD({config:t}){return t.emulator?_g(t,UD):`https://${t.authDomain}/${LD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class BD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rT,this._completeRedirectFn=dD,this._overrideRedirectResult=oD}async _openPopup(e,n,s,i){var a;ks((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await Ov(e,n,s,Pm(),i);return MD(e,r,Ng())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await Ov(e,n,s,Pm(),i);return Hk(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ks(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await RD(e),s=new fD(e);return n.register("authEvent",i=>(ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_f,{type:_f},i=>{var a;const r=(a=i==null?void 0:i[0])==null?void 0:a[_f];r!==void 0&&n(!!r),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return K1()||z1()||wg()}}const qD=BD;var Mv="@firebase/auth",Vv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GD(t){xr(new Ri("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;ie(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q1(t)},d=new hk(s,i,r,u);return Ek(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),xr(new Ri("auth-internal",e=>{const n=Xa(e.getProvider("auth").getImmediate());return(s=>new FD(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(Mv,Vv,HD(t)),Kn(Mv,Vv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=5*60,QD=T1("authIdTokenMaxAge")||KD;let Lv=null;const $D=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>QD)return;const i=n==null?void 0:n.token;Lv!==i&&(Lv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function YD(t=vg()){const e=Ud(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_k(t,{popupRedirectResolver:qD,persistence:[Zk,Bk,rT]}),s=T1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const a=$D(r.toString());Uk(n,a,()=>a(n.currentUser)),Lk(n,l=>a(l))}}const i=_1("auth");return i&&X1(n,`http://${i}`),n}function XD(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}fk({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=Qn("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",XD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GD("Browser");var Uv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,hT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,b){function v(){}v.prototype=b.prototype,w.F=b.prototype,w.prototype=new v,w.prototype.constructor=w,w.D=function(S,C,D){for(var R=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)R[pe-2]=arguments[pe];return b.prototype[C].apply(S,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,b,v){v||(v=0);const S=Array(16);if(typeof b=="string")for(var C=0;C<16;++C)S[C]=b.charCodeAt(v++)|b.charCodeAt(v++)<<8|b.charCodeAt(v++)<<16|b.charCodeAt(v++)<<24;else for(C=0;C<16;++C)S[C]=b[v++]|b[v++]<<8|b[v++]<<16|b[v++]<<24;b=w.g[0],v=w.g[1],C=w.g[2];let D=w.g[3],R;R=b+(D^v&(C^D))+S[0]+3614090360&4294967295,b=v+(R<<7&4294967295|R>>>25),R=D+(C^b&(v^C))+S[1]+3905402710&4294967295,D=b+(R<<12&4294967295|R>>>20),R=C+(v^D&(b^v))+S[2]+606105819&4294967295,C=D+(R<<17&4294967295|R>>>15),R=v+(b^C&(D^b))+S[3]+3250441966&4294967295,v=C+(R<<22&4294967295|R>>>10),R=b+(D^v&(C^D))+S[4]+4118548399&4294967295,b=v+(R<<7&4294967295|R>>>25),R=D+(C^b&(v^C))+S[5]+1200080426&4294967295,D=b+(R<<12&4294967295|R>>>20),R=C+(v^D&(b^v))+S[6]+2821735955&4294967295,C=D+(R<<17&4294967295|R>>>15),R=v+(b^C&(D^b))+S[7]+4249261313&4294967295,v=C+(R<<22&4294967295|R>>>10),R=b+(D^v&(C^D))+S[8]+1770035416&4294967295,b=v+(R<<7&4294967295|R>>>25),R=D+(C^b&(v^C))+S[9]+2336552879&4294967295,D=b+(R<<12&4294967295|R>>>20),R=C+(v^D&(b^v))+S[10]+4294925233&4294967295,C=D+(R<<17&4294967295|R>>>15),R=v+(b^C&(D^b))+S[11]+2304563134&4294967295,v=C+(R<<22&4294967295|R>>>10),R=b+(D^v&(C^D))+S[12]+1804603682&4294967295,b=v+(R<<7&4294967295|R>>>25),R=D+(C^b&(v^C))+S[13]+4254626195&4294967295,D=b+(R<<12&4294967295|R>>>20),R=C+(v^D&(b^v))+S[14]+2792965006&4294967295,C=D+(R<<17&4294967295|R>>>15),R=v+(b^C&(D^b))+S[15]+1236535329&4294967295,v=C+(R<<22&4294967295|R>>>10),R=b+(C^D&(v^C))+S[1]+4129170786&4294967295,b=v+(R<<5&4294967295|R>>>27),R=D+(v^C&(b^v))+S[6]+3225465664&4294967295,D=b+(R<<9&4294967295|R>>>23),R=C+(b^v&(D^b))+S[11]+643717713&4294967295,C=D+(R<<14&4294967295|R>>>18),R=v+(D^b&(C^D))+S[0]+3921069994&4294967295,v=C+(R<<20&4294967295|R>>>12),R=b+(C^D&(v^C))+S[5]+3593408605&4294967295,b=v+(R<<5&4294967295|R>>>27),R=D+(v^C&(b^v))+S[10]+38016083&4294967295,D=b+(R<<9&4294967295|R>>>23),R=C+(b^v&(D^b))+S[15]+3634488961&4294967295,C=D+(R<<14&4294967295|R>>>18),R=v+(D^b&(C^D))+S[4]+3889429448&4294967295,v=C+(R<<20&4294967295|R>>>12),R=b+(C^D&(v^C))+S[9]+568446438&4294967295,b=v+(R<<5&4294967295|R>>>27),R=D+(v^C&(b^v))+S[14]+3275163606&4294967295,D=b+(R<<9&4294967295|R>>>23),R=C+(b^v&(D^b))+S[3]+4107603335&4294967295,C=D+(R<<14&4294967295|R>>>18),R=v+(D^b&(C^D))+S[8]+1163531501&4294967295,v=C+(R<<20&4294967295|R>>>12),R=b+(C^D&(v^C))+S[13]+2850285829&4294967295,b=v+(R<<5&4294967295|R>>>27),R=D+(v^C&(b^v))+S[2]+4243563512&4294967295,D=b+(R<<9&4294967295|R>>>23),R=C+(b^v&(D^b))+S[7]+1735328473&4294967295,C=D+(R<<14&4294967295|R>>>18),R=v+(D^b&(C^D))+S[12]+2368359562&4294967295,v=C+(R<<20&4294967295|R>>>12),R=b+(v^C^D)+S[5]+4294588738&4294967295,b=v+(R<<4&4294967295|R>>>28),R=D+(b^v^C)+S[8]+2272392833&4294967295,D=b+(R<<11&4294967295|R>>>21),R=C+(D^b^v)+S[11]+1839030562&4294967295,C=D+(R<<16&4294967295|R>>>16),R=v+(C^D^b)+S[14]+4259657740&4294967295,v=C+(R<<23&4294967295|R>>>9),R=b+(v^C^D)+S[1]+2763975236&4294967295,b=v+(R<<4&4294967295|R>>>28),R=D+(b^v^C)+S[4]+1272893353&4294967295,D=b+(R<<11&4294967295|R>>>21),R=C+(D^b^v)+S[7]+4139469664&4294967295,C=D+(R<<16&4294967295|R>>>16),R=v+(C^D^b)+S[10]+3200236656&4294967295,v=C+(R<<23&4294967295|R>>>9),R=b+(v^C^D)+S[13]+681279174&4294967295,b=v+(R<<4&4294967295|R>>>28),R=D+(b^v^C)+S[0]+3936430074&4294967295,D=b+(R<<11&4294967295|R>>>21),R=C+(D^b^v)+S[3]+3572445317&4294967295,C=D+(R<<16&4294967295|R>>>16),R=v+(C^D^b)+S[6]+76029189&4294967295,v=C+(R<<23&4294967295|R>>>9),R=b+(v^C^D)+S[9]+3654602809&4294967295,b=v+(R<<4&4294967295|R>>>28),R=D+(b^v^C)+S[12]+3873151461&4294967295,D=b+(R<<11&4294967295|R>>>21),R=C+(D^b^v)+S[15]+530742520&4294967295,C=D+(R<<16&4294967295|R>>>16),R=v+(C^D^b)+S[2]+3299628645&4294967295,v=C+(R<<23&4294967295|R>>>9),R=b+(C^(v|~D))+S[0]+4096336452&4294967295,b=v+(R<<6&4294967295|R>>>26),R=D+(v^(b|~C))+S[7]+1126891415&4294967295,D=b+(R<<10&4294967295|R>>>22),R=C+(b^(D|~v))+S[14]+2878612391&4294967295,C=D+(R<<15&4294967295|R>>>17),R=v+(D^(C|~b))+S[5]+4237533241&4294967295,v=C+(R<<21&4294967295|R>>>11),R=b+(C^(v|~D))+S[12]+1700485571&4294967295,b=v+(R<<6&4294967295|R>>>26),R=D+(v^(b|~C))+S[3]+2399980690&4294967295,D=b+(R<<10&4294967295|R>>>22),R=C+(b^(D|~v))+S[10]+4293915773&4294967295,C=D+(R<<15&4294967295|R>>>17),R=v+(D^(C|~b))+S[1]+2240044497&4294967295,v=C+(R<<21&4294967295|R>>>11),R=b+(C^(v|~D))+S[8]+1873313359&4294967295,b=v+(R<<6&4294967295|R>>>26),R=D+(v^(b|~C))+S[15]+4264355552&4294967295,D=b+(R<<10&4294967295|R>>>22),R=C+(b^(D|~v))+S[6]+2734768916&4294967295,C=D+(R<<15&4294967295|R>>>17),R=v+(D^(C|~b))+S[13]+1309151649&4294967295,v=C+(R<<21&4294967295|R>>>11),R=b+(C^(v|~D))+S[4]+4149444226&4294967295,b=v+(R<<6&4294967295|R>>>26),R=D+(v^(b|~C))+S[11]+3174756917&4294967295,D=b+(R<<10&4294967295|R>>>22),R=C+(b^(D|~v))+S[2]+718787259&4294967295,C=D+(R<<15&4294967295|R>>>17),R=v+(D^(C|~b))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+b&4294967295,w.g[1]=w.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,w.g[2]=w.g[2]+C&4294967295,w.g[3]=w.g[3]+D&4294967295}s.prototype.v=function(w,b){b===void 0&&(b=w.length);const v=b-this.blockSize,S=this.C;let C=this.h,D=0;for(;D<b;){if(C==0)for(;D<=v;)i(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<b;)if(S[C++]=w.charCodeAt(D++),C==this.blockSize){i(this,S),C=0;break}}else for(;D<b;)if(S[C++]=w[D++],C==this.blockSize){i(this,S),C=0;break}}this.h=C,this.o+=b},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var b=1;b<w.length-8;++b)w[b]=0;b=this.o*8;for(var v=w.length-8;v<w.length;++v)w[v]=b&255,b/=256;for(this.v(w),w=Array(16),b=0,v=0;v<4;++v)for(let S=0;S<32;S+=8)w[b++]=this.g[v]>>>S&255;return w};function r(w,b){var v=l;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=b(w)}function a(w,b){this.h=b;const v=[];let S=!0;for(let C=w.length-1;C>=0;C--){const D=w[C]|0;S&&D==b||(v[C]=D,S=!1)}this.g=v}var l={};function u(w){return-128<=w&&w<128?r(w,function(b){return new a([b|0],b<0?-1:0)}):new a([w|0],w<0?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return k(d(-w));const b=[];let v=1;for(let S=0;w>=v;S++)b[S]=w/v|0,v*=4294967296;return new a(b,0)}function h(w,b){if(w.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(w.charAt(0)=="-")return k(h(w.substring(1),b));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=d(Math.pow(b,8));let S=m;for(let D=0;D<w.length;D+=8){var C=Math.min(8,w.length-D);const R=parseInt(w.substring(D,D+C),b);C<8?(C=d(Math.pow(b,C)),S=S.j(C).add(d(R))):(S=S.j(v),S=S.add(d(R)))}return S}var m=u(0),p=u(1),y=u(16777216);t=a.prototype,t.m=function(){if(I(this))return-k(this).m();let w=0,b=1;for(let v=0;v<this.g.length;v++){const S=this.i(v);w+=(S>=0?S:4294967296+S)*b,b*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(I(this))return"-"+k(this).toString(w);const b=d(Math.pow(w,6));var v=this;let S="";for(;;){const C=j(v,b).g;v=T(v,C.j(b));let D=((v.g.length>0?v.g[0]:v.h)>>>0).toString(w);if(v=C,N(v))return D+S;for(;D.length<6;)D="0"+D;S=D+S}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(let b=0;b<w.g.length;b++)if(w.g[b]!=0)return!1;return!0}function I(w){return w.h==-1}t.l=function(w){return w=T(this,w),I(w)?-1:N(w)?0:1};function k(w){const b=w.g.length,v=[];for(let S=0;S<b;S++)v[S]=~w.g[S];return new a(v,~w.h).add(p)}t.abs=function(){return I(this)?k(this):this},t.add=function(w){const b=Math.max(this.g.length,w.g.length),v=[];let S=0;for(let C=0;C<=b;C++){let D=S+(this.i(C)&65535)+(w.i(C)&65535),R=(D>>>16)+(this.i(C)>>>16)+(w.i(C)>>>16);S=R>>>16,D&=65535,R&=65535,v[C]=R<<16|D}return new a(v,v[v.length-1]&-2147483648?-1:0)};function T(w,b){return w.add(k(b))}t.j=function(w){if(N(this)||N(w))return m;if(I(this))return I(w)?k(this).j(k(w)):k(k(this).j(w));if(I(w))return k(this.j(k(w)));if(this.l(y)<0&&w.l(y)<0)return d(this.m()*w.m());const b=this.g.length+w.g.length,v=[];for(var S=0;S<2*b;S++)v[S]=0;for(S=0;S<this.g.length;S++)for(let C=0;C<w.g.length;C++){const D=this.i(S)>>>16,R=this.i(S)&65535,pe=w.i(C)>>>16,Y=w.i(C)&65535;v[2*S+2*C]+=R*Y,x(v,2*S+2*C),v[2*S+2*C+1]+=D*Y,x(v,2*S+2*C+1),v[2*S+2*C+1]+=R*pe,x(v,2*S+2*C+1),v[2*S+2*C+2]+=D*pe,x(v,2*S+2*C+2)}for(w=0;w<b;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=b;w<2*b;w++)v[w]=0;return new a(v,0)};function x(w,b){for(;(w[b]&65535)!=w[b];)w[b+1]+=w[b]>>>16,w[b]&=65535,b++}function _(w,b){this.g=w,this.h=b}function j(w,b){if(N(b))throw Error("division by zero");if(N(w))return new _(m,m);if(I(w))return b=j(k(w),b),new _(k(b.g),k(b.h));if(I(b))return b=j(w,k(b)),new _(k(b.g),b.h);if(w.g.length>30){if(I(w)||I(b))throw Error("slowDivide_ only works with positive integers.");for(var v=p,S=b;S.l(w)<=0;)v=L(v),S=L(S);var C=z(v,1),D=z(S,1);for(S=z(S,2),v=z(v,2);!N(S);){var R=D.add(S);R.l(w)<=0&&(C=C.add(v),D=R),S=z(S,1),v=z(v,1)}return b=T(w,C.j(b)),new _(C,b)}for(C=m;w.l(b)>=0;){for(v=Math.max(1,Math.floor(w.m()/b.m())),S=Math.ceil(Math.log(v)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),D=d(v),R=D.j(b);I(R)||R.l(w)>0;)v-=S,D=d(v),R=D.j(b);N(D)&&(D=p),C=C.add(D),w=T(w,R)}return new _(C,w)}t.B=function(w){return j(this,w).h},t.and=function(w){const b=Math.max(this.g.length,w.g.length),v=[];for(let S=0;S<b;S++)v[S]=this.i(S)&w.i(S);return new a(v,this.h&w.h)},t.or=function(w){const b=Math.max(this.g.length,w.g.length),v=[];for(let S=0;S<b;S++)v[S]=this.i(S)|w.i(S);return new a(v,this.h|w.h)},t.xor=function(w){const b=Math.max(this.g.length,w.g.length),v=[];for(let S=0;S<b;S++)v[S]=this.i(S)^w.i(S);return new a(v,this.h^w.h)};function L(w){const b=w.g.length+1,v=[];for(let S=0;S<b;S++)v[S]=w.i(S)<<1|w.i(S-1)>>>31;return new a(v,w.h)}function z(w,b){const v=b>>5;b%=32;const S=w.g.length-v,C=[];for(let D=0;D<S;D++)C[D]=b>0?w.i(D+v)>>>b|w.i(D+v+1)<<32-b:w.i(D+v);return new a(C,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,hT=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,wi=a}).apply(typeof Uv<"u"?Uv:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fT,Ol,mT,au,qm,pT,gT,yT;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var f=0;f<o.length;++f){var g=o[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function i(o,f){if(f)e:{var g=s;o=o.split(".");for(var E=0;E<o.length-1;E++){var V=o[E];if(!(V in g))break e;g=g[V]}o=o[o.length-1],E=g[o],f=f(E),f!=E&&f!=null&&e(g,o,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(f){var g=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&g.push([E,f[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},a=this||self;function l(o){var f=typeof o;return f=="object"&&o!=null||f=="function"}function u(o,f,g){return o.call.apply(o.bind,arguments)}function d(o,f,g){return d=u,d.apply(null,arguments)}function h(o,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),o.apply(this,E)}}function m(o,f){function g(){}g.prototype=f.prototype,o.Z=f.prototype,o.prototype=new g,o.prototype.constructor=o,o.Ob=function(E,V,U){for(var $=Array(arguments.length-2),me=2;me<arguments.length;me++)$[me-2]=arguments[me];return f.prototype[V].apply(E,$)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function y(o){const f=o.length;if(f>0){const g=Array(f);for(let E=0;E<f;E++)g[E]=o[E];return g}return[]}function N(o,f){for(let E=1;E<arguments.length;E++){const V=arguments[E];var g=typeof V;if(g=g!="object"?g:V?Array.isArray(V)?"array":g:"null",g=="array"||g=="object"&&typeof V.length=="number"){g=o.length||0;const U=V.length||0;o.length=g+U;for(let $=0;$<U;$++)o[g+$]=V[$]}else o.push(V)}}class I{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(o){a.setTimeout(()=>{throw o},0)}function T(){var o=w;let f=null;return o.g&&(f=o.g,o.g=o.g.next,o.g||(o.h=null),f.next=null),f}class x{constructor(){this.h=this.g=null}add(f,g){const E=_.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var _=new I(()=>new j,o=>o.reset());class j{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,z=!1,w=new x,b=()=>{const o=Promise.resolve(void 0);L=()=>{o.then(v)}};function v(){for(var o;o=T();){try{o.h.call(o.g)}catch(g){k(g)}var f=_;f.j(o),f.h<100&&(f.h++,o.next=f.g,f.g=o)}z=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(o,f){this.type=o,this.g=this.target=f,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,f=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return o}();function R(o){return/^[\s\xa0]*$/.test(o)}function pe(o,f){C.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,f)}m(pe,C),pe.prototype.init=function(o,f){const g=this.type=o.type,E=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=f,f=o.relatedTarget,f||(g=="mouseover"?f=o.fromElement:g=="mouseout"&&(f=o.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),P=0;function M(o,f,g,E,V){this.listener=o,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=V,this.key=++P,this.da=this.fa=!1}function O(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function H(o,f,g){for(const E in o)f.call(g,o[E],E,o)}function Q(o,f){for(const g in o)f.call(void 0,o[g],g,o)}function ge(o){const f={};for(const g in o)f[g]=o[g];return f}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ue(o,f){let g,E;for(let V=1;V<arguments.length;V++){E=arguments[V];for(g in E)o[g]=E[g];for(let U=0;U<te.length;U++)g=te[U],Object.prototype.hasOwnProperty.call(E,g)&&(o[g]=E[g])}}function G(o){this.src=o,this.g={},this.h=0}G.prototype.add=function(o,f,g,E,V){const U=o.toString();o=this.g[U],o||(o=this.g[U]=[],this.h++);const $=se(o,f,E,V);return $>-1?(f=o[$],g||(f.fa=!1)):(f=new M(f,this.src,U,!!E,V),f.fa=g,o.push(f)),f};function W(o,f){const g=f.type;if(g in o.g){var E=o.g[g],V=Array.prototype.indexOf.call(E,f,void 0),U;(U=V>=0)&&Array.prototype.splice.call(E,V,1),U&&(O(f),o.g[g].length==0&&(delete o.g[g],o.h--))}}function se(o,f,g,E){for(let V=0;V<o.length;++V){const U=o[V];if(!U.da&&U.listener==f&&U.capture==!!g&&U.ha==E)return V}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),ye={};function Ae(o,f,g,E,V){if(Array.isArray(f)){for(let U=0;U<f.length;U++)Ae(o,f[U],g,E,V);return null}return g=be(g),o&&o[Y]?o.J(f,g,l(E)?!!E.capture:!1,V):tn(o,f,g,!1,E,V)}function tn(o,f,g,E,V,U){if(!f)throw Error("Invalid event type");const $=l(V)?!!V.capture:!!V;let me=Gt(o);if(me||(o[fe]=me=new G(o)),g=me.add(f,g,E,$,U),g.proxy)return g;if(E=Mr(),g.proxy=E,E.src=o,E.listener=g,o.addEventListener)D||(V=$),V===void 0&&(V=!1),o.addEventListener(f.toString(),E,V);else if(o.attachEvent)o.attachEvent(ee(f.toString()),E);else if(o.addListener&&o.removeListener)o.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Mr(){function o(g){return f.call(o.src,o.listener,g)}const f=ce;return o}function K(o,f,g,E,V){if(Array.isArray(f))for(var U=0;U<f.length;U++)K(o,f[U],g,E,V);else E=l(E)?!!E.capture:!!E,g=be(g),o&&o[Y]?(o=o.i,U=String(f).toString(),U in o.g&&(f=o.g[U],g=se(f,g,E,V),g>-1&&(O(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete o.g[U],o.h--)))):o&&(o=Gt(o))&&(f=o.g[f.toString()],o=-1,f&&(o=se(f,g,E,V)),(g=o>-1?f[o]:null)&&Z(g))}function Z(o){if(typeof o!="number"&&o&&!o.da){var f=o.src;if(f&&f[Y])W(f.i,o);else{var g=o.type,E=o.proxy;f.removeEventListener?f.removeEventListener(g,E,o.capture):f.detachEvent?f.detachEvent(ee(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=Gt(f))?(W(g,o),g.h==0&&(g.src=null,f[fe]=null)):O(o)}}}function ee(o){return o in ye?ye[o]:ye[o]="on"+o}function ce(o,f){if(o.da)o=!0;else{f=new pe(f,this);const g=o.listener,E=o.ha||o.src;o.fa&&Z(o),o=g.call(E,f)}return o}function Gt(o){return o=o[fe],o instanceof G?o:null}var ls="__closure_events_fn_"+(Math.random()*1e9>>>0);function be(o){return typeof o=="function"?o:(o[ls]||(o[ls]=function(f){return o.handleEvent(f)}),o[ls])}function Ze(){S.call(this),this.i=new G(this),this.M=this,this.G=null}m(Ze,S),Ze.prototype[Y]=!0,Ze.prototype.removeEventListener=function(o,f,g,E){K(this,o,f,g,E)};function gt(o,f){var g,E=o.G;if(E)for(g=[];E;E=E.G)g.push(E);if(o=o.M,E=f.type||f,typeof f=="string")f=new C(f,o);else if(f instanceof C)f.target=f.target||o;else{var V=f;f=new C(E,o),Ue(f,V)}V=!0;let U,$;if(g)for($=g.length-1;$>=0;$--)U=f.g=g[$],V=rc(U,E,!0,f)&&V;if(U=f.g=o,V=rc(U,E,!0,f)&&V,V=rc(U,E,!1,f)&&V,g)for($=0;$<g.length;$++)U=f.g=g[$],V=rc(U,E,!1,f)&&V}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var o=this.i;for(const f in o.g){const g=o.g[f];for(let E=0;E<g.length;E++)O(g[E]);delete o.g[f],o.h--}}this.G=null},Ze.prototype.J=function(o,f,g,E){return this.i.add(String(o),f,!1,g,E)},Ze.prototype.K=function(o,f,g,E){return this.i.add(String(o),f,!0,g,E)};function rc(o,f,g,E){if(f=o.i.g[String(f)],!f)return!0;f=f.concat();let V=!0;for(let U=0;U<f.length;++U){const $=f[U];if($&&!$.da&&$.capture==g){const me=$.listener,yt=$.ha||$.src;$.fa&&W(o.i,$),V=me.call(yt,E)!==!1&&V}}return V&&!E.defaultPrevented}function d2(o,f){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:a.setTimeout(o,f||0)}function Ty(o){o.g=d2(()=>{o.g=null,o.i&&(o.i=!1,Ty(o))},o.l);const f=o.h;o.h=null,o.m.apply(null,f)}class h2 extends S{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ty(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sl(o){S.call(this),this.h=o,this.g={}}m(sl,S);var Ay=[];function Sy(o){H(o.g,function(f,g){this.g.hasOwnProperty(g)&&Z(f)},o),o.g={}}sl.prototype.N=function(){sl.Z.N.call(this),Sy(this)},sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hh=a.JSON.stringify,f2=a.JSON.parse,m2=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Ny(){}function Cy(){}var il={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fh(){C.call(this,"d")}m(fh,C);function mh(){C.call(this,"c")}m(mh,C);var Ki={},Ry=null;function ac(){return Ry=Ry||new Ze}Ki.Ia="serverreachability";function Iy(o){C.call(this,Ki.Ia,o)}m(Iy,C);function rl(o){const f=ac();gt(f,new Iy(f))}Ki.STAT_EVENT="statevent";function jy(o,f){C.call(this,Ki.STAT_EVENT,o),this.stat=f}m(jy,C);function zt(o){const f=ac();gt(f,new jy(f,o))}Ki.Ja="timingevent";function ky(o,f){C.call(this,Ki.Ja,o),this.size=f}m(ky,C);function al(o,f){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},f)}function ll(){this.g=!0}ll.prototype.ua=function(){this.g=!1};function p2(o,f,g,E,V,U){o.info(function(){if(o.g)if(U){var $="",me=U.split("&");for(let Ve=0;Ve<me.length;Ve++){var yt=me[Ve].split("=");if(yt.length>1){const _t=yt[0];yt=yt[1];const Pn=_t.split("_");$=Pn.length>=2&&Pn[1]=="type"?$+(_t+"="+yt+"&"):$+(_t+"=redacted&")}}}else $=null;else $=U;return"XMLHTTP REQ ("+E+") [attempt "+V+"]: "+f+`
`+g+`
`+$})}function g2(o,f,g,E,V,U,$){o.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+V+"]: "+f+`
`+g+`
`+U+" "+$})}function Vr(o,f,g,E){o.info(function(){return"XMLHTTP TEXT ("+f+"): "+b2(o,g)+(E?" "+E:"")})}function y2(o,f){o.info(function(){return"TIMEOUT: "+f})}ll.prototype.info=function(){};function b2(o,f){if(!o.g)return f;if(!f)return null;try{const U=JSON.parse(f);if(U){for(o=0;o<U.length;o++)if(Array.isArray(U[o])){var g=U[o];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var V=E[0];if(V!="noop"&&V!="stop"&&V!="close")for(let $=1;$<E.length;$++)E[$]=""}}}}return hh(U)}catch{return f}}var lc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oy;function ph(){}m(ph,Ny),ph.prototype.g=function(){return new XMLHttpRequest},Oy=new ph;function ol(o){return encodeURIComponent(String(o))}function v2(o){var f=1;o=o.split(":");const g=[];for(;f>0&&o.length;)g.push(o.shift()),f--;return o.length&&g.push(o.join(":")),g}function Us(o,f,g,E){this.j=o,this.i=f,this.l=g,this.S=E||1,this.V=new sl(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new My}function My(){this.i=null,this.g="",this.h=!1}var Vy={},gh={};function yh(o,f,g){o.M=1,o.A=cc(Un(f)),o.u=g,o.R=!0,Ly(o,null)}function Ly(o,f){o.F=Date.now(),oc(o),o.B=Un(o.A);var g=o.B,E=o.S;Array.isArray(E)||(E=[String(E)]),Xy(g.i,"t",E),o.C=0,g=o.j.L,o.h=new My,o.g=m0(o.j,g?f:null,!o.u),o.P>0&&(o.O=new h2(d(o.Y,o,o.g),o.P)),f=o.V,g=o.g,E=o.ba;var V="readystatechange";Array.isArray(V)||(V&&(Ay[0]=V.toString()),V=Ay);for(let U=0;U<V.length;U++){const $=Ae(g,V[U],E||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=o.J?ge(o.J):{},o.u?(o.v||(o.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,f)):(o.v="GET",o.g.ea(o.B,o.v,null,f)),rl(),p2(o.i,o.v,o.B,o.l,o.S,o.u)}Us.prototype.ba=function(o){o=o.target;const f=this.O;f&&Bs(o)==3?f.j():this.Y(o)},Us.prototype.Y=function(o){try{if(o==this.g)e:{const me=Bs(this.g),yt=this.g.ya(),Ve=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||s0(this.g)))){this.K||me!=4||yt==7||(yt==8||Ve<=0?rl(3):rl(2)),bh(this);var f=this.g.ca();this.X=f;var g=x2(this);if(this.o=f==200,g2(this.i,this.v,this.B,this.l,this.S,me,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,V=this.g;if((E=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(E)){var U=E;break t}}U=null}if(o=U)Vr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vh(this,o);else{this.o=!1,this.m=3,zt(12),Qi(this),cl(this);break e}}if(this.R){o=!0;let _t;for(;!this.K&&this.C<g.length;)if(_t=_2(this,g),_t==gh){me==4&&(this.m=4,zt(14),o=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Vy){this.m=4,zt(15),Vr(this.i,this.l,g,"[Invalid Chunk]"),o=!1;break}else Vr(this.i,this.l,_t,null),vh(this,_t);if(Uy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||g.length!=0||this.h.h||(this.m=1,zt(16),o=!1),this.o=this.o&&o,!o)Vr(this.i,this.l,g,"[Invalid Chunked Response]"),Qi(this),cl(this);else if(g.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Nh($),$.P=!0,zt(11))}}else Vr(this.i,this.l,g,null),vh(this,g);me==4&&Qi(this),this.o&&!this.K&&(me==4?u0(this.j,this):(this.o=!1,oc(this)))}else M2(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Qi(this),cl(this)}}}catch{}finally{}};function x2(o){if(!Uy(o))return o.g.la();const f=s0(o.g);if(f==="")return"";let g="";const E=f.length,V=Bs(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Qi(o),cl(o),"";o.h.i=new a.TextDecoder}for(let U=0;U<E;U++)o.h.h=!0,g+=o.h.i.decode(f[U],{stream:!(V&&U==E-1)});return f.length=0,o.h.g+=g,o.C=0,o.h.g}function Uy(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function _2(o,f){var g=o.C,E=f.indexOf(`
`,g);return E==-1?gh:(g=Number(f.substring(g,E)),isNaN(g)?Vy:(E+=1,E+g>f.length?gh:(f=f.slice(E,E+g),o.C=E+g,f)))}Us.prototype.cancel=function(){this.K=!0,Qi(this)};function oc(o){o.T=Date.now()+o.H,Py(o,o.H)}function Py(o,f){if(o.D!=null)throw Error("WatchDog timer not null");o.D=al(d(o.aa,o),f)}function bh(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Us.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(y2(this.i,this.B),this.M!=2&&(rl(),zt(17)),Qi(this),this.m=2,cl(this)):Py(this,this.T-o)};function cl(o){o.j.I==0||o.K||u0(o.j,o)}function Qi(o){bh(o);var f=o.O;f&&typeof f.dispose=="function"&&f.dispose(),o.O=null,Sy(o.V),o.g&&(f=o.g,o.g=null,f.abort(),f.dispose())}function vh(o,f){try{var g=o.j;if(g.I!=0&&(g.g==o||xh(g.h,o))){if(!o.L&&xh(g.h,o)&&g.I==3){try{var E=g.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var V=E;if(V[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<o.F)mc(g),hc(g);else break e;Sh(g),zt(18)}}else g.xa=V[1],0<g.xa-g.K&&V[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=al(d(g.Va,g),6e3));qy(g.h)<=1&&g.ta&&(g.ta=void 0)}else Yi(g,11)}else if((o.L||g.g==o)&&mc(g),!R(f))for(V=g.Ba.g.parse(f),f=0;f<V.length;f++){let Ve=V[f];const _t=Ve[0];if(!(_t<=g.K))if(g.K=_t,Ve=Ve[1],g.I==2)if(Ve[0]=="c"){g.M=Ve[1],g.ba=Ve[2];const Pn=Ve[3];Pn!=null&&(g.ka=Pn,g.j.info("VER="+g.ka));const Xi=Ve[4];Xi!=null&&(g.za=Xi,g.j.info("SVER="+g.za));const qs=Ve[5];qs!=null&&typeof qs=="number"&&qs>0&&(E=1.5*qs,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Fs=o.g;if(Fs){const gc=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gc){var U=E.h;U.g||gc.indexOf("spdy")==-1&&gc.indexOf("quic")==-1&&gc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(_h(U,U.h),U.h=null))}if(E.G){const Ch=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ch&&(E.wa=Ch,qe(E.J,E.G,Ch))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-o.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var $=o;if(E.na=f0(E,E.L?E.ba:null,E.W),$.L){Fy(E.h,$);var me=$,yt=E.O;yt&&(me.H=yt),me.D&&(bh(me),oc(me)),E.g=$}else o0(E);g.i.length>0&&fc(g)}else Ve[0]!="stop"&&Ve[0]!="close"||Yi(g,7);else g.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Yi(g,7):Ah(g):Ve[0]!="noop"&&g.l&&g.l.qa(Ve),g.A=0)}}rl(4)}catch{}}var E2=class{constructor(o,f){this.g=o,this.map=f}};function zy(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function By(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function qy(o){return o.h?1:o.g?o.g.size:0}function xh(o,f){return o.h?o.h==f:o.g?o.g.has(f):!1}function _h(o,f){o.g?o.g.add(f):o.h=f}function Fy(o,f){o.h&&o.h==f?o.h=null:o.g&&o.g.has(f)&&o.g.delete(f)}zy.prototype.cancel=function(){if(this.i=Hy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Hy(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let f=o.i;for(const g of o.g.values())f=f.concat(g.G);return f}return y(o.i)}var Gy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function w2(o,f){if(o){o=o.split("&");for(let g=0;g<o.length;g++){const E=o[g].indexOf("=");let V,U=null;E>=0?(V=o[g].substring(0,E),U=o[g].substring(E+1)):V=o[g],f(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ps(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;o instanceof Ps?(this.l=o.l,ul(this,o.j),this.o=o.o,this.g=o.g,dl(this,o.u),this.h=o.h,Eh(this,Wy(o.i)),this.m=o.m):o&&(f=String(o).match(Gy))?(this.l=!1,ul(this,f[1]||"",!0),this.o=hl(f[2]||""),this.g=hl(f[3]||"",!0),dl(this,f[4]),this.h=hl(f[5]||"",!0),Eh(this,f[6]||"",!0),this.m=hl(f[7]||"")):(this.l=!1,this.i=new ml(null,this.l))}Ps.prototype.toString=function(){const o=[];var f=this.j;f&&o.push(fl(f,Ky,!0),":");var g=this.g;return(g||f=="file")&&(o.push("//"),(f=this.o)&&o.push(fl(f,Ky,!0),"@"),o.push(ol(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&o.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(fl(g,g.charAt(0)=="/"?S2:A2,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",fl(g,C2)),o.join("")},Ps.prototype.resolve=function(o){const f=Un(this);let g=!!o.j;g?ul(f,o.j):g=!!o.o,g?f.o=o.o:g=!!o.g,g?f.g=o.g:g=o.u!=null;var E=o.h;if(g)dl(f,o.u);else if(g=!!o.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var V=f.h.lastIndexOf("/");V!=-1&&(E=f.h.slice(0,V+1)+E)}if(V=E,V==".."||V==".")E="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){E=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let $=0;$<V.length;){const me=V[$++];me=="."?E&&$==V.length&&U.push(""):me==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),E&&$==V.length&&U.push("")):(U.push(me),E=!0)}E=U.join("/")}else E=V}return g?f.h=E:g=o.i.toString()!=="",g?Eh(f,Wy(o.i)):g=!!o.m,g&&(f.m=o.m),f};function Un(o){return new Ps(o)}function ul(o,f,g){o.j=g?hl(f,!0):f,o.j&&(o.j=o.j.replace(/:$/,""))}function dl(o,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);o.u=f}else o.u=null}function Eh(o,f,g){f instanceof ml?(o.i=f,R2(o.i,o.l)):(g||(f=fl(f,N2)),o.i=new ml(f,o.l))}function qe(o,f,g){o.i.set(f,g)}function cc(o){return qe(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function hl(o,f){return o?f?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function fl(o,f,g){return typeof o=="string"?(o=encodeURI(o).replace(f,T2),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function T2(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ky=/[#\/\?@]/g,A2=/[#\?:]/g,S2=/[#\?]/g,N2=/[#\?@]/g,C2=/#/g;function ml(o,f){this.h=this.g=null,this.i=o||null,this.j=!!f}function $i(o){o.g||(o.g=new Map,o.h=0,o.i&&w2(o.i,function(f,g){o.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ml.prototype,t.add=function(o,f){$i(this),this.i=null,o=Lr(this,o);let g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(f),this.h+=1,this};function Qy(o,f){$i(o),f=Lr(o,f),o.g.has(f)&&(o.i=null,o.h-=o.g.get(f).length,o.g.delete(f))}function $y(o,f){return $i(o),f=Lr(o,f),o.g.has(f)}t.forEach=function(o,f){$i(this),this.g.forEach(function(g,E){g.forEach(function(V){o.call(f,V,E,this)},this)},this)};function Yy(o,f){$i(o);let g=[];if(typeof f=="string")$y(o,f)&&(g=g.concat(o.g.get(Lr(o,f))));else for(o=Array.from(o.g.values()),f=0;f<o.length;f++)g=g.concat(o[f]);return g}t.set=function(o,f){return $i(this),this.i=null,o=Lr(this,o),$y(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[f]),this.h+=1,this},t.get=function(o,f){return o?(o=Yy(this,o),o.length>0?String(o[0]):f):f};function Xy(o,f,g){Qy(o,f),g.length>0&&(o.i=null,o.g.set(Lr(o,f),y(g)),o.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var g=f[E];const V=ol(g);g=Yy(this,g);for(let U=0;U<g.length;U++){let $=V;g[U]!==""&&($+="="+ol(g[U])),o.push($)}}return this.i=o.join("&")};function Wy(o){const f=new ml;return f.i=o.i,o.g&&(f.g=new Map(o.g),f.h=o.h),f}function Lr(o,f){return f=String(f),o.j&&(f=f.toLowerCase()),f}function R2(o,f){f&&!o.j&&($i(o),o.i=null,o.g.forEach(function(g,E){const V=E.toLowerCase();E!=V&&(Qy(this,E),Xy(this,V,g))},o)),o.j=f}function I2(o,f){const g=new ll;if(a.Image){const E=new Image;E.onload=h(zs,g,"TestLoadImage: loaded",!0,f,E),E.onerror=h(zs,g,"TestLoadImage: error",!1,f,E),E.onabort=h(zs,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=h(zs,g,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=o}else f(!1)}function j2(o,f){const g=new ll,E=new AbortController,V=setTimeout(()=>{E.abort(),zs(g,"TestPingServer: timeout",!1,f)},1e4);fetch(o,{signal:E.signal}).then(U=>{clearTimeout(V),U.ok?zs(g,"TestPingServer: ok",!0,f):zs(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),zs(g,"TestPingServer: error",!1,f)})}function zs(o,f,g,E,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),E(g)}catch{}}function k2(){this.g=new m2}function wh(o){this.i=o.Sb||null,this.h=o.ab||!1}m(wh,Ny),wh.prototype.g=function(){return new uc(this.i,this.h)};function uc(o,f){Ze.call(this),this.H=o,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(uc,Ze),t=uc.prototype,t.open=function(o,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=f,this.readyState=1,gl(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(f.body=o),(this.H||a).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,gl(this)),this.g&&(this.readyState=3,gl(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jy(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jy(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var f=o.value?o.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!o.done}))&&(this.response=this.responseText+=f)}o.done?pl(this):gl(this),this.readyState==3&&Jy(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,pl(this))},t.Na=function(o){this.g&&(this.response=o,pl(this))},t.ga=function(){this.g&&pl(this)};function pl(o){o.readyState=4,o.l=null,o.j=null,o.B=null,gl(o)}t.setRequestHeader=function(o,f){this.A.append(o,f)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=f.next();return o.join(`\r
`)};function gl(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Zy(o){let f="";return H(o,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Th(o,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Zy(g),typeof o=="string"?g!=null&&ol(g):qe(o,f,g))}function et(o){Ze.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(et,Ze);var D2=/^https?$/i,O2=["POST","PUT"];t=et.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);f=f?f.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oy.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(o),!0),this.B=!1}catch(U){e0(this,U);return}if(o=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var V in E)g.set(V,E[V]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())g.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(O2,f,void 0)>=0)||E||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,$]of g)this.g.setRequestHeader(U,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(U){e0(this,U)}};function e0(o,f){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=f,o.o=5,t0(o),dc(o)}function t0(o){o.A||(o.A=!0,gt(o,"complete"),gt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,gt(this,"complete"),gt(this,"abort"),dc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dc(this,!0)),et.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?n0(this):this.Xa())},t.Xa=function(){n0(this)};function n0(o){if(o.h&&typeof r<"u"){if(o.v&&Bs(o)==4)setTimeout(o.Ca.bind(o),0);else if(gt(o,"readystatechange"),Bs(o)==4){o.h=!1;try{const U=o.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=U===0){let $=String(o.D).match(Gy)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),E=!D2.test($?$.toLowerCase():"")}g=E}if(g)gt(o,"complete"),gt(o,"success");else{o.o=6;try{var V=Bs(o)>2?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.ca()+"]",t0(o)}}finally{dc(o)}}}}function dc(o,f){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const g=o.g;o.g=null,f||gt(o,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Bs(o){return o.g?o.g.readyState:0}t.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var f=this.g.responseText;return o&&f.indexOf(o)==0&&(f=f.substring(o.length)),f2(f)}};function s0(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function M2(o){const f={};o=(o.g&&Bs(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<o.length;E++){if(R(o[E]))continue;var g=v2(o[E]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=f[V]||[];f[V]=U,U.push(g)}Q(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yl(o,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||f}function i0(o){this.za=0,this.i=[],this.j=new ll,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yl("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yl("baseRetryDelayMs",5e3,o),this.Za=yl("retryDelaySeedMs",1e4,o),this.Ta=yl("forwardChannelMaxRetries",2,o),this.va=yl("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new zy(o&&o.concurrentRequestLimit),this.Ba=new k2,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=i0.prototype,t.ka=8,t.I=1,t.connect=function(o,f,g,E){zt(0),this.W=o,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=f0(this,null,this.W),fc(this)};function Ah(o){if(r0(o),o.I==3){var f=o.V++,g=Un(o.J);if(qe(g,"SID",o.M),qe(g,"RID",f),qe(g,"TYPE","terminate"),bl(o,g),f=new Us(o,o.j,f),f.M=2,f.A=cc(Un(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.A,g=!0),g||(f.g=m0(f.j,null),f.g.ea(f.A)),f.F=Date.now(),oc(f)}h0(o)}function hc(o){o.g&&(Nh(o),o.g.cancel(),o.g=null)}function r0(o){hc(o),o.v&&(a.clearTimeout(o.v),o.v=null),mc(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function fc(o){if(!By(o.h)&&!o.m){o.m=!0;var f=o.Ea;L||b(),z||(L(),z=!0),w.add(f,o),o.D=0}}function V2(o,f){return qy(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=f.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=al(d(o.Ea,o,f),d0(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const V=new Us(this,this.j,o);let U=this.o;if(this.U&&(U?(U=ge(U),Ue(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=l0(this,V,f),g=Un(this.J),qe(g,"RID",o),qe(g,"CVER",22),this.G&&qe(g,"X-HTTP-Session-Id",this.G),bl(this,g),U&&(this.R?f="headers="+ol(Zy(U))+"&"+f:this.u&&Th(g,this.u,U)),_h(this.h,V),this.Ra&&qe(g,"TYPE","init"),this.S?(qe(g,"$req",f),qe(g,"SID","null"),V.U=!0,yh(V,g,null)):yh(V,g,f),this.I=2}}else this.I==3&&(o?a0(this,o):this.i.length==0||By(this.h)||a0(this))};function a0(o,f){var g;f?g=f.l:g=o.V++;const E=Un(o.J);qe(E,"SID",o.M),qe(E,"RID",g),qe(E,"AID",o.K),bl(o,E),o.u&&o.o&&Th(E,o.u,o.o),g=new Us(o,o.j,g,o.D+1),o.u===null&&(g.J=o.o),f&&(o.i=f.G.concat(o.i)),f=l0(o,g,1e3),g.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),_h(o.h,g),yh(g,E,f)}function bl(o,f){o.H&&H(o.H,function(g,E){qe(f,E,g)}),o.l&&H({},function(g,E){qe(f,E,g)})}function l0(o,f,g){g=Math.min(o.i.length,g);const E=o.l?d(o.l.Ka,o.l,o):null;e:{var V=o.i;let me=-1;for(;;){const yt=["count="+g];me==-1?g>0?(me=V[0].g,yt.push("ofs="+me)):me=0:yt.push("ofs="+me);let Ve=!0;for(let _t=0;_t<g;_t++){var U=V[_t].g;const Pn=V[_t].map;if(U-=me,U<0)me=Math.max(0,V[_t].g-100),Ve=!1;else try{U="req"+U+"_"||"";try{var $=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Xi,qs]of $){let Fs=qs;l(qs)&&(Fs=hh(qs)),yt.push(U+Xi+"="+encodeURIComponent(Fs))}}catch(Xi){throw yt.push(U+"type="+encodeURIComponent("_badmap")),Xi}}catch{E&&E(Pn)}}if(Ve){$=yt.join("&");break e}}$=void 0}return o=o.i.splice(0,g),f.G=o,$}function o0(o){if(!o.g&&!o.v){o.Y=1;var f=o.Da;L||b(),z||(L(),z=!0),w.add(f,o),o.A=0}}function Sh(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=al(d(o.Da,o),d0(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,c0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=al(d(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),hc(this),c0(this))};function Nh(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function c0(o){o.g=new Us(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var f=Un(o.na);qe(f,"RID","rpc"),qe(f,"SID",o.M),qe(f,"AID",o.K),qe(f,"CI",o.F?"0":"1"),!o.F&&o.ia&&qe(f,"TO",o.ia),qe(f,"TYPE","xmlhttp"),bl(o,f),o.u&&o.o&&Th(f,o.u,o.o),o.O&&(o.g.H=o.O);var g=o.g;o=o.ba,g.M=1,g.A=cc(Un(f)),g.u=null,g.R=!0,Ly(g,o)}t.Va=function(){this.C!=null&&(this.C=null,hc(this),Sh(this),zt(19))};function mc(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function u0(o,f){var g=null;if(o.g==f){mc(o),Nh(o),o.g=null;var E=2}else if(xh(o.h,f))g=f.G,Fy(o.h,f),E=1;else return;if(o.I!=0){if(f.o)if(E==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var V=o.D;E=ac(),gt(E,new ky(E,g)),fc(o)}else o0(o);else if(V=f.m,V==3||V==0&&f.X>0||!(E==1&&V2(o,f)||E==2&&Sh(o)))switch(g&&g.length>0&&(f=o.h,f.i=f.i.concat(g)),V){case 1:Yi(o,5);break;case 4:Yi(o,10);break;case 3:Yi(o,6);break;default:Yi(o,2)}}}function d0(o,f){let g=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(g*=2),g*f}function Yi(o,f){if(o.j.info("Error code "+f),f==2){var g=d(o.bb,o),E=o.Ua;const V=!E;E=new Ps(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ul(E,"https"),cc(E),V?I2(E.toString(),g):j2(E.toString(),g)}else zt(2);o.I=0,o.l&&o.l.pa(f),h0(o),r0(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function h0(o){if(o.I=0,o.ja=[],o.l){const f=Hy(o.h);(f.length!=0||o.i.length!=0)&&(N(o.ja,f),N(o.ja,o.i),o.h.i.length=0,y(o.i),o.i.length=0),o.l.oa()}}function f0(o,f,g){var E=g instanceof Ps?Un(g):new Ps(g);if(E.g!="")f&&(E.g=f+"."+E.g),dl(E,E.u);else{var V=a.location;E=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;const U=new Ps(null);E&&ul(U,E),f&&(U.g=f),V&&dl(U,V),g&&(U.h=g),E=U}return g=o.G,f=o.wa,g&&f&&qe(E,g,f),qe(E,"VER",o.ka),bl(o,E),E}function m0(o,f,g){if(f&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=o.Aa&&!o.ma?new et(new wh({ab:g})):new et(o.ma),f.Fa(o.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p0(){}t=p0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function pc(){}pc.prototype.g=function(o,f){return new nn(o,f)};function nn(o,f){Ze.call(this),this.g=new i0(f),this.l=o,this.h=f&&f.messageUrlParams||null,o=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(o?o["X-WebChannel-Content-Type"]=f.messageContentType:o={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(o?o["X-WebChannel-Client-Profile"]=f.sa:o={"X-WebChannel-Client-Profile":f.sa}),this.g.U=o,(o=f&&f.Qb)&&!R(o)&&(this.g.u=o),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!R(f)&&(this.g.G=f,o=this.h,o!==null&&f in o&&(o=this.h,f in o&&delete o[f])),this.j=new Ur(this)}m(nn,Ze),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ah(this.g)},nn.prototype.o=function(o){var f=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.v&&(g={},g.__data__=hh(o),o=g);f.i.push(new E2(f.Ya++,o)),f.I==3&&fc(f)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ah(this.g),delete this.g,nn.Z.N.call(this)};function g0(o){fh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var f=o.__sm__;if(f){e:{for(const g in f){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,f=f!==null&&o in f?f[o]:void 0),this.data=f}else this.data=o}m(g0,fh);function y0(){mh.call(this),this.status=1}m(y0,mh);function Ur(o){this.g=o}m(Ur,p0),Ur.prototype.ra=function(){gt(this.g,"a")},Ur.prototype.qa=function(o){gt(this.g,new g0(o))},Ur.prototype.pa=function(o){gt(this.g,new y0)},Ur.prototype.oa=function(){gt(this.g,"b")},pc.prototype.createWebChannel=pc.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,yT=function(){return new pc},gT=function(){return ac()},pT=Ki,qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},lc.NO_ERROR=0,lc.TIMEOUT=8,lc.HTTP_ERROR=6,au=lc,Dy.COMPLETE="complete",mT=Dy,Cy.EventType=il,il.OPEN="a",il.CLOSE="b",il.ERROR="c",il.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Ol=Cy,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,fT=et}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",zv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new yg("@firebase/firestore");function Hr(){return Er.logLevel}function J(t,...e){if(Er.logLevel<=_e.DEBUG){const n=e.map(Rg);Er.debug(`Firestore (${Ja}): ${t}`,...n)}}function Ds(t,...e){if(Er.logLevel<=_e.ERROR){const n=e.map(Rg);Er.error(`Firestore (${Ja}): ${t}`,...n)}}function Da(t,...e){if(Er.logLevel<=_e.WARN){const n=e.map(Rg);Er.warn(`Firestore (${Ja}): ${t}`,...n)}}function Rg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,bT(t,s,n)}function bT(t,e,n){let s=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ds(s),new Error(s)}function je(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||bT(e,i,s)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends as{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class JD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZD{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let r=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ts,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ts)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(je(typeof s.accessToken=="string",31837,{l:s}),new vT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class eO{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tO{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new eO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const s=r=>{r.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Bv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=sO(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%62))}return s}}function Ee(t,e){return t<e?-1:t>e?1:0}function Fm(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),r=e.charAt(s);if(i!==r)return Ef(i)===Ef(r)?Ee(i,r):Ef(i)?1:-1}return Ee(t.length,e.length)}const iO=55296,rO=57343;function Ef(t){const e=t.charCodeAt(0);return e>=iO&&e<=rO}function Oa(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class zn{constructor(e,n,s){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&re(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return zn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=zn.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return Ee(e.length,n.length)}static compareSegments(e,n){const s=zn.isNumericId(e),i=zn.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?zn.extractNumericId(e).compare(zn.extractNumericId(n)):Fm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class Pe extends zn{construct(e,n,s){return new Pe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const aO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends zn{construct(e,n,s){return new jt(e,n,s)}static isValidIdentifier(e){return aO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qv}static keyField(){return new jt([qv])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new X(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(s+=l,i++):(r(),i++)}if(r(),a)throw new X(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Pe.fromString(e))}static fromName(e){return new ne(Pe.fromString(e).popFirst(5))}static empty(){return new ne(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e,n){if(!n)throw new X(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lO(t,e,n,s){if(e===!0&&s===!0)throw new X(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fv(t){if(!ne.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hv(t){if(ne.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _T(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Fd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fd(t);throw new X(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zo(t,e){if(!_T(t))throw new X(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,r="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const a=t[s];if(i&&typeof a!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new X(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Kv=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Kv);return new Ke(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gv)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kv}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zo(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:pt("string",Ke._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new Ke(0,0))}static max(){return new le(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=-1;function oO(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(s===1e9?new Ke(n+1,0):new Ke(n,s));return new Ii(i,ne.empty(),e)}function cO(t){return new Ii(t.readTime,t.key,So)}class Ii{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ii(le.min(),ne.empty(),So)}static max(){return new Ii(le.max(),ne.empty(),So)}}function uO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==dO)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,s)=>{n(e)})}static reject(e){return new F((n,s)=>{s(e)})}static waitFor(e){return new F((n,s)=>{let i=0,r=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++r,a&&r===i&&n()},u=>s(u))}),a=!0,r===i&&n()})}static or(e){let n=F.resolve(!1);for(const s of e)n=n.next(i=>i?F.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new F((s,i)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const d=u;n(e[d]).next(h=>{a[d]=h,++l,l===r&&s(a)},h=>i(h))}})}static doWhile(e,n){return new F((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}function fO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=-1;function Gd(t){return t==null}function Zu(t){return t===0&&1/t==-1/0}function mO(t){return typeof t=="number"&&Number.isInteger(t)&&!Zu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="";function pO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qv(e)),e=gO(t.get(n),e);return Qv(e)}function gO(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case ET:n+="";break;default:n+=r}}return n}function Qv(t){return t+ET+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mc(this.root,e,this.comparator,!0)}}class Mc{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??Ct.RED,this.left=i??Ct.EMPTY,this.right=r??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new Ct(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ct.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,s,i,r){return this}insert(e,n,s){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new on([])}unionWith(e){let n=new vt(jt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new TT("Invalid base64 string: "+r):r}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(i){let r="";for(let a=0;a<i.length;++a)r+=String.fromCharCode(i[a]);return r}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const yO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=yO.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ki(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",ST="__type__",NT="__previous_value__",CT="__local_write_time__";function kg(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ST])==null?void 0:s.stringValue)===AT}function Kd(t){const e=t.mapValue.fields[NT];return kg(e)?Kd(e):e}function No(t){const e=ji(t.mapValue.fields[CT].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n,s,i,r,a,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const ed="(default)";class Co{constructor(e,n){this.projectId=e,this.database=n||ed}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===ed}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__type__",vO="__max__",Vc={mapValue:{}},IT="__vector__",td="value";function Di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kg(t)?4:_O(t)?9007199254740991:xO(t)?10:11:re(28295,{value:t})}function Zn(t,e){if(t===e)return!0;const n=Di(t);if(n!==Di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return No(t).isEqual(No(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const a=ji(i.timestampValue),l=ji(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return ki(i.bytesValue).isEqual(ki(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return rt(i.geoPointValue.latitude)===rt(r.geoPointValue.latitude)&&rt(i.geoPointValue.longitude)===rt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return rt(i.integerValue)===rt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const a=rt(i.doubleValue),l=rt(r.doubleValue);return a===l?Zu(a)===Zu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return function(i,r){const a=i.mapValue.fields||{},l=r.mapValue.fields||{};if($v(a)!==$v(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Zn(a[u],l[u])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function Ro(t,e){return(t.values||[]).find(n=>Zn(n,e))!==void 0}function Ma(t,e){if(t===e)return 0;const n=Di(t),s=Di(e);if(n!==s)return Ee(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=rt(r.integerValue||r.doubleValue),u=rt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Xv(t.timestampValue,e.timestampValue);case 4:return Xv(No(t),No(e));case 5:return Fm(t.stringValue,e.stringValue);case 6:return function(r,a){const l=ki(r),u=ki(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Ee(l[d],u[d]);if(h!==0)return h}return Ee(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=Ee(rt(r.latitude),rt(a.latitude));return l!==0?l:Ee(rt(r.longitude),rt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wv(t.arrayValue,e.arrayValue);case 10:return function(r,a){var p,y,N,I;const l=r.fields||{},u=a.fields||{},d=(p=l[td])==null?void 0:p.arrayValue,h=(y=u[td])==null?void 0:y.arrayValue,m=Ee(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((I=h==null?void 0:h.values)==null?void 0:I.length)||0);return m!==0?m:Wv(d,h)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===Vc.mapValue&&a===Vc.mapValue)return 0;if(r===Vc.mapValue)return 1;if(a===Vc.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Fm(u[m],h[m]);if(p!==0)return p;const y=Ma(l[u[m]],d[h[m]]);if(y!==0)return y}return Ee(u.length,h.length)}(t.mapValue,e.mapValue);default:throw re(23264,{he:n})}}function Xv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=ji(t),s=ji(e),i=Ee(n.seconds,s.seconds);return i!==0?i:Ee(n.nanos,s.nanos)}function Wv(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Ma(n[i],s[i]);if(r)return r}return Ee(n.length,s.length)}function Va(t){return Hm(t)}function Hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=ji(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Hm(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const a of s)r?r=!1:i+=",",i+=`${a}:${Hm(n.fields[a])}`;return i+"}"}(t.mapValue):re(61005,{value:t})}function lu(t){switch(Di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kd(t);return e?16+lu(e):16;case 5:return 2*t.stringValue.length;case 6:return ki(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+lu(r),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return Fi(s.fields,(r,a)=>{i+=r.length+lu(a)}),i}(t.mapValue);default:throw re(13486,{value:t})}}function Jv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gm(t){return!!t&&"integerValue"in t}function Dg(t){return!!t&&"arrayValue"in t}function Zv(t){return!!t&&"nullValue"in t}function ex(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ou(t){return!!t&&"mapValue"in t}function xO(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RT])==null?void 0:s.stringValue)===IT}function eo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=eo(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eo(t.arrayValue.values[n]);return e}return{...t}}function _O(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eo(n)}setAll(e){let n=jt.emptyPath(),s={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=l.popLast()}a?s[l.lastSegment()]=eo(a):i.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];ou(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Fi(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new Wt(eo(this.value))}}function jT(t){const e=[];return Fi(t.fields,(n,s)=>{const i=new jt([n]);if(ou(s)){const r=jT(s.mapValue).fields;if(r.length===0)e.push(i);else for(const a of r)e.push(i.child(a))}else e.push(i)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,s,i,r,a,l){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,le.min(),le.min(),le.min(),Wt.empty(),0)}static newFoundDocument(e,n,s,i){return new Ut(e,1,n,le.min(),s,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,le.min(),le.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,le.min(),le.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.position=e,this.inclusive=n}}function tx(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],a=t.position[i];if(r.field.isKeyField()?s=ne.comparator(ne.fromName(a.referenceValue),n.key):s=Ma(a,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function nx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n="asc"){this.field=e,this.dir=n}}function EO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{}class ft extends kT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new TO(e,n,s):n==="array-contains"?new NO(e,s):n==="in"?new CO(e,s):n==="not-in"?new RO(e,s):n==="array-contains-any"?new IO(e,s):new ft(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new AO(e,s):new SO(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ma(n,this.value)):n!==null&&Di(this.value)===Di(n)&&this.matchesComparison(Ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mn extends kT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Mn(e,n)}matches(e){return DT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DT(t){return t.op==="and"}function OT(t){return wO(t)&&DT(t)}function wO(t){for(const e of t.filters)if(e instanceof Mn)return!1;return!0}function Km(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Va(t.value);if(OT(t))return t.filters.map(e=>Km(e)).join(",");{const e=t.filters.map(n=>Km(n)).join(",");return`${t.op}(${e})`}}function MT(t,e){return t instanceof ft?function(s,i){return i instanceof ft&&s.op===i.op&&s.field.isEqual(i.field)&&Zn(s.value,i.value)}(t,e):t instanceof Mn?function(s,i){return i instanceof Mn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,a,l)=>r&&MT(a,i.filters[l]),!0):!1}(t,e):void re(19439)}function VT(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Va(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(VT).join(" ,")+"}"}(t):"Filter"}class TO extends ft{constructor(e,n,s){super(e,n,s),this.key=ne.fromName(s.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class AO extends ft{constructor(e,n){super(e,"in",n),this.keys=LT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SO extends ft{constructor(e,n){super(e,"not-in",n),this.keys=LT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>ne.fromName(s.referenceValue))}class NO extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dg(n)&&Ro(n.arrayValue,this.value)}}class CO extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ro(this.value.arrayValue,n)}}class RO extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ro(this.value.arrayValue,n)}}class IO extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ro(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n=null,s=[],i=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function sx(t,e=null,n=[],s=[],i=null,r=null,a=null){return new jO(t,e,n,s,i,r,a)}function Og(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Km(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Va(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Va(s)).join(",")),e.Te=n}return e.Te}function Mg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nx(t.startAt,e.startAt)&&nx(t.endAt,e.endAt)}function Qm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n=null,s=[],i=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kO(t,e,n,s,i,r,a,l){return new tl(t,e,n,s,i,r,a,l)}function Qd(t){return new tl(t)}function ix(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UT(t){return t.collectionGroup!==null}function to(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new vt(jt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Io(r,s))}),n.has(jt.keyField().canonicalString())||e.Ie.push(new Io(jt.keyField(),s))}return e.Ie}function Yn(t){const e=oe(t);return e.Ee||(e.Ee=DO(e,to(t))),e.Ee}function DO(t,e){if(t.limitType==="F")return sx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Io(i.field,r)});const n=t.endAt?new nd(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new nd(t.startAt.position,t.startAt.inclusive):null;return sx(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function $m(t,e){const n=t.filters.concat([e]);return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ym(t,e,n){return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $d(t,e){return Mg(Yn(t),Yn(e))&&t.limitType===e.limitType}function PT(t){return`${Og(Yn(t))}|lt:${t.limitType}`}function Gr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>VT(i)).join(", ")}]`),Gd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Va(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Va(i)).join(",")),`Target(${s})`}(Yn(t))}; limitType=${t.limitType})`}function Yd(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):ne.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of to(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(a,l,u){const d=tx(a,l,u);return a.inclusive?d<=0:d<0}(s.startAt,to(s),i)||s.endAt&&!function(a,l,u){const d=tx(a,l,u);return a.inclusive?d>=0:d>0}(s.endAt,to(s),i))}(t,e)}function OO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zT(t){return(e,n)=>{let s=!1;for(const i of to(t)){const r=MO(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function MO(t,e,n){const s=t.field.isKeyField()?ne.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),d=l.data.field(r);return u!==null&&d!==null?Ma(u,d):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return wT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new Je(ne.comparator);function Os(){return VO}const BT=new Je(ne.comparator);function Ml(...t){let e=BT;for(const n of t)e=e.insert(n.key,n);return e}function qT(t){let e=BT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function sr(){return no()}function FT(){return no()}function no(){return new kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const LO=new Je(ne.comparator),UO=new vt(ne.comparator);function we(...t){let e=UO;for(const n of t)e=e.add(n);return e}const PO=new vt(Ee);function zO(){return PO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function HT(t){return{integerValue:""+t}}function BO(t,e){return mO(e)?HT(e):Vg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(){this._=void 0}}function qO(t,e,n){return t instanceof jo?function(i,r){const a={fields:{[ST]:{stringValue:AT},[CT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&kg(r)&&(r=Kd(r)),r&&(a.fields[NT]=r),{mapValue:a}}(n,e):t instanceof ko?KT(t,e):t instanceof Do?QT(t,e):function(i,r){const a=GT(i,r),l=rx(a)+rx(i.Ae);return Gm(a)&&Gm(i.Ae)?HT(l):Vg(i.serializer,l)}(t,e)}function FO(t,e,n){return t instanceof ko?KT(t,e):t instanceof Do?QT(t,e):n}function GT(t,e){return t instanceof sd?function(s){return Gm(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class jo extends Xd{}class ko extends Xd{constructor(e){super(),this.elements=e}}function KT(t,e){const n=$T(e);for(const s of t.elements)n.some(i=>Zn(i,s))||n.push(s);return{arrayValue:{values:n}}}class Do extends Xd{constructor(e){super(),this.elements=e}}function QT(t,e){let n=$T(e);for(const s of t.elements)n=n.filter(i=>!Zn(i,s));return{arrayValue:{values:n}}}class sd extends Xd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rx(t){return rt(t.integerValue||t.doubleValue)}function $T(t){return Dg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n){this.field=e,this.transform=n}}function GO(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof ko&&i instanceof ko||s instanceof Do&&i instanceof Do?Oa(s.elements,i.elements,Zn):s instanceof sd&&i instanceof sd?Zn(s.Ae,i.Ae):s instanceof jo&&i instanceof jo}(t.transform,e.transform)}class KO{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wd{}function YT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lg(t.key,Dn.none()):new ec(t.key,t.data,Dn.none());{const n=t.data,s=Wt.empty();let i=new vt(jt.comparator);for(let r of e.fields)if(!i.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?s.delete(r):s.set(r,a),i=i.add(r)}return new Hi(t.key,s,new on(i.toArray()),Dn.none())}}function QO(t,e,n){t instanceof ec?function(i,r,a){const l=i.value.clone(),u=lx(i.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(i,r,a){if(!cu(i.precondition,r))return void r.convertToUnknownDocument(a.version);const l=lx(i.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(XT(i)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function so(t,e,n,s){return t instanceof ec?function(r,a,l,u){if(!cu(r.precondition,a))return l;const d=r.value.clone(),h=ox(r.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Hi?function(r,a,l,u){if(!cu(r.precondition,a))return l;const d=ox(r.fieldTransforms,u,a),h=a.data;return h.setAll(XT(r)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(r,a,l){return cu(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function $O(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=GT(s.transform,i||null);r!=null&&(n===null&&(n=Wt.empty()),n.set(s.field,r))}return n||null}function ax(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Oa(s,i,(r,a)=>GO(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ec extends Wd{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hi extends Wd{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function XT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function lx(t,e,n){const s=new Map;je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const r=t[i],a=r.transform,l=e.data.field(r.field);s.set(r.field,FO(a,l,n[i]))}return s}function ox(t,e,n){const s=new Map;for(const i of t){const r=i.transform,a=n.data.field(i.field);s.set(i.field,qO(r,a,e))}return s}class Lg extends Wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YO extends Wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&QO(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=so(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=so(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=FT();return this.mutations.forEach(i=>{const r=e.get(i.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(i.key)?null:l;const u=YT(a,l);u!==null&&s.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(le.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(n,s)=>ax(n,s))&&Oa(this.baseMutations,e.baseMutations,(n,s)=>ax(n,s))}}class Ug{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return LO}();const r=e.mutations;for(let a=0;a<r.length;a++)i=i.insert(r[a].key,s[a].version);return new Ug(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ne;function ZO(t){switch(t){case B.OK:return re(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function WT(t){if(t===void 0)return Ds("GRPC error has no .code"),B.UNKNOWN;switch(t){case ct.OK:return B.OK;case ct.CANCELLED:return B.CANCELLED;case ct.UNKNOWN:return B.UNKNOWN;case ct.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ct.INTERNAL:return B.INTERNAL;case ct.UNAVAILABLE:return B.UNAVAILABLE;case ct.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ct.NOT_FOUND:return B.NOT_FOUND;case ct.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ct.ABORTED:return B.ABORTED;case ct.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ct.DATA_LOSS:return B.DATA_LOSS;default:return re(39323,{code:t})}}(Ne=ct||(ct={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=new wi([4294967295,4294967295],0);function cx(t){const e=e6().encode(t),n=new hT;return n.update(e),new Uint8Array(n.digest())}function ux(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new wi([n,s],0),new wi([i,r],0)]}class Pg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(s<0)throw new Vl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wi.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(wi.fromNumber(s)));return i.compare(t6)===1&&(i=new wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cx(e),[s,i]=ux(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(s,i,r);if(!this.we(a))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new Pg(r,i,n);return s.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=cx(e),[s,i]=ux(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(s,i,r);this.Se(a)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Jd(le.min(),i,new Je(Ee),Os(),we())}}class tc{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new tc(s,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,s,i){this.be=e,this.removedTargetIds=n,this.key=s,this.De=i}}class JT{constructor(e,n){this.targetId=e,this.Ce=n}}class ZT{constructor(e,n,s=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class dx{constructor(){this.ve=0,this.Fe=hx(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=we(),n=we(),s=we();return this.Fe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:re(38017,{changeType:r})}}),new tc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=hx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class n6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Os(),this.Je=Lc(),this.He=Lc(),this.Ye=new Je(Ee)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const r=i.target;if(Qm(r))if(s===0){const a=new ne(r.path);this.et(n,a,Ut.newNoDocument(a,le.min()))}else je(s===1,20013,{expectedCount:s});else{const a=this._t(n);if(a!==s){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let a,l;try{a=ki(s).toUint8Array()}catch(u){if(u instanceof TT)return Da("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Pg(a,i,r)}catch(u){return Da(u instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Qm(l.target)){const u=new ne(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Ut.newNoDocument(u,e))}r.Be&&(n.set(a,r.ke()),r.qe())}});let s=we();this.He.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(r))}),this.je.forEach((r,a)=>a.setReadTime(e));const i=new Jd(e,n,this.Ye,this.je,s);return this.je=Os(),this.Je=Lc(),this.He=Lc(),this.Ye=new Je(Ee),i}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vt(Ee),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vt(Ee),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lc(){return new Je(ne.comparator)}function hx(){return new Je(ne.comparator)}const s6={asc:"ASCENDING",desc:"DESCENDING"},i6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r6={and:"AND",or:"OR"};class a6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xm(t,e){return t.useProto3Json||Gd(e)?e:{value:e}}function id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l6(t,e){return id(t,e.toTimestamp())}function Xn(t){return je(!!t,49232),le.fromTimestamp(function(n){const s=ji(n);return new Ke(s.seconds,s.nanos)}(t))}function zg(t,e){return Wm(t,e).canonicalString()}function Wm(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tA(t){const e=Pe.fromString(t);return je(aA(e),10190,{key:e.toString()}),e}function Jm(t,e){return zg(t.databaseId,e.path)}function wf(t,e){const n=tA(e);if(n.get(1)!==t.databaseId.projectId)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(sA(n))}function nA(t,e){return zg(t.databaseId,e)}function o6(t){const e=tA(t);return e.length===4?Pe.emptyPath():sA(e)}function Zm(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sA(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fx(t,e,n){return{name:Jm(t,e),fields:n.value.mapValue.fields}}function c6(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(d,h){return d.useProto3Json?(je(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?B.UNKNOWN:WT(d.code);return new X(h,d.message||"")}(a);n=new ZT(s,i,r,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=wf(t,s.document.name),r=Xn(s.document.updateTime),a=s.document.createTime?Xn(s.document.createTime):le.min(),l=new Wt({mapValue:{fields:s.document.fields}}),u=Ut.newFoundDocument(i,r,a,l),d=s.targetIds||[],h=s.removedTargetIds||[];n=new uu(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=wf(t,s.document),r=s.readTime?Xn(s.readTime):le.min(),a=Ut.newNoDocument(i,r),l=s.removedTargetIds||[];n=new uu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=wf(t,s.document),r=s.removedTargetIds||[];n=new uu([],r,i,null)}else{if(!("filter"in e))return re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,a=new JO(i,r),l=s.targetId;n=new JT(l,a)}}return n}function u6(t,e){let n;if(e instanceof ec)n={update:fx(t,e.key,e.value)};else if(e instanceof Lg)n={delete:Jm(t,e.key)};else if(e instanceof Hi)n={update:fx(t,e.key,e.data),updateMask:v6(e.fieldMask)};else{if(!(e instanceof YO))return re(16599,{Vt:e.type});n={verify:Jm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,a){const l=a.transform;if(l instanceof jo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ko)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Do)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sd)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw re(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:l6(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:re(27497)}(t,e.precondition)),n}function d6(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map(n=>function(i,r){let a=i.updateTime?Xn(i.updateTime):Xn(r);return a.isEqual(le.min())&&(a=Xn(r)),new KO(a,i.transformResults||[])}(n,e))):[]}function h6(t,e){return{documents:[nA(t,e.path)]}}function f6(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=nA(t,i);const r=function(d){if(d.length!==0)return rA(Mn.create(d,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Kr(p.field),direction:g6(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Xm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function m6(t){let e=o6(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){je(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let r=[];n.where&&(r=function(m){const p=iA(m);return p instanceof Mn&&OT(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(N){return new Io(Qr(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Gd(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,y=m.values||[];return new nd(y,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new nd(y,p)}(n.endAt)),kO(e,i,a,r,l,"F",u,d)}function p6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Qr(n.unaryFilter.field);return ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Qr(n.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qr(n.unaryFilter.field);return ft.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qr(n.unaryFilter.field);return ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return ft.create(Qr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(s=>iA(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function g6(t){return s6[t]}function y6(t){return i6[t]}function b6(t){return r6[t]}function Kr(t){return{fieldPath:t.canonicalString()}}function Qr(t){return jt.fromServerFormat(t.fieldPath)}function rA(t){return t instanceof ft?function(n){if(n.op==="=="){if(ex(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ex(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kr(n.field),op:y6(n.op),value:n.value}}}(t):t instanceof Mn?function(n){const s=n.getFilters().map(i=>rA(i));return s.length===1?s[0]:{compositeFilter:{op:b6(n.op),filters:s}}}(t):re(54877,{filter:t})}function v6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,s,i,r=le.min(),a=le.min(),l=Ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.yt=e}}function _6(t){const e=m6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.Cn=new w6}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ii.min())}updateCollectionGroup(e,n,s){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class w6{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new vt(Pe.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new vt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lA=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(lA,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new La(0)}static cr(){return new La(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="LruGarbageCollector",T6=1048576;function gx([t,e],[n,s]){const i=Ee(t,n);return i===0?Ee(e,s):i}class A6{constructor(e){this.Ir=e,this.buffer=new vt(gx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();gx(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class S6{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(px,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?J(px,"Ignoring IndexedDB error during garbage collection: ",n):await Za(n)}await this.Vr(3e5)})}}class N6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Hd.ce);const s=new A6(n);return this.mr.forEachTarget(e,i=>s.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>s.Ar(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(mx)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,i,r,a,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,n))).next(m=>(r=m,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),Hr()<=_e.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:m})))}}function C6(t,e){return new N6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.changes=new kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?F.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&so(s.mutation,i,on.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,we()).next(()=>s))}getLocalViewOfDocuments(e,n,s=we()){const i=sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let a=Ml();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,we()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,s,i){let r=Os();const a=no(),l=function(){return no()}();return n.forEach((u,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Hi)?r=r.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),so(h.mutation,d,h.mutation.getFieldMask(),Ke.now())):a.set(d.key,on.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new I6(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const s=no();let i=new Je((a,l)=>a-l),r=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=s.get(u)||on.empty();h=l.applyToLocalView(d,h),s.set(u,h);const m=(i.get(l.batchId)||we()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=FT();h.forEach(p=>{if(!r.has(p)){const y=YT(n.get(p),s.get(p));y!==null&&m.set(p,y),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(a){return ne.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const a=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):F.resolve(sr());let l=So,u=r;return a.next(d=>F.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),r.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,r)).next(()=>this.computeViews(e,u,d,we())).next(h=>({batchId:l,changes:qT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(s=>{let i=Ml();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let a=Ml();return this.indexManager.getCollectionParents(e,r).next(l=>F.forEach(l,u=>{const d=function(m,p){return new tl(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(a=>{r.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Ut.newInvalidDocument(h)))});let l=Ml();return a.forEach((u,d)=>{const h=r.get(u);h!==void 0&&so(h.mutation,d,on.empty(),Ke.now()),Yd(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:_6(i.bundledQuery),readTime:Xn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.overlays=new Je(ne.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const s=sr();return F.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.St(e,n,r)}),F.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(s)),F.resolve()}getOverlaysForCollection(e,n,s){const i=sr(),r=n.length+1,a=new ne(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&u.largestBatchId>s&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new Je((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=r.get(d.largestBatchId);h===null&&(h=sr(),r=r.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=sr(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return F.resolve(l)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new WO(n,s));let r=this.qr.get(n);r===void 0&&(r=we(),this.qr.set(n,r)),this.qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.Qr=new vt(Et.$r),this.Ur=new vt(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Et(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ne(new Pe([])),s=new Et(n,e),i=new Et(n,e+1),r=[];return this.Ur.forEachInRange([s,i],a=>{this.Gr(a),r.push(a.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ne(new Pe([])),s=new Et(n,e),i=new Et(n,e+1);let r=we();return this.Ur.forEachInRange([s,i],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new Et(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ne.comparator(e.key,n.key)||Ee(e.Yr,n.Yr)}static Kr(e,n){return Ee(e.Yr,n.Yr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vt(Et.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XO(r,n,s,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new Et(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ei(s),r=i<0?0:i;return F.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?jg:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Et(n,0),i=new Et(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],a=>{const l=this.Xr(a.Yr);r.push(l)}),F.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new vt(Ee);return n.forEach(i=>{const r=new Et(i,0),a=new Et(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],l=>{s=s.add(l.Yr)})}),F.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;ne.isDocumentKey(r)||(r=r.child(""));const a=new Et(new ne(r),0);let l=new vt(Ee);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Yr)),!0)},a),F.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const i=this.Xr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return F.forEach(n.mutations,i=>{const r=new Et(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Et(n,0),i=this.Zr.firstAfterOrEqual(s);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.ri=e,this.docs=function(){return new Je(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return F.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let s=Os();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Ut.newInvalidDocument(i))}),F.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=Os();const a=n.path,l=new ne(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||uO(cO(h),s)<=0||(i.has(h.key)||Yd(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return F.resolve(r)}getAllFromCollectionGroup(e,n,s,i){re(9500)}ii(e,n){return F.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new L6(this)}getSize(e){return F.resolve(this.size)}}class L6 extends R6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.persistence=e,this.si=new kr(n=>Og(n),Mg),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new Bg,this.targetCount=0,this.ai=La.ur()}forEachTarget(e,n){return this.si.forEach((s,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new La(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(r).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return F.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),F.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(a=>{r.push(i.markPotentiallyOrphaned(e,a))}),F.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return F.resolve(s)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Hd(0),this.li=!1,this.li=!0,this.hi=new O6,this.referenceDelegate=e(this),this.Pi=new U6(this),this.indexManager=new E6,this.remoteDocumentCache=function(i){return new V6(i)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new x6(n),this.Ii=new k6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new M6(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){J("MemoryPersistence","Starting transaction:",e);const i=new P6(this.ci.next());return this.referenceDelegate.Ei(),s(i).next(r=>this.referenceDelegate.di(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ai(e,n){return F.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class P6 extends hO{constructor(e){super(),this.currentSequenceNumber=e}}class qg{constructor(e){this.persistence=e,this.Ri=new Bg,this.Vi=null}static mi(e){return new qg(e)}get fi(){if(this.Vi)return this.Vi;throw re(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),F.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.fi.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,s=>{const i=ne.fromPath(s);return this.gi(e,i).next(r=>{r||n.removeEntry(i,le.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class rd{constructor(e,n){this.persistence=e,this.pi=new kr(s=>pO(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=C6(this,n)}static mi(e,n){return new rd(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(s,i)=>this.br(e,s,i).next(r=>r?F.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(l=>{l||(s++,r.removeEntry(a,le.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lu(e.data.value)),n}br(e,n,s){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return F.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=i}static As(e,n){let s=we(),i=we();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Fg(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xj()?8:fO(Pt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.ys(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ws(e,n,i,s).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new z6;return this.Ss(e,n,a).next(l=>{if(r.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>r.result)}bs(e,n,s,i){return s.documentReadCount<this.fs?(Hr()<=_e.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Hr()<=_e.DEBUG&&J("QueryEngine","Query:",Gr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Hr()<=_e.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):F.resolve())}ys(e,n){if(ix(n))return F.resolve(null);let s=Yn(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ym(n,null,"F"),s=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const a=we(...r);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,a,u.readTime)?this.ys(e,Ym(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,s,i){return ix(n)||i.isEqual(le.min())?F.resolve(null):this.ps.getDocuments(e,s).next(r=>{const a=this.Ds(n,r);return this.Cs(n,a,s,i)?F.resolve(null):(Hr()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gr(n)),this.vs(e,a,n,oO(i,So)).next(l=>l))})}Ds(e,n){let s=new vt(zT(e));return n.forEach((i,r)=>{Yd(e,r)&&(s=s.add(r))}),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(e,n,s){return Hr()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Gr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ii.min(),s)}vs(e,n,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="LocalStore",q6=3e8;class F6{constructor(e,n,s,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Je(Ee),this.xs=new kr(r=>Og(r),Mg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function H6(t,e,n,s){return new F6(t,e,n,s)}async function cA(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const a=[],l=[];let u=we();for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of r){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function G6(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,p=m.keys();let y=F.resolve();return p.forEach(N=>{y=y.next(()=>h.getEntry(u,N)).next(I=>{const k=d.docVersions.get(N);je(k!==null,48541),I.version.compareTo(k)<0&&(m.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),h.addEntry(I)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let u=we();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function uA(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function K6(t,e){const n=oe(t),s=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;l.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(r,h.addedDocuments,m)));let y=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Ot.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),i=i.insert(m,y),function(I,k,T){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=q6?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,y,h)&&l.push(n.Pi.updateTargetData(r,y))});let u=Os(),d=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),l.push(Q6(r,a,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!s.isEqual(le.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next(m=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s));l.push(h)}return F.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,d)).next(()=>u)}).then(r=>(n.Ms=i,r))}function Q6(t,e,n){let s=we(),i=we();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let a=Os();return n.forEach((l,u)=>{const d=r.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):J(Hg,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:i}})}function $6(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=jg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Y6(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Pi.getTargetData(s,e).next(r=>r?(i=r,F.resolve(i)):n.Pi.allocateTargetId(s).next(a=>(i=new ci(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function ep(t,e,n){const s=oe(t),i=s.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,a=>s.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!el(a))throw a;J(Hg,`Failed to update sequence numbers for target ${e}: ${a}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function yx(t,e,n){const s=oe(t);let i=le.min(),r=we();return s.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const m=oe(u),p=m.xs.get(h);return p!==void 0?F.resolve(m.Ms.get(p)):m.Pi.getTargetData(d,h)}(s,a,Yn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(a,e,n?i:le.min(),n?r:we())).next(l=>(X6(s,OO(e),l),{documents:l,Qs:r})))}function X6(t,e,n){let s=t.Os.get(e)||le.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.Os.set(e,s)}class bx{constructor(){this.activeTargetIds=zO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W6{constructor(){this.Mo=new bx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bx,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="ConnectivityMonitor";class xx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(vx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(vx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function tp(){return Uc===null?Uc=function(){return 268435456+Math.round(2147483648*Math.random())}():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="RestConnection",Z6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===ed?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,n,s,i,r){const a=tp(),l=this.zo(e,n.toUriEncodedString());J(Tf,`Sending RPC '${e}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,r);const{host:d}=new URL(l),h=Bi(d);return this.Jo(e,l,u,s,h).then(m=>(J(Tf,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Da(Tf,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",s),m})}Ho(e,n,s,i,r,a){return this.Go(e,n,s,i,r)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>e[r]=i),s&&s.headers.forEach((i,r)=>e[r]=i)}zo(e,n){const s=Z6[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class n3 extends e3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,r){const a=tp();return new Promise((l,u)=>{const d=new fT;d.setWithCredentials(!0),d.listenOnce(mT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case au.NO_ERROR:const m=d.getResponseJson();J(Vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case au.TIMEOUT:J(Vt,`RPC '${e}' ${a} timed out`),u(new X(B.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:const p=d.getStatus();if(J(Vt,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const N=y==null?void 0:y.error;if(N&&N.status&&N.message){const I=function(T){const x=T.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(x)>=0?x:B.UNKNOWN}(N.status);u(new X(I,N.message))}else u(new X(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new X(B.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{J(Vt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);J(Vt,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",h,s,15)})}T_(e,n,s){const i=tp(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yT(),l=gT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=r.join("");J(Vt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=a.createWebChannel(h,u);this.I_(m);let p=!1,y=!1;const N=new t3({Yo:k=>{y?J(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(p||(J(Vt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),J(Vt,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},Zo:()=>m.close()}),I=(k,T,x)=>{k.listen(T,_=>{try{x(_)}catch(j){setTimeout(()=>{throw j},0)}})};return I(m,Ol.EventType.OPEN,()=>{y||(J(Vt,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),I(m,Ol.EventType.CLOSE,()=>{y||(y=!0,J(Vt,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(m))}),I(m,Ol.EventType.ERROR,k=>{y||(y=!0,Da(Vt,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new X(B.UNAVAILABLE,"The operation could not be completed")))}),I(m,Ol.EventType.MESSAGE,k=>{var T;if(!y){const x=k.data[0];je(!!x,16349);const _=x,j=(_==null?void 0:_.error)||((T=_[0])==null?void 0:T.error);if(j){J(Vt,`RPC '${e}' stream ${i} received error:`,j);const L=j.status;let z=function(v){const S=ct[v];if(S!==void 0)return WT(S)}(L),w=j.message;z===void 0&&(z=B.INTERNAL,w="Unknown error status: "+L+" with message "+j.message),y=!0,N.a_(new X(z,w)),m.close()}else J(Vt,`RPC '${e}' stream ${i} received:`,x),N.u_(x)}}),I(l,pT.STAT_EVENT,k=>{k.stat===qm.PROXY?J(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===qm.NOPROXY&&J(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){return new a6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,s=1e3,i=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="PersistentStream";class hA{constructor(e,n,s,i,r,a,l,u){this.Mi=e,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Ds(n.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new X(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(_x,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(_x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s3 extends hA{constructor(e,n,s,i,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=c6(this.serializer,e),s=function(r){if(!("targetChange"in r))return le.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?Xn(a.readTime):le.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Zm(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Qm(u)?{documents:h6(r,u)}:{query:f6(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=eA(r,a.resumeToken);const d=Xm(r,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(le.min())>0){l.readTime=id(r,a.snapshotVersion.toTimestamp());const d=Xm(r,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=p6(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Zm(this.serializer),n.removeTarget=e,this.q_(n)}}class i3 extends hA{constructor(e,n,s,i,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=d6(e.writeResults,e.commitTime),s=Xn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Zm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>u6(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{}class a3 extends r3{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Go(e,Wm(n,s),i,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new X(B.UNKNOWN,r.toString())})}Ho(e,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Wm(n,s),i,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(B.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class l3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="RemoteStore";class o3{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(a=>{s.enqueueAndForget(async()=>{Dr(this)&&(J(wr,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.Ea.add(4),await nc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await eh(d)}(this))})}),this.Ra=new l3(s,i)}}async function eh(t){if(Dr(t))for(const e of t.da)await e(!0)}async function nc(t){for(const e of t.da)await e(!1)}function fA(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$g(n)?Qg(n):nl(n).O_()&&Kg(n,e))}function Gg(t,e){const n=oe(t),s=nl(n);n.Ia.delete(e),s.O_()&&mA(n,e),n.Ia.size===0&&(s.O_()?s.L_():Dr(n)&&n.Ra.set("Unknown"))}function Kg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).Y_(e)}function mA(t,e){t.Va.Ue(e),nl(t).Z_(e)}function Qg(t){t.Va=new n6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.Ra.ua()}function $g(t){return Dr(t)&&!nl(t).x_()&&t.Ia.size>0}function Dr(t){return oe(t).Ea.size===0}function pA(t){t.Va=void 0}async function c3(t){t.Ra.set("Online")}async function u3(t){t.Ia.forEach((e,n)=>{Kg(t,e)})}async function d3(t,e){pA(t),$g(t)?(t.Ra.ha(e),Qg(t)):t.Ra.set("Unknown")}async function h3(t,e,n){if(t.Ra.set("Online"),e instanceof ZT&&e.state===2&&e.cause)try{await async function(i,r){const a=r.cause;for(const l of r.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(s){J(wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ad(t,s)}else if(e instanceof uu?t.Va.Ze(e):e instanceof JT?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const s=await uA(t.localStore);n.compareTo(s)>=0&&await function(r,a){const l=r.Va.Tt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=r.Ia.get(d);h&&r.Ia.set(d,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const h=r.Ia.get(u);if(!h)return;r.Ia.set(u,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),mA(r,u);const m=new ci(h.target,u,d,h.sequenceNumber);Kg(r,m)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){J(wr,"Failed to raise snapshot:",s),await ad(t,s)}}async function ad(t,e,n){if(!el(e))throw e;t.Ea.add(1),await nc(t),t.Ra.set("Offline"),n||(n=()=>uA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(wr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await eh(t)})}function gA(t,e){return e().catch(n=>ad(t,n,e))}async function th(t){const e=oe(t),n=Oi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jg;for(;f3(e);)try{const i=await $6(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,m3(e,i)}catch(i){await ad(e,i)}yA(e)&&bA(e)}function f3(t){return Dr(t)&&t.Ta.length<10}function m3(t,e){t.Ta.push(e);const n=Oi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function yA(t){return Dr(t)&&!Oi(t).x_()&&t.Ta.length>0}function bA(t){Oi(t).start()}async function p3(t){Oi(t).ra()}async function g3(t){const e=Oi(t);for(const n of t.Ta)e.ea(n.mutations)}async function y3(t,e,n){const s=t.Ta.shift(),i=Ug.from(s,e,n);await gA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await th(t)}async function b3(t,e){e&&Oi(t).X_&&await async function(s,i){if(function(a){return ZO(a)&&a!==B.ABORTED}(i.code)){const r=s.Ta.shift();Oi(s).B_(),await gA(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await th(s)}}(t,e),yA(t)&&bA(t)}async function Ex(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),J(wr,"RemoteStore received new credentials");const s=Dr(n);n.Ea.add(3),await nc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await eh(n)}async function v3(t,e){const n=oe(t);e?(n.Ea.delete(2),await eh(n)):e||(n.Ea.add(2),await nc(n),n.Ra.set("Unknown"))}function nl(t){return t.ma||(t.ma=function(n,s,i){const r=oe(n);return r.sa(),new s3(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Xo:c3.bind(null,t),t_:u3.bind(null,t),r_:d3.bind(null,t),H_:h3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$g(t)?Qg(t):t.Ra.set("Unknown")):(await t.ma.stop(),pA(t))})),t.ma}function Oi(t){return t.fa||(t.fa=function(n,s,i){const r=oe(n);return r.sa(),new i3(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:p3.bind(null,t),r_:b3.bind(null,t),ta:g3.bind(null,t),na:y3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await th(t)):(await t.fa.stop(),t.Ta.length>0&&(J(wr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const a=Date.now()+s,l=new Yg(e,n,a,i,r);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xg(t,e){if(Ds("AsyncQueue",`${e}: ${t}`),el(t))return new X(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{static emptySet(e){return new va(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ne.comparator(n.key,s.key):(n,s)=>ne.comparator(n.key,s.key),this.keyedMap=Ml(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new va;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.ga=new Je(ne.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ua{constructor(e,n,s,i,r,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ua(e,n,va.emptySet(n),a,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _3{constructor(){this.queries=Tx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=oe(n),r=i.queries;i.queries=Tx(),r.forEach((a,l)=>{for(const u of l.Sa)u.onError(s)})})(this,new X(B.ABORTED,"Firestore shutting down"))}}function Tx(){return new kr(t=>PT(t),$d)}async function Wg(t,e){const n=oe(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.ba()&&e.Da()&&(s=2):(r=new x3,s=e.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=Xg(a,`Initialization of query '${Gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&Zg(n)}async function Jg(t,e){const n=oe(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const a=r.Sa.indexOf(e);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?i=e.Da()?0:1:!r.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function E3(t,e){const n=oe(t);let s=!1;for(const i of e){const r=i.query,a=n.queries.get(r);if(a){for(const l of a.Sa)l.Fa(i)&&(s=!0);a.wa=i}}s&&Zg(n)}function w3(t,e,n){const s=oe(t),i=s.queries.get(e);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(e)}function Zg(t){t.Ca.forEach(e=>{e.next()})}var np,Ax;(Ax=np||(np={})).Ma="default",Ax.Cache="cache";class ey{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new Ua(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.key=e}}class xA{constructor(e){this.key=e}}class T3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=we(),this.mutatedKeys=we(),this.eu=zT(e),this.tu=new va(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new wx,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),y=Yd(this.query,m)?m:null,N=!!p&&this.mutatedKeys.has(p.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let k=!1;p&&y?p.data.isEqual(y.data)?N!==I&&(s.track({type:3,doc:y}),k=!0):this.su(p,y)||(s.track({type:2,doc:y}),k=!0,(u&&this.eu(y,u)>0||d&&this.eu(y,d)<0)&&(l=!0)):!p&&y?(s.track({type:0,doc:y}),k=!0):p&&!y&&(s.track({type:1,doc:p}),k=!0,(u||d)&&(l=!0)),k&&(y?(a=a.add(y),r=I?r.add(h):r.delete(h)):(a=a.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:a,iu:s,Cs:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,m)=>function(y,N){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Rt:k})}};return I(y)-I(N)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(s),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new Ua(this.query,e.tu,r,a,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=we(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new xA(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new vA(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=we();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ty="SyncEngine";class A3{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class S3{constructor(e){this.key=e,this.hu=!1}}class N3{constructor(e,n,s,i,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new kr(l=>PT(l),$d),this.Iu=new Map,this.Eu=new Set,this.du=new Je(ne.comparator),this.Au=new Map,this.Ru=new Bg,this.Vu={},this.mu=new Map,this.fu=La.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C3(t,e,n=!0){const s=SA(t);let i;const r=s.Tu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await _A(s,e,n,!0),i}async function R3(t,e){const n=SA(t);await _A(n,e,!0,!1)}async function _A(t,e,n,s){const i=await Y6(t.localStore,Yn(e)),r=i.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return s&&(l=await I3(t,e,r,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&fA(t.remoteStore,i),l}async function I3(t,e,n,s,i){t.pu=(m,p,y)=>async function(I,k,T,x){let _=k.view.ru(T);_.Cs&&(_=await yx(I.localStore,k.query,!1).then(({documents:w})=>k.view.ru(w,_)));const j=x&&x.targetChanges.get(k.targetId),L=x&&x.targetMismatches.get(k.targetId)!=null,z=k.view.applyChanges(_,I.isPrimaryClient,j,L);return Nx(I,k.targetId,z.au),z.snapshot}(t,m,p,y);const r=await yx(t.localStore,e,!0),a=new T3(e,r.Qs),l=a.ru(r.documents),u=tc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,u);Nx(t,n,d.au);const h=new A3(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function j3(t,e,n){const s=oe(t),i=s.Tu.get(e),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter(a=>!$d(a,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await ep(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Gg(s.remoteStore,i.targetId),sp(s,i.targetId)}).catch(Za)):(sp(s,i.targetId),await ep(s.localStore,i.targetId,!0))}async function k3(t,e){const n=oe(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Gg(n.remoteStore,s.targetId))}async function D3(t,e,n){const s=z3(t);try{const i=await function(a,l){const u=oe(a),d=Ke.now(),h=l.reduce((y,N)=>y.add(N.key),we());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let N=Os(),I=we();return u.Ns.getEntries(y,h).next(k=>{N=k,N.forEach((T,x)=>{x.isValidDocument()||(I=I.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,N)).next(k=>{m=k;const T=[];for(const x of l){const _=$O(x,m.get(x.key).overlayedDocument);_!=null&&T.push(new Hi(x.key,_,jT(_.value.mapValue),Dn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,T,l)}).next(k=>{p=k;const T=k.applyToLocalDocumentSet(m,I);return u.documentOverlayCache.saveOverlays(y,k.batchId,T)})}).then(()=>({batchId:p.batchId,changes:qT(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Je(Ee)),d=d.insert(l,u),a.Vu[a.currentUser.toKey()]=d}(s,i.batchId,n),await sc(s,i.changes),await th(s.remoteStore)}catch(i){const r=Xg(i,"Failed to persist write");n.reject(r)}}async function EA(t,e){const n=oe(t);try{const s=await K6(n.localStore,e);e.targetChanges.forEach((i,r)=>{const a=n.Au.get(r);a&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?je(a.hu,14607):i.removedDocuments.size>0&&(je(a.hu,42227),a.hu=!1))}),await sc(n,s,e)}catch(s){await Za(s)}}function Sx(t,e,n){const s=oe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((r,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=oe(a);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(d=!0)}),d&&Zg(u)}(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O3(t,e,n){const s=oe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),r=i&&i.key;if(r){let a=new Je(ne.comparator);a=a.insert(r,Ut.newNoDocument(r,le.min()));const l=we().add(r),u=new Jd(le.min(),new Map,new Je(Ee),a,l);await EA(s,u),s.du=s.du.remove(r),s.Au.delete(e),ny(s)}else await ep(s.localStore,e,!1).then(()=>sp(s,e,n)).catch(Za)}async function M3(t,e){const n=oe(t),s=e.batch.batchId;try{const i=await G6(n.localStore,e);TA(n,s,null),wA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await sc(n,i)}catch(i){await Za(i)}}async function V3(t,e,n){const s=oe(t);try{const i=await function(a,l){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(je(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(s.localStore,e);TA(s,e,n),wA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await sc(s,i)}catch(i){await Za(i)}}function wA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function TA(t,e,n){const s=oe(t);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function sp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||AA(t,s)})}function AA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ny(t))}function Nx(t,e,n){for(const s of n)s instanceof vA?(t.Ru.addReference(s.key,e),L3(t,s)):s instanceof xA?(J(ty,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||AA(t,s.key)):re(19791,{wu:s})}function L3(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(J(ty,"New document in limbo: "+n),t.Eu.add(s),ny(t))}function ny(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ne(Pe.fromString(e)),s=t.fu.next();t.Au.set(s,new S3(n)),t.du=t.du.insert(n,s),fA(t.remoteStore,new ci(Yn(Qd(n.path)),s,"TargetPurposeLimboResolution",Hd.ce))}}async function sc(t,e,n){const s=oe(t),i=[],r=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((l,u)=>{a.push(s.pu(u,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Fg.As(u.targetId,d);r.push(m)}}))}),await Promise.all(a),s.Pu.H_(i),await async function(u,d){const h=oe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,p=>F.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>F.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!el(m))throw m;J(Hg,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=h.Ms.get(p),N=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(p,I)}}}(s.localStore,r))}async function U3(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){J(ty,"User change. New user:",e.toKey());const s=await cA(n.localStore,e);n.currentUser=e,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new X(B.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await sc(n,s.Ls)}}function P3(t,e){const n=oe(t),s=n.Au.get(e);if(s&&s.hu)return we().add(s.key);{let i=we();const r=n.Iu.get(e);if(!r)return i;for(const a of r){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function SA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O3.bind(null,e),e.Pu.H_=E3.bind(null,e.eventManager),e.Pu.yu=w3.bind(null,e.eventManager),e}function z3(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V3.bind(null,e),e}class ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return H6(this.persistence,new B6,e.initialUser,this.serializer)}Cu(e){return new oA(qg.mi,this.serializer)}Du(e){return new W6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ld.provider={build:()=>new ld};class B3 extends ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){je(this.persistence.referenceDelegate instanceof rd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new S6(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new oA(s=>rd.mi(s,n),this.serializer)}}class ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Sx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=U3.bind(null,this.syncEngine),await v3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _3}()}createDatastore(e){const n=Zd(e.databaseInfo.databaseId),s=function(r){return new n3(r)}(e.databaseInfo);return function(r,a,l,u){return new a3(r,a,l,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,a,l){return new o3(s,i,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Sx(this.syncEngine,n,0),function(){return xx.v()?new xx:new J6}())}createSyncEngine(e,n){return function(i,r,a,l,u,d,h){const m=new N3(i,r,a,l,u,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const r=oe(i);J(wr,"RemoteStore shutting down."),r.Ea.add(5),await nc(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ip.provider={build:()=>new ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="FirestoreClient";class q3{constructor(e,n,s,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=Ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async a=>{J(Mi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(J(Mi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Xg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Sf(t,e){t.asyncQueue.verifyOperationInProgress(),J(Mi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await cA(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Cx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await F3(t);J(Mi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Ex(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Ex(e.remoteStore,i)),t._onlineComponents=e}async function F3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Mi,"Using user provided OfflineComponentProvider");try{await Sf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await Sf(t,new ld)}}else J(Mi,"Using default OfflineComponentProvider"),await Sf(t,new B3(void 0));return t._offlineComponents}async function NA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Mi,"Using user provided OnlineComponentProvider"),await Cx(t,t._uninitializedComponentsProvider._online)):(J(Mi,"Using default OnlineComponentProvider"),await Cx(t,new ip))),t._onlineComponents}function H3(t){return NA(t).then(e=>e.syncEngine)}async function od(t){const e=await NA(t),n=e.eventManager;return n.onListen=C3.bind(null,e.syncEngine),n.onUnlisten=j3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=R3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k3.bind(null,e.syncEngine),n}function G3(t,e,n={}){const s=new Ts;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,d){const h=new sy({next:p=>{h.Nu(),a.enqueueAndForget(()=>Jg(r,m));const y=p.docs.has(l);!y&&p.fromCache?d.reject(new X(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new X(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new ey(Qd(l.path),h,{includeMetadataChanges:!0,qa:!0});return Wg(r,m)}(await od(t),t.asyncQueue,e,n,s)),s.promise}function K3(t,e,n={}){const s=new Ts;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,d){const h=new sy({next:p=>{h.Nu(),a.enqueueAndForget(()=>Jg(r,m)),p.fromCache&&u.source==="server"?d.reject(new X(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new ey(l,h,{includeMetadataChanges:!0,qa:!0});return Wg(r,m)}(await od(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="firestore.googleapis.com",Ix=!0;class jx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RA,this.ssl=Ix}else this.host=e.host,this.ssl=e.ssl??Ix;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T6)throw new X(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CA(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nh{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new WD;switch(s.type){case"firstParty":return new tO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new X(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Rx.get(n);s&&(J("ComponentProvider","Removing Datastore"),Rx.delete(n),s.terminate())}(this),Promise.resolve()}}function IA(t,e,n,s={}){var d;t=Nn(t,nh);const i=Bi(e),r=t._getSettings(),a={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(pg(`https://${l}`),gg("Firestore",!0)),r.host!==RA&&r.host!==l&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:i,emulatorOptions:s};if(!vr(u,a)&&(t._setSettings(u),s.mockUserToken)){let h,m;if(typeof s.mockUserToken=="string")h=s.mockUserToken,m=Lt.MOCK_USER;else{h=A1(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new X(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Lt(p)}t._authCredentials=new JD(new vT(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class lt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}toJSON(){return{type:lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Zo(n,lt._jsonSchema))return new lt(e,s||null,new ne(Pe.fromString(n.referencePath)))}}lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:pt("string",lt._jsonSchemaVersion),referencePath:pt("string")};class Ti extends Gi{constructor(e,n,s){super(e,n,Qd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new ne(e))}withConverter(e){return new Ti(this.firestore,e,this._path)}}function Mt(t,e,...n){if(t=Xe(t),xT("collection","path",e),t instanceof nh){const s=Pe.fromString(e,...n);return Hv(s),new Ti(t,null,s)}{if(!(t instanceof lt||t instanceof Ti))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Pe.fromString(e,...n));return Hv(s),new Ti(t.firestore,null,s)}}function es(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=Ig.newId()),xT("doc","path",e),t instanceof nh){const s=Pe.fromString(e,...n);return Fv(s),new lt(t,null,new ne(s))}{if(!(t instanceof lt||t instanceof Ti))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Pe.fromString(e,...n));return Fv(s),new lt(t.firestore,t instanceof Ti?t.converter:null,new ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="AsyncQueue";class Dx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dA(this,"async_queue_retry"),this._c=()=>{const s=Af();s&&J(kx,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Af();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Af();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ts;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;J(kx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",Ox(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Yg.createAndSchedule(this,e,n,s,r=>this.hc(r));return this.tc.push(i),i}uc(){this.nc&&re(47125,{Pc:Ox(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ox(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Vi extends nh{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new Dx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dx(e),this._firestoreClient=void 0,await e}}}function Q3(t,e){const n=typeof t=="object"?t:vg(),s=typeof t=="string"?t:ed,i=Ud(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=E1("firestore");r&&IA(i,...r)}return i}function sh(t){if(t._terminated)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$3(t),t._firestoreClient}function $3(t){var s,i,r;const e=t._freezeSettings(),n=function(l,u,d,h){return new bO(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,CA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new q3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tn(Ot.fromBase64String(e))}catch(n){throw new X(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zo(e,Tn._jsonSchema))return Tn.fromBase64String(e.bytes)}}Tn._jsonSchemaVersion="firestore/bytes/1.0",Tn._jsonSchema={type:pt("string",Tn._jsonSchemaVersion),bytes:pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wn._jsonSchemaVersion}}static fromJSON(e){if(Zo(e,Wn._jsonSchema))return new Wn(e.latitude,e.longitude)}}Wn._jsonSchemaVersion="firestore/geoPoint/1.0",Wn._jsonSchema={type:pt("string",Wn._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zo(e,Jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jn(e.vectorValues);throw new X(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:pt("string",Jn._jsonSchemaVersion),vectorValues:pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=/^__.*__$/;class X3{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ec(e,this.data,n,this.fieldTransforms)}}class jA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ac:t})}}class iy{constructor(e,n,s,i,r,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new iy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kA(this.Ac)&&Y3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class W3{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Zd(e)}Cc(e,n,s,i=!1){return new iy({Ac:e,methodName:n,Dc:s,path:jt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ry(t){const e=t._freezeSettings(),n=Zd(t._databaseId);return new W3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function J3(t,e,n,s,i,r={}){const a=t.Cc(r.merge||r.mergeFields?2:0,e,n,i);ly("Data must be an object, but it was:",a,s);const l=DA(s,a);let u,d;if(r.merge)u=new on(a.fieldMask),d=a.fieldTransforms;else if(r.mergeFields){const h=[];for(const m of r.mergeFields){const p=rp(e,m,n);if(!a.contains(p))throw new X(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);MA(h,p)||h.push(p)}u=new on(h),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new X3(new Wt(l),u,d)}class ah extends rh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}class ay extends rh{_toFieldTransform(e){return new HO(e.path,new jo)}isEqual(e){return e instanceof ay}}function Z3(t,e,n,s){const i=t.Cc(1,e,n);ly("Data must be an object, but it was:",i,s);const r=[],a=Wt.empty();Fi(s,(u,d)=>{const h=oy(e,u,n);d=Xe(d);const m=i.yc(h);if(d instanceof ah)r.push(h);else{const p=ic(d,m);p!=null&&(r.push(h),a.set(h,p))}});const l=new on(r);return new jA(a,l,i.fieldTransforms)}function eM(t,e,n,s,i,r){const a=t.Cc(1,e,n),l=[rp(e,s,n)],u=[i];if(r.length%2!=0)throw new X(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)l.push(rp(e,r[p])),u.push(r[p+1]);const d=[],h=Wt.empty();for(let p=l.length-1;p>=0;--p)if(!MA(d,l[p])){const y=l[p];let N=u[p];N=Xe(N);const I=a.yc(y);if(N instanceof ah)d.push(y);else{const k=ic(N,I);k!=null&&(d.push(y),h.set(y,k))}}const m=new on(d);return new jA(h,m,a.fieldTransforms)}function tM(t,e,n,s=!1){return ic(n,t.Cc(s?4:3,e))}function ic(t,e){if(OA(t=Xe(t)))return ly("Unsupported field value:",e,t),DA(t,e);if(t instanceof rh)return function(s,i){if(!kA(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,i){const r=[];let a=0;for(const l of s){let u=ic(l,i.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=Xe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return BO(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Ke.fromDate(s);return{timestampValue:id(i.serializer,r)}}if(s instanceof Ke){const r=new Ke(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:id(i.serializer,r)}}if(s instanceof Wn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Tn)return{bytesValue:eA(i.serializer,s._byteString)};if(s instanceof lt){const r=i.databaseId,a=s.firestore._databaseId;if(!a.isEqual(r))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:zg(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Jn)return function(a,l){return{mapValue:{fields:{[RT]:{stringValue:IT},[td]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Vg(l.serializer,d)})}}}}}}(s,i);throw i.Sc(`Unsupported field value: ${Fd(s)}`)}(t,e)}function DA(t,e){const n={};return wT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(s,i)=>{const r=ic(i,e.mc(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function OA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Wn||t instanceof Tn||t instanceof lt||t instanceof rh||t instanceof Jn)}function ly(t,e,n){if(!OA(n)||!_T(n)){const s=Fd(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function rp(t,e,n){if((e=Xe(e))instanceof ih)return e._internalPath;if(typeof e=="string")return oy(t,e);throw cd("Field path arguments must be of type string or ",t,!1,void 0,n)}const nM=new RegExp("[~\\*/\\[\\]]");function oy(t,e,n){if(e.search(nM)>=0)throw cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ih(...e.split("."))._internalPath}catch{throw cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cd(t,e,n,s,i){const r=s&&!s.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${s}`),a&&(u+=` in document ${i}`),u+=")"),new X(B.INVALID_ARGUMENT,l+t+u)}function MA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sM extends VA{data(){return super.data()}}function lh(t,e){return typeof e=="string"?oy(t,e):e instanceof ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cy{}class UA extends cy{}function Ln(t,e,...n){let s=[];e instanceof cy&&s.push(e),s=s.concat(n),function(r){const a=r.filter(u=>u instanceof uy).length,l=r.filter(u=>u instanceof oh).length;if(a>1||a>0&&l>0)throw new X(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class oh extends UA{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new oh(e,n,s)}_apply(e){const n=this._parse(e);return PA(e._query,n),new Gi(e.firestore,e.converter,$m(e._query,n))}_parse(e){const n=ry(e.firestore);return function(r,a,l,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Lx(m,h);const N=[];for(const I of m)N.push(Vx(u,r,I));p={arrayValue:{values:N}}}else p=Vx(u,r,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Lx(m,h),p=tM(l,a,m,h==="in"||h==="not-in");return ft.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ms(t,e,n){const s=e,i=lh("where",t);return oh._create(i,s,n)}class uy extends cy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uy(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let a=i;const l=r.getFlattenedFilters();for(const u of l)PA(a,u),a=$m(a,u)}(e._query,n),new Gi(e.firestore,e.converter,$m(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dy extends UA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dy(e,n)}_apply(e){const n=function(i,r,a){if(i.startAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Io(r,a)}(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,function(i,r){const a=i.explicitOrderBy.concat([r]);return new tl(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Or(t,e="asc"){const n=e,s=lh("orderBy",t);return dy._create(s,n)}function Vx(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new X(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UT(e)&&n.indexOf("/")!==-1)throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Pe.fromString(n));if(!ne.isDocumentKey(s))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Jv(t,new ne(s))}if(n instanceof lt)return Jv(t,n._key);throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(n)}.`)}function Lx(t,e){if(!Array.isArray(t)||t.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PA(t,e){const n=function(i,r){for(const a of i)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iM{convertValue(e,n="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fi(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(e){var s,i,r;const n=(r=(i=(s=e.fields)==null?void 0:s[td].arrayValue)==null?void 0:i.values)==null?void 0:r.map(a=>rt(a.doubleValue));return new Jn(n)}convertGeoPoint(e){return new Wn(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Kd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(No(e));default:return null}}convertTimestamp(e){const n=ji(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Pe.fromString(e);je(aA(s),9688,{name:e});const i=new Co(s.get(1),s.get(3)),r=new ne(s.popFirst(5));return i.isEqual(n)||Ds(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Ll{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ur extends VA{constructor(e,n,s,i,r,a){super(e,n,s,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(lh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ur._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",ur._jsonSchema={type:pt("string",ur._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class du extends ur{data(e={}){return super.data(e)}}class dr{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ll(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new du(this._firestore,this._userDataWriter,s.key,s,new Ll(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new du(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ll(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new du(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ll(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:aM(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){t=Nn(t,lt);const e=Nn(t.firestore,Vi);return G3(sh(e),t._key).then(n=>zA(e,t,n))}dr._jsonSchemaVersion="firestore/querySnapshot/1.0",dr._jsonSchema={type:pt("string",dr._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};class hy extends iM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function oM(t){t=Nn(t,Gi);const e=Nn(t.firestore,Vi),n=sh(e),s=new hy(e);return LA(t._query),K3(n,t._query).then(i=>new dr(e,s,t,i))}function cM(t,e,n,...s){t=Nn(t,lt);const i=Nn(t.firestore,Vi),r=ry(i);let a;return a=typeof(e=Xe(e))=="string"||e instanceof ih?eM(r,"updateDoc",t._key,e,n,s):Z3(r,"updateDoc",t._key,e),fy(i,[a.toMutation(t._key,Dn.exists(!0))])}function uM(t){return fy(Nn(t.firestore,Vi),[new Lg(t._key,Dn.none())])}function ch(t,e){const n=Nn(t.firestore,Vi),s=es(t),i=rM(t.converter,e);return fy(n,[J3(ry(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,Dn.exists(!1))]).then(()=>s)}function St(t,...e){var u,d,h;t=Xe(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Mx(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Mx(e[s])){const m=e[s];e[s]=(u=m.next)==null?void 0:u.bind(m),e[s+1]=(d=m.error)==null?void 0:d.bind(m),e[s+2]=(h=m.complete)==null?void 0:h.bind(m)}let r,a,l;if(t instanceof lt)a=Nn(t.firestore,Vi),l=Qd(t._key.path),r={next:m=>{e[s]&&e[s](zA(a,t,m))},error:e[s+1],complete:e[s+2]};else{const m=Nn(t,Gi);a=Nn(m.firestore,Vi),l=m._query;const p=new hy(a);r={next:y=>{e[s]&&e[s](new dr(a,p,m,y))},error:e[s+1],complete:e[s+2]},LA(t._query)}return function(p,y,N,I){const k=new sy(I),T=new ey(y,k,N);return p.asyncQueue.enqueueAndForget(async()=>Wg(await od(p),T)),()=>{k.Nu(),p.asyncQueue.enqueueAndForget(async()=>Jg(await od(p),T))}}(sh(a),l,i,r)}function fy(t,e){return function(s,i){const r=new Ts;return s.asyncQueue.enqueueAndForget(async()=>D3(await H3(s),i,r)),r.promise}(sh(t),e)}function zA(t,e,n){const s=n.docs.get(e._key),i=new hy(t);return new ur(t,i,e._key,s,new Ll(n.hasPendingWrites,n.fromCache),e.converter)}function hr(){return new ay("serverTimestamp")}(function(e,n=!0){(function(i){Ja=i})(Ir),xr(new Ri("firestore",(s,{instanceIdentifier:i,options:r})=>{const a=s.getProvider("app").getImmediate(),l=new Vi(new ZD(s.getProvider("auth-internal")),new nO(a,s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(d.options.projectId,h)}(a,i),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Kn(Pv,zv,e),Kn(Pv,zv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebasestorage.googleapis.com",qA="storageBucket",dM=2*60*1e3,hM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends as{constructor(e,n,s=0){super(Nf(e),`Firebase Storage: ${n} (${Nf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function Nf(t){return"storage/"+t}function my(){const t="An unknown error occurred, please check the error payload for server response.";return new it(st.UNKNOWN,t)}function fM(t){return new it(st.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mM(t){return new it(st.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(st.UNAUTHENTICATED,t)}function gM(){return new it(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yM(t){return new it(st.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bM(){return new it(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vM(){return new it(st.CANCELED,"User canceled the upload/download.")}function xM(t){return new it(st.INVALID_URL,"Invalid URL '"+t+"'.")}function _M(t){return new it(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function EM(){return new it(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qA+"' property when initializing the app?")}function wM(){return new it(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TM(){return new it(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AM(t){return new it(st.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ap(t){return new it(st.INVALID_ARGUMENT,t)}function FA(){return new it(st.APP_DELETED,"The Firebase app was deleted.")}function SM(t){return new it(st.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function io(t,e){return new it(st.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Sl(t){throw new it(st.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=cn.makeFromUrl(e,n)}catch{return new cn(e,"")}if(s.path==="")return s;throw _M(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${h}/b/${i}/o${p}`,"i"),N={bucket:1,path:3},I=n===BA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",T=new RegExp(`^https?://${I}/${i}/${k}`,"i"),_=[{regex:l,indices:u,postModify:r},{regex:y,indices:N,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<_.length;j++){const L=_[j],z=L.regex.exec(e);if(z){const w=z[L.indices.bucket];let b=z[L.indices.path];b||(b=""),s=new cn(w,b),L.postModify(s);break}}if(s==null)throw xM(e);return s}}class NM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t,e,n){let s=1,i=null,r=null,a=!1,l=0;function u(){return l===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,t(y,u())},k)}function p(){r&&clearTimeout(r)}function y(k,...T){if(d){p();return}if(k){p(),h.call(null,k,...T);return}if(u()||a){p(),h.call(null,k,...T);return}s<64&&(s*=2);let _;l===1?(l=2,_=0):_=(s+Math.random())*1e3,m(_)}let N=!1;function I(k){N||(N=!0,p(),!d&&(i!==null?(k||(l=2),clearTimeout(i),m(0)):k||(l=1)))}return m(0),r=setTimeout(()=>{a=!0,I(!0)},n),I}function RM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){return t!==void 0}function jM(t){return typeof t=="object"&&!Array.isArray(t)}function py(t){return typeof t=="string"||t instanceof String}function Ux(t){return gy()&&t instanceof Blob}function gy(){return typeof Blob<"u"}function Px(t,e,n,s){if(s<e)throw ap(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw ap(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function HA(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var fr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fr||(fr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,s,i,r,a,l,u,d,h,m,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,I)=>{this.resolve_=N,this.reject_=I,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new Pc(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const a=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;const l=r.getErrorCode()===fr.NO_ERROR,u=r.getStatus();if(!l||kM(u,this.additionalRetryCodes_)&&this.retry){const h=r.getErrorCode()===fr.ABORT;s(!1,new Pc(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;s(!0,new Pc(d,r))})},n=(s,i)=>{const r=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());IM(u)?r(u):r()}catch(u){a(u)}else if(l!==null){const u=my();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(i.canceled){const u=this.appDelete_?FA():vM();a(u)}else{const u=bM();a(u)}};this.canceled_?n(!1,new Pc(!1,null,!0)):this.backoffId_=CM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pc{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function OM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UM(t,e,n,s,i,r,a=!0,l=!1){const u=HA(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return VM(h,e),OM(h,n),MM(h,r),LM(h,s),new DM(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zM(...t){const e=PM();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(gy())return new Blob(t);throw new it(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t){if(typeof atob>"u")throw AM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cf{constructor(e,n){this.data=e,this.contentType=n||null}}function FM(t,e){switch(t){case Hn.RAW:return new Cf(GA(e));case Hn.BASE64:case Hn.BASE64URL:return new Cf(KA(t,e));case Hn.DATA_URL:return new Cf(GM(e),KM(e))}throw my()}function GA(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,a=t.charCodeAt(++n);s=65536|(r&1023)<<10|a&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function HM(t){let e;try{e=decodeURIComponent(t)}catch{throw io(Hn.DATA_URL,"Malformed data URL.")}return GA(e)}function KA(t,e){switch(t){case Hn.BASE64:{const i=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(i||r)throw io(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hn.BASE64URL:{const i=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(i||r)throw io(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qM(e)}catch(i){throw i.message.includes("polyfill")?i:io(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class QA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw io(Hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=QM(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function GM(t){const e=new QA(t);return e.base64?KA(Hn.BASE64,e.rest):HM(e.rest)}function KM(t){return new QA(t).contentType}function QM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){let s=0,i="";Ux(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ux(this.data_)){const s=this.data_,i=BM(s,e,n);return i===null?null:new ni(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new ni(s,!0)}}static getBlob(...e){if(gy()){const n=e.map(s=>s instanceof ni?s.data_:s);return new ni(zM.apply(null,n))}else{const n=e.map(a=>py(a)?FM(Hn.RAW,a).data:a.data_);let s=0;n.forEach(a=>{s+=a.byteLength});const i=new Uint8Array(s);let r=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)i[r++]=a[l]}),new ni(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){let e;try{e=JSON.parse(t)}catch{return null}return jM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function YM(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function YA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t,e){return e}class Bt{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||XM}}let zc=null;function WM(t){return!py(t)||t.length<2?t:YA(t)}function XA(){if(zc)return zc;const t=[];t.push(new Bt("bucket")),t.push(new Bt("generation")),t.push(new Bt("metageneration")),t.push(new Bt("name","fullPath",!0));function e(r,a){return WM(a)}const n=new Bt("name");n.xform=e,t.push(n);function s(r,a){return a!==void 0?Number(a):a}const i=new Bt("size");return i.xform=s,t.push(i),t.push(new Bt("timeCreated")),t.push(new Bt("updated")),t.push(new Bt("md5Hash",null,!0)),t.push(new Bt("cacheControl",null,!0)),t.push(new Bt("contentDisposition",null,!0)),t.push(new Bt("contentEncoding",null,!0)),t.push(new Bt("contentLanguage",null,!0)),t.push(new Bt("contentType",null,!0)),t.push(new Bt("metadata","customMetadata",!0)),zc=t,zc}function JM(t,e){function n(){const s=t.bucket,i=t.fullPath,r=new cn(s,i);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:n})}function ZM(t,e,n){const s={};s.type="file";const i=n.length;for(let r=0;r<i;r++){const a=n[r];s[a.local]=a.xform(s,e[a.server])}return JM(s,t),s}function WA(t,e,n){const s=$A(e);return s===null?null:ZM(t,s,n)}function e5(t,e,n,s){const i=$A(e);if(i===null||!py(i.downloadTokens))return null;const r=i.downloadTokens;if(r.length===0)return null;const a=encodeURIComponent;return r.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+a(h)+"/o/"+a(m),y=uh(p,n,s),N=HA({alt:"media",token:d});return y+N})[0]}function t5(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const r=e[i];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class yy{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){if(!t)throw my()}function n5(t,e){function n(s,i){const r=WA(t,i,e);return JA(r!==null),r}return n}function s5(t,e){function n(s,i){const r=WA(t,i,e);return JA(r!==null),e5(r,i,t.host,t._protocol)}return n}function ZA(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=gM():i=pM():n.getStatus()===402?i=mM(t.bucket):n.getStatus()===403?i=yM(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function e2(t){const e=ZA(t);function n(s,i){let r=e(s,i);return s.getStatus()===404&&(r=fM(t.path)),r.serverResponse=i.serverResponse,r}return n}function i5(t,e,n){const s=e.fullServerUrl(),i=uh(s,t.host,t._protocol),r="GET",a=t.maxOperationRetryTime,l=new yy(i,r,s5(t,n),a);return l.errorHandler=e2(e),l}function r5(t,e){const n=e.fullServerUrl(),s=uh(n,t.host,t._protocol),i="DELETE",r=t.maxOperationRetryTime;function a(u,d){}const l=new yy(s,i,a,r);return l.successCodes=[200,204],l.errorHandler=e2(e),l}function a5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function l5(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=a5(null,e)),s}function o5(t,e,n,s,i){const r=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let j=0;j<2;j++)_=_+Math.random().toString().slice(2);return _}const u=l();a["Content-Type"]="multipart/related; boundary="+u;const d=l5(e,s,i),h=t5(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",y=ni.getBlob(m,s,p);if(y===null)throw wM();const N={name:d.fullPath},I=uh(r,t.host,t._protocol),k="POST",T=t.maxUploadRetryTime,x=new yy(I,k,n5(t,n),T);return x.urlParams=N,x.headers=a,x.body=y.uploadData(),x.errorHandler=ZA(e),x}class c5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i,r){if(this.sent_)throw Sl("cannot .send() more than once");if(Bi(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const a in r)r.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,r[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class u5 extends c5{initXhr(){this.xhr_.responseType="text"}}function by(){return new u5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){this._service=e,n instanceof cn?this._location=n:this._location=cn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Tr(e,n)}get root(){const e=new cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YA(this._location.path)}get storage(){return this._service}get parent(){const e=$M(this._location.path);if(e===null)return null;const n=new cn(this._location.bucket,e);return new Tr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SM(e)}}function d5(t,e,n){t._throwIfRoot("uploadBytes");const s=o5(t.storage,t._location,XA(),new ni(e,!0),n);return t.storage.makeRequestWithTokens(s,by).then(i=>({metadata:i,ref:t}))}function h5(t){t._throwIfRoot("getDownloadURL");const e=i5(t.storage,t._location,XA());return t.storage.makeRequestWithTokens(e,by).then(n=>{if(n===null)throw TM();return n})}function f5(t){t._throwIfRoot("deleteObject");const e=r5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,by)}function m5(t,e){const n=YM(t._location.path,e),s=new cn(t._location.bucket,n);return new Tr(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t){return/^[A-Za-z]+:\/\//.test(t)}function g5(t,e){return new Tr(t,e)}function t2(t,e){if(t instanceof vy){const n=t;if(n._bucket==null)throw EM();const s=new Tr(n,n._bucket);return e!=null?t2(s,e):s}else return e!==void 0?m5(t,e):t}function y5(t,e){if(e&&p5(e)){if(t instanceof vy)return g5(t,e);throw ap("To use ref(service, url), the first argument must be a Storage instance.")}else return t2(t,e)}function zx(t,e){const n=e==null?void 0:e[qA];return n==null?null:cn.makeFromBucketSpec(n,t)}function b5(t,e,n,s={}){t.host=`${e}:${n}`;const i=Bi(e);i&&(pg(`https://${t.host}/b`),gg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:r}=s;r&&(t._overrideAuthToken=typeof r=="string"?r:A1(r,t.app.options.projectId))}class vy{constructor(e,n,s,i,r,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=a,this._bucket=null,this._host=BA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dM,this._maxUploadRetryTime=hM,this._requests=new Set,i!=null?this._bucket=cn.makeFromBucketSpec(i,this._host):this._bucket=zx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cn.makeFromBucketSpec(this._url,e):this._bucket=zx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Px("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Px("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tr(this,e)}_makeRequest(e,n,s,i,r=!0){if(this._deleted)return new NM(FA());{const a=UM(e,this._appId,s,i,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const Bx="@firebase/storage",qx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="storage";function v5(t,e,n){return t=Xe(t),d5(t,e,n)}function s2(t){return t=Xe(t),h5(t)}function x5(t){return t=Xe(t),f5(t)}function xy(t,e){return t=Xe(t),y5(t,e)}function _5(t=vg(),e){t=Xe(t);const s=Ud(t,n2).getImmediate({identifier:e}),i=E1("storage");return i&&i2(s,...i),s}function i2(t,e,n,s={}){b5(t,e,n,s)}function E5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new vy(n,s,i,e,Ir)}function w5(){xr(new Ri(n2,E5,"PUBLIC").setMultipleInstances(!0)),Kn(Bx,qx,""),Kn(Bx,qx,"esm2020")}w5();const Rf={},T5={apiKey:"fake-api-key",authDomain:"localhost",projectId:"evcwebsite12345",storageBucket:"evcwebsite12345.firebasestorage.app"},_y=C1(T5),Li=YD(_y),Be=Q3(_y),dh=_5(_y),A5=typeof window<"u"&&["localhost","127.0.0.1","::1"].includes(window.location.hostname),S5=(Rf==null?void 0:Rf.VITE_USE_EMULATORS)==="true"||A5;let Fx=!1;if(!Fx&&S5){try{X1(Li,"http://localhost:9099")}catch{}try{IA(Be,"localhost",8080)}catch{}try{i2(dh,"localhost",9199)}catch{}Fx=!0}const N5=[{label:"Admin  Dashboard",to:"/admin"},{label:"Admin  Assignments",to:"/admin/assignments"},{label:"Admin  Trajects",to:"/admin/trajects"},{label:"Admin  Users",to:"/admin/users"},{label:"Admin  Profile",to:"/admin/profile"},{label:"Coach  Dashboard",to:"/coach"},{label:"Coach  My Customers",to:"/coach/customers"},{label:"Coach  Feedback",to:"/coach/feedback"},{label:"Coach  Messages",to:"/coach/messages"},{label:"Customer  Dashboard",to:"/customer/dashboard"},{label:"Customer  Messages",to:"/customer/messages"},{label:"Customer  Profile",to:"/customer/profile"},{label:"Test  Create Account",to:"/testing/create-account",badge:"DEV"}],C5=()=>{const t=is(),e=zi(),[n,s]=A.useState(!1),[i,r]=A.useState(()=>!!localStorage.getItem("token"));A.useEffect(()=>{const h=Sg(Li,m=>{r(!!m||!!localStorage.getItem("token"))});return()=>h()},[]);const a=A.useMemo(()=>N5.map(h=>({...h,active:e.pathname===h.to||e.pathname.startsWith(`${h.to}/`)})),[e.pathname]),l=h=>{t(h),s(!1)},u=async()=>{try{await tT(Li)}catch{}localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("impersonationBackup"),r(!1),t("/login",{replace:!0}),s(!1)},d=()=>{t("/login"),s(!1)};return c.jsxs("header",{className:"sticky top-0 z-30 border-b border-evc-blue-500/40 bg-evc-blue-600/95 text-white backdrop-blur",children:[c.jsxs("div",{className:"mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Md,{className:"inline-flex shrink-0",tone:"dark"}),c.jsx("button",{type:"button",onClick:()=>l("/"),className:"text-sm font-medium text-white transition hover:text-white/80",children:"EVC Portfolio"})]}),c.jsx("nav",{className:"hidden items-center gap-6 text-sm font-medium text-white/80 md:flex",children:a.map(h=>c.jsxs("button",{type:"button",onClick:()=>l(h.to),className:`relative inline-flex items-center gap-2 transition hover:text-white ${h.active?"text-white":""}`,children:[c.jsx("span",{children:h.label}),h.badge?c.jsx("span",{className:"rounded-full bg-white/10 px-2 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-white/90",children:h.badge}):null,h.active&&c.jsx("span",{className:"absolute -bottom-2 left-0 right-0 h-0.5 rounded-full bg-white"})]},h.to))}),c.jsxs("div",{className:"flex items-center gap-3",children:[i?c.jsxs("button",{type:"button",onClick:u,className:"hidden items-center gap-2 rounded-full border border-white/40 px-4 py-2 text-sm font-medium text-white transition hover:border-white hover:bg-white/10 md:inline-flex",children:[c.jsx(nv,{className:"h-4 w-4"}),c.jsx("span",{children:"Logout"})]}):c.jsxs("button",{type:"button",onClick:d,className:"hidden items-center gap-2 rounded-full border border-white/40 px-4 py-2 text-sm font-medium text-white transition hover:border-white hover:bg-white/10 md:inline-flex",children:[c.jsx(km,{className:"h-4 w-4"}),c.jsx("span",{children:"Login"})]}),c.jsx("button",{type:"button",onClick:()=>s(h=>!h),className:"inline-flex items-center justify-center rounded-full border border-white/40 p-2 text-white transition hover:border-white hover:text-white md:hidden","aria-label":"Toggle navigation",children:n?c.jsx(ZI,{className:"h-5 w-5"}):c.jsx(f1,{className:"h-5 w-5"})})]})]}),n&&c.jsx("div",{className:"border-t border-white/20 bg-evc-blue-600/95 text-white md:hidden",children:c.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-1 px-4 py-3 text-sm font-medium text-white/80",children:[a.map(h=>c.jsxs("button",{type:"button",onClick:()=>l(h.to),className:`flex items-center justify-between rounded-lg px-3 py-2 text-left transition hover:bg-white/10 ${h.active?"bg-white/10 text-white":""}`,children:[c.jsxs("span",{className:"flex items-center gap-2",children:[h.label,h.badge?c.jsx("span",{className:"rounded-full bg-white/10 px-2 py-0.5 text-[0.6rem] font-semibold uppercase tracking-wide text-white/90",children:h.badge}):null]}),h.active&&c.jsx("span",{className:"text-xs font-semibold uppercase text-white",children:"Now"})]},h.to)),i?c.jsxs("button",{type:"button",onClick:u,className:"mt-2 inline-flex items-center justify-center gap-2 rounded-lg bg-white/15 px-3 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-white/20",children:[c.jsx(nv,{className:"h-4 w-4"}),c.jsx("span",{children:"Logout"})]}):c.jsxs("button",{type:"button",onClick:d,className:"mt-2 inline-flex items-center justify-center gap-2 rounded-lg bg-white/15 px-3 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-white/20",children:[c.jsx(km,{className:"h-4 w-4"}),c.jsx("span",{children:"Login"})]})]})})]})},Ey=({title:t,description:e,kicker:n,actions:s,children:i,showHeader:r=!0})=>c.jsxs("div",{className:"min-h-screen bg-white",children:[c.jsx(C5,{}),c.jsxs("main",{className:"mx-auto w-full max-w-6xl px-4 pb-16 pt-10 sm:px-6 lg:px-8",children:[r&&(t||e||n||s)?c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6 border-b border-slate-200 pb-8",children:[c.jsxs("div",{className:"max-w-2xl space-y-2",children:[n?c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-brand-600",children:n}):null,t?c.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900 sm:text-4xl",children:t}):null,e?c.jsx("p",{className:"text-base text-slate-500 sm:text-lg",children:e}):null]}),s?c.jsx("div",{className:"flex flex-col items-stretch gap-3 sm:flex-row sm:items-center",children:s}):null]}):null,c.jsx("div",{className:r?"mt-8 space-y-8":"space-y-8",children:i})]})]}),R5=()=>{const[t,e]=A.useState(""),[n,s]=A.useState(""),[i,r]=A.useState(!1),[a,l]=A.useState(""),u=is(),d=async h=>{var m;h.preventDefault(),r(!0),l("");try{const y=await(await Vk(Li,t,n)).user.getIdToken(),N=await Qo("/auth/login/firebase",{idToken:y});if(!(N!=null&&N.token))throw new Error((N==null?void 0:N.error)||"Inloggen is niet gelukt. Probeer het opnieuw.");localStorage.setItem("token",N.token),N.user&&localStorage.setItem("user",JSON.stringify(N.user));const I=N.redirectPath||"/dashboard";u(I,{replace:!0})}catch(p){l(((m=p==null?void 0:p.data)==null?void 0:m.error)||(p==null?void 0:p.message)||"Inloggen is niet gelukt. Controleer je gegevens.")}finally{r(!1)}};return c.jsx(Ey,{kicker:"Inloggen",title:"Welkom terug bij EVC",description:"Log in om je traject te volgen, bewijsstukken te uploaden en contact te houden met je coach. Nieuwe accounts worden door een administrator aangemaakt.",children:c.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:c.jsx(km,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Log in op je account"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Gebruik het e-mailadres waarmee je bent aangemeld voor het traject."})]})]}),c.jsxs("form",{onSubmit:d,className:"mt-6 space-y-5",children:[a?c.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:a}):null,c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"login-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),c.jsx("input",{id:"login-email",type:"email",placeholder:"jij@voorbeeld.nl",value:t,onChange:h=>e(h.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"login-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Wachtwoord"}),c.jsx("input",{id:"login-password",type:"password",placeholder:"Vul je wachtwoord in",value:n,onChange:h=>s(h.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("label",{className:"flex items-center gap-2 text-slate-600",children:[c.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),c.jsx("span",{children:"Onthoud mij"})]}),c.jsx("button",{type:"button",onClick:()=>alert("Neem contact op met support om je wachtwoord te resetten."),className:"font-medium text-brand-600 transition hover:text-brand-500",children:"Wachtwoord vergeten?"})]}),c.jsx("button",{type:"submit",disabled:i,className:"mt-4 w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:i?"Bezig met inloggen...":"Inloggen"})]}),c.jsx("p",{className:"mt-6 text-center text-sm text-slate-500",children:"Hulp nodig? Neem contact op met het EVC-team."})]})})},I5=["Je portfolio opbouwen met duidelijke stappen","Bewijsstukken veilig uploaden en beheren","Berichten sturen naar coaches en begeleiders","Voortgang bijhouden via planning en taken"],j5=()=>c.jsxs(Ey,{showHeader:!1,children:[c.jsx("section",{className:"overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 via-brand-500 to-brand-400 text-white shadow-xl",children:c.jsxs("div",{className:"grid gap-10 px-8 py-16 sm:px-12 lg:grid-cols-2 lg:px-16",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.32em] text-white/60",children:"EVC platform"}),c.jsx("h1",{className:"mt-6 text-4xl font-semibold leading-tight tracking-tight sm:text-5xl",children:"Welkom bij jouw EVC portfolio"}),c.jsx("p",{className:"mt-6 max-w-xl text-lg text-white/80",children:"Werk stap voor stap naar je erkenning toe. Verzamel bewijsstukken, werk samen met je coach en houd alles op n plek bij."}),c.jsxs("div",{className:"mt-10 flex flex-wrap gap-4",children:[c.jsxs(ma,{to:"/login",className:"inline-flex items-center justify-center gap-2 rounded-full bg-white px-5 py-3 text-sm font-semibold text-brand-600 shadow-lg shadow-brand-900/10 transition hover:-translate-y-0.5 hover:bg-slate-50",children:["Naar login",c.jsx(cr,{className:"h-4 w-4"})]}),c.jsx("span",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-white/40 px-5 py-3 text-sm font-semibold text-white/80",children:"Nieuwe accounts? Neem contact op met het EVC-team"})]})]}),c.jsxs("div",{className:"relative isolate",children:[c.jsx("div",{className:"absolute -top-10 right-10 h-32 w-32 rounded-full bg-white/10 blur-3xl","aria-hidden":"true"}),c.jsx("div",{className:"absolute -bottom-12 left-6 h-24 w-24 rounded-full bg-brand-200/40 blur-3xl","aria-hidden":"true"}),c.jsxs("div",{className:"relative rounded-2xl border border-white/20 bg-white/10 p-8 backdrop-blur",children:[c.jsx("h2",{className:"text-xl font-semibold text-white",children:"Alles in n vertrouwde omgeving"}),c.jsx("ul",{className:"mt-6 space-y-4",children:I5.map(t=>c.jsxs("li",{className:"flex items-start gap-3 text-sm text-white/85",children:[c.jsx(pa,{className:"mt-0.5 h-5 w-5 flex-none text-white"}),c.jsx("span",{children:t})]},t))})]})]})]})}),c.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor kandidaten"}),c.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Werk op je eigen tempo aan opdrachten, voeg reflecties toe en beheer bewijsstukken."})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor coaches"}),c.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Krijg realtime inzicht in voortgang, geef feedback en begeleid kandidaten gericht."})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Veilig en transparant"}),c.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bewaar bestanden veilig en werk samen in een omgeving met duidelijke rollen en rechten."})]})]}),c.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[c.jsxs(ma,{to:"/admin",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[c.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:c.jsx(Od,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Bekijk de admin-ervaring"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Navigeer naar het beheerdersdashboard met klantoverzicht en toewijzingen."}),c.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar admin-dashboard",c.jsx(cr,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]}),c.jsxs(ma,{to:"/coach",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[c.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:c.jsx(Ko,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Ervaar het coachportaal"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Ga direct naar het coachdashboard met klantkaarten, feedback en berichten."}),c.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar coach-dashboard",c.jsx(cr,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]})]})]});function wy(t){if(!(t!=null&&t.exists()))return null;const e=t.data();return{id:t.id,...e}}function k5(t){const e=[];if(Array.isArray(t)&&t.length>0){const n=t.map(s=>typeof s=="string"?s.trim().toLowerCase():"").filter(Boolean);n.length===1?e.push(Ms("role","==",n[0])):n.length>1&&e.push(Ms("role","in",n.slice(0,10)))}return e}function lp(t,e={}){const{roles:n}=e,s=Mt(Be,"users"),i=Ln(s,...k5(n));return St(i,r=>{const a=r.docs.map(wy).filter(Boolean).sort((l,u)=>{const d=(l.name||"").toLowerCase(),h=(u.name||"").toLowerCase();return d.localeCompare(h)});t({data:a,error:null})},r=>t({data:null,error:r}))}function D5(t){const e=Mt(Be,"assignments"),n=Ln(e,Or("createdAt","desc"));return St(n,s=>{const i=s.docs.map(r=>{var l,u;const a=r.data();return{id:r.id,customerId:a.customerId||null,coachId:a.coachId||null,status:a.status||"pending",createdAt:a.createdAt?((u=(l=a.createdAt).toDate)==null?void 0:u.call(l))??a.createdAt:null,createdBy:a.createdBy||null}});t({data:i,error:null})},s=>t({data:null,error:s}))}async function O5({customerId:t,coachId:e,status:n="pending"}){if(!t||!e)throw new Error("customerId and coachId are verplicht");const s=Li.currentUser,i=(s==null?void 0:s.uid)??null,r=Mt(Be,"assignments");await ch(r,{customerId:t,coachId:e,status:n,createdBy:i,createdAt:hr()})}function r2(t,e){if(!t)return e({data:null,error:new Error("Missing uid")}),()=>{};const n=es(Be,"users",t),s=es(Be,"adminProfiles",t);let i=null,r=null,a=null,l=null;const u=()=>{if(a||l){e({data:null,error:a||l});return}if(!i){e({data:null,error:null});return}e({data:{...i,...r},error:null})},d=St(n,m=>{i=wy(m),a=null,u()},m=>{a=m,u()}),h=St(s,m=>{r=m.exists()?m.data():null,l=null,u()},m=>{l=m,u()});return()=>{d(),h()}}async function M5(){const t=Mt(Be,"users"),e=await oM(t),n=new Map;return e.forEach(s=>{const i=wy(s);i&&n.set(i.id,i)}),n}const V5=()=>{const t=is(),[e,n]=A.useState([]),[s,i]=A.useState(null),[r,a]=A.useState(!0),[l,u]=A.useState(null),[d,h]=A.useState(null);A.useEffect(()=>{a(!0);const y=lp(({data:N,error:I})=>{if(I){i(I),a(!1);return}n(Array.isArray(N)?N:[]),i(null),a(!1)});return()=>{typeof y=="function"&&y()}},[]);const m=y=>y?y.charAt(0).toUpperCase()+y.slice(1):"Onbekend",p=async y=>{var N;if(!(!y||y.role!=="customer")){u(null),h(y.id);try{const I=await Qo("/auth/admin/impersonate",{firebaseUid:y.id});if(!(I!=null&&I.token))throw new Error("Geen sessie ontvangen");const k=localStorage.getItem("token")||null,T=localStorage.getItem("user")||null;let x=null;if(T)try{x=JSON.parse(T)}catch{x=null}const _={token:k,user:T,userData:x,customerFirebaseUid:y.id,customerName:y.name||"",createdAt:new Date().toISOString()};localStorage.setItem("impersonationBackup",JSON.stringify(_)),localStorage.setItem("token",I.token),I.user?localStorage.setItem("user",JSON.stringify(I.user)):localStorage.removeItem("user"),t("/customer",{replace:!0})}catch(I){const k=((N=I==null?void 0:I.data)==null?void 0:N.error)||(I==null?void 0:I.message)||"Kon klantomgeving niet openen";u(k)}finally{h(null)}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Customer accounts"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beheer klantprofielen en stap in hun omgeving om hun voortgang in te zien."})]}),s?c.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Kan accounts niet laden: ",s.message||"Onbekende fout"]}):null,l?c.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:l}):null,c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[c.jsx("thead",{className:"bg-slate-50",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Naam"}),c.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"E-mail"}),c.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Rol"}),c.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actie"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:r?c.jsx("tr",{children:c.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Accounts laden..."})}):e.length===0?c.jsx("tr",{children:c.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Nog geen accounts gevonden."})}):e.map(y=>{const N=y.role==="customer";return c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:y.name||"Naam onbekend"}),c.jsx("td",{className:"px-4 py-3",children:y.email?c.jsx("a",{href:`mailto:${y.email}`,className:"text-brand-600 hover:text-brand-500",children:y.email}):c.jsx("span",{className:"text-slate-400",children:"Geen e-mail"})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:m(y.role)})}),c.jsx("td",{className:"px-4 py-3 text-right",children:c.jsx("button",{type:"button",onClick:()=>p(y),className:`inline-flex items-center gap-2 rounded-full px-3 py-2 text-xs font-semibold transition ${N&&d!==y.id?"bg-brand-600 text-white shadow-sm hover:bg-brand-500":"cursor-not-allowed bg-slate-100 text-slate-400"}`,disabled:!N||d===y.id,children:N?d===y.id?"Bezig...":"Open as Customer":"Alleen klanten"})})]},y.id)})})]})})]})},L5=()=>{const[t,e]=A.useState([]),[n,s]=A.useState([]),[i,r]=A.useState([]),[a,l]=A.useState({customerId:"",coachId:""}),[u,d]=A.useState(!0),[h,m]=A.useState(!0),[p,y]=A.useState(!0),[N,I]=A.useState(!1),[k,T]=A.useState(null),[x,_]=A.useState({customers:null,coaches:null,assignments:null});A.useEffect(()=>{const b=lp(({data:C,error:D})=>{if(D){_(R=>({...R,customers:D})),d(!1);return}_(R=>({...R,customers:null})),e(Array.isArray(C)?C:[]),d(!1)},{roles:["customer"]}),v=lp(({data:C,error:D})=>{if(D){_(R=>({...R,coaches:D})),m(!1);return}_(R=>({...R,coaches:null})),s(Array.isArray(C)?C:[]),m(!1)},{roles:["coach"]}),S=D5(({data:C,error:D})=>{if(D){_(R=>({...R,assignments:D})),y(!1);return}_(R=>({...R,assignments:null})),r(Array.isArray(C)?C:[]),y(!1)});return()=>{typeof b=="function"&&b(),typeof v=="function"&&v(),typeof S=="function"&&S()}},[]),A.useEffect(()=>{l(b=>{var v;return{...b,customerId:b.customerId||((v=t[0])==null?void 0:v.id)||""}})},[t]),A.useEffect(()=>{l(b=>{var v;return{...b,coachId:b.coachId||((v=n[0])==null?void 0:v.id)||""}})},[n]);const j=b=>{const{name:v,value:S}=b.target;l(C=>({...C,[v]:S}))},L=b=>{if(b.preventDefault(),!a.customerId||!a.coachId){T({type:"error",message:"Selecteer zowel een klant als een coach."});return}I(!0),T(null),O5({customerId:a.customerId,coachId:a.coachId}).then(()=>{T({type:"success",message:"Toewijzing opgeslagen."})}).catch(v=>{T({type:"error",message:(v==null?void 0:v.message)||"Toewijzing mislukt."})}).finally(()=>{I(!1)})},z=A.useMemo(()=>{const b=new Map;return t.forEach(v=>b.set(v.id,v)),n.forEach(v=>b.set(v.id,v)),b},[t,n]),w=()=>{if(!k)return null;const v=k.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return c.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${v}`,children:k.message})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Assignments"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Pair customers with their coaches and keep the overview tidy."})]}),w(),c.jsxs("form",{onSubmit:L,className:"grid gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm sm:grid-cols-4 sm:items-end",children:[c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Customer"}),c.jsxs("select",{name:"customerId",value:a.customerId,onChange:j,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:u||t.length===0,children:[u?c.jsx("option",{value:"",children:"Laden..."}):null,!u&&t.length===0?c.jsx("option",{value:"",children:"Geen klanten beschikbaar"}):null,t.map(b=>c.jsx("option",{value:b.id,children:b.name||b.email},b.id))]})]}),c.jsxs("div",{className:"sm:col-span-1",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Coach"}),c.jsxs("select",{name:"coachId",value:a.coachId,onChange:j,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:h||n.length===0,children:[h?c.jsx("option",{value:"",children:"Laden..."}):null,!h&&n.length===0?c.jsx("option",{value:"",children:"Geen coaches beschikbaar"}):null,n.map(b=>c.jsx("option",{value:b.id,children:b.name||b.email},b.id))]})]}),c.jsx("div",{className:"sm:col-span-1",children:c.jsx("button",{type:"submit",disabled:N||!a.customerId||!a.coachId,className:"inline-flex w-full items-center justify-center rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:N?"Bezig...":"Assign"})})]}),x.customers?c.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Klanten konden niet geladen worden: ",x.customers.message||"Onbekende fout"]}):null,x.coaches?c.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Coaches konden niet geladen worden: ",x.coaches.message||"Onbekende fout"]}):null,x.assignments?c.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Toewijzingen konden niet geladen worden: ",x.assignments.message||"Onbekende fout"]}):null,c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[c.jsx("thead",{className:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3",children:"Customer"}),c.jsx("th",{className:"px-4 py-3",children:"Coach"}),c.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:p?c.jsx("tr",{children:c.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"Toewijzingen laden..."})}):i.length===0?c.jsx("tr",{children:c.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"No assignments yet."})}):i.map(b=>{var v,S,C,D;return c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:((v=z.get(b.customerId))==null?void 0:v.name)||((S=z.get(b.customerId))==null?void 0:S.email)||"Onbekende klant"}),c.jsx("td",{className:"px-4 py-3",children:((C=z.get(b.coachId))==null?void 0:C.name)||((D=z.get(b.coachId))==null?void 0:D.email)||"Onbekende coach"}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:b.status})})]},b.id)})})]})})]})},ud=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Math.random().toString(36).slice(2,10)}`,dd=()=>({id:ud(),code:"",title:"",description:"",desiredOutcome:"",subjectKnowledge:"",behavioralComponents:""}),hu=()=>({id:ud(),code:"",title:"",competencies:[dd()]}),Hx=()=>({id:null,name:"",description:"",competencyGroups:[hu()]}),U5=t=>{if(!t)return"-";try{const e=typeof t=="string"?new Date(t):t;return Number.isNaN(e.getTime())?"-":new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"short",day:"numeric"}).format(e)}catch{return"-"}},P5=(t,e=0)=>({id:ud(),code:(t==null?void 0:t.code)||"",title:(t==null?void 0:t.title)||"",order:(t==null?void 0:t.order)??e,competencies:Array.isArray(t==null?void 0:t.competencies)&&t.competencies.length>0?[...t.competencies].sort((n,s)=>((n==null?void 0:n.order)??(n==null?void 0:n.competencyOrder)??0)-((s==null?void 0:s.order)??(s==null?void 0:s.competencyOrder)??0)).map(n=>({id:ud(),code:(n==null?void 0:n.code)||"",title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",desiredOutcome:(n==null?void 0:n.desiredOutcome)||"",subjectKnowledge:(n==null?void 0:n.subjectKnowledge)||"",behavioralComponents:(n==null?void 0:n.behavioralComponents)||""})):[dd()]}),z5=()=>{const[t,e]=A.useState([]),[n,s]=A.useState(!0),[i,r]=A.useState(null),[a,l]=A.useState(null),[u,d]=A.useState(!1),[h,m]=A.useState(null),[p,y]=A.useState(Hx),[N,I]=A.useState(!1),[k,T]=A.useState(null),[x,_]=A.useState(null),j=!!p.id,L=N||u,z=A.useCallback(async()=>{s(!0),r(null);try{const G=await Is("/trajects"),W=Array.isArray(G)?G:[];return e(W),W}catch(G){const W=(G==null?void 0:G.message)||"Kon trajecten niet ophalen";return r(W),e([]),[]}finally{s(!1)}},[]),w=A.useCallback(()=>{l(null),y(Hx()),m(null),T(null),_(null)},[]),b=A.useCallback(async G=>{if(G){d(!0),m(null);try{const W=await Is(`/trajects/${G}`),fe=(Array.isArray(W==null?void 0:W.competencyGroups)?W.competencyGroups:[]).map((ye,Ae)=>P5(ye,Ae)).sort((ye,Ae)=>(ye.order??0)-(Ae.order??0)).map(({order:ye,...Ae})=>Ae);y({id:(W==null?void 0:W.id)||G,name:(W==null?void 0:W.name)||"",description:(W==null?void 0:W.description)||"",competencyGroups:fe.length>0?fe:[hu()]}),l(G)}catch(W){const se=(W==null?void 0:W.message)||"Kon traject niet laden";m(se)}finally{d(!1)}}},[]);A.useEffect(()=>{z()},[z]),A.useEffect(()=>{if(!x&&!k)return()=>{};const G=setTimeout(()=>{_(null),T(null)},4e3);return()=>clearTimeout(G)},[x,k]);const v=G=>{const{name:W,value:se}=G.target;y(fe=>({...fe,[W]:se}))},S=(G,W,se)=>{y(fe=>({...fe,competencyGroups:fe.competencyGroups.map(ye=>ye.id===G?{...ye,[W]:se}:ye)}))},C=()=>{L||y(G=>({...G,competencyGroups:[...G.competencyGroups,hu()]}))},D=G=>{L||y(W=>{const se=W.competencyGroups.filter(fe=>fe.id!==G);return{...W,competencyGroups:se.length>0?se:[hu()]}})},R=(G,W,se,fe)=>{y(ye=>({...ye,competencyGroups:ye.competencyGroups.map(Ae=>Ae.id!==G?Ae:{...Ae,competencies:Ae.competencies.map(tn=>tn.id===W?{...tn,[se]:fe}:tn)})}))},pe=G=>{L||y(W=>({...W,competencyGroups:W.competencyGroups.map(se=>se.id===G?{...se,competencies:[...se.competencies,dd()]}:se)}))},Y=(G,W)=>{L||y(se=>({...se,competencyGroups:se.competencyGroups.map(fe=>{if(fe.id!==G)return fe;const ye=fe.competencies.filter(Ae=>Ae.id!==W);return{...fe,competencies:ye.length>0?ye:[dd()]}})}))},P=A.useMemo(()=>p.competencyGroups.map((G,W)=>{const se=G.code.trim(),fe=G.title.trim(),ye=G.competencies.map((Ae,tn)=>{const Mr={code:Ae.code.trim(),title:Ae.title.trim(),description:Ae.description.trim(),desiredOutcome:Ae.desiredOutcome.trim(),subjectKnowledge:Ae.subjectKnowledge.trim(),behavioralComponents:Ae.behavioralComponents.trim()};return Object.values(Mr).some(Z=>Z.length>0)?{...Mr,rawId:Ae.id,groupId:G.id,competencyIndex:tn}:null}).filter(Boolean);return{id:G.id,groupIndex:W,trimmedCode:se,trimmedTitle:fe,competencies:ye}}).filter(G=>G.trimmedCode||G.trimmedTitle||G.competencies.length>0),[p.competencyGroups]),M=A.useMemo(()=>P.some(G=>!G.trimmedCode||!G.trimmedTitle),[P]),O=A.useMemo(()=>P.some(G=>G.competencies.some(W=>!W.code||!W.title||!W.desiredOutcome||!W.subjectKnowledge||!W.behavioralComponents)),[P]),H=A.useMemo(()=>P.filter(G=>G.competencies.length>0),[P]),Q=A.useMemo(()=>!(L||!p.name.trim()||H.length===0||M||O),[L,p.name,H,M,O]),ge=async G=>{var se;if(G.preventDefault(),!Q)return;I(!0),T(null),_(null);const W={name:p.name.trim(),description:p.description.trim(),competencyGroups:H.map((fe,ye)=>({code:fe.trimmedCode,title:fe.trimmedTitle,order:ye,competencies:fe.competencies.map((Ae,tn)=>({code:Ae.code,title:Ae.title,description:Ae.description,desiredOutcome:Ae.desiredOutcome,subjectKnowledge:Ae.subjectKnowledge,behavioralComponents:Ae.behavioralComponents,order:tn}))}))};try{if(j)await y1(`/trajects/${p.id}`,W),_("Traject bijgewerkt"),await z(),await b(p.id);else{const fe=await Qo("/trajects",W);_("Nieuw traject opgeslagen");const ye=await z(),Ae=(fe==null?void 0:fe.id)||((se=ye.find(tn=>tn.name===W.name))==null?void 0:se.id)||null;Ae?await b(Ae):w()}}catch(fe){T((fe==null?void 0:fe.message)||"Opslaan mislukt")}finally{I(!1)}},te=A.useMemo(()=>t.find(G=>G.id===a)||null,[t,a]),Ue=H.reduce((G,W)=>G+W.competencies.length,0);return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Trajectbeheer"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Maak nieuwe trajecten aan of bewerk bestaande trajecten en competenties. Wijzigingen zijn direct zichtbaar voor deelnemers en coaches."})]}),c.jsxs("div",{className:"grid gap-8 xl:grid-cols-[minmax(0,1fr)_360px]",children:[c.jsxs("form",{onSubmit:ge,className:"relative space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[u&&c.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-2xl bg-white/70",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[c.jsx(mf,{className:"h-4 w-4 animate-spin"}),"Traject laden..."]})}),c.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-slate-50/60 p-4 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:j?"Bewerk traject":"Nieuw traject"}),c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:j?p.name||(te==null?void 0:te.name)||"Naamloos traject":"Maak een nieuw traject"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[j&&te&&c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700",children:[c.jsx(pa,{className:"h-3.5 w-3.5"}),"Gekoppeld: ",te.competencyCount||0," competenties"]}),c.jsx("button",{type:"button",onClick:w,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 transition hover:border-slate-300 hover:text-slate-900",children:"Nieuw traject"})]})]}),h&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:h}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"traject-name",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Trajectnaam"}),c.jsx("input",{id:"traject-name",name:"name",value:p.name,onChange:v,disabled:L,placeholder:"Bijvoorbeeld: Sociaal Werk Niveau 5",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"traject-description",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Beschrijving"}),c.jsx("textarea",{id:"traject-description",name:"description",value:p.description,onChange:v,disabled:L,rows:3,placeholder:"Optioneel. Geef een korte toelichting voor coaches.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Competentie-structuur"}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Groepeer competenties per betekenisvolle cluster, zoals ",c.jsx("strong",{children:"B1-K1"})," met meerdere werkprocessen."]})]}),c.jsxs("button",{type:"button",onClick:C,disabled:L,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-300",children:[c.jsx(iv,{className:"h-4 w-4"}),"Nieuw cluster"]})]}),p.competencyGroups.map((G,W)=>c.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-5 shadow-sm",children:[c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:["Cluster ",W+1]}),c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Competentiegebied"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Bijvoorbeeld B1-K1 met een herkenbare titel."})]}),c.jsxs("button",{type:"button",onClick:()=>D(G.id),disabled:L,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[c.jsx(Dm,{className:"h-4 w-4"}),"Verwijder cluster"]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster code"}),c.jsx("input",{value:G.code,onChange:se=>S(G.id,"code",se.target.value),disabled:L,placeholder:"Bijv. B1-K1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster naam"}),c.jsx("input",{value:G.title,onChange:se=>S(G.id,"title",se.target.value),disabled:L,placeholder:"Bijv. Analyseren van ondersteuningsvragen",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),c.jsxs("div",{className:"space-y-4",children:[G.competencies.map((se,fe)=>c.jsxs("div",{className:"space-y-4 rounded-xl border border-slate-200 p-4 shadow-sm",children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Competentie ",fe+1]}),c.jsx("p",{className:"text-sm text-slate-500",children:"Vul de werkprocescode en aanvullende velden in."})]}),c.jsxs("button",{type:"button",onClick:()=>Y(G.id,se.id),disabled:L,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[c.jsx(Dm,{className:"h-4 w-4"}),"Verwijder competentie"]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Code"}),c.jsx("input",{value:se.code,onChange:ye=>R(G.id,se.id,"code",ye.target.value),disabled:L,placeholder:"Bijv. B1-K1-W1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Titel"}),c.jsx("input",{value:se.title,onChange:ye=>R(G.id,se.id,"title",ye.target.value),disabled:L,placeholder:"Bijv. Ondersteuningsvragen analyseren",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[c.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Omschrijving"}),c.jsx("textarea",{value:se.description,onChange:ye=>R(G.id,se.id,"description",ye.target.value),disabled:L,rows:2,placeholder:"Optioneel. Beschrijf het werkproces kort.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gewenst resultaat"}),c.jsx("textarea",{value:se.desiredOutcome,onChange:ye=>R(G.id,se.id,"desiredOutcome",ye.target.value),disabled:L,rows:2,placeholder:"Wat moet er bereikt worden?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Vakkennis"}),c.jsx("textarea",{value:se.subjectKnowledge,onChange:ye=>R(G.id,se.id,"subjectKnowledge",ye.target.value),disabled:L,rows:2,placeholder:"Welke kennis is nodig?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gedragscomponenten"}),c.jsx("textarea",{value:se.behavioralComponents,onChange:ye=>R(G.id,se.id,"behavioralComponents",ye.target.value),disabled:L,rows:2,placeholder:"Welke houding wordt verwacht?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]})]},se.id)),c.jsxs("button",{type:"button",onClick:()=>pe(G.id),disabled:L,className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 transition hover:border-brand-400 hover:text-brand-700 disabled:cursor-not-allowed disabled:border-brand-100 disabled:text-brand-200",children:[c.jsx(iv,{className:"h-4 w-4"}),"Voeg competentie toe"]})]})]},G.id))]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"space-y-1 text-sm",children:[x&&c.jsx("p",{className:"text-sm font-medium text-emerald-600",children:x}),k&&c.jsx("p",{className:"text-sm font-medium text-red-600",children:k}),!x&&!k&&c.jsxs("p",{className:"text-xs text-slate-500",children:["Je traject bevat ",Ue," competenties verdeeld over ",H.length," clusters."]})]}),c.jsxs("button",{type:"submit",disabled:!Q,className:"inline-flex items-center gap-2 rounded-full bg-brand-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-600 disabled:cursor-not-allowed disabled:bg-slate-300",children:[N?c.jsx(mf,{className:"h-4 w-4 animate-spin"}):c.jsx(pa,{className:"h-4 w-4"}),j?"Wijzigingen opslaan":"Traject opslaan"]})]})]}),c.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Trajecten"}),c.jsxs("button",{type:"button",onClick:z,disabled:n,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-slate-300 hover:text-slate-700 disabled:cursor-not-allowed disabled:text-slate-300",children:[c.jsx(kI,{className:n?"h-4 w-4 animate-spin":"h-4 w-4"}),"Vernieuwen"]})]}),n?c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[c.jsx(mf,{className:"h-4 w-4 animate-spin"})," Trajecten laden..."]}):i?c.jsx("p",{className:"text-sm text-red-600",children:i}):t.length===0?c.jsx("p",{className:"text-sm text-slate-500",children:"Er zijn nog geen trajecten aangemaakt."}):c.jsx("ul",{className:"space-y-3",children:t.map(G=>{var se;const W=G.id===a;return c.jsx("li",{children:c.jsxs("button",{type:"button",onClick:()=>b(G.id),className:`w-full text-left transition focus:outline-none focus:ring-2 focus:ring-brand-200 ${W?"rounded-xl border border-brand-300 bg-brand-50 p-4 shadow-sm":"rounded-xl border border-slate-200 p-4 shadow-sm hover:border-brand-200 hover:bg-brand-50/60"}`,children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-slate-900",children:G.name}),c.jsxs("p",{className:"text-xs text-slate-500",children:[((se=G.competencyGroups)==null?void 0:se.length)||0," clusters  ",G.competencyCount||0," competenties"]})]}),W&&c.jsx(pa,{className:"h-4 w-4 text-brand-600"})]}),c.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:["Laatst bijgewerkt: ",U5(G.updatedAt)]})]})},G.id)})})]})]})]})},B5=()=>{const[t,e]=A.useState(null),[n,s]=A.useState(null),[i,r]=A.useState(!0),[a,l]=A.useState(null);A.useEffect(()=>{let I=!0;const k=localStorage.getItem("user");if(k)try{const x=JSON.parse(k),_=(x==null?void 0:x.firebaseUid)||(x==null?void 0:x.uid);_&&I&&e(_)}catch{}const T=Sg(Li,x=>{I&&e(_=>_||(x==null?void 0:x.uid)||null)});return()=>{I=!1,T()}},[]),A.useEffect(()=>{if(!t){r(!1);return}r(!0);const I=r2(t,({data:k,error:T})=>{if(T){l(T),r(!1);return}s(k),l(null),r(!1)});return()=>{typeof I=="function"&&I()}},[t]);const u=(n==null?void 0:n.securityClearance)||null,d=A.useMemo(()=>{if(!(u!=null&&u.badge))return rv;switch(String(u.badge).toLowerCase()){case"shield-check":case"check":return BI;case"alert":case"shield-alert":return PI;case"question":case"shield-question":return FI;default:return rv}},[u]),h=Array.isArray(n==null?void 0:n.highlights)?n.highlights:[],m=Array.isArray(n==null?void 0:n.responsibilities)?n.responsibilities:[],p=Array.isArray(n==null?void 0:n.certifications)?n.certifications:[],y=n!=null&&n.role?n.role.charAt(0).toUpperCase()+n.role.slice(1):"Admin",N=(n==null?void 0:n.name)||(n==null?void 0:n.email)||"Admin";return i?c.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Profiel laden..."}):a?c.jsxs("div",{className:"rounded-3xl border border-red-200 bg-red-50 px-6 py-8 text-center text-sm text-red-700 shadow-sm",children:["Kon profiel niet laden: ",a.message||"Onbekende fout"]}):n?c.jsxs("div",{className:"space-y-8",children:[c.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 px-8 py-10 text-white shadow-card",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/60",children:"Profile"}),c.jsxs("div",{className:"mt-4 flex flex-col justify-between gap-6 lg:flex-row lg:items-end",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-semibold",children:N}),c.jsx("p",{className:"mt-2 text-white/80",children:y}),c.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/70",children:n.bio||"Nog geen biografie toegevoegd."})]}),c.jsxs("dl",{className:"grid grid-cols-3 gap-4",children:[h.length===0?c.jsx("div",{className:"col-span-3 text-sm text-white/70",children:"Nog geen statistieken vastgelegd."}):null,h.map(I=>c.jsxs("div",{className:"rounded-2xl bg-white/10 px-4 py-3 text-center shadow-inner backdrop-blur",children:[c.jsx("dt",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:I.label}),c.jsx("dd",{className:"mt-2 text-2xl font-semibold",children:I.metric})]},I.id))]})]})]}),c.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.2fr,1fr]",children:[c.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[c.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Contact & verantwoordelijkheden"}),c.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"E-mail"}),c.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.email||"-"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Telefoon"}),c.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.phone||"Niet opgegeven"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Locatie"}),c.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.location||"Niet opgegeven"})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Kernverantwoordelijkheden"}),m.length===0?c.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Nog geen verantwoordelijkheden toegevoegd."}):c.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:m.map(I=>c.jsxs("li",{className:"flex items-center gap-3 rounded-xl bg-slate-50 px-3 py-2",children:[c.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-brand-500"}),c.jsx("span",{children:I})]},I))})]})]})]}),c.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[c.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Beveiliging"}),c.jsxs("div",{className:"mt-4 flex items-center gap-4 rounded-2xl bg-brand-50 px-4 py-5 text-brand-700",children:[d?c.jsx(d,{className:"h-10 w-10"}):null,c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-semibold",children:["Toegangsniveau: ",(u==null?void 0:u.level)||"Onbekend"]}),c.jsxs("p",{className:"text-sm text-brand-600",children:["Laatste verlenging: ",(u==null?void 0:u.renewedOn)||"Niet geregistreerd"]})]})]}),c.jsx("p",{className:"mt-4 text-xs text-slate-500",children:"Administratieve gebruikers hebben uitgebreide rechten om deelnemers, coaches en bewijsstukken te beheren. Houd de logboeken in de gaten en plan jaarlijkse veiligheidsaudits."})]})]}),c.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[c.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Certificeringen & professionalisering"}),c.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[p.length===0?c.jsx("p",{className:"col-span-full text-sm text-slate-500",children:"Nog geen certificeringen geregistreerd."}):null,p.map(I=>c.jsxs("article",{className:"rounded-2xl border border-slate-100 p-4 shadow-sm transition hover:border-brand-300 hover:shadow-md",children:[c.jsx("p",{className:"text-sm font-semibold text-slate-900",children:I.title||"Certificering"}),c.jsx("p",{className:"text-xs text-slate-500",children:I.issuer||"Onbekende instantie"}),c.jsxs("p",{className:"mt-3 text-xs uppercase tracking-[0.2em] text-slate-400",children:["Behaald in ",I.year||"-"]})]},I.id))]})]})]}):c.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Geen profielgegevens gevonden. Zorg dat je account is gekoppeld aan Firebase."})},q5=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],Gx={name:"",email:"",password:"",role:"customer",trajectId:""},F5=({status:t})=>{if(!(t!=null&&t.message))return null;const e=t.type==="error",n=e?sI:pa,s=e?"text-red-600 bg-red-50 border-red-200":"text-emerald-600 bg-emerald-50 border-emerald-200";return c.jsxs("div",{className:`mb-6 flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${s}`,children:[c.jsx(n,{className:"h-5 w-5"}),c.jsx("span",{children:t.message})]})},H5=()=>{const[t,e]=A.useState([]),[n,s]=A.useState(Gx),[i,r]=A.useState(!1),[a,l]=A.useState(null),[u,d]=A.useState(!1),[h,m]=A.useState([]),[p,y]=A.useState(!1),N=A.useMemo(()=>{const _=new Map;return h.forEach(j=>{_.set(j.id,j)}),_},[h]),I=async()=>{d(!0);try{const _=await Is("/auth/admin/users");e(Array.isArray(_)?_:[])}catch(_){l({type:"error",message:(_==null?void 0:_.message)||"Kon gebruikers niet laden"})}finally{d(!1)}},k=async()=>{y(!0);try{const _=await Is("/trajects"),j=Array.isArray(_)?_:[];m(j),s(L=>{var z;return{...L,trajectId:((z=j[0])==null?void 0:z.id)||""}})}catch(_){l({type:"error",message:(_==null?void 0:_.message)||"Kon trajecten niet laden"})}finally{y(!1)}};A.useEffect(()=>{I(),k()},[]);const T=_=>{const{name:j,value:L}=_.target;s(z=>{var w;if(j==="role"){if(L==="customer"){const b=((w=h[0])==null?void 0:w.id)||z.trajectId||"";return{...z,role:L,trajectId:b}}return{...z,role:L}}return{...z,[j]:L}})},x=async _=>{var j,L;_.preventDefault(),r(!0),l(null);try{const z={name:n.name.trim(),email:n.email.trim(),password:n.password,role:n.role,trajectId:n.role==="customer"?n.trajectId:null};await Qo("/auth/admin/users",z),l({type:"success",message:"Account aangemaakt"}),s({...Gx,trajectId:((j=h[0])==null?void 0:j.id)||""}),await I()}catch(z){l({type:"error",message:((L=z==null?void 0:z.data)==null?void 0:L.error)||(z==null?void 0:z.message)||"Aanmaken mislukt"})}finally{r(!1)}};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Admin"}),c.jsx("h1",{className:"mt-1 text-2xl font-semibold text-slate-900",children:"Beheer gebruikers"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Maak nieuwe accounts voor coaches en deelnemers."})]}),c.jsxs("div",{className:"hidden items-center gap-2 rounded-full bg-brand-50 px-4 py-2 text-sm font-medium text-brand-600 sm:flex",children:[c.jsx(Ko,{className:"h-4 w-4"}),c.jsxs("span",{children:[t.length," actieve gebruikers"]})]})]}),c.jsx(F5,{status:a}),c.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[c.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:c.jsx(p1,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nieuw account"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Voer de gegevens in en kies de juiste rol."})]})]}),c.jsxs("form",{onSubmit:x,className:"mt-6 space-y-5",children:[c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"user-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Volledige naam"}),c.jsx("input",{id:"user-name",name:"name",value:n.name,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Kim de Vries",required:!0})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"user-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),c.jsx("input",{id:"user-email",name:"email",type:"email",value:n.email,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"jij@voorbeeld.nl",required:!0})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"user-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),c.jsx("input",{id:"user-password",name:"password",type:"password",value:n.password,onChange:T,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Minimaal 8 tekens",required:!0}),c.jsx("p",{className:"text-xs text-slate-400",children:"De gebruiker kan dit wachtwoord later wijzigen."})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"user-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),c.jsx("select",{id:"user-role",name:"role",value:n.role,onChange:T,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:q5.map(_=>c.jsx("option",{value:_.value,children:_.label},_.value))})]}),n.role==="customer"?c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"user-traject",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Traject"}),c.jsxs("select",{id:"user-traject",name:"trajectId",value:n.trajectId,onChange:T,disabled:p||h.length===0,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:text-slate-400",required:!0,children:[h.length===0?c.jsx("option",{value:"",children:"Geen trajecten beschikbaar"}):null,h.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))]}),c.jsx("p",{className:"text-xs text-slate-400",children:"Wijs deze deelnemer aan een traject toe. Dit bepaalt welke competenties zichtbaar zijn."})]}):null,c.jsx("button",{type:"submit",disabled:i,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:i?"Account aanmaken...":"Account aanmaken"})]})]}),c.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bestaande gebruikers"}),c.jsx("span",{className:"text-xs font-medium uppercase tracking-[0.2em] text-slate-400",children:u?"Bezig met laden...":"Laatste update"})]}),c.jsx("div",{className:"mt-4 max-h-[420px] space-y-4 overflow-y-auto pr-2",children:t.length===0?c.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 p-6 text-sm text-slate-500",children:"Nog geen gebruikers gevonden. Voeg de eerste toe via het formulier hiernaast."}):t.map(_=>{var j;return c.jsxs("article",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-900",children:_.name||"Naam onbekend"}),c.jsx("p",{className:"text-xs text-slate-500",children:_.email}),_.trajectId?c.jsxs("p",{className:"text-xs text-slate-400",children:["Traject: ",((j=N.get(_.trajectId))==null?void 0:j.name)||_.trajectId]}):null]}),c.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:_.role})]},_.id)})})]})]})]})},G5=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],K5=()=>{const[t,e]=A.useState({name:"",email:"",password:"",role:"customer"}),[n,s]=A.useState(!1),[i,r]=A.useState(null),a=u=>{const{name:d,value:h}=u.target;e(m=>({...m,[d]:h}))},l=async u=>{var d;u.preventDefault(),s(!0),r(null);try{const h={name:t.name.trim(),email:t.email.trim(),password:t.password,role:t.role},p=await fetch("http://localhost:5000/auth/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),y=p.headers.get("content-type")||"";let N=null;if(y.includes("application/json"))try{N=await p.json()}catch{N=null}else try{N=await p.text()}catch{N=null}if(!p.ok){const I=N&&N.error||typeof N=="string"&&N||p.statusText||"Aanmaken mislukt",k=new Error(I);throw k.status=p.status,k.data=N,k}r({type:"success",message:"Account aangemaakt"}),e({name:"",email:"",password:"",role:"customer"})}catch(h){const m=((d=h==null?void 0:h.data)==null?void 0:d.error)||(h==null?void 0:h.message)||"Aanmaken mislukt";r({type:"error",message:m})}finally{s(!1)}};return c.jsx(Ey,{kicker:"Testing",title:"Test account aanmaken",description:"Gebruik dit formulier om snel een account aan te maken via de admin endpoint. In development kun je dit gebruiken zonder in te loggen (zet ALLOW_DEV_ACCOUNT_CREATION=true op de backend).",children:c.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:c.jsx(p1,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Nieuwe gebruiker"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Deze testpagina maakt direct een account aan zonder ingelogd te zijn."})]})]}),i!=null&&i.message?c.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${i.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:i.message}):null,c.jsxs("form",{onSubmit:l,className:"mt-6 space-y-5",children:[c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"test-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Naam"}),c.jsx("input",{id:"test-name",name:"name",value:t.name,onChange:a,placeholder:"Bijv. Danil Vermeer",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"test-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),c.jsx("input",{id:"test-email",name:"email",type:"email",value:t.email,onChange:a,placeholder:"jij@voorbeeld.nl",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"test-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),c.jsx("input",{id:"test-password",name:"password",type:"password",value:t.password,onChange:a,placeholder:"Minimaal 8 tekens",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"test-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),c.jsx("select",{id:"test-role",name:"role",value:t.role,onChange:a,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:G5.map(u=>c.jsx("option",{value:u.value,children:u.label},u.value))})]}),c.jsx("button",{type:"submit",disabled:n,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:n?"Bezig...":"Account aanmaken"})]})]})})},Q5=[{title:"Introductie tot jouw traject",description:"Korte introductie over het EVC-proces en wat je mag verwachten."},{title:"Aan de slag met je portfolio",description:"Stap voor stap uitleg over het toevoegen van bewijsstukken."},{title:"Samenwerken met je coach",description:"Tips voor het plannen van contactmomenten en feedback."}],$5=()=>{var n;const{customer:t}=rs(),e=((n=t==null?void 0:t.name)==null?void 0:n.split(" ")[0])||(t==null?void 0:t.name)||"kandidaat";return c.jsxs("div",{className:"space-y-10",children:[c.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-evc-blue-200/40 bg-white shadow-sm",children:[c.jsx("div",{className:"absolute -top-12 right-0 h-40 w-40 rounded-full bg-evc-blue-200/40 blur-3xl","aria-hidden":"true"}),c.jsx("div",{className:"absolute -bottom-10 left-6 h-32 w-32 rounded-full bg-evc-blue-100/50 blur-3xl","aria-hidden":"true"}),c.jsx("div",{className:"relative flex flex-col gap-6 px-8 py-12 sm:px-12 lg:flex-row lg:items-center",children:c.jsxs("div",{className:"flex-1 space-y-4",children:[c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-evc-blue-50 px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-700",children:[c.jsx(KI,{className:"h-3.5 w-3.5"}),"Welkom"]}),c.jsxs("h1",{className:"text-3xl font-semibold text-slate-900 sm:text-4xl",children:["Welkom ",e," bij EVC Academie"]}),c.jsx("p",{className:"max-w-2xl text-base text-slate-600",children:"[INSERT TEXT FROM EVCacademy]"}),c.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-slate-500",children:[c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-4 py-2 font-medium",children:[c.jsx(cr,{className:"h-4 w-4"}),"Bekijk de stappen van jouw traject"]}),c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-4 py-2 font-medium",children:[c.jsx(tv,{className:"h-4 w-4"}),"Start met de uitlegvideo's hieronder"]})]})]})})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsxs("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Uitlegvideo's"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Korte instructies om je snel op weg te helpen."})]}),c.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-evc-blue-200 px-4 py-2 text-sm font-medium text-evc-blue-700 transition hover:border-evc-blue-400 hover:text-evc-blue-900",children:["Externe videotheek",c.jsx(cr,{className:"h-4 w-4"})]})]}),c.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Q5.map(s=>c.jsxs("article",{className:"group relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-evc-blue-500/5 via-transparent to-evc-blue-600/10 opacity-0 transition group-hover:opacity-100"}),c.jsxs("div",{className:"relative flex h-full flex-col gap-4 p-6",children:[c.jsx("div",{className:"flex h-40 items-center justify-center rounded-xl bg-slate-100 text-slate-400",children:c.jsx(tv,{className:"h-12 w-12"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-base font-semibold text-slate-900",children:s.title}),c.jsx("p",{className:"text-sm text-slate-500",children:s.description})]}),c.jsxs("span",{className:"mt-auto inline-flex items-center gap-1 text-sm font-medium text-evc-blue-600 group-hover:text-evc-blue-700",children:["Video openen",c.jsx(cr,{className:"h-4 w-4"})]})]})]},s.title))})]}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Stand van zaken"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Een momentopname van je voortgang en belangrijke aandachtspunten."}),c.jsx("div",{className:"mt-4 rounded-2xl border border-dashed border-evc-blue-200 bg-evc-blue-50/60 p-6 text-sm text-evc-blue-900",children:"[INSERT TEXT FROM EVCacademy]"})]})})]})},Pa=({label:t="Loading"})=>c.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-12 text-sm text-slate-500",children:[c.jsx("span",{className:"inline-flex h-12 w-12 animate-spin items-center justify-center rounded-full border-4 border-slate-200 border-t-brand-500"}),c.jsxs("p",{children:[t,""]})]});function Y5(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,name:e.name||"",description:e.description||"",competencyCount:e.competencyCount??null,...e}}function Kx(t){return t?Array.isArray(t)?t.filter(e=>e!=null):typeof t=="string"?t.split(/\r?\n/).map(e=>e.trim()).filter(Boolean):[t]:[]}function X5(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,code:e.code||"",title:e.title||"",description:e.description||"",desiredOutcome:e.desiredOutcome||e.gewenstResultaat||"",subjectKnowledge:Kx(e.subjectKnowledge||e.vakkennis||e.vakkennisEnVaardigheden),behavioralComponents:Kx(e.behavioralComponents||e.gedragsComponenten||e.behavioral||e.gedragscomponenten),groupCode:e.groupCode||"",groupTitle:e.groupTitle||"",groupOrder:e.groupOrder??0,competencyOrder:e.competencyOrder??0,order:e.order??0}}function Qx(t){var n,s;if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,uid:t.id,firebaseUid:t.id,name:e.name||"",email:e.email||"",role:e.role||"",trajectId:e.trajectId||null,coachId:e.coachId||null,lastActivity:e.lastActivity?((s=(n=e.lastActivity).toDate)==null?void 0:s.call(n))??e.lastActivity:null}}async function W5(t){if(!t)return null;const e=es(Be,"trajects",t),n=await lM(e);return Y5(n)}function J5(t){return!Array.isArray(t)||t.length===0?null:t.map(e=>{var s,i;const n=e.data()||{};return{id:e.id,coachId:n.coachId||null,customerId:n.customerId||null,status:n.status||"",createdAt:n.createdAt?((i=(s=n.createdAt).toDate)==null?void 0:i.call(s))??n.createdAt:null}}).sort((e,n)=>{const s=e.createdAt instanceof Date?e.createdAt.getTime():0;return(n.createdAt instanceof Date?n.createdAt.getTime():0)-s})[0]}function Z5(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{},n=e.uploadedAt?typeof e.uploadedAt.toDate=="function"?e.uploadedAt.toDate():e.uploadedAt:null,s=e.name||e.displayName||e.fileName||t.id;return{id:t.id,name:s,displayName:s,fileName:e.fileName||s,downloadURL:e.downloadURL||"",storagePath:e.storagePath||"",competencyId:e.competencyId||"",userId:e.userId||"",trajectId:e.trajectId||null,uploadedAt:n,contentType:e.contentType||"",size:e.size??null}}async function eV({userId:t,competencyId:e,file:n,displayName:s,trajectId:i}){if(!t)throw new Error("userId is verplicht");if(!e)throw new Error("competencyId is verplicht");if(!n)throw new Error("Bestand ontbreekt");const r=(s||n.name||"Bestand").trim(),a=n.name||"upload",l=`user_uploads/${t}/${e}/${Date.now()}-${a}`,u=xy(dh,l),d=n.type?{contentType:n.type}:void 0;await v5(u,n,d);const h=await s2(u),m=Mt(Be,"users",t,"uploads");await ch(m,{name:r,fileName:a,downloadURL:h,storagePath:l,competencyId:e,userId:t,trajectId:i||null,uploadedAt:hr(),contentType:n.type||null,size:typeof n.size=="number"?n.size:null})}async function tV({userId:t,uploadId:e,storagePath:n}){if(!t)throw new Error("userId is verplicht");if(!e)throw new Error("uploadId is verplicht");const s=es(Be,"users",t,"uploads",e);if(n){const i=xy(dh,n);try{await x5(i)}catch(r){if((r==null?void 0:r.code)!=="storage/object-not-found")throw r}}await uM(s)}function a2(t,e){if(!t)return e({uploads:[],error:new Error("Missing user id")}),()=>{};const n=Mt(Be,"users",t,"uploads"),s=Ln(n,Or("uploadedAt","desc"));return St(s,i=>{const r=i.docs.map(Z5).filter(Boolean);e({uploads:r,error:null})},i=>{e({uploads:[],error:i})})}async function nV(t){if(!t)return null;if(t.downloadURL)return t.downloadURL;if(!t.storagePath)return null;const e=xy(dh,t.storagePath);return s2(e)}function sV(t,e){if(!t)return e({customer:null,coach:null,assignment:null,error:new Error("Missing user id")}),()=>{};let n=null,s={customer:null,coach:null,assignment:null};const i=(h={},m=null)=>{s={...s,...h},e({...s,error:m})},r=h=>{if(n&&(n(),n=null),!h){i({coach:null});return}n=St(es(Be,"users",h),m=>i({coach:Qx(m)}),m=>i({},m))},a=St(es(Be,"users",t),h=>{const m=Qx(h);i({customer:m}),m!=null&&m.coachId&&r(m.coachId)},h=>i({},h)),l=Mt(Be,"assignments"),u=Ln(l,Ms("customerId","==",t)),d=St(u,h=>{const m=J5(h.docs);i({assignment:m}),m!=null&&m.coachId?r(m.coachId):s.coach||i({})},h=>i({},h));return()=>{a(),d(),n&&n()}}function l2(t,e){if(!t)return e({data:[],error:new Error("Missing trajectId")}),()=>{};const n=Ln(Mt(Be,"competencies"),Ms("trajectId","==",t)),s=Mt(Be,"trajects",t,"competencies");let i=[],r=[];const a=(d=null)=>{const m=(i.length>0?i:r).map(X5).filter(Boolean).sort((p,y)=>p.groupOrder!==y.groupOrder?p.groupOrder-y.groupOrder:p.competencyOrder!==y.competencyOrder?p.competencyOrder-y.competencyOrder:p.order!==y.order?p.order-y.order:(p.title||"").localeCompare(y.title||""));e({data:m,error:d})},l=St(n,d=>{i=d.docs,a()},d=>{i=[],a(d)}),u=St(s,d=>{r=d.docs,i.length===0&&a()},d=>{r=[],i.length===0&&a(d)});return()=>{l(),u()}}const iV=()=>{const{customer:t,coach:e}=rs(),[n,s]=A.useState(null),[i,r]=A.useState([]),[a,l]=A.useState([]),[u,d]=A.useState(!0),[h,m]=A.useState(!0),[p,y]=A.useState(null),[N,I]=A.useState(null),[k,T]=A.useState(null),[x,_]=A.useState([]),[j,L]=A.useState(null),[z,w]=A.useState(null),[b,v]=A.useState(null),[S,C]=A.useState({}),[D,R]=A.useState({}),[pe,Y]=A.useState(!1),P=A.useRef({}),[M]=A.useState(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}}),O=(t==null?void 0:t.id)||null,H=A.useCallback(async()=>{var K;d(!0),y(null);try{const Z=await Is("/customer/planning");Z!=null&&Z.traject&&s(Z.traject)}catch(Z){y(((K=Z==null?void 0:Z.data)==null?void 0:K.error)||(Z==null?void 0:Z.message)||"Kon planning niet laden")}finally{d(!1)}},[]);A.useEffect(()=>{H()},[H]);const Q=(n==null?void 0:n.id)||(M==null?void 0:M.trajectId)||(t==null?void 0:t.trajectId)||null;A.useEffect(()=>{if(!Q){r([]),I(null),m(!1);return}m(!0);const K=l2(Q,({data:Z,error:ee})=>{if(ee){I(ee),m(!1);return}I(null),r(Array.isArray(Z)?Z:[]),m(!1)});return()=>{typeof K=="function"&&K()}},[Q]);const ge=A.useMemo(()=>{const K={};return x.forEach(Z=>{if(!Z)return;const ee=Z.competencyId||"__unassigned__";K[ee]||(K[ee]=[]),K[ee].push(Z)}),K},[x]);A.useEffect(()=>{if(n||!Q)return;let K=!1;return W5(Q).then(Z=>{!K&&Z&&s(ee=>ee||Z)}).catch(()=>{}),()=>{K=!0}},[n,Q]),A.useEffect(()=>{if(!O){_([]),L(null);return}const K=a2(O,({uploads:Z,error:ee})=>{if(ee){L(ee);return}L(null),_(Array.isArray(Z)?Z:[])});return()=>{typeof K=="function"&&K()}},[O]);const te=u||h,Ue=K=>{if(!(S[K]||"").trim()){R(ce=>({...ce,[K]:"Geef een naam op voor je upload."}));return}R(ce=>{if(!ce[K])return ce;const Gt={...ce};return delete Gt[K],Gt});const ee=P.current[K];ee&&ee.click()},G=async(K,Z)=>{var ls;const ee=(ls=Z.target.files)==null?void 0:ls[0];if(!ee)return;Z.target.value="";const ce=Q;if(!ce){y("Er is geen traject gekoppeld aan dit account.");return}if(!O){y("Kon je accountgegevens niet vinden. Probeer opnieuw in te loggen.");return}const Gt=(S[K]||"").trim();if(!Gt){R(be=>({...be,[K]:"Geef een naam op voor je upload."}));return}T(K),y(null);try{await eV({userId:O,competencyId:K,file:ee,displayName:Gt,trajectId:ce}),C(be=>({...be,[K]:""})),R(be=>{if(!be[K])return be;const Ze={...be};return delete Ze[K],Ze})}catch(be){y((be==null?void 0:be.message)||"Uploaden mislukt")}finally{T(null)}},W=K=>{l(Z=>Z.includes(K)?Z.filter(ee=>ee!==K):[...Z,K])},se=(K,Z)=>{C(ee=>({...ee,[K]:Z})),R(ee=>{if(!ee[K])return ee;const ce={...ee};return delete ce[K],ce})},fe=()=>{Y(K=>!K)};A.useEffect(()=>{l(K=>{const Z=new Set(i.map((ce,Gt)=>ce.id||ce.code||String(Gt))),ee=K.filter(ce=>Z.has(ce));return ee.length===K.length?K:ee})},[i]),A.useEffect(()=>{const K=new Set(i.map((Z,ee)=>Z.id||Z.code||String(ee)));C(Z=>{const ee={};return K.forEach(ce=>{Z[ce]!==void 0&&(ee[ce]=Z[ce])}),Object.keys(ee).length===Object.keys(Z).length?Z:ee}),R(Z=>{const ee={};return K.forEach(ce=>{Z[ce]&&(ee[ce]=Z[ce])}),Object.keys(ee).length===Object.keys(Z).length?Z:ee})},[i]);const ye=(K,Z)=>!K||K.length===0?c.jsx("p",{className:"mt-2 text-sm text-slate-400",children:Z}):c.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:K.map((ee,ce)=>c.jsxs("li",{className:"flex items-start gap-3 rounded-xl bg-white/70 px-3 py-2 shadow-sm",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 flex-shrink-0 rounded-full bg-brand-500"}),c.jsx("span",{className:"leading-relaxed",children:String(ee)})]},`${ee}-${ce}`))}),Ae=(K,Z)=>{if(!K)return[];const ee=[K.id,K.code,Z].filter(Boolean);for(const ce of ee)if(ge[ce])return ge[ce];return[]},tn=async K=>{if(!K)return;if(!!!(K.downloadURL||K.storagePath)){y("Downloadlink is niet beschikbaar voor dit bestand.");return}const ee=K.id||K.storagePath||K.fileName||K.name||null;ee&&w(ee),y(null);try{const ce=await nV(K);if(!ce)throw new Error("Downloadlink is niet beschikbaar.");window.open(ce,"_blank","noopener")}catch(ce){y((ce==null?void 0:ce.message)||"Download mislukt")}finally{w(null)}},Mr=async K=>{if(!(!K||!K.id)){if(!O){y("Kon je accountgegevens niet vinden. Probeer opnieuw in te loggen.");return}v(K.id);try{await tV({userId:O,uploadId:K.id,storagePath:K.storagePath||null})}catch(Z){y((Z==null?void 0:Z.message)||"Verwijderen mislukt")}finally{v(null)}}};return c.jsxs("div",{className:"space-y-10",children:[c.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Mijn portfolio"}),c.jsx("h1",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Jouw verzameling aan bewijsstukken"}),c.jsx("p",{className:"mt-3 max-w-3xl text-sm text-slate-500",children:"[INSERT TEXT FROM EVCacademy]"}),n?c.jsxs("p",{className:"mt-4 inline-flex items-center rounded-full bg-evc-blue-50 px-4 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:["Traject: ",n.name]}):null]}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("button",{type:"button",onClick:fe,className:"inline-flex items-center justify-between rounded-2xl bg-evc-blue-600 px-5 py-3 text-left text-sm font-semibold text-white shadow-lg transition hover:bg-evc-blue-500 sm:text-base",children:[c.jsx("span",{children:"Klik hier voor de instructies"}),c.jsx(jm,{className:`h-5 w-5 transition-transform ${pe?"rotate-180":""}`})]}),pe?c.jsx("div",{className:"rounded-2xl border border-evc-blue-200 bg-evc-blue-50 p-5 text-sm text-evc-blue-900",children:"[INSERT TEXT FROM EVCacademy]"}):null]})}),te?c.jsx(Pa,{label:"Portfolio laden"}):null,p&&!te?c.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:p}):null,N&&!te?c.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:["Kon competenties niet laden: ",N.message||"Onbekende fout"]}):null,j?c.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:["Kon uploads niet laden: ",j.message||"Onbekende fout"]}):null,!te&&!Q?c.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er is nog geen traject aan jouw account gekoppeld."}):null,!te&&Q&&i.length===0?c.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er zijn nog geen competenties gekoppeld aan jouw traject."}):null,c.jsxs("section",{className:"space-y-6",children:[c.jsxs("header",{className:"space-y-2",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Trajectportfolio"}),c.jsxs("p",{className:"max-w-2xl text-sm text-slate-500",children:["Orden je opleiding, werkervaring en documenten per competentie. Voeg nieuwe bewijsstukken toe en houd overzicht in je voortgang.",e?` Je coach ${e.name} kijkt mee en geeft feedback.`:""]})]}),c.jsx("div",{className:"grid gap-5 lg:grid-cols-2",children:i.map((K,Z)=>{const ee=K.id||K.code||String(Z),ce=a.includes(ee),Gt=Ae(K,ee),ls=`competency-${ee}`;return c.jsxs("article",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg",children:[c.jsxs("button",{type:"button",onClick:()=>W(ee),className:"flex w-full items-start justify-between gap-4 px-6 py-5 text-left","aria-expanded":ce,"aria-controls":ls,children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-evc-blue-600",children:K.code||`Competentie ${Z+1}`}),c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:K.name||K.title||"Onbenoemde competentie"}),c.jsx("p",{className:"text-sm text-slate-500",children:K.description||K.summary||"Bekijk de details van deze competentie."})]}),c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 text-slate-500 transition",children:c.jsx(jm,{className:`h-4 w-4 transition-transform ${ce?"rotate-180":""}`})})]}),c.jsx("div",{id:ls,className:`grid gap-6 overflow-hidden border-t border-slate-100 px-6 transition-[max-height] duration-500 ${ce?"max-h-[999px] py-6":"max-h-0"}`,children:ce?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-xs font-semibold uppercase tracking-widest text-slate-400",children:"Wat wordt er van je verwacht?"}),ye(K.expectations,"Nog geen verwachtingen vastgelegd."),c.jsxs("div",{className:"rounded-2xl bg-slate-50 p-5 text-sm text-slate-600",children:[c.jsx("p",{className:"font-semibold text-slate-700",children:"Gewenst resultaat"}),c.jsx("p",{className:"mt-2 leading-relaxed",children:K.desiredOutcome||"Nog niet vastgelegd."})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-xs font-semibold uppercase tracking-widest text-slate-400",children:"Bewijsstukken"}),c.jsxs("div",{className:"space-y-3",children:[Gt.length===0?c.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-400",children:'Nog geen bestanden. Klik op "Voeg upload toe" om te starten.'}):c.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:Gt.map(be=>{const Ze=!!(be.downloadURL||be.storagePath),gt=be.id||be.storagePath||be.fileName||be.name;return c.jsxs("li",{className:"flex items-center gap-3 rounded-xl border border-slate-100 bg-white px-3 py-2 shadow-sm",children:[c.jsx(sv,{className:"h-4 w-4 text-slate-400"}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"truncate text-sm font-medium text-slate-700",children:be.displayName||be.name||be.fileName}),be.uploadedAt?c.jsxs("p",{className:"mt-0.5 text-xs text-slate-400",children:["Gepload op ",be.uploadedAt.toLocaleString()]}):null]}),c.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[c.jsx("button",{type:"button",className:"whitespace-nowrap rounded-full border border-brand-200 px-3 py-1 text-xs font-semibold text-brand-600 transition hover:border-brand-400 hover:bg-brand-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-400",onClick:()=>tn(be),disabled:z===gt||!Ze,children:z===gt?"Bezig...":Ze?"Download":"Niet beschikbaar"}),c.jsx("button",{type:"button",onClick:()=>Mr(be),disabled:b===be.id,className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-red-200 text-red-500 transition hover:border-red-300 hover:bg-red-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-300","aria-label":"Verwijder upload",children:b===be.id?c.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide",children:"Wacht"}):c.jsx(Dm,{className:"h-4 w-4"})})]})]},gt)})}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Naam van je upload"}),c.jsx("input",{type:"text",value:S[ee]||"",onChange:be=>se(ee,be.target.value),placeholder:"Bijvoorbeeld: Reflectieverslag week 3",className:`mt-2 w-full rounded-full border px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 ${D[ee]?"border-red-300 focus:ring-red-300":"border-slate-200 focus:border-brand-400"}`}),D[ee]?c.jsx("p",{className:"mt-1 text-xs text-red-500",children:D[ee]}):null]}),c.jsx("input",{ref:be=>{be?P.current[ee]=be:delete P.current[ee]},type:"file",className:"hidden",onChange:be=>G(K.id||K.code||ee,be)}),c.jsxs("button",{type:"button",onClick:()=>Ue(ee),disabled:k===(K.id||K.code||ee),className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-2 text-xs font-semibold text-brand-600 transition hover:border-brand-400 hover:bg-brand-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-400",children:[c.jsx(sv,{className:"h-4 w-4"}),k===(K.id||K.code||ee)?"Bezig...":"Voeg upload toe"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 rounded-2xl bg-slate-50 px-4 py-3 text-sm text-slate-500",children:[c.jsx(SI,{className:"h-4 w-4 text-brand-500"}),c.jsx("span",{className:"leading-relaxed",children:"Heb je vragen? Laat een bericht achter bij je coach in het berichtenoverzicht."})]})]})]}):null})]},ee)})})]})]})},o2=({threads:t=[],activeThreadId:e,onSelectThread:n,messages:s=[],draft:i,onDraftChange:r,onSend:a,emptyLabel:l="No thread selected"})=>c.jsxs("div",{className:"grid h-[600px] grid-cols-1 overflow-hidden rounded-3xl bg-white shadow-card lg:grid-cols-[280px,1fr]",children:[c.jsxs("aside",{className:"border-r border-slate-100",children:[c.jsx("div",{className:"px-4 py-4",children:c.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Conversations"})}),c.jsx("div",{className:"h-full overflow-y-auto px-2 pb-6",children:c.jsxs("ul",{className:"space-y-1",children:[t.map(u=>c.jsx("li",{children:c.jsxs("button",{type:"button",onClick:()=>n==null?void 0:n(u.id),className:`w-full rounded-2xl px-4 py-3 text-left text-sm transition ${e===u.id?"bg-brand-50 text-brand-700":"text-slate-600 hover:bg-slate-50"}`,children:[c.jsx("p",{className:"font-semibold text-slate-900",children:u.name}),c.jsx("p",{className:"truncate text-xs text-slate-500",children:u.lastMessage})]})},u.id)),t.length===0?c.jsx("li",{className:"px-4 py-12 text-center text-sm text-slate-400",children:"No threads yet."}):null]})})]}),c.jsxs("section",{className:"flex flex-1 flex-col",children:[c.jsx("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto px-6 py-6",children:s.length===0?c.jsx("div",{className:"m-auto text-center text-sm text-slate-400",children:c.jsx("p",{children:l})}):s.map(u=>c.jsxs("div",{className:`max-w-md rounded-2xl px-4 py-3 text-sm shadow-sm ${u.from==="me"?"self-end bg-brand-600 text-white":"bg-slate-100 text-slate-700"}`,children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:u.author}),c.jsx("p",{className:"mt-1 whitespace-pre-line",children:u.body}),c.jsx("p",{className:"mt-2 text-[10px] uppercase tracking-wide opacity-60",children:u.timestamp})]},u.id))}),c.jsx("form",{onSubmit:u=>{u.preventDefault(),a==null||a()},className:"border-t border-slate-100 bg-slate-50/60 px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3 rounded-full bg-white px-4 py-2 shadow-inner",children:[c.jsx("input",{type:"text",value:i??"",onChange:u=>r==null?void 0:r(u.target.value),placeholder:"Type a message",className:"flex-1 border-none bg-transparent text-sm outline-none focus:ring-0"}),c.jsxs("button",{type:"submit",className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white shadow-lg transition hover:bg-brand-500",children:[c.jsx(LI,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Send message"})]})]})})]})]}),rV=()=>{const{customer:t,coach:e,account:n}=rs(),s=(n==null?void 0:n.id)??null,[i,r]=A.useState([]),[a,l]=A.useState({}),[u,d]=A.useState(""),[h,m]=A.useState({}),[p,y]=A.useState(!1),[N,I]=A.useState(null),[k,T]=A.useState(!1),x=A.useCallback(z=>{const w=new Map;z.forEach(C=>{const D=(C==null?void 0:C.fromUser)||{},R=(C==null?void 0:C.toUser)||{},pe=(D==null?void 0:D.id)===s,Y=pe?R:D;if(!(Y!=null&&Y.id))return;const P=String(Y.id);w.has(P)||w.set(P,{id:P,name:Y.name||Y.email||"Contactpersoon",targetUserId:Y.id,lastMessage:"",lastTimestamp:0,messages:[]});const M=w.get(P),O=C.createdAt?new Date(C.createdAt):null,H=O?O.getTime():Date.now(),Q=pe?(t==null?void 0:t.name)||"Ik":Y.name||Y.email||"Contactpersoon";M.messages.push({id:C.id,author:Q,body:C.content||"",from:pe?"me":"other",timestamp:O?O.toLocaleString():"",timestampMs:H}),M.lastMessage=C.content||M.lastMessage,M.lastTimestamp=Math.max(M.lastTimestamp,H)});const b=Array.from(w.values()).sort((C,D)=>D.lastTimestamp-C.lastTimestamp),v=b.map(({id:C,name:D,lastMessage:R,targetUserId:pe})=>({id:C,name:D,lastMessage:R,targetUserId:pe})),S={};return b.forEach(C=>{const D=C.messages.sort((R,pe)=>R.timestampMs-pe.timestampMs).map(({timestampMs:R,...pe})=>pe);S[C.id]=D}),{threads:v,messagesByThread:S}},[s,t==null?void 0:t.name]),_=A.useCallback(async()=>{var z;if(!s){r([]),l({}),d(""),y(!1);return}y(!0);try{const w=await Is("/messages"),b=x(Array.isArray(w)?w:[]);r(b.threads),l(b.messagesByThread),d(v=>{var S;return v&&b.threads.some(C=>C.id===v)?v:((S=b.threads[0])==null?void 0:S.id)??""}),I(null)}catch(w){I(((z=w==null?void 0:w.data)==null?void 0:z.error)||(w==null?void 0:w.message)||"Berichten laden mislukt")}finally{y(!1)}},[s,x]);A.useEffect(()=>{_()},[_]);const j=A.useMemo(()=>a[u]??[],[a,u]),L=async()=>{var v;const w=(h[u]??"").trim();if(!w)return;const b=i.find(S=>S.id===u);if(!(b!=null&&b.targetUserId)){I("Geen ontvanger gekoppeld aan dit gesprek.");return}T(!0);try{await Qo("/messages/send",{toUserId:b.targetUserId,content:w}),m(S=>({...S,[u]:""})),await _()}catch(S){I(((v=S==null?void 0:S.data)==null?void 0:v.error)||(S==null?void 0:S.message)||"Versturen mislukt")}finally{T(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("header",{className:"space-y-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Contact"}),c.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Berichten met je coach"})]}),c.jsx("p",{className:"max-w-2xl text-sm text-slate-500",children:"[INSERT TEXT FROM EVCacademy]"}),c.jsxs("p",{className:"max-w-2xl text-sm text-slate-500",children:["Chat rechtstreeks met je coach",e?` ${e.name}`:"",". Gebruik dit kanaal voor vragen en updates."]})]}),N?c.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:N}):null,p?c.jsx(Pa,{label:"Berichten laden"}):c.jsx(o2,{threads:i,activeThreadId:u,onSelectThread:d,messages:j,draft:h[u]??"",onDraftChange:z=>m(w=>({...w,[u]:z})),onSend:L,emptyLabel:i.length===0?"Nog geen berichten. Start een gesprek met je coach.":"Selecteer een gesprek"}),k?c.jsx("p",{className:"text-xs text-slate-400",children:"Bericht wordt verzonden"}):null]})},aV={dateOfBirth:"",placeOfBirth:"",nationality:"",phoneFixed:"",phoneMobile:"",street:"",houseNumber:"",addition:"",postalCode:"",city:"",email:"",name:"",educations:[],certificates:[],workExperience:[]},lV=()=>{const{customer:t,coach:e}=rs(),[n,s]=A.useState(aV),[i,r]=A.useState(!0),[a,l]=A.useState(!1),[u,d]=A.useState(null),[h,m]=A.useState({title:"",institution:"",startDate:"",endDate:"",note:""}),[p,y]=A.useState({role:"",organisation:"",startDate:"",endDate:"",note:""}),[N,I]=A.useState({title:"",note:"",file:null}),[k,T]=A.useState(!1),[x,_]=A.useState(null),[j,L]=A.useState(0),z=A.useMemo(()=>(t==null?void 0:t.name)||n.name||"Jouw profiel",[t==null?void 0:t.name,n.name]),w=n.email||(t==null?void 0:t.email)||"",b=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Date.now()}-${Math.round(Math.random()*1e6)}`;A.useEffect(()=>{let M=!0;return(async()=>{var H;r(!0);try{const Q=await Is("/customer/profile");if(!M)return;s(ge=>({...ge,...Q}))}catch(Q){if(!M)return;d({type:"error",message:((H=Q==null?void 0:Q.data)==null?void 0:H.error)||(Q==null?void 0:Q.message)||"Kon profiel niet laden"})}finally{M&&r(!1)}})(),()=>{M=!1}},[]);const v=M=>{const{name:O,value:H}=M.target;s(Q=>({...Q,[O]:H}))},S=async M=>{var O;M.preventDefault(),l(!0),d(null);try{const H={dateOfBirth:n.dateOfBirth,placeOfBirth:n.placeOfBirth,nationality:n.nationality,phoneFixed:n.phoneFixed,phoneMobile:n.phoneMobile,street:n.street,houseNumber:n.houseNumber,addition:n.addition,postalCode:n.postalCode,city:n.city,educations:n.educations||[],certificates:(n.certificates||[]).map(({id:ge,title:te,filePath:Ue,fileName:G,size:W,uploadedAt:se,note:fe})=>({id:ge,title:te,filePath:Ue,fileName:G,size:W,uploadedAt:se,note:fe})),workExperience:n.workExperience||[]},Q=await y1("/customer/profile",H);s(ge=>({...ge,...Q})),d({type:"success",message:"Wijzigingen opgeslagen"})}catch(H){d({type:"error",message:((O=H==null?void 0:H.data)==null?void 0:O.error)||(H==null?void 0:H.message)||"Opslaan mislukt"})}finally{l(!1)}},C=({state:M})=>{if(!(M!=null&&M.message))return null;const O=M.type==="error",H=O?YI:pa,Q=O?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return c.jsxs("div",{className:`flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${Q}`,children:[c.jsx(H,{className:"h-4 w-4"}),c.jsx("span",{children:M.message})]})},D=(M,O)=>{s(H=>({...H,[M]:(H[M]||[]).filter(Q=>Q.id!==O)}))},R=()=>{if(!h.title.trim()){d({type:"error",message:"Voeg minimaal een titel toe voor je opleiding."});return}const M={id:b(),title:h.title.trim(),institution:h.institution.trim(),startDate:h.startDate||"",endDate:h.endDate||"",note:h.note.trim()};s(O=>({...O,educations:[...O.educations||[],M]})),m({title:"",institution:"",startDate:"",endDate:"",note:""})},pe=()=>{if(!p.role.trim()&&!p.organisation.trim()&&!p.note.trim()){d({type:"error",message:"Vul minimaal een functie, organisatie of toelichting in."});return}const M={id:b(),role:p.role.trim(),organisation:p.organisation.trim(),startDate:p.startDate||"",endDate:p.endDate||"",note:p.note.trim()};s(O=>({...O,workExperience:[...O.workExperience||[],M]})),y({role:"",organisation:"",startDate:"",endDate:"",note:""})},Y=M=>{var H;const O=((H=M.target.files)==null?void 0:H[0])||null;I(Q=>({...Q,file:O}))},P=async()=>{var O;if(!N.file){_({type:"error",message:"Kies eerst een bestand."});return}const M=N.title.trim()||N.file.name;T(!0),_(null);try{const H=new FormData;H.append("file",N.file);const Q=await nj("/customer/profile/certificates/upload",H),ge={id:b(),title:M,filePath:Q.filePath,fileName:Q.fileName||N.file.name,size:Q.size,uploadedAt:Q.uploadedAt,note:N.note.trim()};s(te=>({...te,certificates:[...te.certificates||[],ge]})),I({title:"",note:"",file:null}),L(te=>te+1),_({type:"success",message:"Certificaat toegevoegd"})}catch(H){_({type:"error",message:((O=H==null?void 0:H.data)==null?void 0:O.error)||(H==null?void 0:H.message)||"Upload mislukt"})}finally{T(!1)}};return i?c.jsx(Pa,{label:"Profiel laden"}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-brand-500",children:"Profiel bewerken"}),c.jsx("h1",{className:"mt-1 text-3xl font-semibold text-slate-900",children:z}),c.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-500",children:"Werk je persoonsgegevens en adresgegevens eenvoudig bij. Je coach ziet altijd de meest recente informatie."})]}),e?c.jsxs("div",{className:"rounded-3xl border border-brand-100 bg-brand-50 px-4 py-3 text-sm text-brand-700 shadow-sm",children:["Begeleid door ",c.jsx("strong",{children:e.name})]}):null]}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsx(C,{state:u}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsxs("div",{className:"grid gap-6 xl:grid-cols-[1.4fr,1fr]",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Persoonsgegevens"}),c.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"dateOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboortedatum"}),c.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:n.dateOfBirth||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"placeOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboorteplaats"}),c.jsx("input",{id:"placeOfBirth",name:"placeOfBirth",value:n.placeOfBirth||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Alkmaar"})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"nationality",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Nationaliteit"}),c.jsx("input",{id:"nationality",name:"nationality",value:n.nationality||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: NL"})]})]})]}),c.jsxs("div",{className:"space-y-4 border-t border-slate-100 pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Contactgegevens"}),c.jsx("button",{type:"button",onClick:()=>alert("Vraag je beheerder om je wachtwoord te wijzigen."),className:"text-sm font-semibold text-brand-600 transition hover:text-brand-500",children:"Wachtwoord wijzigen"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"phoneFixed",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (vast)"}),c.jsx("input",{id:"phoneFixed",name:"phoneFixed",value:n.phoneFixed||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0201234567"})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"phoneMobile",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (mobiel)"}),c.jsx("input",{id:"phoneMobile",name:"phoneMobile",value:n.phoneMobile||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0612345678"})]}),c.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[c.jsx("label",{htmlFor:"email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mailadres"}),c.jsx("input",{id:"email",name:"email",value:w,readOnly:!0,className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm text-slate-500 shadow-inner"}),c.jsx("p",{className:"text-xs text-slate-400",children:"Het e-mailadres wordt beheerd door je organisatie."})]})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-6 rounded-2xl bg-slate-50 p-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Adresgegevens"}),c.jsxs("div",{className:"mt-4 grid gap-4",children:[c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"street",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Straatnaam"}),c.jsx("input",{id:"street",name:"street",value:n.street||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr,0.8fr]",children:[c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"houseNumber",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Huisnummer"}),c.jsx("input",{id:"houseNumber",name:"houseNumber",value:n.houseNumber||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"addition",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Toevoeging"}),c.jsx("input",{id:"addition",name:"addition",value:n.addition||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"postalCode",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Postcode"}),c.jsx("input",{id:"postalCode",name:"postalCode",value:n.postalCode||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijv. 1822 BW"})]}),c.jsxs("div",{className:"grid gap-2",children:[c.jsx("label",{htmlFor:"city",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Woonplaats"}),c.jsx("input",{id:"city",name:"city",value:n.city||"",onChange:v,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Downloads"}),c.jsx("button",{type:"button",onClick:()=>alert("Download van profiel volgt later in de productieroute."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:" Download mijn profiel"}),c.jsx("button",{type:"button",onClick:()=>alert("Document downloads zijn binnenkort beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:" Download mijn documenten"}),c.jsx("button",{type:"button",onClick:()=>alert("Zelfevaluatie download is nog niet beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:" Download mijn zelfevaluatie"})]})]})]})}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Opleidingen"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Leg je afgeronde of lopende opleidingen vast inclusief toelichting."})]}),c.jsx("div",{className:"space-y-4",children:(n.educations||[]).length===0?c.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen opleidingen toegevoegd."}):c.jsx("ul",{className:"space-y-3",children:n.educations.map(M=>c.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-900",children:M.title}),M.institution?c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:M.institution}):null]}),c.jsx("button",{type:"button",onClick:()=>D("educations",M.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),c.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[M.startDate?c.jsxs("span",{children:["Start: ",M.startDate]}):null,M.endDate?c.jsxs("span",{children:["Einde: ",M.endDate]}):null]}),M.note?c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:M.note}):null]},M.id))})}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe opleiding toevoegen"}),c.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[c.jsx("input",{type:"text",value:h.title,onChange:M=>m(O=>({...O,title:M.target.value})),placeholder:"Naam opleiding",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("input",{type:"text",value:h.institution,onChange:M=>m(O=>({...O,institution:M.target.value})),placeholder:"Onderwijsinstelling",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[c.jsx("input",{type:"month",value:h.startDate,onChange:M=>m(O=>({...O,startDate:M.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("input",{type:"month",value:h.endDate,onChange:M=>m(O=>({...O,endDate:M.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),c.jsx("textarea",{value:h.note,onChange:M=>m(O=>({...O,note:M.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("button",{type:"button",onClick:R,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg opleiding toe"})]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Certificaten & diploma's"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Upload officile documenten en voeg een toelichting toe."})]}),c.jsx("div",{className:"space-y-4",children:(n.certificates||[]).length===0?c.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen certificaten gepload."}):c.jsx("ul",{className:"space-y-3",children:n.certificates.map(M=>c.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-900",children:M.title}),c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:M.fileName})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("a",{href:M.filePath,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Bekijk"}),c.jsx("button",{type:"button",onClick:()=>D("certificates",M.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]})]}),M.note?c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:M.note}):null,c.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[M.uploadedAt?c.jsxs("span",{children:["Gepload: ",new Date(M.uploadedAt).toLocaleDateString()]}):null,M.size?c.jsxs("span",{children:[(M.size/(1024*1024)).toFixed(2)," MB"]}):null]})]},M.id))})}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuw certificaat toevoegen"}),c.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[c.jsx("input",{type:"text",value:N.title,onChange:M=>I(O=>({...O,title:M.target.value})),placeholder:"Titel certificaat of diploma",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("textarea",{value:N.note,onChange:M=>I(O=>({...O,note:M.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("input",{type:"file",onChange:Y,className:"text-sm"},j),c.jsx("button",{type:"button",onClick:P,disabled:k,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:k?"Bezig met uploaden...":"Upload en voeg toe"}),x?c.jsx("p",{className:`text-xs ${x.type==="error"?"text-red-500":"text-emerald-600"}`,children:x.message}):null]})]})]})]})}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Relevante werkervaring"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beschrijf je belangrijke werkervaringen en voeg een toelichting toe."})]}),c.jsx("div",{className:"space-y-4",children:(n.workExperience||[]).length===0?c.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen werkervaring toegevoegd."}):c.jsx("ul",{className:"space-y-3",children:n.workExperience.map(M=>c.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-900",children:M.role||"Functie onbekend"}),M.organisation?c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:M.organisation}):null]}),c.jsx("button",{type:"button",onClick:()=>D("workExperience",M.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),c.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[M.startDate?c.jsxs("span",{children:["Start: ",M.startDate]}):null,M.endDate?c.jsxs("span",{children:["Einde: ",M.endDate]}):null]}),M.note?c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:M.note}):null]},M.id))})}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe ervaring toevoegen"}),c.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[c.jsx("input",{type:"text",value:p.role,onChange:M=>y(O=>({...O,role:M.target.value})),placeholder:"Functietitel",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("input",{type:"text",value:p.organisation,onChange:M=>y(O=>({...O,organisation:M.target.value})),placeholder:"Organisatie",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[c.jsx("input",{type:"month",value:p.startDate,onChange:M=>y(O=>({...O,startDate:M.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("input",{type:"month",value:p.endDate,onChange:M=>y(O=>({...O,endDate:M.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),c.jsx("textarea",{value:p.note,onChange:M=>y(O=>({...O,note:M.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),c.jsx("button",{type:"button",onClick:pe,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg werkervaring toe"})]})]})]})}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:a,className:"rounded-full bg-lime-500 px-6 py-3 text-sm font-semibold text-white shadow transition hover:bg-lime-400 disabled:cursor-not-allowed disabled:bg-lime-300",children:a?"Opslaan...":"Opslaan"})})]})]})},oV=()=>{const{customer:t}=rs(),[e,n]=A.useState("[INSERT TEXT FROM EVCacademy]"),[s,i]=A.useState("[INSERT TEXT FROM EVCacademy]"),r=(t==null?void 0:t.name)||"kandidaat";return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("header",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Mijn loopbaandoel"}),c.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Jouw ambitie in kaart"}),c.jsx("p",{className:"max-w-2xl text-sm text-slate-500",children:"[INSERT TEXT FROM EVCacademy]"})]}),c.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[c.jsxs("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:["Voor ",r]}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beschrijf je ambitie: welke stappen wil je zetten binnen je loopbaan?"}),c.jsx("textarea",{value:e,onChange:a=>n(a.target.value),rows:8,className:"mt-4 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow-sm focus:border-evc-blue-400 focus:outline-none focus:ring-2 focus:ring-evc-blue-100"})]}),c.jsxs("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Motivatie"}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Waarom kies je voor dit traject en wat wil je laten zien?"}),c.jsx("textarea",{value:s,onChange:a=>i(a.target.value),rows:8,className:"mt-4 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow-sm focus:border-evc-blue-400 focus:outline-none focus:ring-2 focus:ring-evc-blue-100"})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full bg-evc-blue-600 px-5 py-2.5 text-sm font-semibold text-white shadow-lg transition hover:bg-evc-blue-500",children:[c.jsx(m1,{className:"h-4 w-4"}),"Tijdelijk opslaan"]})})]})},cV=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("header",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Werkplekbezoek"}),c.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Voorbereiding werkplekbezoek"}),c.jsx("p",{className:"text-sm text-slate-500",children:"[INSERT TEXT FROM EVCacademy]"})]}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:"[INSERT TEXT FROM EVCacademy]"})})]}),uV=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("header",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Criteriumgericht interview"}),c.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Voorbereiding criteriumgericht interview"}),c.jsx("p",{className:"text-sm text-slate-500",children:"[INSERT TEXT FROM EVCacademy]"})]}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:"[INSERT TEXT FROM EVCacademy]"})})]}),dV=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("header",{className:"space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Handleiding"}),c.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Handleiding en veelgestelde vragen"}),c.jsx("p",{className:"text-sm text-slate-500",children:"[INSERT TEXT FROM EVCacademy]"})]}),c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:c.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:"[INSERT TEXT FROM EVCacademy]"})})]}),hV=({title:t,value:e,trend:n,icon:s,variant:i="brand"})=>{const r={brand:"bg-brand-50 text-brand-700",emerald:"bg-emerald-50 text-emerald-700",amber:"bg-amber-50 text-amber-700",sky:"bg-sky-50 text-sky-700",slate:"bg-slate-50 text-slate-700"};return c.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-white p-6 shadow-card transition hover:-translate-y-1 hover:shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-500",children:t}),c.jsx("p",{className:"mt-2 text-3xl font-semibold text-slate-900",children:e})]}),s?c.jsx("span",{className:He("rounded-full p-3",r[i]||r.brand),children:c.jsx(s,{className:"h-6 w-6"})}):null]}),n?c.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-slate-500",children:[c.jsxs("span",{className:He("inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold",n.direction==="up"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"),children:[n.direction==="up"?"":"",n.value]}),c.jsx("span",{children:n.caption})]}):null,c.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-transparent via-white/40 to-transparent opacity-0 transition group-hover:opacity-100"})]})},fV=()=>{const{coach:t,customers:e=[],assignments:n=[],feedback:s=[]}=rs()??{},i=A.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Coach",[t]),r=A.useMemo(()=>{const u=e.length,d=n.filter(m=>((m==null?void 0:m.status)||"").toLowerCase()==="active").length,h=n.filter(m=>{const p=((m==null?void 0:m.status)||"").toLowerCase();return p==="pending"||p==="open"||p==="todo"}).length;return[{id:"assigned-customers",title:"Assigned customers",value:String(u),icon:Ko,variant:"brand"},{id:"active-assignments",title:"Active assignments",value:String(d),icon:lI,variant:"emerald"},{id:"pending-reviews",title:"Pending reviews",value:String(h),icon:cI,variant:"amber"}]},[n,e]),a=A.useMemo(()=>[...s].sort((u,d)=>{const h=(u==null?void 0:u.updatedAt)instanceof Date?u.updatedAt.getTime():0;return((d==null?void 0:d.updatedAt)instanceof Date?d.updatedAt.getTime():0)-h}).slice(0,5),[s]),l=A.useMemo(()=>(i==null?void 0:i.split(" ")[0])||"Coach",[i]);return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-brand-500 via-brand-600 to-brand-700 px-8 py-10 text-white shadow-card",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/70",children:"Welcome back"}),c.jsx("h2",{className:"mt-2 text-3xl font-semibold",children:`Hi ${l}, ready to coach?`}),c.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/80",children:"Review the latest uploads, leave actionable feedback, and keep your customers moving forward in their EVC journey."})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Today at a glance"}),c.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:r.map(u=>c.jsx(hV,{...u},u.id))})]}),c.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[c.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Recent feedback activity"}),a.length===0?c.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Nog geen feedback vastgelegd."}):c.jsx("div",{className:"mt-4 divide-y divide-slate-100",children:a.map(u=>c.jsxs("article",{className:"flex items-center justify-between py-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800",children:u.customerName||"Onbekende klant"}),c.jsx("p",{className:"text-xs text-slate-500",children:u.competencyId||"Competentie"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Feedback"}),c.jsx("p",{className:"text-sm font-medium text-slate-700",children:u.summary||u.content||"-"})]}),c.jsx("div",{className:"text-right text-xs text-slate-400",children:u.updatedAt?u.updatedAt.toLocaleString():""})]},u.id))})]})]})},mV=({columns:t=[],data:e=[],renderActions:n,emptyMessage:s="No data available",dense:i})=>c.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-card",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:He("min-w-full divide-y divide-slate-200",i?"text-sm":"text-base"),children:[c.jsx("thead",{className:"bg-slate-50",children:c.jsxs("tr",{children:[t.map(r=>c.jsx("th",{scope:"col",className:"whitespace-nowrap px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:r.header},r.accessor||r.id)),n?c.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actions"}):null]})}),c.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:e.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:t.length+(n?1:0),className:"px-4 py-8 text-center text-sm text-slate-500",children:s})}):e.map((r,a)=>c.jsxs("tr",{className:"hover:bg-slate-50",children:[t.map(l=>c.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-slate-700",children:l.render?l.render(r):r[l.accessor]},l.accessor||l.id)),n?c.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-500",children:n(r)}):null]},r.id||a))})]})})}),pV=()=>{const{customers:t=[]}=rs()??{},[e,n]=A.useState(""),s=is(),i=A.useMemo(()=>t.map(l=>{let u="-";return(l==null?void 0:l.lastActivity)instanceof Date?u=l.lastActivity.toLocaleDateString():typeof(l==null?void 0:l.lastActivity)=="string"&&l.lastActivity.trim()&&(u=l.lastActivity),{id:l.id,name:l.name||l.email||"Onbekende klant",email:l.email||"-",lastActivityLabel:u}}),[t]),r=A.useMemo(()=>e?i.filter(l=>`${l.name} ${l.email}`.toLowerCase().includes(e.toLowerCase())):i,[i,e]),a=[{header:"Name",accessor:"name"},{header:"Email",accessor:"email"},{header:"Last Activity",accessor:"lastActivityLabel"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"My customers"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Track progress and dive into each competency set."})]}),c.jsxs("div",{className:"relative",children:[c.jsx(MI,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),c.jsx("input",{type:"search",value:e,onChange:l=>n(l.target.value),placeholder:"Search customers",className:"h-10 w-full min-w-[220px] rounded-full border border-slate-200 bg-white pl-10 pr-4 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),c.jsx(mV,{columns:a,data:r,dense:!0,renderActions:l=>c.jsxs("button",{type:"button",onClick:()=>s(`/coach/customers/${l.id}`),className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-3 py-1.5 text-xs font-semibold text-white shadow-lg transition hover:bg-brand-500",children:["View details ",c.jsx(cr,{className:"h-3 w-3"})]})})]})},Cn=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t.toDate=="function")try{const n=t.toDate();return Number.isNaN(n.getTime())?null:n}catch{return null}const e=new Date(t);return Number.isNaN(e.getTime())?null:e},c2=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,...e,lastActivity:Cn(e.lastActivity),createdAt:Cn(e.createdAt),updatedAt:Cn(e.updatedAt)}},gV=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,coachId:e.coachId||null,customerId:e.customerId||null,status:e.status||"pending",createdAt:Cn(e.createdAt),updatedAt:Cn(e.updatedAt)}},u2=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{},n=Cn(e.updatedAt)||Cn(e.createdAt);return{id:t.id,coachId:e.coachId||null,coachName:e.coachName||"",customerId:e.customerId||null,customerName:e.customerName||"",competencyId:e.competencyId||"",summary:e.summary||e.status||"",content:e.content||e.body||"",updatedAt:n,createdAt:Cn(e.createdAt)}},yV=(t,e,n)=>{var h,m;if(!(t!=null&&t.exists()))return null;const s=t.data()||{},r=(Array.isArray(s.participants)?s.participants:Array.isArray(s.participantIds)?s.participantIds:[]).map(p=>typeof p=="string"?p:p==null?void 0:p.id).filter(Boolean),a=r.find(p=>p!==e)||null,l=s.participantProfiles||{};let u=s.title||s.name||"";if(!u&&a&&((h=l[a])!=null&&h.name)&&(u=l[a].name),!u&&a&&((m=l[a])!=null&&m.email)&&(u=l[a].email),!u&&a&&(n!=null&&n.has(a))){const p=n.get(a);u=p.name||p.email||`Gesprek met ${a.slice(0,6)}`}u||(u="Gesprek");const d=Cn(s.updatedAt)||Cn(s.lastMessageAt)||Cn(s.createdAt);return{id:t.id,name:u,lastMessage:s.lastMessage||"",updatedAt:d,participantIds:r,targetUserId:a||null}},bV=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,authorId:e.authorId||e.userId||null,authorName:e.authorName||e.displayName||"",content:e.content||e.body||"",createdAt:Cn(e.createdAt)||new Date}};function vV(t,e){if(!t)return e({data:null,error:new Error("coachUid ontbreekt")}),()=>{};const n=es(Be,"users",t),s=es(Be,"coachProfiles",t);let i=null,r=null,a=null,l=null;const u=()=>{if(a||l){e({data:null,error:a||l});return}if(!i){e({data:null,error:null});return}e({data:{...i,...r},error:null})},d=St(n,m=>{i=c2(m),a=null,u()},m=>{a=m,u()}),h=St(s,m=>{r=m!=null&&m.exists()?m.data():null,l=null,u()},m=>{l=m,u()});return()=>{d(),h()}}function xV(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Mt(Be,"users"),s=Ln(n,Ms("coachId","==",t));return St(s,i=>{const r=i.docs.map(c2).filter(Boolean).sort((a,l)=>(a.name||"").localeCompare(l.name||""));e({data:r,error:null})},i=>e({data:[],error:i}))}function _V(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Mt(Be,"assignments"),s=Ln(n,Ms("coachId","==",t),Or("createdAt","desc"));return St(s,i=>{const r=i.docs.map(gV).filter(Boolean);e({data:r,error:null})},i=>e({data:[],error:i}))}function EV(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Mt(Be,"feedback"),s=Ln(n,Ms("coachId","==",t),Or("updatedAt","desc"));return St(s,i=>{const r=i.docs.map(u2).filter(Boolean);e({data:r,error:null})},i=>e({data:[],error:i}))}function wV(t,e){if(!t)return e({data:[],error:new Error("customerId ontbreekt")}),()=>{};const n=Mt(Be,"feedback"),s=Ln(n,Ms("customerId","==",t),Or("updatedAt","desc"));return St(s,i=>{const r=i.docs.map(u2).filter(Boolean);e({data:r,error:null})},i=>e({data:[],error:i}))}async function TV({coachId:t,coachName:e,customerId:n,customerName:s,competencyId:i,body:r}){if(!t)throw new Error("coachId is verplicht");if(!n)throw new Error("customerId is verplicht");if(!i)throw new Error("competencyId is verplicht");const a=(r||"").trim();if(!a)throw new Error("Feedbacktekst is verplicht");const l=Mt(Be,"feedback");await ch(l,{coachId:t,coachName:e,customerId:n,customerName:s||null,competencyId:i,content:a,summary:a.slice(0,90),createdAt:hr(),updatedAt:hr()})}function AV(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=Mt(Be,"threads"),s=Ln(n,Ms("participants","array-contains",t),Or("updatedAt","desc"));return St(s,async i=>{try{const r=await M5().catch(()=>new Map),a=i.docs.map(l=>yV(l,t,r)).filter(Boolean).sort((l,u)=>{const d=l.updatedAt?l.updatedAt.getTime():0;return(u.updatedAt?u.updatedAt.getTime():0)-d});e({data:a,error:null})}catch(r){e({data:[],error:r})}},i=>e({data:[],error:i}))}function SV(t,e){if(!t)return e({data:[],error:new Error("threadId ontbreekt")}),()=>{};const n=Mt(Be,"threads",t,"messages"),s=Ln(n,Or("createdAt","asc"));return St(s,i=>{const r=i.docs.map(bV).filter(Boolean);e({data:r,error:null})},i=>e({data:[],error:i}))}async function NV({threadId:t,fromUserId:e,toUserId:n,body:s,authorName:i}){if(!t)throw new Error("threadId is verplicht");if(!e)throw new Error("fromUserId is verplicht");const r=(s||"").trim();if(!r)throw new Error("Bericht mag niet leeg zijn");const a=es(Be,"threads",t),l=Mt(a,"messages");await ch(l,{authorId:e,authorName:i,toUserId:n||null,content:r,createdAt:hr()}),await cM(a,{lastMessage:r,lastMessageAuthorId:e,lastMessageAuthorName:i,lastMessageAt:hr(),updatedAt:hr()}).catch(()=>{})}const CV=()=>{const{customerId:t}=dR(),e=is(),{customers:n=[],coach:s}=rs()??{},i=A.useMemo(()=>n.find(O=>O.id===t)||null,[n,t]),[r,a]=A.useState([]),[l,u]=A.useState(!1),[d,h]=A.useState(null),[m,p]=A.useState([]),[y,N]=A.useState(!1),[I,k]=A.useState(null),[T,x]=A.useState([]),[_,j]=A.useState(!1),[L,z]=A.useState(null),[w,b]=A.useState({}),[v,S]=A.useState({}),[C,D]=A.useState([]);A.useEffect(()=>{if(!(i!=null&&i.trajectId))return a([]),h(null),u(!1),()=>{};u(!0);const O=l2(i.trajectId,({data:H,error:Q})=>{a(Array.isArray(H)?H:[]),h(Q||null),u(!1)});return()=>{typeof O=="function"&&O()}},[i==null?void 0:i.trajectId]),A.useEffect(()=>{if(!(i!=null&&i.id))return p([]),k(null),N(!1),()=>{};N(!0);const O=a2(i.id,({uploads:H,error:Q})=>{p(Array.isArray(H)?H:[]),k(Q||null),N(!1)});return()=>{typeof O=="function"&&O()}},[i==null?void 0:i.id]),A.useEffect(()=>{if(!(i!=null&&i.id))return x([]),z(null),j(!1),()=>{};j(!0);const O=wV(i.id,({data:H,error:Q})=>{x(Array.isArray(H)?H:[]),z(Q||null),j(!1)});return()=>{typeof O=="function"&&O()}},[i==null?void 0:i.id]);const R=A.useMemo(()=>r.map(O=>{const H=m.filter(te=>te.competencyId===O.id).sort((te,Ue)=>{const G=te.uploadedAt instanceof Date?te.uploadedAt.getTime():0;return(Ue.uploadedAt instanceof Date?Ue.uploadedAt.getTime():0)-G}),Q=T.filter(te=>te.competencyId===O.id).sort((te,Ue)=>{const G=te.updatedAt instanceof Date?te.updatedAt.getTime():0;return(Ue.updatedAt instanceof Date?Ue.updatedAt.getTime():0)-G}),ge=[];return O.code&&ge.push(O.code),O.title&&ge.push(O.title),{id:O.id,title:ge.length>0?ge.join("  "):O.title||O.code||"Competentie",description:O.description||O.desiredOutcome||"",uploads:H,feedback:Q}}),[r,T,m]);A.useEffect(()=>{D(O=>O.length===R.length?O:R.map((H,Q)=>Q===0))},[R.length]);const pe=l||y||_,Y=(d==null?void 0:d.message)||(I==null?void 0:I.message)||(L==null?void 0:L.message)||null,P=O=>{D(H=>H.map((Q,ge)=>ge===O?!Q:Q))},M=async O=>{const H=(w[O.id]||"").trim();if(!H){S(Q=>({...Q,[O.id]:{status:"error",message:"Voer feedback in"}}));return}if(!(s!=null&&s.id)||!(i!=null&&i.id)){S(Q=>({...Q,[O.id]:{status:"error",message:"Informatie ontbreekt"}}));return}S(Q=>({...Q,[O.id]:{status:"saving"}}));try{await TV({coachId:s.id,coachName:s.name||s.email||"Coach",customerId:i.id,customerName:i.name||i.email||"",competencyId:O.id,body:H}),b(Q=>({...Q,[O.id]:""})),S(Q=>({...Q,[O.id]:{status:"success",message:"Feedback opgeslagen"}}))}catch(Q){S(ge=>({...ge,[O.id]:{status:"error",message:Q.message||"Opslaan mislukt"}}))}};return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("button",{type:"button",onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-500",children:[c.jsx(ev,{className:"h-4 w-4"})," Terug naar klanten"]}),c.jsxs("header",{className:"rounded-3xl bg-white p-6 shadow-card",children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Klantdossier"}),c.jsx("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:i.name||"Onbekend"}),c.jsx("p",{className:"mt-1 text-sm text-slate-500",children:i.email||"Geen e-mail"})]}),pe?c.jsx(Pa,{label:"Gegevens laden"}):c.jsxs("section",{className:"space-y-4",children:[Y?c.jsx("div",{className:"rounded-3xl border border-rose-200 bg-rose-50 px-6 py-4 text-sm text-rose-700",children:Y}):null,R.length===0?c.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"Nog geen competenties beschikbaar voor deze klant."}):R.map((O,H)=>{const Q=C[H],ge=v[O.id]||{status:"idle"};return c.jsxs("article",{className:"overflow-hidden rounded-3xl bg-white shadow-card",children:[c.jsxs("button",{type:"button",onClick:()=>P(H),className:"flex w-full items-center justify-between px-6 py-5 text-left",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Competentie"}),c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:O.title}),c.jsx("p",{className:"mt-1 text-sm text-slate-500",children:O.description||"Geen beschrijving"})]}),Q?c.jsx(ZR,{className:"h-5 w-5 text-slate-400"}):c.jsx(jm,{className:"h-5 w-5 text-slate-400"})]}),c.jsxs("div",{className:He("grid grid-cols-1 gap-6 border-t border-slate-100 px-6 transition-all duration-200 lg:grid-cols-[2fr,1fr]",Q?"max-h-[560px] py-6":"max-h-0 overflow-hidden"),children:[c.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Uploads"}),c.jsxs("ul",{className:"mt-2 space-y-2",children:[O.uploads.map(te=>{const Ue=te.uploadedAt instanceof Date?te.uploadedAt.toLocaleDateString():"";return c.jsxs("li",{className:"flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-2",children:[c.jsxs("span",{children:[te.displayName||te.name||te.fileName||"Bestand",Ue?c.jsx("span",{className:"ml-2 text-xs text-slate-400",children:Ue}):null]}),te.downloadURL?c.jsx("a",{href:te.downloadURL,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium text-brand-600 hover:text-brand-500",children:"Bekijken"}):null]},te.id)}),O.uploads.length===0?c.jsx("li",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-center text-xs text-slate-400",children:"Nog geen uploads."}):null]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Eerdere feedback"}),c.jsxs("ul",{className:"mt-2 space-y-3",children:[O.feedback.map(te=>{const Ue=te.updatedAt instanceof Date?te.updatedAt.toLocaleString():"";return c.jsxs("li",{className:"rounded-2xl bg-slate-100 px-4 py-3 text-xs text-slate-600",children:[c.jsx("p",{className:"font-medium text-slate-800",children:te.coachName||(s==null?void 0:s.name)||"Coach"}),c.jsx("p",{className:"mt-1 whitespace-pre-line",children:te.content||te.summary||"-"}),Ue?c.jsx("p",{className:"mt-2 text-[10px] uppercase tracking-wide text-slate-400",children:Ue}):null]},te.id)}),O.feedback.length===0?c.jsx("li",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-center text-xs text-slate-400",children:"Nog geen feedback vastgelegd."}):null]})]})]}),c.jsxs("form",{className:"flex h-full flex-col rounded-3xl bg-slate-50 p-5",onSubmit:te=>{te.preventDefault(),M(O)},children:[c.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Nieuwe feedback"}),c.jsx("textarea",{rows:6,value:w[O.id]??"",onChange:te=>b(Ue=>({...Ue,[O.id]:te.target.value})),placeholder:"Beschrijf observaties, geef complimenten, en noteer vervolgstappen.",className:"mt-2 flex-1 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"}),ge.status==="error"&&ge.message?c.jsx("p",{className:"mt-2 text-xs text-rose-600",children:ge.message}):null,ge.status==="success"&&ge.message?c.jsx("p",{className:"mt-2 text-xs text-emerald-600",children:ge.message}):null,c.jsxs("button",{type:"submit",disabled:ge.status==="saving",className:"mt-4 inline-flex items-center justify-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-brand-500 disabled:opacity-60",children:[c.jsx(m1,{className:"h-4 w-4"})," ",ge.status==="saving"?"Opslaan":"Sla feedback op"]})]})]})]},O.id)})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("button",{type:"button",onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-500",children:[c.jsx(ev,{className:"h-4 w-4"})," Terug naar klanten"]}),c.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"Klant niet gevonden."})]})},RV=()=>{const{feedback:t=[],customers:e=[]}=rs()??{},n=A.useMemo(()=>{const s=new Map(e.map(i=>[i.id,i]));return[...t].map(i=>{const r=s.get(i.customerId)||{},a=i.customerName||r.name||r.email||"Onbekende klant",l=i.updatedAt instanceof Date?i.updatedAt:null,u=l?l.toLocaleString():"";return{id:i.id,customerName:a,competencyLabel:i.competencyId||"Competentie",summary:i.summary||i.content||"-",updatedAt:l,updatedAtLabel:u}}).sort((i,r)=>{const a=i.updatedAt instanceof Date?i.updatedAt.getTime():0;return(r.updatedAt instanceof Date?r.updatedAt.getTime():0)-a})},[e,t]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Feedback queue"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Keep track of open reviews and recently submitted guidance."})]}),c.jsx("div",{className:"overflow-hidden rounded-3xl bg-white shadow-card",children:n.length===0?c.jsx("p",{className:"px-6 py-16 text-center text-sm text-slate-500",children:"Nog geen feedback geregistreerd."}):c.jsx("ul",{className:"divide-y divide-slate-100",children:n.map(s=>c.jsxs("li",{className:"flex items-center justify-between px-6 py-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800",children:s.customerName}),c.jsx("p",{className:"text-xs text-slate-500",children:s.competencyLabel})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Feedback"}),c.jsx("p",{className:"font-medium text-slate-700",children:s.summary})]}),c.jsx("span",{className:"text-xs text-slate-400",children:s.updatedAtLabel})]},s.id))})})]})},IV=()=>{const{coach:t}=rs()??{},e=(t==null?void 0:t.id)||null,n=(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Coach",[s,i]=A.useState([]),[r,a]=A.useState(!1),[l,u]=A.useState(null),[d,h]=A.useState(""),[m,p]=A.useState([]),[y,N]=A.useState(!1),[I,k]=A.useState(null),[T,x]=A.useState({}),[_,j]=A.useState(!1),[L,z]=A.useState(null);A.useEffect(()=>{if(!e)return i([]),u(null),a(!1),()=>{};a(!0);const v=AV(e,({data:S,error:C})=>{i(Array.isArray(S)?S:[]),u(C||null),a(!1)});return()=>{typeof v=="function"&&v()}},[e]),A.useEffect(()=>{var v;if(!d&&s.length>0){h(s[0].id);return}d&&!s.some(S=>S.id===d)&&h(((v=s[0])==null?void 0:v.id)||"")},[d,s]),A.useEffect(()=>{if(!d)return p([]),k(null),N(!1),()=>{};N(!0);const v=SV(d,({data:S,error:C})=>{p(Array.isArray(S)?S:[]),k(C||null),N(!1)});return()=>{typeof v=="function"&&v()}},[d]);const w=A.useMemo(()=>m.map(v=>{const S=v.authorId===e,C=v.createdAt instanceof Date?v.createdAt.toLocaleString():"";return{id:v.id,author:v.authorName||(S?n:"Contact"),body:v.content||v.summary||"",timestamp:C,from:S?"me":"other"}}),[e,n,m]),b=async()=>{var S;if(_||!e||!d)return;const v=(T[d]||"").trim();if(v){j(!0),z(null);try{const C=((S=s.find(D=>D.id===d))==null?void 0:S.targetUserId)||null;await NV({threadId:d,fromUserId:e,toUserId:C,body:v,authorName:n}),x(D=>({...D,[d]:""}))}catch(C){z(C.message||"Versturen mislukt")}finally{j(!1)}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Berichten"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Blijf in contact met je klanten en collega's."})]}),l?c.jsx("div",{className:"rounded-3xl border border-rose-200 bg-rose-50 px-6 py-4 text-sm text-rose-700",children:l.message||"Kon gesprekken niet laden."}):null,r&&s.length===0?c.jsx(Pa,{label:"Gesprekken laden"}):c.jsxs(c.Fragment,{children:[I?c.jsx("div",{className:"rounded-3xl border border-amber-200 bg-amber-50 px-6 py-3 text-sm text-amber-700",children:I.message||"Kon berichten niet laden."}):null,y?c.jsx(Pa,{label:"Berichten laden"}):c.jsx(o2,{threads:s,activeThreadId:d,onSelectThread:v=>{h(v),z(null)},messages:w,draft:T[d]??"",onDraftChange:v=>{x(S=>({...S,[d]:v})),z(null)},onSend:b,emptyLabel:"Selecteer een gesprek om het bericht te bekijken"})]}),L?c.jsx("p",{className:"text-sm text-rose-600",children:L}):null]})},jV=[{label:"Dashboard",to:"/admin",icon:Od,end:!0},{label:"Assignments",to:"/admin/assignments",icon:dI},{label:"Trajects",to:"/admin/trajects",icon:d1},{label:"Users",to:"/admin/users",icon:Ko},{label:"Profile",to:"/admin/profile",icon:h1}],kV=[{label:"Dashboard",to:"/coach",icon:Od,end:!0},{label:"My Customers",to:"/coach/customers",icon:Ko},{label:"Feedback",to:"/coach/feedback",icon:d1},{label:"Messages",to:"/coach/messages",icon:wI}],If=[{label:"Dashboard",to:"/customer/dashboard",icon:Od,end:!0},{label:"Mijn profiel",to:"/customer/profile",icon:h1},{label:"Mijn loopbaandoel",to:"/customer/career-goal",icon:gI},{label:"Mijn portfolio",to:"/customer/portfolio",icon:mI},{label:"Werkplekbezoek",to:"/customer/workplace-visit",icon:XR},{label:"Criteriumgericht interview",to:"/customer/criterium-interview",icon:rI},{label:"Contact",to:"/customer/contact",icon:CI},{label:"Handleiding",to:"/customer/manual",icon:$R}],ro=t=>{if(!t||typeof t!="object")return t??null;const e={...t};return e.uid&&!e.firebaseUid?e.firebaseUid=e.uid:e.firebaseUid&&!e.uid&&(e.uid=e.firebaseUid),e},DV=()=>{const t=is(),[e,n]=A.useState(null),[s,i]=A.useState(null),[r,a]=A.useState(null),l=()=>{localStorage.removeItem("token"),t("/login",{replace:!0})};A.useEffect(()=>{let m=!0;const p=localStorage.getItem("user");if(p)try{const N=JSON.parse(p),I=(N==null?void 0:N.firebaseUid)||(N==null?void 0:N.uid);I&&m&&n(I)}catch{}const y=Sg(Li,N=>{m&&N!=null&&N.uid&&n(I=>I||N.uid)});return()=>{m=!1,y()}},[]),A.useEffect(()=>{if(!e){i(null);return}const m=r2(e,({data:p,error:y})=>{if(y){a(y),i(null);return}a(null),i(p||null)});return()=>{typeof m=="function"&&m()}},[e]);const u=(s==null?void 0:s.name)||(s==null?void 0:s.email)||"Admin",d=s!=null&&s.role?s.role.charAt(0).toUpperCase()+s.role.slice(1):"Administrator",h=r?"Administrator":d;return c.jsx(hg,{className:"bg-white",mainClassName:"bg-white",sidebar:c.jsx(fg,{tone:"dark",header:c.jsxs("div",{className:"space-y-4 text-white",children:[c.jsx(Md,{className:"w-fit",tone:"dark"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Admin"}),c.jsx("h1",{className:"text-xl font-semibold text-white",children:"EVC Control"})]})]}),navItems:jV,footer:c.jsx("button",{type:"button",onClick:l,className:"flex w-full items-center justify-center rounded-lg border border-white/20 bg-white/10 px-3 py-2 text-sm font-medium text-white transition hover:bg-white/20",children:"Sign out"})}),topbar:c.jsx(mg,{title:"Administration overview",tone:"brand",user:{name:u,subtitle:h,role:"Admin"},logoTo:"/admin",rightSlot:c.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[c.jsx("button",{type:"button",onClick:()=>alert("Mock: generate report"),className:"rounded-full border border-white/40 px-3 py-2 text-sm font-medium text-white transition hover:bg-white/10",children:"Generate report"}),c.jsx("button",{type:"button",onClick:l,className:"rounded-full bg-white px-3 py-2 text-sm font-semibold text-evc-blue-600 shadow-lg transition hover:bg-white/90",children:"Sign out"})]})}),children:c.jsx(dg,{})})},OV=()=>{const t=is(),[e,n]=A.useState(()=>{try{const P=localStorage.getItem("user")||"null";return ro(JSON.parse(P))}catch{return null}}),[s,i]=A.useState(!e),[r,a]=A.useState(null);A.useEffect(()=>{let P=!0;return(async()=>{i(!0);try{const O=await Is("/auth/me");if(!P)return;n(H=>{const Q=ro({...H||{},...O||{}});try{localStorage.setItem("user",JSON.stringify(Q))}catch{}return Q}),a(null)}catch(O){if(!P)return;a(O)}finally{P&&i(!1)}})(),()=>{P=!1}},[]);const l=(e==null?void 0:e.firebaseUid)||(e==null?void 0:e.uid)||null,[u,d]=A.useState(null),[h,m]=A.useState(null);A.useEffect(()=>{if(!l)return d(null),m(null),()=>{};const P=vV(l,({data:M,error:O})=>{if(O){m(O),d(null);return}m(null),d(M||null)});return()=>{typeof P=="function"&&P()}},[l]);const[p,y]=A.useState([]),[N,I]=A.useState(null);A.useEffect(()=>{if(!l)return y([]),I(null),()=>{};const P=xV(l,({data:M,error:O})=>{if(O){I(O),y([]);return}I(null),y(Array.isArray(M)?M:[])});return()=>{typeof P=="function"&&P()}},[l]);const[k,T]=A.useState([]),[x,_]=A.useState(null);A.useEffect(()=>{if(!l)return T([]),_(null),()=>{};const P=_V(l,({data:M,error:O})=>{if(O){_(O),T([]);return}_(null),T(Array.isArray(M)?M:[])});return()=>{typeof P=="function"&&P()}},[l]);const[j,L]=A.useState([]),[z,w]=A.useState(null);A.useEffect(()=>{if(!l)return L([]),w(null),()=>{};const P=EV(l,({data:M,error:O})=>{if(O){w(O),L([]);return}w(null),L(Array.isArray(M)?M:[])});return()=>{typeof P=="function"&&P()}},[l]);const b=A.useMemo(()=>[{value:"all",label:"Alle klanten"},...p.map(M=>({value:M.id,label:M.name||M.email||"Unknown customer"}))],[p]),[v,S]=A.useState("all");A.useEffect(()=>{var P;b.some(M=>M.value===v)||S(((P=b[0])==null?void 0:P.value)||"all")},[b,v]);const C=A.useMemo(()=>v==="all"?null:p.find(P=>P.id===v)||null,[v,p]),D=A.useMemo(()=>C?`Focus: ${C.name||C.email||"Customer"}`:p.length===0?"Geen klanten gekoppeld":`${p.length} klanten gekoppeld`,[C,p.length]),R={name:(u==null?void 0:u.name)||(e==null?void 0:e.name)||(u==null?void 0:u.email)||(e==null?void 0:e.email)||"Coach",subtitle:D,role:"Coach"},pe=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/login",{replace:!0})},Y=A.useMemo(()=>({coach:u,account:e,customers:p,assignments:k,feedback:j,selectedCustomer:C,errors:{user:r,profile:h,customers:N,assignments:x,feedback:z},loading:{user:s}}),[k,x,u,h,N,p,z,j,s,C,e,r]);return c.jsx(hg,{className:"bg-white",mainClassName:"bg-white",sidebar:c.jsx(fg,{tone:"dark",header:c.jsxs("div",{className:"space-y-4 text-white",children:[c.jsx(Md,{className:"w-fit",tone:"dark"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Coach"}),c.jsx("h1",{className:"text-xl font-semibold text-white",children:"EVC Workspace"})]})]}),navItems:kV}),topbar:c.jsx(mg,{title:"Coaching dashboard",tone:"brand",user:R,logoTo:"/coach",rightSlot:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("select",{value:v,onChange:P=>S(P.target.value),className:"h-10 rounded-full border border-white/30 bg-white px-3 text-sm font-medium text-slate-900 shadow-sm focus:border-white/60 focus:outline-none focus:ring-2 focus:ring-white/30",children:b.map(P=>c.jsx("option",{value:P.value,children:P.label},P.value))}),c.jsx("button",{type:"button",onClick:pe,className:"rounded-full bg-white px-3 py-2 text-sm font-semibold text-evc-blue-600 shadow-lg transition hover:bg-white/90",children:"Sign out"})]})}),children:c.jsx(dg,{context:Y})})},MV=()=>{const t=is(),[e,n]=A.useState(()=>{try{const Y=localStorage.getItem("user")||"null";return ro(JSON.parse(Y))}catch{return null}}),[s,i]=A.useState(()=>{try{const Y=localStorage.getItem("impersonationBackup");return Y?JSON.parse(Y):null}catch{return null}}),[r,a]=A.useState(!e),[l,u]=A.useState(null),[d,h]=A.useState(null),[m,p]=A.useState(null),[y,N]=A.useState(null),[I,k]=A.useState(null),T=zi();A.useEffect(()=>{let Y=!0;return(async()=>{a(!0);try{const M=await Is("/auth/me");if(!Y)return;n(O=>{const H=ro({...O||{},...M||{}});try{localStorage.setItem("user",JSON.stringify(H))}catch{}return H}),u(null)}catch(M){if(!Y)return;u(M)}finally{Y&&a(!1)}})(),()=>{Y=!1}},[]);const x=(e==null?void 0:e.firebaseUid)||(e==null?void 0:e.uid)||null;A.useEffect(()=>{if(!x){h(null),p(null),N(null),k(null);return}const Y=sV(x,({customer:P,coach:M,assignment:O,error:H})=>{if(H){k(H);return}k(null),P!==void 0&&h(P||null),M!==void 0&&p(M||null),O!==void 0&&N(O||null)});return()=>{typeof Y=="function"&&Y()}},[x]);const _=A.useMemo(()=>{if(d){const P=d.firebaseUid||d.id||null;return P?{...d,firebaseUid:P,uid:P}:d}if(!e)return null;const Y=e.firebaseUid||e.uid||(e.id?String(e.id):null);return Y?{id:Y,uid:Y,firebaseUid:Y,name:e.name||e.email||"Customer",email:e.email||"",role:e.role||"customer",trajectId:e.trajectId||null}:null},[d,e]),j=A.useMemo(()=>m||null,[m]),L=A.useMemo(()=>{if(!(_!=null&&_.lastActivity))return"-";const Y=_.lastActivity;return Y instanceof Date?Y.toLocaleString():typeof Y=="string"?Y:"-"},[_==null?void 0:_.lastActivity]),z=!!s,w=A.useMemo(()=>{if(!(s!=null&&s.userData))return null;const{name:Y,email:P}=s.userData;return Y||P||null},[s]),b=[];z&&b.push(`Meekijken door ${w||"Admin"}`),j!=null&&j.name&&b.push(`Coach: ${j.name}`),y!=null&&y.status&&b.push(y.status);const v=b.join("  ")||"Customer",S=A.useMemo(()=>{const Y=T.pathname;return If.find(P=>Y.startsWith(P.to))||If[0]},[T.pathname]),C=(S==null?void 0:S.label)||"Mijn EVC",D={name:(_==null?void 0:_.name)||"Customer",subtitle:v,role:"Customer"},R=async()=>{try{await tT(Li)}catch{}localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("impersonationBackup"),n(null),i(null),h(null),p(null),N(null),t("/login",{replace:!0})},pe=()=>{if(!z){t("/admin",{replace:!0});return}let Y=s;if(!Y)try{const P=localStorage.getItem("impersonationBackup");Y=P?JSON.parse(P):null}catch{Y=null}if(Y&&Object.prototype.hasOwnProperty.call(Y,"token")?Y.token===null?localStorage.removeItem("token"):localStorage.setItem("token",Y.token):localStorage.removeItem("token"),Y&&Object.prototype.hasOwnProperty.call(Y,"user"))if(Y.user===null)localStorage.removeItem("user"),n(null);else{localStorage.setItem("user",Y.user);try{n(ro(JSON.parse(Y.user)))}catch{n(null)}}else localStorage.removeItem("user"),n(null);localStorage.removeItem("impersonationBackup"),i(null),h(null),p(null),N(null),t("/admin",{replace:!0})};return c.jsx(hg,{className:"bg-white",mainClassName:"bg-white",sidebar:c.jsx(fg,{tone:"dark",header:c.jsxs("div",{className:"space-y-4 text-white",children:[c.jsx(Md,{className:"w-fit",tone:"dark"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Customer"}),c.jsx("h1",{className:"text-xl font-semibold text-white",children:"Mijn EVC"})]})]}),navItems:If}),topbar:c.jsx(mg,{title:C,tone:"brand",user:D,logoTo:"/customer/dashboard",rightSlot:c.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3 text-sm text-white",children:[z?c.jsx("button",{type:"button",onClick:pe,className:"rounded-full border border-white/40 bg-white/10 px-3 py-1 font-semibold text-white transition hover:bg-white/20",children:"Stop meekijken"}):null,c.jsx("button",{type:"button",onClick:R,className:"rounded-full bg-white px-3 py-1 font-semibold text-evc-blue-600 shadow-sm transition hover:bg-white/90",children:"Log uit"}),c.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 font-medium text-white/90 shadow-sm",children:["Laatste activiteit: ",L]}),j?c.jsxs("span",{className:"hidden rounded-full bg-white px-3 py-1 font-medium text-evc-blue-600 sm:inline",children:["Coach ",j.name]}):null]})}),children:c.jsx(dg,{context:{customer:_,coach:j,assignment:y,account:e,loadingUser:r,userError:l,firestoreError:I}})})},VV=()=>c.jsx(MR,{children:c.jsxs(NR,{children:[c.jsx(Ce,{path:"/",element:c.jsx(j5,{})}),c.jsx(Ce,{path:"/login",element:c.jsx(R5,{})}),c.jsx(Ce,{path:"/testing/create-account",element:c.jsx(K5,{})}),c.jsxs(Ce,{path:"/admin",element:c.jsx(DV,{}),children:[c.jsx(Ce,{index:!0,element:c.jsx(V5,{})}),c.jsx(Ce,{path:"assignments",element:c.jsx(L5,{})}),c.jsx(Ce,{path:"trajects",element:c.jsx(z5,{})}),c.jsx(Ce,{path:"profile",element:c.jsx(B5,{})}),c.jsx(Ce,{path:"users",element:c.jsx(H5,{})})]}),c.jsxs(Ce,{path:"/coach",element:c.jsx(OV,{}),children:[c.jsx(Ce,{index:!0,element:c.jsx(fV,{})}),c.jsx(Ce,{path:"customers",element:c.jsx(pV,{})}),c.jsx(Ce,{path:"customers/:customerId",element:c.jsx(CV,{})}),c.jsx(Ce,{path:"feedback",element:c.jsx(RV,{})}),c.jsx(Ce,{path:"messages",element:c.jsx(IV,{})})]}),c.jsxs(Ce,{path:"/customer",element:c.jsx(MV,{}),children:[c.jsx(Ce,{index:!0,element:c.jsx(hs,{to:"/customer/dashboard",replace:!0})}),c.jsx(Ce,{path:"dashboard",element:c.jsx($5,{})}),c.jsx(Ce,{path:"profile",element:c.jsx(lV,{})}),c.jsx(Ce,{path:"career-goal",element:c.jsx(oV,{})}),c.jsx(Ce,{path:"portfolio",element:c.jsx(iV,{})}),c.jsx(Ce,{path:"workplace-visit",element:c.jsx(cV,{})}),c.jsx(Ce,{path:"criterium-interview",element:c.jsx(uV,{})}),c.jsx(Ce,{path:"contact",element:c.jsx(rV,{})}),c.jsx(Ce,{path:"manual",element:c.jsx(dV,{})})]}),c.jsx(Ce,{path:"/Login.html",element:c.jsx(hs,{to:"/login",replace:!0})}),c.jsx(Ce,{path:"/Dashboard.html",element:c.jsx(hs,{to:"/admin",replace:!0})}),c.jsx(Ce,{path:"/Profile.html",element:c.jsx(hs,{to:"/customer/profile",replace:!0})}),c.jsx(Ce,{path:"/Planning.html",element:c.jsx(hs,{to:"/customer/portfolio",replace:!0})}),c.jsx(Ce,{path:"/Messages.html",element:c.jsx(hs,{to:"/customer/contact",replace:!0})}),c.jsx(Ce,{path:"/Evidence.html",element:c.jsx(hs,{to:"/customer/portfolio",replace:!0})}),c.jsx(Ce,{path:"/index.html",element:c.jsx(hs,{to:"/",replace:!0})}),c.jsx(Ce,{path:"*",element:c.jsx(hs,{to:"/",replace:!0})})]})});function LV(){return c.jsx(VV,{})}const UV=VC.createRoot(document.getElementById("root"));UV.render(c.jsx(fu.StrictMode,{children:c.jsx(LV,{})}));
