function _j(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function N_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j_={exports:{}},Pd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wj=Symbol.for("react.transitional.element"),Ej=Symbol.for("react.fragment");function A_(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:wj,type:t,key:s,ref:e!==void 0?e:null,props:n}}Pd.Fragment=Ej;Pd.jsx=A_;Pd.jsxs=A_;j_.exports=Pd;var l=j_.exports,S_={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=Symbol.for("react.transitional.element"),Tj=Symbol.for("react.portal"),Nj=Symbol.for("react.fragment"),jj=Symbol.for("react.strict_mode"),Aj=Symbol.for("react.profiler"),Sj=Symbol.for("react.consumer"),Cj=Symbol.for("react.context"),Rj=Symbol.for("react.forward_ref"),kj=Symbol.for("react.suspense"),Ij=Symbol.for("react.memo"),C_=Symbol.for("react.lazy"),Dj=Symbol.for("react.activity"),By=Symbol.iterator;function Oj(t){return t===null||typeof t!="object"?null:(t=By&&t[By]||t["@@iterator"],typeof t=="function"?t:null)}var R_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k_=Object.assign,I_={};function il(t,e,n){this.props=t,this.context=e,this.refs=I_,this.updater=n||R_}il.prototype.isReactComponent={};il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function D_(){}D_.prototype=il.prototype;function Op(t,e,n){this.props=t,this.context=e,this.refs=I_,this.updater=n||R_}var Mp=Op.prototype=new D_;Mp.constructor=Op;k_(Mp,il.prototype);Mp.isPureReactComponent=!0;var qy=Array.isArray;function em(){}var tt={H:null,A:null,T:null,S:null},O_=Object.prototype.hasOwnProperty;function Vp(t,e,n){var s=n.ref;return{$$typeof:Dp,type:t,key:e,ref:s!==void 0?s:null,props:n}}function Mj(t,e){return Vp(t.type,e,t.props)}function Pp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dp}function Vj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fy=/\/+/g;function Xh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vj(""+t.key):e.toString(36)}function Pj(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(em,em):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function lr(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Dp:case Tj:r=!0;break;case C_:return r=t._init,lr(r(t._payload),e,n,s,i)}}if(r)return i=i(t),r=s===""?"."+Xh(t,0):s,qy(i)?(n="",r!=null&&(n=r.replace(Fy,"$&/")+"/"),lr(i,e,n,"",function(d){return d})):i!=null&&(Pp(i)&&(i=Mj(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(Fy,"$&/")+"/")+r)),e.push(i)),1;r=0;var o=s===""?".":s+":";if(qy(t))for(var u=0;u<t.length;u++)s=t[u],a=o+Xh(s,u),r+=lr(s,e,n,a,i);else if(u=Oj(t),typeof u=="function")for(t=u.call(t),u=0;!(s=t.next()).done;)s=s.value,a=o+Xh(s,u++),r+=lr(s,e,n,a,i);else if(a==="object"){if(typeof t.then=="function")return lr(Pj(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function Uc(t,e,n){if(t==null)return t;var s=[],i=0;return lr(t,s,"","",function(a){return e.call(n,a,i++)}),s}function Lj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Hy=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Uj={map:Uc,forEach:function(t,e,n){Uc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uc(t,function(){e++}),e},toArray:function(t){return Uc(t,function(e){return e})||[]},only:function(t){if(!Pp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Activity=Dj;ge.Children=Uj;ge.Component=il;ge.Fragment=Nj;ge.Profiler=Aj;ge.PureComponent=Op;ge.StrictMode=jj;ge.Suspense=kj;ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=tt;ge.__COMPILER_RUNTIME={__proto__:null,c:function(t){return tt.H.useMemoCache(t)}};ge.cache=function(t){return function(){return t.apply(null,arguments)}};ge.cacheSignal=function(){return null};ge.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=k_({},t.props),i=t.key;if(e!=null)for(a in e.key!==void 0&&(i=""+e.key),e)!O_.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(s[a]=e[a]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var r=Array(a),o=0;o<a;o++)r[o]=arguments[o+2];s.children=r}return Vp(t.type,i,s)};ge.createContext=function(t){return t={$$typeof:Cj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Sj,_context:t},t};ge.createElement=function(t,e,n){var s,i={},a=null;if(e!=null)for(s in e.key!==void 0&&(a=""+e.key),e)O_.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var o=Array(r),u=0;u<r;u++)o[u]=arguments[u+2];i.children=o}if(t&&t.defaultProps)for(s in r=t.defaultProps,r)i[s]===void 0&&(i[s]=r[s]);return Vp(t,a,i)};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:Rj,render:t}};ge.isValidElement=Pp;ge.lazy=function(t){return{$$typeof:C_,_payload:{_status:-1,_result:t},_init:Lj}};ge.memo=function(t,e){return{$$typeof:Ij,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=tt.T,n={};tt.T=n;try{var s=t(),i=tt.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(em,Hy)}catch(a){Hy(a)}finally{e!==null&&n.types!==null&&(e.types=n.types),tt.T=e}};ge.unstable_useCacheRefresh=function(){return tt.H.useCacheRefresh()};ge.use=function(t){return tt.H.use(t)};ge.useActionState=function(t,e,n){return tt.H.useActionState(t,e,n)};ge.useCallback=function(t,e){return tt.H.useCallback(t,e)};ge.useContext=function(t){return tt.H.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t,e){return tt.H.useDeferredValue(t,e)};ge.useEffect=function(t,e){return tt.H.useEffect(t,e)};ge.useEffectEvent=function(t){return tt.H.useEffectEvent(t)};ge.useId=function(){return tt.H.useId()};ge.useImperativeHandle=function(t,e,n){return tt.H.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return tt.H.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return tt.H.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return tt.H.useMemo(t,e)};ge.useOptimistic=function(t,e){return tt.H.useOptimistic(t,e)};ge.useReducer=function(t,e,n){return tt.H.useReducer(t,e,n)};ge.useRef=function(t){return tt.H.useRef(t)};ge.useState=function(t){return tt.H.useState(t)};ge.useSyncExternalStore=function(t,e,n){return tt.H.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return tt.H.useTransition()};ge.version="19.2.0";S_.exports=ge;var j=S_.exports;const Lu=N_(j),zj=_j({__proto__:null,default:Lu},[j]);var M_={exports:{}},Ld={},V_={exports:{}},P_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,Q){var q=V.length;V.push(Q);e:for(;0<q;){var ie=q-1>>>1,ye=V[ie];if(0<i(ye,Q))V[ie]=Q,V[q]=ye,q=ie;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var Q=V[0],q=V.pop();if(q!==Q){V[0]=q;e:for(var ie=0,ye=V.length,qe=ye>>>1;ie<qe;){var st=2*(ie+1)-1,at=V[st],K=st+1,W=V[K];if(0>i(at,q))K<ye&&0>i(W,at)?(V[ie]=W,V[K]=q,ie=K):(V[ie]=at,V[st]=q,ie=st);else if(K<ye&&0>i(W,q))V[ie]=W,V[K]=q,ie=K;else break e}}return Q}function i(V,Q){var q=V.sortIndex-Q.sortIndex;return q!==0?q:V.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var r=Date,o=r.now();t.unstable_now=function(){return r.now()-o}}var u=[],d=[],h=1,m=null,p=3,y=!1,b=!1,N=!1,R=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function I(V){for(var Q=n(d);Q!==null;){if(Q.callback===null)s(d);else if(Q.startTime<=V)s(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function M(V){if(N=!1,I(V),!b)if(n(u)!==null)b=!0,L||(L=!0,D());else{var Q=n(d);Q!==null&&G(M,Q.startTime-V)}}var L=!1,v=-1,x=5,T=-1;function C(){return R?!0:!(t.unstable_now()-T<x)}function k(){if(R=!1,L){var V=t.unstable_now();T=V;var Q=!0;try{e:{b=!1,N&&(N=!1,_(v),v=-1),y=!0;var q=p;try{t:{for(I(V),m=n(u);m!==null&&!(m.expirationTime>V&&C());){var ie=m.callback;if(typeof ie=="function"){m.callback=null,p=m.priorityLevel;var ye=ie(m.expirationTime<=V);if(V=t.unstable_now(),typeof ye=="function"){m.callback=ye,I(V),Q=!0;break t}m===n(u)&&s(u),I(V)}else s(u);m=n(u)}if(m!==null)Q=!0;else{var qe=n(d);qe!==null&&G(M,qe.startTime-V),Q=!1}}break e}finally{m=null,p=q,y=!1}Q=void 0}}finally{Q?D():L=!1}}}var D;if(typeof E=="function")D=function(){E(k)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,de=A.port2;A.port1.onmessage=k,D=function(){de.postMessage(null)}}else D=function(){w(k,0)};function G(V,Q){v=w(function(){V(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var q=p;p=Q;try{return V()}finally{p=q}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(V,Q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=p;p=V;try{return Q()}finally{p=q}},t.unstable_scheduleCallback=function(V,Q,q){var ie=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ie+q:ie):q=ie,V){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=q+ye,V={id:h++,callback:Q,priorityLevel:V,startTime:q,expirationTime:ye,sortIndex:-1},q>ie?(V.sortIndex=q,e(d,V),n(u)===null&&V===n(d)&&(N?(_(v),v=-1):N=!0,G(M,q-ie))):(V.sortIndex=ye,e(u,V),b||y||(b=!0,L||(L=!0,D()))),V},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(V){var Q=p;return function(){var q=p;p=Q;try{return V.apply(this,arguments)}finally{p=q}}}})(P_);V_.exports=P_;var Bj=V_.exports,L_={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qj=j;function U_(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ui(){}var sn={d:{f:ui,r:function(){throw Error(U_(522))},D:ui,C:ui,L:ui,m:ui,X:ui,S:ui,M:ui},p:0,findDOMNode:null},Fj=Symbol.for("react.portal");function Hj(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fj,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var to=qj.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ud(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=sn;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(U_(299));return Hj(t,e,null,n)};on.flushSync=function(t){var e=to.T,n=sn.p;try{if(to.T=null,sn.p=2,t)return t()}finally{to.T=e,sn.p=n,sn.d.f()}};on.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,sn.d.C(t,e))};on.prefetchDNS=function(t){typeof t=="string"&&sn.d.D(t)};on.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Ud(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?sn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:a}):n==="script"&&sn.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};on.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ud(e.as,e.crossOrigin);sn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&sn.d.M(t)};on.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Ud(n,e.crossOrigin);sn.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};on.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ud(e.as,e.crossOrigin);sn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else sn.d.m(t)};on.requestFormReset=function(t){sn.d.r(t)};on.unstable_batchedUpdates=function(t,e){return t(e)};on.useFormState=function(t,e,n){return to.H.useFormState(t,e,n)};on.useFormStatus=function(){return to.H.useHostTransitionStatus()};on.version="19.2.0";function z_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z_)}catch(t){console.error(t)}}z_(),L_.exports=on;var Gj=L_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rt=Bj,B_=j,Kj=Gj;function z(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function q_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function H_(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gy(t){if(Jo(t)!==t)throw Error(z(188))}function $j(t){var e=t.alternate;if(!e){if(e=Jo(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Gy(i),t;if(a===s)return Gy(i),e;a=a.sibling}throw Error(z(188))}if(n.return!==s.return)n=i,s=a;else{for(var r=!1,o=i.child;o;){if(o===n){r=!0,n=i,s=a;break}if(o===s){r=!0,s=i,n=a;break}o=o.sibling}if(!r){for(o=a.child;o;){if(o===n){r=!0,n=a,s=i;break}if(o===s){r=!0,s=a,n=i;break}o=o.sibling}if(!r)throw Error(z(189))}}if(n.alternate!==s)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function G_(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=G_(t),e!==null)return e;t=t.sibling}return null}var nt=Object.assign,Qj=Symbol.for("react.element"),zc=Symbol.for("react.transitional.element"),Fl=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),K_=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),$_=Symbol.for("react.consumer"),Os=Symbol.for("react.context"),Lp=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),sm=Symbol.for("react.suspense_list"),Up=Symbol.for("react.memo"),hi=Symbol.for("react.lazy"),im=Symbol.for("react.activity"),Yj=Symbol.for("react.memo_cache_sentinel"),Ky=Symbol.iterator;function Ol(t){return t===null||typeof t!="object"?null:(t=Ky&&t[Ky]||t["@@iterator"],typeof t=="function"?t:null)}var Xj=Symbol.for("react.client.reference");function am(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Xj?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mr:return"Fragment";case tm:return"Profiler";case K_:return"StrictMode";case nm:return"Suspense";case sm:return"SuspenseList";case im:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Fl:return"Portal";case Os:return t.displayName||"Context";case $_:return(t._context.displayName||"Context")+".Consumer";case Lp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Up:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case hi:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}var Hl=Array.isArray,ue=B_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=Kj.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ta={pending:!1,data:null,method:null,action:null},rm=[],pr=-1;function _s(t){return{current:t}}function Mt(t){0>pr||(t.current=rm[pr],rm[pr]=null,pr--)}function Xe(t,e){pr++,rm[pr]=t.current,t.current=e}var us=_s(null),No=_s(null),Ri=_s(null),Uu=_s(null);function zu(t,e){switch(Xe(Ri,e),Xe(No,t),Xe(us,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Jx(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Jx(e),t=f1(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Mt(us),Xe(us,t)}function zr(){Mt(us),Mt(No),Mt(Ri)}function lm(t){t.memoizedState!==null&&Xe(Uu,t);var e=us.current,n=f1(e,t.type);e!==n&&(Xe(No,t),Xe(us,n))}function Bu(t){No.current===t&&(Mt(us),Mt(No)),Uu.current===t&&(Mt(Uu),Vo._currentValue=Ta)}var Wh,$y;function xa(t){if(Wh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wh=e&&e[1]||"",$y=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wh+t+$y}var Jh=!1;function Zh(t,e){if(!t||Jh)return"";Jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(y){var p=y}Reflect.construct(t,[],m)}else{try{m.call()}catch(y){p=y}t.call(m.prototype)}}else{try{throw Error()}catch(y){p=y}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(y){if(y&&p&&typeof y.stack=="string")return[y.stack,p.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=s.DetermineComponentFrameRoot(),r=a[0],o=a[1];if(r&&o){var u=r.split(`
`),d=o.split(`
`);for(i=s=0;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;for(;i<d.length&&!d[i].includes("DetermineComponentFrameRoot");)i++;if(s===u.length||i===d.length)for(s=u.length-1,i=d.length-1;1<=s&&0<=i&&u[s]!==d[i];)i--;for(;1<=s&&0<=i;s--,i--)if(u[s]!==d[i]){if(s!==1||i!==1)do if(s--,i--,0>i||u[s]!==d[i]){var h=`
`+u[s].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=s&&0<=i);break}}}finally{Jh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?xa(n):""}function Wj(t,e){switch(t.tag){case 26:case 27:case 5:return xa(t.type);case 16:return xa("Lazy");case 13:return t.child!==e&&e!==null?xa("Suspense Fallback"):xa("Suspense");case 19:return xa("SuspenseList");case 0:case 15:return Zh(t.type,!1);case 11:return Zh(t.type.render,!1);case 1:return Zh(t.type,!0);case 31:return xa("Activity");default:return""}}function Qy(t){try{var e="",n=null;do e+=Wj(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var om=Object.prototype.hasOwnProperty,zp=Rt.unstable_scheduleCallback,ef=Rt.unstable_cancelCallback,Jj=Rt.unstable_shouldYield,Zj=Rt.unstable_requestPaint,An=Rt.unstable_now,eA=Rt.unstable_getCurrentPriorityLevel,Q_=Rt.unstable_ImmediatePriority,Y_=Rt.unstable_UserBlockingPriority,qu=Rt.unstable_NormalPriority,tA=Rt.unstable_LowPriority,X_=Rt.unstable_IdlePriority,nA=Rt.log,sA=Rt.unstable_setDisableYieldValue,Zo=null,Sn=null;function Ei(t){if(typeof nA=="function"&&sA(t),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(Zo,t)}catch{}}var Cn=Math.clz32?Math.clz32:rA,iA=Math.log,aA=Math.LN2;function rA(t){return t>>>=0,t===0?32:31-(iA(t)/aA|0)|0}var Bc=256,qc=262144,Fc=4194304;function ba(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function zd(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,a=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~a,s!==0?i=ba(s):(r&=o,r!==0?i=ba(r):n||(n=o&~t,n!==0&&(i=ba(n))))):(o=s&~a,o!==0?i=ba(o):r!==0?i=ba(r):n||(n=s&~t,n!==0&&(i=ba(n)))),i===0?0:e!==0&&e!==i&&!(e&a)&&(a=i&-i,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:i}function ec(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function lA(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W_(){var t=Fc;return Fc<<=1,!(Fc&62914560)&&(Fc=4194304),t}function tf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tc(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function oA(t,e,n,s,i,a){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,u=t.expirationTimes,d=t.hiddenUpdates;for(n=r&~n;0<n;){var h=31-Cn(n),m=1<<h;o[h]=0,u[h]=-1;var p=d[h];if(p!==null)for(d[h]=null,h=0;h<p.length;h++){var y=p[h];y!==null&&(y.lane&=-536870913)}n&=~m}s!==0&&J_(t,s,0),a!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=a&~(r&~e))}function J_(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Cn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function Z_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Cn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function ew(t,e){var n=e&-e;return n=n&42?1:Bp(n),n&(t.suspendedLanes|e)?0:n}function Bp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function qp(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function tw(){var t=Pe.p;return t!==0?t:(t=window.event,t===void 0?32:T1(t.type))}function Yy(t,e){var n=Pe.p;try{return Pe.p=t,e()}finally{Pe.p=n}}var sa=Math.random().toString(36).slice(2),Ut="__reactFiber$"+sa,yn="__reactProps$"+sa,al="__reactContainer$"+sa,cm="__reactEvents$"+sa,cA="__reactListeners$"+sa,uA="__reactHandles$"+sa,Xy="__reactResources$"+sa,nc="__reactMarker$"+sa;function Fp(t){delete t[Ut],delete t[yn],delete t[cm],delete t[cA],delete t[uA]}function gr(t){var e=t[Ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[al]||n[Ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sb(t);t!==null;){if(n=t[Ut])return n;t=sb(t)}return e}t=n,n=t.parentNode}return null}function rl(t){if(t=t[Ut]||t[al]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Gl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(z(33))}function Sr(t){var e=t[Xy];return e||(e=t[Xy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ot(t){t[nc]=!0}var nw=new Set,sw={};function Ga(t,e){Br(t,e),Br(t+"Capture",e)}function Br(t,e){for(sw[t]=e,t=0;t<e.length;t++)nw.add(e[t])}var dA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wy={},Jy={};function hA(t){return om.call(Jy,t)?!0:om.call(Wy,t)?!1:dA.test(t)?Jy[t]=!0:(Wy[t]=!0,!1)}function uu(t,e,n){if(hA(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Hc(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function js(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fA(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(r){n=""+r,a.call(this,r)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function um(t){if(!t._valueTracker){var e=iw(t)?"checked":"value";t._valueTracker=fA(t,e,""+t[e])}}function aw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=iw(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var mA=/[\n"\\]/g;function Ln(t){return t.replace(mA,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function dm(t,e,n,s,i,a,r,o){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Mn(e)):t.value!==""+Mn(e)&&(t.value=""+Mn(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?hm(t,r,Mn(e)):n!=null?hm(t,r,Mn(n)):s!=null&&t.removeAttribute("value"),i==null&&a!=null&&(t.defaultChecked=!!a),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Mn(o):t.removeAttribute("name")}function rw(t,e,n,s,i,a,r,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null)){um(t);return}n=n!=null?""+Mn(n):"",e=e!=null?""+Mn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),um(t)}function hm(t,e,n){e==="number"&&Fu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Cr(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Mn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function lw(t,e,n){if(e!=null&&(e=""+Mn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Mn(n):""}function ow(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(z(92));if(Hl(s)){if(1<s.length)throw Error(z(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Mn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),um(t)}function qr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zy(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||pA.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function cw(t,e,n){if(e!=null&&typeof e!="object")throw Error(z(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&Zy(t,i,s)}else for(var a in e)e.hasOwnProperty(a)&&Zy(t,a,e[a])}function Hp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function du(t){return yA.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ms(){}var fm=null;function Gp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yr=null,Rr=null;function ex(t){var e=rl(t);if(e&&(t=e.stateNode)){var n=t[yn]||null;e:switch(t=e.stateNode,e.type){case"input":if(dm(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ln(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[yn]||null;if(!i)throw Error(z(90));dm(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&aw(s)}break e;case"textarea":lw(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Cr(t,!!n.multiple,e,!1)}}}var nf=!1;function uw(t,e,n){if(nf)return t(e,n);nf=!0;try{var s=t(e);return s}finally{if(nf=!1,(yr!==null||Rr!==null)&&(Jd(),yr&&(e=yr,t=Rr,Rr=yr=null,ex(e),t)))for(e=0;e<t.length;e++)ex(t[e])}}function jo(t,e){var n=t.stateNode;if(n===null)return null;var s=n[yn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mm=!1;if(Hs)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){mm=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{mm=!1}var Ti=null,Kp=null,hu=null;function dw(){if(hu)return hu;var t,e=Kp,n=e.length,s,i="value"in Ti?Ti.value:Ti.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var r=n-t;for(s=1;s<=r&&e[n-s]===i[a-s];s++);return hu=i.slice(t,1<s?1-s:void 0)}function fu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gc(){return!0}function tx(){return!1}function xn(t){function e(n,s,i,a,r){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Gc:tx,this.isPropagationStopped=tx,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gc)},persist:function(){},isPersistent:Gc}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=xn(Ka),sc=nt({},Ka,{view:0,detail:0}),xA=xn(sc),sf,af,Vl,qd=nt({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$p,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vl&&(Vl&&t.type==="mousemove"?(sf=t.screenX-Vl.screenX,af=t.screenY-Vl.screenY):af=sf=0,Vl=t),sf)},movementY:function(t){return"movementY"in t?t.movementY:af}}),nx=xn(qd),bA=nt({},qd,{dataTransfer:0}),vA=xn(bA),_A=nt({},sc,{relatedTarget:0}),rf=xn(_A),wA=nt({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),EA=xn(wA),TA=nt({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NA=xn(TA),jA=nt({},Ka,{data:0}),sx=xn(jA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CA[t])?!!e[t]:!1}function $p(){return RA}var kA=nt({},sc,{key:function(t){if(t.key){var e=AA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$p,charCode:function(t){return t.type==="keypress"?fu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IA=xn(kA),DA=nt({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ix=xn(DA),OA=nt({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$p}),MA=xn(OA),VA=nt({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),PA=xn(VA),LA=nt({},qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UA=xn(LA),zA=nt({},Ka,{newState:0,oldState:0}),BA=xn(zA),qA=[9,13,27,32],Qp=Hs&&"CompositionEvent"in window,no=null;Hs&&"documentMode"in document&&(no=document.documentMode);var FA=Hs&&"TextEvent"in window&&!no,hw=Hs&&(!Qp||no&&8<no&&11>=no),ax=" ",rx=!1;function fw(t,e){switch(t){case"keyup":return qA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xr=!1;function HA(t,e){switch(t){case"compositionend":return mw(e);case"keypress":return e.which!==32?null:(rx=!0,ax);case"textInput":return t=e.data,t===ax&&rx?null:t;default:return null}}function GA(t,e){if(xr)return t==="compositionend"||!Qp&&fw(t,e)?(t=dw(),hu=Kp=Ti=null,xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hw&&e.locale!=="ko"?null:e.data;default:return null}}var KA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KA[t.type]:e==="textarea"}function pw(t,e,n,s){yr?Rr?Rr.push(s):Rr=[s]:yr=s,e=ld(e,"onChange"),0<e.length&&(n=new Bd("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var so=null,Ao=null;function $A(t){u1(t,0)}function Fd(t){var e=Gl(t);if(aw(e))return t}function ox(t,e){if(t==="change")return e}var gw=!1;if(Hs){var lf;if(Hs){var of="oninput"in document;if(!of){var cx=document.createElement("div");cx.setAttribute("oninput","return;"),of=typeof cx.oninput=="function"}lf=of}else lf=!1;gw=lf&&(!document.documentMode||9<document.documentMode)}function ux(){so&&(so.detachEvent("onpropertychange",yw),Ao=so=null)}function yw(t){if(t.propertyName==="value"&&Fd(Ao)){var e=[];pw(e,Ao,t,Gp(t)),uw($A,e)}}function QA(t,e,n){t==="focusin"?(ux(),so=e,Ao=n,so.attachEvent("onpropertychange",yw)):t==="focusout"&&ux()}function YA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fd(Ao)}function XA(t,e){if(t==="click")return Fd(e)}function WA(t,e){if(t==="input"||t==="change")return Fd(e)}function JA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:JA;function So(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!om.call(e,i)||!In(t[i],e[i]))return!1}return!0}function dx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hx(t,e){var n=dx(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dx(n)}}function xw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bw(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Fu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function Yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var ZA=Hs&&"documentMode"in document&&11>=document.documentMode,br=null,pm=null,io=null,gm=!1;function fx(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gm||br==null||br!==Fu(s)||(s=br,"selectionStart"in s&&Yp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),io&&So(io,s)||(io=s,s=ld(pm,"onSelect"),0<s.length&&(e=new Bd("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=br)))}function ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vr={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},cf={},vw={};Hs&&(vw=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function $a(t){if(cf[t])return cf[t];if(!vr[t])return t;var e=vr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vw)return cf[t]=e[n];return t}var _w=$a("animationend"),ww=$a("animationiteration"),Ew=$a("animationstart"),eS=$a("transitionrun"),tS=$a("transitionstart"),nS=$a("transitioncancel"),Tw=$a("transitionend"),Nw=new Map,ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ym.push("scrollEnd");function Zn(t,e){Nw.set(t,e),Ga(e,[t])}var Hu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},On=[],_r=0,Xp=0;function Hd(){for(var t=_r,e=Xp=_r=0;e<t;){var n=On[e];On[e++]=null;var s=On[e];On[e++]=null;var i=On[e];On[e++]=null;var a=On[e];if(On[e++]=null,s!==null&&i!==null){var r=s.pending;r===null?i.next=i:(i.next=r.next,r.next=i),s.pending=i}a!==0&&jw(n,i,a)}}function Gd(t,e,n,s){On[_r++]=t,On[_r++]=e,On[_r++]=n,On[_r++]=s,Xp|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Wp(t,e,n,s){return Gd(t,e,n,s),Gu(t)}function Qa(t,e){return Gd(t,null,null,e),Gu(t)}function jw(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,a=t.return;a!==null;)a.childLanes|=n,s=a.alternate,s!==null&&(s.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(i=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,i&&e!==null&&(i=31-Cn(n),t=a.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),a):null}function Gu(t){if(50<mo)throw mo=0,Lm=null,Error(z(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var wr={};function sS(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,s){return new sS(t,e,n,s)}function Jp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Us(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Aw(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function mu(t,e,n,s,i,a){var r=0;if(s=t,typeof t=="function")Jp(t)&&(r=1);else if(typeof t=="string")r=oC(t,n,us.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case im:return t=wn(31,n,e,i),t.elementType=im,t.lanes=a,t;case mr:return Na(n.children,i,a,e);case K_:r=8,i|=24;break;case tm:return t=wn(12,n,e,i|2),t.elementType=tm,t.lanes=a,t;case nm:return t=wn(13,n,e,i),t.elementType=nm,t.lanes=a,t;case sm:return t=wn(19,n,e,i),t.elementType=sm,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Os:r=10;break e;case $_:r=9;break e;case Lp:r=11;break e;case Up:r=14;break e;case hi:r=16,s=null;break e}r=29,n=Error(z(130,t===null?"null":typeof t,"")),s=null}return e=wn(r,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function Na(t,e,n,s){return t=wn(7,t,s,e),t.lanes=n,t}function uf(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function Sw(t){var e=wn(18,null,null,0);return e.stateNode=t,e}function df(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var mx=new WeakMap;function Un(t,e){if(typeof t=="object"&&t!==null){var n=mx.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Qy(e)},mx.set(t,e),e)}return{value:t,source:e,stack:Qy(e)}}var Er=[],Tr=0,Ku=null,Co=0,Vn=[],Pn=0,Ki=null,rs=1,ls="";function Is(t,e){Er[Tr++]=Co,Er[Tr++]=Ku,Ku=t,Co=e}function Cw(t,e,n){Vn[Pn++]=rs,Vn[Pn++]=ls,Vn[Pn++]=Ki,Ki=t;var s=rs;t=ls;var i=32-Cn(s)-1;s&=~(1<<i),n+=1;var a=32-Cn(e)+i;if(30<a){var r=i-i%5;a=(s&(1<<r)-1).toString(32),s>>=r,i-=r,rs=1<<32-Cn(e)+i|n<<i|s,ls=a+t}else rs=1<<a|n<<i|s,ls=t}function Zp(t){t.return!==null&&(Is(t,1),Cw(t,1,0))}function eg(t){for(;t===Ku;)Ku=Er[--Tr],Er[Tr]=null,Co=Er[--Tr],Er[Tr]=null;for(;t===Ki;)Ki=Vn[--Pn],Vn[Pn]=null,ls=Vn[--Pn],Vn[Pn]=null,rs=Vn[--Pn],Vn[Pn]=null}function Rw(t,e){Vn[Pn++]=rs,Vn[Pn++]=ls,Vn[Pn++]=Ki,rs=e.id,ls=e.overflow,Ki=t}var zt=null,Ze=null,De=!1,ki=null,zn=!1,xm=Error(z(519));function $i(t){var e=Error(z(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ro(Un(e,t)),xm}function px(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Ut]=t,e[yn]=s,n){case"dialog":Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":case"embed":Ne("load",e);break;case"video":case"audio":for(n=0;n<Oo.length;n++)Ne(Oo[n],e);break;case"source":Ne("error",e);break;case"img":case"image":case"link":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"input":Ne("invalid",e),rw(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ne("invalid",e);break;case"textarea":Ne("invalid",e),ow(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||h1(e.textContent,n)?(s.popover!=null&&(Ne("beforetoggle",e),Ne("toggle",e)),s.onScroll!=null&&Ne("scroll",e),s.onScrollEnd!=null&&Ne("scrollend",e),s.onClick!=null&&(e.onclick=Ms),e=!0):e=!1,e||$i(t,!0)}function gx(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:zt=zt.return}}function ar(t){if(t!==zt)return!1;if(!De)return gx(t),De=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Fm(t.type,t.memoizedProps)),n=!n),n&&Ze&&$i(t),gx(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));Ze=nb(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));Ze=nb(t)}else e===27?(e=Ze,ia(t.type)?(t=$m,$m=null,Ze=t):Ze=e):Ze=zt?Fn(t.stateNode.nextSibling):null;return!0}function Ia(){Ze=zt=null,De=!1}function hf(){var t=ki;return t!==null&&(fn===null?fn=t:fn.push.apply(fn,t),ki=null),t}function Ro(t){ki===null?ki=[t]:ki.push(t)}var bm=_s(null),Ya=null,Vs=null;function mi(t,e,n){Xe(bm,e._currentValue),e._currentValue=n}function zs(t){t._currentValue=bm.current,Mt(bm)}function vm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function _m(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){var r=i.child;a=a.firstContext;e:for(;a!==null;){var o=a;a=i;for(var u=0;u<e.length;u++)if(o.context===e[u]){a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),vm(a.return,n,t),s||(r=null);break e}a=o.next}}else if(i.tag===18){if(r=i.return,r===null)throw Error(z(341));r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),vm(r,n,t),r=null}else r=i.child;if(r!==null)r.return=i;else for(r=i;r!==null;){if(r===t){r=null;break}if(i=r.sibling,i!==null){i.return=r.return,r=i;break}r=r.return}i=r}}function ll(t,e,n,s){t=null;for(var i=e,a=!1;i!==null;){if(!a){if(i.flags&524288)a=!0;else if(i.flags&262144)break}if(i.tag===10){var r=i.alternate;if(r===null)throw Error(z(387));if(r=r.memoizedProps,r!==null){var o=i.type;In(i.pendingProps.value,r.value)||(t!==null?t.push(o):t=[o])}}else if(i===Uu.current){if(r=i.alternate,r===null)throw Error(z(387));r.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Vo):t=[Vo])}i=i.return}t!==null&&_m(e,t,n,s),e.flags|=262144}function $u(t){for(t=t.firstContext;t!==null;){if(!In(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Da(t){Ya=t,Vs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return kw(Ya,t)}function Kc(t,e){return Ya===null&&Da(t),kw(t,e)}function kw(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Vs===null){if(t===null)throw Error(z(308));Vs=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Vs=Vs.next=e;return n}var iS=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},aS=Rt.unstable_scheduleCallback,rS=Rt.unstable_NormalPriority,Et={$$typeof:Os,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tg(){return{controller:new iS,data:new Map,refCount:0}}function ic(t){t.refCount--,t.refCount===0&&aS(rS,function(){t.controller.abort()})}var ao=null,wm=0,Fr=0,kr=null;function lS(t,e){if(ao===null){var n=ao=[];wm=0,Fr=jg(),kr={status:"pending",value:void 0,then:function(s){n.push(s)}}}return wm++,e.then(yx,yx),e}function yx(){if(--wm===0&&ao!==null){kr!==null&&(kr.status="fulfilled");var t=ao;ao=null,Fr=0,kr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function oS(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var xx=ue.S;ue.S=function(t,e){GE=An(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&lS(t,e),xx!==null&&xx(t,e)};var ja=_s(null);function ng(){var t=ja.current;return t!==null?t:Ke.pooledCache}function pu(t,e){e===null?Xe(ja,ja.current):Xe(ja,e.pool)}function Iw(){var t=ng();return t===null?null:{parent:Et._currentValue,pool:t}}var ol=Error(z(460)),sg=Error(z(474)),Kd=Error(z(542)),Qu={then:function(){}};function bx(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Dw(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ms,Ms),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_x(t),t;default:if(typeof e.status=="string")e.then(Ms,Ms);else{if(t=Ke,t!==null&&100<t.shellSuspendCounter)throw Error(z(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_x(t),t}throw Aa=e,ol}}function va(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Aa=n,ol):n}}var Aa=null;function vx(){if(Aa===null)throw Error(z(459));var t=Aa;return Aa=null,t}function _x(t){if(t===ol||t===Kd)throw Error(z(483))}var Ir=null,ko=0;function $c(t){var e=ko;return ko+=1,Ir===null&&(Ir=[]),Dw(Ir,t,e)}function Pl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Qc(t,e){throw e.$$typeof===Qj?Error(z(525)):(t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Ow(t){function e(w,_){if(t){var E=w.deletions;E===null?(w.deletions=[_],w.flags|=16):E.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function s(w){for(var _=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(w,_){return w=Us(w,_),w.index=0,w.sibling=null,w}function a(w,_,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<_?(w.flags|=67108866,_):E):(w.flags|=67108866,_)):(w.flags|=1048576,_)}function r(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function o(w,_,E,I){return _===null||_.tag!==6?(_=uf(E,w.mode,I),_.return=w,_):(_=i(_,E),_.return=w,_)}function u(w,_,E,I){var M=E.type;return M===mr?h(w,_,E.props.children,I,E.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===hi&&va(M)===_.type)?(_=i(_,E.props),Pl(_,E),_.return=w,_):(_=mu(E.type,E.key,E.props,null,w.mode,I),Pl(_,E),_.return=w,_)}function d(w,_,E,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=df(E,w.mode,I),_.return=w,_):(_=i(_,E.children||[]),_.return=w,_)}function h(w,_,E,I,M){return _===null||_.tag!==7?(_=Na(E,w.mode,I,M),_.return=w,_):(_=i(_,E),_.return=w,_)}function m(w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=uf(""+_,w.mode,E),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zc:return E=mu(_.type,_.key,_.props,null,w.mode,E),Pl(E,_),E.return=w,E;case Fl:return _=df(_,w.mode,E),_.return=w,_;case hi:return _=va(_),m(w,_,E)}if(Hl(_)||Ol(_))return _=Na(_,w.mode,E,null),_.return=w,_;if(typeof _.then=="function")return m(w,$c(_),E);if(_.$$typeof===Os)return m(w,Kc(w,_),E);Qc(w,_)}return null}function p(w,_,E,I){var M=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return M!==null?null:o(w,_,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case zc:return E.key===M?u(w,_,E,I):null;case Fl:return E.key===M?d(w,_,E,I):null;case hi:return E=va(E),p(w,_,E,I)}if(Hl(E)||Ol(E))return M!==null?null:h(w,_,E,I,null);if(typeof E.then=="function")return p(w,_,$c(E),I);if(E.$$typeof===Os)return p(w,_,Kc(w,E),I);Qc(w,E)}return null}function y(w,_,E,I,M){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return w=w.get(E)||null,o(_,w,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case zc:return w=w.get(I.key===null?E:I.key)||null,u(_,w,I,M);case Fl:return w=w.get(I.key===null?E:I.key)||null,d(_,w,I,M);case hi:return I=va(I),y(w,_,E,I,M)}if(Hl(I)||Ol(I))return w=w.get(E)||null,h(_,w,I,M,null);if(typeof I.then=="function")return y(w,_,E,$c(I),M);if(I.$$typeof===Os)return y(w,_,E,Kc(_,I),M);Qc(_,I)}return null}function b(w,_,E,I){for(var M=null,L=null,v=_,x=_=0,T=null;v!==null&&x<E.length;x++){v.index>x?(T=v,v=null):T=v.sibling;var C=p(w,v,E[x],I);if(C===null){v===null&&(v=T);break}t&&v&&C.alternate===null&&e(w,v),_=a(C,_,x),L===null?M=C:L.sibling=C,L=C,v=T}if(x===E.length)return n(w,v),De&&Is(w,x),M;if(v===null){for(;x<E.length;x++)v=m(w,E[x],I),v!==null&&(_=a(v,_,x),L===null?M=v:L.sibling=v,L=v);return De&&Is(w,x),M}for(v=s(v);x<E.length;x++)T=y(v,w,x,E[x],I),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?x:T.key),_=a(T,_,x),L===null?M=T:L.sibling=T,L=T);return t&&v.forEach(function(k){return e(w,k)}),De&&Is(w,x),M}function N(w,_,E,I){if(E==null)throw Error(z(151));for(var M=null,L=null,v=_,x=_=0,T=null,C=E.next();v!==null&&!C.done;x++,C=E.next()){v.index>x?(T=v,v=null):T=v.sibling;var k=p(w,v,C.value,I);if(k===null){v===null&&(v=T);break}t&&v&&k.alternate===null&&e(w,v),_=a(k,_,x),L===null?M=k:L.sibling=k,L=k,v=T}if(C.done)return n(w,v),De&&Is(w,x),M;if(v===null){for(;!C.done;x++,C=E.next())C=m(w,C.value,I),C!==null&&(_=a(C,_,x),L===null?M=C:L.sibling=C,L=C);return De&&Is(w,x),M}for(v=s(v);!C.done;x++,C=E.next())C=y(v,w,x,C.value,I),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?x:C.key),_=a(C,_,x),L===null?M=C:L.sibling=C,L=C);return t&&v.forEach(function(D){return e(w,D)}),De&&Is(w,x),M}function R(w,_,E,I){if(typeof E=="object"&&E!==null&&E.type===mr&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case zc:e:{for(var M=E.key;_!==null;){if(_.key===M){if(M=E.type,M===mr){if(_.tag===7){n(w,_.sibling),I=i(_,E.props.children),I.return=w,w=I;break e}}else if(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===hi&&va(M)===_.type){n(w,_.sibling),I=i(_,E.props),Pl(I,E),I.return=w,w=I;break e}n(w,_);break}else e(w,_);_=_.sibling}E.type===mr?(I=Na(E.props.children,w.mode,I,E.key),I.return=w,w=I):(I=mu(E.type,E.key,E.props,null,w.mode,I),Pl(I,E),I.return=w,w=I)}return r(w);case Fl:e:{for(M=E.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(w,_.sibling),I=i(_,E.children||[]),I.return=w,w=I;break e}else{n(w,_);break}else e(w,_);_=_.sibling}I=df(E,w.mode,I),I.return=w,w=I}return r(w);case hi:return E=va(E),R(w,_,E,I)}if(Hl(E))return b(w,_,E,I);if(Ol(E)){if(M=Ol(E),typeof M!="function")throw Error(z(150));return E=M.call(E),N(w,_,E,I)}if(typeof E.then=="function")return R(w,_,$c(E),I);if(E.$$typeof===Os)return R(w,_,Kc(w,E),I);Qc(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,_!==null&&_.tag===6?(n(w,_.sibling),I=i(_,E),I.return=w,w=I):(n(w,_),I=uf(E,w.mode,I),I.return=w,w=I),r(w)):n(w,_)}return function(w,_,E,I){try{ko=0;var M=R(w,_,E,I);return Ir=null,M}catch(v){if(v===ol||v===Kd)throw v;var L=wn(29,v,null,w.mode);return L.lanes=I,L.return=w,L}finally{}}}var Oa=Ow(!0),Mw=Ow(!1),fi=!1;function ig(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Em(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ii(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Di(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ve&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=Gu(t),jw(t,null,n),e}return Gd(t,s,e,n),Gu(t)}function ro(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Z_(t,n)}}function ff(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=r:a=a.next=r,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Tm=!1;function lo(){if(Tm){var t=kr;if(t!==null)throw t}}function oo(t,e,n,s){Tm=!1;var i=t.updateQueue;fi=!1;var a=i.firstBaseUpdate,r=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,d=u.next;u.next=null,r===null?a=d:r.next=d,r=u;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==r&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=i.baseState;r=0,h=d=u=null,o=a;do{var p=o.lane&-536870913,y=p!==o.lane;if(y?(Re&p)===p:(s&p)===p){p!==0&&p===Fr&&(Tm=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var b=t,N=o;p=e;var R=n;switch(N.tag){case 1:if(b=N.payload,typeof b=="function"){m=b.call(R,m,p);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,p=typeof b=="function"?b.call(R,m,p):b,p==null)break e;m=nt({},m,p);break e;case 2:fi=!0}}p=o.callback,p!==null&&(t.flags|=64,y&&(t.flags|=8192),y=i.callbacks,y===null?i.callbacks=[p]:y.push(p))}else y={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=y,u=m):h=h.next=y,r|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;y=o,o=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,a===null&&(i.shared.lanes=0),Yi|=r,t.lanes=r,t.memoizedState=m}}function Vw(t,e){if(typeof t!="function")throw Error(z(191,t));t.call(e)}function Pw(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Vw(n[t],e)}var Hr=_s(null),Yu=_s(0);function wx(t,e){t=Qs,Xe(Yu,t),Xe(Hr,e),Qs=t|e.baseLanes}function Nm(){Xe(Yu,Qs),Xe(Hr,Hr.current)}function ag(){Qs=Yu.current,Mt(Hr),Mt(Yu)}var Dn=_s(null),qn=null;function pi(t){var e=t.alternate;Xe(xt,xt.current&1),Xe(Dn,t),qn===null&&(e===null||Hr.current!==null||e.memoizedState!==null)&&(qn=t)}function jm(t){Xe(xt,xt.current),Xe(Dn,t),qn===null&&(qn=t)}function Lw(t){t.tag===22?(Xe(xt,xt.current),Xe(Dn,t),qn===null&&(qn=t)):gi()}function gi(){Xe(xt,xt.current),Xe(Dn,Dn.current)}function _n(t){Mt(Dn),qn===t&&(qn=null),Mt(xt)}var xt=_s(0);function Xu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Gm(n)||Km(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gs=0,be=null,He=null,_t=null,Wu=!1,Dr=!1,Ma=!1,Ju=0,Io=0,Or=null,cS=0;function ut(){throw Error(z(321))}function rg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function lg(t,e,n,s,i,a){return Gs=a,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ue.H=t===null||t.memoizedState===null?pE:xg,Ma=!1,a=n(s,i),Ma=!1,Dr&&(a=zw(e,n,s,i)),Uw(t),a}function Uw(t){ue.H=Do;var e=He!==null&&He.next!==null;if(Gs=0,_t=He=be=null,Wu=!1,Io=0,Or=null,e)throw Error(z(300));t===null||Nt||(t=t.dependencies,t!==null&&$u(t)&&(Nt=!0))}function zw(t,e,n,s){be=t;var i=0;do{if(Dr&&(Or=null),Io=0,Dr=!1,25<=i)throw Error(z(301));if(i+=1,_t=He=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}ue.H=gE,a=e(n,s)}while(Dr);return a}function uS(){var t=ue.H,e=t.useState()[0];return e=typeof e.then=="function"?ac(e):e,t=t.useState()[0],(He!==null?He.memoizedState:null)!==t&&(be.flags|=1024),e}function og(){var t=Ju!==0;return Ju=0,t}function cg(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ug(t){if(Wu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Wu=!1}Gs=0,_t=He=be=null,Dr=!1,Io=Ju=0,Or=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?be.memoizedState=_t=t:_t=_t.next=t,_t}function bt(){if(He===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=_t===null?be.memoizedState:_t.next;if(e!==null)_t=e,He=t;else{if(t===null)throw be.alternate===null?Error(z(467)):Error(z(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},_t===null?be.memoizedState=_t=t:_t=_t.next=t}return _t}function $d(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ac(t){var e=Io;return Io+=1,Or===null&&(Or=[]),t=Dw(Or,t,e),e=be,(_t===null?e.memoizedState:_t.next)===null&&(e=e.alternate,ue.H=e===null||e.memoizedState===null?pE:xg),t}function Qd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ac(t);if(t.$$typeof===Os)return Ft(t)}throw Error(z(438,String(t)))}function dg(t){var e=null,n=be.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=be.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=$d(),be.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=Yj;return e.index++,n}function Ks(t,e){return typeof e=="function"?e(t):e}function gu(t){var e=bt();return hg(e,He,t)}function hg(t,e,n){var s=t.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=n;var i=t.baseQueue,a=s.pending;if(a!==null){if(i!==null){var r=i.next;i.next=a.next,a.next=r}e.baseQueue=i=a,s.pending=null}if(a=t.baseState,i===null)t.memoizedState=a;else{e=i.next;var o=r=null,u=null,d=e,h=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(Re&m)===m:(Gs&m)===m){var p=d.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===Fr&&(h=!0);else if((Gs&p)===p){d=d.next,p===Fr&&(h=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(o=u=m,r=a):u=u.next=m,be.lanes|=p,Yi|=p;m=d.action,Ma&&n(a,m),a=d.hasEagerState?d.eagerState:n(a,m)}else p={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(o=u=p,r=a):u=u.next=p,be.lanes|=m,Yi|=m;d=d.next}while(d!==null&&d!==e);if(u===null?r=a:u.next=o,!In(a,t.memoizedState)&&(Nt=!0,h&&(n=kr,n!==null)))throw n;t.memoizedState=a,t.baseState=r,t.baseQueue=u,s.lastRenderedState=a}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function mf(t){var e=bt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var r=i=i.next;do a=t(a,r.action),r=r.next;while(r!==i);In(a,e.memoizedState)||(Nt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function Bw(t,e,n){var s=be,i=bt(),a=De;if(a){if(n===void 0)throw Error(z(407));n=n()}else n=e();var r=!In((He||i).memoizedState,n);if(r&&(i.memoizedState=n,Nt=!0),i=i.queue,fg(Hw.bind(null,s,i,t),[t]),i.getSnapshot!==e||r||_t!==null&&_t.memoizedState.tag&1){if(s.flags|=2048,Gr(9,{destroy:void 0},Fw.bind(null,s,i,n,e),null),Ke===null)throw Error(z(349));a||Gs&127||qw(s,e,n)}return n}function qw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e=$d(),be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fw(t,e,n,s){e.value=n,e.getSnapshot=s,Gw(e)&&Kw(t)}function Hw(t,e,n){return n(function(){Gw(e)&&Kw(t)})}function Gw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function Kw(t){var e=Qa(t,2);e!==null&&gn(e,t,2)}function Am(t){var e=nn();if(typeof t=="function"){var n=t;if(t=n(),Ma){Ei(!0);try{n()}finally{Ei(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},e}function $w(t,e,n,s){return t.baseState=n,hg(t,He,typeof s=="function"?s:Ks)}function dS(t,e,n,s,i){if(Xd(t))throw Error(z(485));if(t=e.action,t!==null){var a={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};ue.T!==null?n(!0):a.isTransition=!1,s(a),n=e.pending,n===null?(a.next=e.pending=a,Qw(e,a)):(a.next=n.next,e.pending=n.next=a)}}function Qw(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var a=ue.T,r={};ue.T=r;try{var o=n(i,s),u=ue.S;u!==null&&u(r,o),Ex(t,e,o)}catch(d){Sm(t,e,d)}finally{a!==null&&r.types!==null&&(a.types=r.types),ue.T=a}}else try{a=n(i,s),Ex(t,e,a)}catch(d){Sm(t,e,d)}}function Ex(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Tx(t,e,s)},function(s){return Sm(t,e,s)}):Tx(t,e,n)}function Tx(t,e,n){e.status="fulfilled",e.value=n,Yw(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Qw(t,n)))}function Sm(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,Yw(e),e=e.next;while(e!==s)}t.action=null}function Yw(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Xw(t,e){return e}function Nx(t,e){if(De){var n=Ke.formState;if(n!==null){e:{var s=be;if(De){if(Ze){t:{for(var i=Ze,a=zn;i.nodeType!==8;){if(!a){i=null;break t}if(i=Fn(i.nextSibling),i===null){i=null;break t}}a=i.data,i=a==="F!"||a==="F"?i:null}if(i){Ze=Fn(i.nextSibling),s=i.data==="F!";break e}}$i(s)}s=!1}s&&(e=n[0])}}return n=nn(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xw,lastRenderedState:e},n.queue=s,n=hE.bind(null,be,s),s.dispatch=n,s=Am(!1),a=yg.bind(null,be,!1,s.queue),s=nn(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=dS.bind(null,be,i,a,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function jx(t){var e=bt();return Ww(e,He,t)}function Ww(t,e,n){if(e=hg(t,e,Xw)[0],t=gu(Ks)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=ac(e)}catch(r){throw r===ol?Kd:r}else s=e;e=bt();var i=e.queue,a=i.dispatch;return n!==e.memoizedState&&(be.flags|=2048,Gr(9,{destroy:void 0},hS.bind(null,i,n),null)),[s,a,t]}function hS(t,e){t.action=e}function Ax(t){var e=bt(),n=He;if(n!==null)return Ww(e,n,t);bt(),e=e.memoizedState,n=bt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Gr(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=be.updateQueue,e===null&&(e=$d(),be.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function Jw(){return bt().memoizedState}function yu(t,e,n,s){var i=nn();be.flags|=t,i.memoizedState=Gr(1|e,{destroy:void 0},n,s===void 0?null:s)}function Yd(t,e,n,s){var i=bt();s=s===void 0?null:s;var a=i.memoizedState.inst;He!==null&&s!==null&&rg(s,He.memoizedState.deps)?i.memoizedState=Gr(e,a,n,s):(be.flags|=t,i.memoizedState=Gr(1|e,a,n,s))}function Sx(t,e){yu(8390656,8,t,e)}function fg(t,e){Yd(2048,8,t,e)}function fS(t){be.flags|=4;var e=be.updateQueue;if(e===null)e=$d(),be.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Zw(t){var e=bt().memoizedState;return fS({ref:e,nextImpl:t}),function(){if(Ve&2)throw Error(z(440));return e.impl.apply(void 0,arguments)}}function eE(t,e){return Yd(4,2,t,e)}function tE(t,e){return Yd(4,4,t,e)}function nE(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sE(t,e,n){n=n!=null?n.concat([t]):null,Yd(4,4,nE.bind(null,e,t),n)}function mg(){}function iE(t,e){var n=bt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&rg(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function aE(t,e){var n=bt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&rg(e,s[1]))return s[0];if(s=t(),Ma){Ei(!0);try{t()}finally{Ei(!1)}}return n.memoizedState=[s,e],s}function pg(t,e,n){return n===void 0||Gs&1073741824&&!(Re&261930)?t.memoizedState=e:(t.memoizedState=n,t=$E(),be.lanes|=t,Yi|=t,n)}function rE(t,e,n,s){return In(n,e)?n:Hr.current!==null?(t=pg(t,n,s),In(t,e)||(Nt=!0),t):!(Gs&42)||Gs&1073741824&&!(Re&261930)?(Nt=!0,t.memoizedState=n):(t=$E(),be.lanes|=t,Yi|=t,e)}function lE(t,e,n,s,i){var a=Pe.p;Pe.p=a!==0&&8>a?a:8;var r=ue.T,o={};ue.T=o,yg(t,!1,e,n);try{var u=i(),d=ue.S;if(d!==null&&d(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=oS(u,s);co(t,e,h,Rn(t))}else co(t,e,s,Rn(t))}catch(m){co(t,e,{then:function(){},status:"rejected",reason:m},Rn())}finally{Pe.p=a,r!==null&&o.types!==null&&(r.types=o.types),ue.T=r}}function mS(){}function Cm(t,e,n,s){if(t.tag!==5)throw Error(z(476));var i=oE(t).queue;lE(t,i,e,Ta,n===null?mS:function(){return cE(t),n(s)})}function oE(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ta,baseState:Ta,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:Ta},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function cE(t){var e=oE(t);e.next===null&&(e=t.alternate.memoizedState),co(t,e.next.queue,{},Rn())}function gg(){return Ft(Vo)}function uE(){return bt().memoizedState}function dE(){return bt().memoizedState}function pS(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Rn();t=Ii(n);var s=Di(e,t,n);s!==null&&(gn(s,e,n),ro(s,e,n)),e={cache:tg()},t.payload=e;return}e=e.return}}function gS(t,e,n){var s=Rn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Xd(t)?fE(e,n):(n=Wp(t,e,n,s),n!==null&&(gn(n,t,s),mE(n,e,s)))}function hE(t,e,n){var s=Rn();co(t,e,n,s)}function co(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xd(t))fE(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var r=e.lastRenderedState,o=a(r,n);if(i.hasEagerState=!0,i.eagerState=o,In(o,r))return Gd(t,e,i,0),Ke===null&&Hd(),!1}catch{}finally{}if(n=Wp(t,e,i,s),n!==null)return gn(n,t,s),mE(n,e,s),!0}return!1}function yg(t,e,n,s){if(s={lane:2,revertLane:jg(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Xd(t)){if(e)throw Error(z(479))}else e=Wp(t,n,s,2),e!==null&&gn(e,t,2)}function Xd(t){var e=t.alternate;return t===be||e!==null&&e===be}function fE(t,e){Dr=Wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mE(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Z_(t,n)}}var Do={readContext:Ft,use:Qd,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Do.useEffectEvent=ut;var pE={readContext:Ft,use:Qd,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:Sx,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,yu(4194308,4,nE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){yu(4,2,t,e)},useMemo:function(t,e){var n=nn();e=e===void 0?null:e;var s=t();if(Ma){Ei(!0);try{t()}finally{Ei(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=nn();if(n!==void 0){var i=n(e);if(Ma){Ei(!0);try{n(e)}finally{Ei(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=gS.bind(null,be,t),[s.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:function(t){t=Am(t);var e=t.queue,n=hE.bind(null,be,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:mg,useDeferredValue:function(t,e){var n=nn();return pg(n,t,e)},useTransition:function(){var t=Am(!1);return t=lE.bind(null,be,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=be,i=nn();if(De){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ke===null)throw Error(z(349));Re&127||qw(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Sx(Hw.bind(null,s,a,t),[t]),s.flags|=2048,Gr(9,{destroy:void 0},Fw.bind(null,s,a,n,e),null),n},useId:function(){var t=nn(),e=Ke.identifierPrefix;if(De){var n=ls,s=rs;n=(s&~(1<<32-Cn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Ju++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=cS++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:gg,useFormState:Nx,useActionState:Nx,useOptimistic:function(t){var e=nn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=yg.bind(null,be,!0,n),n.dispatch=e,[t,e]},useMemoCache:dg,useCacheRefresh:function(){return nn().memoizedState=pS.bind(null,be)},useEffectEvent:function(t){var e=nn(),n={impl:t};return e.memoizedState=n,function(){if(Ve&2)throw Error(z(440));return n.impl.apply(void 0,arguments)}}},xg={readContext:Ft,use:Qd,useCallback:iE,useContext:Ft,useEffect:fg,useImperativeHandle:sE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:aE,useReducer:gu,useRef:Jw,useState:function(){return gu(Ks)},useDebugValue:mg,useDeferredValue:function(t,e){var n=bt();return rE(n,He.memoizedState,t,e)},useTransition:function(){var t=gu(Ks)[0],e=bt().memoizedState;return[typeof t=="boolean"?t:ac(t),e]},useSyncExternalStore:Bw,useId:uE,useHostTransitionStatus:gg,useFormState:jx,useActionState:jx,useOptimistic:function(t,e){var n=bt();return $w(n,He,t,e)},useMemoCache:dg,useCacheRefresh:dE};xg.useEffectEvent=Zw;var gE={readContext:Ft,use:Qd,useCallback:iE,useContext:Ft,useEffect:fg,useImperativeHandle:sE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:aE,useReducer:mf,useRef:Jw,useState:function(){return mf(Ks)},useDebugValue:mg,useDeferredValue:function(t,e){var n=bt();return He===null?pg(n,t,e):rE(n,He.memoizedState,t,e)},useTransition:function(){var t=mf(Ks)[0],e=bt().memoizedState;return[typeof t=="boolean"?t:ac(t),e]},useSyncExternalStore:Bw,useId:uE,useHostTransitionStatus:gg,useFormState:Ax,useActionState:Ax,useOptimistic:function(t,e){var n=bt();return He!==null?$w(n,He,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:dg,useCacheRefresh:dE};gE.useEffectEvent=Zw;function pf(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rm={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Rn(),i=Ii(s);i.payload=e,n!=null&&(i.callback=n),e=Di(t,i,s),e!==null&&(gn(e,t,s),ro(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Rn(),i=Ii(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Di(t,i,s),e!==null&&(gn(e,t,s),ro(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rn(),s=Ii(n);s.tag=2,e!=null&&(s.callback=e),e=Di(t,s,n),e!==null&&(gn(e,t,n),ro(e,t,n))}};function Cx(t,e,n,s,i,a,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,r):e.prototype&&e.prototype.isPureReactComponent?!So(n,s)||!So(i,a):!0}function Rx(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Rm.enqueueReplaceState(e,e.state,null)}function Va(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=nt({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function yE(t){Hu(t)}function xE(t){console.error(t)}function bE(t){Hu(t)}function Zu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function kx(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function km(t,e,n){return n=Ii(n),n.tag=3,n.payload={element:null},n.callback=function(){Zu(t,e)},n}function vE(t){return t=Ii(t),t.tag=3,t}function _E(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=s.value;t.payload=function(){return i(a)},t.callback=function(){kx(e,n,s)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){kx(e,n,s),typeof i!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function yS(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&ll(e,n,i,!0),n=Dn.current,n!==null){switch(n.tag){case 31:case 13:return qn===null?id():n.alternate===null&&dt===0&&(dt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===Qu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),jf(t,s,i)),!1;case 22:return n.flags|=65536,s===Qu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),jf(t,s,i)),!1}throw Error(z(435,n.tag))}return jf(t,s,i),id(),!1}if(De)return e=Dn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==xm&&(t=Error(z(422),{cause:s}),Ro(Un(t,n)))):(s!==xm&&(e=Error(z(423),{cause:s}),Ro(Un(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=Un(s,n),i=km(t.stateNode,s,i),ff(t,i),dt!==4&&(dt=2)),!1;var a=Error(z(520),{cause:s});if(a=Un(a,n),fo===null?fo=[a]:fo.push(a),dt!==4&&(dt=2),e===null)return!0;s=Un(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=km(n.stateNode,s,t),ff(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Oi===null||!Oi.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,i=vE(i),_E(i,t,n,s),ff(n,i),!1}n=n.return}while(n!==null);return!1}var bg=Error(z(461)),Nt=!1;function Pt(t,e,n,s){e.child=t===null?Mw(e,null,n,s):Oa(e,t.child,n,s)}function Ix(t,e,n,s,i){n=n.render;var a=e.ref;if("ref"in s){var r={};for(var o in s)o!=="ref"&&(r[o]=s[o])}else r=s;return Da(e),s=lg(t,e,n,r,a,i),o=og(),t!==null&&!Nt?(cg(t,e,i),$s(t,e,i)):(De&&o&&Zp(e),e.flags|=1,Pt(t,e,s,i),e.child)}function Dx(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!Jp(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,wE(t,e,a,s,i)):(t=mu(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!vg(t,i)){var r=a.memoizedProps;if(n=n.compare,n=n!==null?n:So,n(r,s)&&t.ref===e.ref)return $s(t,e,i)}return e.flags|=1,t=Us(a,s),t.ref=e.ref,t.return=e,e.child=t}function wE(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(So(a,s)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=s=a,vg(t,i))t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,$s(t,e,i)}return Im(t,e,n,s,i)}function EE(t,e,n,s){var i=s.children,a=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(a=a!==null?a.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~a}else s=0,e.child=null;return Ox(t,e,a,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&pu(e,a!==null?a.cachePool:null),a!==null?wx(e,a):Nm(),Lw(e);else return s=e.lanes=536870912,Ox(t,e,a!==null?a.baseLanes|n:n,n,s)}else a!==null?(pu(e,a.cachePool),wx(e,a),gi(),e.memoizedState=null):(t!==null&&pu(e,null),Nm(),gi());return Pt(t,e,i,n),e.child}function Kl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Ox(t,e,n,s,i){var a=ng();return a=a===null?null:{parent:Et._currentValue,pool:a},e.memoizedState={baseLanes:n,cachePool:a},t!==null&&pu(e,null),Nm(),Lw(e),t!==null&&ll(t,e,s,!0),e.childLanes=i,null}function xu(t,e){return e=ed({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Mx(t,e,n){return Oa(e,t.child,null,n),t=xu(e,e.pendingProps),t.flags|=2,_n(e),e.memoizedState=null,t}function xS(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(De){if(s.mode==="hidden")return t=xu(e,s),e.lanes=536870912,Kl(null,t);if(jm(e),(t=Ze)?(t=p1(t,zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:rs,overflow:ls}:null,retryLane:536870912,hydrationErrors:null},n=Sw(t),n.return=e,e.child=n,zt=e,Ze=null)):t=null,t===null)throw $i(e);return e.lanes=536870912,null}return xu(e,s)}var a=t.memoizedState;if(a!==null){var r=a.dehydrated;if(jm(e),i)if(e.flags&256)e.flags&=-257,e=Mx(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(z(558));else if(Nt||ll(t,e,n,!1),i=(n&t.childLanes)!==0,Nt||i){if(s=Ke,s!==null&&(r=ew(s,n),r!==0&&r!==a.retryLane))throw a.retryLane=r,Qa(t,r),gn(s,t,r),bg;id(),e=Mx(t,e,n)}else t=a.treeContext,Ze=Fn(r.nextSibling),zt=e,De=!0,ki=null,zn=!1,t!==null&&Rw(e,t),e=xu(e,s),e.flags|=4096;return e}return t=Us(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function bu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(z(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Im(t,e,n,s,i){return Da(e),n=lg(t,e,n,s,void 0,i),s=og(),t!==null&&!Nt?(cg(t,e,i),$s(t,e,i)):(De&&s&&Zp(e),e.flags|=1,Pt(t,e,n,i),e.child)}function Vx(t,e,n,s,i,a){return Da(e),e.updateQueue=null,n=zw(e,s,n,i),Uw(t),s=og(),t!==null&&!Nt?(cg(t,e,a),$s(t,e,a)):(De&&s&&Zp(e),e.flags|=1,Pt(t,e,n,a),e.child)}function Px(t,e,n,s,i){if(Da(e),e.stateNode===null){var a=wr,r=n.contextType;typeof r=="object"&&r!==null&&(a=Ft(r)),a=new n(s,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Rm,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=s,a.state=e.memoizedState,a.refs={},ig(e),r=n.contextType,a.context=typeof r=="object"&&r!==null?Ft(r):wr,a.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(pf(e,n,r,s),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&Rm.enqueueReplaceState(a,a.state,null),oo(e,s,a,i),lo(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){a=e.stateNode;var o=e.memoizedProps,u=Va(n,o);a.props=u;var d=a.context,h=n.contextType;r=wr,typeof h=="object"&&h!==null&&(r=Ft(h));var m=n.getDerivedStateFromProps;h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||d!==r)&&Rx(e,a,s,r),fi=!1;var p=e.memoizedState;a.state=p,oo(e,s,a,i),lo(),d=e.memoizedState,o||p!==d||fi?(typeof m=="function"&&(pf(e,n,m,s),d=e.memoizedState),(u=fi||Cx(e,n,u,s,p,d,r))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),a.props=s,a.state=d,a.context=r,s=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,Em(t,e),r=e.memoizedProps,h=Va(n,r),a.props=h,m=e.pendingProps,p=a.context,d=n.contextType,u=wr,typeof d=="object"&&d!==null&&(u=Ft(d)),o=n.getDerivedStateFromProps,(d=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==m||p!==u)&&Rx(e,a,s,u),fi=!1,p=e.memoizedState,a.state=p,oo(e,s,a,i),lo();var y=e.memoizedState;r!==m||p!==y||fi||t!==null&&t.dependencies!==null&&$u(t.dependencies)?(typeof o=="function"&&(pf(e,n,o,s),y=e.memoizedState),(h=fi||Cx(e,n,h,s,p,y,u)||t!==null&&t.dependencies!==null&&$u(t.dependencies))?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,y,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),a.props=s,a.state=y,a.context=u,s=h):(typeof a.componentDidUpdate!="function"||r===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return a=s,bu(t,e),s=(e.flags&128)!==0,a||s?(a=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&s?(e.child=Oa(e,t.child,null,i),e.child=Oa(e,null,n,i)):Pt(t,e,n,i),e.memoizedState=a.state,t=e.child):t=$s(t,e,i),t}function Lx(t,e,n,s){return Ia(),e.flags|=256,Pt(t,e,n,s),e.child}var gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yf(t){return{baseLanes:t,cachePool:Iw()}}function xf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Tn),t}function TE(t,e,n){var s=e.pendingProps,i=!1,a=(e.flags&128)!==0,r;if((r=a)||(r=t!==null&&t.memoizedState===null?!1:(xt.current&2)!==0),r&&(i=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(De){if(i?pi(e):gi(),(t=Ze)?(t=p1(t,zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:rs,overflow:ls}:null,retryLane:536870912,hydrationErrors:null},n=Sw(t),n.return=e,e.child=n,zt=e,Ze=null)):t=null,t===null)throw $i(e);return Km(t)?e.lanes=32:e.lanes=536870912,null}var o=s.children;return s=s.fallback,i?(gi(),i=e.mode,o=ed({mode:"hidden",children:o},i),s=Na(s,i,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,s=e.child,s.memoizedState=yf(n),s.childLanes=xf(t,r,n),e.memoizedState=gf,Kl(null,s)):(pi(e),Dm(e,o))}var u=t.memoizedState;if(u!==null&&(o=u.dehydrated,o!==null)){if(a)e.flags&256?(pi(e),e.flags&=-257,e=bf(t,e,n)):e.memoizedState!==null?(gi(),e.child=t.child,e.flags|=128,e=null):(gi(),o=s.fallback,i=e.mode,s=ed({mode:"visible",children:s.children},i),o=Na(o,i,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,Oa(e,t.child,null,n),s=e.child,s.memoizedState=yf(n),s.childLanes=xf(t,r,n),e.memoizedState=gf,e=Kl(null,s));else if(pi(e),Km(o)){if(r=o.nextSibling&&o.nextSibling.dataset,r)var d=r.dgst;r=d,s=Error(z(419)),s.stack="",s.digest=r,Ro({value:s,source:null,stack:null}),e=bf(t,e,n)}else if(Nt||ll(t,e,n,!1),r=(n&t.childLanes)!==0,Nt||r){if(r=Ke,r!==null&&(s=ew(r,n),s!==0&&s!==u.retryLane))throw u.retryLane=s,Qa(t,s),gn(r,t,s),bg;Gm(o)||id(),e=bf(t,e,n)}else Gm(o)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Ze=Fn(o.nextSibling),zt=e,De=!0,ki=null,zn=!1,t!==null&&Rw(e,t),e=Dm(e,s.children),e.flags|=4096);return e}return i?(gi(),o=s.fallback,i=e.mode,u=t.child,d=u.sibling,s=Us(u,{mode:"hidden",children:s.children}),s.subtreeFlags=u.subtreeFlags&65011712,d!==null?o=Us(d,o):(o=Na(o,i,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,Kl(null,s),s=e.child,o=t.child.memoizedState,o===null?o=yf(n):(i=o.cachePool,i!==null?(u=Et._currentValue,i=i.parent!==u?{parent:u,pool:u}:i):i=Iw(),o={baseLanes:o.baseLanes|n,cachePool:i}),s.memoizedState=o,s.childLanes=xf(t,r,n),e.memoizedState=gf,Kl(t.child,s)):(pi(e),n=t.child,t=n.sibling,n=Us(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function Dm(t,e){return e=ed({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function ed(t,e){return t=wn(22,t,null,e),t.lanes=0,t}function bf(t,e,n){return Oa(e,t.child,null,n),t=Dm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ux(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),vm(t.return,e,n)}function vf(t,e,n,s,i,a){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:a}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=i,r.treeForkCount=a)}function NE(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;s=s.children;var r=xt.current,o=(r&2)!==0;if(o?(r=r&1|2,e.flags|=128):r&=1,Xe(xt,r),Pt(t,e,s,n),s=De?Co:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ux(t,n,e);else if(t.tag===19)Ux(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Xu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vf(e,!1,i,n,a,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vf(e,!0,n,null,a,s);break;case"together":vf(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function $s(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))if(t!==null){if(ll(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vg(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&$u(t)))}function bS(t,e,n){switch(e.tag){case 3:zu(e,e.stateNode.containerInfo),mi(e,Et,t.memoizedState.cache),Ia();break;case 27:case 5:lm(e);break;case 4:zu(e,e.stateNode.containerInfo);break;case 10:mi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,jm(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(pi(e),e.flags|=128,null):n&e.child.childLanes?TE(t,e,n):(pi(e),t=$s(t,e,n),t!==null?t.sibling:null);pi(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(ll(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return NE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xe(xt,xt.current),s)break;return null;case 22:return e.lanes=0,EE(t,e,n,e.pendingProps);case 24:mi(e,Et,t.memoizedState.cache)}return $s(t,e,n)}function jE(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Nt=!0;else{if(!vg(t,n)&&!(e.flags&128))return Nt=!1,bS(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,De&&e.flags&1048576&&Cw(e,Co,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=va(e.elementType),e.type=t,typeof t=="function")Jp(t)?(s=Va(t,s),e.tag=1,e=Px(null,e,t,s,n)):(e.tag=0,e=Im(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===Lp){e.tag=11,e=Ix(null,e,t,s,n);break e}else if(i===Up){e.tag=14,e=Dx(null,e,t,s,n);break e}}throw e=am(t)||t,Error(z(306,e,""))}}return e;case 0:return Im(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Va(s,e.pendingProps),Px(t,e,s,i,n);case 3:e:{if(zu(e,e.stateNode.containerInfo),t===null)throw Error(z(387));s=e.pendingProps;var a=e.memoizedState;i=a.element,Em(t,e),oo(e,s,null,n);var r=e.memoizedState;if(s=r.cache,mi(e,Et,s),s!==a.cache&&_m(e,[Et],n,!0),lo(),s=r.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=Lx(t,e,s,n);break e}else if(s!==i){i=Un(Error(z(424)),e),Ro(i),e=Lx(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ze=Fn(t.firstChild),zt=e,De=!0,ki=null,zn=!0,n=Mw(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ia(),s===i){e=$s(t,e,n);break e}Pt(t,e,s,n)}e=e.child}return e;case 26:return bu(t,e),t===null?(n=ab(e.type,null,e.pendingProps,null))?e.memoizedState=n:De||(n=e.type,t=e.pendingProps,s=od(Ri.current).createElement(n),s[Ut]=e,s[yn]=t,Ht(s,n,t),Ot(s),e.stateNode=s):e.memoizedState=ab(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return lm(e),t===null&&De&&(s=e.stateNode=g1(e.type,e.pendingProps,Ri.current),zt=e,zn=!0,i=Ze,ia(e.type)?($m=i,Ze=Fn(s.firstChild)):Ze=i),Pt(t,e,e.pendingProps.children,n),bu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&De&&((i=s=Ze)&&(s=YS(s,e.type,e.pendingProps,zn),s!==null?(e.stateNode=s,zt=e,Ze=Fn(s.firstChild),zn=!1,i=!0):i=!1),i||$i(e)),lm(e),i=e.type,a=e.pendingProps,r=t!==null?t.memoizedProps:null,s=a.children,Fm(i,a)?s=null:r!==null&&Fm(i,r)&&(e.flags|=32),e.memoizedState!==null&&(i=lg(t,e,uS,null,null,n),Vo._currentValue=i),bu(t,e),Pt(t,e,s,n),e.child;case 6:return t===null&&De&&((t=n=Ze)&&(n=XS(n,e.pendingProps,zn),n!==null?(e.stateNode=n,zt=e,Ze=null,t=!0):t=!1),t||$i(e)),null;case 13:return TE(t,e,n);case 4:return zu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Oa(e,null,s,n):Pt(t,e,s,n),e.child;case 11:return Ix(t,e,e.type,e.pendingProps,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,mi(e,e.type,s.value),Pt(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,Da(e),i=Ft(i),s=s(i),e.flags|=1,Pt(t,e,s,n),e.child;case 14:return Dx(t,e,e.type,e.pendingProps,n);case 15:return wE(t,e,e.type,e.pendingProps,n);case 19:return NE(t,e,n);case 31:return xS(t,e,n);case 22:return EE(t,e,n,e.pendingProps);case 24:return Da(e),s=Ft(Et),t===null?(i=ng(),i===null&&(i=Ke,a=tg(),i.pooledCache=a,a.refCount++,a!==null&&(i.pooledCacheLanes|=n),i=a),e.memoizedState={parent:s,cache:i},ig(e),mi(e,Et,i)):(t.lanes&n&&(Em(t,e),oo(e,null,null,n),lo()),i=t.memoizedState,a=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),mi(e,Et,s)):(s=a.cache,mi(e,Et,s),s!==i.cache&&_m(e,[Et],n,!0))),Pt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(z(156,e.tag))}function As(t){t.flags|=4}function _f(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(XE())t.flags|=8192;else throw Aa=Qu,sg}else t.flags&=-16777217}function zx(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!b1(e))if(XE())t.flags|=8192;else throw Aa=Qu,sg}function Yc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?W_():536870912,t.lanes|=e,Kr|=e)}function Ll(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function vS(t,e,n){var s=e.pendingProps;switch(eg(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return Je(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),zs(Et),zr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ar(e)?As(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hf())),Je(e),null;case 26:var i=e.type,a=e.memoizedState;return t===null?(As(e),a!==null?(Je(e),zx(e,a)):(Je(e),_f(e,i,null,s,n))):a?a!==t.memoizedState?(As(e),Je(e),zx(e,a)):(Je(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&As(e),Je(e),_f(e,i,t,s,n)),null;case 27:if(Bu(e),n=Ri.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&As(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return Je(e),null}t=us.current,ar(e)?px(e):(t=g1(i,s,n),e.stateNode=t,As(e))}return Je(e),null;case 5:if(Bu(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&As(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return Je(e),null}if(a=us.current,ar(e))px(e);else{var r=od(Ri.current);switch(a){case 1:a=r.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=r.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":a=r.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof s.is=="string"?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?a.multiple=!0:s.size&&(a.size=s.size);break;default:a=typeof s.is=="string"?r.createElement(i,{is:s.is}):r.createElement(i)}}a[Ut]=e,a[yn]=s;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)a.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=a;e:switch(Ht(a,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&As(e)}}return Je(e),_f(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&As(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(z(166));if(t=Ri.current,ar(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=zt,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[Ut]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||h1(t.nodeValue,n)),t||$i(e,!0)}else t=od(t).createTextNode(s),t[Ut]=e,e.stateNode=t}return Je(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=ar(e),n!==null){if(t===null){if(!s)throw Error(z(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(557));t[Ut]=e}else Ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),t=!1}else n=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(_n(e),e):(_n(e),null);if(e.flags&128)throw Error(z(558))}return Je(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=ar(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Ut]=e}else Ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else i=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(_n(e),e):(_n(e),null)}return _n(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Yc(e,e.updateQueue),Je(e),null);case 4:return zr(),t===null&&Ag(e.stateNode.containerInfo),Je(e),null;case 10:return zs(e.type),Je(e),null;case 19:if(Mt(xt),s=e.memoizedState,s===null)return Je(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Ll(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Xu(t),a!==null){for(e.flags|=128,Ll(s,!1),t=a.updateQueue,e.updateQueue=t,Yc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Aw(n,t),n=n.sibling;return Xe(xt,xt.current&1|2),De&&Is(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&An()>nd&&(e.flags|=128,i=!0,Ll(s,!1),e.lanes=4194304)}else{if(!i)if(t=Xu(a),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Yc(e,t),Ll(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!De)return Je(e),null}else 2*An()-s.renderingStartTime>nd&&n!==536870912&&(e.flags|=128,i=!0,Ll(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=An(),t.sibling=null,n=xt.current,Xe(xt,i?n&1|2:n&1),De&&Is(e,s.treeForkCount),t):(Je(e),null);case 22:case 23:return _n(e),ag(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),n=e.updateQueue,n!==null&&Yc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Mt(ja),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),zs(Et),Je(e),null;case 25:return null;case 30:return null}throw Error(z(156,e.tag))}function _S(t,e){switch(eg(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zs(Et),zr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Bu(e),null;case 31:if(e.memoizedState!==null){if(_n(e),e.alternate===null)throw Error(z(340));Ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(_n(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(xt),null;case 4:return zr(),null;case 10:return zs(e.type),null;case 22:case 23:return _n(e),ag(),t!==null&&Mt(ja),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return zs(Et),null;case 25:return null;default:return null}}function AE(t,e){switch(eg(e),e.tag){case 3:zs(Et),zr();break;case 26:case 27:case 5:Bu(e);break;case 4:zr();break;case 31:e.memoizedState!==null&&_n(e);break;case 13:_n(e);break;case 19:Mt(xt);break;case 10:zs(e.type);break;case 22:case 23:_n(e),ag(),t!==null&&Mt(ja);break;case 24:zs(Et)}}function rc(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var a=n.create,r=n.inst;s=a(),r.destroy=s}n=n.next}while(n!==i)}}catch(o){Be(e,e.return,o)}}function Qi(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var a=i.next;s=a;do{if((s.tag&t)===t){var r=s.inst,o=r.destroy;if(o!==void 0){r.destroy=void 0,i=e;var u=n,d=o;try{d()}catch(h){Be(i,u,h)}}}s=s.next}while(s!==a)}}catch(h){Be(e,e.return,h)}}function SE(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Pw(e,n)}catch(s){Be(t,t.return,s)}}}function CE(t,e,n){n.props=Va(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Be(t,e,s)}}function uo(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){Be(t,e,i)}}function os(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){Be(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Be(t,e,i)}else n.current=null}function RE(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){Be(t,t.return,i)}}function wf(t,e,n){try{var s=t.stateNode;FS(s,t.type,n,e),s[yn]=e}catch(i){Be(t,t.return,i)}}function kE(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ia(t.type)||t.tag===4}function Ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ia(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Om(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ms));else if(s!==4&&(s===27&&ia(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Om(t,e,n),t=t.sibling;t!==null;)Om(t,e,n),t=t.sibling}function td(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&ia(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(td(t,e,n),t=t.sibling;t!==null;)td(t,e,n),t=t.sibling}function IE(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ht(e,s,n),e[Ut]=t,e[yn]=n}catch(a){Be(t,t.return,a)}}var Ds=!1,wt=!1,Tf=!1,Bx=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function wS(t,e){if(t=t.containerInfo,Bm=hd,t=bw(t),Yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var r=0,o=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(o=r+i),m!==a||s!==0&&m.nodeType!==3||(u=r+s),m.nodeType===3&&(r+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===t)break t;if(p===n&&++d===i&&(o=r),p===a&&++h===s&&(u=r),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qm={focusedElem:t,selectionRange:n},hd=!1,Dt=e;Dt!==null;)if(e=Dt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Dt=t;else for(;Dt!==null;){switch(e=Dt,a=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,i=a.memoizedProps,a=a.memoizedState,s=n.stateNode;try{var b=Va(n.type,i);t=s.getSnapshotBeforeUpdate(b,a),s.__reactInternalSnapshotBeforeUpdate=t}catch(N){Be(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Hm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(z(163))}if(t=e.sibling,t!==null){t.return=e.return,Dt=t;break}Dt=e.return}}function DE(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Cs(t,n),s&4&&rc(5,n);break;case 1:if(Cs(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){Be(n,n.return,r)}else{var i=Va(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){Be(n,n.return,r)}}s&64&&SE(n),s&512&&uo(n,n.return);break;case 3:if(Cs(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Pw(t,e)}catch(r){Be(n,n.return,r)}}break;case 27:e===null&&s&4&&IE(n);case 26:case 5:Cs(t,n),e===null&&s&4&&RE(n),s&512&&uo(n,n.return);break;case 12:Cs(t,n);break;case 31:Cs(t,n),s&4&&VE(t,n);break;case 13:Cs(t,n),s&4&&PE(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=kS.bind(null,n),WS(t,n))));break;case 22:if(s=n.memoizedState!==null||Ds,!s){e=e!==null&&e.memoizedState!==null||wt,i=Ds;var a=wt;Ds=s,(wt=e)&&!a?ks(t,n,(n.subtreeFlags&8772)!==0):Cs(t,n),Ds=i,wt=a}break;case 30:break;default:Cs(t,n)}}function OE(t){var e=t.alternate;e!==null&&(t.alternate=null,OE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Fp(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,hn=!1;function Ss(t,e,n){for(n=n.child;n!==null;)ME(t,e,n),n=n.sibling}function ME(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Zo,n)}catch{}switch(n.tag){case 26:wt||os(n,e),Ss(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:wt||os(n,e);var s=it,i=hn;ia(n.type)&&(it=n.stateNode,hn=!1),Ss(t,e,n),po(n.stateNode),it=s,hn=i;break;case 5:wt||os(n,e);case 6:if(s=it,i=hn,it=null,Ss(t,e,n),it=s,hn=i,it!==null)if(hn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(n.stateNode)}catch(a){Be(n,e,a)}else try{it.removeChild(n.stateNode)}catch(a){Be(n,e,a)}break;case 18:it!==null&&(hn?(t=it,eb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Xr(t)):eb(it,n.stateNode));break;case 4:s=it,i=hn,it=n.stateNode.containerInfo,hn=!0,Ss(t,e,n),it=s,hn=i;break;case 0:case 11:case 14:case 15:Qi(2,n,e),wt||Qi(4,n,e),Ss(t,e,n);break;case 1:wt||(os(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&CE(n,e,s)),Ss(t,e,n);break;case 21:Ss(t,e,n);break;case 22:wt=(s=wt)||n.memoizedState!==null,Ss(t,e,n),wt=s;break;default:Ss(t,e,n)}}function VE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Xr(t)}catch(n){Be(e,e.return,n)}}}function PE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Xr(t)}catch(n){Be(e,e.return,n)}}function ES(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Bx),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Bx),e;default:throw Error(z(435,t.tag))}}function Xc(t,e){var n=ES(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=IS.bind(null,t,s);s.then(i,i)}})}function un(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],a=t,r=e,o=r;e:for(;o!==null;){switch(o.tag){case 27:if(ia(o.type)){it=o.stateNode,hn=!1;break e}break;case 5:it=o.stateNode,hn=!1;break e;case 3:case 4:it=o.stateNode.containerInfo,hn=!0;break e}o=o.return}if(it===null)throw Error(z(160));ME(a,r,i),it=null,hn=!1,a=i.alternate,a!==null&&(a.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)LE(e,t),e=e.sibling}var Yn=null;function LE(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:un(e,t),dn(t),s&4&&(Qi(3,t,t.return),rc(3,t),Qi(5,t,t.return));break;case 1:un(e,t),dn(t),s&512&&(wt||n===null||os(n,n.return)),s&64&&Ds&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=Yn;if(un(e,t),dn(t),s&512&&(wt||n===null||os(n,n.return)),s&4){var a=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":a=i.getElementsByTagName("title")[0],(!a||a[nc]||a[Ut]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=i.createElement(s),i.head.insertBefore(a,i.querySelector("head > title"))),Ht(a,s,n),a[Ut]=t,Ot(a),s=a;break e;case"link":var r=lb("link","href",i).get(s+(n.href||""));if(r){for(var o=0;o<r.length;o++)if(a=r[o],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(o,1);break t}}a=i.createElement(s),Ht(a,s,n),i.head.appendChild(a);break;case"meta":if(r=lb("meta","content",i).get(s+(n.content||""))){for(o=0;o<r.length;o++)if(a=r[o],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(o,1);break t}}a=i.createElement(s),Ht(a,s,n),i.head.appendChild(a);break;default:throw Error(z(468,s))}a[Ut]=t,Ot(a),s=a}t.stateNode=s}else ob(i,t.type,t.stateNode);else t.stateNode=rb(i,s,t.memoizedProps);else a!==s?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,s===null?ob(i,t.type,t.stateNode):rb(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&wf(t,t.memoizedProps,n.memoizedProps)}break;case 27:un(e,t),dn(t),s&512&&(wt||n===null||os(n,n.return)),n!==null&&s&4&&wf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(un(e,t),dn(t),s&512&&(wt||n===null||os(n,n.return)),t.flags&32){i=t.stateNode;try{qr(i,"")}catch(b){Be(t,t.return,b)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,wf(t,i,n!==null?n.memoizedProps:i)),s&1024&&(Tf=!0);break;case 6:if(un(e,t),dn(t),s&4){if(t.stateNode===null)throw Error(z(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(b){Be(t,t.return,b)}}break;case 3:if(wu=null,i=Yn,Yn=cd(e.containerInfo),un(e,t),Yn=i,dn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Xr(e.containerInfo)}catch(b){Be(t,t.return,b)}Tf&&(Tf=!1,UE(t));break;case 4:s=Yn,Yn=cd(t.stateNode.containerInfo),un(e,t),dn(t),Yn=s;break;case 12:un(e,t),dn(t);break;case 31:un(e,t),dn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Xc(t,s)));break;case 13:un(e,t),dn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Wd=An()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Xc(t,s)));break;case 22:i=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,d=Ds,h=wt;if(Ds=d||i,wt=h||u,un(e,t),wt=h,Ds=d,dn(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||u||Ds||wt||_a(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(a=u.stateNode,i)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{o=u.stateNode;var m=u.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;o.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(b){Be(u,u.return,b)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(b){Be(u,u.return,b)}}}else if(e.tag===18){if(n===null){u=e;try{var y=u.stateNode;i?tb(y,!0):tb(u.stateNode,!1)}catch(b){Be(u,u.return,b)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Xc(t,n))));break;case 19:un(e,t),dn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Xc(t,s)));break;case 30:break;case 21:break;default:un(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(kE(s)){n=s;break}s=s.return}if(n==null)throw Error(z(160));switch(n.tag){case 27:var i=n.stateNode,a=Ef(t);td(t,a,i);break;case 5:var r=n.stateNode;n.flags&32&&(qr(r,""),n.flags&=-33);var o=Ef(t);td(t,o,r);break;case 3:case 4:var u=n.stateNode.containerInfo,d=Ef(t);Om(t,d,u);break;default:throw Error(z(161))}}catch(h){Be(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UE(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;UE(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Cs(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)DE(t,e.alternate,e),e=e.sibling}function _a(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Qi(4,e,e.return),_a(e);break;case 1:os(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&CE(e,e.return,n),_a(e);break;case 27:po(e.stateNode);case 26:case 5:os(e,e.return),_a(e);break;case 22:e.memoizedState===null&&_a(e);break;case 30:_a(e);break;default:_a(e)}t=t.sibling}}function ks(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,a=e,r=a.flags;switch(a.tag){case 0:case 11:case 15:ks(i,a,n),rc(4,a);break;case 1:if(ks(i,a,n),s=a,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(d){Be(s,s.return,d)}if(s=a,i=s.updateQueue,i!==null){var o=s.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)Vw(u[i],o)}catch(d){Be(s,s.return,d)}}n&&r&64&&SE(a),uo(a,a.return);break;case 27:IE(a);case 26:case 5:ks(i,a,n),n&&s===null&&r&4&&RE(a),uo(a,a.return);break;case 12:ks(i,a,n);break;case 31:ks(i,a,n),n&&r&4&&VE(i,a);break;case 13:ks(i,a,n),n&&r&4&&PE(i,a);break;case 22:a.memoizedState===null&&ks(i,a,n),uo(a,a.return);break;case 30:break;default:ks(i,a,n)}e=e.sibling}}function _g(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ic(n))}function wg(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ic(t))}function Qn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zE(t,e,n,s),e=e.sibling}function zE(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Qn(t,e,n,s),i&2048&&rc(9,e);break;case 1:Qn(t,e,n,s);break;case 3:Qn(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ic(t)));break;case 12:if(i&2048){Qn(t,e,n,s),t=e.stateNode;try{var a=e.memoizedProps,r=a.id,o=a.onPostCommit;typeof o=="function"&&o(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Be(e,e.return,u)}}else Qn(t,e,n,s);break;case 31:Qn(t,e,n,s);break;case 13:Qn(t,e,n,s);break;case 23:break;case 22:a=e.stateNode,r=e.alternate,e.memoizedState!==null?a._visibility&2?Qn(t,e,n,s):ho(t,e):a._visibility&2?Qn(t,e,n,s):(a._visibility|=2,or(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&_g(r,e);break;case 24:Qn(t,e,n,s),i&2048&&wg(e.alternate,e);break;default:Qn(t,e,n,s)}}function or(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var a=t,r=e,o=n,u=s,d=r.flags;switch(r.tag){case 0:case 11:case 15:or(a,r,o,u,i),rc(8,r);break;case 23:break;case 22:var h=r.stateNode;r.memoizedState!==null?h._visibility&2?or(a,r,o,u,i):ho(a,r):(h._visibility|=2,or(a,r,o,u,i)),i&&d&2048&&_g(r.alternate,r);break;case 24:or(a,r,o,u,i),i&&d&2048&&wg(r.alternate,r);break;default:or(a,r,o,u,i)}e=e.sibling}}function ho(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:ho(n,s),i&2048&&_g(s.alternate,s);break;case 24:ho(n,s),i&2048&&wg(s.alternate,s);break;default:ho(n,s)}e=e.sibling}}var $l=8192;function rr(t,e,n){if(t.subtreeFlags&$l)for(t=t.child;t!==null;)BE(t,e,n),t=t.sibling}function BE(t,e,n){switch(t.tag){case 26:rr(t,e,n),t.flags&$l&&t.memoizedState!==null&&cC(n,Yn,t.memoizedState,t.memoizedProps);break;case 5:rr(t,e,n);break;case 3:case 4:var s=Yn;Yn=cd(t.stateNode.containerInfo),rr(t,e,n),Yn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=$l,$l=16777216,rr(t,e,n),$l=s):rr(t,e,n));break;default:rr(t,e,n)}}function qE(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ul(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Dt=s,HE(s,t)}qE(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)FE(t),t=t.sibling}function FE(t){switch(t.tag){case 0:case 11:case 15:Ul(t),t.flags&2048&&Qi(9,t,t.return);break;case 3:Ul(t);break;case 12:Ul(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,vu(t)):Ul(t);break;default:Ul(t)}}function vu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Dt=s,HE(s,t)}qE(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Qi(8,e,e.return),vu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,vu(e));break;default:vu(e)}t=t.sibling}}function HE(t,e){for(;Dt!==null;){var n=Dt;switch(n.tag){case 0:case 11:case 15:Qi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ic(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Dt=s;else e:for(n=t;Dt!==null;){s=Dt;var i=s.sibling,a=s.return;if(OE(s),s===n){Dt=null;break e}if(i!==null){i.return=a,Dt=i;break e}Dt=a}}}var TS={getCacheForType:function(t){var e=Ft(Et),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Ft(Et).controller.signal}},NS=typeof WeakMap=="function"?WeakMap:Map,Ve=0,Ke=null,je=null,Re=0,ze=0,vn=null,Ni=!1,cl=!1,Eg=!1,Qs=0,dt=0,Yi=0,Sa=0,Tg=0,Tn=0,Kr=0,fo=null,fn=null,Mm=!1,Wd=0,GE=0,nd=1/0,sd=null,Oi=null,St=0,Mi=null,$r=null,Bs=0,Vm=0,Pm=null,KE=null,mo=0,Lm=null;function Rn(){return Ve&2&&Re!==0?Re&-Re:ue.T!==null?jg():tw()}function $E(){if(Tn===0)if(!(Re&536870912)||De){var t=qc;qc<<=1,!(qc&3932160)&&(qc=262144),Tn=t}else Tn=536870912;return t=Dn.current,t!==null&&(t.flags|=32),Tn}function gn(t,e,n){(t===Ke&&(ze===2||ze===9)||t.cancelPendingCommit!==null)&&(Qr(t,0),ji(t,Re,Tn,!1)),tc(t,n),(!(Ve&2)||t!==Ke)&&(t===Ke&&(!(Ve&2)&&(Sa|=n),dt===4&&ji(t,Re,Tn,!1)),ws(t))}function QE(t,e,n){if(Ve&6)throw Error(z(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||ec(t,e),i=s?SS(t,e):Nf(t,e,!0),a=s;do{if(i===0){cl&&!s&&ji(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!jS(n)){i=Nf(t,e,!1),a=!1;continue}if(i===2){if(a=e,t.errorRecoveryDisabledLanes&a)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var o=t;i=fo;var u=o.current.memoizedState.isDehydrated;if(u&&(Qr(o,r).flags|=256),r=Nf(o,r,!1),r!==2){if(Eg&&!u){o.errorRecoveryDisabledLanes|=a,Sa|=a,i=4;break e}a=fn,fn=i,a!==null&&(fn===null?fn=a:fn.push.apply(fn,a))}i=r}if(a=!1,i!==2)continue}}if(i===1){Qr(t,0),ji(t,e,0,!0);break}e:{switch(s=t,a=i,a){case 0:case 1:throw Error(z(345));case 4:if((e&4194048)!==e)break;case 6:ji(s,e,Tn,!Ni);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(z(329))}if((e&62914560)===e&&(i=Wd+300-An(),10<i)){if(ji(s,e,Tn,!Ni),zd(s,0,!0)!==0)break e;Bs=e,s.timeoutHandle=m1(qx.bind(null,s,n,fn,sd,Mm,e,Tn,Sa,Kr,Ni,a,"Throttled",-0,0),i);break e}qx(s,n,fn,sd,Mm,e,Tn,Sa,Kr,Ni,a,null,-0,0)}}break}while(!0);ws(t)}function qx(t,e,n,s,i,a,r,o,u,d,h,m,p,y){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ms},BE(e,a,m);var b=(a&62914560)===a?Wd-An():(a&4194048)===a?GE-An():0;if(b=uC(m,b),b!==null){Bs=a,t.cancelPendingCommit=b(Hx.bind(null,t,e,a,n,s,i,r,o,u,h,m,null,p,y)),ji(t,a,r,!d);return}}Hx(t,e,a,n,s,i,r,o,u)}function jS(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!In(a(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ji(t,e,n,s){e&=~Tg,e&=~Sa,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var a=31-Cn(i),r=1<<a;s[a]=-1,i&=~r}n!==0&&J_(t,n,e)}function Jd(){return Ve&6?!0:(lc(0),!1)}function Ng(){if(je!==null){if(ze===0)var t=je.return;else t=je,Vs=Ya=null,ug(t),Ir=null,ko=0,t=je;for(;t!==null;)AE(t.alternate,t),t=t.return;je=null}}function Qr(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,KS(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Bs=0,Ng(),Ke=t,je=n=Us(t.current,null),Re=e,ze=0,vn=null,Ni=!1,cl=ec(t,e),Eg=!1,Kr=Tn=Tg=Sa=Yi=dt=0,fn=fo=null,Mm=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-Cn(s),a=1<<i;e|=t[i],s&=~a}return Qs=e,Hd(),n}function YE(t,e){be=null,ue.H=Do,e===ol||e===Kd?(e=vx(),ze=3):e===sg?(e=vx(),ze=4):ze=e===bg?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,vn=e,je===null&&(dt=1,Zu(t,Un(e,t.current)))}function XE(){var t=Dn.current;return t===null?!0:(Re&4194048)===Re?qn===null:(Re&62914560)===Re||Re&536870912?t===qn:!1}function WE(){var t=ue.H;return ue.H=Do,t===null?Do:t}function JE(){var t=ue.A;return ue.A=TS,t}function id(){dt=4,Ni||(Re&4194048)!==Re&&Dn.current!==null||(cl=!0),!(Yi&134217727)&&!(Sa&134217727)||Ke===null||ji(Ke,Re,Tn,!1)}function Nf(t,e,n){var s=Ve;Ve|=2;var i=WE(),a=JE();(Ke!==t||Re!==e)&&(sd=null,Qr(t,e)),e=!1;var r=dt;e:do try{if(ze!==0&&je!==null){var o=je,u=vn;switch(ze){case 8:Ng(),r=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(e=!0);var d=ze;if(ze=0,vn=null,Nr(t,o,u,d),n&&cl){r=0;break e}break;default:d=ze,ze=0,vn=null,Nr(t,o,u,d)}}AS(),r=dt;break}catch(h){YE(t,h)}while(!0);return e&&t.shellSuspendCounter++,Vs=Ya=null,Ve=s,ue.H=i,ue.A=a,je===null&&(Ke=null,Re=0,Hd()),r}function AS(){for(;je!==null;)ZE(je)}function SS(t,e){var n=Ve;Ve|=2;var s=WE(),i=JE();Ke!==t||Re!==e?(sd=null,nd=An()+500,Qr(t,e)):cl=ec(t,e);e:do try{if(ze!==0&&je!==null){e=je;var a=vn;t:switch(ze){case 1:ze=0,vn=null,Nr(t,e,a,1);break;case 2:case 9:if(bx(a)){ze=0,vn=null,Fx(e);break}e=function(){ze!==2&&ze!==9||Ke!==t||(ze=7),ws(t)},a.then(e,e);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:bx(a)?(ze=0,vn=null,Fx(e)):(ze=0,vn=null,Nr(t,e,a,7));break;case 5:var r=null;switch(je.tag){case 26:r=je.memoizedState;case 5:case 27:var o=je;if(r?b1(r):o.stateNode.complete){ze=0,vn=null;var u=o.sibling;if(u!==null)je=u;else{var d=o.return;d!==null?(je=d,Zd(d)):je=null}break t}}ze=0,vn=null,Nr(t,e,a,5);break;case 6:ze=0,vn=null,Nr(t,e,a,6);break;case 8:Ng(),dt=6;break e;default:throw Error(z(462))}}CS();break}catch(h){YE(t,h)}while(!0);return Vs=Ya=null,ue.H=s,ue.A=i,Ve=n,je!==null?0:(Ke=null,Re=0,Hd(),dt)}function CS(){for(;je!==null&&!Jj();)ZE(je)}function ZE(t){var e=jE(t.alternate,t,Qs);t.memoizedProps=t.pendingProps,e===null?Zd(t):je=e}function Fx(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Vx(n,e,e.pendingProps,e.type,void 0,Re);break;case 11:e=Vx(n,e,e.pendingProps,e.type.render,e.ref,Re);break;case 5:ug(e);default:AE(n,e),e=je=Aw(e,Qs),e=jE(n,e,Qs)}t.memoizedProps=t.pendingProps,e===null?Zd(t):je=e}function Nr(t,e,n,s){Vs=Ya=null,ug(e),Ir=null,ko=0;var i=e.return;try{if(yS(t,i,e,n,Re)){dt=1,Zu(t,Un(n,t.current)),je=null;return}}catch(a){if(i!==null)throw je=i,a;dt=1,Zu(t,Un(n,t.current)),je=null;return}e.flags&32768?(De||s===1?t=!0:cl||Re&536870912?t=!1:(Ni=t=!0,(s===2||s===9||s===3||s===6)&&(s=Dn.current,s!==null&&s.tag===13&&(s.flags|=16384))),e1(e,t)):Zd(e)}function Zd(t){var e=t;do{if(e.flags&32768){e1(e,Ni);return}t=e.return;var n=vS(e.alternate,e,Qs);if(n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);dt===0&&(dt=5)}function e1(t,e){do{var n=_S(t.alternate,t);if(n!==null){n.flags&=32767,je=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){je=t;return}je=t=n}while(t!==null);dt=6,je=null}function Hx(t,e,n,s,i,a,r,o,u){t.cancelPendingCommit=null;do eh();while(St!==0);if(Ve&6)throw Error(z(327));if(e!==null){if(e===t.current)throw Error(z(177));if(a=e.lanes|e.childLanes,a|=Xp,oA(t,n,a,r,o,u),t===Ke&&(je=Ke=null,Re=0),$r=e,Mi=t,Bs=n,Vm=a,Pm=i,KE=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,DS(qu,function(){return a1(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ue.T,ue.T=null,i=Pe.p,Pe.p=2,r=Ve,Ve|=4;try{wS(t,e,n)}finally{Ve=r,Pe.p=i,ue.T=s}}St=1,t1(),n1(),s1()}}function t1(){if(St===1){St=0;var t=Mi,e=$r,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ue.T,ue.T=null;var s=Pe.p;Pe.p=2;var i=Ve;Ve|=4;try{LE(e,t);var a=qm,r=bw(t.containerInfo),o=a.focusedElem,u=a.selectionRange;if(r!==o&&o&&o.ownerDocument&&xw(o.ownerDocument.documentElement,o)){if(u!==null&&Yp(o)){var d=u.start,h=u.end;if(h===void 0&&(h=d),"selectionStart"in o)o.selectionStart=d,o.selectionEnd=Math.min(h,o.value.length);else{var m=o.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var y=p.getSelection(),b=o.textContent.length,N=Math.min(u.start,b),R=u.end===void 0?N:Math.min(u.end,b);!y.extend&&N>R&&(r=R,R=N,N=r);var w=hx(o,N),_=hx(o,R);if(w&&_&&(y.rangeCount!==1||y.anchorNode!==w.node||y.anchorOffset!==w.offset||y.focusNode!==_.node||y.focusOffset!==_.offset)){var E=m.createRange();E.setStart(w.node,w.offset),y.removeAllRanges(),N>R?(y.addRange(E),y.extend(_.node,_.offset)):(E.setEnd(_.node,_.offset),y.addRange(E))}}}}for(m=[],y=o;y=y.parentNode;)y.nodeType===1&&m.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<m.length;o++){var I=m[o];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}hd=!!Bm,qm=Bm=null}finally{Ve=i,Pe.p=s,ue.T=n}}t.current=e,St=2}}function n1(){if(St===2){St=0;var t=Mi,e=$r,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ue.T,ue.T=null;var s=Pe.p;Pe.p=2;var i=Ve;Ve|=4;try{DE(t,e.alternate,e)}finally{Ve=i,Pe.p=s,ue.T=n}}St=3}}function s1(){if(St===4||St===3){St=0,Zj();var t=Mi,e=$r,n=Bs,s=KE;e.subtreeFlags&10256||e.flags&10256?St=5:(St=0,$r=Mi=null,i1(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Oi=null),qp(n),e=e.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Zo,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ue.T,i=Pe.p,Pe.p=2,ue.T=null;try{for(var a=t.onRecoverableError,r=0;r<s.length;r++){var o=s[r];a(o.value,{componentStack:o.stack})}}finally{ue.T=e,Pe.p=i}}Bs&3&&eh(),ws(t),i=t.pendingLanes,n&261930&&i&42?t===Lm?mo++:(mo=0,Lm=t):mo=0,lc(0)}}function i1(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ic(e)))}function eh(){return t1(),n1(),s1(),a1()}function a1(){if(St!==5)return!1;var t=Mi,e=Vm;Vm=0;var n=qp(Bs),s=ue.T,i=Pe.p;try{Pe.p=32>n?32:n,ue.T=null,n=Pm,Pm=null;var a=Mi,r=Bs;if(St=0,$r=Mi=null,Bs=0,Ve&6)throw Error(z(331));var o=Ve;if(Ve|=4,FE(a.current),zE(a,a.current,r,n),Ve=o,lc(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Zo,a)}catch{}return!0}finally{Pe.p=i,ue.T=s,i1(t,e)}}function Gx(t,e,n){e=Un(n,e),e=km(t.stateNode,e,2),t=Di(t,e,2),t!==null&&(tc(t,2),ws(t))}function Be(t,e,n){if(t.tag===3)Gx(t,t,n);else for(;e!==null;){if(e.tag===3){Gx(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Oi===null||!Oi.has(s))){t=Un(n,t),n=vE(2),s=Di(e,n,2),s!==null&&(_E(n,s,e,t),tc(s,2),ws(s));break}}e=e.return}}function jf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new NS;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(Eg=!0,i.add(n),t=RS.bind(null,t,e,n),e.then(t,t))}function RS(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ke===t&&(Re&n)===n&&(dt===4||dt===3&&(Re&62914560)===Re&&300>An()-Wd?!(Ve&2)&&Qr(t,0):Tg|=n,Kr===Re&&(Kr=0)),ws(t)}function r1(t,e){e===0&&(e=W_()),t=Qa(t,e),t!==null&&(tc(t,e),ws(t))}function kS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r1(t,n)}function IS(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(z(314))}s!==null&&s.delete(e),r1(t,n)}function DS(t,e){return zp(t,e)}var ad=null,cr=null,Um=!1,rd=!1,Af=!1,Ai=0;function ws(t){t!==cr&&t.next===null&&(cr===null?ad=cr=t:cr=cr.next=t),rd=!0,Um||(Um=!0,MS())}function lc(t,e){if(!Af&&rd){Af=!0;do for(var n=!1,s=ad;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var a=0;else{var r=s.suspendedLanes,o=s.pingedLanes;a=(1<<31-Cn(42|t)+1)-1,a&=i&~(r&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Kx(s,a))}else a=Re,a=zd(s,s===Ke?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(a&3)||ec(s,a)||(n=!0,Kx(s,a));s=s.next}while(n);Af=!1}}function OS(){l1()}function l1(){rd=Um=!1;var t=0;Ai!==0&&GS()&&(t=Ai);for(var e=An(),n=null,s=ad;s!==null;){var i=s.next,a=o1(s,e);a===0?(s.next=null,n===null?ad=i:n.next=i,i===null&&(cr=n)):(n=s,(t!==0||a&3)&&(rd=!0)),s=i}St!==0&&St!==5||lc(t),Ai!==0&&(Ai=0)}function o1(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var r=31-Cn(a),o=1<<r,u=i[r];u===-1?(!(o&n)||o&s)&&(i[r]=lA(o,e)):u<=e&&(t.expiredLanes|=o),a&=~o}if(e=Ke,n=Re,n=zd(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(ze===2||ze===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&ef(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||ec(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&ef(s),qp(n)){case 2:case 8:n=Y_;break;case 32:n=qu;break;case 268435456:n=X_;break;default:n=qu}return s=c1.bind(null,t),n=zp(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&ef(s),t.callbackPriority=2,t.callbackNode=null,2}function c1(t,e){if(St!==0&&St!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(eh()&&t.callbackNode!==n)return null;var s=Re;return s=zd(t,t===Ke?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(QE(t,s,e),o1(t,An()),t.callbackNode!=null&&t.callbackNode===n?c1.bind(null,t):null)}function Kx(t,e){if(eh())return null;QE(t,e,!0)}function MS(){$S(function(){Ve&6?zp(Q_,OS):l1()})}function jg(){if(Ai===0){var t=Fr;t===0&&(t=Bc,Bc<<=1,!(Bc&261888)&&(Bc=256)),Ai=t}return Ai}function $x(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:du(""+t)}function Qx(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function VS(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var a=$x((i[yn]||null).action),r=s.submitter;r&&(e=(e=r[yn]||null)?$x(e.formAction):r.getAttribute("formAction"),e!==null&&(a=e,r=null));var o=new Bd("action","action",null,s,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ai!==0){var u=r?Qx(i,r):new FormData(i);Cm(n,{pending:!0,data:u,method:i.method,action:a},null,u)}}else typeof a=="function"&&(o.preventDefault(),u=r?Qx(i,r):new FormData(i),Cm(n,{pending:!0,data:u,method:i.method,action:a},a,u))},currentTarget:i}]})}}for(var Sf=0;Sf<ym.length;Sf++){var Cf=ym[Sf],PS=Cf.toLowerCase(),LS=Cf[0].toUpperCase()+Cf.slice(1);Zn(PS,"on"+LS)}Zn(_w,"onAnimationEnd");Zn(ww,"onAnimationIteration");Zn(Ew,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(eS,"onTransitionRun");Zn(tS,"onTransitionStart");Zn(nS,"onTransitionCancel");Zn(Tw,"onTransitionEnd");Br("onMouseEnter",["mouseout","mouseover"]);Br("onMouseLeave",["mouseout","mouseover"]);Br("onPointerEnter",["pointerout","pointerover"]);Br("onPointerLeave",["pointerout","pointerover"]);Ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),US=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oo));function u1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var r=s.length-1;0<=r;r--){var o=s[r],u=o.instance,d=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=d;try{a(i)}catch(h){Hu(h)}i.currentTarget=null,a=u}else for(r=0;r<s.length;r++){if(o=s[r],u=o.instance,d=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=d;try{a(i)}catch(h){Hu(h)}i.currentTarget=null,a=u}}}}function Ne(t,e){var n=e[cm];n===void 0&&(n=e[cm]=new Set);var s=t+"__bubble";n.has(s)||(d1(e,t,2,!1),n.add(s))}function Rf(t,e,n){var s=0;e&&(s|=4),d1(n,t,s,e)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function Ag(t){if(!t[Wc]){t[Wc]=!0,nw.forEach(function(n){n!=="selectionchange"&&(US.has(n)||Rf(n,!1,t),Rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wc]||(e[Wc]=!0,Rf("selectionchange",!1,e))}}function d1(t,e,n,s){switch(T1(e)){case 2:var i=fC;break;case 8:i=mC;break;default:i=kg}n=i.bind(null,e,n,t),i=void 0,!mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function kf(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var r=s.tag;if(r===3||r===4){var o=s.stateNode.containerInfo;if(o===i)break;if(r===4)for(r=s.return;r!==null;){var u=r.tag;if((u===3||u===4)&&r.stateNode.containerInfo===i)return;r=r.return}for(;o!==null;){if(r=gr(o),r===null)return;if(u=r.tag,u===5||u===6||u===26||u===27){s=a=r;continue e}o=o.parentNode}}s=s.return}uw(function(){var d=a,h=Gp(n),m=[];e:{var p=Nw.get(t);if(p!==void 0){var y=Bd,b=t;switch(t){case"keypress":if(fu(n)===0)break e;case"keydown":case"keyup":y=IA;break;case"focusin":b="focus",y=rf;break;case"focusout":b="blur",y=rf;break;case"beforeblur":case"afterblur":y=rf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=nx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=MA;break;case _w:case ww:case Ew:y=EA;break;case Tw:y=PA;break;case"scroll":case"scrollend":y=xA;break;case"wheel":y=UA;break;case"copy":case"cut":case"paste":y=NA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ix;break;case"toggle":case"beforetoggle":y=BA}var N=(e&4)!==0,R=!N&&(t==="scroll"||t==="scrollend"),w=N?p!==null?p+"Capture":null:p;N=[];for(var _=d,E;_!==null;){var I=_;if(E=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||E===null||w===null||(I=jo(_,w),I!=null&&N.push(Mo(_,I,E))),R)break;_=_.return}0<N.length&&(p=new y(p,b,null,n,h),m.push({event:p,listeners:N}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==fm&&(b=n.relatedTarget||n.fromElement)&&(gr(b)||b[al]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=d,b=b?gr(b):null,b!==null&&(R=Jo(b),N=b.tag,b!==R||N!==5&&N!==27&&N!==6)&&(b=null)):(y=null,b=d),y!==b)){if(N=nx,I="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(N=ix,I="onPointerLeave",w="onPointerEnter",_="pointer"),R=y==null?p:Gl(y),E=b==null?p:Gl(b),p=new N(I,_+"leave",y,n,h),p.target=R,p.relatedTarget=E,I=null,gr(h)===d&&(N=new N(w,_+"enter",b,n,h),N.target=E,N.relatedTarget=R,I=N),R=I,y&&b)t:{for(N=zS,w=y,_=b,E=0,I=w;I;I=N(I))E++;I=0;for(var M=_;M;M=N(M))I++;for(;0<E-I;)w=N(w),E--;for(;0<I-E;)_=N(_),I--;for(;E--;){if(w===_||_!==null&&w===_.alternate){N=w;break t}w=N(w),_=N(_)}N=null}else N=null;y!==null&&Yx(m,p,y,N,!1),b!==null&&R!==null&&Yx(m,R,b,N,!0)}}e:{if(p=d?Gl(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var L=ox;else if(lx(p))if(gw)L=WA;else{L=YA;var v=QA}else y=p.nodeName,!y||y.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&Hp(d.elementType)&&(L=ox):L=XA;if(L&&(L=L(t,d))){pw(m,L,n,h);break e}v&&v(t,p,d),t==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&hm(p,"number",p.value)}switch(v=d?Gl(d):window,t){case"focusin":(lx(v)||v.contentEditable==="true")&&(br=v,pm=d,io=null);break;case"focusout":io=pm=br=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,fx(m,n,h);break;case"selectionchange":if(ZA)break;case"keydown":case"keyup":fx(m,n,h)}var x;if(Qp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else xr?fw(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(hw&&n.locale!=="ko"&&(xr||T!=="onCompositionStart"?T==="onCompositionEnd"&&xr&&(x=dw()):(Ti=h,Kp="value"in Ti?Ti.value:Ti.textContent,xr=!0)),v=ld(d,T),0<v.length&&(T=new sx(T,t,null,n,h),m.push({event:T,listeners:v}),x?T.data=x:(x=mw(n),x!==null&&(T.data=x)))),(x=FA?HA(t,n):GA(t,n))&&(T=ld(d,"onBeforeInput"),0<T.length&&(v=new sx("onBeforeInput","beforeinput",null,n,h),m.push({event:v,listeners:T}),v.data=x)),VS(m,t,d,n,h)}u1(m,e)})}function Mo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ld(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=jo(t,n),i!=null&&s.unshift(Mo(t,i,a)),i=jo(t,e),i!=null&&s.push(Mo(t,i,a))),t.tag===3)return s;t=t.return}return[]}function zS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yx(t,e,n,s,i){for(var a=e._reactName,r=[];n!==null&&n!==s;){var o=n,u=o.alternate,d=o.stateNode;if(o=o.tag,u!==null&&u===s)break;o!==5&&o!==26&&o!==27||d===null||(u=d,i?(d=jo(n,a),d!=null&&r.unshift(Mo(n,d,u))):i||(d=jo(n,a),d!=null&&r.push(Mo(n,d,u)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var BS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function Xx(t){return(typeof t=="string"?t:""+t).replace(BS,`
`).replace(qS,"")}function h1(t,e){return e=Xx(e),Xx(t)===e}function Fe(t,e,n,s,i,a){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||qr(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&qr(t,""+s);break;case"className":Hc(t,"class",s);break;case"tabIndex":Hc(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Hc(t,n,s);break;case"style":cw(t,s,a);break;case"data":if(e!=="object"){Hc(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=du(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&Fe(t,e,"name",i.name,i,null),Fe(t,e,"formEncType",i.formEncType,i,null),Fe(t,e,"formMethod",i.formMethod,i,null),Fe(t,e,"formTarget",i.formTarget,i,null)):(Fe(t,e,"encType",i.encType,i,null),Fe(t,e,"method",i.method,i,null),Fe(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=du(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Ms);break;case"onScroll":s!=null&&Ne("scroll",t);break;case"onScrollEnd":s!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=du(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),uu(t,"popover",s);break;case"xlinkActuate":js(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":js(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":js(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":js(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":js(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":js(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":js(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":js(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":js(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":uu(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=gA.get(n)||n,uu(t,n,s))}}function zm(t,e,n,s,i,a){switch(n){case"style":cw(t,s,a);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"children":typeof s=="string"?qr(t,s):(typeof s=="number"||typeof s=="bigint")&&qr(t,""+s);break;case"onScroll":s!=null&&Ne("scroll",t);break;case"onScrollEnd":s!=null&&Ne("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sw.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),a=t[yn]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,i),typeof s=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):uu(t,n,s)}}}function Ht(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var s=!1,i=!1,a;for(a in n)if(n.hasOwnProperty(a)){var r=n[a];if(r!=null)switch(a){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Fe(t,e,a,r,n,null)}}i&&Fe(t,e,"srcSet",n.srcSet,n,null),s&&Fe(t,e,"src",n.src,n,null);return;case"input":Ne("invalid",t);var o=a=r=i=null,u=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"name":i=h;break;case"type":r=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(z(137,e));break;default:Fe(t,e,s,h,n,null)}}rw(t,a,o,u,d,r,i,!1);return;case"select":Ne("invalid",t),s=r=a=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":a=o;break;case"defaultValue":r=o;break;case"multiple":s=o;default:Fe(t,e,i,o,n,null)}e=a,n=r,t.multiple=!!s,e!=null?Cr(t,!!s,e,!1):n!=null&&Cr(t,!!s,n,!0);return;case"textarea":Ne("invalid",t),a=i=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":i=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(z(91));break;default:Fe(t,e,r,o,n,null)}ow(t,s,i,a);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Fe(t,e,u,s,n,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(s=0;s<Oo.length;s++)Ne(Oo[s],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Fe(t,e,d,s,n,null)}return;default:if(Hp(e)){for(h in n)n.hasOwnProperty(h)&&(s=n[h],s!==void 0&&zm(t,e,h,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&Fe(t,e,o,s,n,null))}function FS(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,r=null,o=null,u=null,d=null,h=null;for(y in n){var m=n[y];if(n.hasOwnProperty(y)&&m!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=m;default:s.hasOwnProperty(y)||Fe(t,e,y,null,s,m)}}for(var p in s){var y=s[p];if(m=n[p],s.hasOwnProperty(p)&&(y!=null||m!=null))switch(p){case"type":a=y;break;case"name":i=y;break;case"checked":d=y;break;case"defaultChecked":h=y;break;case"value":r=y;break;case"defaultValue":o=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(z(137,e));break;default:y!==m&&Fe(t,e,p,y,s,m)}}dm(t,r,o,u,d,h,a,i);return;case"select":y=r=o=p=null;for(a in n)if(u=n[a],n.hasOwnProperty(a)&&u!=null)switch(a){case"value":break;case"multiple":y=u;default:s.hasOwnProperty(a)||Fe(t,e,a,null,s,u)}for(i in s)if(a=s[i],u=n[i],s.hasOwnProperty(i)&&(a!=null||u!=null))switch(i){case"value":p=a;break;case"defaultValue":o=a;break;case"multiple":r=a;default:a!==u&&Fe(t,e,i,a,s,u)}e=o,n=r,s=y,p!=null?Cr(t,!!n,p,!1):!!s!=!!n&&(e!=null?Cr(t,!!n,e,!0):Cr(t,!!n,n?[]:"",!1));return;case"textarea":y=p=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Fe(t,e,o,null,s,i)}for(r in s)if(i=s[r],a=n[r],s.hasOwnProperty(r)&&(i!=null||a!=null))switch(r){case"value":p=i;break;case"defaultValue":y=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(z(91));break;default:i!==a&&Fe(t,e,r,i,s,a)}lw(t,p,y);return;case"option":for(var b in n)if(p=n[b],n.hasOwnProperty(b)&&p!=null&&!s.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:Fe(t,e,b,null,s,p)}for(u in s)if(p=s[u],y=n[u],s.hasOwnProperty(u)&&p!==y&&(p!=null||y!=null))switch(u){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Fe(t,e,u,p,s,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)p=n[N],n.hasOwnProperty(N)&&p!=null&&!s.hasOwnProperty(N)&&Fe(t,e,N,null,s,p);for(d in s)if(p=s[d],y=n[d],s.hasOwnProperty(d)&&p!==y&&(p!=null||y!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(z(137,e));break;default:Fe(t,e,d,p,s,y)}return;default:if(Hp(e)){for(var R in n)p=n[R],n.hasOwnProperty(R)&&p!==void 0&&!s.hasOwnProperty(R)&&zm(t,e,R,void 0,s,p);for(h in s)p=s[h],y=n[h],!s.hasOwnProperty(h)||p===y||p===void 0&&y===void 0||zm(t,e,h,p,s,y);return}}for(var w in n)p=n[w],n.hasOwnProperty(w)&&p!=null&&!s.hasOwnProperty(w)&&Fe(t,e,w,null,s,p);for(m in s)p=s[m],y=n[m],!s.hasOwnProperty(m)||p===y||p==null&&y==null||Fe(t,e,m,p,s,y)}function Wx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],a=i.transferSize,r=i.initiatorType,o=i.duration;if(a&&o&&Wx(r)){for(r=0,o=i.responseEnd,s+=1;s<n.length;s++){var u=n[s],d=u.startTime;if(d>o)break;var h=u.transferSize,m=u.initiatorType;h&&Wx(m)&&(u=u.responseEnd,r+=h*(u<o?1:(o-d)/(u-d)))}if(--s,e+=8*(a+r)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bm=null,qm=null;function od(t){return t.nodeType===9?t:t.ownerDocument}function Jx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f1(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Fm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var If=null;function GS(){var t=window.event;return t&&t.type==="popstate"?t===If?!1:(If=t,!0):(If=null,!1)}var m1=typeof setTimeout=="function"?setTimeout:void 0,KS=typeof clearTimeout=="function"?clearTimeout:void 0,Zx=typeof Promise=="function"?Promise:void 0,$S=typeof queueMicrotask=="function"?queueMicrotask:typeof Zx<"u"?function(t){return Zx.resolve(null).then(t).catch(QS)}:m1;function QS(t){setTimeout(function(){throw t})}function ia(t){return t==="head"}function eb(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),Xr(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")po(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,po(n);for(var a=n.firstChild;a;){var r=a.nextSibling,o=a.nodeName;a[nc]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=r}}else n==="body"&&po(t.ownerDocument.body);n=i}while(n);Xr(e)}function tb(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function Hm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Hm(n),Fp(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function YS(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[nc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=Fn(t.nextSibling),t===null)break}return null}function XS(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Fn(t.nextSibling),t===null))return null;return t}function p1(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Fn(t.nextSibling),t===null))return null;return t}function Gm(t){return t.data==="$?"||t.data==="$~"}function Km(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function WS(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var $m=null;function nb(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Fn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function sb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function g1(t,e,n){switch(e=od(n),t){case"html":if(t=e.documentElement,!t)throw Error(z(452));return t;case"head":if(t=e.head,!t)throw Error(z(453));return t;case"body":if(t=e.body,!t)throw Error(z(454));return t;default:throw Error(z(451))}}function po(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Fp(t)}var Hn=new Map,ib=new Set;function cd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ti=Pe.d;Pe.d={f:JS,r:ZS,D:eC,C:tC,L:nC,m:sC,X:aC,S:iC,M:rC};function JS(){var t=ti.f(),e=Jd();return t||e}function ZS(t){var e=rl(t);e!==null&&e.tag===5&&e.type==="form"?cE(e):ti.r(t)}var ul=typeof document>"u"?null:document;function y1(t,e,n){var s=ul;if(s&&typeof e=="string"&&e){var i=Ln(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),ib.has(i)||(ib.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),Ht(e,"link",t),Ot(e),s.head.appendChild(e)))}}function eC(t){ti.D(t),y1("dns-prefetch",t,null)}function tC(t,e){ti.C(t,e),y1("preconnect",t,e)}function nC(t,e,n){ti.L(t,e,n);var s=ul;if(s&&t&&e){var i='link[rel="preload"][as="'+Ln(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Ln(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Ln(n.imageSizes)+'"]')):i+='[href="'+Ln(t)+'"]';var a=i;switch(e){case"style":a=Yr(t);break;case"script":a=dl(t)}Hn.has(a)||(t=nt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Hn.set(a,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(oc(a))||e==="script"&&s.querySelector(cc(a))||(e=s.createElement("link"),Ht(e,"link",t),Ot(e),s.head.appendChild(e)))}}function sC(t,e){ti.m(t,e);var n=ul;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+Ln(s)+'"][href="'+Ln(t)+'"]',a=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=dl(t)}if(!Hn.has(a)&&(t=nt({rel:"modulepreload",href:t},e),Hn.set(a,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cc(a)))return}s=n.createElement("link"),Ht(s,"link",t),Ot(s),n.head.appendChild(s)}}}function iC(t,e,n){ti.S(t,e,n);var s=ul;if(s&&t){var i=Sr(s).hoistableStyles,a=Yr(t);e=e||"default";var r=i.get(a);if(!r){var o={loading:0,preload:null};if(r=s.querySelector(oc(a)))o.loading=5;else{t=nt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Hn.get(a))&&Sg(t,n);var u=r=s.createElement("link");Ot(u),Ht(u,"link",t),u._p=new Promise(function(d,h){u.onload=d,u.onerror=h}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,_u(r,e,s)}r={type:"stylesheet",instance:r,count:1,state:o},i.set(a,r)}}}function aC(t,e){ti.X(t,e);var n=ul;if(n&&t){var s=Sr(n).hoistableScripts,i=dl(t),a=s.get(i);a||(a=n.querySelector(cc(i)),a||(t=nt({src:t,async:!0},e),(e=Hn.get(i))&&Cg(t,e),a=n.createElement("script"),Ot(a),Ht(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function rC(t,e){ti.M(t,e);var n=ul;if(n&&t){var s=Sr(n).hoistableScripts,i=dl(t),a=s.get(i);a||(a=n.querySelector(cc(i)),a||(t=nt({src:t,async:!0,type:"module"},e),(e=Hn.get(i))&&Cg(t,e),a=n.createElement("script"),Ot(a),Ht(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},s.set(i,a))}}function ab(t,e,n,s){var i=(i=Ri.current)?cd(i):null;if(!i)throw Error(z(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Yr(n.href),n=Sr(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Yr(n.href);var a=Sr(i).hoistableStyles,r=a.get(t);if(r||(i=i.ownerDocument||i,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,r),(a=i.querySelector(oc(t)))&&!a._p&&(r.instance=a,r.state.loading=5),Hn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Hn.set(t,n),a||lC(i,t,n,r.state))),e&&s===null)throw Error(z(528,""));return r}if(e&&s!==null)throw Error(z(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=dl(n),n=Sr(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(z(444,t))}}function Yr(t){return'href="'+Ln(t)+'"'}function oc(t){return'link[rel="stylesheet"]['+t+"]"}function x1(t){return nt({},t,{"data-precedence":t.precedence,precedence:null})}function lC(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Ht(e,"link",n),Ot(e),t.head.appendChild(e))}function dl(t){return'[src="'+Ln(t)+'"]'}function cc(t){return"script[async]"+t}function rb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+Ln(n.href)+'"]');if(s)return e.instance=s,Ot(s),s;var i=nt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Ot(s),Ht(s,"style",i),_u(s,n.precedence,t),e.instance=s;case"stylesheet":i=Yr(n.href);var a=t.querySelector(oc(i));if(a)return e.state.loading|=4,e.instance=a,Ot(a),a;s=x1(n),(i=Hn.get(i))&&Sg(s,i),a=(t.ownerDocument||t).createElement("link"),Ot(a);var r=a;return r._p=new Promise(function(o,u){r.onload=o,r.onerror=u}),Ht(a,"link",s),e.state.loading|=4,_u(a,n.precedence,t),e.instance=a;case"script":return a=dl(n.src),(i=t.querySelector(cc(a)))?(e.instance=i,Ot(i),i):(s=n,(i=Hn.get(a))&&(s=nt({},n),Cg(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),Ot(i),Ht(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(z(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,_u(s,n.precedence,t));return e.instance}function _u(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,a=i,r=0;r<s.length;r++){var o=s[r];if(o.dataset.precedence===e)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Sg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Cg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var wu=null;function lb(t,e,n){if(wu===null){var s=new Map,i=wu=new Map;i.set(n,s)}else i=wu,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var a=n[i];if(!(a[nc]||a[Ut]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(e)||"";r=t+r;var o=s.get(r);o?o.push(a):s.set(r,[a])}}return s}function ob(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function oC(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function b1(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function cC(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=Yr(s.href),a=e.querySelector(oc(i));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=ud.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=a,Ot(a);return}a=e.ownerDocument||e,s=x1(s),(i=Hn.get(i))&&Sg(s,i),a=a.createElement("link"),Ot(a);var r=a;r._p=new Promise(function(o,u){r.onload=o,r.onerror=u}),Ht(a,"link",s),n.instance=a}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=ud.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Df=0;function uC(t,e){return t.stylesheets&&t.count===0&&Eu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Eu(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4+e);0<t.imgBytes&&Df===0&&(Df=62500*HS());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Eu(t,t.stylesheets),t.unsuspend)){var a=t.unsuspend;t.unsuspend=null,a()}},(t.imgBytes>Df?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function ud(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var dd=null;function Eu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,dd=new Map,e.forEach(dC,t),dd=null,ud.call(t))}function dC(t,e){if(!(e.state.loading&4)){var n=dd.get(t);if(n)var s=n.get(null);else{n=new Map,dd.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var r=i[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),s=r)}s&&n.set(null,s)}i=e.instance,r=i.getAttribute("data-precedence"),a=n.get(r)||s,a===s&&n.set(null,i),n.set(r,i),this.count++,s=ud.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),a?a.parentNode.insertBefore(i,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Vo={$$typeof:Os,Provider:null,Consumer:null,_currentValue:Ta,_currentValue2:Ta,_threadCount:0};function hC(t,e,n,s,i,a,r,o,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.hiddenUpdates=tf(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function v1(t,e,n,s,i,a,r,o,u,d,h,m){return t=new hC(t,e,n,r,u,d,h,m,o),e=1,a===!0&&(e|=24),a=wn(3,null,null,e),t.current=a,a.stateNode=t,e=tg(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:s,isDehydrated:n,cache:e},ig(a),t}function _1(t){return t?(t=wr,t):wr}function w1(t,e,n,s,i,a){i=_1(i),s.context===null?s.context=i:s.pendingContext=i,s=Ii(e),s.payload={element:n},a=a===void 0?null:a,a!==null&&(s.callback=a),n=Di(t,s,e),n!==null&&(gn(n,t,e),ro(n,t,e))}function cb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rg(t,e){cb(t,e),(t=t.alternate)&&cb(t,e)}function E1(t){if(t.tag===13||t.tag===31){var e=Qa(t,67108864);e!==null&&gn(e,t,67108864),Rg(t,67108864)}}function ub(t){if(t.tag===13||t.tag===31){var e=Rn();e=Bp(e);var n=Qa(t,e);n!==null&&gn(n,t,e),Rg(t,e)}}var hd=!0;function fC(t,e,n,s){var i=ue.T;ue.T=null;var a=Pe.p;try{Pe.p=2,kg(t,e,n,s)}finally{Pe.p=a,ue.T=i}}function mC(t,e,n,s){var i=ue.T;ue.T=null;var a=Pe.p;try{Pe.p=8,kg(t,e,n,s)}finally{Pe.p=a,ue.T=i}}function kg(t,e,n,s){if(hd){var i=Qm(s);if(i===null)kf(t,e,s,fd,n),db(t,s);else if(gC(i,t,e,n,s))s.stopPropagation();else if(db(t,s),e&4&&-1<pC.indexOf(t)){for(;i!==null;){var a=rl(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=ba(a.pendingLanes);if(r!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;r;){var u=1<<31-Cn(r);o.entanglements[1]|=u,r&=~u}ws(a),!(Ve&6)&&(nd=An()+500,lc(0))}}break;case 31:case 13:o=Qa(a,2),o!==null&&gn(o,a,2),Jd(),Rg(a,2)}if(a=Qm(s),a===null&&kf(t,e,s,fd,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else kf(t,e,s,null,n)}}function Qm(t){return t=Gp(t),Ig(t)}var fd=null;function Ig(t){if(fd=null,t=gr(t),t!==null){var e=Jo(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=F_(e),t!==null)return t;t=null}else if(n===31){if(t=H_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return fd=t,null}function T1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eA()){case Q_:return 2;case Y_:return 8;case qu:case tA:return 32;case X_:return 268435456;default:return 32}default:return 32}}var Ym=!1,Vi=null,Pi=null,Li=null,Po=new Map,Lo=new Map,yi=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function db(t,e){switch(t){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":Po.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(e.pointerId)}}function zl(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=rl(e),e!==null&&E1(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gC(t,e,n,s,i){switch(e){case"focusin":return Vi=zl(Vi,t,e,n,s,i),!0;case"dragenter":return Pi=zl(Pi,t,e,n,s,i),!0;case"mouseover":return Li=zl(Li,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Po.set(a,zl(Po.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Lo.set(a,zl(Lo.get(a)||null,t,e,n,s,i)),!0}return!1}function N1(t){var e=gr(t.target);if(e!==null){var n=Jo(e);if(n!==null){if(e=n.tag,e===13){if(e=F_(n),e!==null){t.blockedOn=e,Yy(t.priority,function(){ub(n)});return}}else if(e===31){if(e=H_(n),e!==null){t.blockedOn=e,Yy(t.priority,function(){ub(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qm(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);fm=s,n.target.dispatchEvent(s),fm=null}else return e=rl(n),e!==null&&E1(e),t.blockedOn=n,!1;e.shift()}return!0}function hb(t,e,n){Tu(t)&&n.delete(e)}function yC(){Ym=!1,Vi!==null&&Tu(Vi)&&(Vi=null),Pi!==null&&Tu(Pi)&&(Pi=null),Li!==null&&Tu(Li)&&(Li=null),Po.forEach(hb),Lo.forEach(hb)}function Jc(t,e){t.blockedOn===e&&(t.blockedOn=null,Ym||(Ym=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,yC)))}var Zc=null;function fb(t){Zc!==t&&(Zc=t,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,function(){Zc===t&&(Zc=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(Ig(s||n)===null)continue;break}var a=rl(n);a!==null&&(t.splice(e,3),e-=3,Cm(a,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function Xr(t){function e(u){return Jc(u,t)}Vi!==null&&Jc(Vi,t),Pi!==null&&Jc(Pi,t),Li!==null&&Jc(Li,t),Po.forEach(e),Lo.forEach(e);for(var n=0;n<yi.length;n++){var s=yi[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)N1(n),n.blockedOn===null&&yi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],a=n[s+1],r=i[yn]||null;if(typeof a=="function")r||fb(n);else if(r){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,r=a[yn]||null)o=r.formAction;else if(Ig(i)!==null)continue}else o=r.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),fb(n)}}}function j1(){function t(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(r){return i=r})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function Dg(t){this._internalRoot=t}th.prototype.render=Dg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));var n=e.current,s=Rn();w1(n,s,t,e,null,null)};th.prototype.unmount=Dg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;w1(t.current,2,null,t,null,null),Jd(),e[al]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var e=tw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yi.length&&e!==0&&e<yi[n].priority;n++);yi.splice(n,0,t),n===0&&N1(t)}};var mb=B_.version;if(mb!=="19.2.0")throw Error(z(527,mb,"19.2.0"));Pe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=$j(e),t=t!==null?G_(t):null,t=t===null?null:t.stateNode,t};var xC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Zo=eu.inject(xC),Sn=eu}catch{}}Ld.createRoot=function(t,e){if(!q_(t))throw Error(z(299));var n=!1,s="",i=yE,a=xE,r=bE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=v1(t,1,!1,null,null,n,s,null,i,a,r,j1),t[al]=e.current,Ag(t),new Dg(e)};Ld.hydrateRoot=function(t,e,n){if(!q_(t))throw Error(z(299));var s=!1,i="",a=yE,r=xE,o=bE,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=v1(t,1,!0,e,n??null,s,i,u,a,r,o,j1),e.context=_1(null),n=e.current,s=Rn(),s=Bp(s),i=Ii(s),i.callback=null,Di(n,i,s),n=s,e.current.lanes=n,tc(e,n),ws(e),t[al]=e.current,Ag(t),new th(e)};Ld.version="19.2.0";function A1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A1)}catch(t){console.error(t)}}A1(),M_.exports=Ld;var bC=M_.exports;const vC=N_(bC);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Uo.apply(this,arguments)}var Si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Si||(Si={}));const pb="popstate";function _C(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:r,hash:o}=s.location;return Xm("",{pathname:a,search:r,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:md(i)}return EC(e,n,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function S1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wC(){return Math.random().toString(36).substr(2,8)}function gb(t,e){return{usr:t.state,key:t.key,idx:e}}function Xm(t,e,n,s){return n===void 0&&(n=null),Uo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hl(e):e,{state:n,key:e&&e.key||s||wC()})}function md(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function hl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function EC(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,r=i.history,o=Si.Pop,u=null,d=h();d==null&&(d=0,r.replaceState(Uo({},r.state,{idx:d}),""));function h(){return(r.state||{idx:null}).idx}function m(){o=Si.Pop;let R=h(),w=R==null?null:R-d;d=R,u&&u({action:o,location:N.location,delta:w})}function p(R,w){o=Si.Push;let _=Xm(N.location,R,w);d=h()+1;let E=gb(_,d),I=N.createHref(_);try{r.pushState(E,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}a&&u&&u({action:o,location:N.location,delta:1})}function y(R,w){o=Si.Replace;let _=Xm(N.location,R,w);d=h();let E=gb(_,d),I=N.createHref(_);r.replaceState(E,"",I),a&&u&&u({action:o,location:N.location,delta:0})}function b(R){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof R=="string"?R:md(R);return _=_.replace(/ $/,"%20"),lt(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let N={get action(){return o},get location(){return t(i,r)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(pb,m),u=R,()=>{i.removeEventListener(pb,m),u=null}},createHref(R){return e(i,R)},createURL:b,encodeLocation(R){let w=b(R);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:y,go(R){return r.go(R)}};return N}var yb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yb||(yb={}));function TC(t,e,n){return n===void 0&&(n="/"),NC(t,e,n)}function NC(t,e,n,s){let i=typeof e=="string"?hl(e):e,a=Wr(i.pathname||"/",n);if(a==null)return null;let r=C1(t);jC(r);let o=null;for(let u=0;o==null&&u<r.length;++u){let d=PC(a);o=MC(r[u],d)}return o}function C1(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,r,o)=>{let u={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:r,route:a};u.relativePath.startsWith("/")&&(lt(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=Ui([s,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(lt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),C1(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:DC(d,a.index),routesMeta:h})};return t.forEach((a,r)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,r);else for(let u of R1(a.path))i(a,r,u)}),e}function R1(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let r=R1(s.join("/")),o=[];return o.push(...r.map(u=>u===""?a:[a,u].join("/"))),i&&o.push(...r),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function jC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OC(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const AC=/^:[\w-]+$/,SC=3,CC=2,RC=1,kC=10,IC=-2,xb=t=>t==="*";function DC(t,e){let n=t.split("/"),s=n.length;return n.some(xb)&&(s+=IC),e&&(s+=CC),n.filter(i=>!xb(i)).reduce((i,a)=>i+(AC.test(a)?SC:a===""?RC:kC),s)}function OC(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function MC(t,e,n){let{routesMeta:s}=t,i={},a="/",r=[];for(let o=0;o<s.length;++o){let u=s[o],d=o===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=Wm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(i,m.params),r.push({params:i,pathname:Ui([a,m.pathname]),pathnameBase:BC(Ui([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Ui([a,m.pathnameBase]))}return r}function Wm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=VC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],r=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((d,h,m)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let N=o[m]||"";r=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const b=o[m];return y&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:r,pattern:t}}function VC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),S1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,o,u)=>(s.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function PC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return S1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function LC(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?hl(t):t;return{pathname:n?n.startsWith("/")?n:UC(n,e):e,search:qC(s),hash:FC(i)}}function UC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Of(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Og(t,e){let n=zC(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Mg(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=hl(t):(i=Uo({},t),lt(!i.pathname||!i.pathname.includes("?"),Of("?","pathname","search",i)),lt(!i.pathname||!i.pathname.includes("#"),Of("#","pathname","hash",i)),lt(!i.search||!i.search.includes("#"),Of("#","search","hash",i)));let a=t===""||i.pathname==="",r=a?"/":i.pathname,o;if(r==null)o=n;else{let m=e.length-1;if(!s&&r.startsWith("..")){let p=r.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}o=m>=0?e[m]:"/"}let u=LC(i,o),d=r&&r!=="/"&&r.endsWith("/"),h=(a||r===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Ui=t=>t.join("/").replace(/\/\/+/g,"/"),BC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const k1=["post","put","patch","delete"];new Set(k1);const GC=["get",...k1];new Set(GC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zo(){return zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zo.apply(this,arguments)}const nh=j.createContext(null),I1=j.createContext(null),ni=j.createContext(null),sh=j.createContext(null),Es=j.createContext({outlet:null,matches:[],isDataRoute:!1}),D1=j.createContext(null);function KC(t,e){let{relative:n}=e===void 0?{}:e;fl()||lt(!1);let{basename:s,navigator:i}=j.useContext(ni),{hash:a,pathname:r,search:o}=ih(t,{relative:n}),u=r;return s!=="/"&&(u=r==="/"?s:Ui([s,r])),i.createHref({pathname:u,search:o,hash:a})}function fl(){return j.useContext(sh)!=null}function aa(){return fl()||lt(!1),j.useContext(sh).location}function O1(t){j.useContext(ni).static||j.useLayoutEffect(t)}function Ts(){let{isDataRoute:t}=j.useContext(Es);return t?lR():$C()}function $C(){fl()||lt(!1);let t=j.useContext(nh),{basename:e,future:n,navigator:s}=j.useContext(ni),{matches:i}=j.useContext(Es),{pathname:a}=aa(),r=JSON.stringify(Og(i,n.v7_relativeSplatPath)),o=j.useRef(!1);return O1(()=>{o.current=!0}),j.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let m=Mg(d,JSON.parse(r),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ui([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,r,a,t])}const M1=j.createContext(null);function es(){return j.useContext(M1)}function QC(t){let e=j.useContext(Es).outlet;return e&&j.createElement(M1.Provider,{value:t},e)}function YC(){let{matches:t}=j.useContext(Es),e=t[t.length-1];return e?e.params:{}}function ih(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=j.useContext(ni),{matches:i}=j.useContext(Es),{pathname:a}=aa(),r=JSON.stringify(Og(i,s.v7_relativeSplatPath));return j.useMemo(()=>Mg(t,JSON.parse(r),a,n==="path"),[t,r,a,n])}function XC(t,e){return WC(t,e)}function WC(t,e,n,s){fl()||lt(!1);let{navigator:i}=j.useContext(ni),{matches:a}=j.useContext(Es),r=a[a.length-1],o=r?r.params:{};r&&r.pathname;let u=r?r.pathnameBase:"/";r&&r.route;let d=aa(),h;if(e){var m;let R=typeof e=="string"?hl(e):e;u==="/"||(m=R.pathname)!=null&&m.startsWith(u)||lt(!1),h=R}else h=d;let p=h.pathname||"/",y=p;if(u!=="/"){let R=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let b=TC(t,{pathname:y}),N=nR(b&&b.map(R=>Object.assign({},R,{params:Object.assign({},o,R.params),pathname:Ui([u,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Ui([u,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,n,s);return e&&N?j.createElement(sh.Provider,{value:{location:zo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Si.Pop}},N):N}function JC(){let t=rR(),e=HC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const ZC=j.createElement(JC,null);class eR extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Es.Provider,{value:this.props.routeContext},j.createElement(D1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tR(t){let{routeContext:e,match:n,children:s}=t,i=j.useContext(nh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Es.Provider,{value:e},s)}function nR(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let h=r.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);h>=0||lt(!1),r=r.slice(0,Math.min(r.length,h+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<r.length;h++){let m=r[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:y}=n,b=m.route.loader&&p[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||b){u=!0,d>=0?r=r.slice(0,d+1):r=[r[0]];break}}}return r.reduceRight((h,m,p)=>{let y,b=!1,N=null,R=null;n&&(y=o&&m.route.id?o[m.route.id]:void 0,N=m.route.errorElement||ZC,u&&(d<0&&p===0?(oR("route-fallback"),b=!0,R=null):d===p&&(b=!0,R=m.route.hydrateFallbackElement||null)));let w=e.concat(r.slice(0,p+1)),_=()=>{let E;return y?E=N:b?E=R:m.route.Component?E=j.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=h,j.createElement(tR,{match:m,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:E})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?j.createElement(eR,{location:n.location,revalidation:n.revalidation,component:N,error:y,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var V1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(V1||{}),P1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(P1||{});function sR(t){let e=j.useContext(nh);return e||lt(!1),e}function iR(t){let e=j.useContext(I1);return e||lt(!1),e}function aR(t){let e=j.useContext(Es);return e||lt(!1),e}function L1(t){let e=aR(),n=e.matches[e.matches.length-1];return n.route.id||lt(!1),n.route.id}function rR(){var t;let e=j.useContext(D1),n=iR(),s=L1();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function lR(){let{router:t}=sR(V1.UseNavigateStable),e=L1(P1.UseNavigateStable),n=j.useRef(!1);return O1(()=>{n.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,zo({fromRouteId:e},a)))},[t,e])}const bb={};function oR(t,e,n){bb[t]||(bb[t]=!0)}function cR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Rs(t){let{to:e,replace:n,state:s,relative:i}=t;fl()||lt(!1);let{future:a,static:r}=j.useContext(ni),{matches:o}=j.useContext(Es),{pathname:u}=aa(),d=Ts(),h=Mg(e,Og(o,a.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(h);return j.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:i}),[d,m,i,n,s]),null}function Vg(t){return QC(t.context)}function Ie(t){lt(!1)}function uR(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Si.Pop,navigator:a,static:r=!1,future:o}=t;fl()&&lt(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:a,static:r,future:zo({v7_relativeSplatPath:!1},o)}),[u,o,a,r]);typeof s=="string"&&(s=hl(s));let{pathname:h="/",search:m="",hash:p="",state:y=null,key:b="default"}=s,N=j.useMemo(()=>{let R=Wr(h,u);return R==null?null:{location:{pathname:R,search:m,hash:p,state:y,key:b},navigationType:i}},[u,h,m,p,y,b,i]);return N==null?null:j.createElement(ni.Provider,{value:d},j.createElement(sh.Provider,{children:n,value:N}))}function dR(t){let{children:e,location:n}=t;return XC(Jm(e),n)}new Promise(()=>{});function Jm(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(s,i)=>{if(!j.isValidElement(s))return;let a=[...e,i];if(s.type===j.Fragment){n.push.apply(n,Jm(s.props.children,a));return}s.type!==Ie&&lt(!1),!s.props.index||!s.props.children||lt(!1);let r={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(r.children=Jm(s.props.children,a)),n.push(r)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},pd.apply(this,arguments)}function U1(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fR(t,e){return t.button===0&&(!e||e==="_self")&&!hR(t)}const mR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gR="6";try{window.__reactRouterVersion=gR}catch{}const yR=j.createContext({isTransitioning:!1}),xR="startTransition",vb=zj[xR];function bR(t){let{basename:e,children:n,future:s,window:i}=t,a=j.useRef();a.current==null&&(a.current=_C({window:i,v5Compat:!0}));let r=a.current,[o,u]=j.useState({action:r.action,location:r.location}),{v7_startTransition:d}=s||{},h=j.useCallback(m=>{d&&vb?vb(()=>u(m)):u(m)},[u,d]);return j.useLayoutEffect(()=>r.listen(h),[r,h]),j.useEffect(()=>cR(s),[s]),j.createElement(uR,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:r,future:s})}const vR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mr=j.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:a,replace:r,state:o,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=U1(e,mR),{basename:y}=j.useContext(ni),b,N=!1;if(typeof d=="string"&&_R.test(d)&&(b=d,vR))try{let E=new URL(window.location.href),I=d.startsWith("//")?new URL(E.protocol+d):new URL(d),M=Wr(I.pathname,y);I.origin===E.origin&&M!=null?d=M+I.search+I.hash:N=!0}catch{}let R=KC(d,{relative:i}),w=TR(d,{replace:r,state:o,target:u,preventScrollReset:h,relative:i,viewTransition:m});function _(E){s&&s(E),E.defaultPrevented||w(E)}return j.createElement("a",pd({},p,{href:b||R,onClick:N||a?s:_,ref:n,target:u}))}),wR=j.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:i=!1,className:a="",end:r=!1,style:o,to:u,viewTransition:d,children:h}=e,m=U1(e,pR),p=ih(u,{relative:m.relative}),y=aa(),b=j.useContext(I1),{navigator:N,basename:R}=j.useContext(ni),w=b!=null&&NR(p)&&d===!0,_=N.encodeLocation?N.encodeLocation(p).pathname:p.pathname,E=y.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(E=E.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&R&&(I=Wr(I,R)||I);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let L=E===_||!r&&E.startsWith(_)&&E.charAt(M)==="/",v=I!=null&&(I===_||!r&&I.startsWith(_)&&I.charAt(_.length)==="/"),x={isActive:L,isPending:v,isTransitioning:w},T=L?s:void 0,C;typeof a=="function"?C=a(x):C=[a,L?"active":null,v?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(x):o;return j.createElement(Mr,pd({},m,{"aria-current":T,className:C,ref:n,style:k,to:u,viewTransition:d}),typeof h=="function"?h(x):h)});var Zm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Zm||(Zm={}));var _b;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_b||(_b={}));function ER(t){let e=j.useContext(nh);return e||lt(!1),e}function TR(t,e){let{target:n,replace:s,state:i,preventScrollReset:a,relative:r,viewTransition:o}=e===void 0?{}:e,u=Ts(),d=aa(),h=ih(t,{relative:r});return j.useCallback(m=>{if(fR(m,n)){m.preventDefault();let p=s!==void 0?s:md(d)===md(h);u(t,{replace:p,state:i,preventScrollReset:a,relative:r,viewTransition:o})}},[d,u,h,s,i,n,t,a,r,o])}function NR(t,e){e===void 0&&(e={});let n=j.useContext(yR);n==null&&lt(!1);let{basename:s}=ER(Zm.useViewTransitionState),i=ih(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Wr(n.currentLocation.pathname,s)||n.currentLocation.pathname,r=Wr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Wm(i.pathname,r)!=null||Wm(i.pathname,a)!=null}function z1(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=z1(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Me(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=z1(t))&&(s&&(s+=" "),s+=e);return s}const Pg=({sidebar:t,topbar:e,children:n,className:s="",mainClassName:i="",contentClassName:a=""})=>{const[r,o]=j.useState(!1);return l.jsxs("div",{className:Me("min-h-screen bg-transparent text-slate-900",s),children:[l.jsxs("div",{className:"lg:grid lg:grid-cols-[320px,1fr]",children:[l.jsx("div",{className:Me("fixed inset-y-0 left-0 z-40 w-80 max-w-full transform bg-white shadow-xl transition-transform duration-300 lg:sticky lg:top-0 lg:h-screen lg:overflow-y-auto lg:translate-x-0 lg:shadow-none lg:transform-none",r?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:t?Lu.cloneElement(t,{onNavigate:(...u)=>{var d,h;(h=(d=t.props).onNavigate)==null||h.call(d,...u),o(!1)}}):null}),l.jsxs("div",{className:"flex min-h-screen flex-col lg:col-start-2",children:[e?Lu.cloneElement(e,{onToggleSidebar:()=>o(u=>!u)}):null,l.jsx("main",{className:Me("flex-1 px-4 pb-10 pt-6 sm:px-6 lg:px-10",i),children:l.jsx("div",{className:Me("mx-auto w-full max-w-7xl space-y-8",a),children:n})})]})]}),r?l.jsx("div",{className:"fixed inset-0 z-30 bg-slate-900/40 lg:hidden",onClick:()=>o(!1)}):null]})},wb={light:{container:"bg-white text-slate-900 shadow-lg",headerBorder:"border-slate-100",navActive:"bg-brand-50 text-brand-700",navInactive:"text-slate-600 hover:bg-slate-100 hover:text-slate-900",iconIdle:"text-slate-400",iconActive:"text-brand-600",badge:"bg-brand-100 text-brand-700",footerBorder:"border-slate-100"},dark:{container:"bg-slate-950 text-white shadow-xl",headerBorder:"border-white/10",navActive:"bg-white/10 text-white",navInactive:"text-white/70 hover:bg-white/5 hover:text-white",iconIdle:"text-white/50",iconActive:"text-white",badge:"bg-white/10 text-white",footerBorder:"border-white/10"}},Lg=({header:t,navItems:e=[],footer:n,onNavigate:s,tone:i="light"})=>{const a=wb[i]||wb.light;return l.jsxs("aside",{className:Me("flex h-full w-80 max-w-full flex-col lg:h-screen",a.container),children:[l.jsx("div",{className:Me("border-b px-6 pb-4 pt-6",a.headerBorder),children:t||l.jsxs("div",{className:"text-current",children:[l.jsx("p",{className:"text-xs uppercase tracking-widest opacity-70",children:"EVC Portal"}),l.jsx("h1",{className:"mt-1 text-xl font-semibold",children:"Coaching Suite"})]})}),l.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:l.jsx("ul",{className:"flex flex-col gap-1",children:e.map(r=>{const o=r.icon;return l.jsx("li",{children:l.jsx(wR,{to:r.to,end:r.end,onClick:()=>s==null?void 0:s(r),className:({isActive:u})=>Me("group flex items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors",u?a.navActive:a.navInactive),children:({isActive:u})=>l.jsxs(l.Fragment,{children:[o?l.jsx(o,{className:Me("mr-3 h-4 w-4 flex-none transition-colors",u?a.iconActive:a.iconIdle)}):null,l.jsx("span",{className:"truncate",children:r.label}),r.badge?l.jsx("span",{className:Me("ml-auto inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold",a.badge),children:r.badge}):null]})})},r.to)})})}),n?l.jsx("div",{className:Me("border-t p-4",a.footerBorder),children:n}):null]})};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B1=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:r,...o},u)=>j.createElement("svg",{ref:u,...AR,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:B1("lucide",i),...o},[...r.map(([d,h])=>j.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const n=j.forwardRef(({className:s,...i},a)=>j.createElement(SR,{ref:a,iconNode:e,className:B1(`lucide-${jR(t)}`,s),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Eb=_e("ArrowLeft",CR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zi=_e("ArrowRight",RR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],IR=_e("BookOpen",kR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],OR=_e("Briefcase",DR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Tb=_e("CalendarClock",MR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],go=_e("ChevronDown",VR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],LR=_e("ChevronUp",PR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zR=_e("CircleAlert",UR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bi=_e("CircleCheck",BR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],Nb=_e("CirclePlay",qR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],HR=_e("CircleX",FR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],KR=_e("ClipboardCheck",GR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],QR=_e("ClipboardList",$R);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],q1=_e("Clock",YR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],WR=_e("FileSpreadsheet",XR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ug=_e("FileText",JR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],ek=_e("FolderOpen",ZR);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M12 13V2l8 4-8 4",key:"5wlwwj"}],["path",{d:"M20.561 10.222a9 9 0 1 1-12.55-5.29",key:"1c0wjv"}],["path",{d:"M8.002 9.997a5 5 0 1 0 8.9 2.02",key:"gb1g7m"}]],nk=_e("Goal",tk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],F1=_e("IdCard",sk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ah=_e("LayoutDashboard",ik);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mf=_e("LoaderCircle",ak);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],ep=_e("LogIn",rk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],jb=_e("LogOut",lk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],tp=_e("Mail",ok);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],H1=_e("Menu",ck);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],dk=_e("MessageCircle",uk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],fk=_e("MessageSquare",hk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],zg=_e("NotebookPen",mk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Ab=_e("Paperclip",pk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Sb=_e("Phone",gk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cb=_e("Plus",yk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],bk=_e("RefreshCcw",xk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],G1=_e("Save",vk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],wk=_e("Search",_k);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Tk=_e("Sparkles",Ek);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],np=_e("Trash2",Nk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],K1=_e("TriangleAlert",jk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$1=_e("UserPlus",Ak);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],sp=_e("UserRound",Sk);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],uc=_e("Users",Ck);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kk=_e("X",Rk),Q1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAuCAYAAADjs904AAAEnElEQVR4Adybi24jIQxFm/z/N88uJy2SSwzY5jGkVa0B+/peP5pkFWmfX+Lnuq5/s38EffWYNauAhYHV2pm/91zV4mvBWfzxeEzXgbtGSgzLcc5Yvq98ooNlDc5YvkefcEiz8kRyLNyvBVuAIxiKL/M1X4lZdW9pt2Kteq7r+92vhbHGqAGz4lu45yyilggxqSPPxErrxUv8nXdqxR6PNe9+cI/0t+UVPFLg7NzRgcl6ZnJJ3vI8onPsgkeaKge04r67PvQwby/bFvxIP7m4dJz/fpbJNzwjg55Vlld724IjDV7X9S+SV8vxDkfjmcGh8Xp8nhq2LDj6ik15nr492Co2aVbfXTyDrQpsDpgWTNMjpvUEn+YvfbOGOsozkk+vLSt7nnk3LXim4MlcLEGr77r8HxVwZdM4pS/jeEr/jPOtC17RkDaUkVcffKlOHiZL2NevCayASFbcYdetC7ZWPbogq46G82jPWk6PpxeXfdy+YE+xsvDZ59E6Wvn8kbRM6wU+rIxpvhIj77cvWBbTOjOgVrwWi+bBZ82tDZ18DK6WgcE0DNzSNEzLd8SCaaBV5OrYCv3awlq9eHLAlqZxH7FgrTDNR0Oav+bz4ms8Lb/2xzGi28sljmk14cdkrFiwDO09p8L2Cv6oaQsilOoJfYtWy0OnZuhZrMZd5krcMQt+Pp/Vb5DKBix32aQFH8GwMEteD9eLo+HtJ+NNCwbsMQpaZdQxi9syWI+WVptVA1y2UvO69C9aMp5nmZPvpgVnsPWpNWrJbRVqyT8NM6ufxPOrtXR//UonDnnnzB6WLDiT81xhFN7i7cXJTRgef8q0JS9bcHRyWpFRrlbe7M/8ltadseMWbB1GegWq/8qt+a28O3HUWrNZdRy54NT0rP5Unl3vEqr4jzP1qP6B/oS/evGMk08tZ9mCR4YYffvUGpQDqJ8/K2Ltkx0sWTDEO0ZmbVTWsqs2NFv1eerQsHCXhmZppgUj4LFSJHJHL5J3Z45WM0uo1QQ+W4nBX/o895xvWrCHeDc2DzA/W/oJ0wq7Y4nv7XM0+d54ku8NJ0G9OFgWhnHumcQdvWBZaK8pS9zz2R7VrmmwROy6vv+LC+dsZe0t7VYMnjJ+9IIp2GIMyoJbgdG0yyFL3RST17dzine/kwdTs5LwTyy4bEq7MxDNv8oX0Yvk9Oo/fsErmu4NJcet2tqrGA7yMc4tA4NpGLilaZiW7/gFt4q3xmrDs+ZbcCyhhkO/ZVoefFgZ03wlRt7bC5bIG88M5y55j7Z3+LWeejy9uOT9iAXLgk8/M3wsWudIrqb5MQv2vJJko9G8UQ4WhUme2hlcthom6jctOItHn9HiTsqL/qFYZrayT9OCRwugyVGOSH50KTWt2Xw1nZn+LQum4BlLPmHAn1bDtgWz5J22chEruXsz8mp/3IK9DfYGFo3vrgM9zFvvxy3Y22AIb0yKDNxI/Qs2ovMcSf5VRecyU6fH1Yt3SnWF0cJcSUYwvJgRrsJer+BREpVZOFfzC6mvnVql7ixteDDJHz2/FkzyLEK4pK3kldycMal9x5kasnn0cw5PT14P+x8AAP//7ZVCGgAAAAZJREFUAwA3A6cC1pBeLQAAAABJRU5ErkJggg==",Bg=({title:t,user:e,children:n,onToggleSidebar:s,rightSlot:i,tone:a="light",className:r="",logoSlot:o,logoTo:u="/"})=>{var p;const d={light:{header:"bg-white/85 backdrop-blur supports-[backdrop-filter]:bg-white/70",role:"text-slate-400",title:"text-slate-900",toggle:"border-slate-200 text-slate-500 transition hover:bg-slate-100",userChip:"bg-slate-100/60 text-slate-900",initials:"bg-brand-100 text-brand-700",subtitle:"text-slate-500",rightSection:"text-slate-900"},brand:{header:"bg-evc-blue-600/95 text-white backdrop-blur supports-[backdrop-filter]:bg-evc-blue-600/75",role:"text-white/70",title:"text-white",toggle:"border-white/40 text-white transition hover:bg-white/10",userChip:"bg-white/12 text-white",initials:"bg-white/15 text-white",subtitle:"text-white/70",rightSection:"text-white"}},h=d[a]||d.light,m=o??l.jsx(Mr,{to:u,className:"inline-flex shrink-0 items-center","aria-label":"Ga naar het hoofdscherm",children:l.jsx("img",{src:Q1,alt:"EVC GO",className:"h-7 w-auto"})});return l.jsxs("header",{className:Me("sticky top-0 z-20 flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8",h.header,r),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{type:"button",onClick:s,className:Me("flex h-10 w-10 items-center justify-center rounded-full border lg:hidden",h.toggle),children:[l.jsx(H1,{className:"h-5 w-5"}),l.jsx("span",{className:"sr-only",children:"Toggle navigation"})]}),m,l.jsxs("div",{children:[l.jsx("p",{className:Me("text-xs uppercase tracking-widest",h.role),children:(e==null?void 0:e.role)??"Portal"}),l.jsx("h2",{className:Me("text-lg font-semibold",h.title),children:t})]}),n]}),l.jsxs("div",{className:Me("flex items-center gap-4",h.rightSection),children:[i,e?l.jsxs("div",{className:Me("flex items-center gap-3 rounded-full px-3 py-2 text-sm",h.userChip),children:[l.jsx("div",{className:Me("flex h-9 w-9 items-center justify-center rounded-full font-semibold",h.initials),children:e.initials||((p=e.name)==null?void 0:p.split(" ").map(y=>y[0]).join("").slice(0,2).toUpperCase())||"EV"}),l.jsxs("div",{className:"hidden sm:block",children:[l.jsx("p",{className:Me("font-medium",h.title),children:e.name}),l.jsx("p",{className:Me("text-xs",h.subtitle),children:e.subtitle})]})]}):null]})]})},Rb={light:{shell:"bg-evc-blue-600 text-white ring-evc-blue-500/60 shadow-sm",hover:"hover:bg-evc-blue-500",image:"h-6 w-auto"},dark:{shell:"bg-white/10 text-white ring-white/20 shadow-lg",hover:"hover:bg-white/20",image:"h-6 w-auto drop-shadow-[0_2px_6px_rgba(15,23,42,0.45)]"}},rh=({to:t="/",className:e="",tone:n="light"})=>{const s=Rb[n]??Rb.light;return l.jsxs(Mr,{to:t,className:Me("inline-flex items-center gap-2 transition",e),"aria-label":"Ga naar de EVC GO homepage",children:[l.jsx("span",{className:Me("inline-flex items-center justify-center rounded-2xl px-3 py-2 ring-1 ring-inset",s.shell,s.hover),children:l.jsx("img",{src:Q1,alt:"EVC GO",className:s.image})}),l.jsx("span",{className:"sr-only",children:"EVC GO"})]})},Ik=()=>{};var kb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Dk=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],r=t[n++],o=t[n++],u=((i&7)<<18|(a&63)<<12|(r&63)<<6|o&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],r=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|r&63)}}return e.join("")},X1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],r=i+1<t.length,o=r?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,m=(a&3)<<4|o>>4;let p=(o&15)<<2|d>>6,y=d&63;u||(y=64,r||(p=64)),s.push(n[h],n[m],n[p],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Dk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||d==null||m==null)throw new Ok;const p=a<<2|o>>4;if(s.push(p),d!==64){const y=o<<4&240|d>>2;if(s.push(y),m!==64){const b=d<<6&192|m;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ok extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mk=function(t){const e=Y1(t);return X1.encodeByteArray(e,!0)},gd=function(t){return Mk(t).replace(/\./g,"")},W1=function(t){try{return X1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=()=>Vk().__FIREBASE_DEFAULTS__,Lk=()=>{if(typeof process>"u"||typeof kb>"u")return;const t=kb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Uk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W1(t[1]);return e&&JSON.parse(e)},lh=()=>{try{return Ik()||Pk()||Lk()||Uk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J1=t=>{var e,n;return(n=(e=lh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Z1=t=>{const e=J1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},eT=()=>{var t;return(t=lh())==null?void 0:t.config},tT=t=>{var e;return(e=lh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[gd(JSON.stringify(n)),gd(JSON.stringify(r)),""].join(".")}const yo={};function Bk(){const t={prod:[],emulator:[]};for(const e of Object.keys(yo))yo[e]?t.emulator.push(e):t.prod.push(e);return t}function qk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ib=!1;function Fg(t,e){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||yo[t]===e||yo[t]||Ib)return;yo[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",a=Bk().prod.length>0;function r(){const p=document.getElementById(s);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Ib=!0,r()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=qk(s),y=n("text"),b=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),w=n("preprendIcon"),_=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;o(E),h(R,N);const I=d();u(_,w),E.append(_,b,R,I),document.body.appendChild(E)}a?(b.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function Hk(){var e;const t=(e=lh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $k(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qk(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Yk(){return!Hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xk(){try{return typeof indexedDB=="object"}catch{return!1}}function Wk(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="FirebaseError";class Ns extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Jk,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dc.prototype.create)}}class dc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],r=a?Zk(a,s):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new Ns(i,o,s)}}function Zk(t,e){return t.replace(eI,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const eI=/\{\$([^}]+)}/g;function tI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pa(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const a=t[i],r=e[i];if(Db(a)&&Db(r)){if(!Pa(a,r))return!1}else if(a!==r)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Db(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ql(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Yl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nI(t,e){const n=new sI(t,e);return n.subscribe.bind(n)}class sI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");iI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Vf),i.error===void 0&&(i.error=Vf),i.complete===void 0&&(i.complete=Vf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new zk;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lI(e))try{this.getOrInitializeService({instanceIdentifier:wa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wa){return this.instances.has(e)}getOptions(e=wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);s===o&&r.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=wa){return this.component?this.component.multipleInstances?e:wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rI(t){return t===wa?void 0:t}function lI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const cI={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},uI=Ae.INFO,dI={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},hI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=dI[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hg{constructor(e){this.name=e,this._logLevel=uI,this._logHandler=hI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const fI=(t,e)=>e.some(n=>t instanceof n);let Ob,Mb;function mI(){return Ob||(Ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pI(){return Mb||(Mb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sT=new WeakMap,ip=new WeakMap,iT=new WeakMap,Pf=new WeakMap,Gg=new WeakMap;function gI(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",r)},a=()=>{n(qi(t.result)),i()},r=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",r)});return e.then(n=>{n instanceof IDBCursor&&sT.set(n,t)}).catch(()=>{}),Gg.set(e,t),e}function yI(t){if(ip.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",r),t.removeEventListener("abort",r)},a=()=>{n(),i()},r=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",r),t.addEventListener("abort",r)});ip.set(t,e)}let ap={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xI(t){ap=t(ap)}function bI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Lf(this),e,...n);return iT.set(s,e.sort?e.sort():[e]),qi(s)}:pI().includes(t)?function(...e){return t.apply(Lf(this),e),qi(sT.get(this))}:function(...e){return qi(t.apply(Lf(this),e))}}function vI(t){return typeof t=="function"?bI(t):(t instanceof IDBTransaction&&yI(t),fI(t,mI())?new Proxy(t,ap):t)}function qi(t){if(t instanceof IDBRequest)return gI(t);if(Pf.has(t))return Pf.get(t);const e=vI(t);return e!==t&&(Pf.set(t,e),Gg.set(e,t)),e}const Lf=t=>Gg.get(t);function _I(t,e,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const r=indexedDB.open(t,e),o=qi(r);return s&&r.addEventListener("upgradeneeded",u=>{s(qi(r.result),u.oldVersion,u.newVersion,qi(r.transaction),u)}),n&&r.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const wI=["get","getKey","getAll","getAllKeys","count"],EI=["put","add","delete","clear"],Uf=new Map;function Vb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uf.get(e))return Uf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=EI.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||wI.includes(n)))return;const a=async function(r,...o){const u=this.transaction(r,i?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),i&&u.done]))[0]};return Uf.set(e,a),a}xI(t=>({...t,get:(e,n,s)=>Vb(e,n)||t.get(e,n,s),has:(e,n)=>!!Vb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NI(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function NI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",Pb="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Hg("@firebase/app"),jI="@firebase/app-compat",AI="@firebase/analytics-compat",SI="@firebase/analytics",CI="@firebase/app-check-compat",RI="@firebase/app-check",kI="@firebase/auth",II="@firebase/auth-compat",DI="@firebase/database",OI="@firebase/data-connect",MI="@firebase/database-compat",VI="@firebase/functions",PI="@firebase/functions-compat",LI="@firebase/installations",UI="@firebase/installations-compat",zI="@firebase/messaging",BI="@firebase/messaging-compat",qI="@firebase/performance",FI="@firebase/performance-compat",HI="@firebase/remote-config",GI="@firebase/remote-config-compat",KI="@firebase/storage",$I="@firebase/storage-compat",QI="@firebase/firestore",YI="@firebase/ai",XI="@firebase/firestore-compat",WI="firebase",JI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",ZI={[rp]:"fire-core",[jI]:"fire-core-compat",[SI]:"fire-analytics",[AI]:"fire-analytics-compat",[RI]:"fire-app-check",[CI]:"fire-app-check-compat",[kI]:"fire-auth",[II]:"fire-auth-compat",[DI]:"fire-rtdb",[OI]:"fire-data-connect",[MI]:"fire-rtdb-compat",[VI]:"fire-fn",[PI]:"fire-fn-compat",[LI]:"fire-iid",[UI]:"fire-iid-compat",[zI]:"fire-fcm",[BI]:"fire-fcm-compat",[qI]:"fire-perf",[FI]:"fire-perf-compat",[HI]:"fire-rc",[GI]:"fire-rc-compat",[KI]:"fire-gcs",[$I]:"fire-gcs-compat",[QI]:"fire-fst",[XI]:"fire-fst-compat",[YI]:"fire-vertex","fire-js":"fire-js",[WI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Map,e4=new Map,op=new Map;function Lb(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function La(t){const e=t.name;if(op.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of yd.values())Lb(n,t);for(const n of e4.values())Lb(n,t);return!0}function oh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fi=new dc("app","Firebase",t4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=JI;function aT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:lp,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Fi.create("bad-app-name",{appName:String(i)});if(n||(n=eT()),!n)throw Fi.create("no-options");const a=yd.get(i);if(a){if(Pa(n,a.options)&&Pa(s,a.config))return a;throw Fi.create("duplicate-app",{appName:i})}const r=new oI(i);for(const u of op.values())r.addComponent(u);const o=new n4(n,s,r);return yd.set(i,o),o}function Kg(t=lp){const e=yd.get(t);if(!e&&t===lp&&eT())return aT();if(!e)throw Fi.create("no-app",{appName:t});return e}function ds(t,e,n){let s=ZI[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const r=[`Unable to register library "${s}" with version "${e}":`];i&&r.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&r.push("and"),a&&r.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(r.join(" "));return}La(new Xi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="firebase-heartbeat-database",i4=1,Bo="firebase-heartbeat-store";let zf=null;function rT(){return zf||(zf=_I(s4,i4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fi.create("idb-open",{originalErrorMessage:t.message})})),zf}async function a4(t){try{const n=(await rT()).transaction(Bo),s=await n.objectStore(Bo).get(lT(t));return await n.done,s}catch(e){if(e instanceof Ns)Ys.warn(e.message);else{const n=Fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function Ub(t,e){try{const s=(await rT()).transaction(Bo,"readwrite");await s.objectStore(Bo).put(e,lT(t)),await s.done}catch(n){if(n instanceof Ns)Ys.warn(n.message);else{const s=Fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(s.message)}}}function lT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=1024,l4=30;class o4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new u4(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=zb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(r=>r.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>l4){const r=d4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ys.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zb(),{heartbeatsToSend:s,unsentEntries:i}=c4(this._heartbeatsCache.heartbeats),a=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ys.warn(n),""}}}function zb(){return new Date().toISOString().substring(0,10)}function c4(t,e=r4){const n=[];let s=t.slice();for(const i of t){const a=n.find(r=>r.agent===i.agent);if(a){if(a.dates.push(i.date),Bb(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bb(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class u4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xk()?Wk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ub(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ub(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Bb(t){return gd(JSON.stringify({version:2,heartbeats:t})).length}function d4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t){La(new Xi("platform-logger",e=>new TI(e),"PRIVATE")),La(new Xi("heartbeat",e=>new o4(e),"PRIVATE")),ds(rp,Pb,t),ds(rp,Pb,"esm2020"),ds("fire-js","")}h4("");var f4="firebase",m4="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(f4,m4,"app");function oT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p4=oT,cT=new dc("auth","Firebase",oT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Hg("@firebase/auth");function g4(t,...e){xd.logLevel<=Ae.WARN&&xd.warn(`Auth (${Xa}): ${t}`,...e)}function Nu(t,...e){xd.logLevel<=Ae.ERROR&&xd.error(`Auth (${Xa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,...e){throw $g(t,...e)}function hs(t,...e){return $g(t,...e)}function uT(t,e,n){const s={...p4(),[e]:n};return new dc("auth","Firebase",s).create(e,{appName:t.name})}function qs(t){return uT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $g(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return cT.create(t,...e)}function oe(t,e,...n){if(!t)throw $g(e,...n)}function Ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nu(e),new Error(e)}function Xs(t,e){t||Ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function y4(){return qb()==="http:"||qb()==="https:"}function qb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y4()||Kk()||"connection"in navigator)?navigator.onLine:!0}function b4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xs(n>e,"Short delay should be less than long delay!"),this.isMobile=Fk()||$k()}get(){return x4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t,e){Xs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],w4=new fc(3e4,6e4);function la(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function oa(t,e,n,s,i={}){return hT(t,i,async()=>{let a={},r={};s&&(e==="GET"?r=s:a={body:JSON.stringify(s)});const o=hc({key:t.config.apiKey,...r}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return Gk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ra(t.emulatorConfig.host)&&(d.credentials="include"),dT.fetch()(await fT(t,t.config.apiHost,n,o),d)})}async function hT(t,e,n){t._canInitEmulator=!1;const s={...v4,...e};try{const i=new T4(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const r=await a.json();if("needConfirmation"in r)throw tu(t,"account-exists-with-different-credential",r);if(a.ok&&!("errorMessage"in r))return r;{const o=a.ok?r.errorMessage:r.error.message,[u,d]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tu(t,"credential-already-in-use",r);if(u==="EMAIL_EXISTS")throw tu(t,"email-already-in-use",r);if(u==="USER_DISABLED")throw tu(t,"user-disabled",r);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw uT(t,h,d);Wn(t,h)}}catch(i){if(i instanceof Ns)throw i;Wn(t,"network-request-failed",{message:String(i)})}}async function mc(t,e,n,s,i={}){const a=await oa(t,e,n,s,i);return"mfaPendingCredential"in a&&Wn(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function fT(t,e,n,s){const i=`${e}${n}?${s}`,a=t,r=a.config.emulator?Qg(t.config,i):`${t.config.apiScheme}://${i}`;return _4.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(r).toString():r}function E4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hs(this.auth,"network-request-failed")),w4.get())})}}function tu(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=hs(t,e,s);return i.customData._tokenResponse=n,i}function Fb(t){return t!==void 0&&t.enterprise!==void 0}class N4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return E4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function j4(t,e){return oa(t,"GET","/v2/recaptchaConfig",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function bd(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S4(t,e=!1){const n=$e(t),s=await n.getIdToken(e),i=Yg(s);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,r=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:xo(Bf(i.auth_time)),issuedAtTime:xo(Bf(i.iat)),expirationTime:xo(Bf(i.exp)),signInProvider:r||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bf(t){return Number(t)*1e3}function Yg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Nu("JWT malformed, contained fewer than 3 sections"),null;try{const i=W1(n);return i?JSON.parse(i):(Nu("Failed to decode base64 JWT payload"),null)}catch(i){return Nu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Hb(t){const e=Yg(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ns&&C4(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function C4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xo(this.lastLoginAt),this.creationTime=xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t){var m;const e=t.auth,n=await t.getIdToken(),s=await qo(t,bd(e,{idToken:n}));oe(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=(m=i.providerUserInfo)!=null&&m.length?mT(i.providerUserInfo):[],r=I4(t.providerData,a),o=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(r!=null&&r.length),d=o?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new up(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function k4(t){const e=$e(t);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I4(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function mT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e){const n=await hT(t,{},async()=>{const s=hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,r=await fT(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:o,body:s};return t.emulatorConfig&&ra(t.emulatorConfig.host)&&(u.credentials="include"),dT.fetch()(r,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function O4(t,e){return oa(t,"POST","/v2/accounts:revokeToken",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Hb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:a}=await D4(e,n);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:a}=n,r=new Vr;return s&&(oe(typeof s=="string","internal-error",{appName:e}),r.refreshToken=s),i&&(oe(typeof i=="string","internal-error",{appName:e}),r.accessToken=i),a&&(oe(typeof a=="number","internal-error",{appName:e}),r.expirationTime=a),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vr,this.toJSON())}_performRefresh(){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new R4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new up(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await qo(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return S4(this,e)}reload(){return k4(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(qs(this.auth));const e=await this.getIdToken();return await qo(this,A4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,r=n.photoURL??void 0,o=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:y,providerData:b,stsTokenManager:N}=n;oe(m&&N,e,"internal-error");const R=Vr.fromJSON(this.name,N);oe(typeof m=="string",e,"internal-error"),di(s,e.name),di(i,e.name),oe(typeof p=="boolean",e,"internal-error"),oe(typeof y=="boolean",e,"internal-error"),di(a,e.name),di(r,e.name),di(o,e.name),di(u,e.name),di(d,e.name),di(h,e.name);const w=new Xn({uid:m,auth:e,email:i,emailVerified:p,displayName:s,isAnonymous:y,photoURL:r,phoneNumber:a,tenantId:o,stsTokenManager:R,createdAt:d,lastLoginAt:h});return b&&Array.isArray(b)&&(w.providerData=b.map(_=>({..._}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(e,n,s=!1){const i=new Vr;i.updateFromServerResponse(n);const a=new Xn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await vd(a),a}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?mT(i.providerUserInfo):[],r=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Vr;o.updateFromIdToken(s);const u=new Xn({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:r}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new up(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new Map;function Ls(t){Xs(t instanceof Function,"Expected a class definition");let e=Gb.get(t);return e?(Xs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pT.type="NONE";const Kb=pT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t,e,n){return`firebase:${t}:${e}:${n}`}class Pr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=ju(this.userKey,i.apiKey,a),this.fullPersistenceKey=ju("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bd(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Pr(Ls(Kb),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Ls(Kb);const r=ju(s,e.config.apiKey,e.name);let o=null;for(const d of n)try{const h=await d._get(r);if(h){let m;if(typeof h=="string"){const p=await bd(e,{idToken:h}).catch(()=>{});if(!p)break;m=await Xn._fromGetAccountInfoResponse(e,p,h)}else m=Xn._fromJSON(e,h);d!==a&&(o=m),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Pr(a,e,s):(a=u[0],o&&await a._set(r,o.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(r)}catch{}})),new Pr(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_T(e))return"Blackberry";if(wT(e))return"Webos";if(yT(e))return"Safari";if((e.includes("chrome/")||xT(e))&&!e.includes("edge/"))return"Chrome";if(vT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function gT(t=Zt()){return/firefox\//i.test(t)}function yT(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xT(t=Zt()){return/crios\//i.test(t)}function bT(t=Zt()){return/iemobile/i.test(t)}function vT(t=Zt()){return/android/i.test(t)}function _T(t=Zt()){return/blackberry/i.test(t)}function wT(t=Zt()){return/webos/i.test(t)}function Xg(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M4(t=Zt()){var e;return Xg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function V4(){return Qk()&&document.documentMode===10}function ET(t=Zt()){return Xg(t)||vT(t)||wT(t)||_T(t)||/windows phone/i.test(t)||bT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e=[]){let n;switch(t){case"Browser":n=$b(Zt());break;case"Worker":n=`${$b(Zt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((r,o)=>{try{const u=e(a);r(u)}catch(u){o(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4(t,e={}){return oa(t,"GET","/v2/passwordPolicy",la(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=6;class z4{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??U4,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qb(this),this.idTokenSubscription=new Qb(this),this.beforeStateQueue=new P4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ls(n)),this._initializationPromise=this.queue(async()=>{var s,i,a;if(!this._deleted&&(this.persistenceManager=await Pr.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bd(this,{idToken:e}),s=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(En(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!r||r===o)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(qs(this));const n=e?$e(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L4(this),n=new z4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await O4(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ls(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Pr.create(this,[Ls(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let r=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(o,this,"internal-error"),o.then(()=>{r||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{r=!0,u()}}else{const u=e.addObserver(n);return()=>{r=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&g4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wa(t){return $e(t)}class Qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=nI(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q4(t){ch=t}function NT(t){return ch.loadJS(t)}function F4(){return ch.recaptchaEnterpriseScript}function H4(){return ch.gapiScript}function G4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class K4{constructor(){this.enterprise=new $4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class $4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Q4="recaptcha-enterprise",jT="NO_RECAPTCHA";class Y4{constructor(e){this.type=Q4,this.auth=Wa(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(r,o)=>{j4(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new N4(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,r(d.siteKey)}}).catch(u=>{o(u)})})}function i(a,r,o){const u=window.grecaptcha;Fb(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{r(d)}).catch(()=>{r(jT)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new K4().execute("siteKey",{action:"verify"}):new Promise((a,r)=>{s(this.auth).then(o=>{if(!n&&Fb(window.grecaptcha))i(o,a,r);else{if(typeof window>"u"){r(new Error("RecaptchaVerifier is only supported in browser"));return}let u=F4();u.length!==0&&(u+=o),NT(u).then(()=>{i(o,a,r)}).catch(d=>{r(d)})}}).catch(o=>{r(o)})})}}async function Yb(t,e,n,s=!1,i=!1){const a=new Y4(t);let r;if(i)r=jT;else try{r=await a.verify(n)}catch{r=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const u=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:r,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const u=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:r,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return s?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Xb(t,e,n,s,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Yb(t,e,n,n==="getOobCode");return s(t,r)}else return s(t,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Yb(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t,e){const n=oh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Pa(a,e??{}))return i;Wn(i,"already-initialized")}return n.initialize({options:e})}function W4(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Ls);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function AT(t,e,n){const s=Wa(t);oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,a=ST(e),{host:r,port:o}=J4(e),u=o===null?"":`:${o}`,d={url:`${a}//${r}${u}/`},h=Object.freeze({host:r,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),oe(Pa(d,s.config.emulator)&&Pa(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,ra(r)?(qg(`${a}//${r}${u}`),Fg("Auth",!0)):Z4()}function ST(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function J4(t){const e=ST(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:Wb(s.substr(a.length+1))}}else{const[a,r]=s.split(":");return{host:a,port:Wb(r)}}}function Wb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Z4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,n){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}async function eD(t,e){return oa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t,e){return mc(t,"POST","/v1/accounts:signInWithPassword",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e){return mc(t,"POST","/v1/accounts:signInWithEmailLink",la(t,e))}async function sD(t,e){return mc(t,"POST","/v1/accounts:signInWithEmailLink",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Wg{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Fo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Fo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xb(e,n,"signInWithPassword",tD);case"emailLink":return nD(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xb(e,s,"signUpPassword",eD);case"emailLink":return sD(e,{idToken:n,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(t,e){return mc(t,"POST","/v1/accounts:signInWithIdp",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="http://localhost";class Ua extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...a}=n;if(!s||!i)return null;const r=new Ua(s,i);return r.idToken=a.idToken||void 0,r.accessToken=a.accessToken||void 0,r.secret=a.secret,r.nonce=a.nonce,r.pendingToken=a.pendingToken||null,r}_getIdTokenResponse(e){const n=this.buildRequest();return Lr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Lr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lr(e,n)}buildRequest(){const e={requestUri:iD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rD(t){const e=Ql(Yl(t)).link,n=e?Ql(Yl(e)).deep_link_id:null,s=Ql(Yl(t)).deep_link_id;return(s?Ql(Yl(s)).link:null)||s||n||e||t}class Jg{constructor(e){const n=Ql(Yl(e)),s=n.apiKey??null,i=n.oobCode??null,a=aD(n.mode??null);oe(s&&i&&a,"argument-error"),this.apiKey=s,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=rD(e);try{return new Jg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,n){return Fo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Jg.parseLink(n);return oe(s,"argument-error"),Fo._fromEmailAndCode(e,s.code,s.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends CT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends pc{constructor(){super("facebook.com")}static credential(e){return Ua._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ua._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return bi.credential(n,s)}catch{return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends pc{constructor(){super("github.com")}static credential(e){return Ua._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends pc{constructor(){super("twitter.com")}static credential(e,n){return Ua._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return _i.credential(n,s)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const a=await Xn._fromIdTokenResponse(e,s,i),r=Jb(s);return new za({user:a,providerId:r,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Jb(s);return new za({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Jb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends Ns{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new _d(e,n,s,i)}}function RT(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(t,a,e,s):a})}async function lD(t,e,n=!1){const s=await qo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return za._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e,n=!1){const{auth:s}=t;if(En(s.app))return Promise.reject(qs(s));const i="reauthenticate";try{const a=await qo(t,RT(s,i,e,t),n);oe(a.idToken,s,"internal-error");const r=Yg(a.idToken);oe(r,s,"internal-error");const{sub:o}=r;return oe(t.uid===o,s,"user-mismatch"),za._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Wn(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(t,e,n=!1){if(En(t.app))return Promise.reject(qs(t));const s="signIn",i=await RT(t,s,e),a=await za._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(a.user),a}async function cD(t,e){return kT(Wa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e){return mc(t,"POST","/v1/accounts:signInWithCustomToken",la(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(t,e){if(En(t.app))return Promise.reject(qs(t));const n=Wa(t),s=await uD(n,{token:e,returnSecureToken:!0}),i=await za._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t){const e=Wa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function hD(t,e,n){return En(t.app)?Promise.reject(qs(t)):cD($e(t),ml.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&dD(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){return $e(t).setPersistence(e)}function DT(t,e,n,s){return $e(t).onIdTokenChanged(e,n,s)}function mD(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function Zg(t,e,n,s){return $e(t).onAuthStateChanged(e,n,s)}function OT(t){return $e(t).signOut()}const wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wd,"1"),this.storage.removeItem(wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=1e3,gD=10;class VT extends MT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ET(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((r,o,u)=>{this.notifyListeners(r,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const r=this.storage.getItem(s);!n&&this.localCache[s]===r||this.notifyListeners(s,r)},a=this.storage.getItem(s);V4()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gD):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},pD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VT.type="LOCAL";const PT=VT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends MT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LT.type="SESSION";const UT=LT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new uh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:a}=n.data,r=this.handlersMap[i];if(!(r!=null&&r.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const o=Array.from(r).map(async d=>d(n.origin,a)),u=await yD(o);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,r;return new Promise((o,u)=>{const d=e0("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);r={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{r&&this.removeMessageHandler(r)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(){return window}function bD(t){fs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof fs().WorkerGlobalScope<"u"&&typeof fs().importScripts=="function"}async function vD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _D(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wD(){return zT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="firebaseLocalStorageDb",ED=1,Ed="firebaseLocalStorage",qT="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dh(t,e){return t.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function TD(){const t=indexedDB.deleteDatabase(BT);return new gc(t).toPromise()}function dp(){const t=indexedDB.open(BT,ED);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ed,{keyPath:qT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ed)?e(s):(s.close(),await TD(),e(await dp()))})})}async function Zb(t,e,n){const s=dh(t,!0).put({[qT]:e,value:n});return new gc(s).toPromise()}async function ND(t,e){const n=dh(t,!1).get(e),s=await new gc(n).toPromise();return s===void 0?null:s.value}function ev(t,e){const n=dh(t,!0).delete(e);return new gc(n).toPromise()}const jD=800,AD=3;class FT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>AD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(wD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await vD(),!this.activeServiceWorker)return;this.sender=new xD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_D()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dp();return await Zb(e,wd,"1"),await ev(e,wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Zb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>ND(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ev(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=dh(i,!1).getAll();return new gc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FT.type="LOCAL";const SD=FT;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t,e){return e?Ls(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RD(t){return kT(t.auth,new t0(t),t.bypassAuthState)}function kD(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),oD(n,new t0(t),t.bypassAuthState)}async function ID(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),lD(n,new t0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:a,error:r,type:o}=e;if(r){this.reject(r);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RD;case"linkViaPopup":case"linkViaRedirect":return ID;case"reauthViaPopup":case"reauthViaRedirect":return kD;default:Wn(this.auth,"internal-error")}}resolve(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new fc(2e3,1e4);class jr extends HT{constructor(e,n,s,i,a){super(e,n,i,a),this.provider=s,this.authWindow=null,this.pollId=null,jr.currentPopupAction&&jr.currentPopupAction.cancel(),jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Xs(this.filter.length===1,"Popup operations only handle one event");const e=e0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DD.get())};e()}}jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="pendingRedirect",Au=new Map;class MD extends HT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Au.get(this.auth._key());if(!e){try{const s=await VD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Au.set(this.auth._key(),e)}return this.bypassAuthState||Au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VD(t,e){const n=UD(e),s=LD(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function PD(t,e){Au.set(t._key(),e)}function LD(t){return Ls(t._redirectPersistence)}function UD(t){return ju(OD,t.config.apiKey,t.name)}async function zD(t,e,n=!1){if(En(t.app))return Promise.reject(qs(t));const s=Wa(t),i=CD(s,e),r=await new MD(s,i,n).execute();return r&&!n&&(delete r.user._redirectEventId,await s._persistUserIfCurrent(r.user),await s._setRedirectUser(null,e)),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=10*60*1e3;class qD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!GT(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(hs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BD&&this.cachedEventUids.clear(),this.cachedEventUids.has(tv(e))}saveEventToCache(e){this.cachedEventUids.add(tv(e)),this.lastProcessedEventTime=Date.now()}}function tv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e={}){return oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KD=/^https?/;async function $D(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HD(t);for(const n of e)try{if(QD(n))return}catch{}Wn(t,"unauthorized-domain")}function QD(t){const e=cp(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return r.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&r.hostname===s}if(!KD.test(n))return!1;if(GD.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new fc(3e4,6e4);function nv(){const t=fs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XD(t){return new Promise((e,n)=>{var i,a,r;function s(){nv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nv(),n(hs(t,"network-request-failed"))},timeout:YD.get()})}if((a=(i=fs().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((r=fs().gapi)!=null&&r.load)s();else{const o=G4("iframefcb");return fs()[o]=()=>{gapi.load?s():n(hs(t,"network-request-failed"))},NT(`${H4()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Su=null,e})}let Su=null;function WD(t){return Su=Su||XD(t),Su}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new fc(5e3,15e3),ZD="__/auth/iframe",eO="emulator/auth/iframe",tO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sO(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qg(e,eO):`https://${t.config.authDomain}/${ZD}`,s={apiKey:e.apiKey,appName:t.name,v:Xa},i=nO.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${hc(s).slice(1)}`}async function iO(t){const e=await WD(t),n=fs().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:sO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tO,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const r=hs(t,"network-request-failed"),o=fs().setTimeout(()=>{a(r)},JD.get());function u(){fs().clearTimeout(o),i(s)}s.ping(u).then(u,()=>{a(r)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rO=500,lO=600,oO="_blank",cO="http://localhost";class sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uO(t,e,n,s=rO,i=lO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),r=Math.max((window.screen.availWidth-s)/2,0).toString();let o="";const u={...aO,width:s.toString(),height:i.toString(),top:a,left:r},d=Zt().toLowerCase();n&&(o=xT(d)?oO:n),gT(d)&&(e=e||cO,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[y,b])=>`${p}${y}=${b},`,"");if(M4(d)&&o!=="_self")return dO(e||"",o),new sv(null);const m=window.open(e||"",o,h);oe(m,t,"popup-blocked");try{m.focus()}catch{}return new sv(m)}function dO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="__/auth/handler",fO="emulator/auth/handler",mO=encodeURIComponent("fac");async function iv(t,e,n,s,i,a){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const r={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Xa,eventId:i};if(e instanceof CT){e.setDefaultLanguage(t.languageCode),r.providerId=e.providerId||"",tI(e.getCustomParameters())||(r.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))r[h]=m}if(e instanceof pc){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(r.scopes=h.join(","))}t.tenantId&&(r.tid=t.tenantId);const o=r;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const u=await t._getAppCheckToken(),d=u?`#${mO}=${encodeURIComponent(u)}`:"";return`${pO(t)}?${hc(o).slice(1)}${d}`}function pO({config:t}){return t.emulator?Qg(t,fO):`https://${t.authDomain}/${hO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="webStorageSupport";class gO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UT,this._completeRedirectFn=zD,this._overrideRedirectResult=PD}async _openPopup(e,n,s,i){var r;Xs((r=this.eventManagers[e._key()])==null?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await iv(e,n,s,cp(),i);return uO(e,a,e0())}async _openRedirect(e,n,s,i){await this._originValidation(e);const a=await iv(e,n,s,cp(),i);return bD(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Xs(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await iO(e),s=new qD(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qf,{type:qf},i=>{var r;const a=(r=i==null?void 0:i[0])==null?void 0:r[qf];a!==void 0&&n(!!a),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$D(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ET()||yT()||Xg()}}const yO=gO;var av="@firebase/auth",rv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vO(t){La(new Xi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:r,authDomain:o}=s.options;oe(r&&!r.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:r,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TT(t)},d=new B4(s,i,a,u);return W4(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),La(new Xi("auth-internal",e=>{const n=Wa(e.getProvider("auth").getImmediate());return(s=>new xO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(av,rv,bO(t)),ds(av,rv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=5*60,wO=tT("authIdTokenMaxAge")||_O;let lv=null;const EO=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>wO)return;const i=n==null?void 0:n.token;lv!==i&&(lv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function TO(t=Kg()){const e=oh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=X4(t,{popupRedirectResolver:yO,persistence:[SD,PT,UT]}),s=tT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const r=EO(a.toString());mD(n,r,()=>r(n.currentUser)),DT(n,o=>r(o))}}const i=J1("auth");return i&&AT(n,`http://${i}`),n}function NO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}q4({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=hs("internal-error");a.customData=i,n(a)},s.type="text/javascript",s.charset="UTF-8",NO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vO("Browser");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,KT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,x){function T(){}T.prototype=x.prototype,v.F=x.prototype,v.prototype=new T,v.prototype.constructor=v,v.D=function(C,k,D){for(var A=Array(arguments.length-2),de=2;de<arguments.length;de++)A[de-2]=arguments[de];return x.prototype[k].apply(C,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,x,T){T||(T=0);const C=Array(16);if(typeof x=="string")for(var k=0;k<16;++k)C[k]=x.charCodeAt(T++)|x.charCodeAt(T++)<<8|x.charCodeAt(T++)<<16|x.charCodeAt(T++)<<24;else for(k=0;k<16;++k)C[k]=x[T++]|x[T++]<<8|x[T++]<<16|x[T++]<<24;x=v.g[0],T=v.g[1],k=v.g[2];let D=v.g[3],A;A=x+(D^T&(k^D))+C[0]+3614090360&4294967295,x=T+(A<<7&4294967295|A>>>25),A=D+(k^x&(T^k))+C[1]+3905402710&4294967295,D=x+(A<<12&4294967295|A>>>20),A=k+(T^D&(x^T))+C[2]+606105819&4294967295,k=D+(A<<17&4294967295|A>>>15),A=T+(x^k&(D^x))+C[3]+3250441966&4294967295,T=k+(A<<22&4294967295|A>>>10),A=x+(D^T&(k^D))+C[4]+4118548399&4294967295,x=T+(A<<7&4294967295|A>>>25),A=D+(k^x&(T^k))+C[5]+1200080426&4294967295,D=x+(A<<12&4294967295|A>>>20),A=k+(T^D&(x^T))+C[6]+2821735955&4294967295,k=D+(A<<17&4294967295|A>>>15),A=T+(x^k&(D^x))+C[7]+4249261313&4294967295,T=k+(A<<22&4294967295|A>>>10),A=x+(D^T&(k^D))+C[8]+1770035416&4294967295,x=T+(A<<7&4294967295|A>>>25),A=D+(k^x&(T^k))+C[9]+2336552879&4294967295,D=x+(A<<12&4294967295|A>>>20),A=k+(T^D&(x^T))+C[10]+4294925233&4294967295,k=D+(A<<17&4294967295|A>>>15),A=T+(x^k&(D^x))+C[11]+2304563134&4294967295,T=k+(A<<22&4294967295|A>>>10),A=x+(D^T&(k^D))+C[12]+1804603682&4294967295,x=T+(A<<7&4294967295|A>>>25),A=D+(k^x&(T^k))+C[13]+4254626195&4294967295,D=x+(A<<12&4294967295|A>>>20),A=k+(T^D&(x^T))+C[14]+2792965006&4294967295,k=D+(A<<17&4294967295|A>>>15),A=T+(x^k&(D^x))+C[15]+1236535329&4294967295,T=k+(A<<22&4294967295|A>>>10),A=x+(k^D&(T^k))+C[1]+4129170786&4294967295,x=T+(A<<5&4294967295|A>>>27),A=D+(T^k&(x^T))+C[6]+3225465664&4294967295,D=x+(A<<9&4294967295|A>>>23),A=k+(x^T&(D^x))+C[11]+643717713&4294967295,k=D+(A<<14&4294967295|A>>>18),A=T+(D^x&(k^D))+C[0]+3921069994&4294967295,T=k+(A<<20&4294967295|A>>>12),A=x+(k^D&(T^k))+C[5]+3593408605&4294967295,x=T+(A<<5&4294967295|A>>>27),A=D+(T^k&(x^T))+C[10]+38016083&4294967295,D=x+(A<<9&4294967295|A>>>23),A=k+(x^T&(D^x))+C[15]+3634488961&4294967295,k=D+(A<<14&4294967295|A>>>18),A=T+(D^x&(k^D))+C[4]+3889429448&4294967295,T=k+(A<<20&4294967295|A>>>12),A=x+(k^D&(T^k))+C[9]+568446438&4294967295,x=T+(A<<5&4294967295|A>>>27),A=D+(T^k&(x^T))+C[14]+3275163606&4294967295,D=x+(A<<9&4294967295|A>>>23),A=k+(x^T&(D^x))+C[3]+4107603335&4294967295,k=D+(A<<14&4294967295|A>>>18),A=T+(D^x&(k^D))+C[8]+1163531501&4294967295,T=k+(A<<20&4294967295|A>>>12),A=x+(k^D&(T^k))+C[13]+2850285829&4294967295,x=T+(A<<5&4294967295|A>>>27),A=D+(T^k&(x^T))+C[2]+4243563512&4294967295,D=x+(A<<9&4294967295|A>>>23),A=k+(x^T&(D^x))+C[7]+1735328473&4294967295,k=D+(A<<14&4294967295|A>>>18),A=T+(D^x&(k^D))+C[12]+2368359562&4294967295,T=k+(A<<20&4294967295|A>>>12),A=x+(T^k^D)+C[5]+4294588738&4294967295,x=T+(A<<4&4294967295|A>>>28),A=D+(x^T^k)+C[8]+2272392833&4294967295,D=x+(A<<11&4294967295|A>>>21),A=k+(D^x^T)+C[11]+1839030562&4294967295,k=D+(A<<16&4294967295|A>>>16),A=T+(k^D^x)+C[14]+4259657740&4294967295,T=k+(A<<23&4294967295|A>>>9),A=x+(T^k^D)+C[1]+2763975236&4294967295,x=T+(A<<4&4294967295|A>>>28),A=D+(x^T^k)+C[4]+1272893353&4294967295,D=x+(A<<11&4294967295|A>>>21),A=k+(D^x^T)+C[7]+4139469664&4294967295,k=D+(A<<16&4294967295|A>>>16),A=T+(k^D^x)+C[10]+3200236656&4294967295,T=k+(A<<23&4294967295|A>>>9),A=x+(T^k^D)+C[13]+681279174&4294967295,x=T+(A<<4&4294967295|A>>>28),A=D+(x^T^k)+C[0]+3936430074&4294967295,D=x+(A<<11&4294967295|A>>>21),A=k+(D^x^T)+C[3]+3572445317&4294967295,k=D+(A<<16&4294967295|A>>>16),A=T+(k^D^x)+C[6]+76029189&4294967295,T=k+(A<<23&4294967295|A>>>9),A=x+(T^k^D)+C[9]+3654602809&4294967295,x=T+(A<<4&4294967295|A>>>28),A=D+(x^T^k)+C[12]+3873151461&4294967295,D=x+(A<<11&4294967295|A>>>21),A=k+(D^x^T)+C[15]+530742520&4294967295,k=D+(A<<16&4294967295|A>>>16),A=T+(k^D^x)+C[2]+3299628645&4294967295,T=k+(A<<23&4294967295|A>>>9),A=x+(k^(T|~D))+C[0]+4096336452&4294967295,x=T+(A<<6&4294967295|A>>>26),A=D+(T^(x|~k))+C[7]+1126891415&4294967295,D=x+(A<<10&4294967295|A>>>22),A=k+(x^(D|~T))+C[14]+2878612391&4294967295,k=D+(A<<15&4294967295|A>>>17),A=T+(D^(k|~x))+C[5]+4237533241&4294967295,T=k+(A<<21&4294967295|A>>>11),A=x+(k^(T|~D))+C[12]+1700485571&4294967295,x=T+(A<<6&4294967295|A>>>26),A=D+(T^(x|~k))+C[3]+2399980690&4294967295,D=x+(A<<10&4294967295|A>>>22),A=k+(x^(D|~T))+C[10]+4293915773&4294967295,k=D+(A<<15&4294967295|A>>>17),A=T+(D^(k|~x))+C[1]+2240044497&4294967295,T=k+(A<<21&4294967295|A>>>11),A=x+(k^(T|~D))+C[8]+1873313359&4294967295,x=T+(A<<6&4294967295|A>>>26),A=D+(T^(x|~k))+C[15]+4264355552&4294967295,D=x+(A<<10&4294967295|A>>>22),A=k+(x^(D|~T))+C[6]+2734768916&4294967295,k=D+(A<<15&4294967295|A>>>17),A=T+(D^(k|~x))+C[13]+1309151649&4294967295,T=k+(A<<21&4294967295|A>>>11),A=x+(k^(T|~D))+C[4]+4149444226&4294967295,x=T+(A<<6&4294967295|A>>>26),A=D+(T^(x|~k))+C[11]+3174756917&4294967295,D=x+(A<<10&4294967295|A>>>22),A=k+(x^(D|~T))+C[2]+718787259&4294967295,k=D+(A<<15&4294967295|A>>>17),A=T+(D^(k|~x))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+x&4294967295,v.g[1]=v.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+k&4294967295,v.g[3]=v.g[3]+D&4294967295}s.prototype.v=function(v,x){x===void 0&&(x=v.length);const T=x-this.blockSize,C=this.C;let k=this.h,D=0;for(;D<x;){if(k==0)for(;D<=T;)i(this,v,D),D+=this.blockSize;if(typeof v=="string"){for(;D<x;)if(C[k++]=v.charCodeAt(D++),k==this.blockSize){i(this,C),k=0;break}}else for(;D<x;)if(C[k++]=v[D++],k==this.blockSize){i(this,C),k=0;break}}this.h=k,this.o+=x},s.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var x=1;x<v.length-8;++x)v[x]=0;x=this.o*8;for(var T=v.length-8;T<v.length;++T)v[T]=x&255,x/=256;for(this.v(v),v=Array(16),x=0,T=0;T<4;++T)for(let C=0;C<32;C+=8)v[x++]=this.g[T]>>>C&255;return v};function a(v,x){var T=o;return Object.prototype.hasOwnProperty.call(T,v)?T[v]:T[v]=x(v)}function r(v,x){this.h=x;const T=[];let C=!0;for(let k=v.length-1;k>=0;k--){const D=v[k]|0;C&&D==x||(T[k]=D,C=!1)}this.g=T}var o={};function u(v){return-128<=v&&v<128?a(v,function(x){return new r([x|0],x<0?-1:0)}):new r([v|0],v<0?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(v<0)return R(d(-v));const x=[];let T=1;for(let C=0;v>=T;C++)x[C]=v/T|0,T*=4294967296;return new r(x,0)}function h(v,x){if(v.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(v.charAt(0)=="-")return R(h(v.substring(1),x));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(x,8));let C=m;for(let D=0;D<v.length;D+=8){var k=Math.min(8,v.length-D);const A=parseInt(v.substring(D,D+k),x);k<8?(k=d(Math.pow(x,k)),C=C.j(k).add(d(A))):(C=C.j(T),C=C.add(d(A)))}return C}var m=u(0),p=u(1),y=u(16777216);t=r.prototype,t.m=function(){if(N(this))return-R(this).m();let v=0,x=1;for(let T=0;T<this.g.length;T++){const C=this.i(T);v+=(C>=0?C:4294967296+C)*x,x*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(b(this))return"0";if(N(this))return"-"+R(this).toString(v);const x=d(Math.pow(v,6));var T=this;let C="";for(;;){const k=I(T,x).g;T=w(T,k.j(x));let D=((T.g.length>0?T.g[0]:T.h)>>>0).toString(v);if(T=k,b(T))return D+C;for(;D.length<6;)D="0"+D;C=D+C}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function b(v){if(v.h!=0)return!1;for(let x=0;x<v.g.length;x++)if(v.g[x]!=0)return!1;return!0}function N(v){return v.h==-1}t.l=function(v){return v=w(this,v),N(v)?-1:b(v)?0:1};function R(v){const x=v.g.length,T=[];for(let C=0;C<x;C++)T[C]=~v.g[C];return new r(T,~v.h).add(p)}t.abs=function(){return N(this)?R(this):this},t.add=function(v){const x=Math.max(this.g.length,v.g.length),T=[];let C=0;for(let k=0;k<=x;k++){let D=C+(this.i(k)&65535)+(v.i(k)&65535),A=(D>>>16)+(this.i(k)>>>16)+(v.i(k)>>>16);C=A>>>16,D&=65535,A&=65535,T[k]=A<<16|D}return new r(T,T[T.length-1]&-2147483648?-1:0)};function w(v,x){return v.add(R(x))}t.j=function(v){if(b(this)||b(v))return m;if(N(this))return N(v)?R(this).j(R(v)):R(R(this).j(v));if(N(v))return R(this.j(R(v)));if(this.l(y)<0&&v.l(y)<0)return d(this.m()*v.m());const x=this.g.length+v.g.length,T=[];for(var C=0;C<2*x;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(let k=0;k<v.g.length;k++){const D=this.i(C)>>>16,A=this.i(C)&65535,de=v.i(k)>>>16,G=v.i(k)&65535;T[2*C+2*k]+=A*G,_(T,2*C+2*k),T[2*C+2*k+1]+=D*G,_(T,2*C+2*k+1),T[2*C+2*k+1]+=A*de,_(T,2*C+2*k+1),T[2*C+2*k+2]+=D*de,_(T,2*C+2*k+2)}for(v=0;v<x;v++)T[v]=T[2*v+1]<<16|T[2*v];for(v=x;v<2*x;v++)T[v]=0;return new r(T,0)};function _(v,x){for(;(v[x]&65535)!=v[x];)v[x+1]+=v[x]>>>16,v[x]&=65535,x++}function E(v,x){this.g=v,this.h=x}function I(v,x){if(b(x))throw Error("division by zero");if(b(v))return new E(m,m);if(N(v))return x=I(R(v),x),new E(R(x.g),R(x.h));if(N(x))return x=I(v,R(x)),new E(R(x.g),x.h);if(v.g.length>30){if(N(v)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var T=p,C=x;C.l(v)<=0;)T=M(T),C=M(C);var k=L(T,1),D=L(C,1);for(C=L(C,2),T=L(T,2);!b(C);){var A=D.add(C);A.l(v)<=0&&(k=k.add(T),D=A),C=L(C,1),T=L(T,1)}return x=w(v,k.j(x)),new E(k,x)}for(k=m;v.l(x)>=0;){for(T=Math.max(1,Math.floor(v.m()/x.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),D=d(T),A=D.j(x);N(A)||A.l(v)>0;)T-=C,D=d(T),A=D.j(x);b(D)&&(D=p),k=k.add(D),v=w(v,A)}return new E(k,v)}t.B=function(v){return I(this,v).h},t.and=function(v){const x=Math.max(this.g.length,v.g.length),T=[];for(let C=0;C<x;C++)T[C]=this.i(C)&v.i(C);return new r(T,this.h&v.h)},t.or=function(v){const x=Math.max(this.g.length,v.g.length),T=[];for(let C=0;C<x;C++)T[C]=this.i(C)|v.i(C);return new r(T,this.h|v.h)},t.xor=function(v){const x=Math.max(this.g.length,v.g.length),T=[];for(let C=0;C<x;C++)T[C]=this.i(C)^v.i(C);return new r(T,this.h^v.h)};function M(v){const x=v.g.length+1,T=[];for(let C=0;C<x;C++)T[C]=v.i(C)<<1|v.i(C-1)>>>31;return new r(T,v.h)}function L(v,x){const T=x>>5;x%=32;const C=v.g.length-T,k=[];for(let D=0;D<C;D++)k[D]=x>0?v.i(D+T)>>>x|v.i(D+T+1)<<32-x:v.i(D+T);return new r(k,v.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,KT=s,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=d,r.fromString=h,Hi=r}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $T,Xl,QT,Cu,hp,YT,XT,WT;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof nu=="object"&&nu];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function i(c,f){if(f)e:{var g=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var O=c[S];if(!(O in g))break e;g=g[O]}c=c[c.length-1],S=g[c],f=f(S),f!=S&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(f){var g=[],S;for(S in f)Object.prototype.hasOwnProperty.call(f,S)&&g.push([S,f[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},r=this||self;function o(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function u(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){return d=u,d.apply(null,arguments)}function h(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function m(c,f){function g(){}g.prototype=f.prototype,c.Z=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(S,O,P){for(var X=Array(arguments.length-2),we=2;we<arguments.length;we++)X[we-2]=arguments[we];return f.prototype[O].apply(S,X)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){const f=c.length;if(f>0){const g=Array(f);for(let S=0;S<f;S++)g[S]=c[S];return g}return[]}function b(c,f){for(let S=1;S<arguments.length;S++){const O=arguments[S];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=c.length||0;const P=O.length||0;c.length=g+P;for(let X=0;X<P;X++)c[g+X]=O[X]}else c.push(O)}}class N{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function R(c){r.setTimeout(()=>{throw c},0)}function w(){var c=v;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class _{constructor(){this.h=this.g=null}add(f,g){const S=E.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var E=new N(()=>new I,c=>c.reset());class I{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let M,L=!1,v=new _,x=()=>{const c=Promise.resolve(void 0);M=()=>{c.then(T)}};function T(){for(var c;c=w();){try{c.h.call(c.g)}catch(g){R(g)}var f=E;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};r.addEventListener("test",g,f),r.removeEventListener("test",g,f)}catch{}return c}();function A(c){return/^[\s\xa0]*$/.test(c)}function de(c,f){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}m(de,k),de.prototype.init=function(c,f){const g=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),V=0;function Q(c,f,g,S,O){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=O,this.key=++V,this.da=this.fa=!1}function q(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ie(c,f,g){for(const S in c)f.call(g,c[S],S,c)}function ye(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function qe(c){const f={};for(const g in c)f[g]=c[g];return f}const st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function at(c,f){let g,S;for(let O=1;O<arguments.length;O++){S=arguments[O];for(g in S)c[g]=S[g];for(let P=0;P<st.length;P++)g=st[P],Object.prototype.hasOwnProperty.call(S,g)&&(c[g]=S[g])}}function K(c){this.src=c,this.g={},this.h=0}K.prototype.add=function(c,f,g,S,O){const P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);const X=Y(c,f,S,O);return X>-1?(f=c[X],g||(f.fa=!1)):(f=new Q(f,this.src,P,!!S,O),f.fa=g,c.push(f)),f};function W(c,f){const g=f.type;if(g in c.g){var S=c.g[g],O=Array.prototype.indexOf.call(S,f,void 0),P;(P=O>=0)&&Array.prototype.splice.call(S,O,1),P&&(q(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Y(c,f,g,S){for(let O=0;O<c.length;++O){const P=c[O];if(!P.da&&P.listener==f&&P.capture==!!g&&P.ha==S)return O}return-1}var re="closure_lm_"+(Math.random()*1e6|0),xe={};function ve(c,f,g,S,O){if(Array.isArray(f)){for(let P=0;P<f.length;P++)ve(c,f[P],g,S,O);return null}return g=Vt(g),c&&c[G]?c.J(f,g,o(S)?!!S.capture:!1,O):Qe(c,f,g,!1,S,O)}function Qe(c,f,g,S,O,P){if(!f)throw Error("Invalid event type");const X=o(O)?!!O.capture:!!O;let we=le(c);if(we||(c[re]=we=new K(c)),g=we.add(f,g,S,X,P),g.proxy)return g;if(S=ts(),g.proxy=S,S.src=c,S.listener=g,c.addEventListener)D||(O=X),O===void 0&&(O=!1),c.addEventListener(f.toString(),S,O);else if(c.attachEvent)c.attachEvent(ee(f.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ts(){function c(g){return f.call(c.src,c.listener,g)}const f=Z;return c}function ns(c,f,g,S,O){if(Array.isArray(f))for(var P=0;P<f.length;P++)ns(c,f[P],g,S,O);else S=o(S)?!!S.capture:!!S,g=Vt(g),c&&c[G]?(c=c.i,P=String(f).toString(),P in c.g&&(f=c.g[P],g=Y(f,g,S,O),g>-1&&(q(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete c.g[P],c.h--)))):c&&(c=le(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Y(f,g,S,O)),(g=c>-1?f[c]:null)&&F(g))}function F(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[G])W(f.i,c);else{var g=c.type,S=c.proxy;f.removeEventListener?f.removeEventListener(g,S,c.capture):f.detachEvent?f.detachEvent(ee(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=le(f))?(W(g,c),g.h==0&&(g.src=null,f[re]=null)):q(c)}}}function ee(c){return c in xe?xe[c]:xe[c]="on"+c}function Z(c,f){if(c.da)c=!0;else{f=new de(f,this);const g=c.listener,S=c.ha||c.src;c.fa&&F(c),c=g.call(S,f)}return c}function le(c){return c=c[re],c instanceof K?c:null}var gt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vt(c){return typeof c=="function"?c:(c[gt]||(c[gt]=function(f){return c.handleEvent(f)}),c[gt])}function se(){C.call(this),this.i=new K(this),this.M=this,this.G=null}m(se,C),se.prototype[G]=!0,se.prototype.removeEventListener=function(c,f,g,S){ns(this,c,f,g,S)};function Le(c,f){var g,S=c.G;if(S)for(g=[];S;S=S.G)g.push(S);if(c=c.M,S=f.type||f,typeof f=="string")f=new k(f,c);else if(f instanceof k)f.target=f.target||c;else{var O=f;f=new k(S,c),at(f,O)}O=!0;let P,X;if(g)for(X=g.length-1;X>=0;X--)P=f.g=g[X],O=Kt(P,S,!0,f)&&O;if(P=f.g=c,O=Kt(P,S,!0,f)&&O,O=Kt(P,S,!1,f)&&O,g)for(X=0;X<g.length;X++)P=f.g=g[X],O=Kt(P,S,!1,f)&&O}se.prototype.N=function(){if(se.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const g=c.g[f];for(let S=0;S<g.length;S++)q(g[S]);delete c.g[f],c.h--}}this.G=null},se.prototype.J=function(c,f,g,S){return this.i.add(String(c),f,!1,g,S)},se.prototype.K=function(c,f,g,S){return this.i.add(String(c),f,!0,g,S)};function Kt(c,f,g,S){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let P=0;P<f.length;++P){const X=f[P];if(X&&!X.da&&X.capture==g){const we=X.listener,At=X.ha||X.src;X.fa&&W(c.i,X),O=we.call(At,S)!==!1&&O}}return O&&!S.defaultPrevented}function ha(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:r.setTimeout(c,f||0)}function si(c){c.g=ha(()=>{c.g=null,c.i&&(c.i=!1,si(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class H extends C{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:si(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(c){C.call(this),this.h=c,this.g={}}m(ne,C);var he=[];function Te(c){ie(c.g,function(f,g){this.g.hasOwnProperty(g)&&F(f)},c),c.g={}}ne.prototype.N=function(){ne.Z.N.call(this),Te(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cn=r.JSON.stringify,Kn=r.JSON.parse,er=class{stringify(c){return r.JSON.stringify(c,void 0)}parse(c){return r.JSON.parse(c,void 0)}};function $(){}function fe(){}var ke={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){k.call(this,"d")}m($t,k);function $n(){k.call(this,"c")}m($n,k);var Qt={},tr=null;function Sc(){return tr=tr||new se}Qt.Ia="serverreachability";function Z0(c){k.call(this,Qt.Ia,c)}m(Z0,k);function vl(c){const f=Sc();Le(f,new Z0(f))}Qt.STAT_EVENT="statevent";function ey(c,f){k.call(this,Qt.STAT_EVENT,c),this.stat=f}m(ey,k);function en(c){const f=Sc();Le(f,new ey(f,c))}Qt.Ja="timingevent";function ty(c,f){k.call(this,Qt.Ja,c),this.size=f}m(ty,k);function _l(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){c()},f)}function wl(){this.g=!0}wl.prototype.ua=function(){this.g=!1};function Z2(c,f,g,S,O,P){c.info(function(){if(c.g)if(P){var X="",we=P.split("&");for(let Ge=0;Ge<we.length;Ge++){var At=we[Ge].split("=");if(At.length>1){const kt=At[0];At=At[1];const is=kt.split("_");X=is.length>=2&&is[1]=="type"?X+(kt+"="+At+"&"):X+(kt+"=redacted&")}}}else X=null;else X=P;return"XMLHTTP REQ ("+S+") [attempt "+O+"]: "+f+`
`+g+`
`+X})}function ej(c,f,g,S,O,P,X){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+O+"]: "+f+`
`+g+`
`+P+" "+X})}function nr(c,f,g,S){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+nj(c,g)+(S?" "+S:"")})}function tj(c,f){c.info(function(){return"TIMEOUT: "+f})}wl.prototype.info=function(){};function nj(c,f){if(!c.g)return f;if(!f)return null;try{const P=JSON.parse(f);if(P){for(c=0;c<P.length;c++)if(Array.isArray(P[c])){var g=P[c];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var O=S[0];if(O!="noop"&&O!="stop"&&O!="close")for(let X=1;X<S.length;X++)S[X]=""}}}}return cn(P)}catch{return f}}var Cc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ny={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sy;function Vh(){}m(Vh,$),Vh.prototype.g=function(){return new XMLHttpRequest},sy=new Vh;function El(c){return encodeURIComponent(String(c))}function sj(c){var f=1;c=c.split(":");const g=[];for(;f>0&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function ii(c,f,g,S){this.j=c,this.i=f,this.l=g,this.S=S||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new iy}function iy(){this.i=null,this.g="",this.h=!1}var ay={},Ph={};function Lh(c,f,g){c.M=1,c.A=kc(ss(f)),c.u=g,c.R=!0,ry(c,null)}function ry(c,f){c.F=Date.now(),Rc(c),c.B=ss(c.A);var g=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),by(g.i,"t",S),c.C=0,g=c.j.L,c.h=new iy,c.g=Py(c.j,g?f:null,!c.u),c.P>0&&(c.O=new H(d(c.Y,c,c.g),c.P)),f=c.V,g=c.g,S=c.ba;var O="readystatechange";Array.isArray(O)||(O&&(he[0]=O.toString()),O=he);for(let P=0;P<O.length;P++){const X=ve(g,O[P],S||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=c.J?qe(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),vl(),Z2(c.i,c.v,c.B,c.l,c.S,c.u)}ii.prototype.ba=function(c){c=c.target;const f=this.O;f&&li(c)==3?f.j():this.Y(c)},ii.prototype.Y=function(c){try{if(c==this.g)e:{const we=li(this.g),At=this.g.ya(),Ge=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||jy(this.g)))){this.K||we!=4||At==7||(At==8||Ge<=0?vl(3):vl(2)),Uh(this);var f=this.g.ca();this.X=f;var g=ij(this);if(this.o=f==200,ej(this.i,this.v,this.B,this.l,this.S,we,f),this.o){if(this.U&&!this.L){t:{if(this.g){var S,O=this.g;if((S=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var P=S;break t}}P=null}if(c=P)nr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zh(this,c);else{this.o=!1,this.m=3,en(12),fa(this),Tl(this);break e}}if(this.R){c=!0;let kt;for(;!this.K&&this.C<g.length;)if(kt=aj(this,g),kt==Ph){we==4&&(this.m=4,en(14),c=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==ay){this.m=4,en(15),nr(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else nr(this.i,this.l,kt,null),zh(this,kt);if(ly(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||g.length!=0||this.h.h||(this.m=1,en(16),c=!1),this.o=this.o&&c,!c)nr(this.i,this.l,g,"[Invalid Chunked Response]"),fa(this),Tl(this);else if(g.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Qh(X),X.P=!0,en(11))}}else nr(this.i,this.l,g,null),zh(this,g);we==4&&fa(this),this.o&&!this.K&&(we==4?Dy(this.j,this):(this.o=!1,Rc(this)))}else bj(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,en(12)):(this.m=0,en(13)),fa(this),Tl(this)}}}catch{}finally{}};function ij(c){if(!ly(c))return c.g.la();const f=jy(c.g);if(f==="")return"";let g="";const S=f.length,O=li(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return fa(c),Tl(c),"";c.h.i=new r.TextDecoder}for(let P=0;P<S;P++)c.h.h=!0,g+=c.h.i.decode(f[P],{stream:!(O&&P==S-1)});return f.length=0,c.h.g+=g,c.C=0,c.h.g}function ly(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function aj(c,f){var g=c.C,S=f.indexOf(`
`,g);return S==-1?Ph:(g=Number(f.substring(g,S)),isNaN(g)?ay:(S+=1,S+g>f.length?Ph:(f=f.slice(S,S+g),c.C=S+g,f)))}ii.prototype.cancel=function(){this.K=!0,fa(this)};function Rc(c){c.T=Date.now()+c.H,oy(c,c.H)}function oy(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=_l(d(c.aa,c),f)}function Uh(c){c.D&&(r.clearTimeout(c.D),c.D=null)}ii.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(tj(this.i,this.B),this.M!=2&&(vl(),en(17)),fa(this),this.m=2,Tl(this)):oy(this,this.T-c)};function Tl(c){c.j.I==0||c.K||Dy(c.j,c)}function fa(c){Uh(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,Te(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function zh(c,f){try{var g=c.j;if(g.I!=0&&(g.g==c||Bh(g.h,c))){if(!c.L&&Bh(g.h,c)&&g.I==3){try{var S=g.Ba.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var O=S;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)Vc(g),Oc(g);else break e;$h(g),en(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=_l(d(g.Va,g),6e3));dy(g.h)<=1&&g.ta&&(g.ta=void 0)}else pa(g,11)}else if((c.L||g.g==c)&&Vc(g),!A(f))for(O=g.Ba.g.parse(f),f=0;f<O.length;f++){let Ge=O[f];const kt=Ge[0];if(!(kt<=g.K))if(g.K=kt,Ge=Ge[1],g.I==2)if(Ge[0]=="c"){g.M=Ge[1],g.ba=Ge[2];const is=Ge[3];is!=null&&(g.ka=is,g.j.info("VER="+g.ka));const ga=Ge[4];ga!=null&&(g.za=ga,g.j.info("SVER="+g.za));const oi=Ge[5];oi!=null&&typeof oi=="number"&&oi>0&&(S=1.5*oi,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const ci=c.g;if(ci){const Lc=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lc){var P=S.h;P.g||Lc.indexOf("spdy")==-1&&Lc.indexOf("quic")==-1&&Lc.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(qh(P,P.h),P.h=null))}if(S.G){const Yh=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Yh&&(S.wa=Yh,We(S.J,S.G,Yh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var X=c;if(S.na=Vy(S,S.L?S.ba:null,S.W),X.L){hy(S.h,X);var we=X,At=S.O;At&&(we.H=At),we.D&&(Uh(we),Rc(we)),S.g=X}else ky(S);g.i.length>0&&Mc(g)}else Ge[0]!="stop"&&Ge[0]!="close"||pa(g,7);else g.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?pa(g,7):Kh(g):Ge[0]!="noop"&&g.l&&g.l.qa(Ge),g.A=0)}}vl(4)}catch{}}var rj=class{constructor(c,f){this.g=c,this.map=f}};function cy(c){this.l=c||10,r.PerformanceNavigationTiming?(c=r.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uy(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function dy(c){return c.h?1:c.g?c.g.size:0}function Bh(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function qh(c,f){c.g?c.g.add(f):c.h=f}function hy(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}cy.prototype.cancel=function(){if(this.i=fy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function fy(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.G);return f}return y(c.i)}var my=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lj(c,f){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const S=c[g].indexOf("=");let O,P=null;S>=0?(O=c[g].substring(0,S),P=c[g].substring(S+1)):O=c[g],f(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function ai(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof ai?(this.l=c.l,Nl(this,c.j),this.o=c.o,this.g=c.g,jl(this,c.u),this.h=c.h,Fh(this,vy(c.i)),this.m=c.m):c&&(f=String(c).match(my))?(this.l=!1,Nl(this,f[1]||"",!0),this.o=Al(f[2]||""),this.g=Al(f[3]||"",!0),jl(this,f[4]),this.h=Al(f[5]||"",!0),Fh(this,f[6]||"",!0),this.m=Al(f[7]||"")):(this.l=!1,this.i=new Cl(null,this.l))}ai.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(Sl(f,py,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Sl(f,py,!0),"@"),c.push(El(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Sl(g,g.charAt(0)=="/"?uj:cj,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Sl(g,hj)),c.join("")},ai.prototype.resolve=function(c){const f=ss(this);let g=!!c.j;g?Nl(f,c.j):g=!!c.o,g?f.o=c.o:g=!!c.g,g?f.g=c.g:g=c.u!=null;var S=c.h;if(g)jl(f,c.u);else if(g=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var O=f.h.lastIndexOf("/");O!=-1&&(S=f.h.slice(0,O+1)+S)}if(O=S,O==".."||O==".")S="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){S=O.lastIndexOf("/",0)==0,O=O.split("/");const P=[];for(let X=0;X<O.length;){const we=O[X++];we=="."?S&&X==O.length&&P.push(""):we==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),S&&X==O.length&&P.push("")):(P.push(we),S=!0)}S=P.join("/")}else S=O}return g?f.h=S:g=c.i.toString()!=="",g?Fh(f,vy(c.i)):g=!!c.m,g&&(f.m=c.m),f};function ss(c){return new ai(c)}function Nl(c,f,g){c.j=g?Al(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function jl(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function Fh(c,f,g){f instanceof Cl?(c.i=f,fj(c.i,c.l)):(g||(f=Sl(f,dj)),c.i=new Cl(f,c.l))}function We(c,f,g){c.i.set(f,g)}function kc(c){return We(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Al(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Sl(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,oj),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function oj(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var py=/[#\/\?@]/g,cj=/[#\?:]/g,uj=/[#\?]/g,dj=/[#\?@]/g,hj=/#/g;function Cl(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ma(c){c.g||(c.g=new Map,c.h=0,c.i&&lj(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Cl.prototype,t.add=function(c,f){ma(this),this.i=null,c=sr(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function gy(c,f){ma(c),f=sr(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function yy(c,f){return ma(c),f=sr(c,f),c.g.has(f)}t.forEach=function(c,f){ma(this),this.g.forEach(function(g,S){g.forEach(function(O){c.call(f,O,S,this)},this)},this)};function xy(c,f){ma(c);let g=[];if(typeof f=="string")yy(c,f)&&(g=g.concat(c.g.get(sr(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)g=g.concat(c[f]);return g}t.set=function(c,f){return ma(this),this.i=null,c=sr(this,c),yy(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=xy(this,c),c.length>0?String(c[0]):f):f};function by(c,f,g){gy(c,f),g.length>0&&(c.i=null,c.g.set(sr(c,f),y(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let S=0;S<f.length;S++){var g=f[S];const O=El(g);g=xy(this,g);for(let P=0;P<g.length;P++){let X=O;g[P]!==""&&(X+="="+El(g[P])),c.push(X)}}return this.i=c.join("&")};function vy(c){const f=new Cl;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function sr(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function fj(c,f){f&&!c.j&&(ma(c),c.i=null,c.g.forEach(function(g,S){const O=S.toLowerCase();S!=O&&(gy(this,S),by(this,O,g))},c)),c.j=f}function mj(c,f){const g=new wl;if(r.Image){const S=new Image;S.onload=h(ri,g,"TestLoadImage: loaded",!0,f,S),S.onerror=h(ri,g,"TestLoadImage: error",!1,f,S),S.onabort=h(ri,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=h(ri,g,"TestLoadImage: timeout",!1,f,S),r.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else f(!1)}function pj(c,f){const g=new wl,S=new AbortController,O=setTimeout(()=>{S.abort(),ri(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:S.signal}).then(P=>{clearTimeout(O),P.ok?ri(g,"TestPingServer: ok",!0,f):ri(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ri(g,"TestPingServer: error",!1,f)})}function ri(c,f,g,S,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),S(g)}catch{}}function gj(){this.g=new er}function Hh(c){this.i=c.Sb||null,this.h=c.ab||!1}m(Hh,$),Hh.prototype.g=function(){return new Ic(this.i,this.h)};function Ic(c,f){se.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ic,se),t=Ic.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,kl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||r).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rl(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,kl(this)),this.g&&(this.readyState=3,kl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof r.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_y(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function _y(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Rl(this):kl(this),this.readyState==3&&_y(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Rl(this))},t.Na=function(c){this.g&&(this.response=c,Rl(this))},t.ga=function(){this.g&&Rl(this)};function Rl(c){c.readyState=4,c.l=null,c.j=null,c.B=null,kl(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function kl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wy(c){let f="";return ie(c,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Gh(c,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=wy(g),typeof c=="string"?g!=null&&El(g):We(c,f,g))}function ct(c){se.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ct,se);var yj=/^https?$/i,xj=["POST","PUT"];t=ct.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sy.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(P){Ey(this,P);return}if(c=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var O in S)g.set(O,S[O]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const P of S.keys())g.set(P,S.get(P));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(P=>P.toLowerCase()=="content-type"),O=r.FormData&&c instanceof r.FormData,!(Array.prototype.indexOf.call(xj,f,void 0)>=0)||S||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,X]of g)this.g.setRequestHeader(P,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(P){Ey(this,P)}};function Ey(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,Ty(c),Dc(c)}function Ty(c){c.A||(c.A=!0,Le(c,"complete"),Le(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Le(this,"complete"),Le(this,"abort"),Dc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dc(this,!0)),ct.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ny(this):this.Xa())},t.Xa=function(){Ny(this)};function Ny(c){if(c.h&&typeof a<"u"){if(c.v&&li(c)==4)setTimeout(c.Ca.bind(c),0);else if(Le(c,"readystatechange"),li(c)==4){c.h=!1;try{const P=c.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=P===0){let X=String(c.D).match(my)[1]||null;!X&&r.self&&r.self.location&&(X=r.self.location.protocol.slice(0,-1)),S=!yj.test(X?X.toLowerCase():"")}g=S}if(g)Le(c,"complete"),Le(c,"success");else{c.o=6;try{var O=li(c)>2?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.ca()+"]",Ty(c)}}finally{Dc(c)}}}}function Dc(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,f||Le(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function li(c){return c.g?c.g.readyState:0}t.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Kn(f)}};function jy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function bj(c){const f={};c=(c.g&&li(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(A(c[S]))continue;var g=sj(c[S]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const P=f[O]||[];f[O]=P,P.push(g)}ye(f,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Il(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function Ay(c){this.za=0,this.i=[],this.j=new wl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Il("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Il("baseRetryDelayMs",5e3,c),this.Za=Il("retryDelaySeedMs",1e4,c),this.Ta=Il("forwardChannelMaxRetries",2,c),this.va=Il("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new cy(c&&c.concurrentRequestLimit),this.Ba=new gj,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ay.prototype,t.ka=8,t.I=1,t.connect=function(c,f,g,S){en(0),this.W=c,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=Vy(this,null,this.W),Mc(this)};function Kh(c){if(Sy(c),c.I==3){var f=c.V++,g=ss(c.J);if(We(g,"SID",c.M),We(g,"RID",f),We(g,"TYPE","terminate"),Dl(c,g),f=new ii(c,c.j,f),f.M=2,f.A=kc(ss(g)),g=!1,r.navigator&&r.navigator.sendBeacon)try{g=r.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&r.Image&&(new Image().src=f.A,g=!0),g||(f.g=Py(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Rc(f)}My(c)}function Oc(c){c.g&&(Qh(c),c.g.cancel(),c.g=null)}function Sy(c){Oc(c),c.v&&(r.clearTimeout(c.v),c.v=null),Vc(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&r.clearTimeout(c.m),c.m=null)}function Mc(c){if(!uy(c.h)&&!c.m){c.m=!0;var f=c.Ea;M||x(),L||(M(),L=!0),v.add(f,c),c.D=0}}function vj(c,f){return dy(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=_l(d(c.Ea,c,f),Oy(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const O=new ii(this,this.j,c);let P=this.o;if(this.U&&(P?(P=qe(P),at(P,this.U)):P=this.U),this.u!==null||this.R||(O.J=P,P=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ry(this,O,f),g=ss(this.J),We(g,"RID",c),We(g,"CVER",22),this.G&&We(g,"X-HTTP-Session-Id",this.G),Dl(this,g),P&&(this.R?f="headers="+El(wy(P))+"&"+f:this.u&&Gh(g,this.u,P)),qh(this.h,O),this.Ra&&We(g,"TYPE","init"),this.S?(We(g,"$req",f),We(g,"SID","null"),O.U=!0,Lh(O,g,null)):Lh(O,g,f),this.I=2}}else this.I==3&&(c?Cy(this,c):this.i.length==0||uy(this.h)||Cy(this))};function Cy(c,f){var g;f?g=f.l:g=c.V++;const S=ss(c.J);We(S,"SID",c.M),We(S,"RID",g),We(S,"AID",c.K),Dl(c,S),c.u&&c.o&&Gh(S,c.u,c.o),g=new ii(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),f&&(c.i=f.G.concat(c.i)),f=Ry(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),qh(c.h,g),Lh(g,S,f)}function Dl(c,f){c.H&&ie(c.H,function(g,S){We(f,S,g)}),c.l&&ie({},function(g,S){We(f,S,g)})}function Ry(c,f,g){g=Math.min(c.i.length,g);const S=c.l?d(c.l.Ka,c.l,c):null;e:{var O=c.i;let we=-1;for(;;){const At=["count="+g];we==-1?g>0?(we=O[0].g,At.push("ofs="+we)):we=0:At.push("ofs="+we);let Ge=!0;for(let kt=0;kt<g;kt++){var P=O[kt].g;const is=O[kt].map;if(P-=we,P<0)we=Math.max(0,O[kt].g-100),Ge=!1;else try{P="req"+P+"_"||"";try{var X=is instanceof Map?is:Object.entries(is);for(const[ga,oi]of X){let ci=oi;o(oi)&&(ci=cn(oi)),At.push(P+ga+"="+encodeURIComponent(ci))}}catch(ga){throw At.push(P+"type="+encodeURIComponent("_badmap")),ga}}catch{S&&S(is)}}if(Ge){X=At.join("&");break e}}X=void 0}return c=c.i.splice(0,g),f.G=c,X}function ky(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;M||x(),L||(M(),L=!0),v.add(f,c),c.A=0}}function $h(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=_l(d(c.Da,c),Oy(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Iy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=_l(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,en(10),Oc(this),Iy(this))};function Qh(c){c.B!=null&&(r.clearTimeout(c.B),c.B=null)}function Iy(c){c.g=new ii(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=ss(c.na);We(f,"RID","rpc"),We(f,"SID",c.M),We(f,"AID",c.K),We(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&We(f,"TO",c.ia),We(f,"TYPE","xmlhttp"),Dl(c,f),c.u&&c.o&&Gh(f,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=kc(ss(f)),g.u=null,g.R=!0,ry(g,c)}t.Va=function(){this.C!=null&&(this.C=null,Oc(this),$h(this),en(19))};function Vc(c){c.C!=null&&(r.clearTimeout(c.C),c.C=null)}function Dy(c,f){var g=null;if(c.g==f){Vc(c),Qh(c),c.g=null;var S=2}else if(Bh(c.h,f))g=f.G,hy(c.h,f),S=1;else return;if(c.I!=0){if(f.o)if(S==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var O=c.D;S=Sc(),Le(S,new ty(S,g)),Mc(c)}else ky(c);else if(O=f.m,O==3||O==0&&f.X>0||!(S==1&&vj(c,f)||S==2&&$h(c)))switch(g&&g.length>0&&(f=c.h,f.i=f.i.concat(g)),O){case 1:pa(c,5);break;case 4:pa(c,10);break;case 3:pa(c,6);break;default:pa(c,2)}}}function Oy(c,f){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*f}function pa(c,f){if(c.j.info("Error code "+f),f==2){var g=d(c.bb,c),S=c.Ua;const O=!S;S=new ai(S||"//www.google.com/images/cleardot.gif"),r.location&&r.location.protocol=="http"||Nl(S,"https"),kc(S),O?mj(S.toString(),g):pj(S.toString(),g)}else en(2);c.I=0,c.l&&c.l.pa(f),My(c),Sy(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function My(c){if(c.I=0,c.ja=[],c.l){const f=fy(c.h);(f.length!=0||c.i.length!=0)&&(b(c.ja,f),b(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function Vy(c,f,g){var S=g instanceof ai?ss(g):new ai(g);if(S.g!="")f&&(S.g=f+"."+S.g),jl(S,S.u);else{var O=r.location;S=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const P=new ai(null);S&&Nl(P,S),f&&(P.g=f),O&&jl(P,O),g&&(P.h=g),S=P}return g=c.G,f=c.wa,g&&f&&We(S,g,f),We(S,"VER",c.ka),Dl(c,S),S}function Py(c,f,g){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new ct(new Hh({ab:g})):new ct(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ly(){}t=Ly.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Pc(){}Pc.prototype.g=function(c,f){return new bn(c,f)};function bn(c,f){se.call(this),this.g=new Ay(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!A(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new ir(this)}m(bn,se),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Kh(this.g)},bn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=cn(c),c=g);f.i.push(new rj(f.Ya++,c)),f.I==3&&Mc(f)},bn.prototype.N=function(){this.g.l=null,delete this.j,Kh(this.g),delete this.g,bn.Z.N.call(this)};function Uy(c){$t.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}m(Uy,$t);function zy(){$n.call(this),this.status=1}m(zy,$n);function ir(c){this.g=c}m(ir,Ly),ir.prototype.ra=function(){Le(this.g,"a")},ir.prototype.qa=function(c){Le(this.g,new Uy(c))},ir.prototype.pa=function(c){Le(this.g,new zy)},ir.prototype.oa=function(){Le(this.g,"b")},Pc.prototype.createWebChannel=Pc.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,WT=function(){return new Pc},XT=function(){return Sc()},YT=Qt,hp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cc.NO_ERROR=0,Cc.TIMEOUT=8,Cc.HTTP_ERROR=6,Cu=Cc,ny.COMPLETE="complete",QT=ny,fe.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",se.prototype.listen=se.prototype.J,Xl=fe,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,$T=ct}).apply(typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{});const cv="@firebase/firestore",uv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new Hg("@firebase/firestore");function ur(){return Ba.logLevel}function te(t,...e){if(Ba.logLevel<=Ae.DEBUG){const n=e.map(n0);Ba.debug(`Firestore (${pl}): ${t}`,...n)}}function Ws(t,...e){if(Ba.logLevel<=Ae.ERROR){const n=e.map(n0);Ba.error(`Firestore (${pl}): ${t}`,...n)}}function Jr(t,...e){if(Ba.logLevel<=Ae.WARN){const n=e.map(n0);Ba.warn(`Firestore (${pl}): ${t}`,...n)}}function n0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,JT(t,s,n)}function JT(t,e,n){let s=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ws(s),new Error(s)}function Ue(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||JT(e,i,s)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class AO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SO{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let a=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Fs,e.enqueueRetryable(()=>i(this.currentUser))};const r=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},o=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fs)}},0),r()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string",31837,{l:s}),new ZT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class CO{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RO{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new CO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const s=a=>{a.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const r=a.token!==this.m;return this.m=a.token,te("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const i=a=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=IO(40);for(let a=0;a<i.length;++a)s.length<20&&i[a]<n&&(s+=e.charAt(i[a]%62))}return s}}function Se(t,e){return t<e?-1:t>e?1:0}function fp(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),a=e.charAt(s);if(i!==a)return Ff(i)===Ff(a)?Se(i,a):Ff(i)?1:-1}return Se(t.length,e.length)}const DO=55296,OO=57343;function Ff(t){const e=t.charCodeAt(0);return e>=DO&&e<=OO}function Zr(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="__name__";class as{constructor(e,n,s){n===void 0?n=0:n>e.length&&ce(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ce(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return as.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof as?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const a=as.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Se(e.length,n.length)}static compareSegments(e,n){const s=as.isNumericId(e),i=as.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?as.extractNumericId(e).compare(as.extractNumericId(n)):fp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class Ye extends as{construct(e,n,s){return new Ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new J(U.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const MO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends as{construct(e,n,s){return new Bt(e,n,s)}static isValidIdentifier(e){return MO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hv}static keyField(){return new Bt([hv])}static fromServerFormat(e){const n=[];let s="",i=0;const a=()=>{if(s.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let r=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new J(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else o==="`"?(r=!r,i++):o!=="."||r?(s+=o,i++):(a(),i++)}if(a(),r)throw new J(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ye.fromString(e))}static fromName(e){return new ae(Ye.fromString(e).popFirst(5))}static empty(){return new ae(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t,e,n){if(!n)throw new J(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VO(t,e,n,s){if(e===!0&&s===!0)throw new J(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fv(t){if(!ae.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mv(t){if(ae.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function hh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hh(t);throw new J(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,e){const n={typeString:t};return e&&(n.value=e),n}function yc(t,e){if(!tN(t))throw new J(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,a="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const r=t[s];if(i&&typeof r!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(a!==void 0&&r!==a.value){n=`Expected '${s}' field to equal '${a.value}'`;break}}if(n)throw new J(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=-62135596800,gv=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*gv);return new et(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pv)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gv}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:jt("string",et._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new et(0,0))}static max(){return new me(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=-1;function PO(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(s===1e9?new et(n+1,0):new et(n,s));return new Wi(i,ae.empty(),e)}function LO(t){return new Wi(t.readTime,t.key,Ho)}class Wi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Wi(me.min(),ae.empty(),Ho)}static max(){return new Wi(me.max(),ae.empty(),Ho)}}function UO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==zO)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((s,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,s)=>{n(e)})}static reject(e){return new B((n,s)=>{s(e)})}static waitFor(e){return new B((n,s)=>{let i=0,a=0,r=!1;e.forEach(o=>{++i,o.next(()=>{++a,r&&a===i&&n()},u=>s(u))}),r=!0,a===i&&n()})}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next(i=>i?B.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,a)=>{s.push(n.call(this,i,a))}),this.waitFor(s)}static mapArray(e,n){return new B((s,i)=>{const a=e.length,r=new Array(a);let o=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{r[d]=h,++o,o===a&&s(r)},h=>i(h))}})}static doWhile(e,n){return new B((s,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):s()};a()})}}function qO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=-1;function mh(t){return t==null}function Td(t){return t===0&&1/t==-1/0}function FO(t){return typeof t=="number"&&Number.isInteger(t)&&!Td(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="";function HO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yv(e)),e=GO(t.get(n),e);return yv(e)}function GO(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case nN:n+="";break;default:n+=a}}return n}function yv(t){return t+nN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?s(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,s,i,a){this.key=e,this.value=n,this.color=s??Lt.RED,this.left=i??Lt.EMPTY,this.right=a??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,a){return new Lt(e??this.key,n??this.value,s??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const a=s(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,s),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Lt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,n,s,i,a){return this}insert(e,n,s){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bv(this.data.getIterator())}getIteratorFrom(e){return new bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new Ct(Bt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new iN("Invalid base64 string: "+a):a}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let r=0;r<i.length;++r)a+=String.fromCharCode(i[r]);return a}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const KO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=KO.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zi(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="server_timestamp",rN="__type__",lN="__previous_value__",oN="__local_write_time__";function a0(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rN])==null?void 0:s.stringValue)===aN}function ph(t){const e=t.mapValue.fields[lN];return a0(e)?ph(e):e}function Go(t){const e=Ji(t.mapValue.fields[oN].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,s,i,a,r,o,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=a,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Nd="(default)";class Ko{constructor(e,n){this.projectId=e,this.database=n||Nd}static empty(){return new Ko("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof Ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__type__",QO="__max__",iu={mapValue:{}},uN="__vector__",jd="value";function ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?a0(t)?4:XO(t)?9007199254740991:YO(t)?10:11:ce(28295,{value:t})}function xs(t,e){if(t===e)return!0;const n=ea(t);if(n!==ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Go(t).isEqual(Go(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const r=Ji(i.timestampValue),o=Ji(a.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Zi(i.bytesValue).isEqual(Zi(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return yt(i.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return yt(i.integerValue)===yt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const r=yt(i.doubleValue),o=yt(a.doubleValue);return r===o?Td(r)===Td(o):isNaN(r)&&isNaN(o)}return!1}(t,e);case 9:return Zr(t.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:case 11:return function(i,a){const r=i.mapValue.fields||{},o=a.mapValue.fields||{};if(xv(r)!==xv(o))return!1;for(const u in r)if(r.hasOwnProperty(u)&&(o[u]===void 0||!xs(r[u],o[u])))return!1;return!0}(t,e);default:return ce(52216,{left:t})}}function $o(t,e){return(t.values||[]).find(n=>xs(n,e))!==void 0}function el(t,e){if(t===e)return 0;const n=ea(t),s=ea(e);if(n!==s)return Se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(a,r){const o=yt(a.integerValue||a.doubleValue),u=yt(r.integerValue||r.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return vv(t.timestampValue,e.timestampValue);case 4:return vv(Go(t),Go(e));case 5:return fp(t.stringValue,e.stringValue);case 6:return function(a,r){const o=Zi(a),u=Zi(r);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,r){const o=a.split("/"),u=r.split("/");for(let d=0;d<o.length&&d<u.length;d++){const h=Se(o[d],u[d]);if(h!==0)return h}return Se(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,r){const o=Se(yt(a.latitude),yt(r.latitude));return o!==0?o:Se(yt(a.longitude),yt(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _v(t.arrayValue,e.arrayValue);case 10:return function(a,r){var p,y,b,N;const o=a.fields||{},u=r.fields||{},d=(p=o[jd])==null?void 0:p.arrayValue,h=(y=u[jd])==null?void 0:y.arrayValue,m=Se(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((N=h==null?void 0:h.values)==null?void 0:N.length)||0);return m!==0?m:_v(d,h)}(t.mapValue,e.mapValue);case 11:return function(a,r){if(a===iu.mapValue&&r===iu.mapValue)return 0;if(a===iu.mapValue)return 1;if(r===iu.mapValue)return-1;const o=a.fields||{},u=Object.keys(o),d=r.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=fp(u[m],h[m]);if(p!==0)return p;const y=el(o[u[m]],d[h[m]]);if(y!==0)return y}return Se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ce(23264,{he:n})}}function vv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ji(t),s=Ji(e),i=Se(n.seconds,s.seconds);return i!==0?i:Se(n.nanos,s.nanos)}function _v(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const a=el(n[i],s[i]);if(a)return a}return Se(n.length,s.length)}function tl(t){return mp(t)}function mp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ji(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const a of n.values||[])i?i=!1:s+=",",s+=mp(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const r of s)a?a=!1:i+=",",i+=`${r}:${mp(n.fields[r])}`;return i+"}"}(t.mapValue):ce(61005,{value:t})}function Ru(t){switch(ea(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(t);return e?16+Ru(e):16;case 5:return 2*t.stringValue.length;case 6:return Zi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,a)=>i+Ru(a),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return ca(s.fields,(a,r)=>{i+=a.length+Ru(r)}),i}(t.mapValue);default:throw ce(13486,{value:t})}}function wv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pp(t){return!!t&&"integerValue"in t}function r0(t){return!!t&&"arrayValue"in t}function Ev(t){return!!t&&"nullValue"in t}function Tv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ku(t){return!!t&&"mapValue"in t}function YO(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cN])==null?void 0:s.stringValue)===uN}function bo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ca(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=bo(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bo(t.arrayValue.values[n]);return e}return{...t}}function XO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===QO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bo(n)}setAll(e){let n=Bt.emptyPath(),s={},i=[];e.forEach((r,o)=>{if(!n.isImmediateParentOf(o)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=o.popLast()}r?s[o.lastSegment()]=bo(r):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,s,i)}delete(e){const n=this.field(e.popLast());ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];ku(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){ca(n,(i,a)=>e[i]=a);for(const i of s)delete e[i]}clone(){return new pn(bo(this.value))}}function dN(t){const e=[];return ca(t.fields,(n,s)=>{const i=new Bt([n]);if(ku(s)){const a=dN(s.mapValue).fields;if(a.length===0)e.push(i);else for(const r of a)e.push(i.child(r))}else e.push(i)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,s,i,a,r,o){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=a,this.data=r,this.documentState=o}static newInvalidDocument(e){return new Wt(e,0,me.min(),me.min(),me.min(),pn.empty(),0)}static newFoundDocument(e,n,s,i){return new Wt(e,1,n,me.min(),s,i,0)}static newNoDocument(e,n){return new Wt(e,2,n,me.min(),me.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,me.min(),me.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function Nv(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const a=e[i],r=t.position[i];if(a.field.isKeyField()?s=ae.comparator(ae.fromName(r.referenceValue),n.key):s=el(r,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function jv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n="asc"){this.field=e,this.dir=n}}function WO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{}class Tt extends hN{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ZO(e,n,s):n==="array-contains"?new n3(e,s):n==="in"?new s3(e,s):n==="not-in"?new i3(e,s):n==="array-contains-any"?new a3(e,s):new Tt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new e3(e,s):new t3(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(el(n,this.value)):n!==null&&ea(this.value)===ea(n)&&this.matchesComparison(el(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends hN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Jn(e,n)}matches(e){return fN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fN(t){return t.op==="and"}function mN(t){return JO(t)&&fN(t)}function JO(t){for(const e of t.filters)if(e instanceof Jn)return!1;return!0}function gp(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+tl(t.value);if(mN(t))return t.filters.map(e=>gp(e)).join(",");{const e=t.filters.map(n=>gp(n)).join(",");return`${t.op}(${e})`}}function pN(t,e){return t instanceof Tt?function(s,i){return i instanceof Tt&&s.op===i.op&&s.field.isEqual(i.field)&&xs(s.value,i.value)}(t,e):t instanceof Jn?function(s,i){return i instanceof Jn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((a,r,o)=>a&&pN(r,i.filters[o]),!0):!1}(t,e):void ce(19439)}function gN(t){return t instanceof Tt?function(n){return`${n.field.canonicalString()} ${n.op} ${tl(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(gN).join(" ,")+"}"}(t):"Filter"}class ZO extends Tt{constructor(e,n,s){super(e,n,s),this.key=ae.fromName(s.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class e3 extends Tt{constructor(e,n){super(e,"in",n),this.keys=yN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class t3 extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=yN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>ae.fromName(s.referenceValue))}class n3 extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return r0(n)&&$o(n.arrayValue,this.value)}}class s3 extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$o(this.value.arrayValue,n)}}class i3 extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$o(this.value.arrayValue,n)}}class a3 extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!r0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>$o(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n=null,s=[],i=[],a=null,r=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=a,this.startAt=r,this.endAt=o,this.Te=null}}function Av(t,e=null,n=[],s=[],i=null,a=null,r=null){return new r3(t,e,n,s,i,a,r)}function l0(t){const e=pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>gp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>tl(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>tl(s)).join(",")),e.Te=n}return e.Te}function o0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jv(t.startAt,e.startAt)&&jv(t.endAt,e.endAt)}function yp(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n=null,s=[],i=[],a=null,r="F",o=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=a,this.limitType=r,this.startAt=o,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function l3(t,e,n,s,i,a,r,o){return new xl(t,e,n,s,i,a,r,o)}function gh(t){return new xl(t)}function Sv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xN(t){return t.collectionGroup!==null}function vo(t){const e=pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let o=new Ct(Bt.comparator);return r.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Qo(a,s))}),n.has(Bt.keyField().canonicalString())||e.Ie.push(new Qo(Bt.keyField(),s))}return e.Ie}function ms(t){const e=pe(t);return e.Ee||(e.Ee=o3(e,vo(t))),e.Ee}function o3(t,e){if(t.limitType==="F")return Av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Qo(i.field,a)});const n=t.endAt?new Ad(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ad(t.startAt.position,t.startAt.inclusive):null;return Av(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function xp(t,e){const n=t.filters.concat([e]);return new xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bp(t,e,n){return new xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yh(t,e){return o0(ms(t),ms(e))&&t.limitType===e.limitType}function bN(t){return`${l0(ms(t))}|lt:${t.limitType}`}function dr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>gN(i)).join(", ")}]`),mh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>tl(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>tl(i)).join(",")),`Target(${s})`}(ms(t))}; limitType=${t.limitType})`}function xh(t,e){return e.isFoundDocument()&&function(s,i){const a=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ae.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,i){for(const a of vo(s))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const a of s.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(r,o,u){const d=Nv(r,o,u);return r.inclusive?d<=0:d<0}(s.startAt,vo(s),i)||s.endAt&&!function(r,o,u){const d=Nv(r,o,u);return r.inclusive?d>=0:d>0}(s.endAt,vo(s),i))}(t,e)}function c3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vN(t){return(e,n)=>{let s=!1;for(const i of vo(t)){const a=u3(i,e,n);if(a!==0)return a;s=s||i.field.isKeyField()}return 0}}function u3(t,e,n){const s=t.field.isKeyField()?ae.comparator(e.key,n.key):function(a,r,o){const u=r.data.field(a),d=o.data.field(a);return u!==null&&d!==null?el(u,d):ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,a]of s)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ca(this.inner,(n,s)=>{for(const[i,a]of s)e(i,a)})}isEmpty(){return sN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new ot(ae.comparator);function Js(){return d3}const _N=new ot(ae.comparator);function Wl(...t){let e=_N;for(const n of t)e=e.insert(n.key,n);return e}function wN(t){let e=_N;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ea(){return _o()}function EN(){return _o()}function _o(){return new Ja(t=>t.toString(),(t,e)=>t.isEqual(e))}const h3=new ot(ae.comparator),f3=new Ct(ae.comparator);function Ce(...t){let e=f3;for(const n of t)e=e.add(n);return e}const m3=new Ct(Se);function p3(){return m3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function TN(t){return{integerValue:""+t}}function g3(t,e){return FO(e)?TN(e):c0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function y3(t,e,n){return t instanceof Yo?function(i,a){const r={fields:{[rN]:{stringValue:aN},[oN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&a0(a)&&(a=ph(a)),a&&(r.fields[lN]=a),{mapValue:r}}(n,e):t instanceof Xo?jN(t,e):t instanceof Wo?AN(t,e):function(i,a){const r=NN(i,a),o=Cv(r)+Cv(i.Ae);return pp(r)&&pp(i.Ae)?TN(o):c0(i.serializer,o)}(t,e)}function x3(t,e,n){return t instanceof Xo?jN(t,e):t instanceof Wo?AN(t,e):n}function NN(t,e){return t instanceof Sd?function(s){return pp(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class Yo extends bh{}class Xo extends bh{constructor(e){super(),this.elements=e}}function jN(t,e){const n=SN(e);for(const s of t.elements)n.some(i=>xs(i,s))||n.push(s);return{arrayValue:{values:n}}}class Wo extends bh{constructor(e){super(),this.elements=e}}function AN(t,e){let n=SN(e);for(const s of t.elements)n=n.filter(i=>!xs(i,s));return{arrayValue:{values:n}}}class Sd extends bh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Cv(t){return yt(t.integerValue||t.doubleValue)}function SN(t){return r0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n){this.field=e,this.transform=n}}function v3(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Xo&&i instanceof Xo||s instanceof Wo&&i instanceof Wo?Zr(s.elements,i.elements,xs):s instanceof Sd&&i instanceof Sd?xs(s.Ae,i.Ae):s instanceof Yo&&i instanceof Yo}(t.transform,e.transform)}class _3{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vh{}function CN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _h(t.key,rn.none()):new xc(t.key,t.data,rn.none());{const n=t.data,s=pn.empty();let i=new Ct(Bt.comparator);for(let a of e.fields)if(!i.has(a)){let r=n.field(a);r===null&&a.length>1&&(a=a.popLast(),r=n.field(a)),r===null?s.delete(a):s.set(a,r),i=i.add(a)}return new ua(t.key,s,new Nn(i.toArray()),rn.none())}}function w3(t,e,n){t instanceof xc?function(i,a,r){const o=i.value.clone(),u=kv(i.fieldTransforms,a,r.transformResults);o.setAll(u),a.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ua?function(i,a,r){if(!Iu(i.precondition,a))return void a.convertToUnknownDocument(r.version);const o=kv(i.fieldTransforms,a,r.transformResults),u=a.data;u.setAll(RN(i)),u.setAll(o),a.convertToFoundDocument(r.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,r){a.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n,s){return t instanceof xc?function(a,r,o,u){if(!Iu(a.precondition,r))return o;const d=a.value.clone(),h=Iv(a.fieldTransforms,u,r);return d.setAll(h),r.convertToFoundDocument(r.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof ua?function(a,r,o,u){if(!Iu(a.precondition,r))return o;const d=Iv(a.fieldTransforms,u,r),h=r.data;return h.setAll(RN(a)),h.setAll(d),r.convertToFoundDocument(r.version,h).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(a,r,o){return Iu(a.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(t,e,n)}function E3(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),a=NN(s.transform,i||null);a!=null&&(n===null&&(n=pn.empty()),n.set(s.field,a))}return n||null}function Rv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Zr(s,i,(a,r)=>v3(a,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xc extends vh{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ua extends vh{constructor(e,n,s,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function RN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function kv(t,e,n){const s=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],r=a.transform,o=e.data.field(a.field);s.set(a.field,x3(r,o,n[i]))}return s}function Iv(t,e,n){const s=new Map;for(const i of t){const a=i.transform,r=n.data.field(i.field);s.set(i.field,y3(a,r,e))}return s}class _h extends vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T3 extends vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&w3(a,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=wo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=wo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=EN();return this.mutations.forEach(i=>{const a=e.get(i.key),r=a.overlayedDocument;let o=this.applyToLocalView(r,a.mutatedFields);o=n.has(i.key)?null:o;const u=CN(r,o);u!==null&&s.set(i.key,u),r.isValidDocument()||r.convertToNoDocument(me.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Zr(this.mutations,e.mutations,(n,s)=>Rv(n,s))&&Zr(this.baseMutations,e.baseMutations,(n,s)=>Rv(n,s))}}class u0{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Ue(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return h3}();const a=e.mutations;for(let r=0;r<a.length;r++)i=i.insert(a[r].key,s[r].version);return new u0(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Oe;function S3(t){switch(t){case U.OK:return ce(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function kN(t){if(t===void 0)return Ws("GRPC error has no .code"),U.UNKNOWN;switch(t){case vt.OK:return U.OK;case vt.CANCELLED:return U.CANCELLED;case vt.UNKNOWN:return U.UNKNOWN;case vt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case vt.INTERNAL:return U.INTERNAL;case vt.UNAVAILABLE:return U.UNAVAILABLE;case vt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case vt.NOT_FOUND:return U.NOT_FOUND;case vt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case vt.ABORTED:return U.ABORTED;case vt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case vt.DATA_LOSS:return U.DATA_LOSS;default:return ce(39323,{code:t})}}(Oe=vt||(vt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=new Hi([4294967295,4294967295],0);function Dv(t){const e=C3().encode(t),n=new KT;return n.update(e),new Uint8Array(n.digest())}function Ov(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Hi([n,s],0),new Hi([i,a],0)]}class d0{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(s<0)throw new Jl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hi.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(Hi.fromNumber(s)));return i.compare(R3)===1&&(i=new Hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Dv(e),[s,i]=Ov(n);for(let a=0;a<this.hashCount;a++){const r=this.ye(s,i,a);if(!this.we(r))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),r=new d0(a,i,n);return s.forEach(o=>r.insert(o)),r}insert(e){if(this.ge===0)return;const n=Dv(e),[s,i]=Ov(n);for(let a=0;a<this.hashCount;a++){const r=this.ye(s,i,a);this.Se(r)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,s,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new wh(me.min(),i,new ot(Se),Js(),Ce())}}class bc{constructor(e,n,s,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new bc(s,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,s,i){this.be=e,this.removedTargetIds=n,this.key=s,this.De=i}}class IN{constructor(e,n){this.targetId=e,this.Ce=n}}class DN{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Mv{constructor(){this.ve=0,this.Fe=Vv(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),s=Ce();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:ce(38017,{changeType:a})}}),new bc(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Vv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class k3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Js(),this.Je=au(),this.He=au(),this.Ye=new ot(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(yp(a))if(s===0){const r=new ae(a.path);this.et(n,r,Wt.newNoDocument(r,me.min()))}else Ue(s===1,20013,{expectedCount:s});else{const r=this._t(n);if(r!==s){const o=this.ut(e),u=o?this.ct(o,e,r):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let r,o;try{r=Zi(s).toUint8Array()}catch(u){if(u instanceof iN)return Jr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new d0(r,i,a)}catch(u){return Jr(u instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.ge===0?null:o}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(a=>{const r=this.Ge.ht(),o=`projects/${r.projectId}/databases/${r.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,r)=>{const o=this.ot(r);if(o){if(a.current&&yp(o.target)){const u=new ae(o.target.path);this.It(u).has(r)||this.Et(r,u)||this.et(r,u,Wt.newNoDocument(u,e))}a.Be&&(n.set(r,a.ke()),a.qe())}});let s=Ce();this.He.forEach((a,r)=>{let o=!0;r.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(s=s.add(a))}),this.je.forEach((a,r)=>r.setReadTime(e));const i=new wh(e,n,this.Ye,this.je,s);return this.je=Js(),this.Je=au(),this.He=au(),this.Ye=new ot(Se),i}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Mv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function au(){return new ot(ae.comparator)}function Vv(){return new ot(ae.comparator)}const I3={asc:"ASCENDING",desc:"DESCENDING"},D3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O3={and:"AND",or:"OR"};class M3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vp(t,e){return t.useProto3Json||mh(e)?e:{value:e}}function Cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ON(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function V3(t,e){return Cd(t,e.toTimestamp())}function ps(t){return Ue(!!t,49232),me.fromTimestamp(function(n){const s=Ji(n);return new et(s.seconds,s.nanos)}(t))}function h0(t,e){return _p(t,e).canonicalString()}function _p(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MN(t){const e=Ye.fromString(t);return Ue(zN(e),10190,{key:e.toString()}),e}function wp(t,e){return h0(t.databaseId,e.path)}function Hf(t,e){const n=MN(e);if(n.get(1)!==t.databaseId.projectId)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(PN(n))}function VN(t,e){return h0(t.databaseId,e)}function P3(t){const e=MN(t);return e.length===4?Ye.emptyPath():PN(e)}function Ep(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PN(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Pv(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function L3(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ce(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Ue(h===void 0||typeof h=="string",58123),Gt.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Gt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),r=e.targetChange.cause,o=r&&function(d){const h=d.code===void 0?U.UNKNOWN:kN(d.code);return new J(h,d.message||"")}(r);n=new DN(s,i,a,o||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Hf(t,s.document.name),a=ps(s.document.updateTime),r=s.document.createTime?ps(s.document.createTime):me.min(),o=new pn({mapValue:{fields:s.document.fields}}),u=Wt.newFoundDocument(i,a,r,o),d=s.targetIds||[],h=s.removedTargetIds||[];n=new Du(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Hf(t,s.document),a=s.readTime?ps(s.readTime):me.min(),r=Wt.newNoDocument(i,a),o=s.removedTargetIds||[];n=new Du([],o,r.key,r)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Hf(t,s.document),a=s.removedTargetIds||[];n=new Du([],a,i,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:a}=s,r=new A3(i,a),o=s.targetId;n=new IN(o,r)}}return n}function U3(t,e){let n;if(e instanceof xc)n={update:Pv(t,e.key,e.value)};else if(e instanceof _h)n={delete:wp(t,e.key)};else if(e instanceof ua)n={update:Pv(t,e.key,e.data),updateMask:Q3(e.fieldMask)};else{if(!(e instanceof T3))return ce(16599,{Vt:e.type});n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(a,r){const o=r.transform;if(o instanceof Yo)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Xo)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Wo)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Sd)return{fieldPath:r.field.canonicalString(),increment:o.Ae};throw ce(20930,{transform:r.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:V3(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ce(27497)}(t,e.precondition)),n}function z3(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(i,a){let r=i.updateTime?ps(i.updateTime):ps(a);return r.isEqual(me.min())&&(r=ps(a)),new _3(r,i.transformResults||[])}(n,e))):[]}function B3(t,e){return{documents:[VN(t,e.path)]}}function q3(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=VN(t,i);const a=function(d){if(d.length!==0)return UN(Jn.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const r=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:hr(p.field),direction:G3(p.dir)}}(h))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=vp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function F3(t){let e=P3(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ue(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const p=LN(m);return p instanceof Jn&&mN(p)?p.getFilters():[p]}(n.where));let r=[];n.orderBy&&(r=function(m){return m.map(p=>function(b){return new Qo(fr(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(m){let p;return p=typeof m=="object"?m.value:m,mh(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,y=m.values||[];return new Ad(y,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new Ad(y,p)}(n.endAt)),l3(e,i,r,a,o,"F",u,d)}function H3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fr(n.unaryFilter.field);return Tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=fr(n.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fr(n.unaryFilter.field);return Tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=fr(n.unaryFilter.field);return Tt.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return Tt.create(fr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(s=>LN(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(n.compositeFilter.op))}(t):ce(30097,{filter:t})}function G3(t){return I3[t]}function K3(t){return D3[t]}function $3(t){return O3[t]}function hr(t){return{fieldPath:t.canonicalString()}}function fr(t){return Bt.fromServerFormat(t.fieldPath)}function UN(t){return t instanceof Tt?function(n){if(n.op==="=="){if(Tv(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NAN"}};if(Ev(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tv(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NAN"}};if(Ev(n.value))return{unaryFilter:{field:hr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hr(n.field),op:K3(n.op),value:n.value}}}(t):t instanceof Jn?function(n){const s=n.getFilters().map(i=>UN(i));return s.length===1?s[0]:{compositeFilter:{op:$3(n.op),filters:s}}}(t):ce(54877,{filter:t})}function Q3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n,s,i,a=me.min(),r=me.min(),o=Gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new Ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.yt=e}}function X3(t){const e=F3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this.Cn=new J3}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Wi.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class J3{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new Ct(Ye.comparator),a=!i.has(s);return this.index[n]=i.add(s),a}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Ct(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BN=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(BN,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="LruGarbageCollector",Z3=1048576;function zv([t,e],[n,s]){const i=Se(t,n);return i===0?Se(e,s):i}class e6{constructor(e){this.Ir=e,this.buffer=new Ct(zv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();zv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class t6{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(Uv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yl(n)?te(Uv,"Ignoring IndexedDB error during garbage collection: ",n):await gl(n)}await this.Vr(3e5)})}}class n6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return B.resolve(fh.ce);const s=new e6(n);return this.mr.forEachTarget(e,i=>s.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>s.Ar(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Lv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,i,a,r,o,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,r=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(s=m,o=Date.now(),this.removeTargets(e,s,n))).next(m=>(a=m,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),ur()<=Ae.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${r-h}ms
	Determined least recently used ${i} in `+(o-r)+`ms
	Removed ${a} targets in `+(u-o)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m})))}}function s6(t,e){return new n6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.changes=new Ja(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&wo(s.mutation,i,Nn.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ce()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ce()){const i=Ea();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(a=>{let r=Wl();return a.forEach((o,u)=>{r=r.insert(o,u.overlayedDocument)}),r}))}getOverlayedDocuments(e,n){const s=Ea();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ce()))}populateOverlays(e,n,s){const i=[];return s.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((r,o)=>{n.set(r,o)})})}computeViews(e,n,s,i){let a=Js();const r=_o(),o=function(){return _o()}();return n.forEach((u,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ua)?a=a.insert(d.key,d):h!==void 0?(r.set(d.key,h.mutation.getFieldMask()),wo(h.mutation,d,h.mutation.getFieldMask(),et.now())):r.set(d.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>r.set(d,h)),n.forEach((d,h)=>o.set(d,new a6(h,r.get(d)??null))),o))}recalculateAndSaveOverlays(e,n){const s=_o();let i=new ot((r,o)=>r-o),a=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>{for(const o of r)o.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=s.get(u)||Nn.empty();h=o.applyToLocalView(d,h),s.set(u,h);const m=(i.get(o.batchId)||Ce()).add(u);i=i.insert(o.batchId,m)})}).next(()=>{const r=[],o=i.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),d=u.key,h=u.value,m=EN();h.forEach(p=>{if(!a.has(p)){const y=CN(n.get(p),s.get(p));y!==null&&m.set(p,y),a=a.add(p)}}),r.push(this.documentOverlayCache.saveOverlays(e,d,m))}return B.waitFor(r)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(r){return ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(a=>{const r=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-a.size):B.resolve(Ea());let o=Ho,u=a;return r.next(d=>B.forEach(d,(h,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),a.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Ce())).next(h=>({batchId:o,changes:wN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(s=>{let i=Wl();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const a=n.collectionGroup;let r=Wl();return this.indexManager.getCollectionParents(e,a).next(o=>B.forEach(o,u=>{const d=function(m,p){return new xl(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((m,p)=>{r=r.insert(m,p)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,s,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(r=>(a=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,a,i))).next(r=>{a.forEach((u,d)=>{const h=d.getKey();r.get(h)===null&&(r=r.insert(h,Wt.newInvalidDocument(h)))});let o=Wl();return r.forEach((u,d)=>{const h=a.get(u);h!==void 0&&wo(h.mutation,d,Nn.empty(),et.now()),xh(n,d)&&(o=o.insert(u,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ps(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:X3(i.bundledQuery),readTime:ps(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.overlays=new ot(ae.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ea();return B.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&s.set(i,a)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,a)=>{this.St(e,n,a)}),B.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const i=Ea(),a=n.length+1,r=new ae(n.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const u=o.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>s&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let a=new ot((d,h)=>d-h);const r=this.overlays.getIterator();for(;r.hasNext();){const d=r.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=a.get(d.largestBatchId);h===null&&(h=Ea(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const o=Ea(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>o.set(d,h)),!(o.size()>=i)););return B.resolve(o)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const r=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,r)}this.overlays=this.overlays.insert(s.key,new j3(n,s));let a=this.qr.get(n);a===void 0&&(a=Ce(),this.qr.set(n,a)),this.qr.set(n,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.Qr=new Ct(It.$r),this.Ur=new Ct(It.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new It(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new It(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ae(new Ye([])),s=new It(n,e),i=new It(n,e+1),a=[];return this.Ur.forEachInRange([s,i],r=>{this.Gr(r),a.push(r.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Ye([])),s=new It(n,e),i=new It(n,e+1);let a=Ce();return this.Ur.forEachInRange([s,i],r=>{a=a.add(r.key)}),a}containsKey(e){const n=new It(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class It{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(It.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new N3(a,n,s,i);this.mutationQueue.push(r);for(const o of i)this.Zr=this.Zr.add(new It(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return B.resolve(r)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ei(s),a=i<0?0:i;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?i0:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new It(n,0),i=new It(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([s,i],r=>{const o=this.Xr(r.Yr);a.push(o)}),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ct(Se);return n.forEach(i=>{const a=new It(i,0),r=new It(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,r],o=>{s=s.add(o.Yr)})}),B.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let a=s;ae.isDocumentKey(a)||(a=a.child(""));const r=new It(new ae(a),0);let o=new Ct(Se);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(o=o.add(u.Yr)),!0)},r),B.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(s=>{const i=this.Xr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return B.forEach(n.mutations,i=>{const a=new It(i.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new It(n,0),i=this.Zr.firstAfterOrEqual(s);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.ri=e,this.docs=function(){return new ot(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),a=i?i.size:0,r=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:r}),this.size+=r-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let s=Js();return n.forEach(i=>{const a=this.docs.get(i);s=s.insert(i,a?a.document.mutableCopy():Wt.newInvalidDocument(i))}),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let a=Js();const r=n.path,o=new ae(r.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!r.isPrefixOf(d.path))break;d.path.length>r.length+1||UO(LO(h),s)<=0||(i.has(h.key)||xh(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,n,s,i){ce(9500)}ii(e,n){return B.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new h6(this)}getSize(e){return B.resolve(this.size)}}class h6 extends i6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.persistence=e,this.si=new Ja(n=>l0(n),o0),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new f0,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,n){return this.si.forEach((s,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new nl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let i=0;const a=[];return this.si.forEach((r,o)=>{o.sequenceNumber<=n&&s.get(o.targetId)===null&&(this.si.delete(r),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),B.waitFor(a).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(r=>{a.push(i.markPotentiallyOrphaned(e,r))}),B.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.ui={},this.overlays={},this.ci=new fh(0),this.li=!1,this.li=!0,this.hi=new c6,this.referenceDelegate=e(this),this.Pi=new f6(this),this.indexManager=new W3,this.remoteDocumentCache=function(i){return new d6(i)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Y3(n),this.Ii=new l6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new u6(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){te("MemoryPersistence","Starting transaction:",e);const i=new m6(this.ci.next());return this.referenceDelegate.Ei(),s(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,n){return B.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class m6 extends BO{constructor(e){super(),this.currentSequenceNumber=e}}class m0{constructor(e){this.persistence=e,this.Ri=new f0,this.Vi=null}static mi(e){return new m0(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,s=>{const i=ae.fromPath(s);return this.gi(e,i).next(a=>{a||n.removeEntry(i,me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rd{constructor(e,n){this.persistence=e,this.pi=new Ja(s=>HO(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=s6(this,n)}static mi(e,n){return new Rd(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(s,i)=>this.br(e,s,i).next(a=>a?B.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,r=>this.br(e,r,n).next(o=>{o||(s++,a.removeEntry(r,me.min()))})).next(()=>a.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ru(e.data.value)),n}br(e,n,s){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=i}static As(e,n){let s=Ce(),i=Ce();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new p0(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Yk()?8:qO(Zt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const a={result:null};return this.ys(e,n).next(r=>{a.result=r}).next(()=>{if(!a.result)return this.ws(e,n,i,s).next(r=>{a.result=r})}).next(()=>{if(a.result)return;const r=new p6;return this.Ss(e,n,r).next(o=>{if(a.result=o,this.Vs)return this.bs(e,n,r,o.size)})}).next(()=>a.result)}bs(e,n,s,i){return s.documentReadCount<this.fs?(ur()<=Ae.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(ur()<=Ae.DEBUG&&te("QueryEngine","Query:",dr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(ur()<=Ae.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ms(n))):B.resolve())}ys(e,n){if(Sv(n))return B.resolve(null);let s=ms(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bp(n,null,"F"),s=ms(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const r=Ce(...a);return this.ps.getDocuments(e,r).next(o=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.Ds(n,o);return this.Cs(n,d,r,u.readTime)?this.ys(e,bp(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,s,i){return Sv(n)||i.isEqual(me.min())?B.resolve(null):this.ps.getDocuments(e,s).next(a=>{const r=this.Ds(n,a);return this.Cs(n,r,s,i)?B.resolve(null):(ur()<=Ae.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dr(n)),this.vs(e,r,n,PO(i,Ho)).next(o=>o))})}Ds(e,n){let s=new Ct(vN(e));return n.forEach((i,a)=>{xh(e,a)&&(s=s.add(a))}),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,s){return ur()<=Ae.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",dr(n)),this.ps.getDocumentsMatchingQuery(e,n,Wi.min(),s)}vs(e,n,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next(a=>(n.forEach(r=>{a=a.insert(r.key,r)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="LocalStore",y6=3e8;class x6{constructor(e,n,s,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ot(Se),this.xs=new Ja(a=>l0(a),o0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function b6(t,e,n,s){return new x6(t,e,n,s)}async function FN(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(a=>{const r=[],o=[];let u=Ce();for(const d of i){r.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(d=>({Ls:d,removedBatchIds:r,addedBatchIds:o}))})})}function v6(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,u,d,h){const m=d.batch,p=m.keys();let y=B.resolve();return p.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(N=>{const R=d.docVersions.get(b);Ue(R!==null,48541),N.version.compareTo(R)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),h.addEntry(N)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(u,m))}(n,s,e,a).next(()=>a.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let u=Ce();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(u=u.add(o.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function HN(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _6(t,e){const n=pe(t),s=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const r=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;o.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(a,h.addedDocuments,m)));let y=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Gt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),i=i.insert(m,y),function(N,R,w){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=y6?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,y,h)&&o.push(n.Pi.updateTargetData(a,y))});let u=Js(),d=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),o.push(w6(a,r,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!s.isEqual(me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next(m=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,s));o.push(h)}return B.waitFor(o).next(()=>r.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.Ms=i,a))}function w6(t,e,n){let s=Ce(),i=Ce();return n.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let r=Js();return n.forEach((o,u)=>{const d=a.get(o);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(o)),u.isNoDocument()&&u.version.isEqual(me.min())?(e.removeEntry(o,u.readTime),r=r.insert(o,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),r=r.insert(o,u)):te(g0,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",u.version)}),{ks:r,qs:i}})}function E6(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=i0),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function T6(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Pi.getTargetData(s,e).next(a=>a?(i=a,B.resolve(i)):n.Pi.allocateTargetId(s).next(r=>(i=new Ci(e,r,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Tp(t,e,n){const s=pe(t),i=s.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,r=>s.persistence.referenceDelegate.removeTarget(r,i))}catch(r){if(!yl(r))throw r;te(g0,`Failed to update sequence numbers for target ${e}: ${r}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function Bv(t,e,n){const s=pe(t);let i=me.min(),a=Ce();return s.persistence.runTransaction("Execute query","readwrite",r=>function(u,d,h){const m=pe(u),p=m.xs.get(h);return p!==void 0?B.resolve(m.Ms.get(p)):m.Pi.getTargetData(d,h)}(s,r,ms(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(r,o.targetId).next(u=>{a=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(r,e,n?i:me.min(),n?a:Ce())).next(o=>(N6(s,c3(e),o),{documents:o,Qs:a})))}function N6(t,e,n){let s=t.Os.get(e)||me.min();n.forEach((i,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.Os.set(e,s)}class qv{constructor(){this.activeTargetIds=p3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j6{constructor(){this.Mo=new qv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="ConnectivityMonitor";class Hv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(Fv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(Fv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=null;function Np(){return ru===null?ru=function(){return 268435456+Math.round(2147483648*Math.random())}():ru++,"0x"+ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="RestConnection",S6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class C6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===Nd?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,n,s,i,a){const r=Np(),o=this.zo(e,n.toUriEncodedString());te(Gf,`Sending RPC '${e}' ${r}:`,o,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(o),h=ra(d);return this.Jo(e,o,u,s,h).then(m=>(te(Gf,`Received RPC '${e}' ${r}: `,m),m),m=>{throw Jr(Gf,`RPC '${e}' ${r} failed with error: `,m,"url: ",o,"request:",s),m})}Ho(e,n,s,i,a,r){return this.Go(e,n,s,i,a)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),s&&s.headers.forEach((i,a)=>e[a]=i)}zo(e,n){const s=S6[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class k6 extends C6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,a){const r=Np();return new Promise((o,u)=>{const d=new $T;d.setWithCredentials(!0),d.listenOnce(QT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Cu.NO_ERROR:const m=d.getResponseJson();te(Yt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(m)),o(m);break;case Cu.TIMEOUT:te(Yt,`RPC '${e}' ${r} timed out`),u(new J(U.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:const p=d.getStatus();if(te(Yt,`RPC '${e}' ${r} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const N=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_)>=0?_:U.UNKNOWN}(b.status);u(new J(N,b.message))}else u(new J(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new J(U.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:r,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{te(Yt,`RPC '${e}' ${r} completed.`)}});const h=JSON.stringify(i);te(Yt,`RPC '${e}' ${r} sending request:`,i),d.send(n,"POST",h,s,15)})}T_(e,n,s){const i=Np(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=WT(),o=XT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=a.join("");te(Yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=r.createWebChannel(h,u);this.I_(m);let p=!1,y=!1;const b=new R6({Yo:R=>{y?te(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(te(Yt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),te(Yt,`RPC '${e}' stream ${i} sending:`,R),m.send(R))},Zo:()=>m.close()}),N=(R,w,_)=>{R.listen(w,E=>{try{_(E)}catch(I){setTimeout(()=>{throw I},0)}})};return N(m,Xl.EventType.OPEN,()=>{y||(te(Yt,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),N(m,Xl.EventType.CLOSE,()=>{y||(y=!0,te(Yt,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(m))}),N(m,Xl.EventType.ERROR,R=>{y||(y=!0,Jr(Yt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),b.a_(new J(U.UNAVAILABLE,"The operation could not be completed")))}),N(m,Xl.EventType.MESSAGE,R=>{var w;if(!y){const _=R.data[0];Ue(!!_,16349);const E=_,I=(E==null?void 0:E.error)||((w=E[0])==null?void 0:w.error);if(I){te(Yt,`RPC '${e}' stream ${i} received error:`,I);const M=I.status;let L=function(T){const C=vt[T];if(C!==void 0)return kN(C)}(M),v=I.message;L===void 0&&(L=U.INTERNAL,v="Unknown error status: "+M+" with message "+I.message),y=!0,b.a_(new J(L,v)),m.close()}else te(Yt,`RPC '${e}' stream ${i} received:`,_),b.u_(_)}}),N(o,YT.STAT_EVENT,R=>{R.stat===hp.PROXY?te(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===hp.NOPROXY&&te(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return new M3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,s=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="PersistentStream";class KN{constructor(e,n,s,i,a,r,o,u){this.Mi=e,this.S_=s,this.b_=i,this.connection=a,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ws(n.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new J(U.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return te(Gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(te(Gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class I6 extends KN{constructor(e,n,s,i,a,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,r),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=L3(this.serializer,e),s=function(a){if(!("targetChange"in a))return me.min();const r=a.targetChange;return r.targetIds&&r.targetIds.length?me.min():r.readTime?ps(r.readTime):me.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Ep(this.serializer),n.addTarget=function(a,r){let o;const u=r.target;if(o=yp(u)?{documents:B3(a,u)}:{query:q3(a,u).ft},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){o.resumeToken=ON(a,r.resumeToken);const d=vp(a,r.expectedCount);d!==null&&(o.expectedCount=d)}else if(r.snapshotVersion.compareTo(me.min())>0){o.readTime=Cd(a,r.snapshotVersion.toTimestamp());const d=vp(a,r.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const s=H3(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Ep(this.serializer),n.removeTarget=e,this.q_(n)}}class D6 extends KN{constructor(e,n,s,i,a,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,r),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=z3(e.writeResults,e.commitTime),s=ps(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Ep(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>U3(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{}class M6 extends O6{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,r])=>this.connection.Go(e,_p(n,s),i,a,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(U.UNKNOWN,a.toString())})}Ho(e,n,s,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Ho(e,_p(n,s),i,r,o,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new J(U.UNKNOWN,r.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class V6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ws(n),this.aa=!1):te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="RemoteStore";class P6{constructor(e,n,s,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(r=>{s.enqueueAndForget(async()=>{Za(this)&&(te(qa,"Restarting streams for network reachability change."),await async function(u){const d=pe(u);d.Ea.add(4),await vc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Th(d)}(this))})}),this.Ra=new V6(s,i)}}async function Th(t){if(Za(t))for(const e of t.da)await e(!0)}async function vc(t){for(const e of t.da)await e(!1)}function $N(t,e){const n=pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),v0(n)?b0(n):bl(n).O_()&&x0(n,e))}function y0(t,e){const n=pe(t),s=bl(n);n.Ia.delete(e),s.O_()&&QN(n,e),n.Ia.size===0&&(s.O_()?s.L_():Za(n)&&n.Ra.set("Unknown"))}function x0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bl(t).Y_(e)}function QN(t,e){t.Va.Ue(e),bl(t).Z_(e)}function b0(t){t.Va=new k3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bl(t).start(),t.Ra.ua()}function v0(t){return Za(t)&&!bl(t).x_()&&t.Ia.size>0}function Za(t){return pe(t).Ea.size===0}function YN(t){t.Va=void 0}async function L6(t){t.Ra.set("Online")}async function U6(t){t.Ia.forEach((e,n)=>{x0(t,e)})}async function z6(t,e){YN(t),v0(t)?(t.Ra.ha(e),b0(t)):t.Ra.set("Unknown")}async function B6(t,e,n){if(t.Ra.set("Online"),e instanceof DN&&e.state===2&&e.cause)try{await async function(i,a){const r=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,r),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(s){te(qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await kd(t,s)}else if(e instanceof Du?t.Va.Ze(e):e instanceof IN?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const s=await HN(t.localStore);n.compareTo(s)>=0&&await function(a,r){const o=a.Va.Tt(r);return o.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,r))}}),o.targetMismatches.forEach((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(Gt.EMPTY_BYTE_STRING,h.snapshotVersion)),QN(a,u);const m=new Ci(h.target,u,d,h.sequenceNumber);x0(a,m)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){te(qa,"Failed to raise snapshot:",s),await kd(t,s)}}async function kd(t,e,n){if(!yl(e))throw e;t.Ea.add(1),await vc(t),t.Ra.set("Offline"),n||(n=()=>HN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(qa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Th(t)})}function XN(t,e){return e().catch(n=>kd(t,n,e))}async function Nh(t){const e=pe(t),n=ta(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:i0;for(;q6(e);)try{const i=await E6(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,F6(e,i)}catch(i){await kd(e,i)}WN(e)&&JN(e)}function q6(t){return Za(t)&&t.Ta.length<10}function F6(t,e){t.Ta.push(e);const n=ta(t);n.O_()&&n.X_&&n.ea(e.mutations)}function WN(t){return Za(t)&&!ta(t).x_()&&t.Ta.length>0}function JN(t){ta(t).start()}async function H6(t){ta(t).ra()}async function G6(t){const e=ta(t);for(const n of t.Ta)e.ea(n.mutations)}async function K6(t,e,n){const s=t.Ta.shift(),i=u0.from(s,e,n);await XN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Nh(t)}async function $6(t,e){e&&ta(t).X_&&await async function(s,i){if(function(r){return S3(r)&&r!==U.ABORTED}(i.code)){const a=s.Ta.shift();ta(s).B_(),await XN(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Nh(s)}}(t,e),WN(t)&&JN(t)}async function Kv(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),te(qa,"RemoteStore received new credentials");const s=Za(n);n.Ea.add(3),await vc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Th(n)}async function Q6(t,e){const n=pe(t);e?(n.Ea.delete(2),await Th(n)):e||(n.Ea.add(2),await vc(n),n.Ra.set("Unknown"))}function bl(t){return t.ma||(t.ma=function(n,s,i){const a=pe(n);return a.sa(),new I6(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:L6.bind(null,t),t_:U6.bind(null,t),r_:z6.bind(null,t),H_:B6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),v0(t)?b0(t):t.Ra.set("Unknown")):(await t.ma.stop(),YN(t))})),t.ma}function ta(t){return t.fa||(t.fa=function(n,s,i){const a=pe(n);return a.sa(),new D6(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:H6.bind(null,t),r_:$6.bind(null,t),ta:G6.bind(null,t),na:K6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Nh(t)):(await t.fa.stop(),t.Ta.length>0&&(te(qa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,s,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=a,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,a){const r=Date.now()+s,o=new _0(e,n,r,i,a);return o.start(s),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w0(t,e){if(Ws("AsyncQueue",`${e}: ${t}`),yl(t))return new J(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{static emptySet(e){return new Ur(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ae.comparator(n.key,s.key):(n,s)=>ae.comparator(n.key,s.key),this.keyedMap=Wl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ur)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ur;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.ga=new ot(ae.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class sl{constructor(e,n,s,i,a,r,o,u,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=a,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,a){const r=[];return n.forEach(o=>{r.push({type:0,doc:o})}),new sl(e,n,Ur.emptySet(n),r,s,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class X6{constructor(){this.queries=Qv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=pe(n),a=i.queries;i.queries=Qv(),a.forEach((r,o)=>{for(const u of o.Sa)u.onError(s)})})(this,new J(U.ABORTED,"Firestore shutting down"))}}function Qv(){return new Ja(t=>bN(t),yh)}async function E0(t,e){const n=pe(t);let s=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(s=2):(a=new Y6,s=e.Da()?0:1);try{switch(s){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(r){const o=w0(r,`Initialization of query '${dr(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&N0(n)}async function T0(t,e){const n=pe(t),s=e.query;let i=3;const a=n.queries.get(s);if(a){const r=a.Sa.indexOf(e);r>=0&&(a.Sa.splice(r,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function W6(t,e){const n=pe(t);let s=!1;for(const i of e){const a=i.query,r=n.queries.get(a);if(r){for(const o of r.Sa)o.Fa(i)&&(s=!0);r.wa=i}}s&&N0(n)}function J6(t,e,n){const s=pe(t),i=s.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);s.queries.delete(e)}function N0(t){t.Ca.forEach(e=>{e.next()})}var jp,Yv;(Yv=jp||(jp={})).Ma="default",Yv.Cache="cache";class j0{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new sl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.key=e}}class e2{constructor(e){this.key=e}}class Z6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=vN(e),this.tu=new Ur(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new $v,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,r=i,o=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),y=xh(this.query,m)?m:null,b=!!p&&this.mutatedKeys.has(p.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;p&&y?p.data.isEqual(y.data)?b!==N&&(s.track({type:3,doc:y}),R=!0):this.su(p,y)||(s.track({type:2,doc:y}),R=!0,(u&&this.eu(y,u)>0||d&&this.eu(y,d)<0)&&(o=!0)):!p&&y?(s.track({type:0,doc:y}),R=!0):p&&!y&&(s.track({type:1,doc:p}),R=!0,(u||d)&&(o=!0)),R&&(y?(r=r.add(y),a=N?a.add(h):a.delete(h)):(r=r.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;r.size>this.query.limit;){const h=this.query.limitType==="F"?r.last():r.first();r=r.delete(h.key),a=a.delete(h.key),s.track({type:1,doc:h})}return{tu:r,iu:s,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const r=e.iu.ya();r.sort((h,m)=>function(y,b){const N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:R})}};return N(y)-N(b)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(s),i=i??!1;const o=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,r.length!==0||d?{snapshot:new sl(this.query,e.tu,a,r,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $v,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new e2(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new ZN(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const A0="SyncEngine";class e5{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class t5{constructor(e){this.key=e,this.hu=!1}}class n5{constructor(e,n,s,i,a,r){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=r,this.Pu={},this.Tu=new Ja(o=>bN(o),yh),this.Iu=new Map,this.Eu=new Set,this.du=new ot(ae.comparator),this.Au=new Map,this.Ru=new f0,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s5(t,e,n=!0){const s=r2(t);let i;const a=s.Tu.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await t2(s,e,n,!0),i}async function i5(t,e){const n=r2(t);await t2(n,e,!0,!1)}async function t2(t,e,n,s){const i=await T6(t.localStore,ms(e)),a=i.targetId,r=t.sharedClientState.addLocalQueryTarget(a,n);let o;return s&&(o=await a5(t,e,a,r==="current",i.resumeToken)),t.isPrimaryClient&&n&&$N(t.remoteStore,i),o}async function a5(t,e,n,s,i){t.pu=(m,p,y)=>async function(N,R,w,_){let E=R.view.ru(w);E.Cs&&(E=await Bv(N.localStore,R.query,!1).then(({documents:v})=>R.view.ru(v,E)));const I=_&&_.targetChanges.get(R.targetId),M=_&&_.targetMismatches.get(R.targetId)!=null,L=R.view.applyChanges(E,N.isPrimaryClient,I,M);return Wv(N,R.targetId,L.au),L.snapshot}(t,m,p,y);const a=await Bv(t.localStore,e,!0),r=new Z6(e,a.Qs),o=r.ru(a.documents),u=bc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=r.applyChanges(o,t.isPrimaryClient,u);Wv(t,n,d.au);const h=new e5(e,n,r);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function r5(t,e,n){const s=pe(t),i=s.Tu.get(e),a=s.Iu.get(i.targetId);if(a.length>1)return s.Iu.set(i.targetId,a.filter(r=>!yh(r,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Tp(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&y0(s.remoteStore,i.targetId),Ap(s,i.targetId)}).catch(gl)):(Ap(s,i.targetId),await Tp(s.localStore,i.targetId,!0))}async function l5(t,e){const n=pe(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),y0(n.remoteStore,s.targetId))}async function o5(t,e,n){const s=p5(t);try{const i=await function(r,o){const u=pe(r),d=et.now(),h=o.reduce((y,b)=>y.add(b.key),Ce());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Js(),N=Ce();return u.Ns.getEntries(y,h).next(R=>{b=R,b.forEach((w,_)=>{_.isValidDocument()||(N=N.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(R=>{m=R;const w=[];for(const _ of o){const E=E3(_,m.get(_.key).overlayedDocument);E!=null&&w.push(new ua(_.key,E,dN(E.value.mapValue),rn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,w,o)}).next(R=>{p=R;const w=R.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,w)})}).then(()=>({batchId:p.batchId,changes:wN(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(r,o,u){let d=r.Vu[r.currentUser.toKey()];d||(d=new ot(Se)),d=d.insert(o,u),r.Vu[r.currentUser.toKey()]=d}(s,i.batchId,n),await _c(s,i.changes),await Nh(s.remoteStore)}catch(i){const a=w0(i,"Failed to persist write");n.reject(a)}}async function n2(t,e){const n=pe(t);try{const s=await _6(n.localStore,e);e.targetChanges.forEach((i,a)=>{const r=n.Au.get(a);r&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?r.hu=!0:i.modifiedDocuments.size>0?Ue(r.hu,14607):i.removedDocuments.size>0&&(Ue(r.hu,42227),r.hu=!1))}),await _c(n,s,e)}catch(s){await gl(s)}}function Xv(t,e,n){const s=pe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((a,r)=>{const o=r.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(r,o){const u=pe(r);u.onlineState=o;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(o)&&(d=!0)}),d&&N0(u)}(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function c5(t,e,n){const s=pe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),a=i&&i.key;if(a){let r=new ot(ae.comparator);r=r.insert(a,Wt.newNoDocument(a,me.min()));const o=Ce().add(a),u=new wh(me.min(),new Map,new ot(Se),r,o);await n2(s,u),s.du=s.du.remove(a),s.Au.delete(e),S0(s)}else await Tp(s.localStore,e,!1).then(()=>Ap(s,e,n)).catch(gl)}async function u5(t,e){const n=pe(t),s=e.batch.batchId;try{const i=await v6(n.localStore,e);i2(n,s,null),s2(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await _c(n,i)}catch(i){await gl(i)}}async function d5(t,e,n){const s=pe(t);try{const i=await function(r,o){const u=pe(r);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,o).next(m=>(Ue(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(s.localStore,e);i2(s,e,n),s2(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await _c(s,i)}catch(i){await gl(i)}}function s2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function i2(t,e,n){const s=pe(t);let i=s.Vu[s.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||a2(t,s)})}function a2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(y0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),S0(t))}function Wv(t,e,n){for(const s of n)s instanceof ZN?(t.Ru.addReference(s.key,e),h5(t,s)):s instanceof e2?(te(A0,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||a2(t,s.key)):ce(19791,{wu:s})}function h5(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(te(A0,"New document in limbo: "+n),t.Eu.add(s),S0(t))}function S0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Ye.fromString(e)),s=t.fu.next();t.Au.set(s,new t5(n)),t.du=t.du.insert(n,s),$N(t.remoteStore,new Ci(ms(gh(n.path)),s,"TargetPurposeLimboResolution",fh.ce))}}async function _c(t,e,n){const s=pe(t),i=[],a=[],r=[];s.Tu.isEmpty()||(s.Tu.forEach((o,u)=>{r.push(s.pu(u,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=p0.As(u.targetId,d);a.push(m)}}))}),await Promise.all(r),s.Pu.H_(i),await async function(u,d){const h=pe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,p=>B.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>B.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!yl(m))throw m;te(g0,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=h.Ms.get(p),b=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(p,N)}}}(s.localStore,a))}async function f5(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){te(A0,"User change. New user:",e.toKey());const s=await FN(n.localStore,e);n.currentUser=e,function(a,r){a.mu.forEach(o=>{o.forEach(u=>{u.reject(new J(U.CANCELLED,r))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await _c(n,s.Ls)}}function m5(t,e){const n=pe(t),s=n.Au.get(e);if(s&&s.hu)return Ce().add(s.key);{let i=Ce();const a=n.Iu.get(e);if(!a)return i;for(const r of a){const o=n.Tu.get(r);i=i.unionWith(o.view.nu)}return i}}function r2(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c5.bind(null,e),e.Pu.H_=W6.bind(null,e.eventManager),e.Pu.yu=J6.bind(null,e.eventManager),e}function p5(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d5.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return b6(this.persistence,new g6,e.initialUser,this.serializer)}Cu(e){return new qN(m0.mi,this.serializer)}Du(e){return new j6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class g5 extends Id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof Rd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new t6(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new qN(s=>Rd.mi(s,n),this.serializer)}}class Sp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Xv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=f5.bind(null,this.syncEngine),await Q6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new X6}()}createDatastore(e){const n=Eh(e.databaseInfo.databaseId),s=function(a){return new k6(a)}(e.databaseInfo);return function(a,r,o,u){return new M6(a,r,o,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,a,r,o){return new P6(s,i,a,r,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Xv(this.syncEngine,n,0),function(){return Hv.v()?new Hv:new A6}())}createSyncEngine(e,n){return function(i,a,r,o,u,d,h){const m=new n5(i,a,r,o,u,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=pe(i);te(qa,"RemoteStore shutting down."),a.Ea.add(5),await vc(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sp.provider={build:()=>new Sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="FirestoreClient";class y5{constructor(e,n,s,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Xt.UNAUTHENTICATED,this.clientId=s0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async r=>{te(na,"Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(te(na,"Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=w0(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function $f(t,e){t.asyncQueue.verifyOperationInProgress(),te(na,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await FN(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x5(t);te(na,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Kv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Kv(e.remoteStore,i)),t._onlineComponents=e}async function x5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(na,"Using user provided OfflineComponentProvider");try{await $f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Jr("Error using user provided cache. Falling back to memory cache: "+n),await $f(t,new Id)}}else te(na,"Using default OfflineComponentProvider"),await $f(t,new g5(void 0));return t._offlineComponents}async function l2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(na,"Using user provided OnlineComponentProvider"),await Jv(t,t._uninitializedComponentsProvider._online)):(te(na,"Using default OnlineComponentProvider"),await Jv(t,new Sp))),t._onlineComponents}function b5(t){return l2(t).then(e=>e.syncEngine)}async function Dd(t){const e=await l2(t),n=e.eventManager;return n.onListen=s5.bind(null,e.syncEngine),n.onUnlisten=r5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=i5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l5.bind(null,e.syncEngine),n}function v5(t,e,n={}){const s=new Fs;return t.asyncQueue.enqueueAndForget(async()=>function(a,r,o,u,d){const h=new C0({next:p=>{h.Nu(),r.enqueueAndForget(()=>T0(a,m));const y=p.docs.has(o);!y&&p.fromCache?d.reject(new J(U.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new J(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new j0(gh(o.path),h,{includeMetadataChanges:!0,qa:!0});return E0(a,m)}(await Dd(t),t.asyncQueue,e,n,s)),s.promise}function _5(t,e,n={}){const s=new Fs;return t.asyncQueue.enqueueAndForget(async()=>function(a,r,o,u,d){const h=new C0({next:p=>{h.Nu(),r.enqueueAndForget(()=>T0(a,m)),p.fromCache&&u.source==="server"?d.reject(new J(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new j0(o,h,{includeMetadataChanges:!0,qa:!0});return E0(a,m)}(await Dd(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="firestore.googleapis.com",e_=!0;class t_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c2,this.ssl=e_}else this.host=e.host,this.ssl=e.ssl??e_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z3)throw new J(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o2(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new jO;switch(s.type){case"firstParty":return new RO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new J(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Zv.get(n);s&&(te("ComponentProvider","Removing Datastore"),Zv.delete(n),s.terminate())}(this),Promise.resolve()}}function u2(t,e,n,s={}){var d;t=an(t,jh);const i=ra(e),a=t._getSettings(),r={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;i&&(qg(`https://${o}`),Fg("Firestore",!0)),a.host!==c2&&a.host!==o&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:o,ssl:i,emulatorOptions:s};if(!Pa(u,r)&&(t._setSettings(u),s.mockUserToken)){let h,m;if(typeof s.mockUserToken=="string")h=s.mockUserToken,m=Xt.MOCK_USER;else{h=nT(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new J(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Xt(p)}t._authCredentials=new AO(new ZT(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new da(this.firestore,e,this._query)}}class ht{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(yc(n,ht._jsonSchema))return new ht(e,s||null,new ae(Ye.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:jt("string",ht._jsonSchemaVersion),referencePath:jt("string")};class Gi extends da{constructor(e,n,s){super(e,n,gh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new ae(e))}withConverter(e){return new Gi(this.firestore,e,this._path)}}function ln(t,e,...n){if(t=$e(t),eN("collection","path",e),t instanceof jh){const s=Ye.fromString(e,...n);return mv(s),new Gi(t,null,s)}{if(!(t instanceof ht||t instanceof Gi))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return mv(s),new Gi(t.firestore,null,s)}}function rt(t,e,...n){if(t=$e(t),arguments.length===1&&(e=s0.newId()),eN("doc","path",e),t instanceof jh){const s=Ye.fromString(e,...n);return fv(s),new ht(t,null,new ae(s))}{if(!(t instanceof ht||t instanceof Gi))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return fv(s),new ht(t.firestore,t instanceof Gi?t.converter:null,new ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="AsyncQueue";class s_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GN(this,"async_queue_retry"),this._c=()=>{const s=Kf();s&&te(n_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Kf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Kf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yl(e))throw e;te(n_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ws("INTERNAL UNHANDLED ERROR: ",i_(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=_0.createAndSchedule(this,e,n,s,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&ce(47125,{Pc:i_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function i_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of s)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class bs extends jh{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new s_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s_(e),this._firestoreClient=void 0,await e}}}function w5(t,e){const n=typeof t=="object"?t:Kg(),s=typeof t=="string"?t:Nd,i=oh(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const a=Z1("firestore");a&&u2(i,...a)}return i}function wc(t){if(t._terminated)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E5(t),t._firestoreClient}function E5(t){var s,i,a;const e=t._freezeSettings(),n=function(o,u,d,h){return new $O(o,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,o2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new y5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const u=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Gt.fromBase64String(e))}catch(n){throw new J(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:jt("string",Bn._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gs._jsonSchemaVersion}}static fromJSON(e){if(yc(e,gs._jsonSchema))return new gs(e.latitude,e.longitude)}}gs._jsonSchemaVersion="firestore/geoPoint/1.0",gs._jsonSchema={type:jt("string",gs._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ys(e.vectorValues);throw new J(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ys._jsonSchemaVersion="firestore/vectorValue/1.0",ys._jsonSchema={type:jt("string",ys._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=/^__.*__$/;class N5{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new xc(e,this.data,n,this.fieldTransforms)}}class d2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ua(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function h2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:t})}}class R0{constructor(e,n,s,i,a,r){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new R0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(h2(this.Ac)&&T5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j5{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Eh(e)}Cc(e,n,s,i=!1){return new R0({Ac:e,methodName:n,Dc:s,path:Bt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tc(t){const e=t._freezeSettings(),n=Eh(t._databaseId);return new j5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k0(t,e,n,s,i,a={}){const r=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);D0("Data must be an object, but it was:",r,s);const o=p2(s,r);let u,d;if(a.merge)u=new Nn(r.fieldMask),d=r.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=Cp(e,m,n);if(!r.contains(p))throw new J(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);y2(h,p)||h.push(p)}u=new Nn(h),d=r.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=r.fieldTransforms;return new N5(new pn(o),u,d)}class Sh extends Ah{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sh}}class I0 extends Ah{_toFieldTransform(e){return new b3(e.path,new Yo)}isEqual(e){return e instanceof I0}}function f2(t,e,n,s){const i=t.Cc(1,e,n);D0("Data must be an object, but it was:",i,s);const a=[],r=pn.empty();ca(s,(u,d)=>{const h=O0(e,u,n);d=$e(d);const m=i.yc(h);if(d instanceof Sh)a.push(h);else{const p=Nc(d,m);p!=null&&(a.push(h),r.set(h,p))}});const o=new Nn(a);return new d2(r,o,i.fieldTransforms)}function m2(t,e,n,s,i,a){const r=t.Cc(1,e,n),o=[Cp(e,s,n)],u=[i];if(a.length%2!=0)throw new J(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)o.push(Cp(e,a[p])),u.push(a[p+1]);const d=[],h=pn.empty();for(let p=o.length-1;p>=0;--p)if(!y2(d,o[p])){const y=o[p];let b=u[p];b=$e(b);const N=r.yc(y);if(b instanceof Sh)d.push(y);else{const R=Nc(b,N);R!=null&&(d.push(y),h.set(y,R))}}const m=new Nn(d);return new d2(h,m,r.fieldTransforms)}function A5(t,e,n,s=!1){return Nc(n,t.Cc(s?4:3,e))}function Nc(t,e){if(g2(t=$e(t)))return D0("Unsupported field value:",e,t),p2(t,e);if(t instanceof Ah)return function(s,i){if(!h2(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,i){const a=[];let r=0;for(const o of s){let u=Nc(o,i.wc(r));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),r++}return{arrayValue:{values:a}}}(t,e)}return function(s,i){if((s=$e(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return g3(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=et.fromDate(s);return{timestampValue:Cd(i.serializer,a)}}if(s instanceof et){const a=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Cd(i.serializer,a)}}if(s instanceof gs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bn)return{bytesValue:ON(i.serializer,s._byteString)};if(s instanceof ht){const a=i.databaseId,r=s.firestore._databaseId;if(!r.isEqual(a))throw i.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:h0(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof ys)return function(r,o){return{mapValue:{fields:{[cN]:{stringValue:uN},[jd]:{arrayValue:{values:r.toArray().map(d=>{if(typeof d!="number")throw o.Sc("VectorValues must only contain numeric values.");return c0(o.serializer,d)})}}}}}}(s,i);throw i.Sc(`Unsupported field value: ${hh(s)}`)}(t,e)}function p2(t,e){const n={};return sN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ca(t,(s,i)=>{const a=Nc(i,e.mc(s));a!=null&&(n[s]=a)}),{mapValue:{fields:n}}}function g2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof gs||t instanceof Bn||t instanceof ht||t instanceof Ah||t instanceof ys)}function D0(t,e,n){if(!g2(n)||!tN(n)){const s=hh(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Cp(t,e,n){if((e=$e(e))instanceof Ec)return e._internalPath;if(typeof e=="string")return O0(t,e);throw Od("Field path arguments must be of type string or ",t,!1,void 0,n)}const S5=new RegExp("[~\\*/\\[\\]]");function O0(t,e,n){if(e.search(S5)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ec(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Od(t,e,n,s,i){const a=s&&!s.isEmpty(),r=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(a||r)&&(u+=" (found",a&&(u+=` in field ${s}`),r&&(u+=` in document ${i}`),u+=")"),new J(U.INVALID_ARGUMENT,o+t+u)}function y2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,s,i,a){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ch("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C5 extends x2{data(){return super.data()}}function Ch(t,e){return typeof e=="string"?O0(t,e):e instanceof Ec?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M0{}class v2 extends M0{}function Gn(t,e,...n){let s=[];e instanceof M0&&s.push(e),s=s.concat(n),function(a){const r=a.filter(u=>u instanceof V0).length,o=a.filter(u=>u instanceof Rh).length;if(r>1||r>0&&o>0)throw new J(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class Rh extends v2{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Rh(e,n,s)}_apply(e){const n=this._parse(e);return _2(e._query,n),new da(e.firestore,e.converter,xp(e._query,n))}_parse(e){const n=Tc(e.firestore);return function(a,r,o,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){l_(m,h);const b=[];for(const N of m)b.push(r_(u,a,N));p={arrayValue:{values:b}}}else p=r_(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||l_(m,h),p=A5(o,r,m,h==="in"||h==="not-in");return Tt.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zs(t,e,n){const s=e,i=Ch("where",t);return Rh._create(i,s,n)}class V0 extends M0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new V0(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let r=i;const o=a.getFlattenedFilters();for(const u of o)_2(r,u),r=xp(r,u)}(e._query,n),new da(e.firestore,e.converter,xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class P0 extends v2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new P0(e,n)}_apply(e){const n=function(i,a,r){if(i.startAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qo(a,r)}(e._query,this._field,this._direction);return new da(e.firestore,e.converter,function(i,a){const r=i.explicitOrderBy.concat([a]);return new xl(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Fa(t,e="asc"){const n=e,s=Ch("orderBy",t);return P0._create(s,n)}function r_(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new J(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xN(e)&&n.indexOf("/")!==-1)throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ye.fromString(n));if(!ae.isDocumentKey(s))throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wv(t,new ae(s))}if(n instanceof ht)return wv(t,n._key);throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(n)}.`)}function l_(t,e){if(!Array.isArray(t)||t.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _2(t,e){const n=function(i,a){for(const r of i)for(const o of r.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class R5{convertValue(e,n="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ca(e,(i,a)=>{s[i]=this.convertValue(a,n)}),s}convertVectorValue(e){var s,i,a;const n=(a=(i=(s=e.fields)==null?void 0:s[jd].arrayValue)==null?void 0:i.values)==null?void 0:a.map(r=>yt(r.doubleValue));return new ys(n)}convertGeoPoint(e){return new gs(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ph(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Go(e));default:return null}}convertTimestamp(e){const n=Ji(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ye.fromString(e);Ue(zN(s),9688,{name:e});const i=new Ko(s.get(1),s.get(3)),a=new ae(s.popFirst(5));return i.isEqual(n)||Ws(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends x2{constructor(e,n,s,i,a,r){super(e,n,s,i,r),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ch("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ca._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:jt("string",Ca._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Ou extends Ca{data(e={}){return super.data(e)}}class Ra{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zl(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ou(this._firestore,this._userDataWriter,s.key,s,new Zl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>{const u=new Ou(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Zl(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const u=new Ou(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Zl(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return o.type!==0&&(d=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),h=r.indexOf(o.doc.key)),{type:k5(o.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=s0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),s.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function k5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){t=an(t,ht);const e=an(t.firestore,bs);return v5(wc(e),t._key).then(n=>T2(e,t,n))}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:jt("string",Ra._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class z0 extends R5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function w2(t){t=an(t,da);const e=an(t.firestore,bs),n=wc(e),s=new z0(e);return b2(t._query),_5(n,t._query).then(i=>new Ra(e,s,t,i))}function kh(t,e,n){t=an(t,ht);const s=an(t.firestore,bs),i=L0(t.converter,e,n);return jc(s,[k0(Tc(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,rn.none())])}function E2(t,e,n,...s){t=an(t,ht);const i=an(t.firestore,bs),a=Tc(i);let r;return r=typeof(e=$e(e))=="string"||e instanceof Ec?m2(a,"updateDoc",t._key,e,n,s):f2(a,"updateDoc",t._key,e),jc(i,[r.toMutation(t._key,rn.exists(!0))])}function I5(t){return jc(an(t.firestore,bs),[new _h(t._key,rn.none())])}function D5(t,e){const n=an(t.firestore,bs),s=rt(t),i=L0(t.converter,e);return jc(n,[k0(Tc(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,rn.exists(!1))]).then(()=>s)}function ft(t,...e){var u,d,h;t=$e(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||a_(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(a_(e[s])){const m=e[s];e[s]=(u=m.next)==null?void 0:u.bind(m),e[s+1]=(d=m.error)==null?void 0:d.bind(m),e[s+2]=(h=m.complete)==null?void 0:h.bind(m)}let a,r,o;if(t instanceof ht)r=an(t.firestore,bs),o=gh(t._key.path),a={next:m=>{e[s]&&e[s](T2(r,t,m))},error:e[s+1],complete:e[s+2]};else{const m=an(t,da);r=an(m.firestore,bs),o=m._query;const p=new z0(r);a={next:y=>{e[s]&&e[s](new Ra(r,p,m,y))},error:e[s+1],complete:e[s+2]},b2(t._query)}return function(p,y,b,N){const R=new C0(N),w=new j0(y,R,b);return p.asyncQueue.enqueueAndForget(async()=>E0(await Dd(p),w)),()=>{R.Nu(),p.asyncQueue.enqueueAndForget(async()=>T0(await Dd(p),w))}}(wc(r),o,i,a)}function jc(t,e){return function(s,i){const a=new Fs;return s.asyncQueue.enqueueAndForget(async()=>o5(await b5(s),i,a)),a.promise}(wc(t),e)}function T2(t,e,n){const s=n.docs.get(e._key),i=new z0(t);return new Ca(t,i,e._key,s,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tc(e)}set(e,n,s){this._verifyNotCommitted();const i=Qf(e,this._firestore),a=L0(i.converter,n,s),r=k0(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,s);return this._mutations.push(r.toMutation(i._key,rn.none())),this}update(e,n,s,...i){this._verifyNotCommitted();const a=Qf(e,this._firestore);let r;return r=typeof(n=$e(n))=="string"||n instanceof Ec?m2(this._dataReader,"WriteBatch.update",a._key,n,s,i):f2(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(r.toMutation(a._key,rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qf(e,this._firestore);return this._mutations=this._mutations.concat(new _h(n._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qf(t,e){if((t=$e(t)).firestore!==e)throw new J(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function qt(){return new I0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){return wc(t=an(t,bs)),new O5(t,e=>jc(t,e))}(function(e,n=!0){(function(i){pl=i})(Xa),La(new Xi("firestore",(s,{instanceIdentifier:i,options:a})=>{const r=s.getProvider("app").getImmediate(),o=new bs(new SO(s.getProvider("auth-internal")),new kO(r,s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(d.options.projectId,h)}(r,i),r);return a={useFetchStreams:n,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),ds(cv,uv,e),ds(cv,uv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="firebasestorage.googleapis.com",j2="storageBucket",M5=2*60*1e3,V5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends Ns{constructor(e,n,s=0){super(Yf(e),`Firebase Storage: ${n} (${Yf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mt||(mt={}));function Yf(t){return"storage/"+t}function B0(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(mt.UNKNOWN,t)}function P5(t){return new pt(mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function L5(t){return new pt(mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(mt.UNAUTHENTICATED,t)}function z5(){return new pt(mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function B5(t){return new pt(mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function q5(){return new pt(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function F5(){return new pt(mt.CANCELED,"User canceled the upload/download.")}function H5(t){return new pt(mt.INVALID_URL,"Invalid URL '"+t+"'.")}function G5(t){return new pt(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function K5(){return new pt(mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+j2+"' property when initializing the app?")}function $5(){return new pt(mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q5(){return new pt(mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y5(t){return new pt(mt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rp(t){return new pt(mt.INVALID_ARGUMENT,t)}function A2(){return new pt(mt.APP_DELETED,"The Firebase app was deleted.")}function X5(t){return new pt(mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Eo(t,e){return new pt(mt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bl(t){throw new pt(mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=jn.makeFromUrl(e,n)}catch{return new jn(e,"")}if(s.path==="")return s;throw G5(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const r="(/(.*))?$",o=new RegExp("^gs://"+i+r,"i"),u={bucket:1,path:3};function d(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${h}/b/${i}/o${p}`,"i"),b={bucket:1,path:3},N=n===N2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",w=new RegExp(`^https?://${N}/${i}/${R}`,"i"),E=[{regex:o,indices:u,postModify:a},{regex:y,indices:b,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let I=0;I<E.length;I++){const M=E[I],L=M.regex.exec(e);if(L){const v=L[M.indices.bucket];let x=L[M.indices.path];x||(x=""),s=new jn(v,x),M.postModify(s);break}}if(s==null)throw H5(e);return s}}class W5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t,e,n){let s=1,i=null,a=null,r=!1,o=0;function u(){return o===2}let d=!1;function h(...R){d||(d=!0,e.apply(null,R))}function m(R){i=setTimeout(()=>{i=null,t(y,u())},R)}function p(){a&&clearTimeout(a)}function y(R,...w){if(d){p();return}if(R){p(),h.call(null,R,...w);return}if(u()||r){p(),h.call(null,R,...w);return}s<64&&(s*=2);let E;o===1?(o=2,E=0):E=(s+Math.random())*1e3,m(E)}let b=!1;function N(R){b||(b=!0,p(),!d&&(i!==null?(R||(o=2),clearTimeout(i),m(0)):R||(o=1)))}return m(0),a=setTimeout(()=>{r=!0,N(!0)},n),N}function Z5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t){return t!==void 0}function tM(t){return typeof t=="object"&&!Array.isArray(t)}function q0(t){return typeof t=="string"||t instanceof String}function c_(t){return F0()&&t instanceof Blob}function F0(){return typeof Blob<"u"}function u_(t,e,n,s){if(s<e)throw Rp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Rp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function S2(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var ka;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ka||(ka={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,s,i,a,r,o,u,d,h,m,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=r,this.callback_=o,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,N)=>{this.resolve_=b,this.reject_=N,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new lu(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const r=o=>{const u=o.loaded,d=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(r),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(r),this.pendingConnection_=null;const o=a.getErrorCode()===ka.NO_ERROR,u=a.getStatus();if(!o||nM(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===ka.ABORT;s(!1,new lu(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;s(!0,new lu(d,a))})},n=(s,i)=>{const a=this.resolve_,r=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(o,o.getResponse());eM(u)?a(u):a()}catch(u){r(u)}else if(o!==null){const u=B0();u.serverResponse=o.getErrorText(),this.errorCallback_?r(this.errorCallback_(o,u)):r(u)}else if(i.canceled){const u=this.appDelete_?A2():F5();r(u)}else{const u=q5();r(u)}};this.canceled_?n(!1,new lu(!1,null,!0)):this.backoffId_=J5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Z5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lu{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function iM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oM(t,e,n,s,i,a,r=!0,o=!1){const u=S2(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return rM(h,e),iM(h,n),aM(h,a),lM(h,s),new sM(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function uM(...t){const e=cM();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(F0())return new Blob(t);throw new pt(mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function dM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){if(typeof atob>"u")throw Y5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xf{constructor(e,n){this.data=e,this.contentType=n||null}}function fM(t,e){switch(t){case cs.RAW:return new Xf(C2(e));case cs.BASE64:case cs.BASE64URL:return new Xf(R2(t,e));case cs.DATA_URL:return new Xf(pM(e),gM(e))}throw B0()}function C2(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=s,r=t.charCodeAt(++n);s=65536|(a&1023)<<10|r&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function mM(t){let e;try{e=decodeURIComponent(t)}catch{throw Eo(cs.DATA_URL,"Malformed data URL.")}return C2(e)}function R2(t,e){switch(t){case cs.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Eo(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case cs.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Eo(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hM(e)}catch(i){throw i.message.includes("polyfill")?i:Eo(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class k2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Eo(cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=yM(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function pM(t){const e=new k2(t);return e.base64?R2(cs.BASE64,e.rest):mM(e.rest)}function gM(t){return new k2(t).contentType}function yM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){let s=0,i="";c_(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(c_(this.data_)){const s=this.data_,i=dM(s,e,n);return i===null?null:new wi(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new wi(s,!0)}}static getBlob(...e){if(F0()){const n=e.map(s=>s instanceof wi?s.data_:s);return new wi(uM.apply(null,n))}else{const n=e.map(r=>q0(r)?fM(cs.RAW,r).data:r.data_);let s=0;n.forEach(r=>{s+=r.byteLength});const i=new Uint8Array(s);let a=0;return n.forEach(r=>{for(let o=0;o<r.length;o++)i[a++]=r[o]}),new wi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){let e;try{e=JSON.parse(t)}catch{return null}return tM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function bM(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function D2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t,e){return e}class tn{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||vM}}let ou=null;function _M(t){return!q0(t)||t.length<2?t:D2(t)}function O2(){if(ou)return ou;const t=[];t.push(new tn("bucket")),t.push(new tn("generation")),t.push(new tn("metageneration")),t.push(new tn("name","fullPath",!0));function e(a,r){return _M(r)}const n=new tn("name");n.xform=e,t.push(n);function s(a,r){return r!==void 0?Number(r):r}const i=new tn("size");return i.xform=s,t.push(i),t.push(new tn("timeCreated")),t.push(new tn("updated")),t.push(new tn("md5Hash",null,!0)),t.push(new tn("cacheControl",null,!0)),t.push(new tn("contentDisposition",null,!0)),t.push(new tn("contentEncoding",null,!0)),t.push(new tn("contentLanguage",null,!0)),t.push(new tn("contentType",null,!0)),t.push(new tn("metadata","customMetadata",!0)),ou=t,ou}function wM(t,e){function n(){const s=t.bucket,i=t.fullPath,a=new jn(s,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function EM(t,e,n){const s={};s.type="file";const i=n.length;for(let a=0;a<i;a++){const r=n[a];s[r.local]=r.xform(s,e[r.server])}return wM(s,t),s}function M2(t,e,n){const s=I2(e);return s===null?null:EM(t,s,n)}function TM(t,e,n,s){const i=I2(e);if(i===null||!q0(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const r=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+r(h)+"/o/"+r(m),y=Ih(p,n,s),b=S2({alt:"media",token:d});return y+b})[0]}function NM(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class H0{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){if(!t)throw B0()}function jM(t,e){function n(s,i){const a=M2(t,i,e);return V2(a!==null),a}return n}function AM(t,e){function n(s,i){const a=M2(t,i,e);return V2(a!==null),TM(a,i,t.host,t._protocol)}return n}function P2(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=z5():i=U5():n.getStatus()===402?i=L5(t.bucket):n.getStatus()===403?i=B5(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function L2(t){const e=P2(t);function n(s,i){let a=e(s,i);return s.getStatus()===404&&(a=P5(t.path)),a.serverResponse=i.serverResponse,a}return n}function SM(t,e,n){const s=e.fullServerUrl(),i=Ih(s,t.host,t._protocol),a="GET",r=t.maxOperationRetryTime,o=new H0(i,a,AM(t,n),r);return o.errorHandler=L2(e),o}function CM(t,e){const n=e.fullServerUrl(),s=Ih(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function r(u,d){}const o=new H0(s,i,r,a);return o.successCodes=[200,204],o.errorHandler=L2(e),o}function RM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function kM(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=RM(null,e)),s}function IM(t,e,n,s,i){const a=e.bucketOnlyServerUrl(),r={"X-Goog-Upload-Protocol":"multipart"};function o(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const u=o();r["Content-Type"]="multipart/related; boundary="+u;const d=kM(e,s,i),h=NM(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",y=wi.getBlob(m,s,p);if(y===null)throw $5();const b={name:d.fullPath},N=Ih(a,t.host,t._protocol),R="POST",w=t.maxUploadRetryTime,_=new H0(N,R,jM(t,n),w);return _.urlParams=b,_.headers=r,_.body=y.uploadData(),_.errorHandler=P2(e),_}class DM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ka.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ka.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ka.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i,a){if(this.sent_)throw Bl("cannot .send() more than once");if(ra(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const r in a)a.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,a[r].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class OM extends DM{initXhr(){this.xhr_.responseType="text"}}function G0(){return new OM}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this._service=e,n instanceof jn?this._location=n:this._location=jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ha(e,n)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return D2(this._location.path)}get storage(){return this._service}get parent(){const e=xM(this._location.path);if(e===null)return null;const n=new jn(this._location.bucket,e);return new Ha(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw X5(e)}}function MM(t,e,n){t._throwIfRoot("uploadBytes");const s=IM(t.storage,t._location,O2(),new wi(e,!0),n);return t.storage.makeRequestWithTokens(s,G0).then(i=>({metadata:i,ref:t}))}function VM(t){t._throwIfRoot("getDownloadURL");const e=SM(t.storage,t._location,O2());return t.storage.makeRequestWithTokens(e,G0).then(n=>{if(n===null)throw Q5();return n})}function PM(t){t._throwIfRoot("deleteObject");const e=CM(t.storage,t._location);return t.storage.makeRequestWithTokens(e,G0)}function LM(t,e){const n=bM(t._location.path,e),s=new jn(t._location.bucket,n);return new Ha(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){return/^[A-Za-z]+:\/\//.test(t)}function zM(t,e){return new Ha(t,e)}function U2(t,e){if(t instanceof K0){const n=t;if(n._bucket==null)throw K5();const s=new Ha(n,n._bucket);return e!=null?U2(s,e):s}else return e!==void 0?LM(t,e):t}function BM(t,e){if(e&&UM(e)){if(t instanceof K0)return zM(t,e);throw Rp("To use ref(service, url), the first argument must be a Storage instance.")}else return U2(t,e)}function d_(t,e){const n=e==null?void 0:e[j2];return n==null?null:jn.makeFromBucketSpec(n,t)}function qM(t,e,n,s={}){t.host=`${e}:${n}`;const i=ra(e);i&&(qg(`https://${t.host}/b`),Fg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=s;a&&(t._overrideAuthToken=typeof a=="string"?a:nT(a,t.app.options.projectId))}class K0{constructor(e,n,s,i,a,r=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=r,this._bucket=null,this._host=N2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M5,this._maxUploadRetryTime=V5,this._requests=new Set,i!=null?this._bucket=jn.makeFromBucketSpec(i,this._host):this._bucket=d_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=d_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ha(this,e)}_makeRequest(e,n,s,i,a=!0){if(this._deleted)return new W5(A2());{const r=oM(e,this._appId,s,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(r),r.getPromise().then(()=>this._requests.delete(r),()=>this._requests.delete(r)),r}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const h_="@firebase/storage",f_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="storage";function B2(t,e,n){return t=$e(t),MM(t,e,n)}function $0(t){return t=$e(t),VM(t)}function FM(t){return t=$e(t),PM(t)}function Dh(t,e){return t=$e(t),BM(t,e)}function HM(t=Kg(),e){t=$e(t);const s=oh(t,z2).getImmediate({identifier:e}),i=Z1("storage");return i&&q2(s,...i),s}function q2(t,e,n,s={}){qM(t,e,n,s)}function GM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new K0(n,s,i,e,Xa)}function KM(){La(new Xi(z2,GM,"PUBLIC").setMultipleInstances(!0)),ds(h_,f_,""),ds(h_,f_,"esm2020")}KM();const Wf={},$M={apiKey:"fake-api-key",authDomain:"localhost",projectId:"evcwebsite12345",storageBucket:"evcwebsite12345.firebasestorage.app"},Q0=aT($M),Jt=TO(Q0),Ee=w5(Q0),Ac=HM(Q0),QM=typeof window<"u"&&["localhost","127.0.0.1","::1"].includes(window.location.hostname),YM=(Wf==null?void 0:Wf.VITE_USE_EMULATORS)==="true"||QM;let m_=!1;if(!m_&&YM){try{AT(Jt,"http://localhost:9099")}catch{}try{u2(Ee,"localhost",8080)}catch{}try{q2(Ac,"localhost",9199)}catch{}m_=!0}try{fD(Jt,PT)}catch{}let p_=0;DT(Jt,async t=>{if(!t)return;const e=Date.now();if(e-p_>5*60*1e3)try{await t.getIdToken(!0),p_=e}catch{}});const g_="http://localhost:5000";async function y_({forceRefresh:t=!1}={}){const e=(Jt==null?void 0:Jt.currentUser)||null;if(!e)return null;try{const n=await e.getIdToken(t);return n?`Bearer ${n}`:null}catch{return null}}async function Oh(t,e={}){const{method:n="GET",headers:s={},body:i,isForm:a=!1}=e,r=await y_({forceRefresh:!1}),o={method:n,headers:{...s,...r?{Authorization:r}:{}}};i!==void 0&&(a?o.body=i:(o.headers["Content-Type"]="application/json",o.body=typeof i=="string"?i:JSON.stringify(i)));let u=await fetch(`${g_}${t}`,o),d;if((u.headers.get("content-type")||"").includes("application/json"))try{d=await u.json()}catch{d=null}else d=await u.text().catch(()=>null);if(!u.ok&&(u.status===401||u.status===403)){const m=await y_({forceRefresh:!0});if(m){const p={...o,headers:{...o.headers,Authorization:m}};if(u=await fetch(`${g_}${t}`,p),(u.headers.get("content-type")||"").includes("application/json"))try{d=await u.json()}catch{d=null}else d=await u.text().catch(()=>null)}}if(!u.ok){const m=new Error(d&&d.error||u.statusText||"Request failed");throw m.status=u.status,m.data=d,m}return d}const ei=(t,e)=>Oh(t,{method:"GET",headers:e}),Mh=(t,e,n)=>Oh(t,{method:"POST",body:e,headers:n}),Y0=(t,e,n)=>Oh(t,{method:"PUT",body:e,headers:n}),XM=(t,e,n)=>Oh(t,{method:"POST",body:e,headers:n,isForm:!0}),WM=[{label:"Admin • Dashboard",to:"/admin"},{label:"Admin • Assignments",to:"/admin/assignments"},{label:"Admin • Trajects",to:"/admin/trajects"},{label:"Admin • Users",to:"/admin/users"},{label:"Admin • Profile",to:"/admin/profile"},{label:"Coach • Dashboard",to:"/coach"},{label:"Coach • My Customers",to:"/coach/customers"},{label:"Coach • Feedback",to:"/coach/feedback"},{label:"Coach • Messages",to:"/coach/messages"},{label:"Customer • Dashboard",to:"/customer/dashboard"},{label:"Customer • Messages",to:"/customer/messages"},{label:"Customer • Profile",to:"/customer/profile"},{label:"Test • Create Account",to:"/testing/create-account",badge:"DEV"}],JM=()=>{const t=Ts(),e=aa(),[n,s]=j.useState(!1),[i,a]=j.useState(()=>!!Jt.currentUser);j.useEffect(()=>{const h=Zg(Jt,m=>{a(!!m)});return()=>h()},[]);const r=j.useMemo(()=>WM.map(h=>({...h,active:e.pathname===h.to||e.pathname.startsWith(`${h.to}/`)})),[e.pathname]),o=h=>{t(h),s(!1)},u=async()=>{try{await OT(Jt)}catch{}localStorage.removeItem("user"),localStorage.removeItem("impersonationBackup"),a(!1),t("/login",{replace:!0}),s(!1)},d=()=>{t("/login"),s(!1)};return l.jsxs("header",{className:"sticky top-0 z-30 border-b border-evc-blue-500/40 bg-evc-blue-600/95 text-white backdrop-blur",children:[l.jsxs("div",{className:"mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(rh,{className:"inline-flex shrink-0",tone:"dark"}),l.jsx("button",{type:"button",onClick:()=>o("/"),className:"text-sm font-medium text-white transition hover:text-white/80",children:"EVC Portfolio"})]}),l.jsx("nav",{className:"hidden items-center gap-6 text-sm font-medium text-white/80 md:flex",children:r.map(h=>l.jsxs("button",{type:"button",onClick:()=>o(h.to),className:`relative inline-flex items-center gap-2 transition hover:text-white ${h.active?"text-white":""}`,children:[l.jsx("span",{children:h.label}),h.badge?l.jsx("span",{className:"rounded-full bg-white/10 px-2 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-white/90",children:h.badge}):null,h.active&&l.jsx("span",{className:"absolute -bottom-2 left-0 right-0 h-0.5 rounded-full bg-white"})]},h.to))}),l.jsxs("div",{className:"flex items-center gap-3",children:[i?l.jsxs("button",{type:"button",onClick:u,className:"hidden items-center gap-2 rounded-full border border-white/40 px-4 py-2 text-sm font-medium text-white transition hover:border-white hover:bg-white/10 md:inline-flex",children:[l.jsx(jb,{className:"h-4 w-4"}),l.jsx("span",{children:"Logout"})]}):l.jsxs("button",{type:"button",onClick:d,className:"hidden items-center gap-2 rounded-full border border-white/40 px-4 py-2 text-sm font-medium text-white transition hover:border-white hover:bg-white/10 md:inline-flex",children:[l.jsx(ep,{className:"h-4 w-4"}),l.jsx("span",{children:"Login"})]}),l.jsx("button",{type:"button",onClick:()=>s(h=>!h),className:"inline-flex items-center justify-center rounded-full border border-white/40 p-2 text-white transition hover:border-white hover:text-white md:hidden","aria-label":"Toggle navigation",children:n?l.jsx(kk,{className:"h-5 w-5"}):l.jsx(H1,{className:"h-5 w-5"})})]})]}),n&&l.jsx("div",{className:"border-t border-white/20 bg-evc-blue-600/95 text-white md:hidden",children:l.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-1 px-4 py-3 text-sm font-medium text-white/80",children:[r.map(h=>l.jsxs("button",{type:"button",onClick:()=>o(h.to),className:`flex items-center justify-between rounded-lg px-3 py-2 text-left transition hover:bg-white/10 ${h.active?"bg-white/10 text-white":""}`,children:[l.jsxs("span",{className:"flex items-center gap-2",children:[h.label,h.badge?l.jsx("span",{className:"rounded-full bg-white/10 px-2 py-0.5 text-[0.6rem] font-semibold uppercase tracking-wide text-white/90",children:h.badge}):null]}),h.active&&l.jsx("span",{className:"text-xs font-semibold uppercase text-white",children:"Now"})]},h.to)),i?l.jsxs("button",{type:"button",onClick:u,className:"mt-2 inline-flex items-center justify-center gap-2 rounded-lg bg-white/15 px-3 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-white/20",children:[l.jsx(jb,{className:"h-4 w-4"}),l.jsx("span",{children:"Logout"})]}):l.jsxs("button",{type:"button",onClick:d,className:"mt-2 inline-flex items-center justify-center gap-2 rounded-lg bg-white/15 px-3 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-white/20",children:[l.jsx(ep,{className:"h-4 w-4"}),l.jsx("span",{children:"Login"})]})]})})]})},X0=({title:t,description:e,kicker:n,actions:s,children:i,showHeader:a=!0})=>l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx(JM,{}),l.jsxs("main",{className:"mx-auto w-full max-w-6xl px-4 pb-16 pt-10 sm:px-6 lg:px-8",children:[a&&(t||e||n||s)?l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-6 border-b border-slate-200 pb-8",children:[l.jsxs("div",{className:"max-w-2xl space-y-2",children:[n?l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-brand-600",children:n}):null,t?l.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900 sm:text-4xl",children:t}):null,e?l.jsx("p",{className:"text-base text-slate-500 sm:text-lg",children:e}):null]}),s?l.jsx("div",{className:"flex flex-col items-stretch gap-3 sm:flex-row sm:items-center",children:s}):null]}):null,l.jsx("div",{className:a?"mt-8 space-y-8":"space-y-8",children:i})]})]}),ZM=()=>{const[t,e]=j.useState(""),[n,s]=j.useState(""),[i,a]=j.useState(!1),[r,o]=j.useState(""),u=Ts(),d=async h=>{var m;h.preventDefault(),a(!0),o("");try{const y=await(await hD(Jt,t,n)).user.getIdToken(),b=await Mh("/auth/login/firebase",{idToken:y});b!=null&&b.user&&localStorage.setItem("user",JSON.stringify(b.user));const N=b.redirectPath||"/dashboard";u(N,{replace:!0})}catch(p){o(((m=p==null?void 0:p.data)==null?void 0:m.error)||(p==null?void 0:p.message)||"Inloggen is niet gelukt. Controleer je gegevens.")}finally{a(!1)}};return l.jsx(X0,{kicker:"Inloggen",title:"Welkom terug bij EVC",description:"Log in om je traject te volgen, bewijsstukken te uploaden en contact te houden met je coach. Nieuwe accounts worden door een administrator aangemaakt.",children:l.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx(ep,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Log in op je account"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Gebruik het e-mailadres waarmee je bent aangemeld voor het traject."})]})]}),l.jsxs("form",{onSubmit:d,className:"mt-6 space-y-5",children:[r?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:r}):null,l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"login-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),l.jsx("input",{id:"login-email",type:"email",placeholder:"jij@voorbeeld.nl",value:t,onChange:h=>e(h.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"login-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Wachtwoord"}),l.jsx("input",{id:"login-password",type:"password",placeholder:"Vul je wachtwoord in",value:n,onChange:h=>s(h.target.value),className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("label",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),l.jsx("span",{children:"Onthoud mij"})]}),l.jsx("button",{type:"button",onClick:()=>alert("Neem contact op met support om je wachtwoord te resetten."),className:"font-medium text-brand-600 transition hover:text-brand-500",children:"Wachtwoord vergeten?"})]}),l.jsx("button",{type:"submit",disabled:i,className:"mt-4 w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:i?"Bezig met inloggen...":"Inloggen"})]}),l.jsx("p",{className:"mt-6 text-center text-sm text-slate-500",children:"Hulp nodig? Neem contact op met het EVC-team."})]})})},eV=["Je portfolio opbouwen met duidelijke stappen","Bewijsstukken veilig uploaden en beheren","Berichten sturen naar coaches en begeleiders","Voortgang bijhouden via planning en taken"],tV=()=>l.jsxs(X0,{showHeader:!1,children:[l.jsx("section",{className:"overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 via-brand-500 to-brand-400 text-white shadow-xl",children:l.jsxs("div",{className:"grid gap-10 px-8 py-16 sm:px-12 lg:grid-cols-2 lg:px-16",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.32em] text-white/60",children:"EVC platform"}),l.jsx("h1",{className:"mt-6 text-4xl font-semibold leading-tight tracking-tight sm:text-5xl",children:"Welkom bij jouw EVC portfolio"}),l.jsx("p",{className:"mt-6 max-w-xl text-lg text-white/80",children:"Werk stap voor stap naar je erkenning toe. Verzamel bewijsstukken, werk samen met je coach en houd alles op één plek bij."}),l.jsxs("div",{className:"mt-10 flex flex-wrap gap-4",children:[l.jsxs(Mr,{to:"/login",className:"inline-flex items-center justify-center gap-2 rounded-full bg-white px-5 py-3 text-sm font-semibold text-brand-600 shadow-lg shadow-brand-900/10 transition hover:-translate-y-0.5 hover:bg-slate-50",children:["Naar login",l.jsx(zi,{className:"h-4 w-4"})]}),l.jsx("span",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-white/40 px-5 py-3 text-sm font-semibold text-white/80",children:"Nieuwe accounts? Neem contact op met het EVC-team"})]})]}),l.jsxs("div",{className:"relative isolate",children:[l.jsx("div",{className:"absolute -top-10 right-10 h-32 w-32 rounded-full bg-white/10 blur-3xl","aria-hidden":"true"}),l.jsx("div",{className:"absolute -bottom-12 left-6 h-24 w-24 rounded-full bg-brand-200/40 blur-3xl","aria-hidden":"true"}),l.jsxs("div",{className:"relative rounded-2xl border border-white/20 bg-white/10 p-8 backdrop-blur",children:[l.jsx("h2",{className:"text-xl font-semibold text-white",children:"Alles in één vertrouwde omgeving"}),l.jsx("ul",{className:"mt-6 space-y-4",children:eV.map(t=>l.jsxs("li",{className:"flex items-start gap-3 text-sm text-white/85",children:[l.jsx(Bi,{className:"mt-0.5 h-5 w-5 flex-none text-white"}),l.jsx("span",{children:t})]},t))})]})]})]})}),l.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor kandidaten"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Werk op je eigen tempo aan opdrachten, voeg reflecties toe en beheer bewijsstukken."})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Voor coaches"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Krijg realtime inzicht in voortgang, geef feedback en begeleid kandidaten gericht."})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Veilig en transparant"}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Bewaar bestanden veilig en werk samen in een omgeving met duidelijke rollen en rechten."})]})]}),l.jsxs("section",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs(Mr,{to:"/admin",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[l.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:l.jsx(ah,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Bekijk de admin-ervaring"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Navigeer naar het beheerdersdashboard met klantoverzicht en toewijzingen."}),l.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar admin-dashboard",l.jsx(zi,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]}),l.jsxs(Mr,{to:"/coach",className:"group flex items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-brand-400 hover:shadow-lg",children:[l.jsx("span",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-brand-50 text-brand-600",children:l.jsx(uc,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Ervaar het coachportaal"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Ga direct naar het coachdashboard met klantkaarten, feedback en berichten."}),l.jsxs("span",{className:"mt-3 inline-flex items-center gap-1 text-sm font-medium text-brand-600",children:["Naar coach-dashboard",l.jsx(zi,{className:"h-4 w-4 transition group-hover:translate-x-1"})]})]})]})]})]});function W0(t){if(!(t!=null&&t.exists()))return null;const e=t.data();return{id:t.id,...e}}function nV(t){const e=[];if(Array.isArray(t)&&t.length>0){const n=t.map(s=>typeof s=="string"?s.trim().toLowerCase():"").filter(Boolean);n.length===1?e.push(Zs("role","==",n[0])):n.length>1&&e.push(Zs("role","in",n.slice(0,10)))}return e}function kp(t,e={}){const{roles:n}=e,s=ln(Ee,"users"),i=Gn(s,...nV(n));return ft(i,a=>{const r=a.docs.map(W0).filter(Boolean).sort((o,u)=>{const d=(o.name||"").toLowerCase(),h=(u.name||"").toLowerCase();return d.localeCompare(h)});t({data:r,error:null})},a=>t({data:null,error:a}))}function sV(t){const e=ln(Ee,"assignments"),n=Gn(e,Fa("createdAt","desc"));return ft(n,s=>{const i=s.docs.map(a=>{var o,u;const r=a.data();return{id:a.id,customerId:r.customerId||null,coachId:r.coachId||null,status:r.status||"pending",createdAt:r.createdAt?((u=(o=r.createdAt).toDate)==null?void 0:u.call(o))??r.createdAt:null,createdBy:r.createdBy||null}});t({data:i,error:null})},s=>t({data:null,error:s}))}async function iV({customerId:t,coachId:e,status:n="active"}){if(!t||!e)throw new Error("customerId and coachId are verplicht");const s=Jt.currentUser,i=(s==null?void 0:s.uid)??null,a=rt(Ee,"assignments",t),r=await U0(a).catch(()=>null),o=r&&r.exists()?r.data():null,u=(o==null?void 0:o.coachId)||null,d=(o==null?void 0:o.createdAt)||null,h=(o==null?void 0:o.createdBy)||null,m=o_(Ee),p={customerId:t,coachId:e,status:n,createdBy:h||i||null,updatedAt:qt()};d?p.createdAt=d:p.createdAt=qt(),m.set(a,p,{merge:!0});const y=rt(Ee,"users",t);m.set(y,{coachId:e,coachLinkedAt:qt()},{merge:!0});const b=rt(Ee,"assignmentsByCoach",e,"customers",t),N={customerId:t,coachId:e,status:n,createdBy:h||i||null,updatedAt:qt()};if(d?N.createdAt=d:N.createdAt=qt(),m.set(b,N,{merge:!0}),u&&u!==e){const R=rt(Ee,"assignmentsByCoach",u,"customers",t);m.delete(R)}if(await m.commit(),!o){const R=ln(Ee,"assignments"),_=(await w2(Gn(R,Zs("customerId","==",t)))).docs.filter(E=>E.id!==t);if(_.length>0){const E=o_(Ee);_.forEach(I=>E.delete(I.ref)),await E.commit()}}}function F2(t,e){if(!t)return e({data:null,error:new Error("Missing uid")}),()=>{};const n=rt(Ee,"users",t),s=rt(Ee,"adminProfiles",t);let i=null,a=null,r=null,o=null;const u=()=>{if(r||o){e({data:null,error:r||o});return}if(!i){e({data:null,error:null});return}e({data:{...i,...a},error:null})},d=ft(n,m=>{i=W0(m),r=null,u()},m=>{r=m,u()}),h=ft(s,m=>{a=m.exists()?m.data():null,o=null,u()},m=>{o=m,u()});return()=>{d(),h()}}async function aV(){const t=ln(Ee,"users"),e=await w2(t),n=new Map;return e.forEach(s=>{const i=W0(s);i&&n.set(i.id,i)}),n}const rV=()=>{const t=Ts(),[e,n]=j.useState([]),[s,i]=j.useState(null),[a,r]=j.useState(!0),[o,u]=j.useState(null),[d,h]=j.useState(null);j.useEffect(()=>{r(!0);const y=kp(({data:b,error:N})=>{if(N){i(N),r(!1);return}n(Array.isArray(b)?b:[]),i(null),r(!1)});return()=>{typeof y=="function"&&y()}},[]);const m=y=>y?y.charAt(0).toUpperCase()+y.slice(1):"Onbekend",p=async y=>{var b;if(!(!y||y.role!=="customer")){u(null),h(y.id);try{const N=await Mh("/auth/admin/impersonate",{firebaseUid:y.id});if(!(N!=null&&N.customerCustomToken))throw new Error("Geen impersonatie-token ontvangen");const R=localStorage.getItem("user")||null;let w=null;if(R)try{w=JSON.parse(R)}catch{w=null}const _={user:R,userData:w,customerFirebaseUid:y.id,customerName:y.name||"",createdAt:new Date().toISOString(),adminCustomToken:N.adminCustomToken||null};localStorage.setItem("impersonationBackup",JSON.stringify(_)),await IT(Jt,N.customerCustomToken),N.user&&localStorage.setItem("user",JSON.stringify(N.user)),t("/customer",{replace:!0})}catch(N){const R=((b=N==null?void 0:N.data)==null?void 0:b.error)||(N==null?void 0:N.message)||"Kon klantomgeving niet openen";u(R)}finally{h(null)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Customer accounts"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beheer klantprofielen en stap in hun omgeving om hun voortgang in te zien."})]}),s?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Kan accounts niet laden: ",s.message||"Onbekende fout"]}):null,o?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:o}):null,l.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Naam"}),l.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"E-mail"}),l.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Rol"}),l.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Actie"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:a?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Accounts laden..."})}):e.length===0?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:4,children:"Nog geen accounts gevonden."})}):e.map(y=>{const b=y.role==="customer";return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:y.name||"Naam onbekend"}),l.jsx("td",{className:"px-4 py-3",children:y.email?l.jsx("a",{href:`mailto:${y.email}`,className:"text-brand-600 hover:text-brand-500",children:y.email}):l.jsx("span",{className:"text-slate-400",children:"Geen e-mail"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:m(y.role)})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsx("button",{type:"button",onClick:()=>p(y),className:`inline-flex items-center gap-2 rounded-full px-3 py-2 text-xs font-semibold transition ${b&&d!==y.id?"bg-brand-600 text-white shadow-sm hover:bg-brand-500":"cursor-not-allowed bg-slate-100 text-slate-400"}`,disabled:!b||d===y.id,children:b?d===y.id?"Bezig...":"Open as Customer":"Alleen klanten"})})]},y.id)})})]})})]})},lV=()=>{const[t,e]=j.useState([]),[n,s]=j.useState([]),[i,a]=j.useState([]),[r,o]=j.useState({customerId:"",coachId:""}),[u,d]=j.useState(!0),[h,m]=j.useState(!0),[p,y]=j.useState(!0),[b,N]=j.useState(!1),[R,w]=j.useState(null),[_,E]=j.useState({customers:null,coaches:null,assignments:null});j.useEffect(()=>{const x=kp(({data:k,error:D})=>{if(D){E(A=>({...A,customers:D})),d(!1);return}E(A=>({...A,customers:null})),e(Array.isArray(k)?k:[]),d(!1)},{roles:["customer"]}),T=kp(({data:k,error:D})=>{if(D){E(A=>({...A,coaches:D})),m(!1);return}E(A=>({...A,coaches:null})),s(Array.isArray(k)?k:[]),m(!1)},{roles:["coach"]}),C=sV(({data:k,error:D})=>{if(D){E(A=>({...A,assignments:D})),y(!1);return}E(A=>({...A,assignments:null})),a(Array.isArray(k)?k:[]),y(!1)});return()=>{typeof x=="function"&&x(),typeof T=="function"&&T(),typeof C=="function"&&C()}},[]),j.useEffect(()=>{o(x=>{var T;return{...x,customerId:x.customerId||((T=t[0])==null?void 0:T.id)||""}})},[t]),j.useEffect(()=>{o(x=>{var T;return{...x,coachId:x.coachId||((T=n[0])==null?void 0:T.id)||""}})},[n]);const I=x=>{const{name:T,value:C}=x.target;o(k=>({...k,[T]:C}))},M=x=>{if(x.preventDefault(),!r.customerId||!r.coachId){w({type:"error",message:"Selecteer zowel een klant als een coach."});return}N(!0),w(null),iV({customerId:r.customerId,coachId:r.coachId}).then(()=>{w({type:"success",message:"Toewijzing opgeslagen."})}).catch(T=>{w({type:"error",message:(T==null?void 0:T.message)||"Toewijzing mislukt."})}).finally(()=>{N(!1)})},L=j.useMemo(()=>{const x=new Map;return t.forEach(T=>x.set(T.id,T)),n.forEach(T=>x.set(T.id,T)),x},[t,n]),v=()=>{if(!R)return null;const T=R.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return l.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${T}`,children:R.message})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Assignments"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Pair customers with their coaches and keep the overview tidy."})]}),v(),l.jsxs("form",{onSubmit:M,className:"grid gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm sm:grid-cols-4 sm:items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Customer"}),l.jsxs("select",{name:"customerId",value:r.customerId,onChange:I,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:u||t.length===0,children:[u?l.jsx("option",{value:"",children:"Laden..."}):null,!u&&t.length===0?l.jsx("option",{value:"",children:"Geen klanten beschikbaar"}):null,t.map(x=>l.jsx("option",{value:x.id,children:x.name||x.email},x.id))]})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Coach"}),l.jsxs("select",{name:"coachId",value:r.coachId,onChange:I,className:"mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",disabled:h||n.length===0,children:[h?l.jsx("option",{value:"",children:"Laden..."}):null,!h&&n.length===0?l.jsx("option",{value:"",children:"Geen coaches beschikbaar"}):null,n.map(x=>l.jsx("option",{value:x.id,children:x.name||x.email},x.id))]})]}),l.jsx("div",{className:"sm:col-span-1",children:l.jsx("button",{type:"submit",disabled:b||!r.customerId||!r.coachId,className:"inline-flex w-full items-center justify-center rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:b?"Bezig...":"Assign"})})]}),_.customers?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Klanten konden niet geladen worden: ",_.customers.message||"Onbekende fout"]}):null,_.coaches?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Coaches konden niet geladen worden: ",_.coaches.message||"Onbekende fout"]}):null,_.assignments?l.jsxs("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:["Toewijzingen konden niet geladen worden: ",_.assignments.message||"Onbekende fout"]}):null,l.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3",children:"Customer"}),l.jsx("th",{className:"px-4 py-3",children:"Coach"}),l.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 text-sm text-slate-600",children:p?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"Toewijzingen laden..."})}):i.length===0?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-slate-400",colSpan:3,children:"No assignments yet."})}):i.map(x=>{var T,C,k,D;return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:((T=L.get(x.customerId))==null?void 0:T.name)||((C=L.get(x.customerId))==null?void 0:C.email)||"Onbekende klant"}),l.jsx("td",{className:"px-4 py-3",children:((k=L.get(x.coachId))==null?void 0:k.name)||((D=L.get(x.coachId))==null?void 0:D.email)||"Onbekende coach"}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:"inline-flex rounded-full border border-slate-200 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:x.status})})]},x.id)})})]})})]})},Md=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Math.random().toString(36).slice(2,10)}`,Vd=()=>({id:Md(),code:"",title:"",description:"",desiredOutcome:"",subjectKnowledge:"",behavioralComponents:""}),Mu=()=>({id:Md(),code:"",title:"",competencies:[Vd()]}),x_=()=>({id:null,name:"",description:"",competencyGroups:[Mu()]}),oV=t=>{if(!t)return"-";try{const e=typeof t=="string"?new Date(t):t;return Number.isNaN(e.getTime())?"-":new Intl.DateTimeFormat("nl-NL",{year:"numeric",month:"short",day:"numeric"}).format(e)}catch{return"-"}},cV=(t,e=0)=>({id:Md(),code:(t==null?void 0:t.code)||"",title:(t==null?void 0:t.title)||"",order:(t==null?void 0:t.order)??e,competencies:Array.isArray(t==null?void 0:t.competencies)&&t.competencies.length>0?[...t.competencies].sort((n,s)=>((n==null?void 0:n.order)??(n==null?void 0:n.competencyOrder)??0)-((s==null?void 0:s.order)??(s==null?void 0:s.competencyOrder)??0)).map(n=>({id:Md(),code:(n==null?void 0:n.code)||"",title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",desiredOutcome:(n==null?void 0:n.desiredOutcome)||"",subjectKnowledge:(n==null?void 0:n.subjectKnowledge)||"",behavioralComponents:(n==null?void 0:n.behavioralComponents)||""})):[Vd()]}),uV=()=>{const[t,e]=j.useState([]),[n,s]=j.useState(!0),[i,a]=j.useState(null),[r,o]=j.useState(null),[u,d]=j.useState(!1),[h,m]=j.useState(null),[p,y]=j.useState(x_),[b,N]=j.useState(!1),[R,w]=j.useState(null),[_,E]=j.useState(null),I=!!p.id,M=b||u,L=j.useCallback(async()=>{s(!0),a(null);try{const K=await ei("/trajects"),W=Array.isArray(K)?K:[];return e(W),W}catch(K){const W=(K==null?void 0:K.message)||"Kon trajecten niet ophalen";return a(W),e([]),[]}finally{s(!1)}},[]),v=j.useCallback(()=>{o(null),y(x_()),m(null),w(null),E(null)},[]),x=j.useCallback(async K=>{if(K){d(!0),m(null);try{const W=await ei(`/trajects/${K}`),re=(Array.isArray(W==null?void 0:W.competencyGroups)?W.competencyGroups:[]).map((xe,ve)=>cV(xe,ve)).sort((xe,ve)=>(xe.order??0)-(ve.order??0)).map(({order:xe,...ve})=>ve);y({id:(W==null?void 0:W.id)||K,name:(W==null?void 0:W.name)||"",description:(W==null?void 0:W.description)||"",competencyGroups:re.length>0?re:[Mu()]}),o(K)}catch(W){const Y=(W==null?void 0:W.message)||"Kon traject niet laden";m(Y)}finally{d(!1)}}},[]);j.useEffect(()=>{L()},[L]),j.useEffect(()=>{if(!_&&!R)return()=>{};const K=setTimeout(()=>{E(null),w(null)},4e3);return()=>clearTimeout(K)},[_,R]);const T=K=>{const{name:W,value:Y}=K.target;y(re=>({...re,[W]:Y}))},C=(K,W,Y)=>{y(re=>({...re,competencyGroups:re.competencyGroups.map(xe=>xe.id===K?{...xe,[W]:Y}:xe)}))},k=()=>{M||y(K=>({...K,competencyGroups:[...K.competencyGroups,Mu()]}))},D=K=>{M||y(W=>{const Y=W.competencyGroups.filter(re=>re.id!==K);return{...W,competencyGroups:Y.length>0?Y:[Mu()]}})},A=(K,W,Y,re)=>{y(xe=>({...xe,competencyGroups:xe.competencyGroups.map(ve=>ve.id!==K?ve:{...ve,competencies:ve.competencies.map(Qe=>Qe.id===W?{...Qe,[Y]:re}:Qe)})}))},de=K=>{M||y(W=>({...W,competencyGroups:W.competencyGroups.map(Y=>Y.id===K?{...Y,competencies:[...Y.competencies,Vd()]}:Y)}))},G=(K,W)=>{M||y(Y=>({...Y,competencyGroups:Y.competencyGroups.map(re=>{if(re.id!==K)return re;const xe=re.competencies.filter(ve=>ve.id!==W);return{...re,competencies:xe.length>0?xe:[Vd()]}})}))},V=j.useMemo(()=>p.competencyGroups.map((K,W)=>{const Y=K.code.trim(),re=K.title.trim(),xe=K.competencies.map((ve,Qe)=>{const ts={code:ve.code.trim(),title:ve.title.trim(),description:ve.description.trim(),desiredOutcome:ve.desiredOutcome.trim(),subjectKnowledge:ve.subjectKnowledge.trim(),behavioralComponents:ve.behavioralComponents.trim()};return Object.values(ts).some(F=>F.length>0)?{...ts,rawId:ve.id,groupId:K.id,competencyIndex:Qe}:null}).filter(Boolean);return{id:K.id,groupIndex:W,trimmedCode:Y,trimmedTitle:re,competencies:xe}}).filter(K=>K.trimmedCode||K.trimmedTitle||K.competencies.length>0),[p.competencyGroups]),Q=j.useMemo(()=>V.some(K=>!K.trimmedCode||!K.trimmedTitle),[V]),q=j.useMemo(()=>V.some(K=>K.competencies.some(W=>!W.code||!W.title||!W.desiredOutcome||!W.subjectKnowledge||!W.behavioralComponents)),[V]),ie=j.useMemo(()=>V.filter(K=>K.competencies.length>0),[V]),ye=j.useMemo(()=>!(M||!p.name.trim()||ie.length===0||Q||q),[M,p.name,ie,Q,q]),qe=async K=>{var Y;if(K.preventDefault(),!ye)return;N(!0),w(null),E(null);const W={name:p.name.trim(),description:p.description.trim(),competencyGroups:ie.map((re,xe)=>({code:re.trimmedCode,title:re.trimmedTitle,order:xe,competencies:re.competencies.map((ve,Qe)=>({code:ve.code,title:ve.title,description:ve.description,desiredOutcome:ve.desiredOutcome,subjectKnowledge:ve.subjectKnowledge,behavioralComponents:ve.behavioralComponents,order:Qe}))}))};try{if(I)await Y0(`/trajects/${p.id}`,W),E("Traject bijgewerkt"),await L(),await x(p.id);else{const re=await Mh("/trajects",W);E("Nieuw traject opgeslagen");const xe=await L(),ve=(re==null?void 0:re.id)||((Y=xe.find(Qe=>Qe.name===W.name))==null?void 0:Y.id)||null;ve?await x(ve):v()}}catch(re){w((re==null?void 0:re.message)||"Opslaan mislukt")}finally{N(!1)}},st=j.useMemo(()=>t.find(K=>K.id===r)||null,[t,r]),at=ie.reduce((K,W)=>K+W.competencies.length,0);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Trajectbeheer"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Maak nieuwe trajecten aan of bewerk bestaande trajecten en competenties. Wijzigingen zijn direct zichtbaar voor deelnemers en coaches."})]}),l.jsxs("div",{className:"grid gap-8 xl:grid-cols-[minmax(0,1fr)_360px]",children:[l.jsxs("form",{onSubmit:qe,className:"relative space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[u&&l.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-2xl bg-white/70",children:l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[l.jsx(Mf,{className:"h-4 w-4 animate-spin"}),"Traject laden..."]})}),l.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-slate-50/60 p-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:I?"Bewerk traject":"Nieuw traject"}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:I?p.name||(st==null?void 0:st.name)||"Naamloos traject":"Maak een nieuw traject"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[I&&st&&l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700",children:[l.jsx(Bi,{className:"h-3.5 w-3.5"}),"Gekoppeld: ",st.competencyCount||0," competenties"]}),l.jsx("button",{type:"button",onClick:v,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 transition hover:border-slate-300 hover:text-slate-900",children:"Nieuw traject"})]})]}),h&&l.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:h}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"traject-name",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Trajectnaam"}),l.jsx("input",{id:"traject-name",name:"name",value:p.name,onChange:T,disabled:M,placeholder:"Bijvoorbeeld: Sociaal Werk Niveau 5",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"traject-description",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Beschrijving"}),l.jsx("textarea",{id:"traject-description",name:"description",value:p.description,onChange:T,disabled:M,rows:3,placeholder:"Optioneel. Geef een korte toelichting voor coaches.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Competentie-structuur"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Groepeer competenties per betekenisvolle cluster, zoals ",l.jsx("strong",{children:"B1-K1"})," met meerdere werkprocessen."]})]}),l.jsxs("button",{type:"button",onClick:k,disabled:M,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-300",children:[l.jsx(Cb,{className:"h-4 w-4"}),"Nieuw cluster"]})]}),p.competencyGroups.map((K,W)=>l.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-5 shadow-sm",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:["Cluster ",W+1]}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Competentiegebied"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Bijvoorbeeld B1-K1 met een herkenbare titel."})]}),l.jsxs("button",{type:"button",onClick:()=>D(K.id),disabled:M,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[l.jsx(np,{className:"h-4 w-4"}),"Verwijder cluster"]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster code"}),l.jsx("input",{value:K.code,onChange:Y=>C(K.id,"code",Y.target.value),disabled:M,placeholder:"Bijv. B1-K1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Cluster naam"}),l.jsx("input",{value:K.title,onChange:Y=>C(K.id,"title",Y.target.value),disabled:M,placeholder:"Bijv. Analyseren van ondersteuningsvragen",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),l.jsxs("div",{className:"space-y-4",children:[K.competencies.map((Y,re)=>l.jsxs("div",{className:"space-y-4 rounded-xl border border-slate-200 p-4 shadow-sm",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Competentie ",re+1]}),l.jsx("p",{className:"text-sm text-slate-500",children:"Vul de werkprocescode en aanvullende velden in."})]}),l.jsxs("button",{type:"button",onClick:()=>G(K.id,Y.id),disabled:M,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-200 hover:text-red-600 disabled:cursor-not-allowed disabled:border-slate-100 disabled:text-slate-300",children:[l.jsx(np,{className:"h-4 w-4"}),"Verwijder competentie"]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Code"}),l.jsx("input",{value:Y.code,onChange:xe=>A(K.id,Y.id,"code",xe.target.value),disabled:M,placeholder:"Bijv. B1-K1-W1",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Titel"}),l.jsx("input",{value:Y.title,onChange:xe=>A(K.id,Y.id,"title",xe.target.value),disabled:M,placeholder:"Bijv. Ondersteuningsvragen analyseren",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[l.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Omschrijving"}),l.jsx("textarea",{value:Y.description,onChange:xe=>A(K.id,Y.id,"description",xe.target.value),disabled:M,rows:2,placeholder:"Optioneel. Beschrijf het werkproces kort.",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gewenst resultaat"}),l.jsx("textarea",{value:Y.desiredOutcome,onChange:xe=>A(K.id,Y.id,"desiredOutcome",xe.target.value),disabled:M,rows:2,placeholder:"Wat moet er bereikt worden?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Vakkennis"}),l.jsx("textarea",{value:Y.subjectKnowledge,onChange:xe=>A(K.id,Y.id,"subjectKnowledge",xe.target.value),disabled:M,rows:2,placeholder:"Welke kennis is nodig?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Gedragscomponenten"}),l.jsx("textarea",{value:Y.behavioralComponents,onChange:xe=>A(K.id,Y.id,"behavioralComponents",xe.target.value),disabled:M,rows:2,placeholder:"Welke houding wordt verwacht?",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:bg-slate-100"})]})]})]},Y.id)),l.jsxs("button",{type:"button",onClick:()=>de(K.id),disabled:M,className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 transition hover:border-brand-400 hover:text-brand-700 disabled:cursor-not-allowed disabled:border-brand-100 disabled:text-brand-200",children:[l.jsx(Cb,{className:"h-4 w-4"}),"Voeg competentie toe"]})]})]},K.id))]}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"space-y-1 text-sm",children:[_&&l.jsx("p",{className:"text-sm font-medium text-emerald-600",children:_}),R&&l.jsx("p",{className:"text-sm font-medium text-red-600",children:R}),!_&&!R&&l.jsxs("p",{className:"text-xs text-slate-500",children:["Je traject bevat ",at," competenties verdeeld over ",ie.length," clusters."]})]}),l.jsxs("button",{type:"submit",disabled:!ye,className:"inline-flex items-center gap-2 rounded-full bg-brand-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-600 disabled:cursor-not-allowed disabled:bg-slate-300",children:[b?l.jsx(Mf,{className:"h-4 w-4 animate-spin"}):l.jsx(Bi,{className:"h-4 w-4"}),I?"Wijzigingen opslaan":"Traject opslaan"]})]})]}),l.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Trajecten"}),l.jsxs("button",{type:"button",onClick:L,disabled:n,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-slate-300 hover:text-slate-700 disabled:cursor-not-allowed disabled:text-slate-300",children:[l.jsx(bk,{className:n?"h-4 w-4 animate-spin":"h-4 w-4"}),"Vernieuwen"]})]}),n?l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[l.jsx(Mf,{className:"h-4 w-4 animate-spin"})," Trajecten laden..."]}):i?l.jsx("p",{className:"text-sm text-red-600",children:i}):t.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Er zijn nog geen trajecten aangemaakt."}):l.jsx("ul",{className:"space-y-3",children:t.map(K=>{var Y;const W=K.id===r;return l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>x(K.id),className:`w-full text-left transition focus:outline-none focus:ring-2 focus:ring-brand-200 ${W?"rounded-xl border border-brand-300 bg-brand-50 p-4 shadow-sm":"rounded-xl border border-slate-200 p-4 shadow-sm hover:border-brand-200 hover:bg-brand-50/60"}`,children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:K.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:[((Y=K.competencyGroups)==null?void 0:Y.length)||0," clusters · ",K.competencyCount||0," competenties"]})]}),W&&l.jsx(Bi,{className:"h-4 w-4 text-brand-600"})]}),l.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:["Laatst bijgewerkt: ",oV(K.updatedAt)]})]})},K.id)})})]})]})]})},dV=()=>{const[t,e]=j.useState(null),[n,s]=j.useState(null),[i,a]=j.useState(!0),[r,o]=j.useState(null);j.useEffect(()=>{let y=!0;const b=localStorage.getItem("user");if(b)try{const R=JSON.parse(b),w=(R==null?void 0:R.firebaseUid)||(R==null?void 0:R.uid);w&&y&&e(w)}catch{}const N=Zg(Jt,R=>{y&&e(w=>w||(R==null?void 0:R.uid)||null)});return()=>{y=!1,N()}},[]),j.useEffect(()=>{if(!t){a(!1);return}a(!0);const y=F2(t,({data:b,error:N})=>{if(N){o(N),a(!1);return}s(b),o(null),a(!1)});return()=>{typeof y=="function"&&y()}},[t]);const u=Array.isArray(n==null?void 0:n.highlights)?n.highlights:[],d=Array.isArray(n==null?void 0:n.responsibilities)?n.responsibilities:[],h=Array.isArray(n==null?void 0:n.certifications)?n.certifications:[],m=n!=null&&n.role?n.role.charAt(0).toUpperCase()+n.role.slice(1):"Admin",p=(n==null?void 0:n.name)||(n==null?void 0:n.email)||"Admin";return i?l.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Profiel laden..."}):r?l.jsxs("div",{className:"rounded-3xl border border-red-200 bg-red-50 px-6 py-8 text-center text-sm text-red-700 shadow-sm",children:["Kon profiel niet laden: ",r.message||"Onbekende fout"]}):n?l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 px-8 py-10 text-white shadow-card",children:[l.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/60",children:"Profile"}),l.jsxs("div",{className:"mt-4 flex flex-col justify-between gap-6 lg:flex-row lg:items-end",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-semibold",children:p}),l.jsx("p",{className:"mt-2 text-white/80",children:m}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/70",children:n.bio||"Nog geen biografie toegevoegd."})]}),l.jsxs("dl",{className:"grid grid-cols-3 gap-4",children:[u.length===0?l.jsx("div",{className:"col-span-3 text-sm text-white/70",children:"Nog geen statistieken vastgelegd."}):null,u.map(y=>l.jsxs("div",{className:"rounded-2xl bg-white/10 px-4 py-3 text-center shadow-inner backdrop-blur",children:[l.jsx("dt",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:y.label}),l.jsx("dd",{className:"mt-2 text-2xl font-semibold",children:y.metric})]},y.id))]})]})]}),l.jsx("section",{className:"grid gap-6 lg:grid-cols-[1.2fr,1fr]",children:l.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Contact & verantwoordelijkheden"}),l.jsxs("div",{className:"mt-6 grid gap-6 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"E-mail"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.email||"-"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Telefoon"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.phone||"Niet opgegeven"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Locatie"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:n.location||"Niet opgegeven"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Kernverantwoordelijkheden"}),d.length===0?l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Nog geen verantwoordelijkheden toegevoegd."}):l.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:d.map(y=>l.jsxs("li",{className:"flex items-center gap-3 rounded-xl bg-slate-50 px-3 py-2",children:[l.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-brand-500"}),l.jsx("span",{children:y})]},y))})]})]})]})}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Certificeringen & professionalisering"}),l.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[h.length===0?l.jsx("p",{className:"col-span-full text-sm text-slate-500",children:"Nog geen certificeringen geregistreerd."}):null,h.map(y=>l.jsxs("article",{className:"rounded-2xl border border-slate-100 p-4 shadow-sm transition hover:border-brand-300 hover:shadow-md",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:y.title||"Certificering"}),l.jsx("p",{className:"text-xs text-slate-500",children:y.issuer||"Onbekende instantie"}),l.jsxs("p",{className:"mt-3 text-xs uppercase tracking-[0.2em] text-slate-400",children:["Behaald in ",y.year||"-"]})]},y.id))]})]})]}):l.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center text-sm text-slate-500 shadow-sm",children:"Geen profielgegevens gevonden. Zorg dat je account is gekoppeld aan Firebase."})},hV=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],b_={name:"",email:"",password:"",role:"customer",trajectId:""},fV=({status:t})=>{if(!(t!=null&&t.message))return null;const e=t.type==="error",n=e?HR:Bi,s=e?"text-red-600 bg-red-50 border-red-200":"text-emerald-600 bg-emerald-50 border-emerald-200";return l.jsxs("div",{className:`mb-6 flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${s}`,children:[l.jsx(n,{className:"h-5 w-5"}),l.jsx("span",{children:t.message})]})},mV=()=>{const[t,e]=j.useState([]),[n,s]=j.useState(b_),[i,a]=j.useState(!1),[r,o]=j.useState(null),[u,d]=j.useState(!1),[h,m]=j.useState([]),[p,y]=j.useState(!1),b=j.useMemo(()=>{const E=new Map;return h.forEach(I=>{E.set(I.id,I)}),E},[h]),N=async()=>{d(!0);try{const E=await ei("/auth/admin/users");e(Array.isArray(E)?E:[])}catch(E){o({type:"error",message:(E==null?void 0:E.message)||"Kon gebruikers niet laden"})}finally{d(!1)}},R=async()=>{y(!0);try{const E=await ei("/trajects"),I=Array.isArray(E)?E:[];m(I),s(M=>{var L;return{...M,trajectId:((L=I[0])==null?void 0:L.id)||""}})}catch(E){o({type:"error",message:(E==null?void 0:E.message)||"Kon trajecten niet laden"})}finally{y(!1)}};j.useEffect(()=>{N(),R()},[]);const w=E=>{const{name:I,value:M}=E.target;s(L=>{var v;if(I==="role"){if(M==="customer"){const x=((v=h[0])==null?void 0:v.id)||L.trajectId||"";return{...L,role:M,trajectId:x}}return{...L,role:M}}return{...L,[I]:M}})},_=async E=>{var I,M;E.preventDefault(),a(!0),o(null);try{const L={name:n.name.trim(),email:n.email.trim(),password:n.password,role:n.role,trajectId:n.role==="customer"?n.trajectId:null};await Mh("/auth/admin/users",L),o({type:"success",message:"Account aangemaakt"}),s({...b_,trajectId:((I=h[0])==null?void 0:I.id)||""}),await N()}catch(L){o({type:"error",message:((M=L==null?void 0:L.data)==null?void 0:M.error)||(L==null?void 0:L.message)||"Aanmaken mislukt"})}finally{a(!1)}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Admin"}),l.jsx("h1",{className:"mt-1 text-2xl font-semibold text-slate-900",children:"Beheer gebruikers"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Maak nieuwe accounts voor coaches en deelnemers."})]}),l.jsxs("div",{className:"hidden items-center gap-2 rounded-full bg-brand-50 px-4 py-2 text-sm font-medium text-brand-600 sm:flex",children:[l.jsx(uc,{className:"h-4 w-4"}),l.jsxs("span",{children:[t.length," actieve gebruikers"]})]})]}),l.jsx(fV,{status:r}),l.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[l.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx($1,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Nieuw account"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Voer de gegevens in en kies de juiste rol."})]})]}),l.jsxs("form",{onSubmit:_,className:"mt-6 space-y-5",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Volledige naam"}),l.jsx("input",{id:"user-name",name:"name",value:n.name,onChange:w,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Kim de Vries",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),l.jsx("input",{id:"user-email",name:"email",type:"email",value:n.email,onChange:w,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"jij@voorbeeld.nl",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),l.jsx("input",{id:"user-password",name:"password",type:"password",value:n.password,onChange:w,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Minimaal 8 tekens",required:!0}),l.jsx("p",{className:"text-xs text-slate-400",children:"De gebruiker kan dit wachtwoord later wijzigen."})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),l.jsx("select",{id:"user-role",name:"role",value:n.role,onChange:w,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:hV.map(E=>l.jsx("option",{value:E.value,children:E.label},E.value))})]}),n.role==="customer"?l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"user-traject",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Traject"}),l.jsxs("select",{id:"user-traject",name:"trajectId",value:n.trajectId,onChange:w,disabled:p||h.length===0,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100 disabled:cursor-not-allowed disabled:text-slate-400",required:!0,children:[h.length===0?l.jsx("option",{value:"",children:"Geen trajecten beschikbaar"}):null,h.map(E=>l.jsx("option",{value:E.id,children:E.name},E.id))]}),l.jsx("p",{className:"text-xs text-slate-400",children:"Wijs deze deelnemer aan een traject toe. Dit bepaalt welke competenties zichtbaar zijn."})]}):null,l.jsx("button",{type:"submit",disabled:i,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:i?"Account aanmaken...":"Account aanmaken"})]})]}),l.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bestaande gebruikers"}),l.jsx("span",{className:"text-xs font-medium uppercase tracking-[0.2em] text-slate-400",children:u?"Bezig met laden...":"Laatste update"})]}),l.jsx("div",{className:"mt-4 max-h-[420px] space-y-4 overflow-y-auto pr-2",children:t.length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 p-6 text-sm text-slate-500",children:"Nog geen gebruikers gevonden. Voeg de eerste toe via het formulier hiernaast."}):t.map(E=>{var I;return l.jsxs("article",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:E.name||"Naam onbekend"}),l.jsx("p",{className:"text-xs text-slate-500",children:E.email}),E.trajectId?l.jsxs("p",{className:"text-xs text-slate-400",children:["Traject: ",((I=b.get(E.trajectId))==null?void 0:I.name)||E.trajectId]}):null]}),l.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:E.role})]},E.id)})})]})]})]})},pV=[{value:"customer",label:"Customer"},{value:"coach",label:"Coach"},{value:"admin",label:"Admin"}],gV=()=>{const[t,e]=j.useState({name:"",email:"",password:"",role:"customer"}),[n,s]=j.useState(!1),[i,a]=j.useState(null),r=u=>{const{name:d,value:h}=u.target;e(m=>({...m,[d]:h}))},o=async u=>{var d;u.preventDefault(),s(!0),a(null);try{const h={name:t.name.trim(),email:t.email.trim(),password:t.password,role:t.role},p=await fetch("http://localhost:5000/auth/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),y=p.headers.get("content-type")||"";let b=null;if(y.includes("application/json"))try{b=await p.json()}catch{b=null}else try{b=await p.text()}catch{b=null}if(!p.ok){const N=b&&b.error||typeof b=="string"&&b||p.statusText||"Aanmaken mislukt",R=new Error(N);throw R.status=p.status,R.data=b,R}a({type:"success",message:"Account aangemaakt"}),e({name:"",email:"",password:"",role:"customer"})}catch(h){const m=((d=h==null?void 0:h.data)==null?void 0:d.error)||(h==null?void 0:h.message)||"Aanmaken mislukt";a({type:"error",message:m})}finally{s(!1)}};return l.jsx(X0,{kicker:"Testing",title:"Test account aanmaken",description:"Gebruik dit formulier om snel een account aan te maken via de admin endpoint. In development kun je dit gebruiken zonder in te loggen (zet ALLOW_DEV_ACCOUNT_CREATION=true op de backend).",children:l.jsxs("section",{className:"mx-auto w-full max-w-xl rounded-3xl border border-slate-200 bg-white p-8 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600",children:l.jsx($1,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Nieuwe gebruiker"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Deze testpagina maakt direct een account aan zonder ingelogd te zijn."})]})]}),i!=null&&i.message?l.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${i.type==="error"?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:i.message}):null,l.jsxs("form",{onSubmit:o,className:"mt-6 space-y-5",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-name",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Naam"}),l.jsx("input",{id:"test-name",name:"name",value:t.name,onChange:r,placeholder:"Bijv. Daniël Vermeer",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mail"}),l.jsx("input",{id:"test-email",name:"email",type:"email",value:t.email,onChange:r,placeholder:"jij@voorbeeld.nl",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-password",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Tijdelijk wachtwoord"}),l.jsx("input",{id:"test-password",name:"password",type:"password",value:t.password,onChange:r,placeholder:"Minimaal 8 tekens",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",required:!0})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"test-role",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Rol"}),l.jsx("select",{id:"test-role",name:"role",value:t.role,onChange:r,className:"rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",children:pV.map(u=>l.jsx("option",{value:u.value,children:u.label},u.value))})]}),l.jsx("button",{type:"submit",disabled:n,className:"w-full rounded-full bg-brand-600 px-5 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:n?"Bezig...":"Account aanmaken"})]})]})})},yV=[{title:"Introductie tot jouw traject",description:"Korte introductie over het EVC-proces en wat je mag verwachten."},{title:"Aan de slag met je portfolio",description:"Stap voor stap uitleg over het toevoegen van bewijsstukken."},{title:"Samenwerken met je coach",description:"Tips voor het plannen van contactmomenten en feedback."}],xV=[{label:"Opleidingen, diploma's en certificaten",status:"1 diploma",owner:"Jijzelf"},{label:"Relevante werkervaring",status:"1 werkervaring",owner:"Jijzelf"},{label:"Overige informatie en documenten",status:"7 items",owner:"Jijzelf"},{label:"Criteriumgericht interview",status:"Nog niet ingevuld",owner:"Traject Beheer"},{label:"Werkplekbezoek",status:"Nog niet ingevuld",owner:"Traject Beheer"}],bV=()=>{var s;const{customer:t}=es(),e=((s=t==null?void 0:t.name)==null?void 0:s.split(" ")[0])||(t==null?void 0:t.name)||"kandidaat",n=(t==null?void 0:t.name)||e;return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-evc-blue-200/40 bg-white shadow-sm",children:[l.jsx("div",{className:"absolute -top-12 right-0 h-40 w-40 rounded-full bg-evc-blue-200/40 blur-3xl","aria-hidden":"true"}),l.jsx("div",{className:"absolute -bottom-10 left-6 h-32 w-32 rounded-full bg-evc-blue-100/50 blur-3xl","aria-hidden":"true"}),l.jsx("div",{className:"relative flex flex-col gap-6 px-8 py-12 sm:px-12 lg:flex-row lg:items-center",children:l.jsxs("div",{className:"flex-1 space-y-4",children:[l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-evc-blue-50 px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-700",children:[l.jsx(Tk,{className:"h-3.5 w-3.5"}),"Welkom"]}),l.jsxs("h1",{className:"text-3xl font-semibold text-slate-900 sm:text-4xl",children:["Welkom ",e," bij EVC Academie"]}),l.jsxs("div",{className:"max-w-2xl space-y-3 text-base text-slate-600",children:[l.jsxs("p",{children:["Welkom ",n]}),l.jsx("p",{children:"Welkom bij EVC Academie!"}),l.jsx("p",{children:"Dit is het portaal waarin jij de komende tijd aan de slag zult gaan met jouw EVC traject. Hieronder vind je een aantal instructievideo's die jou zullen helpen om zo goed mogelijk van start te kunnen gaan."}),l.jsx("p",{children:"Kijk alle video's en lees de handleiding goed door!"})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-slate-500",children:[l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-4 py-2 font-medium",children:[l.jsx(zi,{className:"h-4 w-4"}),"Bekijk de stappen van jouw traject"]}),l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-4 py-2 font-medium",children:[l.jsx(Nb,{className:"h-4 w-4"}),"Start met de uitlegvideo's hieronder"]})]})]})})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsxs("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Uitlegvideo's"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Korte instructies om je snel op weg te helpen."})]}),l.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-evc-blue-200 px-4 py-2 text-sm font-medium text-evc-blue-700 transition hover:border-evc-blue-400 hover:text-evc-blue-900",children:["Externe videotheek",l.jsx(zi,{className:"h-4 w-4"})]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:yV.map(i=>l.jsxs("article",{className:"group relative overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-evc-blue-500/5 via-transparent to-evc-blue-600/10 opacity-0 transition group-hover:opacity-100"}),l.jsxs("div",{className:"relative flex h-full flex-col gap-4 p-6",children:[l.jsx("div",{className:"flex h-40 items-center justify-center rounded-xl bg-slate-100 text-slate-400",children:l.jsx(Nb,{className:"h-12 w-12"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:i.title}),l.jsx("p",{className:"text-sm text-slate-500",children:i.description})]}),l.jsxs("span",{className:"mt-auto inline-flex items-center gap-1 text-sm font-medium text-evc-blue-600 group-hover:text-evc-blue-700",children:["Video openen",l.jsx(zi,{className:"h-4 w-4"})]})]})]},i.title))})]}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Stand van zaken"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Een momentopname van je voortgang en belangrijke aandachtspunten."}),l.jsx("div",{className:"mt-4 overflow-hidden rounded-2xl border border-evc-blue-200 bg-evc-blue-50/60",children:l.jsxs("table",{className:"min-w-full divide-y divide-evc-blue-200 text-sm text-evc-blue-900",children:[l.jsx("thead",{className:"bg-evc-blue-100/60 text-left text-xs font-semibold uppercase tracking-[0.2em] text-evc-blue-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-4 py-3",children:"Wat?"}),l.jsx("th",{scope:"col",className:"px-4 py-3",children:"Stand van zaken"}),l.jsx("th",{scope:"col",className:"px-4 py-3",children:"Door wie?"})]})}),l.jsx("tbody",{children:xV.map(i=>l.jsxs("tr",{className:"odd:bg-white even:bg-evc-blue-50/50",children:[l.jsx("td",{className:"whitespace-pre-wrap px-4 py-3 font-medium text-slate-800",children:i.label}),l.jsx("td",{className:"px-4 py-3 text-slate-700",children:i.status}),l.jsx("td",{className:"px-4 py-3 text-slate-700",children:i.owner})]},i.label))})]})})]})})]})},vs=({label:t="Loading"})=>l.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-12 text-sm text-slate-500",children:[l.jsx("span",{className:"inline-flex h-12 w-12 animate-spin items-center justify-center rounded-full border-4 border-slate-200 border-t-brand-500"}),l.jsxs("p",{children:[t,"…"]})]});function vV(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,name:e.name||"",description:e.description||"",competencyCount:e.competencyCount??null,...e}}function v_(t){return t?Array.isArray(t)?t.filter(e=>e!=null):typeof t=="string"?t.split(/\r?\n/).map(e=>e.trim()).filter(Boolean):[t]:[]}function _V(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,code:e.code||"",title:e.title||"",description:e.description||"",desiredOutcome:e.desiredOutcome||e.gewenstResultaat||"",subjectKnowledge:v_(e.subjectKnowledge||e.vakkennis||e.vakkennisEnVaardigheden),behavioralComponents:v_(e.behavioralComponents||e.gedragsComponenten||e.behavioral||e.gedragscomponenten),groupCode:e.groupCode||"",groupTitle:e.groupTitle||"",groupOrder:e.groupOrder??0,competencyOrder:e.competencyOrder??0,order:e.order??0}}function __(t){var n,s;if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,uid:t.id,firebaseUid:t.id,name:e.name||"",email:e.email||"",role:e.role||"",trajectId:e.trajectId||null,coachId:e.coachId||null,lastActivity:e.lastActivity?((s=(n=e.lastActivity).toDate)==null?void 0:s.call(n))??e.lastActivity:null}}async function wV(t){if(!t)return null;const e=rt(Ee,"trajects",t),n=await U0(e);return vV(n)}const H2=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t.toDate=="function")try{const n=t.toDate();return Number.isNaN(n.getTime())?null:n}catch{return null}const e=new Date(t);return Number.isNaN(e.getTime())?null:e},Ip=()=>({contactPerson:"",currentRole:"",domains:"",qualification:{name:"",number:"",validity:""},voluntaryParticipation:!1,updatedAt:null}),EV=(t={})=>{const e=t.qualification||{};return{contactPerson:t.contactPerson||"",currentRole:t.currentRole||"",domains:Array.isArray(t.domains)?t.domains.join(", "):t.domains||"",qualification:{name:e.name||t.qualificationName||"",number:e.number||t.qualificationNumber||"",validity:e.validity||t.qualificationValidity||""},voluntaryParticipation:!!t.voluntaryParticipation,updatedAt:H2(t.updatedAt||t.lastUpdated||null)}},TV=t=>{if(!(t!=null&&t.exists()))return{evcTrajectory:Ip(),updatedAt:null};const e=t.data()||{};return{evcTrajectory:EV(e.evcTrajectory||{}),updatedAt:H2(e.updatedAt||e.lastUpdated||null)}};function NV(t){return!Array.isArray(t)||t.length===0?null:t.map(e=>{var s,i;const n=e.data()||{};return{id:e.id,coachId:n.coachId||null,customerId:n.customerId||null,status:n.status||"",createdAt:n.createdAt?((i=(s=n.createdAt).toDate)==null?void 0:i.call(s))??n.createdAt:null}}).sort((e,n)=>{const s=e.createdAt instanceof Date?e.createdAt.getTime():0;return(n.createdAt instanceof Date?n.createdAt.getTime():0)-s})[0]}function jV(t){if(!(t!=null&&t.exists()))return null;const e=t.data()||{},n=e.uploadedAt?typeof e.uploadedAt.toDate=="function"?e.uploadedAt.toDate():e.uploadedAt:null,s=e.name||e.displayName||e.fileName||t.id;return{id:t.id,name:s,displayName:s,fileName:e.fileName||s,downloadURL:e.downloadURL||"",storagePath:e.storagePath||"",competencyId:e.competencyId||"",userId:e.userId||"",trajectId:e.trajectId||null,uploadedAt:n,contentType:e.contentType||"",size:e.size??null}}async function AV({userId:t,competencyId:e,file:n,displayName:s,trajectId:i}){if(!t)throw new Error("userId is verplicht");if(!e)throw new Error("competencyId is verplicht");if(!n)throw new Error("Bestand ontbreekt");const a=(s||n.name||"Bestand").trim(),r=n.name||"upload",o=`user_uploads/${t}/${e}/${Date.now()}-${r}`,u=Dh(Ac,o),d=n.type?{contentType:n.type}:void 0;await B2(u,n,d);const h=await $0(u),m=ln(Ee,"users",t,"uploads");await D5(m,{name:a,fileName:r,downloadURL:h,storagePath:o,competencyId:e,userId:t,trajectId:i||null,uploadedAt:qt(),contentType:n.type||null,size:typeof n.size=="number"?n.size:null})}async function SV({userId:t,uploadId:e,storagePath:n}){if(!t)throw new Error("userId is verplicht");if(!e)throw new Error("uploadId is verplicht");const s=rt(Ee,"users",t,"uploads",e);if(n){const i=Dh(Ac,n);try{await FM(i)}catch(a){if((a==null?void 0:a.code)!=="storage/object-not-found")throw a}}await I5(s)}function G2(t,e){if(!t)return e({uploads:[],error:new Error("Missing user id")}),()=>{};const n=ln(Ee,"users",t,"uploads"),s=Gn(n,Fa("uploadedAt","desc"));return ft(s,i=>{const a=i.docs.map(jV).filter(Boolean);e({uploads:a,error:null})},i=>{e({uploads:[],error:i})})}async function CV(t){if(!t)return null;if(t.downloadURL)return t.downloadURL;if(!t.storagePath)return null;const e=Dh(Ac,t.storagePath);return $0(e)}function RV(t,e){if(!t)return e({customer:null,coach:null,assignment:null,error:new Error("Missing user id")}),()=>{};let n=null,s={customer:null,coach:null,assignment:null};const i=(h={},m=null)=>{s={...s,...h},e({...s,error:m})},a=h=>{if(n&&(n(),n=null),!h){i({coach:null});return}n=ft(rt(Ee,"users",h),m=>i({coach:__(m)}),m=>i({},m))},r=ft(rt(Ee,"users",t),h=>{const m=__(h);i({customer:m}),m!=null&&m.coachId&&a(m.coachId)},h=>i({},h)),o=ln(Ee,"assignments"),u=Gn(o,Zs("customerId","==",t)),d=ft(u,h=>{const m=NV(h.docs);i({assignment:m}),m!=null&&m.coachId?a(m.coachId):s.coach||i({})},h=>i({},h));return()=>{r(),d(),n&&n()}}function K2(t,e){if(!t)return e({data:[],error:new Error("Missing trajectId")}),()=>{};const n=Gn(ln(Ee,"competencies"),Zs("trajectId","==",t)),s=ln(Ee,"trajects",t,"competencies");let i=[],a=[];const r=(d=null)=>{const m=(i.length>0?i:a).map(_V).filter(Boolean).sort((p,y)=>p.groupOrder!==y.groupOrder?p.groupOrder-y.groupOrder:p.competencyOrder!==y.competencyOrder?p.competencyOrder-y.competencyOrder:p.order!==y.order?p.order-y.order:(p.title||"").localeCompare(y.title||""));e({data:m,error:d})},o=ft(n,d=>{i=d.docs,r()},d=>{i=[],r(d)}),u=ft(s,d=>{a=d.docs,i.length===0&&r()},d=>{a=[],i.length===0&&r(d)});return()=>{o(),u()}}function kV(t,e){if(!t)return e({data:{evcTrajectory:Ip()},error:new Error("Missing user id")}),()=>{};const n=rt(Ee,"users",t,"profile","details");return ft(n,s=>{e({data:TV(s),error:null})},s=>e({data:{evcTrajectory:Ip()},error:s}))}async function IV(t,e){var r,o,u;if(!t)throw new Error("Missing user id");const n=rt(Ee,"users",t,"profile","details"),s=e!=null&&e.evcTrajectory?e.evcTrajectory:e||{},i=typeof s.domains=="string"?s.domains.trim():Array.isArray(s.domains)?s.domains.join(", "):"",a={name:((r=s.qualification)==null?void 0:r.name)||"",number:((o=s.qualification)==null?void 0:o.number)||"",validity:((u=s.qualification)==null?void 0:u.validity)||""};await kh(n,{evcTrajectory:{contactPerson:s.contactPerson||"",currentRole:s.currentRole||"",domains:i,qualification:a,voluntaryParticipation:!!s.voluntaryParticipation,updatedAt:qt()},updatedAt:qt()},{merge:!0})}const DV=()=>{const{customer:t,coach:e}=es(),[n,s]=j.useState(null),[i,a]=j.useState([]),[r,o]=j.useState([]),[u,d]=j.useState(!0),[h,m]=j.useState(!0),[p,y]=j.useState(null),[b,N]=j.useState(null),[R,w]=j.useState(null),[_,E]=j.useState([]),[I,M]=j.useState(null),[L,v]=j.useState(null),[x,T]=j.useState(null),[C,k]=j.useState({}),[D,A]=j.useState({}),[de,G]=j.useState(!1),V=j.useRef({}),[Q]=j.useState(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}}),q=(t==null?void 0:t.id)||null,ie=(t==null?void 0:t.name)||"deelnemer",ye=j.useCallback(async()=>{var F;d(!0),y(null);try{const ee=await ei("/customer/planning");ee!=null&&ee.traject&&s(ee.traject)}catch(ee){y(((F=ee==null?void 0:ee.data)==null?void 0:F.error)||(ee==null?void 0:ee.message)||"Kon planning niet laden")}finally{d(!1)}},[]);j.useEffect(()=>{ye()},[ye]);const qe=(n==null?void 0:n.id)||(Q==null?void 0:Q.trajectId)||(t==null?void 0:t.trajectId)||null;j.useEffect(()=>{if(!qe){a([]),N(null),m(!1);return}m(!0);const F=K2(qe,({data:ee,error:Z})=>{if(Z){N(Z),m(!1);return}N(null),a(Array.isArray(ee)?ee:[]),m(!1)});return()=>{typeof F=="function"&&F()}},[qe]);const st=j.useMemo(()=>{const F={};return _.forEach(ee=>{if(!ee)return;const Z=ee.competencyId||"__unassigned__";F[Z]||(F[Z]=[]),F[Z].push(ee)}),F},[_]);j.useEffect(()=>{if(n||!qe)return;let F=!1;return wV(qe).then(ee=>{!F&&ee&&s(Z=>Z||ee)}).catch(()=>{}),()=>{F=!0}},[n,qe]),j.useEffect(()=>{if(!q){E([]),M(null);return}const F=G2(q,({uploads:ee,error:Z})=>{if(Z){M(Z);return}M(null),E(Array.isArray(ee)?ee:[])});return()=>{typeof F=="function"&&F()}},[q]);const at=u||h,K=F=>{if(!(C[F]||"").trim()){A(le=>({...le,[F]:"Geef een naam op voor je upload."}));return}A(le=>{if(!le[F])return le;const gt={...le};return delete gt[F],gt});const Z=V.current[F];Z&&Z.click()},W=async(F,ee)=>{var Vt;const Z=(Vt=ee.target.files)==null?void 0:Vt[0];if(!Z)return;ee.target.value="";const le=qe;if(!le){y("Er is geen traject gekoppeld aan dit account.");return}if(!q){y("Kon je accountgegevens niet vinden. Probeer opnieuw in te loggen.");return}const gt=(C[F]||"").trim();if(!gt){A(se=>({...se,[F]:"Geef een naam op voor je upload."}));return}w(F),y(null);try{await AV({userId:q,competencyId:F,file:Z,displayName:gt,trajectId:le}),k(se=>({...se,[F]:""})),A(se=>{if(!se[F])return se;const Le={...se};return delete Le[F],Le})}catch(se){y((se==null?void 0:se.message)||"Uploaden mislukt")}finally{w(null)}},Y=F=>{o(ee=>ee.includes(F)?ee.filter(Z=>Z!==F):[...ee,F])},re=(F,ee)=>{k(Z=>({...Z,[F]:ee})),A(Z=>{if(!Z[F])return Z;const le={...Z};return delete le[F],le})},xe=()=>{G(F=>!F)};j.useEffect(()=>{o(F=>{const ee=new Set(i.map((le,gt)=>le.id||le.code||String(gt))),Z=F.filter(le=>ee.has(le));return Z.length===F.length?F:Z})},[i]),j.useEffect(()=>{const F=new Set(i.map((ee,Z)=>ee.id||ee.code||String(Z)));k(ee=>{const Z={};return F.forEach(le=>{ee[le]!==void 0&&(Z[le]=ee[le])}),Object.keys(Z).length===Object.keys(ee).length?ee:Z}),A(ee=>{const Z={};return F.forEach(le=>{ee[le]&&(Z[le]=ee[le])}),Object.keys(Z).length===Object.keys(ee).length?ee:Z})},[i]);const ve=(F,ee,Z="sm")=>{if(!F||F.length===0)return l.jsx("p",{className:`mt-2 ${Z==="xs"?"text-xs":"text-sm"} text-slate-400`,children:ee});const le=Z==="xs"?"space-y-1.5":"space-y-2",gt=Z==="xs"?"text-xs":"text-sm",Vt=Z==="xs"?"mt-1 h-1 w-1":"mt-1 h-1.5 w-1.5",se=Z==="xs"?"px-3 py-1.5":"px-3 py-2";return l.jsx("ul",{className:`mt-3 ${le} ${gt} text-slate-600`,children:F.map((Le,Kt)=>l.jsxs("li",{className:`flex items-start gap-3 rounded-xl bg-white/70 ${se} shadow-sm`,children:[l.jsx("span",{className:`${Vt} flex-shrink-0 rounded-full bg-brand-500`}),l.jsx("span",{className:"leading-relaxed",children:String(Le)})]},`${Le}-${Kt}`))})},Qe=(F,ee)=>{if(!F)return[];const Z=[F.id,F.code,ee].filter(Boolean);for(const le of Z)if(st[le])return st[le];return[]},ts=async F=>{if(!F)return;if(!!!(F.downloadURL||F.storagePath)){y("Downloadlink is niet beschikbaar voor dit bestand.");return}const Z=F.id||F.storagePath||F.fileName||F.name||null;Z&&v(Z),y(null);try{const le=await CV(F);if(!le)throw new Error("Downloadlink is niet beschikbaar.");window.open(le,"_blank","noopener")}catch(le){y((le==null?void 0:le.message)||"Download mislukt")}finally{v(null)}},ns=async F=>{if(!(!F||!F.id)){if(!q){y("Kon je accountgegevens niet vinden. Probeer opnieuw in te loggen.");return}T(F.id);try{await SV({userId:q,uploadId:F.id,storagePath:F.storagePath||null})}catch(ee){y((ee==null?void 0:ee.message)||"Verwijderen mislukt")}finally{T(null)}}};return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Mijn portfolio"}),l.jsx("h1",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Jouw verzameling aan bewijsstukken"}),l.jsxs("div",{className:"mt-3 max-w-3xl space-y-4 text-sm text-slate-500",children:[l.jsxs("p",{className:"font-semibold text-slate-700",children:["Portfolio ",ie]}),l.jsx("p",{children:"Beste deelnemer,"}),l.jsx("p",{children:"Bij de EVC-procedure beoordelen we hoe goed jouw vaardigheden en kennis overeenkomen met wat er van je verwacht wordt in je beroep, door te kijken naar hoe je je werk uitvoert. Dit houdt in dat je moet laten zien dat je de juiste kennis, vaardigheden en professionele houding hebt door middel van voorbeelden uit de praktijk. Dit doe je door in je portfolio te beschrijven wat je hebt gedaan, hoe je het hebt gedaan en waarom, ondersteund met bewijs uit je werkervaring. Vergeet niet je werkervaring en CV toe te voegen aan je portfolio."}),l.jsx("p",{children:"We begrijpen dat dit een uitgebreide taak kan zijn, maar we staan klaar om je te helpen! Om je te ondersteunen, bieden we formulieren, instructievideo's en documenten aan die je kunnen helpen je ervaringen correct te documenteren. Je EVC-begeleider staat ook altijd klaar om je hulp of feedback te geven."}),l.jsx("p",{children:"Wat betreft privacy, volgens de privacywet (AVG), mag je geen persoonlijke gegevens in je portfolio opnemen zonder toestemming. Je mag wel geanonimiseerde gegevens gebruiken, waarbij de persoon niet herkenbaar is, ook niet zonder naamvermelding."})]}),n?l.jsxs("p",{className:"mt-4 inline-flex items-center rounded-full bg-evc-blue-50 px-4 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:["Traject: ",n.name]}):null]}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("button",{type:"button",onClick:xe,className:"inline-flex items-center justify-between rounded-2xl bg-evc-blue-600 px-5 py-3 text-left text-sm font-semibold text-white shadow-lg transition hover:bg-evc-blue-500 sm:text-base",children:[l.jsx("span",{children:"Klik hier voor de instructies"}),l.jsx(go,{className:`h-5 w-5 transition-transform ${de?"rotate-180":""}`})]}),de?l.jsx("div",{className:"rounded-2xl border border-evc-blue-200 bg-evc-blue-50 p-5 text-sm text-evc-blue-900",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-base font-semibold text-evc-blue-800",children:"Instructies voor Mijn portfolio"}),l.jsx("div",{className:"space-y-2",children:l.jsx("p",{children:"Hieronder staat per onderdeel uitgelegd hoe je jouw portfolio aanlevert. Volg de stappen zorgvuldig. Heb je vragen? Neem contact op met je begeleider via de pagina Berichten (Contact)."})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Mijn profiel"}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsx("li",{children:"Voeg een duidelijke profielfoto van jezelf toe (zichtbaar voor de assessor)."}),l.jsx("li",{children:"Vink aan: ‘Ik neem vrijwillig deel aan dit EVC-traject’."})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Mijn loopbaandoel"}),l.jsx("p",{children:"Begin met het invullen van je loopbaandoel op de pagina ‘Mijn loopbaandoel’. Beschrijf minimaal:"}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Ambitie"}),": Wat je nog wilt bereiken en hoe je jouw loopbaan de komende jaren ziet."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Motivatie"}),": Wat je van dit EVC-traject verwacht, waarom je meedoet en welke resultaten je hoopt te behalen."]})]}),l.jsx("p",{className:"text-slate-600",children:"Dit komt terug tijdens het assessmentgesprek en in je EVC-rapport."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Vragenlijst (Loopbaan en Burgerschap)"}),l.jsx("p",{children:"Vul de vragenlijst voor Loopbaan en Burgerschap (L&B) volledig en onderbouwd in. Dit is verplicht voor alle MBO-opleidingen. Denk aan ongeveer 2 à 3 alinea’s per onderdeel. Dit onderdeel wordt meegenomen door de examencommissie bij de verzilvering van het EVC-certificaat."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Zo werkt dit scherm"}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsx("li",{children:"Alle competenties staan onder elkaar. Klik op een competentie om de details te openen of te sluiten."}),l.jsx("li",{children:"Je ziet per competentie: verwachtingen, vakkennis/vaardigheden, gedragscomponenten en het gewenste resultaat."}),l.jsxs("li",{children:["Voeg bewijsstukken toe per competentie. Geef eerst een ",l.jsx("strong",{children:"verplichte titel"})," in het veld ‘Naam van je upload’ en klik daarna op ‘Voeg upload toe’."]}),l.jsx("li",{children:"Je kunt meerdere bestanden per competentie plaatsen. Je coach kan ze bekijken, downloaden en feedback geven."}),l.jsx("li",{children:"Gebruik de knoppen ‘Download’ en ‘Verwijder’ om je bestanden te beheren."})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Mijn portfolio: wat lever je aan?"}),l.jsx("p",{children:"In je portfolio laat je zien wat je allemaal kunt en hebt gedaan. Voeg informatie toe over je werk, cursussen, diploma’s en certificaten onder de kopjes ‘opleidingen, diploma’s en certificaten’ en ‘relevante werkervaring’."}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsxs("li",{children:["Omschrijf per competentie wat je hebt gedaan en lever ",l.jsx("strong",{children:"minimaal één bewijsstuk"})," aan dat aantoont dat je die competentie beheerst."]}),l.jsxs("li",{children:["Werk bij voorkeur met ",l.jsx("strong",{children:"STARR-verslagen"})," (Situatie, Taak, Actie, Resultaat, Reflectie). Gebruik het STARR-formulier. Als je het formulier niet hebt, vraag dit aan via Berichten (Contact)."]}),l.jsxs("li",{children:["Upload verslagen en bewijzen bij een ",l.jsx("strong",{children:"relevante competentie"}),". Heb je een algemeen document? Plaats dit bij",l.jsx("strong",{children:" ‘Overige informatie en documenten’"})," (indien beschikbaar in jouw omgeving)."]}),l.jsx("li",{children:"Vul daarnaast je relevante opleidingen/diploma’s, certificaten en werkervaring aan in je profiel en/of portfolio."})]}),l.jsx("div",{className:"mt-1 pl-4 text-xs text-slate-600",children:l.jsx("p",{children:"Raadpleeg ook het document ‘VRAAK-Criteria’ voor voorbeelden van toelaatbare bewijsstukken. Vraag dit document op via Berichten als je het niet kunt vinden."})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Bestandsnamen en -formaten"}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsxs("li",{children:["Gebruik voor vakinhoudelijke documenten deze structuur: ",l.jsx("strong",{children:"CODE - Naam - (d-m-jjjj)"})," (verplicht). Voorbeelden:",l.jsxs("div",{className:"mt-1 pl-4 text-xs text-slate-600",children:[l.jsx("p",{children:"B1-K1-W6 - Verslag Handelt in onvoorziene en/of crisissituaties - (17-4-2025)"}),l.jsx("p",{children:"B1-K1-W6 - Evaluatieverslag - (13-1-2025)"}),l.jsx("p",{children:"B1-K1-W6 - Plan van aanpak - (18-2-2025)"})]})]}),l.jsxs("li",{children:["Upload bij voorkeur als ",l.jsx("strong",{children:"PDF"}),". Foto’s/video’s? Voeg ook een korte PDF toe met toelichting."]}),l.jsx("li",{children:"Andere documenten (zoals authenticiteitsverklaring, werkovereenkomst): zorg voor een duidelijke titel die precies de inhoud weergeeft."})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Privacy (AVG)"}),l.jsx("p",{children:"Plaats geen persoonsgegevens van anderen zonder toestemming. Anonimiseer gegevens zodat personen niet herkenbaar zijn."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Keuzedelen (alleen MBO)"}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsx("li",{children:"Kies in totaal ten minste 720 uur aan keuzedelen (wij raden aan om meer dan 720 uur te kiezen)."}),l.jsx("li",{children:"Lever voor keuzedelen dezelfde soorten verslagen en bewijsstukken aan als voor het basisgedeelte."}),l.jsx("li",{children:"Geef je gekozen keuzedelen door aan je begeleider via Berichten (Contact)."})]}),l.jsx("div",{className:"mt-1 pl-4 text-xs text-slate-600",children:l.jsx("p",{children:"De keuzedelenlijst voor ‘Persoonlijk Begeleider Maatschappelijke Zorg’ is op te vragen via Berichten of te vinden in de bijlagen als deze in jouw omgeving beschikbaar zijn."})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Authenticiteitsverklaring"}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsx("li",{children:"Vermeld alle ingeleverde bewijsstukken op de verklaring (voeg zelf regels toe indien nodig)."}),l.jsxs("li",{children:["Onderteken met een ",l.jsx("strong",{children:"‘natte’ handtekening"})," en upload als ",l.jsx("strong",{children:"PDF"}),"."]}),l.jsx("li",{children:"Upload bij een relevante competentie of een algemene sectie (Overige informatie en documenten) indien beschikbaar."}),l.jsx("li",{children:"Zorg dat de titels op de verklaring exact overeenkomen met de titels van je uploads in dit portfolio."})]}),l.jsx("div",{className:"mt-1 pl-4 text-xs text-slate-600",children:l.jsx("p",{children:"Je kunt de authenticiteitsverklaring downloaden via de materialen van je traject of opvragen via Berichten (Contact)."})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Feedback en contact"}),l.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsx("li",{children:"Je portfoliobegeleider reageert doorgaans binnen drie werkdagen."}),l.jsx("li",{children:"Vraag actief om feedback via Berichten; de begeleider kijkt niet uit zichzelf in je portfolio."}),l.jsx("li",{children:"Verwerk ontvangen feedback vóórdat je je portfolio als ‘klaar’ wilt laten aanmerken."}),l.jsxs("li",{children:["Je begeleider ondersteunt je; de ",l.jsx("strong",{children:"assessor"})," beoordeelt uiteindelijk je portfolio."]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-evc-blue-700",children:"Checklist vóór je afrondt"}),l.jsxs("ol",{className:"list-decimal space-y-1 pl-5 text-slate-700 marker:text-evc-blue-700",children:[l.jsx("li",{children:"Vrijwillige deelname aangevinkt."}),l.jsx("li",{children:"Profielfoto toegevoegd."}),l.jsx("li",{children:"Relevante werkervaring, opleidingen en certificaten toegevoegd."}),l.jsx("li",{children:"Loopbaandoel ingevuld (pagina ‘Mijn loopbaandoel’)."}),l.jsx("li",{children:"Vragenlijst Loopbaan en Burgerschap (indien van toepassing) ingevuld."}),l.jsx("li",{children:"Feedback van je begeleider verwerkt."}),l.jsx("li",{children:"Alle documenten als PDF geüpload en duidelijk benoemd."})]})]}),l.jsx("div",{className:"rounded-xl border border-evc-blue-200 bg-white/85 p-4 text-[0.8rem] text-evc-blue-900",children:"Heb je hulp nodig of twijfel je over je bewijs? Stuur je begeleider een bericht via de pagina Berichten."})]})}):null]})}),at?l.jsx(vs,{label:"Portfolio laden"}):null,p&&!at?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:p}):null,b&&!at?l.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:["Kon competenties niet laden: ",b.message||"Onbekende fout"]}):null,I?l.jsxs("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:["Kon uploads niet laden: ",I.message||"Onbekende fout"]}):null,!at&&!qe?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er is nog geen traject aan jouw account gekoppeld."}):null,!at&&qe&&i.length===0?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white px-6 py-12 text-center text-sm text-slate-400",children:"Er zijn nog geen competenties gekoppeld aan jouw traject."}):null,l.jsxs("section",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Trajectportfolio"}),l.jsxs("p",{className:"max-w-2xl text-sm text-slate-500",children:["Orden je opleiding, werkervaring en documenten per competentie. Voeg nieuwe bewijsstukken toe en houd overzicht in je voortgang.",e?` Je coach ${e.name} kijkt mee en geeft feedback.`:""]})]}),l.jsx("div",{className:"space-y-3",children:i.map((F,ee)=>{const Z=F.id||F.code||String(ee),le=r.includes(Z),gt=Qe(F,Z),Vt=`competency-${Z}`;return l.jsxs("article",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm transition hover:shadow-lg",children:[l.jsxs("button",{type:"button",onClick:()=>Y(Z),className:"flex w-full items-center justify-between gap-3 px-4 py-3 text-left","aria-expanded":le,"aria-controls":Vt,children:[l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("p",{className:"text-[0.58rem] font-semibold uppercase tracking-[0.35em] text-evc-blue-600",children:F.code||`Competentie ${ee+1}`}),F.groupTitle?l.jsx("span",{className:"text-[0.55rem] uppercase tracking-[0.25em] text-slate-400",children:F.groupTitle}):null]}),l.jsx("h3",{className:"text-lg font-semibold leading-tight text-slate-900",children:F.name||F.title||"Onbenoemde competentie"})]}),l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 text-slate-500 transition",children:l.jsx(go,{className:`h-3.5 w-3.5 transition-transform ${le?"rotate-180":""}`})})]}),l.jsx("div",{id:Vt,className:`overflow-hidden border-t border-slate-100 px-5 transition-[max-height] duration-500 ${le?"max-h-[1200px] py-5":"max-h-0"}`,children:le?l.jsxs("div",{className:"space-y-6 text-xs text-slate-500",children:[F.description?l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Korte omschrijving"}),l.jsx("p",{className:"leading-relaxed text-slate-600",children:F.description})]}):null,l.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Wat wordt er van je verwacht?"}),ve(F.expectations,"Nog geen verwachtingen vastgelegd.","xs")]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Vakkennis en vaardigheden"}),ve(F.subjectKnowledge,"Nog geen vakkennis vastgelegd.","xs")]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Gedragscomponenten"}),ve(F.behavioralComponents,"Nog geen gedragscomponenten vastgelegd.","xs")]}),l.jsxs("div",{className:"space-y-2 rounded-2xl bg-slate-50 p-4 text-slate-600",children:[l.jsx("p",{className:"text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"Gewenst resultaat"}),l.jsx("p",{className:"mt-2 leading-relaxed text-xs",children:F.desiredOutcome||"Nog niet vastgelegd."})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Bewijsstukken"}),gt.length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-400",children:'Nog geen bestanden. Klik op "Voeg upload toe" om te starten.'}):l.jsx("ul",{className:"space-y-2 text-xs text-slate-600",children:gt.map(se=>{const Le=!!(se.downloadURL||se.storagePath),Kt=se.id||se.storagePath||se.fileName||se.name;return l.jsxs("li",{className:"flex items-center gap-3 rounded-xl border border-slate-100 bg-white px-3 py-2 shadow-sm",children:[l.jsx(Ab,{className:"h-4 w-4 text-slate-400"}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"truncate text-xs font-semibold text-slate-700",children:se.displayName||se.name||se.fileName}),se.uploadedAt?l.jsxs("p",{className:"mt-0.5 text-[0.65rem] text-slate-400",children:["Geüpload op ",se.uploadedAt.toLocaleString()]}):null]}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"whitespace-nowrap rounded-full border border-brand-200 px-3 py-1 text-[0.65rem] font-semibold text-brand-600 transition hover:border-brand-400 hover:bg-brand-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-400",onClick:()=>ts(se),disabled:L===Kt||!Le,children:L===Kt?"Bezig...":Le?"Download":"Niet beschikbaar"}),l.jsx("button",{type:"button",onClick:()=>ns(se),disabled:x===se.id,className:"inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-200 text-red-500 transition hover:border-red-300 hover:bg-red-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-300","aria-label":"Verwijder upload",children:x===se.id?l.jsx("span",{className:"text-[9px] font-semibold uppercase tracking-wide",children:"Wacht"}):l.jsx(np,{className:"h-3.5 w-3.5"})})]})]},Kt)})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[0.65rem] font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Naam van je upload"}),l.jsx("input",{type:"text",value:C[Z]||"",onChange:se=>re(Z,se.target.value),placeholder:"Bijvoorbeeld: Reflectieverslag week 3",className:`mt-2 w-full rounded-full border px-4 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-brand-400 ${D[Z]?"border-red-300 focus:ring-red-300":"border-slate-200 focus:border-brand-400"}`}),D[Z]?l.jsx("p",{className:"mt-1 text-[0.65rem] text-red-500",children:D[Z]}):null]}),l.jsx("input",{ref:se=>{se?V.current[Z]=se:delete V.current[Z]},type:"file",className:"hidden",onChange:se=>W(F.id||F.code||Z,se)}),l.jsxs("button",{type:"button",onClick:()=>K(Z),disabled:R===(F.id||F.code||Z),className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-300 px-3 py-2 text-[0.7rem] font-semibold text-brand-600 transition hover:border-brand-400 hover:bg-brand-50 disabled:cursor-not-allowed disabled:border-slate-200 disabled:text-slate-400",children:[l.jsx(Ab,{className:"h-4 w-4"}),R===(F.id||F.code||Z)?"Bezig...":"Voeg upload toe"]})]})]}),l.jsxs("div",{className:"flex items-start gap-2 rounded-2xl bg-slate-50 px-4 py-3 text-[0.7rem] text-slate-500",children:[l.jsx(dk,{className:"mt-0.5 h-4 w-4 text-brand-500"}),l.jsx("span",{className:"leading-relaxed",children:"Heb je vragen? Laat een bericht achter bij je coach in het berichtenoverzicht."})]})]}):null})]},Z)})})]})]})},Ar=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t.toDate=="function")try{const n=t.toDate();return Number.isNaN(n.getTime())?null:n}catch{return null}const e=new Date(t);return Number.isNaN(e.getTime())?null:e},OV=(t,e)=>[t,e].filter(Boolean).map(n=>String(n)).sort((n,s)=>n>s?1:n<s?-1:0).join("__");async function MV({customerId:t,coachId:e,customerProfile:n={},coachProfile:s={}}){if(!t||!e)return null;const i=OV(t,e),a=rt(Ee,"threads",i),r=await U0(a),o={[t]:{id:t,role:"customer",name:n.name||"",email:n.email||""},[e]:{id:e,role:"coach",name:s.name||"",email:s.email||""}};if(!r.exists())return await kh(a,{participants:[t,e],customerId:t,coachId:e,participantProfiles:o,createdAt:qt(),updatedAt:qt()}),i;const u=r.data()||{},d={...u.participantProfiles||{},...o};return await E2(a,{participantProfiles:d,customerId:u.customerId||t,coachId:u.coachId||e,updatedAt:qt()}).catch(()=>{}),i}const VV=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,customerId:e.customerId||null,coachId:e.coachId||null,participants:Array.isArray(e.participants)?e.participants:[],participantProfiles:e.participantProfiles||{},lastMessageTitle:e.lastMessageTitle||e.lastMessage||"",lastMessageSnippet:e.lastMessageSnippet||e.lastMessage||"",lastMessageAt:Ar(e.lastMessageAt)||Ar(e.updatedAt),updatedAt:Ar(e.updatedAt),createdAt:Ar(e.createdAt)}};function PV(t,e,n){if(!t)return n({data:[],error:new Error("userId ontbreekt")}),()=>{};const s=ln(Ee,"threads"),a=String(e).toLowerCase()==="admin"?Gn(s,Fa("updatedAt","desc")):Gn(s,Zs("participants","array-contains",t),Fa("updatedAt","desc"));return ft(a,async r=>{try{const o=await aV().catch(()=>new Map),u=r.docs.map(d=>VV(d)).filter(Boolean).map(d=>{const h=d.participantProfiles||{},m=d.participants.find(y=>y!==t)||null,p=h[m]||o.get(m)||{};return{...d,otherParticipantId:m,otherParticipantName:p.name||p.email||(m?m.slice(0,6):""),otherParticipantRole:p.role||null}}).sort((d,h)=>{const m=d.lastMessageAt?d.lastMessageAt.getTime():0;return(h.lastMessageAt?h.lastMessageAt.getTime():0)-m});n({data:u,error:null})}catch(o){n({data:[],error:o})}},r=>n({data:[],error:r}))}const LV=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,senderId:e.senderId||null,receiverId:e.receiverId||null,senderRole:e.senderRole||null,senderName:e.senderName||"",receiverName:e.receiverName||"",messageTitle:e.messageTitle||"",messageText:e.messageText||"",timestamp:Ar(e.timestamp)||Ar(e.createdAt)||new Date,fileUrl:e.fileUrl||null,fileName:e.fileName||null}};function $2(t,e){if(!t)return e({data:[],error:new Error("threadId ontbreekt")}),()=>{};const n=ln(Ee,"threads",t,"messages"),s=Gn(n,Fa("timestamp","asc"));return ft(s,i=>{const a=i.docs.map(LV).filter(Boolean);e({data:a,error:null})},i=>e({data:[],error:i}))}function UV(t,e){const n=[];t&&n.push(t.trim()),e&&n.push(e.trim());const s=n.join(" – ");return s.length<=140?s:`${s.slice(0,137)}…`}async function Q2({threadId:t,senderId:e,receiverId:n,senderRole:s,senderName:i,receiverName:a,messageTitle:r,messageText:o,file:u}){if(!t)throw new Error("threadId ontbreekt");if(!e)throw new Error("senderId ontbreekt");const d=(r||"").trim(),h=(o||"").trim();if(!d&&!h)throw new Error("Het bericht heeft geen inhoud");const m=ln(Ee,"threads",t,"messages"),p=rt(m);let y=null,b=null;if(u){b=u.name;const R=Dh(Ac,`messages/${t}/${p.id}/${u.name}`);await B2(R,u),y=await $0(R)}await kh(p,{senderId:e,receiverId:n||null,senderRole:s||null,senderName:i||"",receiverName:a||"",messageTitle:d,messageText:h,fileUrl:y,fileName:b,timestamp:qt(),createdAt:qt()});const N=rt(Ee,"threads",t);return await E2(N,{lastMessageTitle:d,lastMessageSnippet:UV(d,h),lastMessageAt:qt(),lastMessageSenderId:e,lastMessageSenderName:i||"",updatedAt:qt()}).catch(()=>{}),p.id}const zV=t=>t instanceof Date?new Intl.DateTimeFormat("nl-NL",{dateStyle:"medium",timeStyle:"short"}).format(t):"",w_=t=>(t==null?void 0:t.firebaseUid)||(t==null?void 0:t.uid)||(t==null?void 0:t.id)||(t==null?void 0:t.userId)||null,BV=()=>{const{customer:t,coach:e}=es(),n=w_(t),s=w_(e),[i,a]=j.useState(null),[r,o]=j.useState([]),[u,d]=j.useState(!0),[h,m]=j.useState(null),[p,y]=j.useState(""),[b,N]=j.useState(""),[R,w]=j.useState(null),[_,E]=j.useState(!1);j.useEffect(()=>{let v=!1;return!n||!s?(a(null),d(!1),()=>{}):(d(!0),MV({customerId:n,coachId:s,customerProfile:{name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||""},coachProfile:{name:(e==null?void 0:e.name)||(e==null?void 0:e.email)||"",email:(e==null?void 0:e.email)||""}}).then(x=>{v||(a(x),m(null))}).catch(x=>{v||(m(x.message||"Kon het gesprek niet openen"),a(null))}).finally(()=>{v||d(!1)}),()=>{v=!0})},[n,s,t==null?void 0:t.name,t==null?void 0:t.email,e==null?void 0:e.name,e==null?void 0:e.email]),j.useEffect(()=>{if(!i)return o([]),()=>{};const v=$2(i,({data:x,error:T})=>{if(T){m(T.message||"Kon berichten niet laden");return}m(null),o(Array.isArray(x)?x:[])});return()=>{typeof v=="function"&&v()}},[i]);const I=j.useMemo(()=>r.map(v=>({...v,isOwn:v.senderId===n,timestampLabel:zV(v.timestamp),senderInitial:(v.senderName||"?").charAt(0).toUpperCase()})),[r,n]),M=async v=>{if(v.preventDefault(),!i||!n||!s)return;const x=p.trim(),T=b.trim();if(!x&&!T){m("Voer een titel of bericht in");return}E(!0),m(null);try{await Q2({threadId:i,senderId:n,receiverId:s,senderRole:"customer",senderName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Deelnemer",receiverName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||"Coach",messageTitle:x,messageText:T,file:R}),y(""),N(""),w(null)}catch(C){m(C.message||"Verzenden mislukt")}finally{E(!1)}},L=v=>{var T;const x=((T=v.target.files)==null?void 0:T[0])||null;w(x)};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("header",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Contact"}),l.jsxs("h1",{className:"text-3xl font-semibold text-slate-900",children:["Contact met ",(e==null?void 0:e.name)||(e==null?void 0:e.email)||"je coach"]})]}),l.jsx("p",{className:"max-w-2xl text-sm text-slate-500",children:"Stuur vragen of updates naar je coach. Je ontvangt automatisch een melding wanneer je coach reageert."})]}),h?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:h}):null,u?l.jsx(vs,{label:"Berichten laden"}):l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm",children:l.jsxs("div",{className:"flex flex-col gap-6 px-6 py-6",children:[l.jsx("div",{className:"max-h-[500px] space-y-4 overflow-y-auto pr-1",children:I.length===0?l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50/70 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen berichten. Stel hieronder je eerste vraag aan je coach."}):I.map(v=>l.jsxs("article",{className:`flex gap-4 rounded-2xl border px-4 py-4 shadow-sm ${v.isOwn?"border-evc-blue-100 bg-evc-blue-50/60":"border-slate-100 bg-slate-50"}`,children:[l.jsx("div",{className:`flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full text-sm font-semibold ${v.isOwn?"bg-evc-blue-600 text-white":"bg-slate-200 text-slate-700"}`,children:v.senderInitial}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("header",{className:"flex flex-wrap items-baseline justify-between gap-2",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[v.senderName,v.senderRole?l.jsx("span",{className:"ml-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-400",children:v.senderRole}):null]}),v.messageTitle?l.jsx("p",{className:"text-base font-semibold text-slate-900",children:v.messageTitle}):null]}),l.jsx("time",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:v.timestampLabel})]}),v.messageText?l.jsx("p",{className:"whitespace-pre-line text-sm text-slate-700",children:v.messageText}):null,v.fileUrl?l.jsxs("a",{href:v.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm font-medium text-evc-blue-700 hover:text-evc-blue-600",children:[l.jsx("span",{"aria-hidden":!0,children:"📎"}),"Download ",v.fileName||"bijlage"]}):null]})]},v.id))}),l.jsxs("form",{onSubmit:M,className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/50 px-5 py-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"message-title",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Onderwerp"}),l.jsx("input",{id:"message-title",type:"text",value:p,onChange:v=>y(v.target.value),placeholder:"Bijvoorbeeld: Vraag over planning",className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-700 shadow-inner focus:border-evc-blue-400 focus:outline-none focus:ring-2 focus:ring-evc-blue-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"message-body",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Bericht"}),l.jsx("textarea",{id:"message-body",value:b,onChange:v=>N(v.target.value),rows:5,placeholder:"Schrijf hier je bericht",className:"rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-700 shadow-inner focus:border-evc-blue-400 focus:outline-none focus:ring-2 focus:ring-evc-blue-100"})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-evc-blue-300 hover:text-evc-blue-600",children:[l.jsx("span",{"aria-hidden":!0,children:"📎"}),l.jsx("span",{children:"Voeg bijlage toe"}),l.jsx("input",{type:"file",className:"hidden",onChange:L})]}),R?l.jsxs("span",{className:"text-sm text-slate-500",children:["Geselecteerd: ",R.name]}):null,l.jsx("div",{className:"flex-1"}),l.jsx("button",{type:"submit",disabled:_,className:"inline-flex items-center gap-2 rounded-full bg-evc-blue-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-evc-blue-500 disabled:cursor-not-allowed disabled:bg-evc-blue-300",children:_?"Versturen…":"Verstuur bericht"})]})]})]})})]})},qV={dateOfBirth:"",placeOfBirth:"",nationality:"",phoneFixed:"",phoneMobile:"",street:"",houseNumber:"",addition:"",postalCode:"",city:"",email:"",name:"",educations:[],certificates:[],workExperience:[]},ql={contactPerson:"",currentRole:"",domains:"",qualification:{name:"",number:"",validity:""},voluntaryParticipation:!1,updatedAt:null},FV=()=>{var Vt,se,Le,Kt,ha,si;const{customer:t,coach:e}=es(),[n,s]=j.useState(qV),[i,a]=j.useState(!0),[r,o]=j.useState(!1),[u,d]=j.useState(null),[h,m]=j.useState({title:"",institution:"",startDate:"",endDate:"",note:""}),[p,y]=j.useState({role:"",organisation:"",startDate:"",endDate:"",note:""}),[b,N]=j.useState({title:"",note:"",file:null}),[R,w]=j.useState(!1),[_,E]=j.useState(null),[I,M]=j.useState(0),[L,v]=j.useState(ql),[x,T]=j.useState(ql),[C,k]=j.useState(!0),[D,A]=j.useState(!1),[de,G]=j.useState(null),[V,Q]=j.useState(null),[q,ie]=j.useState(!1),ye=(t==null?void 0:t.id)||(t==null?void 0:t.firebaseUid)||(t==null?void 0:t.uid)||null,qe=j.useMemo(()=>(t==null?void 0:t.name)||n.name||"Jouw profiel",[t==null?void 0:t.name,n.name]),st=n.email||(t==null?void 0:t.email)||"",at=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`id-${Date.now()}-${Math.round(Math.random()*1e6)}`,K=H=>ne=>{const{value:he}=ne.target;v(Te=>({...Te,[H]:he}))},W=H=>ne=>{const{value:he}=ne.target;v(Te=>({...Te,qualification:{...Te.qualification,[H]:he}}))},Y=H=>{const{checked:ne}=H.target;v(he=>({...he,voluntaryParticipation:ne}))},re=()=>{G(null),ie(!1),v(x)},xe=async()=>{if(ye){A(!0),G(null);try{await IV(ye,{evcTrajectory:L}),G({type:"success",message:"EVC-trajectgegevens opgeslagen"}),ie(!1)}catch(H){G({type:"error",message:(H==null?void 0:H.message)||"Opslaan mislukt"})}finally{A(!1)}}},ve=()=>{if(q){D||xe();return}G(null),v(x),ie(!0)};j.useEffect(()=>{let H=!0;return(async()=>{var he;a(!0);try{const Te=await ei("/customer/profile");if(!H)return;s(cn=>({...cn,...Te}))}catch(Te){if(!H)return;d({type:"error",message:((he=Te==null?void 0:Te.data)==null?void 0:he.error)||(Te==null?void 0:Te.message)||"Kon profiel niet laden"})}finally{H&&a(!1)}})(),()=>{H=!1}},[]),j.useEffect(()=>{if(!ye)return v(ql),T(ql),k(!1),ie(!1),G(null),Q(null),()=>{};k(!0);const H=kV(ye,({data:ne,error:he})=>{if(he){Q(he),k(!1);return}Q(null);const Te=(ne==null?void 0:ne.evcTrajectory)||ql;T(Te),q||v(Te),k(!1)});return()=>{typeof H=="function"&&H()}},[ye,q]);const Qe=H=>{const{name:ne,value:he}=H.target;s(Te=>({...Te,[ne]:he}))},ts=async H=>{var ne;H.preventDefault(),o(!0),d(null);try{const he={dateOfBirth:n.dateOfBirth,placeOfBirth:n.placeOfBirth,nationality:n.nationality,phoneFixed:n.phoneFixed,phoneMobile:n.phoneMobile,street:n.street,houseNumber:n.houseNumber,addition:n.addition,postalCode:n.postalCode,city:n.city,educations:n.educations||[],certificates:(n.certificates||[]).map(({id:cn,title:Kn,filePath:er,fileName:$,size:fe,uploadedAt:ke,note:$t})=>({id:cn,title:Kn,filePath:er,fileName:$,size:fe,uploadedAt:ke,note:$t})),workExperience:n.workExperience||[]},Te=await Y0("/customer/profile",he);s(cn=>({...cn,...Te})),d({type:"success",message:"Wijzigingen opgeslagen"})}catch(he){d({type:"error",message:((ne=he==null?void 0:he.data)==null?void 0:ne.error)||(he==null?void 0:he.message)||"Opslaan mislukt"})}finally{o(!1)}},ns=({state:H})=>{if(!(H!=null&&H.message))return null;const ne=H.type==="error",he=ne?K1:Bi,Te=ne?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return l.jsxs("div",{className:`flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${Te}`,children:[l.jsx(he,{className:"h-4 w-4"}),l.jsx("span",{children:H.message})]})},F=(H,ne)=>{s(he=>({...he,[H]:(he[H]||[]).filter(Te=>Te.id!==ne)}))},ee=()=>{if(!h.title.trim()){d({type:"error",message:"Voeg minimaal een titel toe voor je opleiding."});return}const H={id:at(),title:h.title.trim(),institution:h.institution.trim(),startDate:h.startDate||"",endDate:h.endDate||"",note:h.note.trim()};s(ne=>({...ne,educations:[...ne.educations||[],H]})),m({title:"",institution:"",startDate:"",endDate:"",note:""})},Z=()=>{if(!p.role.trim()&&!p.organisation.trim()&&!p.note.trim()){d({type:"error",message:"Vul minimaal een functie, organisatie of toelichting in."});return}const H={id:at(),role:p.role.trim(),organisation:p.organisation.trim(),startDate:p.startDate||"",endDate:p.endDate||"",note:p.note.trim()};s(ne=>({...ne,workExperience:[...ne.workExperience||[],H]})),y({role:"",organisation:"",startDate:"",endDate:"",note:""})},le=H=>{var he;const ne=((he=H.target.files)==null?void 0:he[0])||null;N(Te=>({...Te,file:ne}))},gt=async()=>{var ne;if(!b.file){E({type:"error",message:"Kies eerst een bestand."});return}const H=b.title.trim()||b.file.name;w(!0),E(null);try{const he=new FormData;he.append("file",b.file);const Te=await XM("/customer/profile/certificates/upload",he),cn={id:at(),title:H,filePath:Te.filePath,fileName:Te.fileName||b.file.name,size:Te.size,uploadedAt:Te.uploadedAt,note:b.note.trim()};s(Kn=>({...Kn,certificates:[...Kn.certificates||[],cn]})),N({title:"",note:"",file:null}),M(Kn=>Kn+1),E({type:"success",message:"Certificaat toegevoegd"})}catch(he){E({type:"error",message:((ne=he==null?void 0:he.data)==null?void 0:ne.error)||(he==null?void 0:he.message)||"Upload mislukt"})}finally{w(!1)}};return i?l.jsx(vs,{label:"Profiel laden"}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-brand-500",children:"Mijn profiel"}),l.jsxs("h1",{className:"mt-1 text-3xl font-semibold text-slate-900",children:["Profiel ",qe]}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-500",children:"Dit is de pagina waar je jouw persoonlijke gegevens kunt inzien en eventueel aanpassen."})]}),e?l.jsxs("div",{className:"rounded-3xl border border-brand-100 bg-brand-50 px-4 py-3 text-sm text-brand-700 shadow-sm",children:["Begeleid door ",l.jsx("strong",{children:e.name})]}):null]}),l.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"EVC-traject details"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Informatie over je trajectcontact en kwalificatiedossier. Pas deze gegevens aan wanneer er wijzigingen zijn."})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[q?l.jsx("button",{type:"button",onClick:re,className:"rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:text-slate-700",children:"Annuleren"}):null,l.jsx("button",{type:"button",onClick:ve,disabled:C||D,className:"rounded-full bg-brand-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:q?D?"Opslaan...":"Opslaan":"Wijzigen"})]})]}),l.jsxs("div",{className:"mt-4 space-y-4",children:[l.jsx(ns,{state:de}),V?l.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:V.message||"Kon EVC-trajectgegevens niet laden."}):null,C?l.jsx(vs,{label:"EVC-traject laden"}):q?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",htmlFor:"evc-contact-person",children:"Contactpersoon"}),l.jsx("input",{id:"evc-contact-person",type:"text",value:L.contactPerson||"",onChange:K("contactPerson"),placeholder:"Naam contactpersoon",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",htmlFor:"evc-current-role",children:"Huidige functie"}),l.jsx("input",{id:"evc-current-role",type:"text",value:L.currentRole||"",onChange:K("currentRole"),placeholder:"Bijvoorbeeld: Teamleider sociaal werk",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",htmlFor:"evc-domains",children:"Domeinen / sectoren"}),l.jsx("textarea",{id:"evc-domains",rows:3,value:L.domains||"",onChange:K("domains"),placeholder:"Bijvoorbeeld: Jeugdzorg, Maatschappelijk werk",className:"rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",htmlFor:"evc-qualification-name",children:"Naam kwalificatiedossier"}),l.jsx("input",{id:"evc-qualification-name",type:"text",value:((Vt=L.qualification)==null?void 0:Vt.name)||"",onChange:W("name"),placeholder:"Volledige naam",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",htmlFor:"evc-qualification-number",children:"Kwalificatienummer"}),l.jsx("input",{id:"evc-qualification-number",type:"text",value:((se=L.qualification)==null?void 0:se.number)||"",onChange:W("number"),placeholder:"Bijvoorbeeld: 25645",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",htmlFor:"evc-qualification-validity",children:"Geldig tot"}),l.jsx("input",{id:"evc-qualification-validity",type:"text",value:((Le=L.qualification)==null?void 0:Le.validity)||"",onChange:W("validity"),placeholder:"Bijvoorbeeld: 2026",className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),l.jsxs("label",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500",checked:!!L.voluntaryParticipation,onChange:Y}),l.jsx("span",{children:"Ik neem vrijwillig deel aan dit EVC-traject"})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Contactpersoon"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:x.contactPerson||"Niet opgegeven"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Huidige functie"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:x.currentRole||"Niet opgegeven"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Domeinen / sectoren"}),l.jsx("p",{className:"mt-1 text-sm text-slate-700 whitespace-pre-line",children:x.domains?x.domains:"Nog geen domeinen geregistreerd."})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Naam kwalificatiedossier"}),l.jsx("p",{className:"mt-1 text-sm font-medium text-slate-900",children:((Kt=x.qualification)==null?void 0:Kt.name)||"Niet opgegeven"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Nummer: ",((ha=x.qualification)==null?void 0:ha.number)||"-"," • Geldig tot: ",((si=x.qualification)==null?void 0:si.validity)||"-"]})]}),l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700",children:x.voluntaryParticipation?"Je neemt vrijwillig deel aan dit EVC-traject.":"Je hebt nog niet bevestigd dat je vrijwillig deelneemt aan dit EVC-traject."})]})]})]}),l.jsxs("form",{onSubmit:ts,className:"space-y-6",children:[l.jsx(ns,{state:u}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"grid gap-6 xl:grid-cols-[1.4fr,1fr]",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Persoonsgegevens"}),l.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"dateOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboortedatum"}),l.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:n.dateOfBirth||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"placeOfBirth",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Geboorteplaats"}),l.jsx("input",{id:"placeOfBirth",name:"placeOfBirth",value:n.placeOfBirth||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: Alkmaar"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"nationality",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Nationaliteit"}),l.jsx("input",{id:"nationality",name:"nationality",value:n.nationality||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: NL"})]})]})]}),l.jsxs("div",{className:"space-y-4 border-t border-slate-100 pt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Contactgegevens"}),l.jsx("button",{type:"button",onClick:()=>alert("Vraag je beheerder om je wachtwoord te wijzigen."),className:"text-sm font-semibold text-brand-600 transition hover:text-brand-500",children:"Wachtwoord wijzigen"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"phoneFixed",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (vast)"}),l.jsx("input",{id:"phoneFixed",name:"phoneFixed",value:n.phoneFixed||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0201234567"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"phoneMobile",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Telefoonnummer (mobiel)"}),l.jsx("input",{id:"phoneMobile",name:"phoneMobile",value:n.phoneMobile||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijvoorbeeld: 0612345678"})]}),l.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[l.jsx("label",{htmlFor:"email",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"E-mailadres"}),l.jsx("input",{id:"email",name:"email",value:st,readOnly:!0,className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm text-slate-500 shadow-inner"}),l.jsx("p",{className:"text-xs text-slate-400",children:"Het e-mailadres wordt beheerd door je organisatie."})]})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-6 rounded-2xl bg-slate-50 p-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Adresgegevens"}),l.jsxs("div",{className:"mt-4 grid gap-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"street",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Straatnaam"}),l.jsx("input",{id:"street",name:"street",value:n.street||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr,0.8fr]",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"houseNumber",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Huisnummer"}),l.jsx("input",{id:"houseNumber",name:"houseNumber",value:n.houseNumber||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"addition",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Toevoeging"}),l.jsx("input",{id:"addition",name:"addition",value:n.addition||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"postalCode",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Postcode"}),l.jsx("input",{id:"postalCode",name:"postalCode",value:n.postalCode||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100",placeholder:"Bijv. 1822 BW"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"city",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Woonplaats"}),l.jsx("input",{id:"city",name:"city",value:n.city||"",onChange:Qe,className:"rounded-xl border border-slate-200 px-4 py-2.5 text-sm text-slate-700 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Downloads"}),l.jsx("button",{type:"button",onClick:()=>alert("Download van profiel volgt later in de productieroute."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn profiel"}),l.jsx("button",{type:"button",onClick:()=>alert("Document downloads zijn binnenkort beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn documenten"}),l.jsx("button",{type:"button",onClick:()=>alert("Zelfevaluatie download is nog niet beschikbaar."),className:"flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-inner transition hover:text-brand-600",children:"⬇️ Download mijn zelfevaluatie"})]})]})]})}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Opleidingen"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Leg je afgeronde of lopende opleidingen vast inclusief toelichting."})]}),l.jsx("div",{className:"space-y-4",children:(n.educations||[]).length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen opleidingen toegevoegd."}):l.jsx("ul",{className:"space-y-3",children:n.educations.map(H=>l.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:H.title}),H.institution?l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:H.institution}):null]}),l.jsx("button",{type:"button",onClick:()=>F("educations",H.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[H.startDate?l.jsxs("span",{children:["Start: ",H.startDate]}):null,H.endDate?l.jsxs("span",{children:["Einde: ",H.endDate]}):null]}),H.note?l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:H.note}):null]},H.id))})}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe opleiding toevoegen"}),l.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[l.jsx("input",{type:"text",value:h.title,onChange:H=>m(ne=>({...ne,title:H.target.value})),placeholder:"Naam opleiding",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"text",value:h.institution,onChange:H=>m(ne=>({...ne,institution:H.target.value})),placeholder:"Onderwijsinstelling",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsx("input",{type:"month",value:h.startDate,onChange:H=>m(ne=>({...ne,startDate:H.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"month",value:h.endDate,onChange:H=>m(ne=>({...ne,endDate:H.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsx("textarea",{value:h.note,onChange:H=>m(ne=>({...ne,note:H.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("button",{type:"button",onClick:ee,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg opleiding toe"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Certificaten & diploma's"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Upload officiële documenten en voeg een toelichting toe."})]}),l.jsx("div",{className:"space-y-4",children:(n.certificates||[]).length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen certificaten geüpload."}):l.jsx("ul",{className:"space-y-3",children:n.certificates.map(H=>l.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:H.title}),l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:H.fileName})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("a",{href:H.filePath,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Bekijk"}),l.jsx("button",{type:"button",onClick:()=>F("certificates",H.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]})]}),H.note?l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:H.note}):null,l.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[H.uploadedAt?l.jsxs("span",{children:["Geüpload: ",new Date(H.uploadedAt).toLocaleDateString()]}):null,H.size?l.jsxs("span",{children:[(H.size/(1024*1024)).toFixed(2)," MB"]}):null]})]},H.id))})}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuw certificaat toevoegen"}),l.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[l.jsx("input",{type:"text",value:b.title,onChange:H=>N(ne=>({...ne,title:H.target.value})),placeholder:"Titel certificaat of diploma",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("textarea",{value:b.note,onChange:H=>N(ne=>({...ne,note:H.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"file",onChange:le,className:"text-sm"},I),l.jsx("button",{type:"button",onClick:gt,disabled:R,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:R?"Bezig met uploaden...":"Upload en voeg toe"}),_?l.jsx("p",{className:`text-xs ${_.type==="error"?"text-red-500":"text-emerald-600"}`,children:_.message}):null]})]})]})]})}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Relevante werkervaring"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beschrijf je belangrijke werkervaringen en voeg een toelichting toe."})]}),l.jsx("div",{className:"space-y-4",children:(n.workExperience||[]).length===0?l.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-500",children:"Nog geen werkervaring toegevoegd."}):l.jsx("ul",{className:"space-y-3",children:n.workExperience.map(H=>l.jsxs("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-start justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900",children:H.role||"Functie onbekend"}),H.organisation?l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:H.organisation}):null]}),l.jsx("button",{type:"button",onClick:()=>F("workExperience",H.id),className:"text-xs font-semibold text-brand-600 transition hover:text-brand-500",children:"Verwijder"})]}),l.jsxs("div",{className:"mt-2 flex flex-wrap gap-3 text-xs text-slate-400",children:[H.startDate?l.jsxs("span",{children:["Start: ",H.startDate]}):null,H.endDate?l.jsxs("span",{children:["Einde: ",H.endDate]}):null]}),H.note?l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:H.note}):null]},H.id))})}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Nieuwe ervaring toevoegen"}),l.jsxs("div",{className:"mt-3 grid gap-3 text-sm",children:[l.jsx("input",{type:"text",value:p.role,onChange:H=>y(ne=>({...ne,role:H.target.value})),placeholder:"Functietitel",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"text",value:p.organisation,onChange:H=>y(ne=>({...ne,organisation:H.target.value})),placeholder:"Organisatie",className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsx("input",{type:"month",value:p.startDate,onChange:H=>y(ne=>({...ne,startDate:H.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("input",{type:"month",value:p.endDate,onChange:H=>y(ne=>({...ne,endDate:H.target.value})),className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"})]}),l.jsx("textarea",{value:p.note,onChange:H=>y(ne=>({...ne,note:H.target.value})),placeholder:"Toelichting",rows:3,className:"rounded-xl border border-slate-200 px-4 py-2 shadow-inner focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsx("button",{type:"button",onClick:Z,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500",children:"Voeg werkervaring toe"})]})]})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:r,className:"rounded-full bg-lime-500 px-6 py-3 text-sm font-semibold text-white shadow transition hover:bg-lime-400 disabled:cursor-not-allowed disabled:bg-lime-300",children:r?"Opslaan...":"Opslaan"})})]})]})},HV=[{title:"Ambitie: wat wil je nog bereiken?",body:"Bedenk hoe je hoopt dat jouw loopbaan er de komende jaren uit gaat zien. Wat wil je nog bereiken in je werk? Wat wil je leren, of wat wil je nooit meer doen? Denk hier even goed over na, want dit zijn vaak moeilijke vragen."},{title:"Motivatie: wat verwacht je van dit traject?",body:"Bedenk naast jouw algemene ambitie, waarom je specifiek aan dit EVC-traject meedoet en wat je er van hoopt en verwacht."}],GV=()=>{const{customer:t}=es(),[e,n]=j.useState(""),[s,i]=j.useState(!0),[a,r]=j.useState(!1),[o,u]=j.useState(null),[d,h]=j.useState(null),m=(t==null?void 0:t.name)||"kandidaat";j.useEffect(()=>{let R=!0;return(async()=>{var _;i(!0);try{const E=await ei("/customer/career-goal");if(!R)return;n(typeof(E==null?void 0:E.content)=="string"?E.content:""),h((E==null?void 0:E.updatedAt)||null),u(null)}catch(E){R&&u({type:"error",message:((_=E==null?void 0:E.data)==null?void 0:_.error)||(E==null?void 0:E.message)||"Kon loopbaandoel niet laden"})}finally{R&&i(!1)}})(),()=>{R=!1}},[]);const p=async()=>{var R;r(!0),u(null);try{const w=await Y0("/customer/career-goal",{content:e});n(typeof(w==null?void 0:w.content)=="string"?w.content:""),h((w==null?void 0:w.updatedAt)||null),u({type:"success",message:"Loopbaandoel opgeslagen"})}catch(w){u({type:"error",message:((R=w==null?void 0:w.data)==null?void 0:R.error)||(w==null?void 0:w.message)||"Opslaan mislukt"})}finally{r(!1)}},y=({state:R})=>{if(!(R!=null&&R.message))return null;const w=R.type==="error",_=w?K1:Bi,E=w?"border-red-200 bg-red-50 text-red-700":"border-emerald-200 bg-emerald-50 text-emerald-700";return l.jsxs("div",{className:`flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm ${E}`,children:[l.jsx(_,{className:"h-4 w-4"}),l.jsx("span",{children:R.message})]})},N=(()=>{if(!d)return null;const R=new Date(d);return Number.isNaN(R.getTime())?null:R.toLocaleString()})();return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("header",{className:"space-y-3",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Mijn loopbaandoel"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Jouw ambitie in kaart"}),l.jsx("div",{className:"max-w-2xl space-y-4 text-sm text-slate-500",children:HV.map(R=>l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"font-semibold text-slate-700",children:R.title}),l.jsx("p",{children:R.body})]},R.title))}),N?l.jsxs("p",{className:"text-xs text-slate-400",children:["Laatst bijgewerkt op ",N]}):null]}),l.jsxs("section",{className:"space-y-6",children:[l.jsx(y,{state:o}),l.jsxs("article",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("label",{htmlFor:"careerGoal",className:"block text-sm font-semibold text-slate-800",children:["Loopbaandoel van ",m]}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Beschrijf je ambitie: welke stappen wil je zetten binnen je loopbaan en waarom past dit traject bij jou?"}),s?l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsx(vs,{label:"Loopbaandoel laden"})}):l.jsx("textarea",{id:"careerGoal",value:e,onChange:R=>n(R.target.value),rows:12,className:"mt-4 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow-sm focus:border-evc-blue-400 focus:outline-none focus:ring-2 focus:ring-evc-blue-100"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{type:"button",onClick:p,disabled:a||s,className:"inline-flex items-center gap-2 rounded-full bg-evc-blue-600 px-5 py-2.5 text-sm font-semibold text-white shadow-lg transition hover:bg-evc-blue-500 disabled:cursor-not-allowed disabled:opacity-60",children:[l.jsx(G1,{className:"h-4 w-4"}),a?"Opslaan...":"Opslaan"]})})]})]})},KV=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Werkplekbezoek"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Voorbereiding werkplekbezoek"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Onderdeel van je EVC-traject kan een bezoek aan je werkplek door de assessor zijn. De assessor komt dan kijken op je werkplek en heeft een gesprek met jou over je werk, hoe je dingen aanpakt, je ervaringen en jouw ambities."})]}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:"Je vindt hieronder het verslag van het werkplekbezoek wanneer het gesprek is geweest en de assessor hier een gespreksverslag over heeft geschreven."})})]}),$V=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Criteriumgericht interview"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Voorbereiding criteriumgericht interview"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Na afloop van het criteriumgericht interview schrijft de assessor een kort gespreksverslag."})]}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:"Dit vind je op deze pagina zodra jouw assessor deze heeft toegevoegd."})})]}),QV=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:"Handleiding"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Handleiding en veelgestelde vragen"}),l.jsx("p",{className:"text-sm text-slate-500",children:"[INSERT TEXT FROM EVCacademy]"})]}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:l.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:"[INSERT TEXT FROM EVCacademy]"})})]}),YV=({title:t,value:e,trend:n,icon:s,variant:i="brand"})=>{const a={brand:"bg-brand-50 text-brand-700",emerald:"bg-emerald-50 text-emerald-700",amber:"bg-amber-50 text-amber-700",sky:"bg-sky-50 text-sky-700",slate:"bg-slate-50 text-slate-700"};return l.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-white p-6 shadow-card transition hover:-translate-y-1 hover:shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-slate-500",children:t}),l.jsx("p",{className:"mt-2 text-3xl font-semibold text-slate-900",children:e})]}),s?l.jsx("span",{className:Me("rounded-full p-3",a[i]||a.brand),children:l.jsx(s,{className:"h-6 w-6"})}):null]}),n?l.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-slate-500",children:[l.jsxs("span",{className:Me("inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold",n.direction==="up"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"),children:[n.direction==="up"?"▲":"▼",n.value]}),l.jsx("span",{children:n.caption})]}):null,l.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-transparent via-white/40 to-transparent opacity-0 transition group-hover:opacity-100"})]})},XV=()=>{const{coach:t,customers:e=[],assignments:n=[],feedback:s=[]}=es()??{},i=j.useMemo(()=>(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Coach",[t]),a=j.useMemo(()=>{const u=e.length,d=n.filter(m=>((m==null?void 0:m.status)||"").toLowerCase()==="active").length,h=n.filter(m=>{const p=((m==null?void 0:m.status)||"").toLowerCase();return p==="pending"||p==="open"||p==="todo"}).length;return[{id:"assigned-customers",title:"Assigned customers",value:String(u),icon:uc,variant:"brand"},{id:"active-assignments",title:"Active assignments",value:String(d),icon:QR,variant:"emerald"},{id:"pending-reviews",title:"Pending reviews",value:String(h),icon:q1,variant:"amber"}]},[n,e]),r=j.useMemo(()=>[...s].sort((u,d)=>{const h=(u==null?void 0:u.updatedAt)instanceof Date?u.updatedAt.getTime():0;return((d==null?void 0:d.updatedAt)instanceof Date?d.updatedAt.getTime():0)-h}).slice(0,5),[s]),o=j.useMemo(()=>(i==null?void 0:i.split(" ")[0])||"Coach",[i]);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("section",{className:"rounded-3xl bg-gradient-to-br from-brand-500 via-brand-600 to-brand-700 px-8 py-10 text-white shadow-card",children:[l.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-white/70",children:"Welcome back"}),l.jsx("h2",{className:"mt-2 text-3xl font-semibold",children:`Hi ${o}, ready to coach?`}),l.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/80",children:"Review the latest uploads, leave actionable feedback, and keep your customers moving forward in their EVC journey."})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Today at a glance"}),l.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:a.map(u=>l.jsx(YV,{...u},u.id))})]}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:"Recent feedback activity"}),r.length===0?l.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Nog geen feedback vastgelegd."}):l.jsx("div",{className:"mt-4 divide-y divide-slate-100",children:r.map(u=>l.jsxs("article",{className:"flex items-center justify-between py-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:u.customerName||"Onbekende klant"}),l.jsx("p",{className:"text-xs text-slate-500",children:u.competencyId||"Competentie"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Feedback"}),l.jsx("p",{className:"text-sm font-medium text-slate-700",children:u.summary||u.content||"-"})]}),l.jsx("div",{className:"text-right text-xs text-slate-400",children:u.updatedAt?u.updatedAt.toLocaleString():""})]},u.id))})]})]})},kn=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t.toDate=="function")try{const n=t.toDate();return Number.isNaN(n.getTime())?null:n}catch{return null}const e=new Date(t);return Number.isNaN(e.getTime())?null:e},J0=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,...e,lastActivity:kn(e.lastActivity),createdAt:kn(e.createdAt),updatedAt:kn(e.updatedAt)}},WV=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,coachId:e.coachId||null,customerId:e.customerId||null,status:e.status||"pending",createdAt:kn(e.createdAt),updatedAt:kn(e.updatedAt)}},JV=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{};return{id:t.id,coachId:e.coachId||null,customerId:e.customerId||null,text:e.text||"",timestamp:kn(e.timestamp),lastEdited:kn(e.lastEdited)||kn(e.timestamp)}},ZV=t=>{if(!(t!=null&&t.exists()))return null;const e=t.data()||{},n=kn(e.updatedAt)||kn(e.createdAt);return{id:t.id,coachId:e.coachId||null,coachName:e.coachName||"",customerId:e.customerId||null,customerName:e.customerName||"",competencyId:e.competencyId||"",summary:e.summary||e.status||"",content:e.content||e.body||"",updatedAt:n,createdAt:kn(e.createdAt)}},Vu=()=>({contactPerson:"",currentRole:"",domains:"",qualification:{name:"",number:"",validity:""},voluntaryParticipation:!1,updatedAt:null}),eP=(t={})=>{const e=t.qualification||{};return{contactPerson:t.contactPerson||"",currentRole:t.currentRole||"",domains:Array.isArray(t.domains)?t.domains.join(", "):t.domains||"",qualification:{name:e.name||t.qualificationName||"",number:e.number||t.qualificationNumber||"",validity:e.validity||t.qualificationValidity||""},voluntaryParticipation:!!t.voluntaryParticipation,updatedAt:kn(t.updatedAt||t.lastUpdated||null)}},tP=t=>{if(!(t!=null&&t.exists()))return{evcTrajectory:Vu(),updatedAt:null};const e=t.data()||{};return{evcTrajectory:eP(e.evcTrajectory||{}),updatedAt:kn(e.updatedAt||e.lastUpdated||null)}};function nP(t,e){if(!t)return e({data:null,error:new Error("coachUid ontbreekt")}),()=>{};const n=rt(Ee,"users",t),s=rt(Ee,"coachProfiles",t);let i=null,a=null,r=null,o=null;const u=()=>{if(r||o){e({data:null,error:r||o});return}if(!i){e({data:null,error:null});return}e({data:{...i,...a},error:null})},d=ft(n,m=>{i=J0(m),r=null,u()},m=>{r=m,u()}),h=ft(s,m=>{a=m!=null&&m.exists()?m.data():null,o=null,u()},m=>{o=m,u()});return()=>{d(),h()}}function sP(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=ln(Ee,"users"),s=Gn(n,Zs("coachId","==",t));return ft(s,i=>{const a=i.docs.map(J0).filter(Boolean).sort((r,o)=>(r.name||"").localeCompare(o.name||""));e({data:a,error:null})},i=>e({data:[],error:i}))}function iP(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=ln(Ee,"assignments"),s=Gn(n,Zs("coachId","==",t),Fa("createdAt","desc"));return ft(s,i=>{const a=i.docs.map(WV).filter(Boolean);e({data:a,error:null})},i=>e({data:[],error:i}))}function aP(t,e){if(!t)return e({data:[],error:new Error("coachUid ontbreekt")}),()=>{};const n=ln(Ee,"feedback"),s=Gn(n,Zs("coachId","==",t),Fa("updatedAt","desc"));return ft(s,i=>{const a=i.docs.map(ZV).filter(Boolean);e({data:a,error:null})},i=>e({data:[],error:i}))}const Jf=(t={})=>({trajectId:t.trajectId||null,trajectName:t.trajectName||"",trajectCode:t.trajectCode||"",totalCompetencies:0,completedCompetencies:0,completionPercentage:0,competencies:[],uploadsByCompetency:{}});function Y2(t,e,n){if(!t)return n({data:Jf(),error:new Error("customerId ontbreekt")}),()=>{};if(!e)return n({data:Jf(),error:null}),()=>{};let s=[],i=[],a=null,r=null,o=null,u=null;const d=()=>{const b=s.reduce((_,E)=>(_[E.id]=[],_),{});i.forEach(_=>{(b[_.competencyId]||(b[_.competencyId]=[])).push(_)});const N=s.length,R=s.filter(_=>(b[_.id]||[]).length>0).length,w=N>0?Math.round(R/N*100):0;n({data:{trajectId:e,trajectName:(a==null?void 0:a.name)||"",trajectCode:(a==null?void 0:a.code)||"",totalCompetencies:N,completedCompetencies:R,completionPercentage:w,competencies:s,uploadsByCompetency:b},error:r||o||u||null})};n({data:Jf({trajectId:e}),error:null});const h=rt(Ee,"trajects",e),m=ft(h,b=>{const N=(b==null?void 0:b.data())||{};a={id:(b==null?void 0:b.id)||e,name:N.name||N.title||"",code:N.code||""},u=null,d()},b=>{a=null,u=b,d()}),p=K2(e,({data:b,error:N})=>{s=Array.isArray(b)?b:[],r=N||null,d()}),y=G2(t,({uploads:b,error:N})=>{i=Array.isArray(b)?b:[],o=N||null,d()});return()=>{typeof m=="function"&&m(),typeof p=="function"&&p(),typeof y=="function"&&y()}}function X2(t,e,n){if(!t||!e)return n({data:null,error:new Error("coachId of customerId ontbreekt")}),()=>{};const s=rt(Ee,"notes",t,"customers",e);return ft(s,i=>n({data:JV(i),error:null}),i=>n({data:null,error:i}))}function W2(t,e){if(!t)return e({data:null,error:new Error("customerId ontbreekt")}),()=>{};const n=rt(Ee,"users",t),s=rt(Ee,"users",t,"profile","details");let i=null,a={evcTrajectory:Vu(),updatedAt:null},r=null,o=null;const u=()=>{if(r||o){e({data:null,error:r||o});return}e({data:{customer:i,profile:a,evcTrajectory:(a==null?void 0:a.evcTrajectory)||Vu()},error:null})},d=ft(n,m=>{i=J0(m),r=null,u()},m=>{i=null,r=m,u()}),h=ft(s,m=>{a=tP(m),o=null,u()},m=>{a={evcTrajectory:Vu(),updatedAt:null},o=m,u()});return u(),()=>{typeof d=="function"&&d(),typeof h=="function"&&h()}}async function J2({coachId:t,customerId:e,text:n,existingTimestamp:s}){if(!t)throw new Error("coachId ontbreekt");if(!e)throw new Error("customerId ontbreekt");const i=rt(Ee,"notes",t,"customers",e),a={coachId:t,customerId:e,text:typeof n=="string"?n:"",lastEdited:qt()};s instanceof Date&&!Number.isNaN(s.getTime())?a.timestamp=s:s||(a.timestamp=qt()),await kh(i,a,{merge:!0})}const cu=t=>({trajectId:(t==null?void 0:t.trajectId)||null,trajectName:(t==null?void 0:t.trajectName)||(t==null?void 0:t.trajectTitle)||"",trajectCode:(t==null?void 0:t.trajectCode)||"",totalCompetencies:0,completedCompetencies:0,completionPercentage:0,competencies:[],uploadsByCompetency:{}}),rP=new Intl.DateTimeFormat("nl-NL",{dateStyle:"medium",timeStyle:"short"}),lP=new Intl.DateTimeFormat("nl-NL",{dateStyle:"medium"}),Pu=t=>{if(!t)return null;const e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return null;try{return rP.format(e)}catch{return e.toLocaleString()}},oP=t=>{if(!t)return null;const e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return null;try{return lP.format(e)}catch{return e.toLocaleDateString()}},E_=t=>{if(!t)return"Nog geen activiteit";const e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return"Onbekend";const n=Date.now()-e.getTime(),s=Math.abs(n),i=60*1e3,a=60*i,r=24*a;if(s<i)return"Zojuist";if(s<a){const u=Math.round(s/i);return`${u} minuut${u===1?"":"en"} geleden`}if(s<r){const u=Math.round(s/a);return`${u} uur${u===1?"":"en"} geleden`}if(s<7*r){const u=Math.round(s/r);return`${u} dag${u===1?"":"en"} geleden`}return Pu(e)||"Onbekend"},cP=()=>{const{customers:t=[]}=es()??{},e=Ts(),[n,s]=j.useState(""),[i,a]=j.useState({}),[r,o]=j.useState({}),[u,d]=j.useState({}),h=j.useMemo(()=>[...t].sort((b,N)=>((b==null?void 0:b.name)||"").localeCompare((N==null?void 0:N.name)||"")),[t]),m=j.useMemo(()=>{if(!n)return h;const b=n.toLowerCase();return h.filter(N=>{const R=((N==null?void 0:N.name)||(N==null?void 0:N.email)||"").toLowerCase(),w=((N==null?void 0:N.trajectName)||(N==null?void 0:N.trajectTitle)||"").toLowerCase();return R.includes(b)||w.includes(b)})},[h,n]);j.useEffect(()=>{a(N=>{const R={};return h.forEach(w=>{if(w!=null&&w.id){if(!(w!=null&&w.trajectId)){R[w.id]={data:cu(w),error:null,loading:!1};return}R[w.id]=N[w.id]||{data:cu(w),error:null,loading:!!(w!=null&&w.trajectId)}}}),R});const b=h.filter(N=>(N==null?void 0:N.id)&&(N==null?void 0:N.trajectId)).map(N=>Y2(N.id,N.trajectId,({data:R,error:w})=>{a(_=>({..._,[N.id]:{data:{...cu(N),...R,trajectName:(R==null?void 0:R.trajectName)||(N==null?void 0:N.trajectName)||(N==null?void 0:N.trajectTitle)||""},error:w||null,loading:!1}}))}));return()=>{b.forEach(N=>{typeof N=="function"&&N()})}},[h]),j.useEffect(()=>{o(N=>{const R={};return h.forEach(w=>{w!=null&&w.id&&(R[w.id]=N[w.id]||{data:null,error:null,loading:!0})}),R});const b=h.filter(N=>N==null?void 0:N.id).map(N=>W2(N.id,({data:R,error:w})=>{o(_=>({..._,[N.id]:{data:R||null,error:w||null,loading:!1}}))}));return()=>{b.forEach(N=>{typeof N=="function"&&N()})}},[h]);const p=b=>{b&&e(`/coach/customers/${b}`)},y=b=>{b&&d(N=>({...N,[b]:!N[b]}))};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Mijn klanten"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Volg realtime de voortgang per traject en bekijk bewijsstukken per competentie."})]}),l.jsxs("div",{className:"relative",children:[l.jsx(wk,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),l.jsx("input",{type:"search",value:n,onChange:b=>s(b.target.value),placeholder:"Zoek op naam of traject",className:"h-10 w-full min-w-[220px] rounded-full border border-slate-200 bg-white pl-10 pr-4 text-sm shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"})]})]}),h.length===0?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"Er zijn nog geen klanten aan je gekoppeld."}):m.length===0?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-400",children:"Geen klanten gevonden voor deze zoekopdracht."}):l.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:m.map(b=>{var ye,qe,st,at,K,W;const N=i[b.id],R=(N==null?void 0:N.data)||cu(b),w=Math.round(Math.min(100,Math.max(0,(R==null?void 0:R.completionPercentage)??0))),_=r[b.id],E=(_==null?void 0:_.data)||null,I=(E==null?void 0:E.evcTrajectory)||{},M=!!(I!=null&&I.voluntaryParticipation),L=E_(b==null?void 0:b.lastActivity),v=Pu(b==null?void 0:b.lastActivity)||"Nog niet ingelogd",x=(I==null?void 0:I.qualification)||{},T=N!=null&&N.loading?"Voortgang laden...":`${R.completedCompetencies} van ${R.totalCompetencies} competenties met bewijs`,C=I!=null&&I.updatedAt?E_(I.updatedAt):"Nog niet ingevuld",k=((I==null?void 0:I.domains)||"").split(",").map(Y=>Y.trim()).filter(Boolean).slice(0,3).join(", "),D=(()=>{const Y=[];if(x.name&&Y.push(x.name),x.number&&Y.push(`Niveau ${x.number}`),x.validity){const re=oP(x.validity);Y.push(re?`geldig tot ${re}`:x.validity)}return Y.length>0?Y.join(" • "):"Nog geen dossiergegevens"})(),A=((I==null?void 0:I.domains)||"").split(/\r?\n|,/).map(Y=>Y.trim()).filter(Boolean).slice(0,3),de=((qe=(ye=E==null?void 0:E.questionnaires)==null?void 0:ye[0])==null?void 0:qe.name)||((st=E==null?void 0:E.questionnaire)==null?void 0:st.name)||"Nog niet ingevuld",G=Object.values((R==null?void 0:R.uploadsByCompetency)||{}).reduce((Y,re)=>Y+(Array.isArray(re)?re.length:0),0),V=((R==null?void 0:R.competencies)||[]).find(Y=>{const re=`${(Y==null?void 0:Y.title)||""} ${(Y==null?void 0:Y.code)||""}`.toLowerCase();return re.includes("loopbaan")||re.includes("burgerschap")}),Q=V?((at=R==null?void 0:R.uploadsByCompetency)==null?void 0:at[V.id])||[]:[],q=!!u[b.id],ie=[{key:"intake",label:"Intake",icon:b!=null&&b.lastActivity?"✅":"❌",text:b!=null&&b.lastActivity?`Laatst actief ${L.toLowerCase()}`:"Nog niet ingevuld"},{key:"diplomas",label:"Opleidingen, diploma's en certificaten",icon:G>0?"✅":"❌",text:G>0?`${G} bewijsstuk${G===1?"":"ken"} toegevoegd`:"Nog niet ingevuld"},{key:"experience",label:"Relevante werkervaring",icon:I!=null&&I.currentRole?"✅":"⚠️",text:I!=null&&I.currentRole?`Functie geregistreerd (${I.currentRole})`:"Nog geen werkervaring opgegeven"},{key:"otherDocs",label:"Overige informatie en documenten",icon:G>2?"✅":G>0?"⚠️":"❌",text:G>2?`${G} documenten beschikbaar`:G>0?"Beperkt aantal documenten":"Nog niet ingevuld"},{key:"loopbaan",label:"Loopbaan en burgerschap",icon:Q.length>0?"✅":"⚠️",text:Q.length>0?`${Q.length} bewijsstuk${Q.length===1?"":"ken"} toegevoegd`:"Nog niet ingevuld"},{key:"cbi",label:"Criteriumgericht interview",icon:"⚠️",text:"Nog niet gepland"},{key:"werkplek",label:"Werkplekbezoek",icon:"⚠️",text:"Nog niet gepland"}];return l.jsxs("article",{className:"flex flex-col justify-between rounded-3xl border border-slate-100 bg-white p-5 shadow-card transition hover:border-brand-200 hover:shadow-lg",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("header",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:b.name||b.email||"Onbekende klant"}),l.jsx("p",{className:"text-xs text-slate-500",children:b.email||"Geen e-mailadres"})]}),l.jsx("div",{className:Me("rounded-full px-3 py-1 text-[11px] font-semibold",M?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"),children:M?"Vrijwillig":"Verplicht"})]}),l.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(sp,{className:"h-4 w-4 text-slate-400"}),l.jsx("span",{children:I!=null&&I.contactPerson?`Contactpersoon: ${I.contactPerson}`:"Geen contactpersoon bekend"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(q1,{className:"h-4 w-4 text-slate-400"}),l.jsxs("span",{children:["Laatste activiteit: ",L]})]}),l.jsx("div",{children:I!=null&&I.currentRole?`Huidige functie: ${I.currentRole}`:"Geen functie geregistreerd"}),l.jsxs("div",{children:["Domeinen: ",k||"Nog geen domeinen ingevuld"]}),l.jsx("div",{className:"text-slate-400",children:I!=null&&I.updatedAt?`EVC-details bijgewerkt ${C}`:"EVC-details nog niet ingevuld"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-medium uppercase tracking-[0.2em] text-slate-400",children:"Traject"}),l.jsx("div",{className:"text-sm font-semibold text-slate-900",children:(R==null?void 0:R.trajectName)||(b==null?void 0:b.trajectName)||(b==null?void 0:b.trajectTitle)||"Traject onbekend"}),R!=null&&R.trajectCode?l.jsxs("div",{className:"text-xs text-slate-500",children:["Code: ",R.trajectCode]}):null,l.jsx("div",{className:"mt-1 h-2 w-full overflow-hidden rounded-full bg-slate-200",children:l.jsx("div",{className:"h-full rounded-full bg-brand-500 transition-all",style:{width:w>0?`${w}%`:"4px"}})}),l.jsx("div",{className:"text-xs text-slate-500",children:T})]}),_!=null&&_.error||N!=null&&N.error?l.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-700",children:((K=_==null?void 0:_.error)==null?void 0:K.message)||((W=N==null?void 0:N.error)==null?void 0:W.message)||"Kon alle gegevens niet laden."}):null]}),l.jsxs("footer",{className:"mt-4 flex flex-wrap items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>p(b.id),className:"inline-flex items-center gap-2 rounded-full border border-brand-200 bg-brand-50 px-4 py-1.5 text-xs font-semibold text-brand-700 transition hover:border-brand-300 hover:bg-brand-100",children:["Overzicht client's traject",l.jsx(zi,{className:"h-3.5 w-3.5"})]}),l.jsx("button",{type:"button",onClick:()=>y(b.id),className:Me("inline-flex items-center gap-2 rounded-full border px-4 py-1.5 text-xs font-semibold transition",q?"border-emerald-200 bg-emerald-50 text-emerald-700 hover:border-emerald-300":"border-slate-200 bg-white text-slate-600 hover:border-brand-200 hover:text-brand-700"),children:q?"Sluit status":"Bekijk status"}),l.jsxs("span",{className:"text-[11px] text-slate-400",children:["Laatste update: ",Pu(b==null?void 0:b.updatedAt)||Pu(b==null?void 0:b.createdAt)||"Onbekend"]})]}),q?l.jsxs("div",{className:"mt-4 space-y-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-600",children:[l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-700",children:"Laatst ingelogd op"}),l.jsx("p",{children:v})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-700",children:"Kwalificatiedossier"}),l.jsx("p",{children:D})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-700",children:"Keuzedelen"}),A.length>0?l.jsx("ul",{className:"mt-1 space-y-1",children:A.map(Y=>l.jsx("li",{className:"text-slate-600",children:Y},Y))}):l.jsx("p",{children:"Nog niet ingevuld"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-700",children:"Vragenlijst"}),l.jsx("p",{children:de})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-700",children:"Vrijwillige deelname"}),l.jsx("p",{children:M?"Ja":"Nee"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Instrumenten"}),l.jsx("div",{className:"mt-2 space-y-2",children:ie.map(Y=>l.jsxs("div",{className:"grid grid-cols-[auto,1fr] items-start gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2",children:[l.jsx("span",{className:"text-base",role:"img","aria-label":Y.icon==="✅"?"voltooid":Y.icon==="❌"?"niet ingevuld":"in bewerking",children:Y.icon}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:Y.label}),l.jsx("p",{className:"text-[11px] text-slate-500",children:Y.text})]})]},Y.key))})]})]}):null]},b.id)})})]})},uP=new Intl.DateTimeFormat("nl-NL",{dateStyle:"medium",timeStyle:"short"}),dP=new Intl.DateTimeFormat("nl-NL",{dateStyle:"medium"}),eo=t=>{if(!t)return null;const e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return null;try{return uP.format(e)}catch{return e.toLocaleString()}},T_=t=>{if(!t)return null;const e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return null;try{return dP.format(e)}catch{return e.toLocaleDateString()}},hP=t=>{if(!t)return"Nog geen activiteit";const e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return"Onbekend";const n=Date.now()-e.getTime(),s=Math.abs(n),i=60*1e3,a=60*i,r=24*a;if(s<i)return"Zojuist";if(s<a){const u=Math.round(s/i);return`${u} minuut${u===1?"":"en"} geleden`}if(s<r){const u=Math.round(s/a);return`${u} uur${u===1?"":"en"} geleden`}if(s<7*r){const u=Math.round(s/r);return`${u} dag${u===1?"":"en"} geleden`}return eo(e)||"Onbekend"},fP={completed:"✅",attention:"⚠️",missing:"❌"},mP=({lastActivity:t,totalUploads:e,voluntary:n,currentRole:s,loopbaanUploads:i,questionnaireName:a})=>[{key:"intake",label:"Intake",status:t?"completed":"missing",message:t?`Laatst actief ${hP(t).toLowerCase()}`:"Nog niet ingevuld"},{key:"diplomas",label:"Opleidingen, diploma's en certificaten",status:e>0?"completed":"missing",message:e>0?`${e} bewijsstuk${e===1?"":"ken"} geüpload`:"Nog niet ingevuld"},{key:"experience",label:"Relevante werkervaring",status:s?"completed":"attention",message:s?`Functie geregistreerd (${s})`:"Nog geen werkervaring opgegeven"},{key:"loopbaan",label:"Loopbaan en burgerschap",status:i>0?"completed":"attention",message:i>0?`${i} bewijsstuk${i===1?"":"ken"} toegevoegd`:"Nog niet ingevuld"},{key:"questionnaire",label:"Vragenlijst",status:a&&a!=="Nog niet ingevuld"?"completed":"attention",message:a||"Nog niet ingevuld"},{key:"voluntary",label:"Vrijwillige deelname",status:n?"completed":"attention",message:n?"Ja":"Nee"},{key:"cbi",label:"Criteriumgericht interview",status:"attention",message:"Nog niet gepland"},{key:"werkplek",label:"Werkplekbezoek",status:"attention",message:"Nog niet gepland"}],pP=()=>{var se,Le,Kt,ha,si,H,ne,he,Te,cn,Kn,er;const{customerId:t}=YC(),e=Ts(),{customers:n=[],coach:s}=es()??{},i=j.useMemo(()=>n.find($=>$.id===t)||null,[n,t]),a=(s==null?void 0:s.id)||(s==null?void 0:s.firebaseUid)||(s==null?void 0:s.uid)||null,[r,o]=j.useState("overzicht"),[u,d]=j.useState(null),[h,m]=j.useState({data:null,loading:!0,error:null}),[p,y]=j.useState({data:null,loading:!1,error:null}),[b,N]=j.useState(null),[R,w]=j.useState(""),[_,E]=j.useState(!1),[I,M]=j.useState(!1),[L,v]=j.useState(null),[x,T]=j.useState({});j.useEffect(()=>{if(!t)return m({data:null,loading:!1,error:new Error("Geen klant-id")}),()=>{};m(fe=>({...fe,loading:!0}));const $=W2(t,({data:fe,error:ke})=>{if(ke){m({data:null,loading:!1,error:ke});return}m({data:fe,loading:!1,error:null})});return()=>{typeof $=="function"&&$()}},[t]),j.useEffect(()=>{if(!(i!=null&&i.id)||!(i!=null&&i.trajectId))return y({data:null,loading:!1,error:null}),()=>{};y({data:null,loading:!0,error:null});const $=Y2(i.id,i.trajectId,({data:fe,error:ke})=>{y({data:fe||null,loading:!1,error:ke||null})});return()=>{typeof $=="function"&&$()}},[i==null?void 0:i.id,i==null?void 0:i.trajectId]),j.useEffect(()=>{if(!a||!t)return N(null),w(""),v(null),E(!1),()=>{};E(!0);const $=X2(a,t,({data:fe,error:ke})=>{if(ke){v({type:"error",message:ke.message||"Kon notitie niet laden"}),E(!1);return}v(null),N(fe||null),w((fe==null?void 0:fe.text)||""),E(!1)});return()=>{typeof $=="function"&&$()}},[a,t]),j.useEffect(()=>{var fe;const $=((fe=p.data)==null?void 0:fe.competencies)||[];T(ke=>{if(!$.length)return{};const $t={...$.reduce(($n,Qt)=>({...$n,[Qt.id]:!1}),{})};if($.length>0){const $n=$[0].id;$t[$n]=ke[$n]??!0}return{...$t,...ke}})},[(se=p.data)==null?void 0:se.competencies]);const C=((Le=h.data)==null?void 0:Le.profile)||{},k=((Kt=h.data)==null?void 0:Kt.evcTrajectory)||C.evcTrajectory||{},D=((ha=h.data)==null?void 0:ha.customer)||i,A=(D==null?void 0:D.lastActivity)||(i==null?void 0:i.lastActivity)||null,de=eo(A)||"Nog niet ingelogd",G=!!(k!=null&&k.voluntaryParticipation),V=(k==null?void 0:k.qualification)||{},Q=j.useMemo(()=>{const $=[];if(V.name&&$.push(V.name),V.number&&$.push(`Niveau ${V.number}`),V.validity){const fe=T_(V.validity);$.push(fe?`geldig tot ${fe}`:V.validity)}return $.length>0?$.join(" • "):"Nog geen dossiergegevens"},[V.name,V.number,V.validity]),q=p.data||null,ie=j.useMemo(()=>q!=null&&q.uploadsByCompetency?Object.values(q.uploadsByCompetency).reduce(($,fe)=>$+(Array.isArray(fe)?fe.length:0),0):0,[q==null?void 0:q.uploadsByCompetency]),ye=j.useMemo(()=>q!=null&&q.competencies?q.competencies.find($=>{const fe=`${($==null?void 0:$.title)||""} ${($==null?void 0:$.code)||""}`.toLowerCase();return fe.includes("loopbaan")||fe.includes("burgerschap")}):null,[q==null?void 0:q.competencies]),qe=ye?((si=q==null?void 0:q.uploadsByCompetency)==null?void 0:si[ye.id])||[]:[],st=((ne=(H=C==null?void 0:C.questionnaires)==null?void 0:H[0])==null?void 0:ne.name)||((he=C==null?void 0:C.questionnaire)==null?void 0:he.name)||"Nog niet ingevuld",at=j.useMemo(()=>mP({lastActivity:A,totalUploads:ie,voluntary:G,currentRole:(k==null?void 0:k.currentRole)||(C==null?void 0:C.currentRole)||null,loopbaanUploads:qe.length,questionnaireName:st}),[A,ie,G,k==null?void 0:k.currentRole,C==null?void 0:C.currentRole,qe.length,st]),K=j.useMemo(()=>{var $,fe,ke;return[{key:"voluntary",label:"Vrijwillige deelname",completed:G,description:G?"Cliënt neemt vrijwillig deel":"Nog niet bevestigd"},{key:"loopbaandoel",label:"Loopbaandoel vastgelegd",completed:!!(($=C==null?void 0:C.careerGoal)!=null&&$.title||(fe=C==null?void 0:C.careerGoal)!=null&&fe.summary),description:((ke=C==null?void 0:C.careerGoal)==null?void 0:ke.title)||"Nog geen loopbaandoel opgegeven"},{key:"experience",label:"Werkervaring vastgelegd",completed:!!(k!=null&&k.currentRole||ie>0),description:(k==null?void 0:k.currentRole)||(ie>0?"Er staat bewijs in het portfolio":"Nog geen werkervaring ingevuld")}]},[G,(Te=C==null?void 0:C.careerGoal)==null?void 0:Te.title,(cn=C==null?void 0:C.careerGoal)==null?void 0:cn.summary,k==null?void 0:k.currentRole,ie]),W=(q==null?void 0:q.uploadsByCompetency)||{},Y=(q==null?void 0:q.competencies)||[],re=()=>l.jsx("div",{className:"space-y-2",children:at.map($=>l.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3",children:[l.jsx("span",{className:"text-lg",role:"img","aria-hidden":"true",children:fP[$.status]||"⚪"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:$.label}),l.jsx("p",{className:"text-xs text-slate-500",children:$.message})]})]},$.key))}),xe=async()=>{if(!(!a||!t)){M(!0),v({type:"info",message:"Opslaan..."});try{await J2({coachId:a,customerId:t,text:R,existingTimestamp:(b==null?void 0:b.timestamp)||null}),v({type:"success",message:"Notitie opgeslagen"})}catch($){v({type:"error",message:$.message||"Opslaan mislukt"})}finally{M(!1)}}};if(!i)return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("button",{type:"button",onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-500",children:[l.jsx(Eb,{className:"h-4 w-4"})," Terug naar klanten"]}),l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"Klant niet gevonden."})]});const ve=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("section",{className:"grid gap-6 rounded-3xl bg-white p-6 shadow-card lg:grid-cols-[220px,1fr]",children:[l.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[l.jsx("div",{className:"h-28 w-28 overflow-hidden rounded-full border border-slate-200 bg-slate-100",children:D!=null&&D.photoURL?l.jsx("img",{src:D.photoURL,alt:i.name||"Profielfoto",className:"h-full w-full object-cover"}):l.jsx("div",{className:"flex h-full w-full items-center justify-center text-3xl text-slate-400",children:l.jsx(sp,{className:"h-12 w-12"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:i.name||"Onbekende klant"}),l.jsx("p",{className:"text-sm text-slate-500",children:i.trajectName||i.trajectTitle||"Traject onbekend"})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Persoonlijk"}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Naam:"})," ",i.name||"Onbekend"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Geboortedatum:"})," ",C!=null&&C.dateOfBirth?T_(C.dateOfBirth):"Onbekend"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Geboorteplaats:"})," ",(C==null?void 0:C.birthplace)||"Onbekend"]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Contact"}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:[l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(tp,{className:"h-4 w-4 text-slate-400"})," ",i.email||"Geen e-mailadres"]}),l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(Sb,{className:"h-4 w-4 text-slate-400"})," ",(C==null?void 0:C.phone)||i.phone||"Geen telefoonnummer"]}),l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(Tb,{className:"h-4 w-4 text-slate-400"})," Laatste login: ",de]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Deelname"}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Vrijwillige deelname:"})," ",G?"Ja":"Nee"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Huidige functie:"})," ",(k==null?void 0:k.currentRole)||"Onbekend"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Kwalificatiedossier:"})," ",Q]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Instrumenten"}),l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:re()})]})]})]}),l.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Checklist"}),l.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:K.map($=>l.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3",children:[l.jsx(Bi,{className:Me("mt-1 h-5 w-5",$.completed?"text-emerald-500":"text-slate-300")}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:$.label}),l.jsx("p",{className:"text-xs text-slate-500",children:$.description})]})]},$.key))})]})]}),Qe=$=>{var fe;switch($){case"candidate-profile":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Profiel zoals de klant het ziet"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Belangrijkste persoonsgegevens en trajectinformatie."})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Naam:"})," ",i.name||"Onbekend"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"E-mail:"})," ",i.email||"Onbekend"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Telefoon:"})," ",(C==null?void 0:C.phone)||i.phone||"Onbekend"]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Vrijwillige deelname:"})," ",G?"Ja":"Nee"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Huidige functie:"})," ",(k==null?void 0:k.currentRole)||"Onbekend"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-slate-700",children:"Laatste login:"})," ",de]})]})]})]});case"candidate-intake":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Intake"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Voorlopige antwoorden uit het intakeformulier."})]}),l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen intakegegevens beschikbaar."})]});case"candidate-loopbaandoel":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Loopbaandoel"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Ingevulde loopbaandoelen uit het klantenportaal."})]}),C!=null&&C.careerGoal?l.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-5 text-sm text-slate-600",children:[l.jsx("p",{className:"font-semibold text-slate-700",children:C.careerGoal.title||"Loopbaandoel"}),l.jsx("p",{className:"mt-2 whitespace-pre-line text-sm",children:C.careerGoal.summary||C.careerGoal.description||"Geen beschrijving"})]}):l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen loopbaandoel ingevuld."})]});case"candidate-vragenlijst":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Vragenlijsten"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Overzicht van ingezonden formulieren."})]}),(fe=C==null?void 0:C.questionnaires)!=null&&fe.length?l.jsx("div",{className:"space-y-3",children:C.questionnaires.map(ke=>l.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[l.jsx("p",{className:"font-semibold text-slate-700",children:ke.name||"Vragenlijst"}),l.jsx("p",{className:"text-xs text-slate-500",children:ke.updatedAt?`Ingevuld op ${eo(ke.updatedAt)}`:"Datum onbekend"})]},ke.id||ke.name))}):l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen vragenlijst ingevuld."})]});case"candidate-contact":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Contactgegevens"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Contactinformatie zoals zichtbaar voor de klant."})]}),l.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(tp,{className:"h-4 w-4 text-slate-400"})," ",i.email||"Geen e-mailadres"]}),l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(Sb,{className:"h-4 w-4 text-slate-400"})," ",(C==null?void 0:C.phone)||i.phone||"Geen telefoonnummer"]}),l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(sp,{className:"h-4 w-4 text-slate-400"})," Contactpersoon: ",(k==null?void 0:k.contactPerson)||"Onbekend"]})]})]});default:return null}},ts=$=>{switch($){case"instrument-portfolio":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Portfolio"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Uploads en bewijsstukken per competentie."})]}),l.jsxs("div",{className:"rounded-full bg-slate-100 px-4 py-1 text-xs font-semibold text-slate-600",children:["Totaal ",ie," bestand",ie===1?"":"en"]})]}),Y.length===0?l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen competenties beschikbaar."}):l.jsx("div",{className:"space-y-3",children:Y.map(fe=>{const ke=W[fe.id]||[],$t=[];return fe.code&&$t.push(fe.code),fe.title&&$t.push(fe.title),l.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:$t.length>0?$t.join(" • "):fe.title||fe.code||"Competentie"}),l.jsxs("p",{className:"text-xs text-slate-500",children:[ke.length," bewijsstuk",ke.length===1?"":"ken"]})]},fe.id)})})]});case"instrument-werkplek":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Werkplekbezoek"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Plan of verslag van het werkplekbezoek."})]}),l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen werkplekbezoek geregistreerd."})]});case"instrument-cbi":return l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Criteriumgericht interview"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Voorbereiding en verslaglegging."})]}),l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen interview gepland of vastgelegd."})]});default:return null}},ns=()=>l.jsxs("section",{className:"space-y-4 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Kwalificatiedossier"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Alle kerntaken en competenties binnen dit traject."})]}),Y.length===0?l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen competenties beschikbaar."}):l.jsx("div",{className:"space-y-3",children:Y.map($=>{var $t,$n;const fe=!!x[$.id],ke=[];return $.code&&ke.push($.code),$.title&&ke.push($.title),l.jsxs("article",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-slate-50",children:[l.jsxs("button",{type:"button",onClick:()=>T(Qt=>({...Qt,[$.id]:!Qt[$.id]})),className:"flex w-full items-center justify-between px-5 py-4 text-left",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:ke.length>0?ke.join(" • "):$.title||$.code||"Competentie"}),$.description?l.jsx("p",{className:"text-xs text-slate-500",children:$.description}):null]}),fe?l.jsx(LR,{className:"h-4 w-4 text-slate-400"}):l.jsx(go,{className:"h-4 w-4 text-slate-400"})]}),l.jsxs("div",{className:Me("grid gap-4 border-t border-slate-200 px-5 transition-all duration-200",fe?"max-h-[520px] py-4":"max-h-0 overflow-hidden"),children:[$.desiredOutcome?l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Omschrijving"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:$.desiredOutcome})]}):null,($t=$.behavioralComponents)!=null&&$t.length?l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Prestatie-indicatoren"}),l.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-slate-600",children:$.behavioralComponents.map((Qt,tr)=>l.jsx("li",{children:Qt},`${$.id}-behavioral-${tr}`))})]}):null,($n=$.subjectKnowledge)!=null&&$n.length?l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Vakkennis en vaardigheden"}),l.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-slate-600",children:$.subjectKnowledge.map((Qt,tr)=>l.jsx("li",{children:Qt},`${$.id}-knowledge-${tr}`))})]}):null]})]},$.id)})})]}),F=()=>l.jsxs("section",{className:"space-y-5 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Aantekeningen"}),l.jsxs("h3",{className:"mt-1 flex items-center gap-2 text-lg font-semibold text-slate-900",children:[l.jsx(zg,{className:"h-5 w-5 text-brand-600"})," Persoonlijke notities"]}),l.jsx("p",{className:"text-sm text-slate-500",children:"Alleen zichtbaar voor jou als coach."})]}),l.jsx("div",{className:"text-xs text-slate-500",children:(b==null?void 0:b.lastEdited)instanceof Date?`Laatst bewerkt ${eo(b.lastEdited)}`:(b==null?void 0:b.timestamp)instanceof Date?`Laatst bewerkt ${eo(b.timestamp)}`:"Nog niet opgeslagen"})]}),_?l.jsx(vs,{label:"Notitie laden"}):l.jsxs(l.Fragment,{children:[l.jsx("textarea",{value:R,onChange:$=>{w($.target.value),v(null)},rows:12,placeholder:"Schrijf je observaties en afspraken.",className:"w-full rounded-3xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow-inner focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsx("div",{className:"text-xs",children:(L==null?void 0:L.type)==="error"?l.jsx("span",{className:"text-rose-600",children:L.message}):(L==null?void 0:L.type)==="success"?l.jsx("span",{className:"text-emerald-600",children:L.message}):(L==null?void 0:L.type)==="info"?l.jsx("span",{className:"text-slate-500",children:L.message}):null}),l.jsxs("button",{type:"button",onClick:xe,disabled:I,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:opacity-60",children:[l.jsx(G1,{className:"h-4 w-4"})," ",I?"Opslaan...":"Bewaar notitie"]})]})]})]}),ee=()=>r==="overzicht"?ve():r.startsWith("candidate-")?Qe(r):r.startsWith("instrument-")?ts(r):r==="kwalificatiedossier"?ns():r==="aantekeningen"?F():null,Z=h.loading||p.loading,le=h.error||p.error,gt=$=>Me("inline-flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold transition",$?"border-brand-300 bg-brand-50 text-brand-700":"border-slate-200 bg-white text-slate-600 hover:border-brand-200"),Vt=$=>Me("rounded-full px-4 py-2 text-xs font-semibold transition",$?"bg-brand-600 text-white shadow":"bg-white text-slate-600 hover:bg-brand-50");return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("button",{type:"button",onClick:()=>e(-1),className:"inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-500",children:[l.jsx(Eb,{className:"h-4 w-4"})," Terug naar klanten"]}),l.jsxs("header",{className:"rounded-3xl bg-white p-6 shadow-card",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Trajectoverzicht"}),l.jsxs("div",{className:"mt-3 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:i.name||"Onbekende klant"}),l.jsx("p",{className:"text-sm text-slate-500",children:i.trajectName||i.trajectTitle||"Traject onbekend"})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[l.jsx(Tb,{className:"h-3.5 w-3.5 text-slate-400"})," Laatste login ",de]}),l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[l.jsx(Ug,{className:"h-3.5 w-3.5 text-slate-400"})," Kwalificatie: ",Q]})]})]})]}),l.jsxs("nav",{className:"flex flex-wrap items-center gap-2 rounded-3xl bg-white p-3 shadow-card",children:[l.jsx("button",{type:"button",onClick:()=>o("overzicht"),className:Vt(r==="overzicht"),children:"Overzicht"}),l.jsxs("div",{className:"relative",onMouseEnter:()=>d("candidate"),onMouseLeave:()=>d(null),children:[l.jsxs("button",{type:"button",onClick:()=>o("candidate-profile"),className:gt(r.startsWith("candidate-")),children:["Kandidaat ",l.jsx(go,{className:"h-3.5 w-3.5"})]}),u==="candidate"?l.jsx("div",{className:"absolute left-0 z-20 mt-2 w-48 rounded-2xl border border-slate-200 bg-white p-2 shadow-lg",children:[{key:"candidate-profile",label:"Profiel"},{key:"candidate-intake",label:"Intake"},{key:"candidate-loopbaandoel",label:"Loopbaandoel"},{key:"candidate-vragenlijst",label:"Vragenlijst"},{key:"candidate-contact",label:"Contact"}].map($=>l.jsx("button",{type:"button",onClick:()=>o($.key),className:Me("w-full rounded-xl px-3 py-2 text-left text-xs font-medium text-slate-600 hover:bg-brand-50",r===$.key?"bg-brand-50 font-semibold text-brand-700":null),children:$.label},$.key))}):null]}),l.jsxs("div",{className:"relative",onMouseEnter:()=>d("instrumenten"),onMouseLeave:()=>d(null),children:[l.jsxs("button",{type:"button",onClick:()=>o("instrument-portfolio"),className:gt(r.startsWith("instrument-")),children:["Instrumenten ",l.jsx(go,{className:"h-3.5 w-3.5"})]}),u==="instrumenten"?l.jsx("div",{className:"absolute left-0 z-20 mt-2 w-56 rounded-2xl border border-slate-200 bg-white p-2 shadow-lg",children:[{key:"instrument-portfolio",label:"Portfolio"},{key:"instrument-werkplek",label:"Werkplekbezoek"},{key:"instrument-cbi",label:"Criteriumgericht interview"}].map($=>l.jsx("button",{type:"button",onClick:()=>o($.key),className:Me("w-full rounded-xl px-3 py-2 text-left text-xs font-medium text-slate-600 hover:bg-brand-50",r===$.key?"bg-brand-50 font-semibold text-brand-700":null),children:$.label},$.key))}):null]}),l.jsx("button",{type:"button",onClick:()=>o("kwalificatiedossier"),className:Vt(r==="kwalificatiedossier"),children:"Kwalificatiedossier"}),l.jsx("button",{type:"button",onClick:()=>o("aantekeningen"),className:Vt(r==="aantekeningen"),children:"Aantekeningen"})]}),le?l.jsx("div",{className:"rounded-3xl border border-rose-200 bg-rose-50 px-6 py-4 text-sm text-rose-700",children:((Kn=h.error)==null?void 0:Kn.message)||((er=p.error)==null?void 0:er.message)||"Kon gegevens niet laden."}):null,Z?l.jsx(vs,{label:"Gegevens laden"}):ee(),l.jsxs("footer",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500",children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(zR,{className:"h-3.5 w-3.5 text-slate-400"}),"Dit overzicht synchroniseert realtime met Firestore."]}),l.jsxs("button",{type:"button",onClick:()=>e("/coach/customers"),className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-brand-500",children:["Terug naar overzicht",l.jsx(zi,{className:"h-3.5 w-3.5"})]})]})]})},gP=()=>{const{feedback:t=[],customers:e=[]}=es()??{},n=j.useMemo(()=>{const s=new Map(e.map(i=>[i.id,i]));return[...t].map(i=>{const a=s.get(i.customerId)||{},r=i.customerName||a.name||a.email||"Onbekende klant",o=i.updatedAt instanceof Date?i.updatedAt:null,u=o?o.toLocaleString():"";return{id:i.id,customerName:r,competencyLabel:i.competencyId||"Competentie",summary:i.summary||i.content||"-",updatedAt:o,updatedAtLabel:u}}).sort((i,a)=>{const r=i.updatedAt instanceof Date?i.updatedAt.getTime():0;return(a.updatedAt instanceof Date?a.updatedAt.getTime():0)-r})},[e,t]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Feedback queue"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Keep track of open reviews and recently submitted guidance."})]}),l.jsx("div",{className:"overflow-hidden rounded-3xl bg-white shadow-card",children:n.length===0?l.jsx("p",{className:"px-6 py-16 text-center text-sm text-slate-500",children:"Nog geen feedback geregistreerd."}):l.jsx("ul",{className:"divide-y divide-slate-100",children:n.map(s=>l.jsxs("li",{className:"flex items-center justify-between px-6 py-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:s.customerName}),l.jsx("p",{className:"text-xs text-slate-500",children:s.competencyLabel})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Feedback"}),l.jsx("p",{className:"font-medium text-slate-700",children:s.summary})]}),l.jsx("span",{className:"text-xs text-slate-400",children:s.updatedAtLabel})]},s.id))})})]})},yP=t=>(t==null?void 0:t.firebaseUid)||(t==null?void 0:t.uid)||(t==null?void 0:t.id)||(t==null?void 0:t.userId)||null,xP=t=>t instanceof Date?new Intl.DateTimeFormat("nl-NL",{dateStyle:"medium",timeStyle:"short"}).format(t):"",bP=()=>{const{coach:t}=es()??{},e=yP(t),n=(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Coach",[s,i]=j.useState([]),[a,r]=j.useState(!0),[o,u]=j.useState(null),[d,h]=j.useState(null),[m,p]=j.useState([]),[y,b]=j.useState(null),[N,R]=j.useState(!1),[w,_]=j.useState(""),[E,I]=j.useState(""),[M,L]=j.useState(null),[v,x]=j.useState(!1);j.useEffect(()=>{if(!e)return i([]),r(!1),u(new Error("Geen coachprofiel gevonden")),()=>{};const A=PV(e,"coach",({data:de,error:G})=>{if(G){u(G),i([]),r(!1);return}i(Array.isArray(de)?de:[]),u(null),r(!1)});return()=>{typeof A=="function"&&A()}},[e]),j.useEffect(()=>{if(s.length===0){h(null);return}h(A=>{var de;return A&&s.some(G=>G.id===A)?A:((de=s[0])==null?void 0:de.id)||null})},[s]),j.useEffect(()=>{if(!d)return p([]),b(null),R(!1),()=>{};R(!0);const A=$2(d,({data:de,error:G})=>{if(G){b(G),p([]),R(!1);return}p(Array.isArray(de)?de:[]),b(null),R(!1)});return()=>{typeof A=="function"&&A()}},[d]);const T=j.useMemo(()=>s.find(A=>A.id===d)||null,[s,d]),C=j.useMemo(()=>m.map(A=>({...A,isOwn:A.senderId===e,timestampLabel:xP(A.timestamp),senderInitial:(A.senderName||"?").charAt(0).toUpperCase()})),[m,e]),k=async A=>{if(A.preventDefault(),!T||!e)return;const de=w.trim(),G=E.trim();if(!(!de&&!G)&&T.otherParticipantId){x(!0),b(null);try{await Q2({threadId:T.id,senderId:e,receiverId:T.otherParticipantId,senderRole:"coach",senderName:n,receiverName:T.otherParticipantName||"Deelnemer",messageTitle:de,messageText:G,file:M}),_(""),I(""),L(null)}catch(V){b(V)}finally{x(!1)}}},D=A=>{var G;const de=((G=A.target.files)==null?void 0:G[0])||null;L(de)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Berichten"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Beheer de communicatie met je klanten op één plek."})]}),o?l.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:o.message||"Kon gesprekken niet laden."}):null,a?l.jsx(vs,{label:"Gesprekken laden"}):l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[280px,1fr]",children:[l.jsxs("aside",{className:"space-y-3 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Gesprekken"}),l.jsx("ul",{className:"space-y-2",children:s.length===0?l.jsx("li",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-center text-sm text-slate-400",children:"Nog geen gesprekken"}):s.map(A=>l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>h(A.id),className:`w-full rounded-2xl px-4 py-3 text-left text-sm transition ${A.id===d?"bg-evc-blue-50 text-evc-blue-700":"text-slate-600 hover:bg-slate-50"}`,children:[l.jsx("p",{className:"font-semibold text-slate-900",children:A.otherParticipantName}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:A.lastMessageSnippet||"Nieuw gesprek"})]})},A.id))})]}),l.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm",children:T?l.jsxs("div",{className:"flex flex-col gap-6 px-6 py-6",children:[l.jsx("header",{children:l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-evc-blue-600",children:["Contact met ",T.otherParticipantName||"deelnemer"]})}),y?l.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:y.message||"Kon berichten niet laden."}):null,N?l.jsx(vs,{label:"Berichten laden"}):l.jsx("div",{className:"max-h-[500px] space-y-4 overflow-y-auto pr-1",children:C.length===0?l.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50/70 px-6 py-10 text-center text-sm text-slate-400",children:"Nog geen berichten in dit gesprek."}):C.map(A=>l.jsxs("article",{className:`flex gap-4 rounded-2xl border px-4 py-4 shadow-sm ${A.isOwn?"border-evc-blue-100 bg-evc-blue-50/60":"border-slate-100 bg-slate-50"}`,children:[l.jsx("div",{className:`flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full text-sm font-semibold ${A.isOwn?"bg-evc-blue-600 text-white":"bg-slate-200 text-slate-700"}`,children:A.senderInitial}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("header",{className:"flex flex-wrap items-baseline justify-between gap-2",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[A.senderName,A.senderRole?l.jsx("span",{className:"ml-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-400",children:A.senderRole}):null]}),A.messageTitle?l.jsx("p",{className:"text-base font-semibold text-slate-900",children:A.messageTitle}):null]}),l.jsx("time",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:A.timestampLabel})]}),A.messageText?l.jsx("p",{className:"whitespace-pre-line text-sm text-slate-700",children:A.messageText}):null,A.fileUrl?l.jsxs("a",{href:A.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm font-medium text-evc-blue-700 hover:text-evc-blue-600",children:[l.jsx("span",{"aria-hidden":!0,children:"📎"}),"Download ",A.fileName||"bijlage"]}):null]})]},A.id))}),l.jsxs("form",{onSubmit:k,className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/50 px-5 py-4",children:[l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"coach-message-title",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Onderwerp"}),l.jsx("input",{id:"coach-message-title",type:"text",value:w,onChange:A=>_(A.target.value),placeholder:"Bijvoorbeeld: Update beoordeling",className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-700 shadow-inner focus:border-evc-blue-400 focus:outline-none focus:ring-2 focus:ring-evc-blue-100"})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("label",{htmlFor:"coach-message-body",className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Bericht"}),l.jsx("textarea",{id:"coach-message-body",rows:5,value:E,onChange:A=>I(A.target.value),placeholder:"Schrijf je bericht",className:"rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-700 shadow-inner focus:border-evc-blue-400 focus:outline-none focus:ring-2 focus:ring-evc-blue-100"})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-evc-blue-300 hover:text-evc-blue-600",children:[l.jsx("span",{"aria-hidden":!0,children:"📎"}),l.jsx("span",{children:"Voeg bijlage toe"}),l.jsx("input",{type:"file",className:"hidden",onChange:D})]}),M?l.jsxs("span",{className:"text-sm text-slate-500",children:["Geselecteerd: ",M.name]}):null,l.jsx("div",{className:"flex-1"}),l.jsx("button",{type:"submit",disabled:v,className:"inline-flex items-center gap-2 rounded-full bg-evc-blue-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-evc-blue-500 disabled:cursor-not-allowed disabled:bg-evc-blue-300",children:v?"Versturen…":"Verstuur bericht"})]})]})]}):l.jsx("div",{className:"flex h-full items-center justify-center p-12 text-sm text-slate-400",children:"Selecteer een gesprek links om berichten te bekijken"})})]})]})},vP=t=>t instanceof Date?new Intl.DateTimeFormat("nl-NL",{dateStyle:"medium",timeStyle:"short"}).format(t):null,_P=()=>{const{coach:t,customers:e=[]}=es()??{},n=(t==null?void 0:t.id)||(t==null?void 0:t.firebaseUid)||(t==null?void 0:t.uid)||null,s=j.useMemo(()=>[...e].sort((v,x)=>((v==null?void 0:v.name)||"").localeCompare((x==null?void 0:x.name)||"")),[e]),[i,a]=j.useState(()=>{var v;return((v=s[0])==null?void 0:v.id)||null}),[r,o]=j.useState(null),[u,d]=j.useState(""),[h,m]=j.useState(!1),[p,y]=j.useState(!1),[b,N]=j.useState(null),[R,w]=j.useState(null),_=j.useRef(!1);j.useEffect(()=>{var v;s.some(x=>x.id===i)||a(((v=s[0])==null?void 0:v.id)||null)},[s,i]),j.useEffect(()=>{if(N(null),w(null),o(null),!n||!i)return d(""),()=>{};m(!0);const v=X2(n,i,({data:x,error:T})=>{if(T){w(T),m(!1);return}w(null),o(x),_.current||d((x==null?void 0:x.text)||""),m(!1)});return()=>{typeof v=="function"&&v(),_.current=!1}},[n,i]);const E=v=>{d(v.target.value),_.current=!0,N(null)},I=async()=>{if(!(!n||!i)){y(!0),N({type:"info",message:"Opslaan..."});try{await J2({coachId:n,customerId:i,text:u,existingTimestamp:(r==null?void 0:r.timestamp)||null}),_.current=!1,N({type:"success",message:"Notitie opgeslagen"})}catch(v){N({type:"error",message:v.message||"Opslaan mislukt"})}finally{y(!1)}}},M=s.find(v=>v.id===i)||null,L=vP((r==null?void 0:r.lastEdited)||(r==null?void 0:r.timestamp)||null);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-brand-600",children:"Aantekeningenoverzicht"}),l.jsxs("h2",{className:"mt-1 flex items-center gap-2 text-xl font-semibold text-slate-900",children:[l.jsx(zg,{className:"h-5 w-5 text-brand-600"}),"Persoonlijke notities per klant"]}),l.jsx("p",{className:"text-sm text-slate-500",children:"Bewaar observaties en afspraken. Alles wordt realtime gesynchroniseerd met Firestore."})]}),s.length>0?l.jsx("select",{value:i||"",onChange:v=>{a(v.target.value||null),_.current=!1},className:"h-11 rounded-full border border-slate-200 bg-white px-4 text-sm font-medium text-slate-700 shadow-sm focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100",children:s.map(v=>l.jsx("option",{value:v.id,children:v.name||v.email||"Klant"},v.id))}):null]}),s.length===0?l.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 px-6 py-16 text-center text-sm text-slate-500",children:"Je hebt nog geen klanten om notities voor te maken."}):l.jsxs("section",{className:"space-y-5 rounded-3xl bg-white p-6 shadow-card",children:[l.jsxs("div",{className:"flex flex-col gap-2 border-b border-slate-100 pb-4 sm:flex-row sm:items-baseline sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Klant"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:(M==null?void 0:M.name)||(M==null?void 0:M.email)}),l.jsx("p",{className:"text-sm text-slate-500",children:(M==null?void 0:M.trajectName)||(M==null?void 0:M.trajectTitle)||"Traject onbekend"})]}),l.jsx("div",{className:"text-xs text-slate-500",children:L?`Laatst bewerkt: ${L}`:"Nog niet opgeslagen"})]}),R?l.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:R.message||"Kon de notitie niet laden."}):null,h?l.jsx(vs,{label:"Notitie laden"}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("textarea",{value:u,onChange:E,placeholder:"Schrijf hier je observaties, follow-up taken of aandachtspunten.",rows:12,className:"w-full rounded-3xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow-inner focus:border-brand-400 focus:outline-none focus:ring-2 focus:ring-brand-100"}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsx("div",{className:"text-xs text-slate-500",children:(b==null?void 0:b.type)==="error"?l.jsx("span",{className:"text-rose-600",children:b.message}):(b==null?void 0:b.type)==="success"?l.jsx("span",{className:"text-emerald-600",children:b.message}):(b==null?void 0:b.type)==="info"?l.jsx("span",{className:"text-slate-500",children:b.message}):null}),l.jsx("button",{type:"button",onClick:I,disabled:p||!_.current,className:"inline-flex items-center justify-center rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-300",children:p?"Opslaan...":"Bewaar notitie"})]})]})]})]})},wP=[{label:"Dashboard",to:"/admin",icon:ah,end:!0},{label:"Assignments",to:"/admin/assignments",icon:WR},{label:"Trajects",to:"/admin/trajects",icon:Ug},{label:"Users",to:"/admin/users",icon:uc},{label:"Profile",to:"/admin/profile",icon:F1}],EP=[{label:"Dashboard",to:"/coach",icon:ah,end:!0},{label:"My Customers",to:"/coach/customers",icon:uc},{label:"Feedback",to:"/coach/feedback",icon:Ug},{label:"Aantekeningen",to:"/coach/aantekeningen",icon:zg},{label:"Messages",to:"/coach/messages",icon:tp}],Zf=[{label:"Dashboard",to:"/customer/dashboard",icon:ah,end:!0},{label:"Mijn profiel",to:"/customer/profile",icon:F1},{label:"Mijn loopbaandoel",to:"/customer/career-goal",icon:nk},{label:"Mijn portfolio",to:"/customer/portfolio",icon:ek},{label:"Werkplekbezoek",to:"/customer/workplace-visit",icon:OR},{label:"Criteriumgericht interview",to:"/customer/criterium-interview",icon:KR},{label:"Contact",to:"/customer/contact",icon:fk},{label:"Handleiding",to:"/customer/manual",icon:IR}],To=t=>{if(!t||typeof t!="object")return t??null;const e={...t};return e.uid&&!e.firebaseUid?e.firebaseUid=e.uid:e.firebaseUid&&!e.uid&&(e.uid=e.firebaseUid),e},TP=()=>{const t=Ts(),[e,n]=j.useState(null),[s,i]=j.useState(null),[a,r]=j.useState(null),o=()=>{localStorage.removeItem("token"),t("/login",{replace:!0})};j.useEffect(()=>{let m=!0;const p=localStorage.getItem("user");if(p)try{const b=JSON.parse(p),N=(b==null?void 0:b.firebaseUid)||(b==null?void 0:b.uid);N&&m&&n(N)}catch{}const y=Zg(Jt,b=>{m&&b!=null&&b.uid&&n(N=>N||b.uid)});return()=>{m=!1,y()}},[]),j.useEffect(()=>{if(!e){i(null);return}const m=F2(e,({data:p,error:y})=>{if(y){r(y),i(null);return}r(null),i(p||null)});return()=>{typeof m=="function"&&m()}},[e]);const u=(s==null?void 0:s.name)||(s==null?void 0:s.email)||"Admin",d=s!=null&&s.role?s.role.charAt(0).toUpperCase()+s.role.slice(1):"Administrator",h=a?"Administrator":d;return l.jsx(Pg,{className:"bg-white",mainClassName:"bg-white",sidebar:l.jsx(Lg,{tone:"dark",header:l.jsxs("div",{className:"space-y-4 text-white",children:[l.jsx(rh,{className:"w-fit",tone:"dark"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Admin"}),l.jsx("h1",{className:"text-xl font-semibold text-white",children:"EVC Control"})]})]}),navItems:wP,footer:l.jsx("button",{type:"button",onClick:o,className:"flex w-full items-center justify-center rounded-lg border border-white/20 bg-white/10 px-3 py-2 text-sm font-medium text-white transition hover:bg-white/20",children:"Sign out"})}),topbar:l.jsx(Bg,{title:"Administration overview",tone:"brand",user:{name:u,subtitle:h,role:"Admin"},logoTo:"/admin",rightSlot:l.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[l.jsx("button",{type:"button",onClick:()=>alert("Mock: generate report"),className:"rounded-full border border-white/40 px-3 py-2 text-sm font-medium text-white transition hover:bg-white/10",children:"Generate report"}),l.jsx("button",{type:"button",onClick:o,className:"rounded-full bg-white px-3 py-2 text-sm font-semibold text-evc-blue-600 shadow-lg transition hover:bg-white/90",children:"Sign out"})]})}),children:l.jsx(Vg,{})})},NP=()=>{const t=Ts(),[e,n]=j.useState(()=>{try{const V=localStorage.getItem("user")||"null";return To(JSON.parse(V))}catch{return null}}),[s,i]=j.useState(!e),[a,r]=j.useState(null);j.useEffect(()=>{let V=!0;return(async()=>{i(!0);try{const q=await ei("/auth/me");if(!V)return;n(ie=>{const ye=To({...ie||{},...q||{}});try{localStorage.setItem("user",JSON.stringify(ye))}catch{}return ye}),r(null)}catch(q){if(!V)return;r(q)}finally{V&&i(!1)}})(),()=>{V=!1}},[]);const o=(e==null?void 0:e.firebaseUid)||(e==null?void 0:e.uid)||null,[u,d]=j.useState(null),[h,m]=j.useState(null);j.useEffect(()=>{if(!o)return d(null),m(null),()=>{};const V=nP(o,({data:Q,error:q})=>{if(q){m(q),d(null);return}m(null),d(Q||null)});return()=>{typeof V=="function"&&V()}},[o]);const[p,y]=j.useState([]),[b,N]=j.useState(null);j.useEffect(()=>{if(!o)return y([]),N(null),()=>{};const V=sP(o,({data:Q,error:q})=>{if(q){N(q),y([]);return}N(null),y(Array.isArray(Q)?Q:[])});return()=>{typeof V=="function"&&V()}},[o]);const[R,w]=j.useState([]),[_,E]=j.useState(null);j.useEffect(()=>{if(!o)return w([]),E(null),()=>{};const V=iP(o,({data:Q,error:q})=>{if(q){E(q),w([]);return}E(null),w(Array.isArray(Q)?Q:[])});return()=>{typeof V=="function"&&V()}},[o]);const[I,M]=j.useState([]),[L,v]=j.useState(null);j.useEffect(()=>{if(!o)return M([]),v(null),()=>{};const V=aP(o,({data:Q,error:q})=>{if(q){v(q),M([]);return}v(null),M(Array.isArray(Q)?Q:[])});return()=>{typeof V=="function"&&V()}},[o]);const x=j.useMemo(()=>[{value:"all",label:"Alle klanten"},...p.map(Q=>({value:Q.id,label:Q.name||Q.email||"Unknown customer"}))],[p]),[T,C]=j.useState("all");j.useEffect(()=>{var V;x.some(Q=>Q.value===T)||C(((V=x[0])==null?void 0:V.value)||"all")},[x,T]);const k=j.useMemo(()=>T==="all"?null:p.find(V=>V.id===T)||null,[T,p]),D=j.useMemo(()=>k?`Focus: ${k.name||k.email||"Customer"}`:p.length===0?"Geen klanten gekoppeld":`${p.length} klanten gekoppeld`,[k,p.length]),A={name:(u==null?void 0:u.name)||(e==null?void 0:e.name)||(u==null?void 0:u.email)||(e==null?void 0:e.email)||"Coach",subtitle:D,role:"Coach"},de=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/login",{replace:!0})},G=j.useMemo(()=>({coach:u,account:e,customers:p,assignments:R,feedback:I,selectedCustomer:k,errors:{user:a,profile:h,customers:b,assignments:_,feedback:L},loading:{user:s}}),[R,_,u,h,b,p,L,I,s,k,e,a]);return l.jsx(Pg,{className:"bg-white",mainClassName:"bg-white",sidebar:l.jsx(Lg,{tone:"dark",header:l.jsxs("div",{className:"space-y-4 text-white",children:[l.jsx(rh,{className:"w-fit",tone:"dark"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Coach"}),l.jsx("h1",{className:"text-xl font-semibold text-white",children:"EVC Workspace"})]})]}),navItems:EP}),topbar:l.jsx(Bg,{title:"Coaching dashboard",tone:"brand",user:A,logoTo:"/coach",rightSlot:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("select",{value:T,onChange:V=>C(V.target.value),className:"h-10 rounded-full border border-white/30 bg-white px-3 text-sm font-medium text-slate-900 shadow-sm focus:border-white/60 focus:outline-none focus:ring-2 focus:ring-white/30",children:x.map(V=>l.jsx("option",{value:V.value,children:V.label},V.value))}),l.jsx("button",{type:"button",onClick:de,className:"rounded-full bg-white px-3 py-2 text-sm font-semibold text-evc-blue-600 shadow-lg transition hover:bg-white/90",children:"Sign out"})]})}),children:l.jsx(Vg,{context:G})})},jP=()=>{const t=Ts(),[e,n]=j.useState(()=>{try{const G=localStorage.getItem("user")||"null";return To(JSON.parse(G))}catch{return null}}),[s,i]=j.useState(()=>{try{const G=localStorage.getItem("impersonationBackup");return G?JSON.parse(G):null}catch{return null}}),[a,r]=j.useState(!e),[o,u]=j.useState(null),[d,h]=j.useState(null),[m,p]=j.useState(null),[y,b]=j.useState(null),[N,R]=j.useState(null),w=aa();j.useEffect(()=>{let G=!0;return(async()=>{r(!0);try{const Q=await ei("/auth/me");if(!G)return;n(q=>{const ie=To({...q||{},...Q||{}});try{localStorage.setItem("user",JSON.stringify(ie))}catch{}return ie}),u(null)}catch(Q){if(!G)return;u(Q)}finally{G&&r(!1)}})(),()=>{G=!1}},[]);const _=(e==null?void 0:e.firebaseUid)||(e==null?void 0:e.uid)||null;j.useEffect(()=>{if(!_){h(null),p(null),b(null),R(null);return}const G=RV(_,({customer:V,coach:Q,assignment:q,error:ie})=>{if(ie){R(ie);return}R(null),V!==void 0&&h(V||null),Q!==void 0&&p(Q||null),q!==void 0&&b(q||null)});return()=>{typeof G=="function"&&G()}},[_]);const E=j.useMemo(()=>{if(d){const V=d.firebaseUid||d.id||null;return V?{...d,firebaseUid:V,uid:V}:d}if(!e)return null;const G=e.firebaseUid||e.uid||(e.id?String(e.id):null);return G?{id:G,uid:G,firebaseUid:G,name:e.name||e.email||"Customer",email:e.email||"",role:e.role||"customer",trajectId:e.trajectId||null}:null},[d,e]),I=j.useMemo(()=>m||null,[m]),M=j.useMemo(()=>{if(!(E!=null&&E.lastActivity))return"-";const G=E.lastActivity;return G instanceof Date?G.toLocaleString():typeof G=="string"?G:"-"},[E==null?void 0:E.lastActivity]),L=!!s,v=j.useMemo(()=>{if(!(s!=null&&s.userData))return null;const{name:G,email:V}=s.userData;return G||V||null},[s]),x=[];L&&x.push(`Meekijken door ${v||"Admin"}`),I!=null&&I.name&&x.push(`Coach: ${I.name}`),y!=null&&y.status&&x.push(y.status);const T=x.join(" • ")||"Customer",C=j.useMemo(()=>{const G=w.pathname;return Zf.find(V=>G.startsWith(V.to))||Zf[0]},[w.pathname]),k=(C==null?void 0:C.label)||"Mijn EVC",D={name:(E==null?void 0:E.name)||"Customer",subtitle:T,role:"Customer"},A=async()=>{try{await OT(Jt)}catch{}localStorage.removeItem("user"),localStorage.removeItem("impersonationBackup"),n(null),i(null),h(null),p(null),b(null),t("/login",{replace:!0})},de=async()=>{if(!L){t("/admin",{replace:!0});return}let G=s;if(!G)try{const Q=localStorage.getItem("impersonationBackup");G=Q?JSON.parse(Q):null}catch{G=null}let V=null;if(G!=null&&G.adminCustomToken)try{await IT(Jt,G.adminCustomToken)}catch(Q){V=Q}if(G&&Object.prototype.hasOwnProperty.call(G,"user"))if(G.user===null)localStorage.removeItem("user"),n(null);else{localStorage.setItem("user",G.user);try{n(To(JSON.parse(G.user)))}catch{n(null)}}else localStorage.removeItem("user"),n(null);if(localStorage.removeItem("impersonationBackup"),i(null),h(null),p(null),b(null),V){localStorage.removeItem("user"),n(null),t("/login",{replace:!0});return}t("/admin",{replace:!0})};return l.jsx(Pg,{className:"bg-white",mainClassName:"bg-white",sidebar:l.jsx(Lg,{tone:"dark",header:l.jsxs("div",{className:"space-y-4 text-white",children:[l.jsx(rh,{className:"w-fit",tone:"dark"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Customer"}),l.jsx("h1",{className:"text-xl font-semibold text-white",children:"Mijn EVC"})]})]}),navItems:Zf}),topbar:l.jsx(Bg,{title:k,tone:"brand",user:D,logoTo:"/customer/dashboard",rightSlot:l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3 text-sm text-white",children:[L?l.jsx("button",{type:"button",onClick:de,className:"rounded-full border border-white/40 bg-white/10 px-3 py-1 font-semibold text-white transition hover:bg-white/20",children:"Stop meekijken"}):null,l.jsx("button",{type:"button",onClick:A,className:"rounded-full bg-white px-3 py-1 font-semibold text-evc-blue-600 shadow-sm transition hover:bg-white/90",children:"Log uit"}),l.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 font-medium text-white/90 shadow-sm",children:["Laatste activiteit: ",M]}),I?l.jsxs("span",{className:"hidden rounded-full bg-white px-3 py-1 font-medium text-evc-blue-600 sm:inline",children:["Coach ",I.name]}):null]})}),children:l.jsx(Vg,{context:{customer:E,coach:I,assignment:y,account:e,loadingUser:a,userError:o,firestoreError:N}})})},AP=()=>l.jsx(bR,{children:l.jsxs(dR,{children:[l.jsx(Ie,{path:"/",element:l.jsx(tV,{})}),l.jsx(Ie,{path:"/login",element:l.jsx(ZM,{})}),l.jsx(Ie,{path:"/testing/create-account",element:l.jsx(gV,{})}),l.jsxs(Ie,{path:"/admin",element:l.jsx(TP,{}),children:[l.jsx(Ie,{index:!0,element:l.jsx(rV,{})}),l.jsx(Ie,{path:"assignments",element:l.jsx(lV,{})}),l.jsx(Ie,{path:"trajects",element:l.jsx(uV,{})}),l.jsx(Ie,{path:"profile",element:l.jsx(dV,{})}),l.jsx(Ie,{path:"users",element:l.jsx(mV,{})})]}),l.jsxs(Ie,{path:"/coach",element:l.jsx(NP,{}),children:[l.jsx(Ie,{index:!0,element:l.jsx(XV,{})}),l.jsx(Ie,{path:"customers",element:l.jsx(cP,{})}),l.jsx(Ie,{path:"customers/:customerId",element:l.jsx(pP,{})}),l.jsx(Ie,{path:"feedback",element:l.jsx(gP,{})}),l.jsx(Ie,{path:"aantekeningen",element:l.jsx(_P,{})}),l.jsx(Ie,{path:"messages",element:l.jsx(bP,{})})]}),l.jsxs(Ie,{path:"/customer",element:l.jsx(jP,{}),children:[l.jsx(Ie,{index:!0,element:l.jsx(Rs,{to:"/customer/dashboard",replace:!0})}),l.jsx(Ie,{path:"dashboard",element:l.jsx(bV,{})}),l.jsx(Ie,{path:"profile",element:l.jsx(FV,{})}),l.jsx(Ie,{path:"career-goal",element:l.jsx(GV,{})}),l.jsx(Ie,{path:"portfolio",element:l.jsx(DV,{})}),l.jsx(Ie,{path:"workplace-visit",element:l.jsx(KV,{})}),l.jsx(Ie,{path:"criterium-interview",element:l.jsx($V,{})}),l.jsx(Ie,{path:"contact",element:l.jsx(BV,{})}),l.jsx(Ie,{path:"manual",element:l.jsx(QV,{})})]}),l.jsx(Ie,{path:"/Login.html",element:l.jsx(Rs,{to:"/login",replace:!0})}),l.jsx(Ie,{path:"/Dashboard.html",element:l.jsx(Rs,{to:"/admin",replace:!0})}),l.jsx(Ie,{path:"/Profile.html",element:l.jsx(Rs,{to:"/customer/profile",replace:!0})}),l.jsx(Ie,{path:"/Planning.html",element:l.jsx(Rs,{to:"/customer/portfolio",replace:!0})}),l.jsx(Ie,{path:"/Messages.html",element:l.jsx(Rs,{to:"/customer/contact",replace:!0})}),l.jsx(Ie,{path:"/Evidence.html",element:l.jsx(Rs,{to:"/customer/portfolio",replace:!0})}),l.jsx(Ie,{path:"/index.html",element:l.jsx(Rs,{to:"/",replace:!0})}),l.jsx(Ie,{path:"*",element:l.jsx(Rs,{to:"/",replace:!0})})]})});function SP(){return l.jsx(AP,{})}const CP=vC.createRoot(document.getElementById("root"));CP.render(l.jsx(Lu.StrictMode,{children:l.jsx(SP,{})}));
